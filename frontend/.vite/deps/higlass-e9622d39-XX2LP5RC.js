import {
  Gs,
  ao,
  c$n
} from "./chunk-BBHCMWC6.js";
import {
  require_react_dom
} from "./chunk-XXCRK5JG.js";
import {
  require_react
} from "./chunk-WNPTCGAH.js";
import {
  __toESM
} from "./chunk-5WRI5ZAA.js";

// node_modules/vitessce/dist/higlass-e9622d39.js
var import_react = __toESM(require_react(), 1);
var import_react_dom = __toESM(require_react_dom(), 1);
var UG = {};
(function(e12) {
  (function(t) {
    var r = t.Promise, n = r && // Some of these methods are missing from
    // Firefox/Chrome experimental implementations
    "resolve" in r && "reject" in r && "all" in r && "race" in r && // Older version of the spec had a resolver object
    // as the arg rather than a function
    function() {
      var I;
      return new r(function(x) {
        I = x;
      }), typeof I == "function";
    }();
    e12 ? (e12.Promise = n ? r : A, e12.Polyfill = A) : n || (t.Promise = A);
    var i = "pending", o = "sealed", a = "fulfilled", s = "rejected", l = function() {
    };
    function u(I) {
      return Object.prototype.toString.call(I) === "[object Array]";
    }
    var c = typeof setImmediate < "u" ? setImmediate : setTimeout, f = [], h;
    function d() {
      for (var I = 0; I < f.length; I++)
        f[I][0](f[I][1]);
      f = [], h = false;
    }
    function p(I, x) {
      f.push([I, x]), h || (h = true, c(d, 0));
    }
    function m(I, x) {
      function S(B) {
        _(x, B);
      }
      function N(B) {
        b(x, B);
      }
      try {
        I(S, N);
      } catch (B) {
        N(B);
      }
    }
    function g(I) {
      var x = I.owner, S = x.state_, N = x.data_, B = I[S], w = I.then;
      if (typeof B == "function") {
        S = a;
        try {
          N = B(N);
        } catch (R) {
          b(w, R);
        }
      }
      v(w, N) || (S === a && _(w, N), S === s && b(w, N));
    }
    function v(I, x) {
      var S;
      try {
        if (I === x)
          throw new TypeError("A promises callback cannot return that same promise.");
        if (x && (typeof x == "function" || typeof x == "object")) {
          var N = x.then;
          if (typeof N == "function")
            return N.call(x, function(B) {
              S || (S = true, x !== B ? _(I, B) : y(I, B));
            }, function(B) {
              S || (S = true, b(I, B));
            }), true;
        }
      } catch (B) {
        return S || b(I, B), true;
      }
      return false;
    }
    function _(I, x) {
      (I === x || !v(I, x)) && y(I, x);
    }
    function y(I, x) {
      I.state_ === i && (I.state_ = o, I.data_ = x, p(E, I));
    }
    function b(I, x) {
      I.state_ === i && (I.state_ = o, I.data_ = x, p(P, I));
    }
    function T(I) {
      var x = I.then_;
      I.then_ = void 0;
      for (var S = 0; S < x.length; S++)
        g(x[S]);
    }
    function E(I) {
      I.state_ = a, T(I);
    }
    function P(I) {
      I.state_ = s, T(I);
    }
    function A(I) {
      if (typeof I != "function")
        throw new TypeError("Promise constructor takes a function argument");
      if (!(this instanceof A))
        throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
      this.then_ = [], m(I, this);
    }
    A.prototype = {
      constructor: A,
      state_: i,
      then_: null,
      data_: void 0,
      then: function(I, x) {
        var S = {
          owner: this,
          then: new this.constructor(l),
          fulfilled: I,
          rejected: x
        };
        return this.state_ === a || this.state_ === s ? p(g, S) : this.then_.push(S), S.then;
      },
      catch: function(I) {
        return this.then(null, I);
      }
    }, A.all = function(I) {
      var x = this;
      if (!u(I))
        throw new TypeError("You must pass an array to Promise.all().");
      return new x(function(S, N) {
        var B = [], w = 0;
        function R(K) {
          return w++, function(se) {
            B[K] = se, --w || S(B);
          };
        }
        for (var F = 0, $; F < I.length; F++)
          $ = I[F], $ && typeof $.then == "function" ? $.then(R(F), N) : B[F] = $;
        w || S(B);
      });
    }, A.race = function(I) {
      var x = this;
      if (!u(I))
        throw new TypeError("You must pass an array to Promise.race().");
      return new x(function(S, N) {
        for (var B = 0, w; B < I.length; B++)
          w = I[B], w && typeof w.then == "function" ? w.then(S, N) : S(w);
      });
    }, A.resolve = function(I) {
      var x = this;
      return I && typeof I == "object" && I.constructor === x ? I : new x(function(S) {
        S(I);
      });
    }, A.reject = function(I) {
      var x = this;
      return new x(function(S, N) {
        N(I);
      });
    };
  })(typeof window < "u" ? window : typeof ao < "u" ? ao : typeof self < "u" ? self : ao);
})(UG);
var e5 = Object.getOwnPropertySymbols;
var _te = Object.prototype.hasOwnProperty;
var bte = Object.prototype.propertyIsEnumerable;
function Tte(e12) {
  if (e12 == null)
    throw new TypeError("Object.assign cannot be called with null or undefined");
  return Object(e12);
}
function Ete() {
  try {
    if (!Object.assign)
      return false;
    var e12 = new String("abc");
    if (e12[5] = "de", Object.getOwnPropertyNames(e12)[0] === "5")
      return false;
    for (var t = {}, r = 0; r < 10; r++)
      t["_" + String.fromCharCode(r)] = r;
    var n = Object.getOwnPropertyNames(t).map(function(o) {
      return t[o];
    });
    if (n.join("") !== "0123456789")
      return false;
    var i = {};
    return "abcdefghijklmnopqrst".split("").forEach(function(o) {
      i[o] = o;
    }), Object.keys(Object.assign({}, i)).join("") === "abcdefghijklmnopqrst";
  } catch {
    return false;
  }
}
var Ste = Ete() ? Object.assign : function(e12, t) {
  for (var r, n = Tte(e12), i, o = 1; o < arguments.length; o++) {
    r = Object(arguments[o]);
    for (var a in r)
      _te.call(r, a) && (n[a] = r[a]);
    if (e5) {
      i = e5(r);
      for (var s = 0; s < i.length; s++)
        bte.call(r, i[s]) && (n[i[s]] = r[i[s]]);
    }
  }
  return n;
};
var wte = Gs(Ste);
window.Promise || (window.Promise = UG.Polyfill);
Object.assign || (Object.assign = wte);
var Ate = 16;
Date.now && Date.prototype.getTime || (Date.now = function() {
  return (/* @__PURE__ */ new Date()).getTime();
});
if (!(window.performance && window.performance.now)) {
  Ote = Date.now();
  window.performance || (window.performance = {}), window.performance.now = function() {
    return Date.now() - Ote;
  };
}
var Ote;
var XS = Date.now();
var t5 = ["ms", "moz", "webkit", "o"];
for (WS = 0; WS < t5.length && !window.requestAnimationFrame; ++WS) {
  YS = t5[WS];
  window.requestAnimationFrame = window[YS + "RequestAnimationFrame"], window.cancelAnimationFrame = window[YS + "CancelAnimationFrame"] || window[YS + "CancelRequestAnimationFrame"];
}
var YS;
var WS;
window.requestAnimationFrame || (window.requestAnimationFrame = function(e12) {
  if (typeof e12 != "function")
    throw new TypeError(e12 + "is not a function");
  var t = Date.now(), r = Ate + XS - t;
  return r < 0 && (r = 0), XS = t, window.setTimeout(function() {
    XS = Date.now(), e12(performance.now());
  }, r);
});
window.cancelAnimationFrame || (window.cancelAnimationFrame = function(e12) {
  return clearTimeout(e12);
});
Math.sign || (Math.sign = function(t) {
  return t = Number(t), t === 0 || isNaN(t) ? t : t > 0 ? 1 : -1;
});
Number.isInteger || (Number.isInteger = function(t) {
  return typeof t == "number" && isFinite(t) && Math.floor(t) === t;
});
window.ArrayBuffer || (window.ArrayBuffer = Array);
window.Float32Array || (window.Float32Array = Array);
window.Uint32Array || (window.Uint32Array = Array);
window.Uint16Array || (window.Uint16Array = Array);
window.Uint8Array || (window.Uint8Array = Array);
window.Int32Array || (window.Int32Array = Array);
var qS = /iPhone/i;
var r5 = /iPod/i;
var n5 = /iPad/i;
var i5 = /\biOS-universal(?:.+)Mac\b/i;
var KS = /\bAndroid(?:.+)Mobile\b/i;
var o5 = /Android/i;
var yh = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i;
var Hy = /Silk/i;
var rs = /Windows Phone/i;
var a5 = /\bWindows(?:.+)ARM\b/i;
var s5 = /BlackBerry/i;
var l5 = /BB10/i;
var c5 = /Opera Mini/i;
var u5 = /\b(CriOS|Chrome)(?:.+)Mobile/i;
var h5 = /Mobile(?:.+)Firefox\b/i;
var f5 = function(e12) {
  return typeof e12 < "u" && e12.platform === "MacIntel" && typeof e12.maxTouchPoints == "number" && e12.maxTouchPoints > 1 && typeof MSStream > "u";
};
function Ite(e12) {
  return function(t) {
    return t.test(e12);
  };
}
function Pte(e12) {
  var t = {
    userAgent: "",
    platform: "",
    maxTouchPoints: 0
  };
  !e12 && typeof navigator < "u" ? t = {
    userAgent: navigator.userAgent,
    platform: navigator.platform,
    maxTouchPoints: navigator.maxTouchPoints || 0
  } : typeof e12 == "string" ? t.userAgent = e12 : e12 && e12.userAgent && (t = {
    userAgent: e12.userAgent,
    platform: e12.platform,
    maxTouchPoints: e12.maxTouchPoints || 0
  });
  var r = t.userAgent, n = r.split("[FBAN");
  typeof n[1] < "u" && (r = n[0]), n = r.split("Twitter"), typeof n[1] < "u" && (r = n[0]);
  var i = Ite(r), o = {
    apple: {
      phone: i(qS) && !i(rs),
      ipod: i(r5),
      tablet: !i(qS) && (i(n5) || f5(t)) && !i(rs),
      universal: i(i5),
      device: (i(qS) || i(r5) || i(n5) || i(i5) || f5(t)) && !i(rs)
    },
    amazon: {
      phone: i(yh),
      tablet: !i(yh) && i(Hy),
      device: i(yh) || i(Hy)
    },
    android: {
      phone: !i(rs) && i(yh) || !i(rs) && i(KS),
      tablet: !i(rs) && !i(yh) && !i(KS) && (i(Hy) || i(o5)),
      device: !i(rs) && (i(yh) || i(Hy) || i(KS) || i(o5)) || i(/\bokhttp\b/i)
    },
    windows: {
      phone: i(rs),
      tablet: i(a5),
      device: i(rs) || i(a5)
    },
    other: {
      blackberry: i(s5),
      blackberry10: i(l5),
      opera: i(c5),
      firefox: i(h5),
      chrome: i(u5),
      device: i(s5) || i(l5) || i(c5) || i(h5) || i(u5)
    },
    any: false,
    phone: false,
    tablet: false
  };
  return o.any = o.apple.device || o.android.device || o.windows.device || o.other.device, o.phone = o.apple.phone || o.android.phone || o.windows.phone, o.tablet = o.apple.tablet || o.android.tablet || o.windows.tablet, o;
}
var So = Pte(window.navigator);
function Cte(e12) {
  var t = true;
  if (So.tablet || So.phone) {
    if (So.apple.device) {
      var r = navigator.userAgent.match(/OS (\d+)_(\d+)?/);
      if (r) {
        var n = parseInt(r[1], 10);
        n < 11 && (t = false);
      }
    }
    if (So.android.device) {
      var r = navigator.userAgent.match(/Android\s([0-9.]*)/);
      if (r) {
        var n = parseInt(r[1], 10);
        n < 7 && (t = false);
      }
    }
  }
  return t ? e12 : 4;
}
function xte() {
  return !So.apple.device;
}
var ft = {
  /**
   * If set to true WebGL will attempt make textures mimpaped by default.
   * Mipmapping will only succeed if the base texture uploaded has power of two dimensions.
   *
   * @static
   * @name MIPMAP_TEXTURES
   * @memberof PIXI.settings
   * @type {PIXI.MIPMAP_MODES}
   * @default PIXI.MIPMAP_MODES.POW2
   */
  MIPMAP_TEXTURES: 1,
  /**
   * Default anisotropic filtering level of textures.
   * Usually from 0 to 16
   *
   * @static
   * @name ANISOTROPIC_LEVEL
   * @memberof PIXI.settings
   * @type {number}
   * @default 0
   */
  ANISOTROPIC_LEVEL: 0,
  /**
   * Default resolution / device pixel ratio of the renderer.
   *
   * @static
   * @name RESOLUTION
   * @memberof PIXI.settings
   * @type {number}
   * @default 1
   */
  RESOLUTION: 1,
  /**
   * Default filter resolution.
   *
   * @static
   * @name FILTER_RESOLUTION
   * @memberof PIXI.settings
   * @type {number}
   * @default 1
   */
  FILTER_RESOLUTION: 1,
  /**
   * The maximum textures that this device supports.
   *
   * @static
   * @name SPRITE_MAX_TEXTURES
   * @memberof PIXI.settings
   * @type {number}
   * @default 32
   */
  SPRITE_MAX_TEXTURES: Cte(32),
  // TODO: maybe change to SPRITE.BATCH_SIZE: 2000
  // TODO: maybe add PARTICLE.BATCH_SIZE: 15000
  /**
   * The default sprite batch size.
   *
   * The default aims to balance desktop and mobile devices.
   *
   * @static
   * @name SPRITE_BATCH_SIZE
   * @memberof PIXI.settings
   * @type {number}
   * @default 4096
   */
  SPRITE_BATCH_SIZE: 4096,
  /**
   * The default render options if none are supplied to {@link PIXI.Renderer}
   * or {@link PIXI.CanvasRenderer}.
   *
   * @static
   * @name RENDER_OPTIONS
   * @memberof PIXI.settings
   * @type {object}
   * @property {HTMLCanvasElement} view=null
   * @property {number} resolution=1
   * @property {boolean} antialias=false
   * @property {boolean} autoDensity=false
   * @property {boolean} transparent=false
   * @property {number} backgroundColor=0x000000
   * @property {boolean} clearBeforeRender=true
   * @property {boolean} preserveDrawingBuffer=false
   * @property {number} width=800
   * @property {number} height=600
   * @property {boolean} legacy=false
   */
  RENDER_OPTIONS: {
    view: null,
    antialias: false,
    autoDensity: false,
    transparent: false,
    backgroundColor: 0,
    clearBeforeRender: true,
    preserveDrawingBuffer: false,
    width: 800,
    height: 600,
    legacy: false
  },
  /**
   * Default Garbage Collection mode.
   *
   * @static
   * @name GC_MODE
   * @memberof PIXI.settings
   * @type {PIXI.GC_MODES}
   * @default PIXI.GC_MODES.AUTO
   */
  GC_MODE: 0,
  /**
   * Default Garbage Collection max idle.
   *
   * @static
   * @name GC_MAX_IDLE
   * @memberof PIXI.settings
   * @type {number}
   * @default 3600
   */
  GC_MAX_IDLE: 60 * 60,
  /**
   * Default Garbage Collection maximum check count.
   *
   * @static
   * @name GC_MAX_CHECK_COUNT
   * @memberof PIXI.settings
   * @type {number}
   * @default 600
   */
  GC_MAX_CHECK_COUNT: 60 * 10,
  /**
   * Default wrap modes that are supported by pixi.
   *
   * @static
   * @name WRAP_MODE
   * @memberof PIXI.settings
   * @type {PIXI.WRAP_MODES}
   * @default PIXI.WRAP_MODES.CLAMP
   */
  WRAP_MODE: 33071,
  /**
   * Default scale mode for textures.
   *
   * @static
   * @name SCALE_MODE
   * @memberof PIXI.settings
   * @type {PIXI.SCALE_MODES}
   * @default PIXI.SCALE_MODES.LINEAR
   */
  SCALE_MODE: 1,
  /**
   * Default specify float precision in vertex shader.
   *
   * @static
   * @name PRECISION_VERTEX
   * @memberof PIXI.settings
   * @type {PIXI.PRECISION}
   * @default PIXI.PRECISION.HIGH
   */
  PRECISION_VERTEX: "highp",
  /**
   * Default specify float precision in fragment shader.
   * iOS is best set at highp due to https://github.com/pixijs/pixi.js/issues/3742
   *
   * @static
   * @name PRECISION_FRAGMENT
   * @memberof PIXI.settings
   * @type {PIXI.PRECISION}
   * @default PIXI.PRECISION.MEDIUM
   */
  PRECISION_FRAGMENT: So.apple.device ? "highp" : "mediump",
  /**
   * Can we upload the same buffer in a single frame?
   *
   * @static
   * @name CAN_UPLOAD_SAME_BUFFER
   * @memberof PIXI.settings
   * @type {boolean}
   */
  CAN_UPLOAD_SAME_BUFFER: xte(),
  /**
   * Enables bitmap creation before image load. This feature is experimental.
   *
   * @static
   * @name CREATE_IMAGE_BITMAP
   * @memberof PIXI.settings
   * @type {boolean}
   * @default false
   */
  CREATE_IMAGE_BITMAP: false,
  /**
   * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
   * Advantages can include sharper image quality (like text) and faster rendering on canvas.
   * The main disadvantage is movement of objects may appear less smooth.
   *
   * @static
   * @constant
   * @memberof PIXI.settings
   * @type {boolean}
   * @default false
   */
  ROUND_PIXELS: false
};
var jG = { exports: {} };
(function(e12) {
  var t = Object.prototype.hasOwnProperty, r = "~";
  function n() {
  }
  Object.create && (n.prototype = /* @__PURE__ */ Object.create(null), new n().__proto__ || (r = false));
  function i(l, u, c) {
    this.fn = l, this.context = u, this.once = c || false;
  }
  function o(l, u, c, f, h) {
    if (typeof c != "function")
      throw new TypeError("The listener must be a function");
    var d = new i(c, f || l, h), p = r ? r + u : u;
    return l._events[p] ? l._events[p].fn ? l._events[p] = [l._events[p], d] : l._events[p].push(d) : (l._events[p] = d, l._eventsCount++), l;
  }
  function a(l, u) {
    --l._eventsCount === 0 ? l._events = new n() : delete l._events[u];
  }
  function s() {
    this._events = new n(), this._eventsCount = 0;
  }
  s.prototype.eventNames = function() {
    var u = [], c, f;
    if (this._eventsCount === 0)
      return u;
    for (f in c = this._events)
      t.call(c, f) && u.push(r ? f.slice(1) : f);
    return Object.getOwnPropertySymbols ? u.concat(Object.getOwnPropertySymbols(c)) : u;
  }, s.prototype.listeners = function(u) {
    var c = r ? r + u : u, f = this._events[c];
    if (!f)
      return [];
    if (f.fn)
      return [f.fn];
    for (var h = 0, d = f.length, p = new Array(d); h < d; h++)
      p[h] = f[h].fn;
    return p;
  }, s.prototype.listenerCount = function(u) {
    var c = r ? r + u : u, f = this._events[c];
    return f ? f.fn ? 1 : f.length : 0;
  }, s.prototype.emit = function(u, c, f, h, d, p) {
    var m = r ? r + u : u;
    if (!this._events[m])
      return false;
    var g = this._events[m], v = arguments.length, _, y;
    if (g.fn) {
      switch (g.once && this.removeListener(u, g.fn, void 0, true), v) {
        case 1:
          return g.fn.call(g.context), true;
        case 2:
          return g.fn.call(g.context, c), true;
        case 3:
          return g.fn.call(g.context, c, f), true;
        case 4:
          return g.fn.call(g.context, c, f, h), true;
        case 5:
          return g.fn.call(g.context, c, f, h, d), true;
        case 6:
          return g.fn.call(g.context, c, f, h, d, p), true;
      }
      for (y = 1, _ = new Array(v - 1); y < v; y++)
        _[y - 1] = arguments[y];
      g.fn.apply(g.context, _);
    } else {
      var b = g.length, T;
      for (y = 0; y < b; y++)
        switch (g[y].once && this.removeListener(u, g[y].fn, void 0, true), v) {
          case 1:
            g[y].fn.call(g[y].context);
            break;
          case 2:
            g[y].fn.call(g[y].context, c);
            break;
          case 3:
            g[y].fn.call(g[y].context, c, f);
            break;
          case 4:
            g[y].fn.call(g[y].context, c, f, h);
            break;
          default:
            if (!_)
              for (T = 1, _ = new Array(v - 1); T < v; T++)
                _[T - 1] = arguments[T];
            g[y].fn.apply(g[y].context, _);
        }
    }
    return true;
  }, s.prototype.on = function(u, c, f) {
    return o(this, u, c, f, false);
  }, s.prototype.once = function(u, c, f) {
    return o(this, u, c, f, true);
  }, s.prototype.removeListener = function(u, c, f, h) {
    var d = r ? r + u : u;
    if (!this._events[d])
      return this;
    if (!c)
      return a(this, d), this;
    var p = this._events[d];
    if (p.fn)
      p.fn === c && (!h || p.once) && (!f || p.context === f) && a(this, d);
    else {
      for (var m = 0, g = [], v = p.length; m < v; m++)
        (p[m].fn !== c || h && !p[m].once || f && p[m].context !== f) && g.push(p[m]);
      g.length ? this._events[d] = g.length === 1 ? g[0] : g : a(this, d);
    }
    return this;
  }, s.prototype.removeAllListeners = function(u) {
    var c;
    return u ? (c = r ? r + u : u, this._events[c] && a(this, c)) : (this._events = new n(), this._eventsCount = 0), this;
  }, s.prototype.off = s.prototype.removeListener, s.prototype.addListener = s.prototype.on, s.prefixed = r, s.EventEmitter = s, e12.exports = s;
})(jG);
var kte = jG.exports;
var qd = Gs(kte);
var Xu = {};
var e0 = { exports: {} };
e0.exports;
(function(e12, t) {
  (function(r) {
    var n = t && !t.nodeType && t, i = e12 && !e12.nodeType && e12, o = typeof ao == "object" && ao;
    (o.global === o || o.window === o || o.self === o) && (r = o);
    var a, s = 2147483647, l = 36, u = 1, c = 26, f = 38, h = 700, d = 72, p = 128, m = "-", g = /^xn--/, v = /[^\x20-\x7E]/, _ = /[\x2E\u3002\uFF0E\uFF61]/g, y = {
      overflow: "Overflow: input needs wider integers to process",
      "not-basic": "Illegal input >= 0x80 (not a basic code point)",
      "invalid-input": "Invalid input"
    }, b = l - u, T = Math.floor, E = String.fromCharCode, P;
    function A(J) {
      throw RangeError(y[J]);
    }
    function I(J, me) {
      for (var ae = J.length, Y = []; ae--; )
        Y[ae] = me(J[ae]);
      return Y;
    }
    function x(J, me) {
      var ae = J.split("@"), Y = "";
      ae.length > 1 && (Y = ae[0] + "@", J = ae[1]), J = J.replace(_, ".");
      var Q = J.split("."), le = I(Q, me).join(".");
      return Y + le;
    }
    function S(J) {
      for (var me = [], ae = 0, Y = J.length, Q, le; ae < Y; )
        Q = J.charCodeAt(ae++), Q >= 55296 && Q <= 56319 && ae < Y ? (le = J.charCodeAt(ae++), (le & 64512) == 56320 ? me.push(((Q & 1023) << 10) + (le & 1023) + 65536) : (me.push(Q), ae--)) : me.push(Q);
      return me;
    }
    function N(J) {
      return I(J, function(me) {
        var ae = "";
        return me > 65535 && (me -= 65536, ae += E(me >>> 10 & 1023 | 55296), me = 56320 | me & 1023), ae += E(me), ae;
      }).join("");
    }
    function B(J) {
      return J - 48 < 10 ? J - 22 : J - 65 < 26 ? J - 65 : J - 97 < 26 ? J - 97 : l;
    }
    function w(J, me) {
      return J + 22 + 75 * (J < 26) - ((me != 0) << 5);
    }
    function R(J, me, ae) {
      var Y = 0;
      for (J = ae ? T(J / h) : J >> 1, J += T(J / me); J > b * c >> 1; Y += l)
        J = T(J / b);
      return T(Y + (b + 1) * J / (J + f));
    }
    function F(J) {
      var me = [], ae = J.length, Y, Q = 0, le = p, Se = d, Pe, Re, we, Ne, Me, Ie, Ge, je, ot;
      for (Pe = J.lastIndexOf(m), Pe < 0 && (Pe = 0), Re = 0; Re < Pe; ++Re)
        J.charCodeAt(Re) >= 128 && A("not-basic"), me.push(J.charCodeAt(Re));
      for (we = Pe > 0 ? Pe + 1 : 0; we < ae; ) {
        for (Ne = Q, Me = 1, Ie = l; we >= ae && A("invalid-input"), Ge = B(J.charCodeAt(we++)), (Ge >= l || Ge > T((s - Q) / Me)) && A("overflow"), Q += Ge * Me, je = Ie <= Se ? u : Ie >= Se + c ? c : Ie - Se, !(Ge < je); Ie += l)
          ot = l - je, Me > T(s / ot) && A("overflow"), Me *= ot;
        Y = me.length + 1, Se = R(Q - Ne, Y, Ne == 0), T(Q / Y) > s - le && A("overflow"), le += T(Q / Y), Q %= Y, me.splice(Q++, 0, le);
      }
      return N(me);
    }
    function $(J) {
      var me, ae, Y, Q, le, Se, Pe, Re, we, Ne, Me, Ie = [], Ge, je, ot, at;
      for (J = S(J), Ge = J.length, me = p, ae = 0, le = d, Se = 0; Se < Ge; ++Se)
        Me = J[Se], Me < 128 && Ie.push(E(Me));
      for (Y = Q = Ie.length, Q && Ie.push(m); Y < Ge; ) {
        for (Pe = s, Se = 0; Se < Ge; ++Se)
          Me = J[Se], Me >= me && Me < Pe && (Pe = Me);
        for (je = Y + 1, Pe - me > T((s - ae) / je) && A("overflow"), ae += (Pe - me) * je, me = Pe, Se = 0; Se < Ge; ++Se)
          if (Me = J[Se], Me < me && ++ae > s && A("overflow"), Me == me) {
            for (Re = ae, we = l; Ne = we <= le ? u : we >= le + c ? c : we - le, !(Re < Ne); we += l)
              at = Re - Ne, ot = l - Ne, Ie.push(
                E(w(Ne + at % ot, 0))
              ), Re = T(at / ot);
            Ie.push(E(w(Re, 0))), le = R(ae, je, Y == Q), ae = 0, ++Y;
          }
        ++ae, ++me;
      }
      return Ie.join("");
    }
    function K(J) {
      return x(J, function(me) {
        return g.test(me) ? F(me.slice(4).toLowerCase()) : me;
      });
    }
    function se(J) {
      return x(J, function(me) {
        return v.test(me) ? "xn--" + $(me) : me;
      });
    }
    if (a = {
      /**
       * A string representing the current Punycode.js version number.
       * @memberOf punycode
       * @type String
       */
      version: "1.3.2",
      /**
       * An object of methods to convert from JavaScript's internal character
       * representation (UCS-2) to Unicode code points, and back.
       * @see <https://mathiasbynens.be/notes/javascript-encoding>
       * @memberOf punycode
       * @type Object
       */
      ucs2: {
        decode: S,
        encode: N
      },
      decode: F,
      encode: $,
      toASCII: se,
      toUnicode: K
    }, n && i)
      if (e12.exports == n)
        i.exports = a;
      else
        for (P in a)
          a.hasOwnProperty(P) && (n[P] = a[P]);
    else
      r.punycode = a;
  })(ao);
})(e0, e0.exports);
var Dte = e0.exports;
var Rte = {
  isString: function(e12) {
    return typeof e12 == "string";
  },
  isObject: function(e12) {
    return typeof e12 == "object" && e12 !== null;
  },
  isNull: function(e12) {
    return e12 === null;
  },
  isNullOrUndefined: function(e12) {
    return e12 == null;
  }
};
var jg = {};
function Nte(e12, t) {
  return Object.prototype.hasOwnProperty.call(e12, t);
}
var Mte = function(e12, t, r, n) {
  t = t || "&", r = r || "=";
  var i = {};
  if (typeof e12 != "string" || e12.length === 0)
    return i;
  var o = /\+/g;
  e12 = e12.split(t);
  var a = 1e3;
  n && typeof n.maxKeys == "number" && (a = n.maxKeys);
  var s = e12.length;
  a > 0 && s > a && (s = a);
  for (var l = 0; l < s; ++l) {
    var u = e12[l].replace(o, "%20"), c = u.indexOf(r), f, h, d, p;
    c >= 0 ? (f = u.substr(0, c), h = u.substr(c + 1)) : (f = u, h = ""), d = decodeURIComponent(f), p = decodeURIComponent(h), Nte(i, d) ? Array.isArray(i[d]) ? i[d].push(p) : i[d] = [i[d], p] : i[d] = p;
  }
  return i;
};
var Np = function(e12) {
  switch (typeof e12) {
    case "string":
      return e12;
    case "boolean":
      return e12 ? "true" : "false";
    case "number":
      return isFinite(e12) ? e12 : "";
    default:
      return "";
  }
};
var Lte = function(e12, t, r, n) {
  return t = t || "&", r = r || "=", e12 === null && (e12 = void 0), typeof e12 == "object" ? Object.keys(e12).map(function(i) {
    var o = encodeURIComponent(Np(i)) + r;
    return Array.isArray(e12[i]) ? e12[i].map(function(a) {
      return o + encodeURIComponent(Np(a));
    }).join(t) : o + encodeURIComponent(Np(e12[i]));
  }).join(t) : n ? encodeURIComponent(Np(n)) + r + encodeURIComponent(Np(e12)) : "";
};
jg.decode = jg.parse = Mte;
jg.encode = jg.stringify = Lte;
var Bte = Dte;
var _a = Rte;
var Fte = Xu.parse = xv;
Xu.resolve = Yte;
Xu.resolveObject = qte;
Xu.format = Wte;
Xu.Url = Io;
function Io() {
  this.protocol = null, this.slashes = null, this.auth = null, this.host = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.query = null, this.pathname = null, this.path = null, this.href = null;
}
var $te = /^([a-z0-9.+-]+:)/i;
var Hte = /:[0-9]*$/;
var Ute = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/;
var jte = ["<", ">", '"', "`", " ", "\r", `
`, "	"];
var Gte = ["{", "}", "|", "\\", "^", "`"].concat(jte);
var oI = ["'"].concat(Gte);
var d5 = ["%", "/", "?", ";", "#"].concat(oI);
var p5 = ["/", "?", "#"];
var zte = 255;
var m5 = /^[+a-z0-9A-Z_-]{0,63}$/;
var Vte = /^([+a-z0-9A-Z_-]{0,63})(.*)$/;
var Xte = {
  javascript: true,
  "javascript:": true
};
var aI = {
  javascript: true,
  "javascript:": true
};
var Ef = {
  http: true,
  https: true,
  ftp: true,
  gopher: true,
  file: true,
  "http:": true,
  "https:": true,
  "ftp:": true,
  "gopher:": true,
  "file:": true
};
var sI = jg;
function xv(e12, t, r) {
  if (e12 && _a.isObject(e12) && e12 instanceof Io)
    return e12;
  var n = new Io();
  return n.parse(e12, t, r), n;
}
Io.prototype.parse = function(e12, t, r) {
  if (!_a.isString(e12))
    throw new TypeError("Parameter 'url' must be a string, not " + typeof e12);
  var n = e12.indexOf("?"), i = n !== -1 && n < e12.indexOf("#") ? "?" : "#", o = e12.split(i), a = /\\/g;
  o[0] = o[0].replace(a, "/"), e12 = o.join(i);
  var s = e12;
  if (s = s.trim(), !r && e12.split("#").length === 1) {
    var l = Ute.exec(s);
    if (l)
      return this.path = s, this.href = s, this.pathname = l[1], l[2] ? (this.search = l[2], t ? this.query = sI.parse(this.search.substr(1)) : this.query = this.search.substr(1)) : t && (this.search = "", this.query = {}), this;
  }
  var u = $te.exec(s);
  if (u) {
    u = u[0];
    var c = u.toLowerCase();
    this.protocol = c, s = s.substr(u.length);
  }
  if (r || u || s.match(/^\/\/[^@\/]+@[^@\/]+/)) {
    var f = s.substr(0, 2) === "//";
    f && !(u && aI[u]) && (s = s.substr(2), this.slashes = true);
  }
  if (!aI[u] && (f || u && !Ef[u])) {
    for (var h = -1, d = 0; d < p5.length; d++) {
      var p = s.indexOf(p5[d]);
      p !== -1 && (h === -1 || p < h) && (h = p);
    }
    var m, g;
    h === -1 ? g = s.lastIndexOf("@") : g = s.lastIndexOf("@", h), g !== -1 && (m = s.slice(0, g), s = s.slice(g + 1), this.auth = decodeURIComponent(m)), h = -1;
    for (var d = 0; d < d5.length; d++) {
      var p = s.indexOf(d5[d]);
      p !== -1 && (h === -1 || p < h) && (h = p);
    }
    h === -1 && (h = s.length), this.host = s.slice(0, h), s = s.slice(h), this.parseHost(), this.hostname = this.hostname || "";
    var v = this.hostname[0] === "[" && this.hostname[this.hostname.length - 1] === "]";
    if (!v)
      for (var _ = this.hostname.split(/\./), d = 0, y = _.length; d < y; d++) {
        var b = _[d];
        if (b && !b.match(m5)) {
          for (var T = "", E = 0, P = b.length; E < P; E++)
            b.charCodeAt(E) > 127 ? T += "x" : T += b[E];
          if (!T.match(m5)) {
            var A = _.slice(0, d), I = _.slice(d + 1), x = b.match(Vte);
            x && (A.push(x[1]), I.unshift(x[2])), I.length && (s = "/" + I.join(".") + s), this.hostname = A.join(".");
            break;
          }
        }
      }
    this.hostname.length > zte ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(), v || (this.hostname = Bte.toASCII(this.hostname));
    var S = this.port ? ":" + this.port : "", N = this.hostname || "";
    this.host = N + S, this.href += this.host, v && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), s[0] !== "/" && (s = "/" + s));
  }
  if (!Xte[c])
    for (var d = 0, y = oI.length; d < y; d++) {
      var B = oI[d];
      if (s.indexOf(B) !== -1) {
        var w = encodeURIComponent(B);
        w === B && (w = escape(B)), s = s.split(B).join(w);
      }
    }
  var R = s.indexOf("#");
  R !== -1 && (this.hash = s.substr(R), s = s.slice(0, R));
  var F = s.indexOf("?");
  if (F !== -1 ? (this.search = s.substr(F), this.query = s.substr(F + 1), t && (this.query = sI.parse(this.query)), s = s.slice(0, F)) : t && (this.search = "", this.query = {}), s && (this.pathname = s), Ef[c] && this.hostname && !this.pathname && (this.pathname = "/"), this.pathname || this.search) {
    var S = this.pathname || "", $ = this.search || "";
    this.path = S + $;
  }
  return this.href = this.format(), this;
};
function Wte(e12) {
  return _a.isString(e12) && (e12 = xv(e12)), e12 instanceof Io ? e12.format() : Io.prototype.format.call(e12);
}
Io.prototype.format = function() {
  var e12 = this.auth || "";
  e12 && (e12 = encodeURIComponent(e12), e12 = e12.replace(/%3A/i, ":"), e12 += "@");
  var t = this.protocol || "", r = this.pathname || "", n = this.hash || "", i = false, o = "";
  this.host ? i = e12 + this.host : this.hostname && (i = e12 + (this.hostname.indexOf(":") === -1 ? this.hostname : "[" + this.hostname + "]"), this.port && (i += ":" + this.port)), this.query && _a.isObject(this.query) && Object.keys(this.query).length && (o = sI.stringify(this.query));
  var a = this.search || o && "?" + o || "";
  return t && t.substr(-1) !== ":" && (t += ":"), this.slashes || (!t || Ef[t]) && i !== false ? (i = "//" + (i || ""), r && r.charAt(0) !== "/" && (r = "/" + r)) : i || (i = ""), n && n.charAt(0) !== "#" && (n = "#" + n), a && a.charAt(0) !== "?" && (a = "?" + a), r = r.replace(/[?#]/g, function(s) {
    return encodeURIComponent(s);
  }), a = a.replace("#", "%23"), t + i + r + a + n;
};
function Yte(e12, t) {
  return xv(e12, false, true).resolve(t);
}
Io.prototype.resolve = function(e12) {
  return this.resolveObject(xv(e12, false, true)).format();
};
function qte(e12, t) {
  return e12 ? xv(e12, false, true).resolveObject(t) : t;
}
Io.prototype.resolveObject = function(e12) {
  if (_a.isString(e12)) {
    var t = new Io();
    t.parse(e12, false, true), e12 = t;
  }
  for (var r = new Io(), n = Object.keys(this), i = 0; i < n.length; i++) {
    var o = n[i];
    r[o] = this[o];
  }
  if (r.hash = e12.hash, e12.href === "")
    return r.href = r.format(), r;
  if (e12.slashes && !e12.protocol) {
    for (var a = Object.keys(e12), s = 0; s < a.length; s++) {
      var l = a[s];
      l !== "protocol" && (r[l] = e12[l]);
    }
    return Ef[r.protocol] && r.hostname && !r.pathname && (r.path = r.pathname = "/"), r.href = r.format(), r;
  }
  if (e12.protocol && e12.protocol !== r.protocol) {
    if (!Ef[e12.protocol]) {
      for (var u = Object.keys(e12), c = 0; c < u.length; c++) {
        var f = u[c];
        r[f] = e12[f];
      }
      return r.href = r.format(), r;
    }
    if (r.protocol = e12.protocol, !e12.host && !aI[e12.protocol]) {
      for (var y = (e12.pathname || "").split("/"); y.length && !(e12.host = y.shift()); )
        ;
      e12.host || (e12.host = ""), e12.hostname || (e12.hostname = ""), y[0] !== "" && y.unshift(""), y.length < 2 && y.unshift(""), r.pathname = y.join("/");
    } else
      r.pathname = e12.pathname;
    if (r.search = e12.search, r.query = e12.query, r.host = e12.host || "", r.auth = e12.auth, r.hostname = e12.hostname || e12.host, r.port = e12.port, r.pathname || r.search) {
      var h = r.pathname || "", d = r.search || "";
      r.path = h + d;
    }
    return r.slashes = r.slashes || e12.slashes, r.href = r.format(), r;
  }
  var p = r.pathname && r.pathname.charAt(0) === "/", m = e12.host || e12.pathname && e12.pathname.charAt(0) === "/", g = m || p || r.host && e12.pathname, v = g, _ = r.pathname && r.pathname.split("/") || [], y = e12.pathname && e12.pathname.split("/") || [], b = r.protocol && !Ef[r.protocol];
  if (b && (r.hostname = "", r.port = null, r.host && (_[0] === "" ? _[0] = r.host : _.unshift(r.host)), r.host = "", e12.protocol && (e12.hostname = null, e12.port = null, e12.host && (y[0] === "" ? y[0] = e12.host : y.unshift(e12.host)), e12.host = null), g = g && (y[0] === "" || _[0] === "")), m)
    r.host = e12.host || e12.host === "" ? e12.host : r.host, r.hostname = e12.hostname || e12.hostname === "" ? e12.hostname : r.hostname, r.search = e12.search, r.query = e12.query, _ = y;
  else if (y.length)
    _ || (_ = []), _.pop(), _ = _.concat(y), r.search = e12.search, r.query = e12.query;
  else if (!_a.isNullOrUndefined(e12.search)) {
    if (b) {
      r.hostname = r.host = _.shift();
      var T = r.host && r.host.indexOf("@") > 0 ? r.host.split("@") : false;
      T && (r.auth = T.shift(), r.host = r.hostname = T.shift());
    }
    return r.search = e12.search, r.query = e12.query, (!_a.isNull(r.pathname) || !_a.isNull(r.search)) && (r.path = (r.pathname ? r.pathname : "") + (r.search ? r.search : "")), r.href = r.format(), r;
  }
  if (!_.length)
    return r.pathname = null, r.search ? r.path = "/" + r.search : r.path = null, r.href = r.format(), r;
  for (var E = _.slice(-1)[0], P = (r.host || e12.host || _.length > 1) && (E === "." || E === "..") || E === "", A = 0, I = _.length; I >= 0; I--)
    E = _[I], E === "." ? _.splice(I, 1) : E === ".." ? (_.splice(I, 1), A++) : A && (_.splice(I, 1), A--);
  if (!g && !v)
    for (; A--; A)
      _.unshift("..");
  g && _[0] !== "" && (!_[0] || _[0].charAt(0) !== "/") && _.unshift(""), P && _.join("/").substr(-1) !== "/" && _.push("");
  var x = _[0] === "" || _[0] && _[0].charAt(0) === "/";
  if (b) {
    r.hostname = r.host = x ? "" : _.length ? _.shift() : "";
    var T = r.host && r.host.indexOf("@") > 0 ? r.host.split("@") : false;
    T && (r.auth = T.shift(), r.host = r.hostname = T.shift());
  }
  return g = g || r.host && _.length, g && !x && _.unshift(""), _.length ? r.pathname = _.join("/") : (r.pathname = null, r.path = null), (!_a.isNull(r.pathname) || !_a.isNull(r.search)) && (r.path = (r.pathname ? r.pathname : "") + (r.search ? r.search : "")), r.auth = e12.auth || r.auth, r.slashes = r.slashes || e12.slashes, r.href = r.format(), r;
};
Io.prototype.parseHost = function() {
  var e12 = this.host, t = Hte.exec(e12);
  t && (t = t[0], t !== ":" && (this.port = t.substr(1)), e12 = e12.substr(0, e12.length - t.length)), e12 && (this.hostname = e12);
};
var Ua;
(function(e12) {
  e12[e12.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", e12[e12.WEBGL = 1] = "WEBGL", e12[e12.WEBGL2 = 2] = "WEBGL2";
})(Ua || (Ua = {}));
var qf;
(function(e12) {
  e12[e12.UNKNOWN = 0] = "UNKNOWN", e12[e12.WEBGL = 1] = "WEBGL", e12[e12.CANVAS = 2] = "CANVAS";
})(qf || (qf = {}));
var Gg;
(function(e12) {
  e12[e12.COLOR = 16384] = "COLOR", e12[e12.DEPTH = 256] = "DEPTH", e12[e12.STENCIL = 1024] = "STENCIL";
})(Gg || (Gg = {}));
var yt;
(function(e12) {
  e12[e12.NORMAL = 0] = "NORMAL", e12[e12.ADD = 1] = "ADD", e12[e12.MULTIPLY = 2] = "MULTIPLY", e12[e12.SCREEN = 3] = "SCREEN", e12[e12.OVERLAY = 4] = "OVERLAY", e12[e12.DARKEN = 5] = "DARKEN", e12[e12.LIGHTEN = 6] = "LIGHTEN", e12[e12.COLOR_DODGE = 7] = "COLOR_DODGE", e12[e12.COLOR_BURN = 8] = "COLOR_BURN", e12[e12.HARD_LIGHT = 9] = "HARD_LIGHT", e12[e12.SOFT_LIGHT = 10] = "SOFT_LIGHT", e12[e12.DIFFERENCE = 11] = "DIFFERENCE", e12[e12.EXCLUSION = 12] = "EXCLUSION", e12[e12.HUE = 13] = "HUE", e12[e12.SATURATION = 14] = "SATURATION", e12[e12.COLOR = 15] = "COLOR", e12[e12.LUMINOSITY = 16] = "LUMINOSITY", e12[e12.NORMAL_NPM = 17] = "NORMAL_NPM", e12[e12.ADD_NPM = 18] = "ADD_NPM", e12[e12.SCREEN_NPM = 19] = "SCREEN_NPM", e12[e12.NONE = 20] = "NONE", e12[e12.SRC_OVER = 0] = "SRC_OVER", e12[e12.SRC_IN = 21] = "SRC_IN", e12[e12.SRC_OUT = 22] = "SRC_OUT", e12[e12.SRC_ATOP = 23] = "SRC_ATOP", e12[e12.DST_OVER = 24] = "DST_OVER", e12[e12.DST_IN = 25] = "DST_IN", e12[e12.DST_OUT = 26] = "DST_OUT", e12[e12.DST_ATOP = 27] = "DST_ATOP", e12[e12.ERASE = 26] = "ERASE", e12[e12.SUBTRACT = 28] = "SUBTRACT", e12[e12.XOR = 29] = "XOR";
})(yt || (yt = {}));
var wo;
(function(e12) {
  e12[e12.POINTS = 0] = "POINTS", e12[e12.LINES = 1] = "LINES", e12[e12.LINE_LOOP = 2] = "LINE_LOOP", e12[e12.LINE_STRIP = 3] = "LINE_STRIP", e12[e12.TRIANGLES = 4] = "TRIANGLES", e12[e12.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", e12[e12.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(wo || (wo = {}));
var Kf;
(function(e12) {
  e12[e12.RGBA = 6408] = "RGBA", e12[e12.RGB = 6407] = "RGB", e12[e12.ALPHA = 6406] = "ALPHA", e12[e12.LUMINANCE = 6409] = "LUMINANCE", e12[e12.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", e12[e12.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", e12[e12.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(Kf || (Kf = {}));
var Hl;
(function(e12) {
  e12[e12.TEXTURE_2D = 3553] = "TEXTURE_2D", e12[e12.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", e12[e12.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", e12[e12.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", e12[e12.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", e12[e12.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", e12[e12.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", e12[e12.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", e12[e12.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(Hl || (Hl = {}));
var on;
(function(e12) {
  e12[e12.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", e12[e12.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", e12[e12.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", e12[e12.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", e12[e12.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", e12[e12.FLOAT = 5126] = "FLOAT", e12[e12.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(on || (on = {}));
var Ra;
(function(e12) {
  e12[e12.NEAREST = 0] = "NEAREST", e12[e12.LINEAR = 1] = "LINEAR";
})(Ra || (Ra = {}));
var Ps;
(function(e12) {
  e12[e12.CLAMP = 33071] = "CLAMP", e12[e12.REPEAT = 10497] = "REPEAT", e12[e12.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(Ps || (Ps = {}));
var Zf;
(function(e12) {
  e12[e12.OFF = 0] = "OFF", e12[e12.POW2 = 1] = "POW2", e12[e12.ON = 2] = "ON";
})(Zf || (Zf = {}));
var Rs;
(function(e12) {
  e12[e12.NPM = 0] = "NPM", e12[e12.UNPACK = 1] = "UNPACK", e12[e12.PMA = 2] = "PMA", e12[e12.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", e12[e12.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", e12[e12.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA";
})(Rs || (Rs = {}));
var Ho;
(function(e12) {
  e12[e12.NO = 0] = "NO", e12[e12.YES = 1] = "YES", e12[e12.AUTO = 2] = "AUTO", e12[e12.BLEND = 0] = "BLEND", e12[e12.CLEAR = 1] = "CLEAR", e12[e12.BLIT = 2] = "BLIT";
})(Ho || (Ho = {}));
var t0;
(function(e12) {
  e12[e12.AUTO = 0] = "AUTO", e12[e12.MANUAL = 1] = "MANUAL";
})(t0 || (t0 = {}));
var Yo;
(function(e12) {
  e12.LOW = "lowp", e12.MEDIUM = "mediump", e12.HIGH = "highp";
})(Yo || (Yo = {}));
var Ri;
(function(e12) {
  e12[e12.NONE = 0] = "NONE", e12[e12.SCISSOR = 1] = "SCISSOR", e12[e12.STENCIL = 2] = "STENCIL", e12[e12.SPRITE = 3] = "SPRITE";
})(Ri || (Ri = {}));
var lu;
(function(e12) {
  e12[e12.NONE = 0] = "NONE", e12[e12.LOW = 2] = "LOW", e12[e12.MEDIUM = 4] = "MEDIUM", e12[e12.HIGH = 8] = "HIGH";
})(lu || (lu = {}));
ft.RETINA_PREFIX = /@([0-9\.]+)x/;
ft.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = true;
var lI = false;
var g5 = "5.3.12";
function Kte() {
  lI = true;
}
function GG(e12) {
  var t;
  if (!lI) {
    if (navigator.userAgent.toLowerCase().indexOf("chrome") > -1) {
      var r = [
        `
 %c %c %c PixiJS ` + g5 + " - ✰ " + e12 + ` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,
        "background: #ff66a5; padding:5px 0;",
        "background: #ff66a5; padding:5px 0;",
        "color: #ff66a5; background: #030307; padding:5px 0;",
        "background: #ff66a5; padding:5px 0;",
        "background: #ffc3dc; padding:5px 0;",
        "background: #ff66a5; padding:5px 0;",
        "color: #ff2424; background: #fff; padding:5px 0;",
        "color: #ff2424; background: #fff; padding:5px 0;",
        "color: #ff2424; background: #fff; padding:5px 0;"
      ];
      (t = window.console).log.apply(t, r);
    } else
      window.console && window.console.log("PixiJS " + g5 + " - " + e12 + " - http://www.pixijs.com/");
    lI = true;
  }
}
var ZS;
function zG() {
  return typeof ZS > "u" && (ZS = function() {
    var t = {
      stencil: true,
      failIfMajorPerformanceCaveat: ft.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT
    };
    try {
      if (!window.WebGLRenderingContext)
        return false;
      var r = document.createElement("canvas"), n = r.getContext("webgl", t) || r.getContext("experimental-webgl", t), i = !!(n && n.getContextAttributes().stencil);
      if (n) {
        var o = n.getExtension("WEBGL_lose_context");
        o && o.loseContext();
      }
      return n = null, i;
    } catch {
      return false;
    }
  }()), ZS;
}
function cu(e12, t) {
  return t === void 0 && (t = []), t[0] = (e12 >> 16 & 255) / 255, t[1] = (e12 >> 8 & 255) / 255, t[2] = (e12 & 255) / 255, t;
}
function fD(e12) {
  var t = e12.toString(16);
  return t = "000000".substr(0, 6 - t.length) + t, "#" + t;
}
function dD(e12) {
  return typeof e12 == "string" && e12[0] === "#" && (e12 = e12.substr(1)), parseInt(e12, 16);
}
function Zte(e12) {
  return (e12[0] * 255 << 16) + (e12[1] * 255 << 8) + (e12[2] * 255 | 0);
}
function Qte() {
  for (var e12 = [], t = [], r = 0; r < 32; r++)
    e12[r] = r, t[r] = r;
  e12[yt.NORMAL_NPM] = yt.NORMAL, e12[yt.ADD_NPM] = yt.ADD, e12[yt.SCREEN_NPM] = yt.SCREEN, t[yt.NORMAL] = yt.NORMAL_NPM, t[yt.ADD] = yt.ADD_NPM, t[yt.SCREEN] = yt.SCREEN_NPM;
  var n = [];
  return n.push(t), n.push(e12), n;
}
var pD = Qte();
function mD(e12, t) {
  return pD[t ? 1 : 0][e12];
}
function VG(e12, t, r, n) {
  return r = r || new Float32Array(4), n || n === void 0 ? (r[0] = e12[0] * t, r[1] = e12[1] * t, r[2] = e12[2] * t) : (r[0] = e12[0], r[1] = e12[1], r[2] = e12[2]), r[3] = t, r;
}
function LE(e12, t) {
  if (t === 1)
    return (t * 255 << 24) + e12;
  if (t === 0)
    return 0;
  var r = e12 >> 16 & 255, n = e12 >> 8 & 255, i = e12 & 255;
  return r = r * t + 0.5 | 0, n = n * t + 0.5 | 0, i = i * t + 0.5 | 0, (t * 255 << 24) + (r << 16) + (n << 8) + i;
}
function gD(e12, t, r, n) {
  return r = r || new Float32Array(4), r[0] = (e12 >> 16 & 255) / 255, r[1] = (e12 >> 8 & 255) / 255, r[2] = (e12 & 255) / 255, (n || n === void 0) && (r[0] *= t, r[1] *= t, r[2] *= t), r[3] = t, r;
}
function XG(e12, t) {
  t === void 0 && (t = null);
  var r = e12 * 6;
  if (t = t || new Uint16Array(r), t.length !== r)
    throw new Error("Out buffer length is incorrect, got " + t.length + " and expected " + r);
  for (var n = 0, i = 0; n < r; n += 6, i += 4)
    t[n + 0] = i + 0, t[n + 1] = i + 1, t[n + 2] = i + 2, t[n + 3] = i + 0, t[n + 4] = i + 2, t[n + 5] = i + 3;
  return t;
}
function WG(e12) {
  if (e12.BYTES_PER_ELEMENT === 4)
    return e12 instanceof Float32Array ? "Float32Array" : e12 instanceof Uint32Array ? "Uint32Array" : "Int32Array";
  if (e12.BYTES_PER_ELEMENT === 2) {
    if (e12 instanceof Uint16Array)
      return "Uint16Array";
  } else if (e12.BYTES_PER_ELEMENT === 1 && e12 instanceof Uint8Array)
    return "Uint8Array";
  return null;
}
var Jte = { Float32Array, Uint32Array, Int32Array, Uint8Array };
function ere(e12, t) {
  for (var r = 0, n = 0, i = {}, o = 0; o < e12.length; o++)
    n += t[o], r += e12[o].length;
  for (var a = new ArrayBuffer(r * 4), s = null, l = 0, o = 0; o < e12.length; o++) {
    var u = t[o], c = e12[o], f = WG(c);
    i[f] || (i[f] = new Jte[f](a)), s = i[f];
    for (var h = 0; h < c.length; h++) {
      var d = (h / u | 0) * n + l, p = h % u;
      s[d + p] = c[h];
    }
    l += u;
  }
  return new Float32Array(a);
}
function zg(e12) {
  return e12 += e12 === 0 ? 1 : 0, --e12, e12 |= e12 >>> 1, e12 |= e12 >>> 2, e12 |= e12 >>> 4, e12 |= e12 >>> 8, e12 |= e12 >>> 16, e12 + 1;
}
function cI(e12) {
  return !(e12 & e12 - 1) && !!e12;
}
function uI(e12) {
  var t = (e12 > 65535 ? 1 : 0) << 4;
  e12 >>>= t;
  var r = (e12 > 255 ? 1 : 0) << 3;
  return e12 >>>= r, t |= r, r = (e12 > 15 ? 1 : 0) << 2, e12 >>>= r, t |= r, r = (e12 > 3 ? 1 : 0) << 1, e12 >>>= r, t |= r, t | e12 >> 1;
}
function Jc(e12, t, r) {
  var n = e12.length, i;
  if (!(t >= n || r === 0)) {
    r = t + r > n ? n - t : r;
    var o = n - r;
    for (i = t; i < o; ++i)
      e12[i] = e12[i + r];
    e12.length = o;
  }
}
function jc(e12) {
  return e12 === 0 ? 0 : e12 < 0 ? -1 : 1;
}
var tre = 0;
function uu() {
  return ++tre;
}
var v5 = {};
function ze(e12, t, r) {
  if (r === void 0 && (r = 3), !v5[t]) {
    var n = new Error().stack;
    typeof n > "u" ? console.warn("PixiJS Deprecation Warning: ", t + `
Deprecated since v` + e12) : (n = n.split(`
`).splice(r).join(`
`), console.groupCollapsed ? (console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s", "color:#614108;background:#fffbe6", "font-weight:normal;color:#614108;background:#fffbe6", t + `
Deprecated since v` + e12), console.warn(n), console.groupEnd()) : (console.warn("PixiJS Deprecation Warning: ", t + `
Deprecated since v` + e12), console.warn(n))), v5[t] = true;
  }
}
var hI = {};
var Ni = /* @__PURE__ */ Object.create(null);
var yo = /* @__PURE__ */ Object.create(null);
function rre() {
  var e12;
  for (e12 in Ni)
    Ni[e12].destroy();
  for (e12 in yo)
    yo[e12].destroy();
}
function nre() {
  var e12;
  for (e12 in Ni)
    delete Ni[e12];
  for (e12 in yo)
    delete yo[e12];
}
var fI = (
  /** @class */
  function() {
    function e12(t, r, n) {
      this.canvas = document.createElement("canvas"), this.context = this.canvas.getContext("2d"), this.resolution = n || ft.RESOLUTION, this.resize(t, r);
    }
    return e12.prototype.clear = function() {
      this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }, e12.prototype.resize = function(t, r) {
      this.canvas.width = t * this.resolution, this.canvas.height = r * this.resolution;
    }, e12.prototype.destroy = function() {
      this.context = null, this.canvas = null;
    }, Object.defineProperty(e12.prototype, "width", {
      /**
       * The width of the canvas buffer in pixels.
       *
       * @member {number}
       */
      get: function() {
        return this.canvas.width;
      },
      set: function(t) {
        this.canvas.width = t;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "height", {
      /**
       * The height of the canvas buffer in pixels.
       *
       * @member {number}
       */
      get: function() {
        return this.canvas.height;
      },
      set: function(t) {
        this.canvas.height = t;
      },
      enumerable: false,
      configurable: true
    }), e12;
  }()
);
function YG(e12) {
  var t = e12.width, r = e12.height, n = e12.getContext("2d"), i = n.getImageData(0, 0, t, r), o = i.data, a = o.length, s = {
    top: null,
    left: null,
    right: null,
    bottom: null
  }, l = null, u, c, f;
  for (u = 0; u < a; u += 4)
    o[u + 3] !== 0 && (c = u / 4 % t, f = ~~(u / 4 / t), s.top === null && (s.top = f), (s.left === null || c < s.left) && (s.left = c), (s.right === null || s.right < c) && (s.right = c + 1), (s.bottom === null || s.bottom < f) && (s.bottom = f));
  return s.top !== null && (t = s.right - s.left, r = s.bottom - s.top + 1, l = n.getImageData(s.left, s.top, t, r)), {
    height: r,
    width: t,
    data: l
  };
}
var qG = /^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;
function ire(e12) {
  var t = qG.exec(e12);
  if (t)
    return {
      mediaType: t[1] ? t[1].toLowerCase() : void 0,
      subType: t[2] ? t[2].toLowerCase() : void 0,
      charset: t[3] ? t[3].toLowerCase() : void 0,
      encoding: t[4] ? t[4].toLowerCase() : void 0,
      data: t[5]
    };
}
var Uy;
function KG(e12, t) {
  if (t === void 0 && (t = window.location), e12.indexOf("data:") === 0)
    return "";
  t = t || window.location, Uy || (Uy = document.createElement("a")), Uy.href = e12;
  var r = Fte(Uy.href), n = !r.port && t.port === "" || r.port === t.port;
  return r.hostname !== t.hostname || !n || r.protocol !== t.protocol ? "anonymous" : "";
}
function Vg(e12, t) {
  var r = ft.RETINA_PREFIX.exec(e12);
  return r ? parseFloat(r[1]) : t !== void 0 ? t : 1;
}
var ore = Object.freeze(Object.defineProperty({
  __proto__: null,
  BaseTextureCache: yo,
  CanvasRenderTarget: fI,
  DATA_URI: qG,
  EventEmitter: qd,
  ProgramCache: hI,
  TextureCache: Ni,
  clearTextureCache: nre,
  correctBlendMode: mD,
  createIndicesForQuads: XG,
  decomposeDataUri: ire,
  deprecation: ze,
  destroyTextureCache: rre,
  determineCrossOrigin: KG,
  earcut: c$n,
  getBufferType: WG,
  getResolutionOfUrl: Vg,
  hex2rgb: cu,
  hex2string: fD,
  interleaveTypedArrays: ere,
  isMobile: So,
  isPow2: cI,
  isWebGLSupported: zG,
  log2: uI,
  nextPow2: zg,
  premultiplyBlendMode: pD,
  premultiplyRgba: VG,
  premultiplyTint: LE,
  premultiplyTintToRgba: gD,
  removeItems: Jc,
  rgb2hex: Zte,
  sayHello: GG,
  sign: jc,
  skipHello: Kte,
  string2hex: dD,
  trimCanvas: YG,
  uid: uu,
  url: Xu
}, Symbol.toStringTag, { value: "Module" }));
var Qf = Math.PI * 2;
var ZG = 180 / Math.PI;
var QG = Math.PI / 180;
var Wr;
(function(e12) {
  e12[e12.POLY = 0] = "POLY", e12[e12.RECT = 1] = "RECT", e12[e12.CIRC = 2] = "CIRC", e12[e12.ELIP = 3] = "ELIP", e12[e12.RREC = 4] = "RREC";
})(Wr || (Wr = {}));
var fr = (
  /** @class */
  function() {
    function e12(t, r, n, i) {
      t === void 0 && (t = 0), r === void 0 && (r = 0), n === void 0 && (n = 0), i === void 0 && (i = 0), this.x = Number(t), this.y = Number(r), this.width = Number(n), this.height = Number(i), this.type = Wr.RECT;
    }
    return Object.defineProperty(e12.prototype, "left", {
      /**
       * returns the left edge of the rectangle
       *
       * @member {number}
       */
      get: function() {
        return this.x;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "right", {
      /**
       * returns the right edge of the rectangle
       *
       * @member {number}
       */
      get: function() {
        return this.x + this.width;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "top", {
      /**
       * returns the top edge of the rectangle
       *
       * @member {number}
       */
      get: function() {
        return this.y;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "bottom", {
      /**
       * returns the bottom edge of the rectangle
       *
       * @member {number}
       */
      get: function() {
        return this.y + this.height;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12, "EMPTY", {
      /**
       * A constant empty rectangle.
       *
       * @static
       * @constant
       * @member {PIXI.Rectangle}
       * @return {PIXI.Rectangle} An empty rectangle
       */
      get: function() {
        return new e12(0, 0, 0, 0);
      },
      enumerable: false,
      configurable: true
    }), e12.prototype.clone = function() {
      return new e12(this.x, this.y, this.width, this.height);
    }, e12.prototype.copyFrom = function(t) {
      return this.x = t.x, this.y = t.y, this.width = t.width, this.height = t.height, this;
    }, e12.prototype.copyTo = function(t) {
      return t.x = this.x, t.y = this.y, t.width = this.width, t.height = this.height, t;
    }, e12.prototype.contains = function(t, r) {
      return this.width <= 0 || this.height <= 0 ? false : t >= this.x && t < this.x + this.width && r >= this.y && r < this.y + this.height;
    }, e12.prototype.pad = function(t, r) {
      return t === void 0 && (t = 0), r === void 0 && (r = t), this.x -= t, this.y -= r, this.width += t * 2, this.height += r * 2, this;
    }, e12.prototype.fit = function(t) {
      var r = Math.max(this.x, t.x), n = Math.min(this.x + this.width, t.x + t.width), i = Math.max(this.y, t.y), o = Math.min(this.y + this.height, t.y + t.height);
      return this.x = r, this.width = Math.max(n - r, 0), this.y = i, this.height = Math.max(o - i, 0), this;
    }, e12.prototype.ceil = function(t, r) {
      t === void 0 && (t = 1), r === void 0 && (r = 1e-3);
      var n = Math.ceil((this.x + this.width - r) * t) / t, i = Math.ceil((this.y + this.height - r) * t) / t;
      return this.x = Math.floor((this.x + r) * t) / t, this.y = Math.floor((this.y + r) * t) / t, this.width = n - this.x, this.height = i - this.y, this;
    }, e12.prototype.enlarge = function(t) {
      var r = Math.min(this.x, t.x), n = Math.max(this.x + this.width, t.x + t.width), i = Math.min(this.y, t.y), o = Math.max(this.y + this.height, t.y + t.height);
      return this.x = r, this.width = n - r, this.y = i, this.height = o - i, this;
    }, e12;
  }()
);
var JG = (
  /** @class */
  function() {
    function e12(t, r, n) {
      t === void 0 && (t = 0), r === void 0 && (r = 0), n === void 0 && (n = 0), this.x = t, this.y = r, this.radius = n, this.type = Wr.CIRC;
    }
    return e12.prototype.clone = function() {
      return new e12(this.x, this.y, this.radius);
    }, e12.prototype.contains = function(t, r) {
      if (this.radius <= 0)
        return false;
      var n = this.radius * this.radius, i = this.x - t, o = this.y - r;
      return i *= i, o *= o, i + o <= n;
    }, e12.prototype.getBounds = function() {
      return new fr(this.x - this.radius, this.y - this.radius, this.radius * 2, this.radius * 2);
    }, e12;
  }()
);
var ez = (
  /** @class */
  function() {
    function e12(t, r, n, i) {
      t === void 0 && (t = 0), r === void 0 && (r = 0), n === void 0 && (n = 0), i === void 0 && (i = 0), this.x = t, this.y = r, this.width = n, this.height = i, this.type = Wr.ELIP;
    }
    return e12.prototype.clone = function() {
      return new e12(this.x, this.y, this.width, this.height);
    }, e12.prototype.contains = function(t, r) {
      if (this.width <= 0 || this.height <= 0)
        return false;
      var n = (t - this.x) / this.width, i = (r - this.y) / this.height;
      return n *= n, i *= i, n + i <= 1;
    }, e12.prototype.getBounds = function() {
      return new fr(this.x - this.width, this.y - this.height, this.width, this.height);
    }, e12;
  }()
);
var Sf = (
  /** @class */
  function() {
    function e12() {
      for (var t = arguments, r = [], n = 0; n < arguments.length; n++)
        r[n] = t[n];
      var i = Array.isArray(r[0]) ? r[0] : r;
      if (typeof i[0] != "number") {
        for (var o = [], a = 0, s = i.length; a < s; a++)
          o.push(i[a].x, i[a].y);
        i = o;
      }
      this.points = i, this.type = Wr.POLY, this.closeStroke = true;
    }
    return e12.prototype.clone = function() {
      var t = this.points.slice(), r = new e12(t);
      return r.closeStroke = this.closeStroke, r;
    }, e12.prototype.contains = function(t, r) {
      for (var n = false, i = this.points.length / 2, o = 0, a = i - 1; o < i; a = o++) {
        var s = this.points[o * 2], l = this.points[o * 2 + 1], u = this.points[a * 2], c = this.points[a * 2 + 1], f = l > r != c > r && t < (u - s) * ((r - l) / (c - l)) + s;
        f && (n = !n);
      }
      return n;
    }, e12;
  }()
);
var tz = (
  /** @class */
  function() {
    function e12(t, r, n, i, o) {
      t === void 0 && (t = 0), r === void 0 && (r = 0), n === void 0 && (n = 0), i === void 0 && (i = 0), o === void 0 && (o = 20), this.x = t, this.y = r, this.width = n, this.height = i, this.radius = o, this.type = Wr.RREC;
    }
    return e12.prototype.clone = function() {
      return new e12(this.x, this.y, this.width, this.height, this.radius);
    }, e12.prototype.contains = function(t, r) {
      if (this.width <= 0 || this.height <= 0)
        return false;
      if (t >= this.x && t <= this.x + this.width && r >= this.y && r <= this.y + this.height) {
        if (r >= this.y + this.radius && r <= this.y + this.height - this.radius || t >= this.x + this.radius && t <= this.x + this.width - this.radius)
          return true;
        var n = t - (this.x + this.radius), i = r - (this.y + this.radius), o = this.radius * this.radius;
        if (n * n + i * i <= o || (n = t - (this.x + this.width - this.radius), n * n + i * i <= o) || (i = r - (this.y + this.height - this.radius), n * n + i * i <= o) || (n = t - (this.x + this.radius), n * n + i * i <= o))
          return true;
      }
      return false;
    }, e12;
  }()
);
var In = (
  /** @class */
  function() {
    function e12(t, r) {
      t === void 0 && (t = 0), r === void 0 && (r = 0), this.x = t, this.y = r;
    }
    return e12.prototype.clone = function() {
      return new e12(this.x, this.y);
    }, e12.prototype.copyFrom = function(t) {
      return this.set(t.x, t.y), this;
    }, e12.prototype.copyTo = function(t) {
      return t.set(this.x, this.y), t;
    }, e12.prototype.equals = function(t) {
      return t.x === this.x && t.y === this.y;
    }, e12.prototype.set = function(t, r) {
      return t === void 0 && (t = 0), r === void 0 && (r = t), this.x = t, this.y = r, this;
    }, e12;
  }()
);
var Gc = (
  /** @class */
  function() {
    function e12(t, r, n, i) {
      n === void 0 && (n = 0), i === void 0 && (i = 0), this._x = n, this._y = i, this.cb = t, this.scope = r;
    }
    return e12.prototype.clone = function(t, r) {
      return t === void 0 && (t = this.cb), r === void 0 && (r = this.scope), new e12(t, r, this._x, this._y);
    }, e12.prototype.set = function(t, r) {
      return t === void 0 && (t = 0), r === void 0 && (r = t), (this._x !== t || this._y !== r) && (this._x = t, this._y = r, this.cb.call(this.scope)), this;
    }, e12.prototype.copyFrom = function(t) {
      return (this._x !== t.x || this._y !== t.y) && (this._x = t.x, this._y = t.y, this.cb.call(this.scope)), this;
    }, e12.prototype.copyTo = function(t) {
      return t.set(this._x, this._y), t;
    }, e12.prototype.equals = function(t) {
      return t.x === this._x && t.y === this._y;
    }, Object.defineProperty(e12.prototype, "x", {
      /**
       * The position of the displayObject on the x axis relative to the local coordinates of the parent.
       *
       * @member {number}
       */
      get: function() {
        return this._x;
      },
      set: function(t) {
        this._x !== t && (this._x = t, this.cb.call(this.scope));
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "y", {
      /**
       * The position of the displayObject on the x axis relative to the local coordinates of the parent.
       *
       * @member {number}
       */
      get: function() {
        return this._y;
      },
      set: function(t) {
        this._y !== t && (this._y = t, this.cb.call(this.scope));
      },
      enumerable: false,
      configurable: true
    }), e12;
  }()
);
var sn = (
  /** @class */
  function() {
    function e12(t, r, n, i, o, a) {
      t === void 0 && (t = 1), r === void 0 && (r = 0), n === void 0 && (n = 0), i === void 0 && (i = 1), o === void 0 && (o = 0), a === void 0 && (a = 0), this.array = null, this.a = t, this.b = r, this.c = n, this.d = i, this.tx = o, this.ty = a;
    }
    return e12.prototype.fromArray = function(t) {
      this.a = t[0], this.b = t[1], this.c = t[3], this.d = t[4], this.tx = t[2], this.ty = t[5];
    }, e12.prototype.set = function(t, r, n, i, o, a) {
      return this.a = t, this.b = r, this.c = n, this.d = i, this.tx = o, this.ty = a, this;
    }, e12.prototype.toArray = function(t, r) {
      this.array || (this.array = new Float32Array(9));
      var n = r || this.array;
      return t ? (n[0] = this.a, n[1] = this.b, n[2] = 0, n[3] = this.c, n[4] = this.d, n[5] = 0, n[6] = this.tx, n[7] = this.ty, n[8] = 1) : (n[0] = this.a, n[1] = this.c, n[2] = this.tx, n[3] = this.b, n[4] = this.d, n[5] = this.ty, n[6] = 0, n[7] = 0, n[8] = 1), n;
    }, e12.prototype.apply = function(t, r) {
      r = r || new In();
      var n = t.x, i = t.y;
      return r.x = this.a * n + this.c * i + this.tx, r.y = this.b * n + this.d * i + this.ty, r;
    }, e12.prototype.applyInverse = function(t, r) {
      r = r || new In();
      var n = 1 / (this.a * this.d + this.c * -this.b), i = t.x, o = t.y;
      return r.x = this.d * n * i + -this.c * n * o + (this.ty * this.c - this.tx * this.d) * n, r.y = this.a * n * o + -this.b * n * i + (-this.ty * this.a + this.tx * this.b) * n, r;
    }, e12.prototype.translate = function(t, r) {
      return this.tx += t, this.ty += r, this;
    }, e12.prototype.scale = function(t, r) {
      return this.a *= t, this.d *= r, this.c *= t, this.b *= r, this.tx *= t, this.ty *= r, this;
    }, e12.prototype.rotate = function(t) {
      var r = Math.cos(t), n = Math.sin(t), i = this.a, o = this.c, a = this.tx;
      return this.a = i * r - this.b * n, this.b = i * n + this.b * r, this.c = o * r - this.d * n, this.d = o * n + this.d * r, this.tx = a * r - this.ty * n, this.ty = a * n + this.ty * r, this;
    }, e12.prototype.append = function(t) {
      var r = this.a, n = this.b, i = this.c, o = this.d;
      return this.a = t.a * r + t.b * i, this.b = t.a * n + t.b * o, this.c = t.c * r + t.d * i, this.d = t.c * n + t.d * o, this.tx = t.tx * r + t.ty * i + this.tx, this.ty = t.tx * n + t.ty * o + this.ty, this;
    }, e12.prototype.setTransform = function(t, r, n, i, o, a, s, l, u) {
      return this.a = Math.cos(s + u) * o, this.b = Math.sin(s + u) * o, this.c = -Math.sin(s - l) * a, this.d = Math.cos(s - l) * a, this.tx = t - (n * this.a + i * this.c), this.ty = r - (n * this.b + i * this.d), this;
    }, e12.prototype.prepend = function(t) {
      var r = this.tx;
      if (t.a !== 1 || t.b !== 0 || t.c !== 0 || t.d !== 1) {
        var n = this.a, i = this.c;
        this.a = n * t.a + this.b * t.c, this.b = n * t.b + this.b * t.d, this.c = i * t.a + this.d * t.c, this.d = i * t.b + this.d * t.d;
      }
      return this.tx = r * t.a + this.ty * t.c + t.tx, this.ty = r * t.b + this.ty * t.d + t.ty, this;
    }, e12.prototype.decompose = function(t) {
      var r = this.a, n = this.b, i = this.c, o = this.d, a = -Math.atan2(-i, o), s = Math.atan2(n, r), l = Math.abs(a + s);
      return l < 1e-5 || Math.abs(Qf - l) < 1e-5 ? (t.rotation = s, t.skew.x = t.skew.y = 0) : (t.rotation = 0, t.skew.x = a, t.skew.y = s), t.scale.x = Math.sqrt(r * r + n * n), t.scale.y = Math.sqrt(i * i + o * o), t.position.x = this.tx, t.position.y = this.ty, t;
    }, e12.prototype.invert = function() {
      var t = this.a, r = this.b, n = this.c, i = this.d, o = this.tx, a = t * i - r * n;
      return this.a = i / a, this.b = -r / a, this.c = -n / a, this.d = t / a, this.tx = (n * this.ty - i * o) / a, this.ty = -(t * this.ty - r * o) / a, this;
    }, e12.prototype.identity = function() {
      return this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0, this;
    }, e12.prototype.clone = function() {
      var t = new e12();
      return t.a = this.a, t.b = this.b, t.c = this.c, t.d = this.d, t.tx = this.tx, t.ty = this.ty, t;
    }, e12.prototype.copyTo = function(t) {
      return t.a = this.a, t.b = this.b, t.c = this.c, t.d = this.d, t.tx = this.tx, t.ty = this.ty, t;
    }, e12.prototype.copyFrom = function(t) {
      return this.a = t.a, this.b = t.b, this.c = t.c, this.d = t.d, this.tx = t.tx, this.ty = t.ty, this;
    }, Object.defineProperty(e12, "IDENTITY", {
      /**
       * A default (identity) matrix
       *
       * @static
       * @const
       * @member {PIXI.Matrix}
       */
      get: function() {
        return new e12();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12, "TEMP_MATRIX", {
      /**
       * A temp matrix
       *
       * @static
       * @const
       * @member {PIXI.Matrix}
       */
      get: function() {
        return new e12();
      },
      enumerable: false,
      configurable: true
    }), e12;
  }()
);
var Dc = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1];
var Rc = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1];
var Nc = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1];
var Mc = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1];
var dI = [];
var rz = [];
var jy = Math.sign;
function are() {
  for (var e12 = 0; e12 < 16; e12++) {
    var t = [];
    dI.push(t);
    for (var r = 0; r < 16; r++)
      for (var n = jy(Dc[e12] * Dc[r] + Nc[e12] * Rc[r]), i = jy(Rc[e12] * Dc[r] + Mc[e12] * Rc[r]), o = jy(Dc[e12] * Nc[r] + Nc[e12] * Mc[r]), a = jy(Rc[e12] * Nc[r] + Mc[e12] * Mc[r]), s = 0; s < 16; s++)
        if (Dc[s] === n && Rc[s] === i && Nc[s] === o && Mc[s] === a) {
          t.push(s);
          break;
        }
  }
  for (var e12 = 0; e12 < 16; e12++) {
    var l = new sn();
    l.set(Dc[e12], Rc[e12], Nc[e12], Mc[e12], 0, 0), rz.push(l);
  }
}
are();
var Lr = {
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 0°       | East      |
   *
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  E: 0,
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 45°↻     | Southeast |
   *
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  SE: 1,
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 90°↻     | South     |
   *
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  S: 2,
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 135°↻    | Southwest |
   *
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  SW: 3,
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 180°     | West      |
   *
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  W: 4,
  /**
   * | Rotation    | Direction    |
   * |-------------|--------------|
   * | -135°/225°↻ | Northwest    |
   *
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  NW: 5,
  /**
   * | Rotation    | Direction    |
   * |-------------|--------------|
   * | -90°/270°↻  | North        |
   *
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  N: 6,
  /**
   * | Rotation    | Direction    |
   * |-------------|--------------|
   * | -45°/315°↻  | Northeast    |
   *
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  NE: 7,
  /**
   * Reflection about Y-axis.
   *
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  MIRROR_VERTICAL: 8,
  /**
   * Reflection about the main diagonal.
   *
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  MAIN_DIAGONAL: 10,
  /**
   * Reflection about X-axis.
   *
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  MIRROR_HORIZONTAL: 12,
  /**
   * Reflection about reverse diagonal.
   *
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  REVERSE_DIAGONAL: 14,
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.
   * @return {PIXI.GD8Symmetry} The X-component of the U-axis
   *    after rotating the axes.
   */
  uX: function(e12) {
    return Dc[e12];
  },
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.
   * @return {PIXI.GD8Symmetry} The Y-component of the U-axis
   *    after rotating the axes.
   */
  uY: function(e12) {
    return Rc[e12];
  },
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.
   * @return {PIXI.GD8Symmetry} The X-component of the V-axis
   *    after rotating the axes.
   */
  vX: function(e12) {
    return Nc[e12];
  },
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.
   * @return {PIXI.GD8Symmetry} The Y-component of the V-axis
   *    after rotating the axes.
   */
  vY: function(e12) {
    return Mc[e12];
  },
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} rotation - symmetry whose opposite
   *   is needed. Only rotations have opposite symmetries while
   *   reflections don't.
   * @return {PIXI.GD8Symmetry} The opposite symmetry of `rotation`
   */
  inv: function(e12) {
    return e12 & 8 ? e12 & 15 : -e12 & 7;
  },
  /**
   * Composes the two D8 operations.
   *
   * Taking `^` as reflection:
   *
   * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |
   * |-------|-----|-----|-----|-----|------|-------|-------|-------|
   * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |
   * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |
   * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |
   * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |
   * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |
   * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |
   * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |
   * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |
   *
   * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} rotationSecond - Second operation, which
   *   is the row in the above cayley table.
   * @param {PIXI.GD8Symmetry} rotationFirst - First operation, which
   *   is the column in the above cayley table.
   * @return {PIXI.GD8Symmetry} Composed operation
   */
  add: function(e12, t) {
    return dI[e12][t];
  },
  /**
   * Reverse of `add`.
   *
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} rotationSecond - Second operation
   * @param {PIXI.GD8Symmetry} rotationFirst - First operation
   * @return {PIXI.GD8Symmetry} Result
   */
  sub: function(e12, t) {
    return dI[e12][Lr.inv(t)];
  },
  /**
   * Adds 180 degrees to rotation, which is a commutative
   * operation.
   *
   * @memberof PIXI.groupD8
   * @param {number} rotation - The number to rotate.
   * @returns {number} Rotated number
   */
  rotate180: function(e12) {
    return e12 ^ 4;
  },
  /**
   * Checks if the rotation angle is vertical, i.e. south
   * or north. It doesn't work for reflections.
   *
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} rotation - The number to check.
   * @returns {boolean} Whether or not the direction is vertical
   */
  isVertical: function(e12) {
    return (e12 & 3) === 2;
  },
  /**
   * Approximates the vector `V(dx,dy)` into one of the
   * eight directions provided by `groupD8`.
   *
   * @memberof PIXI.groupD8
   * @param {number} dx - X-component of the vector
   * @param {number} dy - Y-component of the vector
   * @return {PIXI.GD8Symmetry} Approximation of the vector into
   *  one of the eight symmetries.
   */
  byDirection: function(e12, t) {
    return Math.abs(e12) * 2 <= Math.abs(t) ? t >= 0 ? Lr.S : Lr.N : Math.abs(t) * 2 <= Math.abs(e12) ? e12 > 0 ? Lr.E : Lr.W : t > 0 ? e12 > 0 ? Lr.SE : Lr.SW : e12 > 0 ? Lr.NE : Lr.NW;
  },
  /**
   * Helps sprite to compensate texture packer rotation.
   *
   * @memberof PIXI.groupD8
   * @param {PIXI.Matrix} matrix - sprite world matrix
   * @param {PIXI.GD8Symmetry} rotation - The rotation factor to use.
   * @param {number} tx - sprite anchoring
   * @param {number} ty - sprite anchoring
   */
  matrixAppendRotationInv: function(e12, t, r, n) {
    r === void 0 && (r = 0), n === void 0 && (n = 0);
    var i = rz[Lr.inv(t)];
    i.tx = r, i.ty = n, e12.append(i);
  }
};
var vD = (
  /** @class */
  function() {
    function e12() {
      this.worldTransform = new sn(), this.localTransform = new sn(), this.position = new Gc(this.onChange, this, 0, 0), this.scale = new Gc(this.onChange, this, 1, 1), this.pivot = new Gc(this.onChange, this, 0, 0), this.skew = new Gc(this.updateSkew, this, 0, 0), this._rotation = 0, this._cx = 1, this._sx = 0, this._cy = 0, this._sy = 1, this._localID = 0, this._currentLocalID = 0, this._worldID = 0, this._parentID = 0;
    }
    return e12.prototype.onChange = function() {
      this._localID++;
    }, e12.prototype.updateSkew = function() {
      this._cx = Math.cos(this._rotation + this.skew.y), this._sx = Math.sin(this._rotation + this.skew.y), this._cy = -Math.sin(this._rotation - this.skew.x), this._sy = Math.cos(this._rotation - this.skew.x), this._localID++;
    }, e12.prototype.updateLocalTransform = function() {
      var t = this.localTransform;
      this._localID !== this._currentLocalID && (t.a = this._cx * this.scale.x, t.b = this._sx * this.scale.x, t.c = this._cy * this.scale.y, t.d = this._sy * this.scale.y, t.tx = this.position.x - (this.pivot.x * t.a + this.pivot.y * t.c), t.ty = this.position.y - (this.pivot.x * t.b + this.pivot.y * t.d), this._currentLocalID = this._localID, this._parentID = -1);
    }, e12.prototype.updateTransform = function(t) {
      var r = this.localTransform;
      if (this._localID !== this._currentLocalID && (r.a = this._cx * this.scale.x, r.b = this._sx * this.scale.x, r.c = this._cy * this.scale.y, r.d = this._sy * this.scale.y, r.tx = this.position.x - (this.pivot.x * r.a + this.pivot.y * r.c), r.ty = this.position.y - (this.pivot.x * r.b + this.pivot.y * r.d), this._currentLocalID = this._localID, this._parentID = -1), this._parentID !== t._worldID) {
        var n = t.worldTransform, i = this.worldTransform;
        i.a = r.a * n.a + r.b * n.c, i.b = r.a * n.b + r.b * n.d, i.c = r.c * n.a + r.d * n.c, i.d = r.c * n.b + r.d * n.d, i.tx = r.tx * n.a + r.ty * n.c + n.tx, i.ty = r.tx * n.b + r.ty * n.d + n.ty, this._parentID = t._worldID, this._worldID++;
      }
    }, e12.prototype.setFromMatrix = function(t) {
      t.decompose(this), this._localID++;
    }, Object.defineProperty(e12.prototype, "rotation", {
      /**
       * The rotation of the object in radians.
       *
       * @member {number}
       */
      get: function() {
        return this._rotation;
      },
      set: function(t) {
        this._rotation !== t && (this._rotation = t, this.updateSkew());
      },
      enumerable: false,
      configurable: true
    }), e12.IDENTITY = new e12(), e12;
  }()
);
ft.SORTABLE_CHILDREN = false;
var Xg = (
  /** @class */
  function() {
    function e12() {
      this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0, this.rect = null, this.updateID = -1;
    }
    return e12.prototype.isEmpty = function() {
      return this.minX > this.maxX || this.minY > this.maxY;
    }, e12.prototype.clear = function() {
      this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0;
    }, e12.prototype.getRectangle = function(t) {
      return this.minX > this.maxX || this.minY > this.maxY ? fr.EMPTY : (t = t || new fr(0, 0, 1, 1), t.x = this.minX, t.y = this.minY, t.width = this.maxX - this.minX, t.height = this.maxY - this.minY, t);
    }, e12.prototype.addPoint = function(t) {
      this.minX = Math.min(this.minX, t.x), this.maxX = Math.max(this.maxX, t.x), this.minY = Math.min(this.minY, t.y), this.maxY = Math.max(this.maxY, t.y);
    }, e12.prototype.addQuad = function(t) {
      var r = this.minX, n = this.minY, i = this.maxX, o = this.maxY, a = t[0], s = t[1];
      r = a < r ? a : r, n = s < n ? s : n, i = a > i ? a : i, o = s > o ? s : o, a = t[2], s = t[3], r = a < r ? a : r, n = s < n ? s : n, i = a > i ? a : i, o = s > o ? s : o, a = t[4], s = t[5], r = a < r ? a : r, n = s < n ? s : n, i = a > i ? a : i, o = s > o ? s : o, a = t[6], s = t[7], r = a < r ? a : r, n = s < n ? s : n, i = a > i ? a : i, o = s > o ? s : o, this.minX = r, this.minY = n, this.maxX = i, this.maxY = o;
    }, e12.prototype.addFrame = function(t, r, n, i, o) {
      this.addFrameMatrix(t.worldTransform, r, n, i, o);
    }, e12.prototype.addFrameMatrix = function(t, r, n, i, o) {
      var a = t.a, s = t.b, l = t.c, u = t.d, c = t.tx, f = t.ty, h = this.minX, d = this.minY, p = this.maxX, m = this.maxY, g = a * r + l * n + c, v = s * r + u * n + f;
      h = g < h ? g : h, d = v < d ? v : d, p = g > p ? g : p, m = v > m ? v : m, g = a * i + l * n + c, v = s * i + u * n + f, h = g < h ? g : h, d = v < d ? v : d, p = g > p ? g : p, m = v > m ? v : m, g = a * r + l * o + c, v = s * r + u * o + f, h = g < h ? g : h, d = v < d ? v : d, p = g > p ? g : p, m = v > m ? v : m, g = a * i + l * o + c, v = s * i + u * o + f, h = g < h ? g : h, d = v < d ? v : d, p = g > p ? g : p, m = v > m ? v : m, this.minX = h, this.minY = d, this.maxX = p, this.maxY = m;
    }, e12.prototype.addVertexData = function(t, r, n) {
      for (var i = this.minX, o = this.minY, a = this.maxX, s = this.maxY, l = r; l < n; l += 2) {
        var u = t[l], c = t[l + 1];
        i = u < i ? u : i, o = c < o ? c : o, a = u > a ? u : a, s = c > s ? c : s;
      }
      this.minX = i, this.minY = o, this.maxX = a, this.maxY = s;
    }, e12.prototype.addVertices = function(t, r, n, i) {
      this.addVerticesMatrix(t.worldTransform, r, n, i);
    }, e12.prototype.addVerticesMatrix = function(t, r, n, i, o, a) {
      o === void 0 && (o = 0), a === void 0 && (a = o);
      for (var s = t.a, l = t.b, u = t.c, c = t.d, f = t.tx, h = t.ty, d = this.minX, p = this.minY, m = this.maxX, g = this.maxY, v = n; v < i; v += 2) {
        var _ = r[v], y = r[v + 1], b = s * _ + u * y + f, T = c * y + l * _ + h;
        d = Math.min(d, b - o), m = Math.max(m, b + o), p = Math.min(p, T - a), g = Math.max(g, T + a);
      }
      this.minX = d, this.minY = p, this.maxX = m, this.maxY = g;
    }, e12.prototype.addBounds = function(t) {
      var r = this.minX, n = this.minY, i = this.maxX, o = this.maxY;
      this.minX = t.minX < r ? t.minX : r, this.minY = t.minY < n ? t.minY : n, this.maxX = t.maxX > i ? t.maxX : i, this.maxY = t.maxY > o ? t.maxY : o;
    }, e12.prototype.addBoundsMask = function(t, r) {
      var n = t.minX > r.minX ? t.minX : r.minX, i = t.minY > r.minY ? t.minY : r.minY, o = t.maxX < r.maxX ? t.maxX : r.maxX, a = t.maxY < r.maxY ? t.maxY : r.maxY;
      if (n <= o && i <= a) {
        var s = this.minX, l = this.minY, u = this.maxX, c = this.maxY;
        this.minX = n < s ? n : s, this.minY = i < l ? i : l, this.maxX = o > u ? o : u, this.maxY = a > c ? a : c;
      }
    }, e12.prototype.addBoundsMatrix = function(t, r) {
      this.addFrameMatrix(r, t.minX, t.minY, t.maxX, t.maxY);
    }, e12.prototype.addBoundsArea = function(t, r) {
      var n = t.minX > r.x ? t.minX : r.x, i = t.minY > r.y ? t.minY : r.y, o = t.maxX < r.x + r.width ? t.maxX : r.x + r.width, a = t.maxY < r.y + r.height ? t.maxY : r.y + r.height;
      if (n <= o && i <= a) {
        var s = this.minX, l = this.minY, u = this.maxX, c = this.maxY;
        this.minX = n < s ? n : s, this.minY = i < l ? i : l, this.maxX = o > u ? o : u, this.maxY = a > c ? a : c;
      }
    }, e12.prototype.pad = function(t, r) {
      t === void 0 && (t = 0), r === void 0 && (r = t), this.isEmpty() || (this.minX -= t, this.maxX += t, this.minY -= r, this.maxY += r);
    }, e12.prototype.addFramePad = function(t, r, n, i, o, a) {
      t -= o, r -= a, n += o, i += a, this.minX = this.minX < t ? this.minX : t, this.maxX = this.maxX > n ? this.maxX : n, this.minY = this.minY < r ? this.minY : r, this.maxY = this.maxY > i ? this.maxY : i;
    }, e12;
  }()
);
var pI = function(e12, t) {
  return pI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, pI(e12, t);
};
function yD(e12, t) {
  pI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var ln = (
  /** @class */
  function(e12) {
    yD(t, e12);
    function t() {
      var r = e12.call(this) || this;
      return r.tempDisplayObjectParent = null, r.transform = new vD(), r.alpha = 1, r.visible = true, r.renderable = true, r.parent = null, r.worldAlpha = 1, r._lastSortedIndex = 0, r._zIndex = 0, r.filterArea = null, r.filters = null, r._enabledFilters = null, r._bounds = new Xg(), r._localBounds = null, r._boundsID = 0, r._boundsRect = null, r._localBoundsRect = null, r._mask = null, r._destroyed = false, r.isSprite = false, r.isMask = false, r;
    }
    return t.mixin = function(r) {
      for (var n = Object.keys(r), i = 0; i < n.length; ++i) {
        var o = n[i];
        Object.defineProperty(t.prototype, o, Object.getOwnPropertyDescriptor(r, o));
      }
    }, t.prototype._recursivePostUpdateTransform = function() {
      this.parent ? (this.parent._recursivePostUpdateTransform(), this.transform.updateTransform(this.parent.transform)) : this.transform.updateTransform(this._tempDisplayObjectParent.transform);
    }, t.prototype.updateTransform = function() {
      this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha;
    }, t.prototype.getBounds = function(r, n) {
      return r || (this.parent ? (this._recursivePostUpdateTransform(), this.updateTransform()) : (this.parent = this._tempDisplayObjectParent, this.updateTransform(), this.parent = null)), this._bounds.updateID !== this._boundsID && (this.calculateBounds(), this._bounds.updateID = this._boundsID), n || (this._boundsRect || (this._boundsRect = new fr()), n = this._boundsRect), this._bounds.getRectangle(n);
    }, t.prototype.getLocalBounds = function(r) {
      r || (this._localBoundsRect || (this._localBoundsRect = new fr()), r = this._localBoundsRect), this._localBounds || (this._localBounds = new Xg());
      var n = this.transform, i = this.parent;
      this.parent = null, this.transform = this._tempDisplayObjectParent.transform;
      var o = this._bounds, a = this._boundsID;
      this._bounds = this._localBounds;
      var s = this.getBounds(false, r);
      return this.parent = i, this.transform = n, this._bounds = o, this._bounds.updateID += this._boundsID - a, s;
    }, t.prototype.toGlobal = function(r, n, i) {
      return i === void 0 && (i = false), i || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.apply(r, n);
    }, t.prototype.toLocal = function(r, n, i, o) {
      return n && (r = n.toGlobal(r, i, o)), o || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.applyInverse(r, i);
    }, t.prototype.setParent = function(r) {
      if (!r || !r.addChild)
        throw new Error("setParent: Argument must be a Container");
      return r.addChild(this), r;
    }, t.prototype.setTransform = function(r, n, i, o, a, s, l, u, c) {
      return r === void 0 && (r = 0), n === void 0 && (n = 0), i === void 0 && (i = 1), o === void 0 && (o = 1), a === void 0 && (a = 0), s === void 0 && (s = 0), l === void 0 && (l = 0), u === void 0 && (u = 0), c === void 0 && (c = 0), this.position.x = r, this.position.y = n, this.scale.x = i || 1, this.scale.y = o || 1, this.rotation = a, this.skew.x = s, this.skew.y = l, this.pivot.x = u, this.pivot.y = c, this;
    }, t.prototype.destroy = function(r) {
      this.parent && this.parent.removeChild(this), this.removeAllListeners(), this.transform = null, this.parent = null, this._bounds = null, this._mask = null, this.filters = null, this.filterArea = null, this.hitArea = null, this.interactive = false, this.interactiveChildren = false, this._destroyed = true;
    }, Object.defineProperty(t.prototype, "_tempDisplayObjectParent", {
      /**
       * @protected
       * @member {PIXI.Container}
       */
      get: function() {
        return this.tempDisplayObjectParent === null && (this.tempDisplayObjectParent = new _D()), this.tempDisplayObjectParent;
      },
      enumerable: false,
      configurable: true
    }), t.prototype.enableTempParent = function() {
      var r = this.parent;
      return this.parent = this._tempDisplayObjectParent, r;
    }, t.prototype.disableTempParent = function(r) {
      this.parent = r;
    }, Object.defineProperty(t.prototype, "x", {
      /**
       * The position of the displayObject on the x axis relative to the local coordinates of the parent.
       * An alias to position.x
       *
       * @member {number}
       */
      get: function() {
        return this.position.x;
      },
      set: function(r) {
        this.transform.position.x = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "y", {
      /**
       * The position of the displayObject on the y axis relative to the local coordinates of the parent.
       * An alias to position.y
       *
       * @member {number}
       */
      get: function() {
        return this.position.y;
      },
      set: function(r) {
        this.transform.position.y = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "worldTransform", {
      /**
       * Current transform of the object based on world (parent) factors.
       *
       * @member {PIXI.Matrix}
       * @readonly
       */
      get: function() {
        return this.transform.worldTransform;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "localTransform", {
      /**
       * Current transform of the object based on local factors: position, scale, other stuff.
       *
       * @member {PIXI.Matrix}
       * @readonly
       */
      get: function() {
        return this.transform.localTransform;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "position", {
      /**
       * The coordinate of the object relative to the local coordinates of the parent.
       * Assignment by value since pixi-v4.
       *
       * @member {PIXI.ObservablePoint}
       */
      get: function() {
        return this.transform.position;
      },
      set: function(r) {
        this.transform.position.copyFrom(r);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "scale", {
      /**
       * The scale factor of the object.
       * Assignment by value since pixi-v4.
       *
       * @member {PIXI.ObservablePoint}
       */
      get: function() {
        return this.transform.scale;
      },
      set: function(r) {
        this.transform.scale.copyFrom(r);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "pivot", {
      /**
       * The pivot point of the displayObject that it rotates around.
       * Assignment by value since pixi-v4.
       *
       * @member {PIXI.ObservablePoint}
       */
      get: function() {
        return this.transform.pivot;
      },
      set: function(r) {
        this.transform.pivot.copyFrom(r);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "skew", {
      /**
       * The skew factor for the object in radians.
       * Assignment by value since pixi-v4.
       *
       * @member {PIXI.ObservablePoint}
       */
      get: function() {
        return this.transform.skew;
      },
      set: function(r) {
        this.transform.skew.copyFrom(r);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "rotation", {
      /**
       * The rotation of the object in radians.
       * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.
       *
       * @member {number}
       */
      get: function() {
        return this.transform.rotation;
      },
      set: function(r) {
        this.transform.rotation = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "angle", {
      /**
       * The angle of the object in degrees.
       * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.
       *
       * @member {number}
       */
      get: function() {
        return this.transform.rotation * ZG;
      },
      set: function(r) {
        this.transform.rotation = r * QG;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "zIndex", {
      /**
       * The zIndex of the displayObject.
       * If a container has the sortableChildren property set to true, children will be automatically
       * sorted by zIndex value; a higher value will mean it will be moved towards the end of the array,
       * and thus rendered on top of other displayObjects within the same container.
       *
       * @member {number}
       */
      get: function() {
        return this._zIndex;
      },
      set: function(r) {
        this._zIndex = r, this.parent && (this.parent.sortDirty = true);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "worldVisible", {
      /**
       * Indicates if the object is globally visible.
       *
       * @member {boolean}
       * @readonly
       */
      get: function() {
        var r = this;
        do {
          if (!r.visible)
            return false;
          r = r.parent;
        } while (r);
        return true;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "mask", {
      /**
       * Sets a mask for the displayObject. A mask is an object that limits the visibility of an
       * object to the shape of the mask applied to it. In PixiJS a regular mask must be a
       * {@link PIXI.Graphics} or a {@link PIXI.Sprite} object. This allows for much faster masking in canvas as it
       * utilities shape clipping. To remove a mask, set this property to `null`.
       *
       * For sprite mask both alpha and red channel are used. Black mask is the same as transparent mask.
       * @example
       * const graphics = new PIXI.Graphics();
       * graphics.beginFill(0xFF3300);
       * graphics.drawRect(50, 250, 100, 100);
       * graphics.endFill();
       *
       * const sprite = new PIXI.Sprite(texture);
       * sprite.mask = graphics;
       * @todo At the moment, PIXI.CanvasRenderer doesn't support PIXI.Sprite as mask.
       *
       * @member {PIXI.Container|PIXI.MaskData|null}
       */
      get: function() {
        return this._mask;
      },
      set: function(r) {
        if (this._mask) {
          var n = this._mask.maskObject || this._mask;
          n.renderable = true, n.isMask = false;
        }
        if (this._mask = r, this._mask) {
          var n = this._mask.maskObject || this._mask;
          n.renderable = false, n.isMask = true;
        }
      },
      enumerable: false,
      configurable: true
    }), t;
  }(qd)
);
var _D = (
  /** @class */
  function(e12) {
    yD(t, e12);
    function t() {
      var r = e12 !== null && e12.apply(this, arguments) || this;
      return r.sortDirty = null, r;
    }
    return t;
  }(ln)
);
ln.prototype.displayObjectUpdateTransform = ln.prototype.updateTransform;
function sre(e12, t) {
  return e12.zIndex === t.zIndex ? e12._lastSortedIndex - t._lastSortedIndex : e12.zIndex - t.zIndex;
}
var ra = (
  /** @class */
  function(e12) {
    yD(t, e12);
    function t() {
      var r = e12.call(this) || this;
      return r.children = [], r.sortableChildren = ft.SORTABLE_CHILDREN, r.sortDirty = false, r;
    }
    return t.prototype.onChildrenChange = function(r) {
    }, t.prototype.addChild = function() {
      for (var r = arguments, n = [], i = 0; i < arguments.length; i++)
        n[i] = r[i];
      if (n.length > 1)
        for (var o = 0; o < n.length; o++)
          this.addChild(n[o]);
      else {
        var a = n[0];
        a.parent && a.parent.removeChild(a), a.parent = this, this.sortDirty = true, a.transform._parentID = -1, this.children.push(a), this._boundsID++, this.onChildrenChange(this.children.length - 1), this.emit("childAdded", a, this, this.children.length - 1), a.emit("added", this);
      }
      return n[0];
    }, t.prototype.addChildAt = function(r, n) {
      if (n < 0 || n > this.children.length)
        throw new Error(r + "addChildAt: The index " + n + " supplied is out of bounds " + this.children.length);
      return r.parent && r.parent.removeChild(r), r.parent = this, this.sortDirty = true, r.transform._parentID = -1, this.children.splice(n, 0, r), this._boundsID++, this.onChildrenChange(n), r.emit("added", this), this.emit("childAdded", r, this, n), r;
    }, t.prototype.swapChildren = function(r, n) {
      if (r !== n) {
        var i = this.getChildIndex(r), o = this.getChildIndex(n);
        this.children[i] = n, this.children[o] = r, this.onChildrenChange(i < o ? i : o);
      }
    }, t.prototype.getChildIndex = function(r) {
      var n = this.children.indexOf(r);
      if (n === -1)
        throw new Error("The supplied DisplayObject must be a child of the caller");
      return n;
    }, t.prototype.setChildIndex = function(r, n) {
      if (n < 0 || n >= this.children.length)
        throw new Error("The index " + n + " supplied is out of bounds " + this.children.length);
      var i = this.getChildIndex(r);
      Jc(this.children, i, 1), this.children.splice(n, 0, r), this.onChildrenChange(n);
    }, t.prototype.getChildAt = function(r) {
      if (r < 0 || r >= this.children.length)
        throw new Error("getChildAt: Index (" + r + ") does not exist.");
      return this.children[r];
    }, t.prototype.removeChild = function() {
      for (var r = arguments, n = [], i = 0; i < arguments.length; i++)
        n[i] = r[i];
      if (n.length > 1)
        for (var o = 0; o < n.length; o++)
          this.removeChild(n[o]);
      else {
        var a = n[0], s = this.children.indexOf(a);
        if (s === -1)
          return null;
        a.parent = null, a.transform._parentID = -1, Jc(this.children, s, 1), this._boundsID++, this.onChildrenChange(s), a.emit("removed", this), this.emit("childRemoved", a, this, s);
      }
      return n[0];
    }, t.prototype.removeChildAt = function(r) {
      var n = this.getChildAt(r);
      return n.parent = null, n.transform._parentID = -1, Jc(this.children, r, 1), this._boundsID++, this.onChildrenChange(r), n.emit("removed", this), this.emit("childRemoved", n, this, r), n;
    }, t.prototype.removeChildren = function(r, n) {
      r === void 0 && (r = 0), n === void 0 && (n = this.children.length);
      var i = r, o = n, a = o - i, s;
      if (a > 0 && a <= o) {
        s = this.children.splice(i, a);
        for (var l = 0; l < s.length; ++l)
          s[l].parent = null, s[l].transform && (s[l].transform._parentID = -1);
        this._boundsID++, this.onChildrenChange(r);
        for (var l = 0; l < s.length; ++l)
          s[l].emit("removed", this), this.emit("childRemoved", s[l], this, l);
        return s;
      } else if (a === 0 && this.children.length === 0)
        return [];
      throw new RangeError("removeChildren: numeric values are outside the acceptable range.");
    }, t.prototype.sortChildren = function() {
      for (var r = false, n = 0, i = this.children.length; n < i; ++n) {
        var o = this.children[n];
        o._lastSortedIndex = n, !r && o.zIndex !== 0 && (r = true);
      }
      r && this.children.length > 1 && this.children.sort(sre), this.sortDirty = false;
    }, t.prototype.updateTransform = function() {
      this.sortableChildren && this.sortDirty && this.sortChildren(), this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha;
      for (var r = 0, n = this.children.length; r < n; ++r) {
        var i = this.children[r];
        i.visible && i.updateTransform();
      }
    }, t.prototype.calculateBounds = function() {
      this._bounds.clear(), this._calculateBounds();
      for (var r = 0; r < this.children.length; r++) {
        var n = this.children[r];
        if (!(!n.visible || !n.renderable))
          if (n.calculateBounds(), n._mask) {
            var i = n._mask.maskObject || n._mask;
            i.calculateBounds(), this._bounds.addBoundsMask(n._bounds, i._bounds);
          } else
            n.filterArea ? this._bounds.addBoundsArea(n._bounds, n.filterArea) : this._bounds.addBounds(n._bounds);
      }
      this._bounds.updateID = this._boundsID;
    }, t.prototype.getLocalBounds = function(r, n) {
      n === void 0 && (n = false);
      var i = e12.prototype.getLocalBounds.call(this, r);
      if (!n)
        for (var o = 0, a = this.children.length; o < a; ++o) {
          var s = this.children[o];
          s.visible && s.updateTransform();
        }
      return i;
    }, t.prototype._calculateBounds = function() {
    }, t.prototype.render = function(r) {
      if (!(!this.visible || this.worldAlpha <= 0 || !this.renderable))
        if (this._mask || this.filters && this.filters.length)
          this.renderAdvanced(r);
        else {
          this._render(r);
          for (var n = 0, i = this.children.length; n < i; ++n)
            this.children[n].render(r);
        }
    }, t.prototype.renderAdvanced = function(r) {
      r.batch.flush();
      var n = this.filters, i = this._mask;
      if (n) {
        this._enabledFilters || (this._enabledFilters = []), this._enabledFilters.length = 0;
        for (var o = 0; o < n.length; o++)
          n[o].enabled && this._enabledFilters.push(n[o]);
        this._enabledFilters.length && r.filter.push(this, this._enabledFilters);
      }
      i && r.mask.push(this, this._mask), this._render(r);
      for (var o = 0, a = this.children.length; o < a; o++)
        this.children[o].render(r);
      r.batch.flush(), i && r.mask.pop(this), n && this._enabledFilters && this._enabledFilters.length && r.filter.pop();
    }, t.prototype._render = function(r) {
    }, t.prototype.destroy = function(r) {
      e12.prototype.destroy.call(this), this.sortDirty = false;
      var n = typeof r == "boolean" ? r : r && r.children, i = this.removeChildren(0, this.children.length);
      if (n)
        for (var o = 0; o < i.length; ++o)
          i[o].destroy(r);
    }, Object.defineProperty(t.prototype, "width", {
      /**
       * The width of the Container, setting this will actually modify the scale to achieve the value set
       *
       * @member {number}
       */
      get: function() {
        return this.scale.x * this.getLocalBounds().width;
      },
      set: function(r) {
        var n = this.getLocalBounds().width;
        n !== 0 ? this.scale.x = r / n : this.scale.x = 1, this._width = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "height", {
      /**
       * The height of the Container, setting this will actually modify the scale to achieve the value set
       *
       * @member {number}
       */
      get: function() {
        return this.scale.y * this.getLocalBounds().height;
      },
      set: function(r) {
        var n = this.getLocalBounds().height;
        n !== 0 ? this.scale.y = r / n : this.scale.y = 1, this._height = r;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(ln)
);
ra.prototype.containerUpdateTransform = ra.prototype.updateTransform;
var nz = {
  /**
   *  Flag for if the object is accessible. If true AccessibilityManager will overlay a
   *   shadow div with attributes set
   *
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   */
  accessible: false,
  /**
   * Sets the title attribute of the shadow div
   * If accessibleTitle AND accessibleHint has not been this will default to 'displayObject [tabIndex]'
   *
   * @member {?string}
   * @memberof PIXI.DisplayObject#
   */
  accessibleTitle: null,
  /**
   * Sets the aria-label attribute of the shadow div
   *
   * @member {string}
   * @memberof PIXI.DisplayObject#
   */
  accessibleHint: null,
  /**
   * @member {number}
   * @memberof PIXI.DisplayObject#
   * @private
   * @todo Needs docs.
   */
  tabIndex: 0,
  /**
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   * @todo Needs docs.
   */
  _accessibleActive: false,
  /**
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   * @todo Needs docs.
   */
  _accessibleDiv: null,
  /**
   * Specify the type of div the accessible layer is. Screen readers treat the element differently
   * depending on this type. Defaults to button.
   *
   * @member {string}
   * @memberof PIXI.DisplayObject#
   * @default 'button'
   */
  accessibleType: "button",
  /**
   * Specify the pointer-events the accessible div will use
   * Defaults to auto.
   *
   * @member {string}
   * @memberof PIXI.DisplayObject#
   * @default 'auto'
   */
  accessiblePointerEvents: "auto",
  /**
   * Setting to false will prevent any children inside this container to
   * be accessible. Defaults to true.
   *
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   * @default true
   */
  accessibleChildren: true,
  renderId: -1
};
ln.mixin(nz);
var lre = 9;
var Gy = 100;
var cre = 0;
var ure = 0;
var y5 = 2;
var _5 = 1;
var hre = -1e3;
var fre = -1e3;
var dre = 2;
var iz = (
  /** @class */
  function() {
    function e12(t) {
      this._hookDiv = null, (So.tablet || So.phone) && this.createTouchHook();
      var r = document.createElement("div");
      r.style.width = Gy + "px", r.style.height = Gy + "px", r.style.position = "absolute", r.style.top = cre + "px", r.style.left = ure + "px", r.style.zIndex = y5.toString(), this.div = r, this.pool = [], this.renderId = 0, this.debug = false, this.renderer = t, this.children = [], this._onKeyDown = this._onKeyDown.bind(this), this._onMouseMove = this._onMouseMove.bind(this), this._isActive = false, this._isMobileAccessibility = false, this.androidUpdateCount = 0, this.androidUpdateFrequency = 500, window.addEventListener("keydown", this._onKeyDown, false);
    }
    return Object.defineProperty(e12.prototype, "isActive", {
      /**
       * A flag
       * @member {boolean}
       * @readonly
       */
      get: function() {
        return this._isActive;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "isMobileAccessibility", {
      /**
       * A flag
       * @member {boolean}
       * @readonly
       */
      get: function() {
        return this._isMobileAccessibility;
      },
      enumerable: false,
      configurable: true
    }), e12.prototype.createTouchHook = function() {
      var t = this, r = document.createElement("button");
      r.style.width = _5 + "px", r.style.height = _5 + "px", r.style.position = "absolute", r.style.top = hre + "px", r.style.left = fre + "px", r.style.zIndex = dre.toString(), r.style.backgroundColor = "#FF0000", r.title = "select to enable accessability for this content", r.addEventListener("focus", function() {
        t._isMobileAccessibility = true, t.activate(), t.destroyTouchHook();
      }), document.body.appendChild(r), this._hookDiv = r;
    }, e12.prototype.destroyTouchHook = function() {
      this._hookDiv && (document.body.removeChild(this._hookDiv), this._hookDiv = null);
    }, e12.prototype.activate = function() {
      this._isActive || (this._isActive = true, window.document.addEventListener("mousemove", this._onMouseMove, true), window.removeEventListener("keydown", this._onKeyDown, false), this.renderer.on("postrender", this.update, this), this.renderer.view.parentNode && this.renderer.view.parentNode.appendChild(this.div));
    }, e12.prototype.deactivate = function() {
      !this._isActive || this._isMobileAccessibility || (this._isActive = false, window.document.removeEventListener("mousemove", this._onMouseMove, true), window.addEventListener("keydown", this._onKeyDown, false), this.renderer.off("postrender", this.update), this.div.parentNode && this.div.parentNode.removeChild(this.div));
    }, e12.prototype.updateAccessibleObjects = function(t) {
      if (!(!t.visible || !t.accessibleChildren)) {
        t.accessible && t.interactive && (t._accessibleActive || this.addChild(t), t.renderId = this.renderId);
        for (var r = t.children, n = 0; n < r.length; n++)
          this.updateAccessibleObjects(r[n]);
      }
    }, e12.prototype.update = function() {
      var t = performance.now();
      if (!(So.android.device && t < this.androidUpdateCount) && (this.androidUpdateCount = t + this.androidUpdateFrequency, !!this.renderer.renderingToScreen)) {
        this.renderer._lastObjectRendered && this.updateAccessibleObjects(this.renderer._lastObjectRendered);
        var r = this.renderer.view.getBoundingClientRect(), n = this.renderer.resolution, i = r.width / this.renderer.width * n, o = r.height / this.renderer.height * n, a = this.div;
        a.style.left = r.left + "px", a.style.top = r.top + "px", a.style.width = this.renderer.width + "px", a.style.height = this.renderer.height + "px";
        for (var s = 0; s < this.children.length; s++) {
          var l = this.children[s];
          if (l.renderId !== this.renderId)
            l._accessibleActive = false, Jc(this.children, s, 1), this.div.removeChild(l._accessibleDiv), this.pool.push(l._accessibleDiv), l._accessibleDiv = null, s--;
          else {
            a = l._accessibleDiv;
            var u = l.hitArea, c = l.worldTransform;
            l.hitArea ? (a.style.left = (c.tx + u.x * c.a) * i + "px", a.style.top = (c.ty + u.y * c.d) * o + "px", a.style.width = u.width * c.a * i + "px", a.style.height = u.height * c.d * o + "px") : (u = l.getBounds(), this.capHitArea(u), a.style.left = u.x * i + "px", a.style.top = u.y * o + "px", a.style.width = u.width * i + "px", a.style.height = u.height * o + "px", a.title !== l.accessibleTitle && l.accessibleTitle !== null && (a.title = l.accessibleTitle), a.getAttribute("aria-label") !== l.accessibleHint && l.accessibleHint !== null && a.setAttribute("aria-label", l.accessibleHint)), (l.accessibleTitle !== a.title || l.tabIndex !== a.tabIndex) && (a.title = l.accessibleTitle, a.tabIndex = l.tabIndex, this.debug && this.updateDebugHTML(a));
          }
        }
        this.renderId++;
      }
    }, e12.prototype.updateDebugHTML = function(t) {
      t.innerHTML = "type: " + t.type + "</br> title : " + t.title + "</br> tabIndex: " + t.tabIndex;
    }, e12.prototype.capHitArea = function(t) {
      t.x < 0 && (t.width += t.x, t.x = 0), t.y < 0 && (t.height += t.y, t.y = 0), t.x + t.width > this.renderer.width && (t.width = this.renderer.width - t.x), t.y + t.height > this.renderer.height && (t.height = this.renderer.height - t.y);
    }, e12.prototype.addChild = function(t) {
      var r = this.pool.pop();
      r || (r = document.createElement("button"), r.style.width = Gy + "px", r.style.height = Gy + "px", r.style.backgroundColor = this.debug ? "rgba(255,255,255,0.5)" : "transparent", r.style.position = "absolute", r.style.zIndex = y5.toString(), r.style.borderStyle = "none", navigator.userAgent.toLowerCase().indexOf("chrome") > -1 ? r.setAttribute("aria-live", "off") : r.setAttribute("aria-live", "polite"), navigator.userAgent.match(/rv:.*Gecko\//) ? r.setAttribute("aria-relevant", "additions") : r.setAttribute("aria-relevant", "text"), r.addEventListener("click", this._onClick.bind(this)), r.addEventListener("focus", this._onFocus.bind(this)), r.addEventListener("focusout", this._onFocusOut.bind(this))), r.style.pointerEvents = t.accessiblePointerEvents, r.type = t.accessibleType, t.accessibleTitle && t.accessibleTitle !== null ? r.title = t.accessibleTitle : (!t.accessibleHint || t.accessibleHint === null) && (r.title = "displayObject " + t.tabIndex), t.accessibleHint && t.accessibleHint !== null && r.setAttribute("aria-label", t.accessibleHint), this.debug && this.updateDebugHTML(r), t._accessibleActive = true, t._accessibleDiv = r, r.displayObject = t, this.children.push(t), this.div.appendChild(t._accessibleDiv), t._accessibleDiv.tabIndex = t.tabIndex;
    }, e12.prototype._onClick = function(t) {
      var r = this.renderer.plugins.interaction;
      r.dispatchEvent(t.target.displayObject, "click", r.eventData), r.dispatchEvent(t.target.displayObject, "pointertap", r.eventData), r.dispatchEvent(t.target.displayObject, "tap", r.eventData);
    }, e12.prototype._onFocus = function(t) {
      t.target.getAttribute("aria-live") || t.target.setAttribute("aria-live", "assertive");
      var r = this.renderer.plugins.interaction;
      r.dispatchEvent(t.target.displayObject, "mouseover", r.eventData);
    }, e12.prototype._onFocusOut = function(t) {
      t.target.getAttribute("aria-live") || t.target.setAttribute("aria-live", "polite");
      var r = this.renderer.plugins.interaction;
      r.dispatchEvent(t.target.displayObject, "mouseout", r.eventData);
    }, e12.prototype._onKeyDown = function(t) {
      t.keyCode === lre && this.activate();
    }, e12.prototype._onMouseMove = function(t) {
      t.movementX === 0 && t.movementY === 0 || this.deactivate();
    }, e12.prototype.destroy = function() {
      this.destroyTouchHook(), this.div = null, window.document.removeEventListener("mousemove", this._onMouseMove, true), window.removeEventListener("keydown", this._onKeyDown), this.pool = null, this.children = null, this.renderer = null;
    }, e12;
  }()
);
ft.TARGET_FPMS = 0.06;
var ja;
(function(e12) {
  e12[e12.INTERACTION = 50] = "INTERACTION", e12[e12.HIGH = 25] = "HIGH", e12[e12.NORMAL = 0] = "NORMAL", e12[e12.LOW = -25] = "LOW", e12[e12.UTILITY = -50] = "UTILITY";
})(ja || (ja = {}));
var QS = (
  /** @class */
  function() {
    function e12(t, r, n, i) {
      r === void 0 && (r = null), n === void 0 && (n = 0), i === void 0 && (i = false), this.fn = t, this.context = r, this.priority = n, this.once = i, this.next = null, this.previous = null, this._destroyed = false;
    }
    return e12.prototype.match = function(t, r) {
      return r === void 0 && (r = null), this.fn === t && this.context === r;
    }, e12.prototype.emit = function(t) {
      this.fn && (this.context ? this.fn.call(this.context, t) : this.fn(t));
      var r = this.next;
      return this.once && this.destroy(true), this._destroyed && (this.next = null), r;
    }, e12.prototype.connect = function(t) {
      this.previous = t, t.next && (t.next.previous = this), this.next = t.next, t.next = this;
    }, e12.prototype.destroy = function(t) {
      t === void 0 && (t = false), this._destroyed = true, this.fn = null, this.context = null, this.previous && (this.previous.next = this.next), this.next && (this.next.previous = this.previous);
      var r = this.next;
      return this.next = t ? null : r, this.previous = null, r;
    }, e12;
  }()
);
var On = (
  /** @class */
  function() {
    function e12() {
      var t = this;
      this._head = new QS(null, null, 1 / 0), this._requestId = null, this._maxElapsedMS = 100, this._minElapsedMS = 0, this.autoStart = false, this.deltaTime = 1, this.deltaMS = 1 / ft.TARGET_FPMS, this.elapsedMS = 1 / ft.TARGET_FPMS, this.lastTime = -1, this.speed = 1, this.started = false, this._protected = false, this._lastFrame = -1, this._tick = function(r) {
        t._requestId = null, t.started && (t.update(r), t.started && t._requestId === null && t._head.next && (t._requestId = requestAnimationFrame(t._tick)));
      };
    }
    return e12.prototype._requestIfNeeded = function() {
      this._requestId === null && this._head.next && (this.lastTime = performance.now(), this._lastFrame = this.lastTime, this._requestId = requestAnimationFrame(this._tick));
    }, e12.prototype._cancelIfNeeded = function() {
      this._requestId !== null && (cancelAnimationFrame(this._requestId), this._requestId = null);
    }, e12.prototype._startIfPossible = function() {
      this.started ? this._requestIfNeeded() : this.autoStart && this.start();
    }, e12.prototype.add = function(t, r, n) {
      return n === void 0 && (n = ja.NORMAL), this._addListener(new QS(t, r, n));
    }, e12.prototype.addOnce = function(t, r, n) {
      return n === void 0 && (n = ja.NORMAL), this._addListener(new QS(t, r, n, true));
    }, e12.prototype._addListener = function(t) {
      var r = this._head.next, n = this._head;
      if (!r)
        t.connect(n);
      else {
        for (; r; ) {
          if (t.priority > r.priority) {
            t.connect(n);
            break;
          }
          n = r, r = r.next;
        }
        t.previous || t.connect(n);
      }
      return this._startIfPossible(), this;
    }, e12.prototype.remove = function(t, r) {
      for (var n = this._head.next; n; )
        n.match(t, r) ? n = n.destroy() : n = n.next;
      return this._head.next || this._cancelIfNeeded(), this;
    }, Object.defineProperty(e12.prototype, "count", {
      /**
       * The number of listeners on this ticker, calculated by walking through linked list
       *
       * @readonly
       * @member {number}
       */
      get: function() {
        if (!this._head)
          return 0;
        for (var t = 0, r = this._head; r = r.next; )
          t++;
        return t;
      },
      enumerable: false,
      configurable: true
    }), e12.prototype.start = function() {
      this.started || (this.started = true, this._requestIfNeeded());
    }, e12.prototype.stop = function() {
      this.started && (this.started = false, this._cancelIfNeeded());
    }, e12.prototype.destroy = function() {
      if (!this._protected) {
        this.stop();
        for (var t = this._head.next; t; )
          t = t.destroy(true);
        this._head.destroy(), this._head = null;
      }
    }, e12.prototype.update = function(t) {
      t === void 0 && (t = performance.now());
      var r;
      if (t > this.lastTime) {
        if (r = this.elapsedMS = t - this.lastTime, r > this._maxElapsedMS && (r = this._maxElapsedMS), r *= this.speed, this._minElapsedMS) {
          var n = t - this._lastFrame | 0;
          if (n < this._minElapsedMS)
            return;
          this._lastFrame = t - n % this._minElapsedMS;
        }
        this.deltaMS = r, this.deltaTime = this.deltaMS * ft.TARGET_FPMS;
        for (var i = this._head, o = i.next; o; )
          o = o.emit(this.deltaTime);
        i.next || this._cancelIfNeeded();
      } else
        this.deltaTime = this.deltaMS = this.elapsedMS = 0;
      this.lastTime = t;
    }, Object.defineProperty(e12.prototype, "FPS", {
      /**
       * The frames per second at which this ticker is running.
       * The default is approximately 60 in most modern browsers.
       * **Note:** This does not factor in the value of
       * {@link PIXI.Ticker#speed}, which is specific
       * to scaling {@link PIXI.Ticker#deltaTime}.
       *
       * @member {number}
       * @readonly
       */
      get: function() {
        return 1e3 / this.elapsedMS;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "minFPS", {
      /**
       * Manages the maximum amount of milliseconds allowed to
       * elapse between invoking {@link PIXI.Ticker#update}.
       * This value is used to cap {@link PIXI.Ticker#deltaTime},
       * but does not effect the measured value of {@link PIXI.Ticker#FPS}.
       * When setting this property it is clamped to a value between
       * `0` and `PIXI.settings.TARGET_FPMS * 1000`.
       *
       * @member {number}
       * @default 10
       */
      get: function() {
        return 1e3 / this._maxElapsedMS;
      },
      set: function(t) {
        var r = Math.min(this.maxFPS, t), n = Math.min(Math.max(0, r) / 1e3, ft.TARGET_FPMS);
        this._maxElapsedMS = 1 / n;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "maxFPS", {
      /**
       * Manages the minimum amount of milliseconds required to
       * elapse between invoking {@link PIXI.Ticker#update}.
       * This will effect the measured value of {@link PIXI.Ticker#FPS}.
       * If it is set to `0`, then there is no limit; PixiJS will render as many frames as it can.
       * Otherwise it will be at least `minFPS`
       *
       * @member {number}
       * @default 0
       */
      get: function() {
        return this._minElapsedMS ? Math.round(1e3 / this._minElapsedMS) : 0;
      },
      set: function(t) {
        if (t === 0)
          this._minElapsedMS = 0;
        else {
          var r = Math.max(this.minFPS, t);
          this._minElapsedMS = 1 / (r / 1e3);
        }
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12, "shared", {
      /**
       * The shared ticker instance used by {@link PIXI.AnimatedSprite} and by
       * {@link PIXI.VideoResource} to update animation frames / video textures.
       *
       * It may also be used by {@link PIXI.Application} if created with the `sharedTicker` option property set to true.
       *
       * The property {@link PIXI.Ticker#autoStart} is set to `true` for this instance.
       * Please follow the examples for usage, including how to opt-out of auto-starting the shared ticker.
       *
       * @example
       * let ticker = PIXI.Ticker.shared;
       * // Set this to prevent starting this ticker when listeners are added.
       * // By default this is true only for the PIXI.Ticker.shared instance.
       * ticker.autoStart = false;
       * // FYI, call this to ensure the ticker is stopped. It should be stopped
       * // if you have not attempted to render anything yet.
       * ticker.stop();
       * // Call this when you are ready for a running shared ticker.
       * ticker.start();
       *
       * @example
       * // You may use the shared ticker to render...
       * let renderer = PIXI.autoDetectRenderer();
       * let stage = new PIXI.Container();
       * document.body.appendChild(renderer.view);
       * ticker.add(function (time) {
       *     renderer.render(stage);
       * });
       *
       * @example
       * // Or you can just update it manually.
       * ticker.autoStart = false;
       * ticker.stop();
       * function animate(time) {
       *     ticker.update(time);
       *     renderer.render(stage);
       *     requestAnimationFrame(animate);
       * }
       * animate(performance.now());
       *
       * @member {PIXI.Ticker}
       * @static
       */
      get: function() {
        if (!e12._shared) {
          var t = e12._shared = new e12();
          t.autoStart = true, t._protected = true;
        }
        return e12._shared;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12, "system", {
      /**
       * The system ticker instance used by {@link PIXI.InteractionManager} and by
       * {@link PIXI.BasePrepare} for core timing functionality that shouldn't usually need to be paused,
       * unlike the `shared` ticker which drives visual animations and rendering which may want to be paused.
       *
       * The property {@link PIXI.Ticker#autoStart} is set to `true` for this instance.
       *
       * @member {PIXI.Ticker}
       * @static
       */
      get: function() {
        if (!e12._system) {
          var t = e12._system = new e12();
          t.autoStart = true, t._protected = true;
        }
        return e12._system;
      },
      enumerable: false,
      configurable: true
    }), e12;
  }()
);
var oz = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.init = function(t) {
      var r = this;
      t = Object.assign({
        autoStart: true,
        sharedTicker: false
      }, t), Object.defineProperty(this, "ticker", {
        set: function(n) {
          this._ticker && this._ticker.remove(this.render, this), this._ticker = n, n && n.add(this.render, this, ja.LOW);
        },
        get: function() {
          return this._ticker;
        }
      }), this.stop = function() {
        r._ticker.stop();
      }, this.start = function() {
        r._ticker.start();
      }, this._ticker = null, this.ticker = t.sharedTicker ? On.shared : new On(), t.autoStart && this.start();
    }, e12.destroy = function() {
      if (this._ticker) {
        var t = this._ticker;
        this.ticker = null, t.destroy();
      }
    }, e12;
  }()
);
var mI = (
  /** @class */
  function() {
    function e12() {
      this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0, this.global = new In(), this.target = null, this.originalEvent = null, this.identifier = null, this.isPrimary = false, this.button = 0, this.buttons = 0, this.width = 0, this.height = 0, this.tiltX = 0, this.tiltY = 0, this.pointerType = null, this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0;
    }
    return Object.defineProperty(e12.prototype, "pointerId", {
      /**
       * The unique identifier of the pointer. It will be the same as `identifier`.
       * @readonly
       * @member {number}
       * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerId
       */
      get: function() {
        return this.identifier;
      },
      enumerable: false,
      configurable: true
    }), e12.prototype.getLocalPosition = function(t, r, n) {
      return t.worldTransform.applyInverse(n || this.global, r);
    }, e12.prototype.copyEvent = function(t) {
      "isPrimary" in t && t.isPrimary && (this.isPrimary = true), this.button = "button" in t && t.button;
      var r = "buttons" in t && t.buttons;
      this.buttons = Number.isInteger(r) ? r : "which" in t && t.which, this.width = "width" in t && t.width, this.height = "height" in t && t.height, this.tiltX = "tiltX" in t && t.tiltX, this.tiltY = "tiltY" in t && t.tiltY, this.pointerType = "pointerType" in t && t.pointerType, this.pressure = "pressure" in t && t.pressure, this.rotationAngle = "rotationAngle" in t && t.rotationAngle, this.twist = "twist" in t && t.twist || 0, this.tangentialPressure = "tangentialPressure" in t && t.tangentialPressure || 0;
    }, e12.prototype.reset = function() {
      this.isPrimary = false;
    }, e12;
  }()
);
var gI = function(e12, t) {
  return gI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, gI(e12, t);
};
function pre(e12, t) {
  gI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var az = (
  /** @class */
  function() {
    function e12() {
      this.stopped = false, this.stopsPropagatingAt = null, this.stopPropagationHint = false, this.target = null, this.currentTarget = null, this.type = null, this.data = null;
    }
    return e12.prototype.stopPropagation = function() {
      this.stopped = true, this.stopPropagationHint = true, this.stopsPropagatingAt = this.currentTarget;
    }, e12.prototype.reset = function() {
      this.stopped = false, this.stopsPropagatingAt = null, this.stopPropagationHint = false, this.currentTarget = null, this.target = null;
    }, e12;
  }()
);
var Q_ = (
  /** @class */
  function() {
    function e12(t) {
      this._pointerId = t, this._flags = e12.FLAGS.NONE;
    }
    return e12.prototype._doSet = function(t, r) {
      r ? this._flags = this._flags | t : this._flags = this._flags & ~t;
    }, Object.defineProperty(e12.prototype, "pointerId", {
      /**
       * Unique pointer id of the event
       *
       * @readonly
       * @private
       * @member {number}
       */
      get: function() {
        return this._pointerId;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "flags", {
      /**
       * State of the tracking data, expressed as bit flags
       *
       * @private
       * @member {number}
       */
      get: function() {
        return this._flags;
      },
      set: function(t) {
        this._flags = t;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "none", {
      /**
       * Is the tracked event inactive (not over or down)?
       *
       * @private
       * @member {number}
       */
      get: function() {
        return this._flags === e12.FLAGS.NONE;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "over", {
      /**
       * Is the tracked event over the DisplayObject?
       *
       * @private
       * @member {boolean}
       */
      get: function() {
        return (this._flags & e12.FLAGS.OVER) !== 0;
      },
      set: function(t) {
        this._doSet(e12.FLAGS.OVER, t);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "rightDown", {
      /**
       * Did the right mouse button come down in the DisplayObject?
       *
       * @private
       * @member {boolean}
       */
      get: function() {
        return (this._flags & e12.FLAGS.RIGHT_DOWN) !== 0;
      },
      set: function(t) {
        this._doSet(e12.FLAGS.RIGHT_DOWN, t);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "leftDown", {
      /**
       * Did the left mouse button come down in the DisplayObject?
       *
       * @private
       * @member {boolean}
       */
      get: function() {
        return (this._flags & e12.FLAGS.LEFT_DOWN) !== 0;
      },
      set: function(t) {
        this._doSet(e12.FLAGS.LEFT_DOWN, t);
      },
      enumerable: false,
      configurable: true
    }), e12.FLAGS = Object.freeze({
      NONE: 0,
      OVER: 1,
      LEFT_DOWN: 2,
      RIGHT_DOWN: 4
    }), e12;
  }()
);
var mre = (
  /** @class */
  function() {
    function e12() {
      this._tempPoint = new In();
    }
    return e12.prototype.recursiveFindHit = function(t, r, n, i, o) {
      if (!r || !r.visible)
        return false;
      var a = t.data.global;
      o = r.interactive || o;
      var s = false, l = o, u = true;
      if (r.hitArea ? (i && (r.worldTransform.applyInverse(a, this._tempPoint), r.hitArea.contains(this._tempPoint.x, this._tempPoint.y) ? s = true : (i = false, u = false)), l = false) : r._mask && i && (r._mask.containsPoint && r._mask.containsPoint(a) || (i = false)), u && r.interactiveChildren && r.children)
        for (var c = r.children, f = c.length - 1; f >= 0; f--) {
          var h = c[f], d = this.recursiveFindHit(t, h, n, i, l);
          if (d) {
            if (!h.parent)
              continue;
            l = false, d && (t.target && (i = false), s = true);
          }
        }
      return o && (i && !t.target && !r.hitArea && r.containsPoint && r.containsPoint(a) && (s = true), r.interactive && (s && !t.target && (t.target = r), n && n(t, r, !!s))), s;
    }, e12.prototype.findHit = function(t, r, n, i) {
      this.recursiveFindHit(t, r, n, i, false);
    }, e12;
  }()
);
var sz = {
  /**
   * Enable interaction events for the DisplayObject. Touch, pointer and mouse
   * events will not be emitted unless `interactive` is set to `true`.
   *
   * @example
   * const sprite = new PIXI.Sprite(texture);
   * sprite.interactive = true;
   * sprite.on('tap', (event) => {
   *    //handle event
   * });
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   */
  interactive: false,
  /**
   * Determines if the children to the displayObject can be clicked/touched
   * Setting this to false allows PixiJS to bypass a recursive `hitTest` function
   *
   * @member {boolean}
   * @memberof PIXI.Container#
   */
  interactiveChildren: true,
  /**
   * Interaction shape. Children will be hit first, then this shape will be checked.
   * Setting this will cause this shape to be checked in hit tests rather than the displayObject's bounds.
   *
   * @example
   * const sprite = new PIXI.Sprite(texture);
   * sprite.interactive = true;
   * sprite.hitArea = new PIXI.Rectangle(0, 0, 100, 100);
   * @member {PIXI.IHitArea}
   * @memberof PIXI.DisplayObject#
   */
  hitArea: null,
  /**
   * If enabled, the mouse cursor use the pointer behavior when hovered over the displayObject if it is interactive
   * Setting this changes the 'cursor' property to `'pointer'`.
   *
   * @example
   * const sprite = new PIXI.Sprite(texture);
   * sprite.interactive = true;
   * sprite.buttonMode = true;
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   */
  get buttonMode() {
    return this.cursor === "pointer";
  },
  set buttonMode(e12) {
    e12 ? this.cursor = "pointer" : this.cursor === "pointer" && (this.cursor = null);
  },
  /**
   * This defines what cursor mode is used when the mouse cursor
   * is hovered over the displayObject.
   *
   * @example
   * const sprite = new PIXI.Sprite(texture);
   * sprite.interactive = true;
   * sprite.cursor = 'wait';
   * @see https://developer.mozilla.org/en/docs/Web/CSS/cursor
   *
   * @member {string}
   * @memberof PIXI.DisplayObject#
   */
  cursor: null,
  /**
   * Internal set of all active pointers, by identifier
   *
   * @member {Map<number, InteractionTrackingData>}
   * @memberof PIXI.DisplayObject#
   * @private
   */
  get trackedPointers() {
    return this._trackedPointers === void 0 && (this._trackedPointers = {}), this._trackedPointers;
  },
  /**
   * Map of all tracked pointers, by identifier. Use trackedPointers to access.
   *
   * @private
   * @type {Map<number, InteractionTrackingData>}
   */
  _trackedPointers: void 0
};
ln.mixin(sz);
var zy = 1;
var Vy = {
  target: null,
  data: {
    global: null
  }
};
var lz = (
  /** @class */
  function(e12) {
    pre(t, e12);
    function t(r, n) {
      var i = e12.call(this) || this;
      return n = n || {}, i.renderer = r, i.autoPreventDefault = n.autoPreventDefault !== void 0 ? n.autoPreventDefault : true, i.interactionFrequency = n.interactionFrequency || 10, i.mouse = new mI(), i.mouse.identifier = zy, i.mouse.global.set(-999999), i.activeInteractionData = {}, i.activeInteractionData[zy] = i.mouse, i.interactionDataPool = [], i.eventData = new az(), i.interactionDOMElement = null, i.moveWhenInside = false, i.eventsAdded = false, i.tickerAdded = false, i.mouseOverRenderer = false, i.supportsTouchEvents = "ontouchstart" in window, i.supportsPointerEvents = !!window.PointerEvent, i.onPointerUp = i.onPointerUp.bind(i), i.processPointerUp = i.processPointerUp.bind(i), i.onPointerCancel = i.onPointerCancel.bind(i), i.processPointerCancel = i.processPointerCancel.bind(i), i.onPointerDown = i.onPointerDown.bind(i), i.processPointerDown = i.processPointerDown.bind(i), i.onPointerMove = i.onPointerMove.bind(i), i.processPointerMove = i.processPointerMove.bind(i), i.onPointerOut = i.onPointerOut.bind(i), i.processPointerOverOut = i.processPointerOverOut.bind(i), i.onPointerOver = i.onPointerOver.bind(i), i.cursorStyles = {
        default: "inherit",
        pointer: "pointer"
      }, i.currentCursorMode = null, i.cursor = null, i.resolution = 1, i.delayedEvents = [], i.search = new mre(), i._tempDisplayObject = new _D(), i._useSystemTicker = n.useSystemTicker !== void 0 ? n.useSystemTicker : true, i.setTargetElement(i.renderer.view, i.renderer.resolution), i;
    }
    return Object.defineProperty(t.prototype, "useSystemTicker", {
      /**
       * Should the InteractionManager automatically add {@link tickerUpdate} to {@link PIXI.Ticker.system}.
       *
       * @member {boolean}
       * @default true
       */
      get: function() {
        return this._useSystemTicker;
      },
      set: function(r) {
        this._useSystemTicker = r, r ? this.addTickerListener() : this.removeTickerListener();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "lastObjectRendered", {
      /**
       * Last rendered object or temp object
       * @readonly
       * @protected
       * @member {PIXI.DisplayObject}
       */
      get: function() {
        return this.renderer._lastObjectRendered || this._tempDisplayObject;
      },
      enumerable: false,
      configurable: true
    }), t.prototype.hitTest = function(r, n) {
      return Vy.target = null, Vy.data.global = r, n || (n = this.lastObjectRendered), this.processInteractive(Vy, n, null, true), Vy.target;
    }, t.prototype.setTargetElement = function(r, n) {
      n === void 0 && (n = 1), this.removeTickerListener(), this.removeEvents(), this.interactionDOMElement = r, this.resolution = n, this.addEvents(), this.addTickerListener();
    }, t.prototype.addTickerListener = function() {
      this.tickerAdded || !this.interactionDOMElement || !this._useSystemTicker || (On.system.add(this.tickerUpdate, this, ja.INTERACTION), this.tickerAdded = true);
    }, t.prototype.removeTickerListener = function() {
      this.tickerAdded && (On.system.remove(this.tickerUpdate, this), this.tickerAdded = false);
    }, t.prototype.addEvents = function() {
      if (!(this.eventsAdded || !this.interactionDOMElement)) {
        var r = this.interactionDOMElement.style;
        window.navigator.msPointerEnabled ? (r.msContentZooming = "none", r.msTouchAction = "none") : this.supportsPointerEvents && (r.touchAction = "none"), this.supportsPointerEvents ? (window.document.addEventListener("pointermove", this.onPointerMove, true), this.interactionDOMElement.addEventListener("pointerdown", this.onPointerDown, true), this.interactionDOMElement.addEventListener("pointerleave", this.onPointerOut, true), this.interactionDOMElement.addEventListener("pointerover", this.onPointerOver, true), window.addEventListener("pointercancel", this.onPointerCancel, true), window.addEventListener("pointerup", this.onPointerUp, true)) : (window.document.addEventListener("mousemove", this.onPointerMove, true), this.interactionDOMElement.addEventListener("mousedown", this.onPointerDown, true), this.interactionDOMElement.addEventListener("mouseout", this.onPointerOut, true), this.interactionDOMElement.addEventListener("mouseover", this.onPointerOver, true), window.addEventListener("mouseup", this.onPointerUp, true)), this.supportsTouchEvents && (this.interactionDOMElement.addEventListener("touchstart", this.onPointerDown, true), this.interactionDOMElement.addEventListener("touchcancel", this.onPointerCancel, true), this.interactionDOMElement.addEventListener("touchend", this.onPointerUp, true), this.interactionDOMElement.addEventListener("touchmove", this.onPointerMove, true)), this.eventsAdded = true;
      }
    }, t.prototype.removeEvents = function() {
      if (!(!this.eventsAdded || !this.interactionDOMElement)) {
        var r = this.interactionDOMElement.style;
        window.navigator.msPointerEnabled ? (r.msContentZooming = "", r.msTouchAction = "") : this.supportsPointerEvents && (r.touchAction = ""), this.supportsPointerEvents ? (window.document.removeEventListener("pointermove", this.onPointerMove, true), this.interactionDOMElement.removeEventListener("pointerdown", this.onPointerDown, true), this.interactionDOMElement.removeEventListener("pointerleave", this.onPointerOut, true), this.interactionDOMElement.removeEventListener("pointerover", this.onPointerOver, true), window.removeEventListener("pointercancel", this.onPointerCancel, true), window.removeEventListener("pointerup", this.onPointerUp, true)) : (window.document.removeEventListener("mousemove", this.onPointerMove, true), this.interactionDOMElement.removeEventListener("mousedown", this.onPointerDown, true), this.interactionDOMElement.removeEventListener("mouseout", this.onPointerOut, true), this.interactionDOMElement.removeEventListener("mouseover", this.onPointerOver, true), window.removeEventListener("mouseup", this.onPointerUp, true)), this.supportsTouchEvents && (this.interactionDOMElement.removeEventListener("touchstart", this.onPointerDown, true), this.interactionDOMElement.removeEventListener("touchcancel", this.onPointerCancel, true), this.interactionDOMElement.removeEventListener("touchend", this.onPointerUp, true), this.interactionDOMElement.removeEventListener("touchmove", this.onPointerMove, true)), this.interactionDOMElement = null, this.eventsAdded = false;
      }
    }, t.prototype.tickerUpdate = function(r) {
      this._deltaTime += r, !(this._deltaTime < this.interactionFrequency) && (this._deltaTime = 0, this.update());
    }, t.prototype.update = function() {
      if (this.interactionDOMElement) {
        if (this._didMove) {
          this._didMove = false;
          return;
        }
        this.cursor = null;
        for (var r in this.activeInteractionData)
          if (this.activeInteractionData.hasOwnProperty(r)) {
            var n = this.activeInteractionData[r];
            if (n.originalEvent && n.pointerType !== "touch") {
              var i = this.configureInteractionEventForDOMEvent(this.eventData, n.originalEvent, n);
              this.processInteractive(i, this.lastObjectRendered, this.processPointerOverOut, true);
            }
          }
        this.setCursorMode(this.cursor);
      }
    }, t.prototype.setCursorMode = function(r) {
      if (r = r || "default", this.currentCursorMode !== r) {
        this.currentCursorMode = r;
        var n = this.cursorStyles[r];
        if (n)
          switch (typeof n) {
            case "string":
              this.interactionDOMElement.style.cursor = n;
              break;
            case "function":
              n(r);
              break;
            case "object":
              Object.assign(this.interactionDOMElement.style, n);
              break;
          }
        else
          typeof r == "string" && !Object.prototype.hasOwnProperty.call(this.cursorStyles, r) && (this.interactionDOMElement.style.cursor = r);
      }
    }, t.prototype.dispatchEvent = function(r, n, i) {
      (!i.stopPropagationHint || r === i.stopsPropagatingAt) && (i.currentTarget = r, i.type = n, r.emit(n, i), r[n] && r[n](i));
    }, t.prototype.delayDispatchEvent = function(r, n, i) {
      this.delayedEvents.push({ displayObject: r, eventString: n, eventData: i });
    }, t.prototype.mapPositionToPoint = function(r, n, i) {
      var o;
      this.interactionDOMElement.parentElement ? o = this.interactionDOMElement.getBoundingClientRect() : o = { x: 0, y: 0, width: 0, height: 0 };
      var a = 1 / this.resolution;
      r.x = (n - o.left) * (this.interactionDOMElement.width / o.width) * a, r.y = (i - o.top) * (this.interactionDOMElement.height / o.height) * a;
    }, t.prototype.processInteractive = function(r, n, i, o) {
      var a = this.search.findHit(r, n, i, o), s = this.delayedEvents;
      if (!s.length)
        return a;
      r.stopPropagationHint = false;
      var l = s.length;
      this.delayedEvents = [];
      for (var u = 0; u < l; u++) {
        var c = s[u], f = c.displayObject, h = c.eventString, d = c.eventData;
        d.stopsPropagatingAt === f && (d.stopPropagationHint = true), this.dispatchEvent(f, h, d);
      }
      return a;
    }, t.prototype.onPointerDown = function(r) {
      if (!(this.supportsTouchEvents && r.pointerType === "touch")) {
        var n = this.normalizeToPointerData(r);
        if (this.autoPreventDefault && n[0].isNormalized) {
          var i = r.cancelable || !("cancelable" in r);
          i && r.preventDefault();
        }
        for (var o = n.length, a = 0; a < o; a++) {
          var s = n[a], l = this.getInteractionDataForPointerId(s), u = this.configureInteractionEventForDOMEvent(this.eventData, s, l);
          if (u.data.originalEvent = r, this.processInteractive(u, this.lastObjectRendered, this.processPointerDown, true), this.emit("pointerdown", u), s.pointerType === "touch")
            this.emit("touchstart", u);
          else if (s.pointerType === "mouse" || s.pointerType === "pen") {
            var c = s.button === 2;
            this.emit(c ? "rightdown" : "mousedown", this.eventData);
          }
        }
      }
    }, t.prototype.processPointerDown = function(r, n, i) {
      var o = r.data, a = r.data.identifier;
      if (i) {
        if (n.trackedPointers[a] || (n.trackedPointers[a] = new Q_(a)), this.dispatchEvent(n, "pointerdown", r), o.pointerType === "touch")
          this.dispatchEvent(n, "touchstart", r);
        else if (o.pointerType === "mouse" || o.pointerType === "pen") {
          var s = o.button === 2;
          s ? n.trackedPointers[a].rightDown = true : n.trackedPointers[a].leftDown = true, this.dispatchEvent(n, s ? "rightdown" : "mousedown", r);
        }
      }
    }, t.prototype.onPointerComplete = function(r, n, i) {
      for (var o = this.normalizeToPointerData(r), a = o.length, s = r.target !== this.interactionDOMElement ? "outside" : "", l = 0; l < a; l++) {
        var u = o[l], c = this.getInteractionDataForPointerId(u), f = this.configureInteractionEventForDOMEvent(this.eventData, u, c);
        if (f.data.originalEvent = r, this.processInteractive(f, this.lastObjectRendered, i, n || !s), this.emit(n ? "pointercancel" : "pointerup" + s, f), u.pointerType === "mouse" || u.pointerType === "pen") {
          var h = u.button === 2;
          this.emit(h ? "rightup" + s : "mouseup" + s, f);
        } else
          u.pointerType === "touch" && (this.emit(n ? "touchcancel" : "touchend" + s, f), this.releaseInteractionDataForPointerId(u.pointerId));
      }
    }, t.prototype.onPointerCancel = function(r) {
      this.supportsTouchEvents && r.pointerType === "touch" || this.onPointerComplete(r, true, this.processPointerCancel);
    }, t.prototype.processPointerCancel = function(r, n) {
      var i = r.data, o = r.data.identifier;
      n.trackedPointers[o] !== void 0 && (delete n.trackedPointers[o], this.dispatchEvent(n, "pointercancel", r), i.pointerType === "touch" && this.dispatchEvent(n, "touchcancel", r));
    }, t.prototype.onPointerUp = function(r) {
      this.supportsTouchEvents && r.pointerType === "touch" || this.onPointerComplete(r, false, this.processPointerUp);
    }, t.prototype.processPointerUp = function(r, n, i) {
      var o = r.data, a = r.data.identifier, s = n.trackedPointers[a], l = o.pointerType === "touch", u = o.pointerType === "mouse" || o.pointerType === "pen", c = false;
      if (u) {
        var f = o.button === 2, h = Q_.FLAGS, d = f ? h.RIGHT_DOWN : h.LEFT_DOWN, p = s !== void 0 && s.flags & d;
        i ? (this.dispatchEvent(n, f ? "rightup" : "mouseup", r), p && (this.dispatchEvent(n, f ? "rightclick" : "click", r), c = true)) : p && this.dispatchEvent(n, f ? "rightupoutside" : "mouseupoutside", r), s && (f ? s.rightDown = false : s.leftDown = false);
      }
      i ? (this.dispatchEvent(n, "pointerup", r), l && this.dispatchEvent(n, "touchend", r), s && ((!u || c) && this.dispatchEvent(n, "pointertap", r), l && (this.dispatchEvent(n, "tap", r), s.over = false))) : s && (this.dispatchEvent(n, "pointerupoutside", r), l && this.dispatchEvent(n, "touchendoutside", r)), s && s.none && delete n.trackedPointers[a];
    }, t.prototype.onPointerMove = function(r) {
      if (!(this.supportsTouchEvents && r.pointerType === "touch")) {
        var n = this.normalizeToPointerData(r);
        (n[0].pointerType === "mouse" || n[0].pointerType === "pen") && (this._didMove = true, this.cursor = null);
        for (var i = n.length, o = 0; o < i; o++) {
          var a = n[o], s = this.getInteractionDataForPointerId(a), l = this.configureInteractionEventForDOMEvent(this.eventData, a, s);
          l.data.originalEvent = r, this.processInteractive(l, this.lastObjectRendered, this.processPointerMove, true), this.emit("pointermove", l), a.pointerType === "touch" && this.emit("touchmove", l), (a.pointerType === "mouse" || a.pointerType === "pen") && this.emit("mousemove", l);
        }
        n[0].pointerType === "mouse" && this.setCursorMode(this.cursor);
      }
    }, t.prototype.processPointerMove = function(r, n, i) {
      var o = r.data, a = o.pointerType === "touch", s = o.pointerType === "mouse" || o.pointerType === "pen";
      s && this.processPointerOverOut(r, n, i), (!this.moveWhenInside || i) && (this.dispatchEvent(n, "pointermove", r), a && this.dispatchEvent(n, "touchmove", r), s && this.dispatchEvent(n, "mousemove", r));
    }, t.prototype.onPointerOut = function(r) {
      if (!(this.supportsTouchEvents && r.pointerType === "touch")) {
        var n = this.normalizeToPointerData(r), i = n[0];
        i.pointerType === "mouse" && (this.mouseOverRenderer = false, this.setCursorMode(null));
        var o = this.getInteractionDataForPointerId(i), a = this.configureInteractionEventForDOMEvent(this.eventData, i, o);
        a.data.originalEvent = i, this.processInteractive(a, this.lastObjectRendered, this.processPointerOverOut, false), this.emit("pointerout", a), i.pointerType === "mouse" || i.pointerType === "pen" ? this.emit("mouseout", a) : this.releaseInteractionDataForPointerId(o.identifier);
      }
    }, t.prototype.processPointerOverOut = function(r, n, i) {
      var o = r.data, a = r.data.identifier, s = o.pointerType === "mouse" || o.pointerType === "pen", l = n.trackedPointers[a];
      i && !l && (l = n.trackedPointers[a] = new Q_(a)), l !== void 0 && (i && this.mouseOverRenderer ? (l.over || (l.over = true, this.delayDispatchEvent(n, "pointerover", r), s && this.delayDispatchEvent(n, "mouseover", r)), s && this.cursor === null && (this.cursor = n.cursor)) : l.over && (l.over = false, this.dispatchEvent(n, "pointerout", this.eventData), s && this.dispatchEvent(n, "mouseout", r), l.none && delete n.trackedPointers[a]));
    }, t.prototype.onPointerOver = function(r) {
      var n = this.normalizeToPointerData(r), i = n[0], o = this.getInteractionDataForPointerId(i), a = this.configureInteractionEventForDOMEvent(this.eventData, i, o);
      a.data.originalEvent = i, i.pointerType === "mouse" && (this.mouseOverRenderer = true), this.emit("pointerover", a), (i.pointerType === "mouse" || i.pointerType === "pen") && this.emit("mouseover", a);
    }, t.prototype.getInteractionDataForPointerId = function(r) {
      var n = r.pointerId, i;
      return n === zy || r.pointerType === "mouse" ? i = this.mouse : this.activeInteractionData[n] ? i = this.activeInteractionData[n] : (i = this.interactionDataPool.pop() || new mI(), i.identifier = n, this.activeInteractionData[n] = i), i.copyEvent(r), i;
    }, t.prototype.releaseInteractionDataForPointerId = function(r) {
      var n = this.activeInteractionData[r];
      n && (delete this.activeInteractionData[r], n.reset(), this.interactionDataPool.push(n));
    }, t.prototype.configureInteractionEventForDOMEvent = function(r, n, i) {
      return r.data = i, this.mapPositionToPoint(i.global, n.clientX, n.clientY), n.pointerType === "touch" && (n.globalX = i.global.x, n.globalY = i.global.y), i.originalEvent = n, r.reset(), r;
    }, t.prototype.normalizeToPointerData = function(r) {
      var n = [];
      if (this.supportsTouchEvents && r instanceof TouchEvent)
        for (var i = 0, o = r.changedTouches.length; i < o; i++) {
          var a = r.changedTouches[i];
          typeof a.button > "u" && (a.button = r.touches.length ? 1 : 0), typeof a.buttons > "u" && (a.buttons = r.touches.length ? 1 : 0), typeof a.isPrimary > "u" && (a.isPrimary = r.touches.length === 1 && r.type === "touchstart"), typeof a.width > "u" && (a.width = a.radiusX || 1), typeof a.height > "u" && (a.height = a.radiusY || 1), typeof a.tiltX > "u" && (a.tiltX = 0), typeof a.tiltY > "u" && (a.tiltY = 0), typeof a.pointerType > "u" && (a.pointerType = "touch"), typeof a.pointerId > "u" && (a.pointerId = a.identifier || 0), typeof a.pressure > "u" && (a.pressure = a.force || 0.5), typeof a.twist > "u" && (a.twist = 0), typeof a.tangentialPressure > "u" && (a.tangentialPressure = 0), typeof a.layerX > "u" && (a.layerX = a.offsetX = a.clientX), typeof a.layerY > "u" && (a.layerY = a.offsetY = a.clientY), a.isNormalized = true, n.push(a);
        }
      else if (r instanceof MouseEvent && (!this.supportsPointerEvents || !(r instanceof window.PointerEvent))) {
        var s = r;
        typeof s.isPrimary > "u" && (s.isPrimary = true), typeof s.width > "u" && (s.width = 1), typeof s.height > "u" && (s.height = 1), typeof s.tiltX > "u" && (s.tiltX = 0), typeof s.tiltY > "u" && (s.tiltY = 0), typeof s.pointerType > "u" && (s.pointerType = "mouse"), typeof s.pointerId > "u" && (s.pointerId = zy), typeof s.pressure > "u" && (s.pressure = 0.5), typeof s.twist > "u" && (s.twist = 0), typeof s.tangentialPressure > "u" && (s.tangentialPressure = 0), s.isNormalized = true, n.push(s);
      } else
        n.push(r);
      return n;
    }, t.prototype.destroy = function() {
      this.removeEvents(), this.removeTickerListener(), this.removeAllListeners(), this.renderer = null, this.mouse = null, this.eventData = null, this.interactionDOMElement = null, this.onPointerDown = null, this.processPointerDown = null, this.onPointerUp = null, this.processPointerUp = null, this.onPointerCancel = null, this.processPointerCancel = null, this.onPointerMove = null, this.processPointerMove = null, this.onPointerOut = null, this.processPointerOverOut = null, this.onPointerOver = null, this.search = null;
    }, t;
  }(qd)
);
var Bn = (
  /** @class */
  function() {
    function e12(t) {
      this.items = [], this._name = t, this._aliasCount = 0;
    }
    return e12.prototype.emit = function(t, r, n, i, o, a, s, l) {
      if (arguments.length > 8)
        throw new Error("max arguments reached");
      var u = this, c = u.name, f = u.items;
      this._aliasCount++;
      for (var h = 0, d = f.length; h < d; h++)
        f[h][c](t, r, n, i, o, a, s, l);
      return f === this.items && this._aliasCount--, this;
    }, e12.prototype.ensureNonAliasedItems = function() {
      this._aliasCount > 0 && this.items.length > 1 && (this._aliasCount = 0, this.items = this.items.slice(0));
    }, e12.prototype.add = function(t) {
      return t[this._name] && (this.ensureNonAliasedItems(), this.remove(t), this.items.push(t)), this;
    }, e12.prototype.remove = function(t) {
      var r = this.items.indexOf(t);
      return r !== -1 && (this.ensureNonAliasedItems(), this.items.splice(r, 1)), this;
    }, e12.prototype.contains = function(t) {
      return this.items.indexOf(t) !== -1;
    }, e12.prototype.removeAll = function() {
      return this.ensureNonAliasedItems(), this.items.length = 0, this;
    }, e12.prototype.destroy = function() {
      this.removeAll(), this.items = null, this._name = null;
    }, Object.defineProperty(e12.prototype, "empty", {
      /**
       * `true` if there are no this Runner contains no listeners
       *
       * @member {boolean}
       * @readonly
       */
      get: function() {
        return this.items.length === 0;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "name", {
      /**
       * The name of the runner.
       *
       * @member {string}
       * @readonly
       */
      get: function() {
        return this._name;
      },
      enumerable: false,
      configurable: true
    }), e12;
  }()
);
Object.defineProperties(Bn.prototype, {
  /**
   * Alias for `emit`
   * @memberof PIXI.Runner#
   * @method dispatch
   * @see PIXI.Runner#emit
   */
  dispatch: { value: Bn.prototype.emit },
  /**
   * Alias for `emit`
   * @memberof PIXI.Runner#
   * @method run
   * @see PIXI.Runner#emit
   */
  run: { value: Bn.prototype.emit }
});
ft.PREFER_ENV = So.any ? Ua.WEBGL : Ua.WEBGL2;
ft.STRICT_TEXTURE_CACHE = false;
var r0 = [];
function bD(e12, t) {
  if (!e12)
    return null;
  var r = "";
  if (typeof e12 == "string") {
    var n = /\.(\w{3,4})(?:$|\?|#)/i.exec(e12);
    n && (r = n[1].toLowerCase());
  }
  for (var i = r0.length - 1; i >= 0; --i) {
    var o = r0[i];
    if (o.test && o.test(e12, r))
      return new o(e12, t);
  }
  throw new Error("Unrecognized source type to auto-detect Resource");
}
var vI = function(e12, t) {
  return vI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, vI(e12, t);
};
function Ft(e12, t) {
  vI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var Jf = (
  /** @class */
  function() {
    function e12(t, r) {
      t === void 0 && (t = 0), r === void 0 && (r = 0), this._width = t, this._height = r, this.destroyed = false, this.internal = false, this.onResize = new Bn("setRealSize"), this.onUpdate = new Bn("update"), this.onError = new Bn("onError");
    }
    return e12.prototype.bind = function(t) {
      this.onResize.add(t), this.onUpdate.add(t), this.onError.add(t), (this._width || this._height) && this.onResize.emit(this._width, this._height);
    }, e12.prototype.unbind = function(t) {
      this.onResize.remove(t), this.onUpdate.remove(t), this.onError.remove(t);
    }, e12.prototype.resize = function(t, r) {
      (t !== this._width || r !== this._height) && (this._width = t, this._height = r, this.onResize.emit(t, r));
    }, Object.defineProperty(e12.prototype, "valid", {
      /**
       * Has been validated
       * @readonly
       * @member {boolean}
       */
      get: function() {
        return !!this._width && !!this._height;
      },
      enumerable: false,
      configurable: true
    }), e12.prototype.update = function() {
      this.destroyed || this.onUpdate.emit();
    }, e12.prototype.load = function() {
      return Promise.resolve(this);
    }, Object.defineProperty(e12.prototype, "width", {
      /**
       * The width of the resource.
       *
       * @member {number}
       * @readonly
       */
      get: function() {
        return this._width;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "height", {
      /**
       * The height of the resource.
       *
       * @member {number}
       * @readonly
       */
      get: function() {
        return this._height;
      },
      enumerable: false,
      configurable: true
    }), e12.prototype.style = function(t, r, n) {
      return false;
    }, e12.prototype.dispose = function() {
    }, e12.prototype.destroy = function() {
      this.destroyed || (this.destroyed = true, this.dispose(), this.onError.removeAll(), this.onError = null, this.onResize.removeAll(), this.onResize = null, this.onUpdate.removeAll(), this.onUpdate = null);
    }, e12.test = function(t, r) {
      return false;
    }, e12;
  }()
);
var BE = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r, n) {
      var i = this, o = n || {}, a = o.width, s = o.height;
      if (!a || !s)
        throw new Error("BufferResource width or height invalid");
      return i = e12.call(this, a, s) || this, i.data = r, i;
    }
    return t.prototype.upload = function(r, n, i) {
      var o = r.gl;
      return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL, n.alphaMode === Rs.UNPACK), i.width === n.width && i.height === n.height ? o.texSubImage2D(n.target, 0, 0, 0, n.width, n.height, n.format, n.type, this.data) : (i.width = n.width, i.height = n.height, o.texImage2D(n.target, 0, i.internalFormat, n.width, n.height, 0, n.format, i.type, this.data)), true;
    }, t.prototype.dispose = function() {
      this.data = null;
    }, t.test = function(r) {
      return r instanceof Float32Array || r instanceof Uint8Array || r instanceof Uint32Array;
    }, t;
  }(Jf)
);
var gre = {
  scaleMode: Ra.NEAREST,
  format: Kf.RGBA,
  alphaMode: Rs.NPM
};
var Nr = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r, n) {
      r === void 0 && (r = null), n === void 0 && (n = null);
      var i = e12.call(this) || this;
      n = n || {};
      var o = n.alphaMode, a = n.mipmap, s = n.anisotropicLevel, l = n.scaleMode, u = n.width, c = n.height, f = n.wrapMode, h = n.format, d = n.type, p = n.target, m = n.resolution, g = n.resourceOptions;
      return r && !(r instanceof Jf) && (r = bD(r, g), r.internal = true), i.width = u || 0, i.height = c || 0, i.resolution = m || ft.RESOLUTION, i.mipmap = a !== void 0 ? a : ft.MIPMAP_TEXTURES, i.anisotropicLevel = s !== void 0 ? s : ft.ANISOTROPIC_LEVEL, i.wrapMode = f || ft.WRAP_MODE, i.scaleMode = l !== void 0 ? l : ft.SCALE_MODE, i.format = h || Kf.RGBA, i.type = d || on.UNSIGNED_BYTE, i.target = p || Hl.TEXTURE_2D, i.alphaMode = o !== void 0 ? o : Rs.UNPACK, n.premultiplyAlpha !== void 0 && (i.premultiplyAlpha = n.premultiplyAlpha), i.uid = uu(), i.touched = 0, i.isPowerOfTwo = false, i._refreshPOT(), i._glTextures = {}, i.dirtyId = 0, i.dirtyStyleId = 0, i.cacheId = null, i.valid = u > 0 && c > 0, i.textureCacheIds = [], i.destroyed = false, i.resource = null, i._batchEnabled = 0, i._batchLocation = 0, i.parentTextureArray = null, i.setResource(r), i;
    }
    return Object.defineProperty(t.prototype, "realWidth", {
      /**
       * Pixel width of the source of this texture
       *
       * @readonly
       * @member {number}
       */
      get: function() {
        return Math.ceil(this.width * this.resolution - 1e-4);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "realHeight", {
      /**
       * Pixel height of the source of this texture
       *
       * @readonly
       * @member {number}
       */
      get: function() {
        return Math.ceil(this.height * this.resolution - 1e-4);
      },
      enumerable: false,
      configurable: true
    }), t.prototype.setStyle = function(r, n) {
      var i;
      return r !== void 0 && r !== this.scaleMode && (this.scaleMode = r, i = true), n !== void 0 && n !== this.mipmap && (this.mipmap = n, i = true), i && this.dirtyStyleId++, this;
    }, t.prototype.setSize = function(r, n, i) {
      return this.resolution = i || this.resolution, this.width = r, this.height = n, this._refreshPOT(), this.update(), this;
    }, t.prototype.setRealSize = function(r, n, i) {
      return this.resolution = i || this.resolution, this.width = r / this.resolution, this.height = n / this.resolution, this._refreshPOT(), this.update(), this;
    }, t.prototype._refreshPOT = function() {
      this.isPowerOfTwo = cI(this.realWidth) && cI(this.realHeight);
    }, t.prototype.setResolution = function(r) {
      var n = this.resolution;
      return n === r ? this : (this.resolution = r, this.valid && (this.width = this.width * n / r, this.height = this.height * n / r, this.emit("update", this)), this._refreshPOT(), this);
    }, t.prototype.setResource = function(r) {
      if (this.resource === r)
        return this;
      if (this.resource)
        throw new Error("Resource can be set only once");
      return r.bind(this), this.resource = r, this;
    }, t.prototype.update = function() {
      this.valid ? (this.dirtyId++, this.dirtyStyleId++, this.emit("update", this)) : this.width > 0 && this.height > 0 && (this.valid = true, this.emit("loaded", this), this.emit("update", this));
    }, t.prototype.onError = function(r) {
      this.emit("error", this, r);
    }, t.prototype.destroy = function() {
      this.resource && (this.resource.unbind(this), this.resource.internal && this.resource.destroy(), this.resource = null), this.cacheId && (delete yo[this.cacheId], delete Ni[this.cacheId], this.cacheId = null), this.dispose(), t.removeFromCache(this), this.textureCacheIds = null, this.destroyed = true;
    }, t.prototype.dispose = function() {
      this.emit("dispose", this);
    }, t.prototype.castToBaseTexture = function() {
      return this;
    }, t.from = function(r, n, i) {
      i === void 0 && (i = ft.STRICT_TEXTURE_CACHE);
      var o = typeof r == "string", a = null;
      o ? a = r : (r._pixiId || (r._pixiId = "pixiid_" + uu()), a = r._pixiId);
      var s = yo[a];
      if (o && i && !s)
        throw new Error('The cacheId "' + a + '" does not exist in BaseTextureCache.');
      return s || (s = new t(r, n), s.cacheId = a, t.addToCache(s, a)), s;
    }, t.fromBuffer = function(r, n, i, o) {
      r = r || new Float32Array(n * i * 4);
      var a = new BE(r, { width: n, height: i }), s = r instanceof Float32Array ? on.FLOAT : on.UNSIGNED_BYTE;
      return new t(a, Object.assign(gre, o || { width: n, height: i, type: s }));
    }, t.addToCache = function(r, n) {
      n && (r.textureCacheIds.indexOf(n) === -1 && r.textureCacheIds.push(n), yo[n] && console.warn("BaseTexture added to the cache with an id [" + n + "] that already had an entry"), yo[n] = r);
    }, t.removeFromCache = function(r) {
      if (typeof r == "string") {
        var n = yo[r];
        if (n) {
          var i = n.textureCacheIds.indexOf(r);
          return i > -1 && n.textureCacheIds.splice(i, 1), delete yo[r], n;
        }
      } else if (r && r.textureCacheIds) {
        for (var o = 0; o < r.textureCacheIds.length; ++o)
          delete yo[r.textureCacheIds[o]];
        return r.textureCacheIds.length = 0, r;
      }
      return null;
    }, t._globalBatch = 0, t;
  }(qd)
);
var TD = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r, n) {
      var i = this, o = n || {}, a = o.width, s = o.height;
      i = e12.call(this, a, s) || this, i.items = [], i.itemDirtyIds = [];
      for (var l = 0; l < r; l++) {
        var u = new Nr();
        i.items.push(u), i.itemDirtyIds.push(-2);
      }
      return i.length = r, i._load = null, i.baseTexture = null, i;
    }
    return t.prototype.initFromArray = function(r, n) {
      for (var i = 0; i < this.length; i++)
        r[i] && (r[i].castToBaseTexture ? this.addBaseTextureAt(r[i].castToBaseTexture(), i) : r[i] instanceof Jf ? this.addResourceAt(r[i], i) : this.addResourceAt(bD(r[i], n), i));
    }, t.prototype.dispose = function() {
      for (var r = 0, n = this.length; r < n; r++)
        this.items[r].destroy();
      this.items = null, this.itemDirtyIds = null, this._load = null;
    }, t.prototype.addResourceAt = function(r, n) {
      if (!this.items[n])
        throw new Error("Index " + n + " is out of bounds");
      return r.valid && !this.valid && this.resize(r.width, r.height), this.items[n].setResource(r), this;
    }, t.prototype.bind = function(r) {
      if (this.baseTexture !== null)
        throw new Error("Only one base texture per TextureArray is allowed");
      e12.prototype.bind.call(this, r);
      for (var n = 0; n < this.length; n++)
        this.items[n].parentTextureArray = r, this.items[n].on("update", r.update, r);
    }, t.prototype.unbind = function(r) {
      e12.prototype.unbind.call(this, r);
      for (var n = 0; n < this.length; n++)
        this.items[n].parentTextureArray = null, this.items[n].off("update", r.update, r);
    }, t.prototype.load = function() {
      var r = this;
      if (this._load)
        return this._load;
      var n = this.items.map(function(o) {
        return o.resource;
      }).filter(function(o) {
        return o;
      }), i = n.map(function(o) {
        return o.load();
      });
      return this._load = Promise.all(i).then(function() {
        var o = r.items[0], a = o.realWidth, s = o.realHeight;
        return r.resize(a, s), Promise.resolve(r);
      }), this._load;
    }, t;
  }(Jf)
);
var cz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r, n) {
      var i = this, o = n || {}, a = o.width, s = o.height, l, u;
      return Array.isArray(r) ? (l = r, u = r.length) : u = r, i = e12.call(this, u, { width: a, height: s }) || this, l && i.initFromArray(l, n), i;
    }
    return t.prototype.addBaseTextureAt = function(r, n) {
      if (r.resource)
        this.addResourceAt(r.resource, n);
      else
        throw new Error("ArrayResource does not support RenderTexture");
      return this;
    }, t.prototype.bind = function(r) {
      e12.prototype.bind.call(this, r), r.target = Hl.TEXTURE_2D_ARRAY;
    }, t.prototype.upload = function(r, n, i) {
      var o = this, a = o.length, s = o.itemDirtyIds, l = o.items, u = r.gl;
      i.dirtyId < 0 && u.texImage3D(u.TEXTURE_2D_ARRAY, 0, n.format, this._width, this._height, a, 0, n.format, n.type, null);
      for (var c = 0; c < a; c++) {
        var f = l[c];
        s[c] < f.dirtyId && (s[c] = f.dirtyId, f.valid && u.texSubImage3D(
          u.TEXTURE_2D_ARRAY,
          0,
          0,
          // xoffset
          0,
          // yoffset
          c,
          // zoffset
          f.resource.width,
          f.resource.height,
          1,
          n.format,
          n.type,
          f.resource.source
        ));
      }
      return true;
    }, t;
  }(TD)
);
var Ns = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = this, i = r, o = i.naturalWidth || i.videoWidth || i.width, a = i.naturalHeight || i.videoHeight || i.height;
      return n = e12.call(this, o, a) || this, n.source = r, n.noSubImage = false, n;
    }
    return t.crossOrigin = function(r, n, i) {
      i === void 0 && n.indexOf("data:") !== 0 ? r.crossOrigin = KG(n) : i !== false && (r.crossOrigin = typeof i == "string" ? i : "anonymous");
    }, t.prototype.upload = function(r, n, i, o) {
      var a = r.gl, s = n.realWidth, l = n.realHeight;
      return o = o || this.source, a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, n.alphaMode === Rs.UNPACK), !this.noSubImage && n.target === a.TEXTURE_2D && i.width === s && i.height === l ? a.texSubImage2D(a.TEXTURE_2D, 0, 0, 0, n.format, n.type, o) : (i.width = s, i.height = l, a.texImage2D(n.target, 0, n.format, n.format, n.type, o)), true;
    }, t.prototype.update = function() {
      if (!this.destroyed) {
        var r = this.source, n = r.naturalWidth || r.videoWidth || r.width, i = r.naturalHeight || r.videoHeight || r.height;
        this.resize(n, i), e12.prototype.update.call(this);
      }
    }, t.prototype.dispose = function() {
      this.source = null;
    }, t;
  }(Jf)
);
var ED = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t() {
      return e12 !== null && e12.apply(this, arguments) || this;
    }
    return t.test = function(r) {
      var n = window.OffscreenCanvas;
      return n && r instanceof n ? true : r instanceof HTMLCanvasElement;
    }, t;
  }(Ns)
);
var uz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r, n) {
      var i = this, o = n || {}, a = o.width, s = o.height, l = o.autoLoad, u = o.linkBaseTexture;
      if (r && r.length !== t.SIDES)
        throw new Error("Invalid length. Got " + r.length + ", expected 6");
      i = e12.call(this, 6, { width: a, height: s }) || this;
      for (var c = 0; c < t.SIDES; c++)
        i.items[c].target = Hl.TEXTURE_CUBE_MAP_POSITIVE_X + c;
      return i.linkBaseTexture = u !== false, r && i.initFromArray(r, n), l !== false && i.load(), i;
    }
    return t.prototype.bind = function(r) {
      e12.prototype.bind.call(this, r), r.target = Hl.TEXTURE_CUBE_MAP;
    }, t.prototype.addBaseTextureAt = function(r, n, i) {
      if (i === void 0 && (i = this.linkBaseTexture), !this.items[n])
        throw new Error("Index " + n + " is out of bounds");
      if (!this.linkBaseTexture || r.parentTextureArray || Object.keys(r._glTextures).length > 0)
        if (r.resource)
          this.addResourceAt(r.resource, n);
        else
          throw new Error("CubeResource does not support copying of renderTexture.");
      else
        r.target = Hl.TEXTURE_CUBE_MAP_POSITIVE_X + n, r.parentTextureArray = this.baseTexture, this.items[n] = r;
      return r.valid && !this.valid && this.resize(r.realWidth, r.realHeight), this.items[n] = r, this;
    }, t.prototype.upload = function(r, n, i) {
      for (var o = this.itemDirtyIds, a = 0; a < t.SIDES; a++) {
        var s = this.items[a];
        o[a] < s.dirtyId && (s.valid && s.resource ? (s.resource.upload(r, s, i), o[a] = s.dirtyId) : o[a] < -1 && (r.gl.texImage2D(s.target, 0, i.internalFormat, n.realWidth, n.realHeight, 0, n.format, i.type, null), o[a] = -1));
      }
      return true;
    }, t.test = function(r) {
      return Array.isArray(r) && r.length === t.SIDES;
    }, t.SIDES = 6, t;
  }(TD)
);
var SD = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r, n) {
      var i = this;
      if (n = n || {}, !(r instanceof HTMLImageElement)) {
        var o = new Image();
        Ns.crossOrigin(o, r, n.crossorigin), o.src = r, r = o;
      }
      return i = e12.call(this, r) || this, !r.complete && i._width && i._height && (i._width = 0, i._height = 0), i.url = r.src, i._process = null, i.preserveBitmap = false, i.createBitmap = (n.createBitmap !== void 0 ? n.createBitmap : ft.CREATE_IMAGE_BITMAP) && !!window.createImageBitmap, i.alphaMode = typeof n.alphaMode == "number" ? n.alphaMode : null, n.premultiplyAlpha !== void 0 && (i.premultiplyAlpha = n.premultiplyAlpha), i.bitmap = null, i._load = null, n.autoLoad !== false && i.load(), i;
    }
    return t.prototype.load = function(r) {
      var n = this;
      return this._load ? this._load : (r !== void 0 && (this.createBitmap = r), this._load = new Promise(function(i, o) {
        var a = n.source;
        n.url = a.src;
        var s = function() {
          n.destroyed || (a.onload = null, a.onerror = null, n.resize(a.width, a.height), n._load = null, n.createBitmap ? i(n.process()) : i(n));
        };
        a.complete && a.src ? s() : (a.onload = s, a.onerror = function(l) {
          o(l), n.onError.emit(l);
        });
      }), this._load);
    }, t.prototype.process = function() {
      var r = this, n = this.source;
      return this._process !== null ? this._process : this.bitmap !== null || !window.createImageBitmap ? Promise.resolve(this) : (this._process = window.createImageBitmap(n, 0, 0, n.width, n.height, {
        premultiplyAlpha: this.alphaMode === Rs.UNPACK ? "premultiply" : "none"
      }).then(function(i) {
        return r.destroyed ? Promise.reject() : (r.bitmap = i, r.update(), r._process = null, Promise.resolve(r));
      }), this._process);
    }, t.prototype.upload = function(r, n, i) {
      if (typeof this.alphaMode == "number" && (n.alphaMode = this.alphaMode), !this.createBitmap)
        return e12.prototype.upload.call(this, r, n, i);
      if (!this.bitmap && (this.process(), !this.bitmap))
        return false;
      if (e12.prototype.upload.call(this, r, n, i, this.bitmap), !this.preserveBitmap) {
        var o = true, a = n._glTextures;
        for (var s in a) {
          var l = a[s];
          if (l !== i && l.dirtyId !== n.dirtyId) {
            o = false;
            break;
          }
        }
        o && (this.bitmap.close && this.bitmap.close(), this.bitmap = null);
      }
      return true;
    }, t.prototype.dispose = function() {
      this.source.onload = null, this.source.onerror = null, e12.prototype.dispose.call(this), this.bitmap && (this.bitmap.close(), this.bitmap = null), this._process = null, this._load = null;
    }, t.test = function(r) {
      return typeof r == "string" || r instanceof HTMLImageElement;
    }, t;
  }(Ns)
);
var hz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r, n) {
      var i = this;
      return n = n || {}, i = e12.call(this, document.createElement("canvas")) || this, i._width = 0, i._height = 0, i.svg = r, i.scale = n.scale || 1, i._overrideWidth = n.width, i._overrideHeight = n.height, i._resolve = null, i._crossorigin = n.crossorigin, i._load = null, n.autoLoad !== false && i.load(), i;
    }
    return t.prototype.load = function() {
      var r = this;
      return this._load ? this._load : (this._load = new Promise(function(n) {
        if (r._resolve = function() {
          r.resize(r.source.width, r.source.height), n(r);
        }, /^\<svg/.test(r.svg.trim())) {
          if (!btoa)
            throw new Error("Your browser doesn't support base64 conversions.");
          r.svg = "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(r.svg)));
        }
        r._loadSvg();
      }), this._load);
    }, t.prototype._loadSvg = function() {
      var r = this, n = new Image();
      Ns.crossOrigin(n, this.svg, this._crossorigin), n.src = this.svg, n.onerror = function(i) {
        r._resolve && (n.onerror = null, r.onError.emit(i));
      }, n.onload = function() {
        if (r._resolve) {
          var i = n.width, o = n.height;
          if (!i || !o)
            throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");
          var a = i * r.scale, s = o * r.scale;
          (r._overrideWidth || r._overrideHeight) && (a = r._overrideWidth || r._overrideHeight / o * i, s = r._overrideHeight || r._overrideWidth / i * o), a = Math.round(a), s = Math.round(s);
          var l = r.source;
          l.width = a, l.height = s, l._pixiId = "canvas_" + uu(), l.getContext("2d").drawImage(n, 0, 0, i, o, 0, 0, a, s), r._resolve(), r._resolve = null;
        }
      };
    }, t.getSize = function(r) {
      var n = t.SVG_SIZE.exec(r), i = {};
      return n && (i[n[1]] = Math.round(parseFloat(n[3])), i[n[5]] = Math.round(parseFloat(n[7]))), i;
    }, t.prototype.dispose = function() {
      e12.prototype.dispose.call(this), this._resolve = null, this._crossorigin = null;
    }, t.test = function(r, n) {
      return n === "svg" || typeof r == "string" && /^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(r) || typeof r == "string" && r.indexOf("<svg") === 0;
    }, t.SVG_SIZE = /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i, t;
  }(Ns)
);
var fz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r, n) {
      var i = this;
      if (n = n || {}, !(r instanceof HTMLVideoElement)) {
        var o = document.createElement("video");
        o.setAttribute("preload", "auto"), o.setAttribute("webkit-playsinline", ""), o.setAttribute("playsinline", ""), typeof r == "string" && (r = [r]);
        var a = r[0].src || r[0];
        Ns.crossOrigin(o, a, n.crossorigin);
        for (var s = 0; s < r.length; ++s) {
          var l = document.createElement("source"), u = r[s], c = u.src, f = u.mime;
          c = c || r[s];
          var h = c.split("?").shift().toLowerCase(), d = h.substr(h.lastIndexOf(".") + 1);
          f = f || t.MIME_TYPES[d] || "video/" + d, l.src = c, l.type = f, o.appendChild(l);
        }
        r = o;
      }
      return i = e12.call(this, r) || this, i.noSubImage = true, i._autoUpdate = true, i._isConnectedToTicker = false, i._updateFPS = n.updateFPS || 0, i._msToNextUpdate = 0, i.autoPlay = n.autoPlay !== false, i._load = null, i._resolve = null, i._onCanPlay = i._onCanPlay.bind(i), i._onError = i._onError.bind(i), n.autoLoad !== false && i.load(), i;
    }
    return t.prototype.update = function(r) {
      if (!this.destroyed) {
        var n = On.shared.elapsedMS * this.source.playbackRate;
        this._msToNextUpdate = Math.floor(this._msToNextUpdate - n), (!this._updateFPS || this._msToNextUpdate <= 0) && (e12.prototype.update.call(this), this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0);
      }
    }, t.prototype.load = function() {
      var r = this;
      if (this._load)
        return this._load;
      var n = this.source;
      return (n.readyState === n.HAVE_ENOUGH_DATA || n.readyState === n.HAVE_FUTURE_DATA) && n.width && n.height && (n.complete = true), n.addEventListener("play", this._onPlayStart.bind(this)), n.addEventListener("pause", this._onPlayStop.bind(this)), this._isSourceReady() ? this._onCanPlay() : (n.addEventListener("canplay", this._onCanPlay), n.addEventListener("canplaythrough", this._onCanPlay), n.addEventListener("error", this._onError, true)), this._load = new Promise(function(i) {
        r.valid ? i(r) : (r._resolve = i, n.load());
      }), this._load;
    }, t.prototype._onError = function(r) {
      this.source.removeEventListener("error", this._onError, true), this.onError.emit(r);
    }, t.prototype._isSourcePlaying = function() {
      var r = this.source;
      return r.currentTime > 0 && r.paused === false && r.ended === false && r.readyState > 2;
    }, t.prototype._isSourceReady = function() {
      var r = this.source;
      return r.readyState === 3 || r.readyState === 4;
    }, t.prototype._onPlayStart = function() {
      this.valid || this._onCanPlay(), this.autoUpdate && !this._isConnectedToTicker && (On.shared.add(this.update, this), this._isConnectedToTicker = true);
    }, t.prototype._onPlayStop = function() {
      this._isConnectedToTicker && (On.shared.remove(this.update, this), this._isConnectedToTicker = false);
    }, t.prototype._onCanPlay = function() {
      var r = this.source;
      r.removeEventListener("canplay", this._onCanPlay), r.removeEventListener("canplaythrough", this._onCanPlay);
      var n = this.valid;
      this.resize(r.videoWidth, r.videoHeight), !n && this._resolve && (this._resolve(this), this._resolve = null), this._isSourcePlaying() ? this._onPlayStart() : this.autoPlay && r.play();
    }, t.prototype.dispose = function() {
      this._isConnectedToTicker && On.shared.remove(this.update, this);
      var r = this.source;
      r && (r.removeEventListener("error", this._onError, true), r.pause(), r.src = "", r.load()), e12.prototype.dispose.call(this);
    }, Object.defineProperty(t.prototype, "autoUpdate", {
      /**
       * Should the base texture automatically update itself, set to true by default
       *
       * @member {boolean}
       */
      get: function() {
        return this._autoUpdate;
      },
      set: function(r) {
        r !== this._autoUpdate && (this._autoUpdate = r, !this._autoUpdate && this._isConnectedToTicker ? (On.shared.remove(this.update, this), this._isConnectedToTicker = false) : this._autoUpdate && !this._isConnectedToTicker && this._isSourcePlaying() && (On.shared.add(this.update, this), this._isConnectedToTicker = true));
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "updateFPS", {
      /**
       * How many times a second to update the texture from the video. Leave at 0 to update at every render.
       * A lower fps can help performance, as updating the texture at 60fps on a 30ps video may not be efficient.
       *
       * @member {number}
       */
      get: function() {
        return this._updateFPS;
      },
      set: function(r) {
        r !== this._updateFPS && (this._updateFPS = r);
      },
      enumerable: false,
      configurable: true
    }), t.test = function(r, n) {
      return r instanceof HTMLVideoElement || t.TYPES.indexOf(n) > -1;
    }, t.TYPES = ["mp4", "m4v", "webm", "ogg", "ogv", "h264", "avi", "mov"], t.MIME_TYPES = {
      ogv: "video/ogg",
      mov: "video/quicktime",
      m4v: "video/mp4"
    }, t;
  }(Ns)
);
var dz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t() {
      return e12 !== null && e12.apply(this, arguments) || this;
    }
    return t.test = function(r) {
      return !!window.createImageBitmap && r instanceof ImageBitmap;
    }, t;
  }(Ns)
);
r0.push(SD, dz, ED, fz, hz, BE, uz, cz);
var vre = {
  Resource: Jf,
  BaseImageResource: Ns,
  INSTALLED: r0,
  autoDetectResource: bD,
  AbstractMultiResource: TD,
  ArrayResource: cz,
  BufferResource: BE,
  CanvasResource: ED,
  CubeResource: uz,
  ImageResource: SD,
  SVGResource: hz,
  VideoResource: fz,
  ImageBitmapResource: dz
};
var Hi = (
  /** @class */
  function() {
    function e12(t) {
      this.renderer = t;
    }
    return e12.prototype.destroy = function() {
      this.renderer = null;
    }, e12;
  }()
);
var yre = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t() {
      return e12 !== null && e12.apply(this, arguments) || this;
    }
    return t.prototype.upload = function(r, n, i) {
      var o = r.gl;
      return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL, n.alphaMode === Rs.UNPACK), i.width === n.width && i.height === n.height ? o.texSubImage2D(n.target, 0, 0, 0, n.width, n.height, n.format, n.type, this.data) : (i.width = n.width, i.height = n.height, o.texImage2D(
        n.target,
        0,
        //  gl.DEPTH_COMPONENT16 Needed for depth to render properly in webgl2.0
        r.context.webGLVersion === 1 ? o.DEPTH_COMPONENT : o.DEPTH_COMPONENT16,
        n.width,
        n.height,
        0,
        n.format,
        n.type,
        this.data
      )), true;
    }, t;
  }(BE)
);
var n0 = (
  /** @class */
  function() {
    function e12(t, r) {
      this.width = Math.ceil(t || 100), this.height = Math.ceil(r || 100), this.stencil = false, this.depth = false, this.dirtyId = 0, this.dirtyFormat = 0, this.dirtySize = 0, this.depthTexture = null, this.colorTextures = [], this.glFramebuffers = {}, this.disposeRunner = new Bn("disposeFramebuffer"), this.multisample = lu.NONE;
    }
    return Object.defineProperty(e12.prototype, "colorTexture", {
      /**
       * Reference to the colorTexture.
       *
       * @member {PIXI.BaseTexture[]}
       * @readonly
       */
      get: function() {
        return this.colorTextures[0];
      },
      enumerable: false,
      configurable: true
    }), e12.prototype.addColorTexture = function(t, r) {
      return t === void 0 && (t = 0), this.colorTextures[t] = r || new Nr(null, {
        scaleMode: Ra.NEAREST,
        resolution: 1,
        mipmap: Zf.OFF,
        width: this.width,
        height: this.height
      }), this.dirtyId++, this.dirtyFormat++, this;
    }, e12.prototype.addDepthTexture = function(t) {
      return this.depthTexture = t || new Nr(new yre(null, { width: this.width, height: this.height }), {
        scaleMode: Ra.NEAREST,
        resolution: 1,
        width: this.width,
        height: this.height,
        mipmap: Zf.OFF,
        format: Kf.DEPTH_COMPONENT,
        type: on.UNSIGNED_SHORT
      }), this.dirtyId++, this.dirtyFormat++, this;
    }, e12.prototype.enableDepth = function() {
      return this.depth = true, this.dirtyId++, this.dirtyFormat++, this;
    }, e12.prototype.enableStencil = function() {
      return this.stencil = true, this.dirtyId++, this.dirtyFormat++, this;
    }, e12.prototype.resize = function(t, r) {
      if (t = Math.ceil(t), r = Math.ceil(r), !(t === this.width && r === this.height)) {
        this.width = t, this.height = r, this.dirtyId++, this.dirtySize++;
        for (var n = 0; n < this.colorTextures.length; n++) {
          var i = this.colorTextures[n], o = i.resolution;
          i.setSize(t / o, r / o);
        }
        if (this.depthTexture) {
          var o = this.depthTexture.resolution;
          this.depthTexture.setSize(t / o, r / o);
        }
      }
    }, e12.prototype.dispose = function() {
      this.disposeRunner.emit(this, false);
    }, e12.prototype.destroyDepthTexture = function() {
      this.depthTexture && (this.depthTexture.destroy(), this.depthTexture = null, ++this.dirtyId, ++this.dirtyFormat);
    }, e12;
  }()
);
var qm = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = this;
      if (typeof r == "number") {
        var i = arguments[0], o = arguments[1], a = arguments[2], s = arguments[3];
        r = { width: i, height: o, scaleMode: a, resolution: s };
      }
      n = e12.call(this, null, r) || this;
      var l = r || {}, u = l.width, c = l.height;
      return n.mipmap = 0, n.width = Math.ceil(u) || 100, n.height = Math.ceil(c) || 100, n.valid = true, n.clearColor = [0, 0, 0, 0], n.framebuffer = new n0(n.width * n.resolution, n.height * n.resolution).addColorTexture(0, n), n.maskStack = [], n.filterStack = [{}], n;
    }
    return t.prototype.resize = function(r, n) {
      r = Math.ceil(r), n = Math.ceil(n), this.framebuffer.resize(r * this.resolution, n * this.resolution);
    }, t.prototype.dispose = function() {
      this.framebuffer.dispose(), e12.prototype.dispose.call(this);
    }, t.prototype.destroy = function() {
      e12.prototype.destroy.call(this), this.framebuffer.destroyDepthTexture(), this.framebuffer = null;
    }, t;
  }(Nr)
);
var wD = (
  /** @class */
  function() {
    function e12() {
      this.x0 = 0, this.y0 = 0, this.x1 = 1, this.y1 = 0, this.x2 = 1, this.y2 = 1, this.x3 = 0, this.y3 = 1, this.uvsFloat32 = new Float32Array(8);
    }
    return e12.prototype.set = function(t, r, n) {
      var i = r.width, o = r.height;
      if (n) {
        var a = t.width / 2 / i, s = t.height / 2 / o, l = t.x / i + a, u = t.y / o + s;
        n = Lr.add(n, Lr.NW), this.x0 = l + a * Lr.uX(n), this.y0 = u + s * Lr.uY(n), n = Lr.add(n, 2), this.x1 = l + a * Lr.uX(n), this.y1 = u + s * Lr.uY(n), n = Lr.add(n, 2), this.x2 = l + a * Lr.uX(n), this.y2 = u + s * Lr.uY(n), n = Lr.add(n, 2), this.x3 = l + a * Lr.uX(n), this.y3 = u + s * Lr.uY(n);
      } else
        this.x0 = t.x / i, this.y0 = t.y / o, this.x1 = (t.x + t.width) / i, this.y1 = t.y / o, this.x2 = (t.x + t.width) / i, this.y2 = (t.y + t.height) / o, this.x3 = t.x / i, this.y3 = (t.y + t.height) / o;
      this.uvsFloat32[0] = this.x0, this.uvsFloat32[1] = this.y0, this.uvsFloat32[2] = this.x1, this.uvsFloat32[3] = this.y1, this.uvsFloat32[4] = this.x2, this.uvsFloat32[5] = this.y2, this.uvsFloat32[6] = this.x3, this.uvsFloat32[7] = this.y3;
    }, e12;
  }()
);
var b5 = new wD();
var Pt = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r, n, i, o, a, s) {
      var l = e12.call(this) || this;
      if (l.noFrame = false, n || (l.noFrame = true, n = new fr(0, 0, 1, 1)), r instanceof t && (r = r.baseTexture), l.baseTexture = r, l._frame = n, l.trim = o, l.valid = false, l._uvs = b5, l.uvMatrix = null, l.orig = i || n, l._rotate = Number(a || 0), a === true)
        l._rotate = 2;
      else if (l._rotate % 2 !== 0)
        throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");
      return l.defaultAnchor = s ? new In(s.x, s.y) : new In(0, 0), l._updateID = 0, l.textureCacheIds = [], r.valid ? l.noFrame ? r.valid && l.onBaseTextureUpdated(r) : l.frame = n : r.once("loaded", l.onBaseTextureUpdated, l), l.noFrame && r.on("update", l.onBaseTextureUpdated, l), l;
    }
    return t.prototype.update = function() {
      this.baseTexture.resource && this.baseTexture.resource.update();
    }, t.prototype.onBaseTextureUpdated = function(r) {
      if (this.noFrame) {
        if (!this.baseTexture.valid)
          return;
        this._frame.width = r.width, this._frame.height = r.height, this.valid = true, this.updateUvs();
      } else
        this.frame = this._frame;
      this.emit("update", this);
    }, t.prototype.destroy = function(r) {
      if (this.baseTexture) {
        if (r) {
          var n = this.baseTexture;
          n && n.url && Ni[n.url] && t.removeFromCache(n.url), this.baseTexture.destroy();
        }
        this.baseTexture.off("loaded", this.onBaseTextureUpdated, this), this.baseTexture.off("update", this.onBaseTextureUpdated, this), this.baseTexture = null;
      }
      this._frame = null, this._uvs = null, this.trim = null, this.orig = null, this.valid = false, t.removeFromCache(this), this.textureCacheIds = null;
    }, t.prototype.clone = function() {
      return new t(this.baseTexture, this.frame.clone(), this.orig.clone(), this.trim && this.trim.clone(), this.rotate, this.defaultAnchor);
    }, t.prototype.updateUvs = function() {
      this._uvs === b5 && (this._uvs = new wD()), this._uvs.set(this._frame, this.baseTexture, this.rotate), this._updateID++;
    }, t.from = function(r, n, i) {
      n === void 0 && (n = {}), i === void 0 && (i = ft.STRICT_TEXTURE_CACHE);
      var o = typeof r == "string", a = null;
      o ? a = r : (r._pixiId || (r._pixiId = "pixiid_" + uu()), a = r._pixiId);
      var s = Ni[a];
      if (o && i && !s)
        throw new Error('The cacheId "' + a + '" does not exist in TextureCache.');
      return s || (n.resolution || (n.resolution = Vg(r)), s = new t(new Nr(r, n)), s.baseTexture.cacheId = a, Nr.addToCache(s.baseTexture, a), t.addToCache(s, a)), s;
    }, t.fromURL = function(r, n) {
      var i = Object.assign({ autoLoad: false }, n == null ? void 0 : n.resourceOptions), o = t.from(r, Object.assign({ resourceOptions: i }, n), false), a = o.baseTexture.resource;
      return o.baseTexture.valid ? Promise.resolve(o) : a.load().then(function() {
        return Promise.resolve(o);
      });
    }, t.fromBuffer = function(r, n, i, o) {
      return new t(Nr.fromBuffer(r, n, i, o));
    }, t.fromLoader = function(r, n, i) {
      var o = new SD(r);
      o.url = n;
      var a = new Nr(o, {
        scaleMode: ft.SCALE_MODE,
        resolution: Vg(n)
      }), s = new t(a);
      return i || (i = n), Nr.addToCache(s.baseTexture, i), t.addToCache(s, i), i !== n && (Nr.addToCache(s.baseTexture, n), t.addToCache(s, n)), s;
    }, t.addToCache = function(r, n) {
      n && (r.textureCacheIds.indexOf(n) === -1 && r.textureCacheIds.push(n), Ni[n] && console.warn("Texture added to the cache with an id [" + n + "] that already had an entry"), Ni[n] = r);
    }, t.removeFromCache = function(r) {
      if (typeof r == "string") {
        var n = Ni[r];
        if (n) {
          var i = n.textureCacheIds.indexOf(r);
          return i > -1 && n.textureCacheIds.splice(i, 1), delete Ni[r], n;
        }
      } else if (r && r.textureCacheIds) {
        for (var o = 0; o < r.textureCacheIds.length; ++o)
          Ni[r.textureCacheIds[o]] === r && delete Ni[r.textureCacheIds[o]];
        return r.textureCacheIds.length = 0, r;
      }
      return null;
    }, Object.defineProperty(t.prototype, "resolution", {
      /**
       * Returns resolution of baseTexture
       *
       * @member {number}
       * @readonly
       */
      get: function() {
        return this.baseTexture.resolution;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "frame", {
      /**
       * The frame specifies the region of the base texture that this texture uses.
       * Please call `updateUvs()` after you change coordinates of `frame` manually.
       *
       * @member {PIXI.Rectangle}
       */
      get: function() {
        return this._frame;
      },
      set: function(r) {
        this._frame = r, this.noFrame = false;
        var n = r.x, i = r.y, o = r.width, a = r.height, s = n + o > this.baseTexture.width, l = i + a > this.baseTexture.height;
        if (s || l) {
          var u = s && l ? "and" : "or", c = "X: " + n + " + " + o + " = " + (n + o) + " > " + this.baseTexture.width, f = "Y: " + i + " + " + a + " = " + (i + a) + " > " + this.baseTexture.height;
          throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: " + (c + " " + u + " " + f));
        }
        this.valid = o && a && this.baseTexture.valid, !this.trim && !this.rotate && (this.orig = r), this.valid && this.updateUvs();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "rotate", {
      /**
       * Indicates whether the texture is rotated inside the atlas
       * set to 2 to compensate for texture packer rotation
       * set to 6 to compensate for spine packer rotation
       * can be used to rotate or mirror sprites
       * See {@link PIXI.groupD8} for explanation
       *
       * @member {number}
       */
      get: function() {
        return this._rotate;
      },
      set: function(r) {
        this._rotate = r, this.valid && this.updateUvs();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "width", {
      /**
       * The width of the Texture in pixels.
       *
       * @member {number}
       */
      get: function() {
        return this.orig.width;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "height", {
      /**
       * The height of the Texture in pixels.
       *
       * @member {number}
       */
      get: function() {
        return this.orig.height;
      },
      enumerable: false,
      configurable: true
    }), t.prototype.castToBaseTexture = function() {
      return this.baseTexture;
    }, t;
  }(qd)
);
function _re() {
  var e12 = document.createElement("canvas");
  e12.width = 16, e12.height = 16;
  var t = e12.getContext("2d");
  return t.fillStyle = "white", t.fillRect(0, 0, 16, 16), new Pt(new Nr(new ED(e12)));
}
function FE(e12) {
  e12.destroy = function() {
  }, e12.on = function() {
  }, e12.once = function() {
  }, e12.emit = function() {
  };
}
Pt.EMPTY = new Pt(new Nr());
FE(Pt.EMPTY);
FE(Pt.EMPTY.baseTexture);
Pt.WHITE = _re();
FE(Pt.WHITE);
FE(Pt.WHITE.baseTexture);
var hu = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r, n) {
      var i = this, o = null;
      if (!(r instanceof qm)) {
        var a = arguments[1], s = arguments[2], l = arguments[3], u = arguments[4];
        console.warn("Please use RenderTexture.create(" + a + ", " + s + ") instead of the ctor directly."), o = arguments[0], n = null, r = new qm({
          width: a,
          height: s,
          scaleMode: l,
          resolution: u
        });
      }
      return i = e12.call(this, r, n) || this, i.legacyRenderer = o, i.valid = true, i.filterFrame = null, i.filterPoolKey = null, i.updateUvs(), i;
    }
    return Object.defineProperty(t.prototype, "framebuffer", {
      /**
       * Shortcut to `this.baseTexture.framebuffer`, saves baseTexture cast.
       * @member {PIXI.Framebuffer}
       * @readonly
       */
      get: function() {
        return this.baseTexture.framebuffer;
      },
      enumerable: false,
      configurable: true
    }), t.prototype.resize = function(r, n, i) {
      i === void 0 && (i = true), r = Math.ceil(r), n = Math.ceil(n), this.valid = r > 0 && n > 0, this._frame.width = this.orig.width = r, this._frame.height = this.orig.height = n, i && this.baseTexture.resize(r, n), this.updateUvs();
    }, t.prototype.setResolution = function(r) {
      var n = this.baseTexture;
      n.resolution !== r && (n.setResolution(r), this.resize(n.width, n.height, false));
    }, t.create = function(r) {
      return typeof r == "number" && (r = {
        width: r,
        height: arguments[1],
        scaleMode: arguments[2],
        resolution: arguments[3]
      }), new t(new qm(r));
    }, t;
  }(Pt)
);
var pz = (
  /** @class */
  function() {
    function e12(t) {
      this.texturePool = {}, this.textureOptions = t || {}, this.enableFullScreen = false, this._pixelsWidth = 0, this._pixelsHeight = 0;
    }
    return e12.prototype.createTexture = function(t, r) {
      var n = new qm(Object.assign({
        width: t,
        height: r,
        resolution: 1
      }, this.textureOptions));
      return new hu(n);
    }, e12.prototype.getOptimalTexture = function(t, r, n) {
      n === void 0 && (n = 1);
      var i = e12.SCREEN_KEY;
      t *= n, r *= n, (!this.enableFullScreen || t !== this._pixelsWidth || r !== this._pixelsHeight) && (t = zg(t), r = zg(r), i = (t & 65535) << 16 | r & 65535), this.texturePool[i] || (this.texturePool[i] = []);
      var o = this.texturePool[i].pop();
      return o || (o = this.createTexture(t, r)), o.filterPoolKey = i, o.setResolution(n), o;
    }, e12.prototype.getFilterTexture = function(t, r) {
      var n = this.getOptimalTexture(t.width, t.height, r || t.resolution);
      return n.filterFrame = t.filterFrame, n;
    }, e12.prototype.returnTexture = function(t) {
      var r = t.filterPoolKey;
      t.filterFrame = null, this.texturePool[r].push(t);
    }, e12.prototype.returnFilterTexture = function(t) {
      this.returnTexture(t);
    }, e12.prototype.clear = function(t) {
      if (t = t !== false, t)
        for (var r in this.texturePool) {
          var n = this.texturePool[r];
          if (n)
            for (var i = 0; i < n.length; i++)
              n[i].destroy(true);
        }
      this.texturePool = {};
    }, e12.prototype.setScreenSize = function(t) {
      if (!(t.width === this._pixelsWidth && t.height === this._pixelsHeight)) {
        var r = e12.SCREEN_KEY, n = this.texturePool[r];
        if (this.enableFullScreen = t.width > 0 && t.height > 0, n)
          for (var i = 0; i < n.length; i++)
            n[i].destroy(true);
        this.texturePool[r] = [], this._pixelsWidth = t.width, this._pixelsHeight = t.height;
      }
    }, e12.SCREEN_KEY = "screen", e12;
  }()
);
var yI = (
  /** @class */
  function() {
    function e12(t, r, n, i, o, a, s) {
      r === void 0 && (r = 0), n === void 0 && (n = false), i === void 0 && (i = 5126), this.buffer = t, this.size = r, this.normalized = n, this.type = i, this.stride = o, this.start = a, this.instance = s;
    }
    return e12.prototype.destroy = function() {
      this.buffer = null;
    }, e12.from = function(t, r, n, i, o) {
      return new e12(t, r, n, i, o);
    }, e12;
  }()
);
var bre = 0;
var An = (
  /** @class */
  function() {
    function e12(t, r, n) {
      r === void 0 && (r = true), n === void 0 && (n = false), this.data = t || new Float32Array(1), this._glBuffers = {}, this._updateID = 0, this.index = n, this.static = r, this.id = bre++, this.disposeRunner = new Bn("disposeBuffer");
    }
    return e12.prototype.update = function(t) {
      this.data = t || this.data, this._updateID++;
    }, e12.prototype.dispose = function() {
      this.disposeRunner.emit(this, false);
    }, e12.prototype.destroy = function() {
      this.dispose(), this.data = null;
    }, e12.from = function(t) {
      return t instanceof Array && (t = new Float32Array(t)), new e12(t);
    }, e12;
  }()
);
function mz(e12) {
  if (e12.BYTES_PER_ELEMENT === 4)
    return e12 instanceof Float32Array ? "Float32Array" : e12 instanceof Uint32Array ? "Uint32Array" : "Int32Array";
  if (e12.BYTES_PER_ELEMENT === 2) {
    if (e12 instanceof Uint16Array)
      return "Uint16Array";
  } else if (e12.BYTES_PER_ELEMENT === 1 && e12 instanceof Uint8Array)
    return "Uint8Array";
  return null;
}
var Tre = {
  Float32Array,
  Uint32Array,
  Int32Array,
  Uint8Array
};
function Ere(e12, t) {
  for (var r = 0, n = 0, i = {}, o = 0; o < e12.length; o++)
    n += t[o], r += e12[o].length;
  for (var a = new ArrayBuffer(r * 4), s = null, l = 0, o = 0; o < e12.length; o++) {
    var u = t[o], c = e12[o], f = mz(c);
    i[f] || (i[f] = new Tre[f](a)), s = i[f];
    for (var h = 0; h < c.length; h++) {
      var d = (h / u | 0) * n + l, p = h % u;
      s[d + p] = c[h];
    }
    l += u;
  }
  return new Float32Array(a);
}
var T5 = { 5126: 4, 5123: 2, 5121: 1 };
var Sre = 0;
var wre = {
  Float32Array,
  Uint32Array,
  Int32Array,
  Uint8Array,
  Uint16Array
};
var Kd = (
  /** @class */
  function() {
    function e12(t, r) {
      t === void 0 && (t = []), r === void 0 && (r = {}), this.buffers = t, this.indexBuffer = null, this.attributes = r, this.glVertexArrayObjects = {}, this.id = Sre++, this.instanced = false, this.instanceCount = 1, this.disposeRunner = new Bn("disposeGeometry"), this.refCount = 0;
    }
    return e12.prototype.addAttribute = function(t, r, n, i, o, a, s, l) {
      if (n === void 0 && (n = 0), i === void 0 && (i = false), l === void 0 && (l = false), !r)
        throw new Error("You must pass a buffer when creating an attribute");
      r instanceof An || (r instanceof Array && (r = new Float32Array(r)), r = new An(r));
      var u = t.split("|");
      if (u.length > 1) {
        for (var c = 0; c < u.length; c++)
          this.addAttribute(u[c], r, n, i, o);
        return this;
      }
      var f = this.buffers.indexOf(r);
      return f === -1 && (this.buffers.push(r), f = this.buffers.length - 1), this.attributes[t] = new yI(f, n, i, o, a, s, l), this.instanced = this.instanced || l, this;
    }, e12.prototype.getAttribute = function(t) {
      return this.attributes[t];
    }, e12.prototype.getBuffer = function(t) {
      return this.buffers[this.getAttribute(t).buffer];
    }, e12.prototype.addIndex = function(t) {
      return t instanceof An || (t instanceof Array && (t = new Uint16Array(t)), t = new An(t)), t.index = true, this.indexBuffer = t, this.buffers.indexOf(t) === -1 && this.buffers.push(t), this;
    }, e12.prototype.getIndex = function() {
      return this.indexBuffer;
    }, e12.prototype.interleave = function() {
      if (this.buffers.length === 1 || this.buffers.length === 2 && this.indexBuffer)
        return this;
      var t = [], r = [], n = new An(), i;
      for (i in this.attributes) {
        var o = this.attributes[i], a = this.buffers[o.buffer];
        t.push(a.data), r.push(o.size * T5[o.type] / 4), o.buffer = 0;
      }
      for (n.data = Ere(t, r), i = 0; i < this.buffers.length; i++)
        this.buffers[i] !== this.indexBuffer && this.buffers[i].destroy();
      return this.buffers = [n], this.indexBuffer && this.buffers.push(this.indexBuffer), this;
    }, e12.prototype.getSize = function() {
      for (var t in this.attributes) {
        var r = this.attributes[t], n = this.buffers[r.buffer];
        return n.data.length / (r.stride / 4 || r.size);
      }
      return 0;
    }, e12.prototype.dispose = function() {
      this.disposeRunner.emit(this, false);
    }, e12.prototype.destroy = function() {
      this.dispose(), this.buffers = null, this.indexBuffer = null, this.attributes = null;
    }, e12.prototype.clone = function() {
      for (var t = new e12(), r = 0; r < this.buffers.length; r++)
        t.buffers[r] = new An(this.buffers[r].data.slice(0));
      for (var r in this.attributes) {
        var n = this.attributes[r];
        t.attributes[r] = new yI(n.buffer, n.size, n.normalized, n.type, n.stride, n.start, n.instance);
      }
      return this.indexBuffer && (t.indexBuffer = t.buffers[this.buffers.indexOf(this.indexBuffer)], t.indexBuffer.index = true), t;
    }, e12.merge = function(t) {
      for (var r = new e12(), n = [], i = [], o = [], a, s = 0; s < t.length; s++) {
        a = t[s];
        for (var l = 0; l < a.buffers.length; l++)
          i[l] = i[l] || 0, i[l] += a.buffers[l].data.length, o[l] = 0;
      }
      for (var s = 0; s < a.buffers.length; s++)
        n[s] = new wre[mz(a.buffers[s].data)](i[s]), r.buffers[s] = new An(n[s]);
      for (var s = 0; s < t.length; s++) {
        a = t[s];
        for (var l = 0; l < a.buffers.length; l++)
          n[l].set(a.buffers[l].data, o[l]), o[l] += a.buffers[l].data.length;
      }
      if (r.attributes = a.attributes, a.indexBuffer) {
        r.indexBuffer = r.buffers[a.buffers.indexOf(a.indexBuffer)], r.indexBuffer.index = true;
        for (var u = 0, c = 0, f = 0, h = 0, s = 0; s < a.buffers.length; s++)
          if (a.buffers[s] !== a.indexBuffer) {
            h = s;
            break;
          }
        for (var s in a.attributes) {
          var d = a.attributes[s];
          (d.buffer | 0) === h && (c += d.size * T5[d.type] / 4);
        }
        for (var s = 0; s < t.length; s++) {
          for (var p = t[s].indexBuffer.data, l = 0; l < p.length; l++)
            r.indexBuffer.data[l + f] += u;
          u += a.buffers[h].data.length / c, f += p.length;
        }
      }
      return r;
    }, e12;
  }()
);
var gz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t() {
      var r = e12.call(this) || this;
      return r.addAttribute("aVertexPosition", new Float32Array([
        0,
        0,
        1,
        0,
        1,
        1,
        0,
        1
      ])).addIndex([0, 1, 3, 2]), r;
    }
    return t;
  }(Kd)
);
var AD = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t() {
      var r = e12.call(this) || this;
      return r.vertices = new Float32Array([
        -1,
        -1,
        1,
        -1,
        1,
        1,
        -1,
        1
      ]), r.uvs = new Float32Array([
        0,
        0,
        1,
        0,
        1,
        1,
        0,
        1
      ]), r.vertexBuffer = new An(r.vertices), r.uvBuffer = new An(r.uvs), r.addAttribute("aVertexPosition", r.vertexBuffer).addAttribute("aTextureCoord", r.uvBuffer).addIndex([0, 1, 2, 0, 2, 3]), r;
    }
    return t.prototype.map = function(r, n) {
      var i = 0, o = 0;
      return this.uvs[0] = i, this.uvs[1] = o, this.uvs[2] = i + n.width / r.width, this.uvs[3] = o, this.uvs[4] = i + n.width / r.width, this.uvs[5] = o + n.height / r.height, this.uvs[6] = i, this.uvs[7] = o + n.height / r.height, i = n.x, o = n.y, this.vertices[0] = i, this.vertices[1] = o, this.vertices[2] = i + n.width, this.vertices[3] = o, this.vertices[4] = i + n.width, this.vertices[5] = o + n.height, this.vertices[6] = i, this.vertices[7] = o + n.height, this.invalidate(), this;
    }, t.prototype.invalidate = function() {
      return this.vertexBuffer._updateID++, this.uvBuffer._updateID++, this;
    }, t;
  }(Kd)
);
var Are = 0;
var Ul = (
  /** @class */
  function() {
    function e12(t, r) {
      this.uniforms = t, this.group = true, this.syncUniforms = {}, this.dirtyId = 0, this.id = Are++, this.static = !!r;
    }
    return e12.prototype.update = function() {
      this.dirtyId++;
    }, e12.prototype.add = function(t, r, n) {
      this.uniforms[t] = new e12(r, n);
    }, e12.from = function(t, r) {
      return new e12(t, r);
    }, e12;
  }()
);
var vz = (
  /** @class */
  function() {
    function e12() {
      this.renderTexture = null, this.target = null, this.legacy = false, this.resolution = 1, this.sourceFrame = new fr(), this.destinationFrame = new fr(), this.filters = [];
    }
    return e12.prototype.clear = function() {
      this.target = null, this.filters = null, this.renderTexture = null;
    }, e12;
  }()
);
var yz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.defaultFilterStack = [{}], n.texturePool = new pz(), n.texturePool.setScreenSize(r.view), n.statePool = [], n.quad = new gz(), n.quadUv = new AD(), n.tempRect = new fr(), n.activeState = {}, n.globalUniforms = new Ul({
        outputFrame: n.tempRect,
        inputSize: new Float32Array(4),
        inputPixel: new Float32Array(4),
        inputClamp: new Float32Array(4),
        resolution: 1,
        // legacy variables
        filterArea: new Float32Array(4),
        filterClamp: new Float32Array(4)
      }, true), n.forceClear = false, n.useMaxPadding = false, n;
    }
    return t.prototype.push = function(r, n) {
      for (var i = this.renderer, o = this.defaultFilterStack, a = this.statePool.pop() || new vz(), s = n[0].resolution, l = n[0].padding, u = n[0].autoFit, c = n[0].legacy, f = 1; f < n.length; f++) {
        var h = n[f];
        s = Math.min(s, h.resolution), l = this.useMaxPadding ? Math.max(l, h.padding) : l + h.padding, u = u && h.autoFit, c = c || h.legacy;
      }
      o.length === 1 && (this.defaultFilterStack[0].renderTexture = i.renderTexture.current), o.push(a), a.resolution = s, a.legacy = c, a.target = r, a.sourceFrame.copyFrom(r.filterArea || r.getBounds(true)), a.sourceFrame.pad(l), u && a.sourceFrame.fit(this.renderer.renderTexture.sourceFrame), a.sourceFrame.ceil(s), a.renderTexture = this.getOptimalFilterTexture(a.sourceFrame.width, a.sourceFrame.height, s), a.filters = n, a.destinationFrame.width = a.renderTexture.width, a.destinationFrame.height = a.renderTexture.height;
      var d = this.tempRect;
      d.width = a.sourceFrame.width, d.height = a.sourceFrame.height, a.renderTexture.filterFrame = a.sourceFrame, i.renderTexture.bind(a.renderTexture, a.sourceFrame, d), i.renderTexture.clear();
    }, t.prototype.pop = function() {
      var r = this.defaultFilterStack, n = r.pop(), i = n.filters;
      this.activeState = n;
      var o = this.globalUniforms.uniforms;
      o.outputFrame = n.sourceFrame, o.resolution = n.resolution;
      var a = o.inputSize, s = o.inputPixel, l = o.inputClamp;
      if (a[0] = n.destinationFrame.width, a[1] = n.destinationFrame.height, a[2] = 1 / a[0], a[3] = 1 / a[1], s[0] = a[0] * n.resolution, s[1] = a[1] * n.resolution, s[2] = 1 / s[0], s[3] = 1 / s[1], l[0] = 0.5 * s[2], l[1] = 0.5 * s[3], l[2] = n.sourceFrame.width * a[2] - 0.5 * s[2], l[3] = n.sourceFrame.height * a[3] - 0.5 * s[3], n.legacy) {
        var u = o.filterArea;
        u[0] = n.destinationFrame.width, u[1] = n.destinationFrame.height, u[2] = n.sourceFrame.x, u[3] = n.sourceFrame.y, o.filterClamp = o.inputClamp;
      }
      this.globalUniforms.update();
      var c = r[r.length - 1];
      if (n.renderTexture.framebuffer.multisample > 1 && this.renderer.framebuffer.blit(), i.length === 1)
        i[0].apply(this, n.renderTexture, c.renderTexture, Ho.BLEND, n), this.returnFilterTexture(n.renderTexture);
      else {
        var f = n.renderTexture, h = this.getOptimalFilterTexture(f.width, f.height, n.resolution);
        h.filterFrame = f.filterFrame;
        var d = 0;
        for (d = 0; d < i.length - 1; ++d) {
          i[d].apply(this, f, h, Ho.CLEAR, n);
          var p = f;
          f = h, h = p;
        }
        i[d].apply(this, f, c.renderTexture, Ho.BLEND, n), this.returnFilterTexture(f), this.returnFilterTexture(h);
      }
      n.clear(), this.statePool.push(n);
    }, t.prototype.bindAndClear = function(r, n) {
      if (n === void 0 && (n = Ho.CLEAR), r && r.filterFrame) {
        var i = this.tempRect;
        i.width = r.filterFrame.width, i.height = r.filterFrame.height, this.renderer.renderTexture.bind(r, r.filterFrame, i);
      } else
        this.renderer.renderTexture.bind(r);
      typeof n == "boolean" && (n = n ? Ho.CLEAR : Ho.BLEND, ze("5.2.1", "Use CLEAR_MODES when using clear applyFilter option")), (n === Ho.CLEAR || n === Ho.BLIT && this.forceClear) && this.renderer.renderTexture.clear();
    }, t.prototype.applyFilter = function(r, n, i, o) {
      var a = this.renderer;
      this.bindAndClear(i, o), r.uniforms.uSampler = n, r.uniforms.filterGlobals = this.globalUniforms, a.state.set(r.state), a.shader.bind(r), r.legacy ? (this.quadUv.map(n._frame, n.filterFrame), a.geometry.bind(this.quadUv), a.geometry.draw(wo.TRIANGLES)) : (a.geometry.bind(this.quad), a.geometry.draw(wo.TRIANGLE_STRIP));
    }, t.prototype.calculateSpriteMatrix = function(r, n) {
      var i = this.activeState, o = i.sourceFrame, a = i.destinationFrame, s = n._texture.orig, l = r.set(a.width, 0, 0, a.height, o.x, o.y), u = n.worldTransform.copyTo(sn.TEMP_MATRIX);
      return u.invert(), l.prepend(u), l.scale(1 / s.width, 1 / s.height), l.translate(n.anchor.x, n.anchor.y), l;
    }, t.prototype.destroy = function() {
      this.texturePool.clear(false);
    }, t.prototype.getOptimalFilterTexture = function(r, n, i) {
      return i === void 0 && (i = 1), this.texturePool.getOptimalTexture(r, n, i);
    }, t.prototype.getFilterTexture = function(r, n) {
      if (typeof r == "number") {
        var i = r;
        r = n, n = i;
      }
      r = r || this.activeState.renderTexture;
      var o = this.texturePool.getOptimalTexture(r.width, r.height, n || r.resolution);
      return o.filterFrame = r.filterFrame, o;
    }, t.prototype.returnFilterTexture = function(r) {
      this.texturePool.returnTexture(r);
    }, t.prototype.emptyPool = function() {
      this.texturePool.clear(true);
    }, t.prototype.resize = function() {
      this.texturePool.setScreenSize(this.renderer.view);
    }, t;
  }(Hi)
);
var kv = (
  /** @class */
  function() {
    function e12(t) {
      this.renderer = t;
    }
    return e12.prototype.flush = function() {
    }, e12.prototype.destroy = function() {
      this.renderer = null;
    }, e12.prototype.start = function() {
    }, e12.prototype.stop = function() {
      this.flush();
    }, e12.prototype.render = function(t) {
    }, e12;
  }()
);
var _z = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.emptyRenderer = new kv(r), n.currentRenderer = n.emptyRenderer, n;
    }
    return t.prototype.setObjectRenderer = function(r) {
      this.currentRenderer !== r && (this.currentRenderer.stop(), this.currentRenderer = r, this.currentRenderer.start());
    }, t.prototype.flush = function() {
      this.setObjectRenderer(this.emptyRenderer);
    }, t.prototype.reset = function() {
      this.setObjectRenderer(this.emptyRenderer);
    }, t.prototype.copyBoundTextures = function(r, n) {
      for (var i = this.renderer.texture.boundTextures, o = n - 1; o >= 0; --o)
        r[o] = i[o] || null, r[o] && (r[o]._batchLocation = o);
    }, t.prototype.boundArray = function(r, n, i, o) {
      for (var a = r.elements, s = r.ids, l = r.count, u = 0, c = 0; c < l; c++) {
        var f = a[c], h = f._batchLocation;
        if (h >= 0 && h < o && n[h] === f) {
          s[c] = h;
          continue;
        }
        for (; u < o; ) {
          var d = n[u];
          if (d && d._batchEnabled === i && d._batchLocation === u) {
            u++;
            continue;
          }
          s[c] = u, f._batchLocation = u, n[u] = f;
          break;
        }
      }
    }, t;
  }(Hi)
);
var E5 = 0;
var bz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.webGLVersion = 1, n.extensions = {}, n.supports = {
        uint32Indices: false
      }, n.handleContextLost = n.handleContextLost.bind(n), n.handleContextRestored = n.handleContextRestored.bind(n), r.view.addEventListener("webglcontextlost", n.handleContextLost, false), r.view.addEventListener("webglcontextrestored", n.handleContextRestored, false), n;
    }
    return Object.defineProperty(t.prototype, "isLost", {
      /**
       * `true` if the context is lost
       * @member {boolean}
       * @readonly
       */
      get: function() {
        return !this.gl || this.gl.isContextLost();
      },
      enumerable: false,
      configurable: true
    }), t.prototype.contextChange = function(r) {
      this.gl = r, this.renderer.gl = r, this.renderer.CONTEXT_UID = E5++, r.isContextLost() && r.getExtension("WEBGL_lose_context") && r.getExtension("WEBGL_lose_context").restoreContext();
    }, t.prototype.initFromContext = function(r) {
      this.gl = r, this.validateContext(r), this.renderer.gl = r, this.renderer.CONTEXT_UID = E5++, this.renderer.runners.contextChange.emit(r);
    }, t.prototype.initFromOptions = function(r) {
      var n = this.createContext(this.renderer.view, r);
      this.initFromContext(n);
    }, t.prototype.createContext = function(r, n) {
      var i;
      if (ft.PREFER_ENV >= Ua.WEBGL2 && (i = r.getContext("webgl2", n)), i)
        this.webGLVersion = 2;
      else if (this.webGLVersion = 1, i = r.getContext("webgl", n) || r.getContext("experimental-webgl", n), !i)
        throw new Error("This browser does not support WebGL. Try using the canvas renderer");
      return this.gl = i, this.getExtensions(), this.gl;
    }, t.prototype.getExtensions = function() {
      var r = this.gl;
      this.webGLVersion === 1 ? Object.assign(this.extensions, {
        drawBuffers: r.getExtension("WEBGL_draw_buffers"),
        depthTexture: r.getExtension("WEBGL_depth_texture"),
        loseContext: r.getExtension("WEBGL_lose_context"),
        vertexArrayObject: r.getExtension("OES_vertex_array_object") || r.getExtension("MOZ_OES_vertex_array_object") || r.getExtension("WEBKIT_OES_vertex_array_object"),
        anisotropicFiltering: r.getExtension("EXT_texture_filter_anisotropic"),
        uint32ElementIndex: r.getExtension("OES_element_index_uint"),
        // Floats and half-floats
        floatTexture: r.getExtension("OES_texture_float"),
        floatTextureLinear: r.getExtension("OES_texture_float_linear"),
        textureHalfFloat: r.getExtension("OES_texture_half_float"),
        textureHalfFloatLinear: r.getExtension("OES_texture_half_float_linear")
      }) : this.webGLVersion === 2 && Object.assign(this.extensions, {
        anisotropicFiltering: r.getExtension("EXT_texture_filter_anisotropic"),
        // Floats and half-floats
        colorBufferFloat: r.getExtension("EXT_color_buffer_float"),
        floatTextureLinear: r.getExtension("OES_texture_float_linear")
      });
    }, t.prototype.handleContextLost = function(r) {
      r.preventDefault();
    }, t.prototype.handleContextRestored = function() {
      this.renderer.runners.contextChange.emit(this.gl);
    }, t.prototype.destroy = function() {
      var r = this.renderer.view;
      r.removeEventListener("webglcontextlost", this.handleContextLost), r.removeEventListener("webglcontextrestored", this.handleContextRestored), this.gl.useProgram(null), this.extensions.loseContext && this.extensions.loseContext.loseContext();
    }, t.prototype.postrender = function() {
      this.renderer.renderingToScreen && this.gl.flush();
    }, t.prototype.validateContext = function(r) {
      var n = r.getContextAttributes(), i = "WebGL2RenderingContext" in window && r instanceof window.WebGL2RenderingContext;
      i && (this.webGLVersion = 2), n.stencil || console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");
      var o = i || !!r.getExtension("OES_element_index_uint");
      this.supports.uint32Indices = o, o || console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly");
    }, t;
  }(Hi)
);
var Tz = (
  /** @class */
  /* @__PURE__ */ function() {
    function e12(t) {
      this.framebuffer = t, this.stencil = null, this.dirtyId = 0, this.dirtyFormat = 0, this.dirtySize = 0, this.multisample = lu.NONE, this.msaaBuffer = null, this.blitFramebuffer = null;
    }
    return e12;
  }()
);
var Ore = new fr();
var Ez = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.managedFramebuffers = [], n.unknownFramebuffer = new n0(10, 10), n.msaaSamples = null, n;
    }
    return t.prototype.contextChange = function() {
      var r = this.gl = this.renderer.gl;
      if (this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.current = this.unknownFramebuffer, this.viewport = new fr(), this.hasMRT = true, this.writeDepthTexture = true, this.disposeAll(true), this.renderer.context.webGLVersion === 1) {
        var n = this.renderer.context.extensions.drawBuffers, i = this.renderer.context.extensions.depthTexture;
        ft.PREFER_ENV === Ua.WEBGL_LEGACY && (n = null, i = null), n ? r.drawBuffers = function(o) {
          return n.drawBuffersWEBGL(o);
        } : (this.hasMRT = false, r.drawBuffers = function() {
        }), i || (this.writeDepthTexture = false);
      } else
        this.msaaSamples = r.getInternalformatParameter(r.RENDERBUFFER, r.RGBA8, r.SAMPLES);
    }, t.prototype.bind = function(r, n) {
      var i = this.gl;
      if (r) {
        var o = r.glFramebuffers[this.CONTEXT_UID] || this.initFramebuffer(r);
        this.current !== r && (this.current = r, i.bindFramebuffer(i.FRAMEBUFFER, o.framebuffer)), o.dirtyId !== r.dirtyId && (o.dirtyId = r.dirtyId, o.dirtyFormat !== r.dirtyFormat ? (o.dirtyFormat = r.dirtyFormat, this.updateFramebuffer(r)) : o.dirtySize !== r.dirtySize && (o.dirtySize = r.dirtySize, this.resizeFramebuffer(r)));
        for (var a = 0; a < r.colorTextures.length; a++) {
          var s = r.colorTextures[a];
          this.renderer.texture.unbind(s.parentTextureArray || s);
        }
        r.depthTexture && this.renderer.texture.unbind(r.depthTexture), n ? this.setViewport(n.x, n.y, n.width, n.height) : this.setViewport(0, 0, r.width, r.height);
      } else
        this.current && (this.current = null, i.bindFramebuffer(i.FRAMEBUFFER, null)), n ? this.setViewport(n.x, n.y, n.width, n.height) : this.setViewport(0, 0, this.renderer.width, this.renderer.height);
    }, t.prototype.setViewport = function(r, n, i, o) {
      var a = this.viewport;
      (a.width !== i || a.height !== o || a.x !== r || a.y !== n) && (a.x = r, a.y = n, a.width = i, a.height = o, this.gl.viewport(r, n, i, o));
    }, Object.defineProperty(t.prototype, "size", {
      /**
       * Get the size of the current width and height. Returns object with `width` and `height` values.
       *
       * @member {object}
       * @readonly
       */
      get: function() {
        return this.current ? { x: 0, y: 0, width: this.current.width, height: this.current.height } : { x: 0, y: 0, width: this.renderer.width, height: this.renderer.height };
      },
      enumerable: false,
      configurable: true
    }), t.prototype.clear = function(r, n, i, o, a) {
      a === void 0 && (a = Gg.COLOR | Gg.DEPTH);
      var s = this.gl;
      s.clearColor(r, n, i, o), s.clear(a);
    }, t.prototype.initFramebuffer = function(r) {
      var n = this.gl, i = new Tz(n.createFramebuffer());
      return i.multisample = this.detectSamples(r.multisample), r.glFramebuffers[this.CONTEXT_UID] = i, this.managedFramebuffers.push(r), r.disposeRunner.add(this), i;
    }, t.prototype.resizeFramebuffer = function(r) {
      var n = this.gl, i = r.glFramebuffers[this.CONTEXT_UID];
      i.stencil && (n.bindRenderbuffer(n.RENDERBUFFER, i.stencil), n.renderbufferStorage(n.RENDERBUFFER, n.DEPTH_STENCIL, r.width, r.height));
      for (var o = r.colorTextures, a = 0; a < o.length; a++)
        this.renderer.texture.bind(o[a], 0);
      r.depthTexture && this.renderer.texture.bind(r.depthTexture, 0);
    }, t.prototype.updateFramebuffer = function(r) {
      var n = this.gl, i = r.glFramebuffers[this.CONTEXT_UID], o = r.colorTextures, a = o.length;
      n.drawBuffers || (a = Math.min(a, 1)), i.multisample > 1 && (i.msaaBuffer = n.createRenderbuffer(), n.bindRenderbuffer(n.RENDERBUFFER, i.msaaBuffer), n.renderbufferStorageMultisample(n.RENDERBUFFER, i.multisample, n.RGBA8, r.width, r.height), n.framebufferRenderbuffer(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, n.RENDERBUFFER, i.msaaBuffer));
      for (var s = [], l = 0; l < a; l++)
        if (!(l === 0 && i.multisample > 1)) {
          var u = r.colorTextures[l], c = u.parentTextureArray || u;
          this.renderer.texture.bind(c, 0), n.framebufferTexture2D(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0 + l, u.target, c._glTextures[this.CONTEXT_UID].texture, 0), s.push(n.COLOR_ATTACHMENT0 + l);
        }
      if (s.length > 1 && n.drawBuffers(s), r.depthTexture) {
        var f = this.writeDepthTexture;
        if (f) {
          var h = r.depthTexture;
          this.renderer.texture.bind(h, 0), n.framebufferTexture2D(n.FRAMEBUFFER, n.DEPTH_ATTACHMENT, n.TEXTURE_2D, h._glTextures[this.CONTEXT_UID].texture, 0);
        }
      }
      !i.stencil && (r.stencil || r.depth) && (i.stencil = n.createRenderbuffer(), n.bindRenderbuffer(n.RENDERBUFFER, i.stencil), n.renderbufferStorage(n.RENDERBUFFER, n.DEPTH_STENCIL, r.width, r.height), r.depthTexture || n.framebufferRenderbuffer(n.FRAMEBUFFER, n.DEPTH_STENCIL_ATTACHMENT, n.RENDERBUFFER, i.stencil));
    }, t.prototype.detectSamples = function(r) {
      var n = this.msaaSamples, i = lu.NONE;
      if (r <= 1 || n === null)
        return i;
      for (var o = 0; o < n.length; o++)
        if (n[o] <= r) {
          i = n[o];
          break;
        }
      return i === 1 && (i = lu.NONE), i;
    }, t.prototype.blit = function(r, n, i) {
      var o = this, a = o.current, s = o.renderer, l = o.gl, u = o.CONTEXT_UID;
      if (s.context.webGLVersion === 2 && a) {
        var c = a.glFramebuffers[u];
        if (c) {
          if (!r) {
            if (c.multisample <= 1)
              return;
            c.blitFramebuffer || (c.blitFramebuffer = new n0(a.width, a.height), c.blitFramebuffer.addColorTexture(0, a.colorTextures[0])), r = c.blitFramebuffer, r.width = a.width, r.height = a.height;
          }
          n || (n = Ore, n.width = a.width, n.height = a.height), i || (i = n);
          var f = n.width === i.width && n.height === i.height;
          this.bind(r), l.bindFramebuffer(l.READ_FRAMEBUFFER, c.framebuffer), l.blitFramebuffer(n.x, n.y, n.width, n.height, i.x, i.y, i.width, i.height, l.COLOR_BUFFER_BIT, f ? l.NEAREST : l.LINEAR);
        }
      }
    }, t.prototype.disposeFramebuffer = function(r, n) {
      var i = r.glFramebuffers[this.CONTEXT_UID], o = this.gl;
      if (i) {
        delete r.glFramebuffers[this.CONTEXT_UID];
        var a = this.managedFramebuffers.indexOf(r);
        a >= 0 && this.managedFramebuffers.splice(a, 1), r.disposeRunner.remove(this), n || (o.deleteFramebuffer(i.framebuffer), i.stencil && o.deleteRenderbuffer(i.stencil));
      }
    }, t.prototype.disposeAll = function(r) {
      var n = this.managedFramebuffers;
      this.managedFramebuffers = [];
      for (var i = 0; i < n.length; i++)
        this.disposeFramebuffer(n[i], r);
    }, t.prototype.forceStencil = function() {
      var r = this.current;
      if (r) {
        var n = r.glFramebuffers[this.CONTEXT_UID];
        if (!(!n || n.stencil)) {
          r.enableStencil();
          var i = r.width, o = r.height, a = this.gl, s = a.createRenderbuffer();
          a.bindRenderbuffer(a.RENDERBUFFER, s), a.renderbufferStorage(a.RENDERBUFFER, a.DEPTH_STENCIL, i, o), n.stencil = s, a.framebufferRenderbuffer(a.FRAMEBUFFER, a.DEPTH_STENCIL_ATTACHMENT, a.RENDERBUFFER, s);
        }
      }
    }, t.prototype.reset = function() {
      this.current = this.unknownFramebuffer, this.viewport = new fr();
    }, t;
  }(Hi)
);
var Ire = (
  /** @class */
  /* @__PURE__ */ function() {
    function e12(t) {
      this.buffer = t || null, this.updateID = -1, this.byteLength = -1, this.refCount = 0;
    }
    return e12;
  }()
);
var JS = { 5126: 4, 5123: 2, 5121: 1 };
var Sz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n._activeGeometry = null, n._activeVao = null, n.hasVao = true, n.hasInstance = true, n.canUseUInt32ElementIndex = false, n.managedGeometries = {}, n.managedBuffers = {}, n;
    }
    return t.prototype.contextChange = function() {
      this.disposeAll(true);
      var r = this.gl = this.renderer.gl, n = this.renderer.context;
      if (this.CONTEXT_UID = this.renderer.CONTEXT_UID, n.webGLVersion !== 2) {
        var i = this.renderer.context.extensions.vertexArrayObject;
        ft.PREFER_ENV === Ua.WEBGL_LEGACY && (i = null), i ? (r.createVertexArray = function() {
          return i.createVertexArrayOES();
        }, r.bindVertexArray = function(a) {
          return i.bindVertexArrayOES(a);
        }, r.deleteVertexArray = function(a) {
          return i.deleteVertexArrayOES(a);
        }) : (this.hasVao = false, r.createVertexArray = function() {
          return null;
        }, r.bindVertexArray = function() {
          return null;
        }, r.deleteVertexArray = function() {
          return null;
        });
      }
      if (n.webGLVersion !== 2) {
        var o = r.getExtension("ANGLE_instanced_arrays");
        o ? (r.vertexAttribDivisor = function(a, s) {
          return o.vertexAttribDivisorANGLE(a, s);
        }, r.drawElementsInstanced = function(a, s, l, u, c) {
          return o.drawElementsInstancedANGLE(a, s, l, u, c);
        }, r.drawArraysInstanced = function(a, s, l, u) {
          return o.drawArraysInstancedANGLE(a, s, l, u);
        }) : this.hasInstance = false;
      }
      this.canUseUInt32ElementIndex = n.webGLVersion === 2 || !!n.extensions.uint32ElementIndex;
    }, t.prototype.bind = function(r, n) {
      n = n || this.renderer.shader.shader;
      var i = this.gl, o = r.glVertexArrayObjects[this.CONTEXT_UID], a = false;
      o || (this.managedGeometries[r.id] = r, r.disposeRunner.add(this), r.glVertexArrayObjects[this.CONTEXT_UID] = o = {}, a = true);
      var s = o[n.program.id] || this.initGeometryVao(r, n.program, a);
      this._activeGeometry = r, this._activeVao !== s && (this._activeVao = s, this.hasVao ? i.bindVertexArray(s) : this.activateVao(r, n.program)), this.updateBuffers();
    }, t.prototype.reset = function() {
      this.unbind();
    }, t.prototype.updateBuffers = function() {
      for (var r = this._activeGeometry, n = this.gl, i = 0; i < r.buffers.length; i++) {
        var o = r.buffers[i], a = o._glBuffers[this.CONTEXT_UID];
        if (o._updateID !== a.updateID) {
          a.updateID = o._updateID;
          var s = o.index ? n.ELEMENT_ARRAY_BUFFER : n.ARRAY_BUFFER;
          if (n.bindBuffer(s, a.buffer), this._boundBuffer = a, a.byteLength >= o.data.byteLength)
            n.bufferSubData(s, 0, o.data);
          else {
            var l = o.static ? n.STATIC_DRAW : n.DYNAMIC_DRAW;
            a.byteLength = o.data.byteLength, n.bufferData(s, o.data, l);
          }
        }
      }
    }, t.prototype.checkCompatibility = function(r, n) {
      var i = r.attributes, o = n.attributeData;
      for (var a in o)
        if (!i[a])
          throw new Error('shader and geometry incompatible, geometry missing the "' + a + '" attribute');
    }, t.prototype.getSignature = function(r, n) {
      var i = r.attributes, o = n.attributeData, a = ["g", r.id];
      for (var s in i)
        o[s] && a.push(s);
      return a.join("-");
    }, t.prototype.initGeometryVao = function(r, n, i) {
      i === void 0 && (i = true), this.checkCompatibility(r, n);
      var o = this.gl, a = this.CONTEXT_UID, s = this.getSignature(r, n), l = r.glVertexArrayObjects[this.CONTEXT_UID], u = l[s];
      if (u)
        return l[n.id] = u, u;
      var c = r.buffers, f = r.attributes, h = {}, d = {};
      for (var p in c)
        h[p] = 0, d[p] = 0;
      for (var p in f)
        !f[p].size && n.attributeData[p] ? f[p].size = n.attributeData[p].size : f[p].size || console.warn("PIXI Geometry attribute '" + p + "' size cannot be determined (likely the bound shader does not have the attribute)"), h[f[p].buffer] += f[p].size * JS[f[p].type];
      for (var p in f) {
        var m = f[p], g = m.size;
        m.stride === void 0 && (h[m.buffer] === g * JS[m.type] ? m.stride = 0 : m.stride = h[m.buffer]), m.start === void 0 && (m.start = d[m.buffer], d[m.buffer] += g * JS[m.type]);
      }
      u = o.createVertexArray(), o.bindVertexArray(u);
      for (var v = 0; v < c.length; v++) {
        var _ = c[v];
        _._glBuffers[a] || (_._glBuffers[a] = new Ire(o.createBuffer()), this.managedBuffers[_.id] = _, _.disposeRunner.add(this)), i && _._glBuffers[a].refCount++;
      }
      return this.activateVao(r, n), this._activeVao = u, l[n.id] = u, l[s] = u, u;
    }, t.prototype.disposeBuffer = function(r, n) {
      if (this.managedBuffers[r.id]) {
        delete this.managedBuffers[r.id];
        var i = r._glBuffers[this.CONTEXT_UID], o = this.gl;
        r.disposeRunner.remove(this), i && (n || o.deleteBuffer(i.buffer), delete r._glBuffers[this.CONTEXT_UID]);
      }
    }, t.prototype.disposeGeometry = function(r, n) {
      if (this.managedGeometries[r.id]) {
        delete this.managedGeometries[r.id];
        var i = r.glVertexArrayObjects[this.CONTEXT_UID], o = this.gl, a = r.buffers;
        if (r.disposeRunner.remove(this), !!i) {
          for (var s = 0; s < a.length; s++) {
            var l = a[s]._glBuffers[this.CONTEXT_UID];
            l.refCount--, l.refCount === 0 && !n && this.disposeBuffer(a[s], n);
          }
          if (!n) {
            for (var u in i)
              if (u[0] === "g") {
                var c = i[u];
                this._activeVao === c && this.unbind(), o.deleteVertexArray(c);
              }
          }
          delete r.glVertexArrayObjects[this.CONTEXT_UID];
        }
      }
    }, t.prototype.disposeAll = function(r) {
      for (var n = Object.keys(this.managedGeometries), i = 0; i < n.length; i++)
        this.disposeGeometry(this.managedGeometries[n[i]], r);
      n = Object.keys(this.managedBuffers);
      for (var i = 0; i < n.length; i++)
        this.disposeBuffer(this.managedBuffers[n[i]], r);
    }, t.prototype.activateVao = function(r, n) {
      var i = this.gl, o = this.CONTEXT_UID, a = r.buffers, s = r.attributes;
      r.indexBuffer && i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, r.indexBuffer._glBuffers[o].buffer);
      var l = null;
      for (var u in s) {
        var c = s[u], f = a[c.buffer], h = f._glBuffers[o];
        if (n.attributeData[u]) {
          l !== h && (i.bindBuffer(i.ARRAY_BUFFER, h.buffer), l = h);
          var d = n.attributeData[u].location;
          if (i.enableVertexAttribArray(d), i.vertexAttribPointer(d, c.size, c.type || i.FLOAT, c.normalized, c.stride, c.start), c.instance)
            if (this.hasInstance)
              i.vertexAttribDivisor(d, 1);
            else
              throw new Error("geometry error, GPU Instancing is not supported on this device");
        }
      }
    }, t.prototype.draw = function(r, n, i, o) {
      var a = this.gl, s = this._activeGeometry;
      if (s.indexBuffer) {
        var l = s.indexBuffer.data.BYTES_PER_ELEMENT, u = l === 2 ? a.UNSIGNED_SHORT : a.UNSIGNED_INT;
        l === 2 || l === 4 && this.canUseUInt32ElementIndex ? s.instanced ? a.drawElementsInstanced(r, n || s.indexBuffer.data.length, u, (i || 0) * l, o || 1) : a.drawElements(r, n || s.indexBuffer.data.length, u, (i || 0) * l) : console.warn("unsupported index buffer type: uint32");
      } else
        s.instanced ? a.drawArraysInstanced(r, i, n || s.getSize(), o || 1) : a.drawArrays(r, i, n || s.getSize());
      return this;
    }, t.prototype.unbind = function() {
      this.gl.bindVertexArray(null), this._activeVao = null, this._activeGeometry = null;
    }, t;
  }(Hi)
);
var wz = (
  /** @class */
  function() {
    function e12(t) {
      t === void 0 && (t = null), this.type = Ri.NONE, this.autoDetect = true, this.maskObject = t || null, this.pooled = false, this.isMaskData = true, this._stencilCounter = 0, this._scissorCounter = 0, this._scissorRect = null, this._target = null;
    }
    return e12.prototype.reset = function() {
      this.pooled && (this.maskObject = null, this.type = Ri.NONE, this.autoDetect = true), this._target = null;
    }, e12.prototype.copyCountersOrReset = function(t) {
      t ? (this._stencilCounter = t._stencilCounter, this._scissorCounter = t._scissorCounter, this._scissorRect = t._scissorRect) : (this._stencilCounter = 0, this._scissorCounter = 0, this._scissorRect = null);
    }, e12;
  }()
);
function S5(e12, t, r) {
  var n = e12.createShader(t);
  return e12.shaderSource(n, r), e12.compileShader(n), n;
}
function Az(e12, t, r, n) {
  var i = S5(e12, e12.VERTEX_SHADER, t), o = S5(e12, e12.FRAGMENT_SHADER, r), a = e12.createProgram();
  if (e12.attachShader(a, i), e12.attachShader(a, o), n)
    for (var s in n)
      e12.bindAttribLocation(a, n[s], s);
  return e12.linkProgram(a), e12.getProgramParameter(a, e12.LINK_STATUS) || (e12.getShaderParameter(i, e12.COMPILE_STATUS) || (console.warn(t), console.error(e12.getShaderInfoLog(i))), e12.getShaderParameter(o, e12.COMPILE_STATUS) || (console.warn(r), console.error(e12.getShaderInfoLog(o))), console.error("Pixi.js Error: Could not initialize shader."), console.error("gl.VALIDATE_STATUS", e12.getProgramParameter(a, e12.VALIDATE_STATUS)), console.error("gl.getError()", e12.getError()), e12.getProgramInfoLog(a) !== "" && console.warn("Pixi.js Warning: gl.getProgramInfoLog()", e12.getProgramInfoLog(a)), e12.deleteProgram(a), a = null), e12.deleteShader(i), e12.deleteShader(o), a;
}
function ew(e12) {
  for (var t = new Array(e12), r = 0; r < t.length; r++)
    t[r] = false;
  return t;
}
function Oz(e12, t) {
  switch (e12) {
    case "float":
      return 0;
    case "vec2":
      return new Float32Array(2 * t);
    case "vec3":
      return new Float32Array(3 * t);
    case "vec4":
      return new Float32Array(4 * t);
    case "int":
    case "sampler2D":
    case "sampler2DArray":
      return 0;
    case "ivec2":
      return new Int32Array(2 * t);
    case "ivec3":
      return new Int32Array(3 * t);
    case "ivec4":
      return new Int32Array(4 * t);
    case "bool":
      return false;
    case "bvec2":
      return ew(2 * t);
    case "bvec3":
      return ew(3 * t);
    case "bvec4":
      return ew(4 * t);
    case "mat2":
      return new Float32Array([
        1,
        0,
        0,
        1
      ]);
    case "mat3":
      return new Float32Array([
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1
      ]);
    case "mat4":
      return new Float32Array([
        1,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        1
      ]);
  }
  return null;
}
var Iz = {};
var Mp = Iz;
function Pz() {
  if (Mp === Iz || Mp && Mp.isContextLost()) {
    var e12 = document.createElement("canvas"), t = void 0;
    ft.PREFER_ENV >= Ua.WEBGL2 && (t = e12.getContext("webgl2", {})), t || (t = e12.getContext("webgl", {}) || e12.getContext("experimental-webgl", {}), t ? t.getExtension("WEBGL_draw_buffers") : t = null), Mp = t;
  }
  return Mp;
}
var Xy;
function Pre() {
  if (!Xy) {
    Xy = Yo.MEDIUM;
    var e12 = Pz();
    if (e12 && e12.getShaderPrecisionFormat) {
      var t = e12.getShaderPrecisionFormat(e12.FRAGMENT_SHADER, e12.HIGH_FLOAT);
      Xy = t.precision ? Yo.HIGH : Yo.MEDIUM;
    }
  }
  return Xy;
}
function w5(e12, t, r) {
  if (e12.substring(0, 9) !== "precision") {
    var n = t;
    return t === Yo.HIGH && r !== Yo.HIGH && (n = Yo.MEDIUM), "precision " + n + ` float;
` + e12;
  } else if (r !== Yo.HIGH && e12.substring(0, 15) === "precision highp")
    return e12.replace("precision highp", "precision mediump");
  return e12;
}
var Cre = {
  float: 1,
  vec2: 2,
  vec3: 3,
  vec4: 4,
  int: 1,
  ivec2: 2,
  ivec3: 3,
  ivec4: 4,
  bool: 1,
  bvec2: 2,
  bvec3: 3,
  bvec4: 4,
  mat2: 4,
  mat3: 9,
  mat4: 16,
  sampler2D: 1
};
function xre(e12) {
  return Cre[e12];
}
var Wy = null;
var A5 = {
  FLOAT: "float",
  FLOAT_VEC2: "vec2",
  FLOAT_VEC3: "vec3",
  FLOAT_VEC4: "vec4",
  INT: "int",
  INT_VEC2: "ivec2",
  INT_VEC3: "ivec3",
  INT_VEC4: "ivec4",
  BOOL: "bool",
  BOOL_VEC2: "bvec2",
  BOOL_VEC3: "bvec3",
  BOOL_VEC4: "bvec4",
  FLOAT_MAT2: "mat2",
  FLOAT_MAT3: "mat3",
  FLOAT_MAT4: "mat4",
  SAMPLER_2D: "sampler2D",
  INT_SAMPLER_2D: "sampler2D",
  UNSIGNED_INT_SAMPLER_2D: "sampler2D",
  SAMPLER_CUBE: "samplerCube",
  INT_SAMPLER_CUBE: "samplerCube",
  UNSIGNED_INT_SAMPLER_CUBE: "samplerCube",
  SAMPLER_2D_ARRAY: "sampler2DArray",
  INT_SAMPLER_2D_ARRAY: "sampler2DArray",
  UNSIGNED_INT_SAMPLER_2D_ARRAY: "sampler2DArray"
};
function O5(e12, t) {
  if (!Wy) {
    var r = Object.keys(A5);
    Wy = {};
    for (var n = 0; n < r.length; ++n) {
      var i = r[n];
      Wy[e12[i]] = A5[i];
    }
  }
  return Wy[t];
}
var J_ = [
  // a float cache layer
  {
    test: function(e12) {
      return e12.type === "float" && e12.size === 1;
    },
    code: function(e12) {
      return `
            if(uv["` + e12 + '"] !== ud["' + e12 + `"].value)
            {
                ud["` + e12 + '"].value = uv["' + e12 + `"]
                gl.uniform1f(ud["` + e12 + '"].location, uv["' + e12 + `"])
            }
            `;
    }
  },
  // handling samplers
  {
    test: function(e12) {
      return (e12.type === "sampler2D" || e12.type === "samplerCube" || e12.type === "sampler2DArray") && e12.size === 1 && !e12.isArray;
    },
    code: function(e12) {
      return `t = syncData.textureCount++;

            renderer.texture.bind(uv["` + e12 + `"], t);

            if(ud["` + e12 + `"].value !== t)
            {
                ud["` + e12 + `"].value = t;
                gl.uniform1i(ud["` + e12 + `"].location, t);
; // eslint-disable-line max-len
            }`;
    }
  },
  // uploading pixi matrix object to mat3
  {
    test: function(e12, t) {
      return e12.type === "mat3" && e12.size === 1 && t.a !== void 0;
    },
    code: function(e12) {
      return `
            gl.uniformMatrix3fv(ud["` + e12 + '"].location, false, uv["' + e12 + `"].toArray(true));
            `;
    }
  },
  // uploading a pixi point as a vec2 with caching layer
  {
    test: function(e12, t) {
      return e12.type === "vec2" && e12.size === 1 && t.x !== void 0;
    },
    code: function(e12) {
      return `
                cv = ud["` + e12 + `"].value;
                v = uv["` + e12 + `"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["` + e12 + `"].location, v.x, v.y);
                }`;
    }
  },
  // caching layer for a vec2
  {
    test: function(e12) {
      return e12.type === "vec2" && e12.size === 1;
    },
    code: function(e12) {
      return `
                cv = ud["` + e12 + `"].value;
                v = uv["` + e12 + `"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["` + e12 + `"].location, v[0], v[1]);
                }
            `;
    }
  },
  // upload a pixi rectangle as a vec4 with caching layer
  {
    test: function(e12, t) {
      return e12.type === "vec4" && e12.size === 1 && t.width !== void 0;
    },
    code: function(e12) {
      return `
                cv = ud["` + e12 + `"].value;
                v = uv["` + e12 + `"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["` + e12 + `"].location, v.x, v.y, v.width, v.height)
                }`;
    }
  },
  // a caching layer for vec4 uploading
  {
    test: function(e12) {
      return e12.type === "vec4" && e12.size === 1;
    },
    code: function(e12) {
      return `
                cv = ud["` + e12 + `"].value;
                v = uv["` + e12 + `"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["` + e12 + `"].location, v[0], v[1], v[2], v[3])
                }`;
    }
  }
];
var kre = {
  float: `
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,
  vec2: `
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,
  vec3: `
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,
  vec4: "gl.uniform4f(location, v[0], v[1], v[2], v[3])",
  int: "gl.uniform1i(location, v)",
  ivec2: "gl.uniform2i(location, v[0], v[1])",
  ivec3: "gl.uniform3i(location, v[0], v[1], v[2])",
  ivec4: "gl.uniform4i(location, v[0], v[1], v[2], v[3])",
  bool: "gl.uniform1i(location, v)",
  bvec2: "gl.uniform2i(location, v[0], v[1])",
  bvec3: "gl.uniform3i(location, v[0], v[1], v[2])",
  bvec4: "gl.uniform4i(location, v[0], v[1], v[2], v[3])",
  mat2: "gl.uniformMatrix2fv(location, false, v)",
  mat3: "gl.uniformMatrix3fv(location, false, v)",
  mat4: "gl.uniformMatrix4fv(location, false, v)",
  sampler2D: "gl.uniform1i(location, v)",
  samplerCube: "gl.uniform1i(location, v)",
  sampler2DArray: "gl.uniform1i(location, v)"
};
var Dre = {
  float: "gl.uniform1fv(location, v)",
  vec2: "gl.uniform2fv(location, v)",
  vec3: "gl.uniform3fv(location, v)",
  vec4: "gl.uniform4fv(location, v)",
  mat4: "gl.uniformMatrix4fv(location, false, v)",
  mat3: "gl.uniformMatrix3fv(location, false, v)",
  mat2: "gl.uniformMatrix2fv(location, false, v)",
  int: "gl.uniform1iv(location, v)",
  ivec2: "gl.uniform2iv(location, v)",
  ivec3: "gl.uniform3iv(location, v)",
  ivec4: "gl.uniform4iv(location, v)",
  bool: "gl.uniform1iv(location, v)",
  bvec2: "gl.uniform2iv(location, v)",
  bvec3: "gl.uniform3iv(location, v)",
  bvec4: "gl.uniform4iv(location, v)",
  sampler2D: "gl.uniform1iv(location, v)",
  samplerCube: "gl.uniform1iv(location, v)",
  sampler2DArray: "gl.uniform1iv(location, v)"
};
function Rre(e12, t) {
  var r = [`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];
  for (var n in e12.uniforms) {
    var i = t[n];
    if (!i) {
      e12.uniforms[n].group && r.push(`
                    renderer.shader.syncUniformGroup(uv["` + n + `"], syncData);
                `);
      continue;
    }
    for (var o = e12.uniforms[n], a = false, s = 0; s < J_.length; s++)
      if (J_[s].test(i, o)) {
        r.push(J_[s].code(n, o)), a = true;
        break;
      }
    if (!a) {
      var l = i.size === 1 ? kre : Dre, u = l[i.type].replace("location", 'ud["' + n + '"].location');
      r.push(`
            cv = ud["` + n + `"].value;
            v = uv["` + n + `"];
            ` + u + ";");
    }
  }
  return new Function("ud", "uv", "renderer", "syncData", r.join(`
`));
}
var Nre = [
  "precision mediump float;",
  "void main(void){",
  "float test = 0.1;",
  "%forloop%",
  "gl_FragColor = vec4(0.0);",
  "}"
].join(`
`);
function Mre(e12) {
  for (var t = "", r = 0; r < e12; ++r)
    r > 0 && (t += `
else `), r < e12 - 1 && (t += "if(test == " + r + ".0){}");
  return t;
}
function Cz(e12, t) {
  if (e12 === 0)
    throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");
  for (var r = t.createShader(t.FRAGMENT_SHADER); ; ) {
    var n = Nre.replace(/%forloop%/gi, Mre(e12));
    if (t.shaderSource(r, n), t.compileShader(r), !t.getShaderParameter(r, t.COMPILE_STATUS))
      e12 = e12 / 2 | 0;
    else
      break;
  }
  return e12;
}
var Lp;
function Lre() {
  if (typeof Lp == "boolean")
    return Lp;
  try {
    var e12 = new Function("param1", "param2", "param3", "return param1[param2] === param3;");
    Lp = e12({ a: "b" }, "a", "b") === true;
  } catch {
    Lp = false;
  }
  return Lp;
}
var Bre = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`;
var Fre = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;
var $re = 0;
var Yy = {};
var Dv = (
  /** @class */
  function() {
    function e12(t, r, n) {
      n === void 0 && (n = "pixi-shader"), this.id = $re++, this.vertexSrc = t || e12.defaultVertexSrc, this.fragmentSrc = r || e12.defaultFragmentSrc, this.vertexSrc = this.vertexSrc.trim(), this.fragmentSrc = this.fragmentSrc.trim(), this.vertexSrc.substring(0, 8) !== "#version" && (n = n.replace(/\s+/g, "-"), Yy[n] ? (Yy[n]++, n += "-" + Yy[n]) : Yy[n] = 1, this.vertexSrc = "#define SHADER_NAME " + n + `
` + this.vertexSrc, this.fragmentSrc = "#define SHADER_NAME " + n + `
` + this.fragmentSrc, this.vertexSrc = w5(this.vertexSrc, ft.PRECISION_VERTEX, Yo.HIGH), this.fragmentSrc = w5(this.fragmentSrc, ft.PRECISION_FRAGMENT, Pre())), this.extractData(this.vertexSrc, this.fragmentSrc), this.glPrograms = {}, this.syncUniforms = null;
    }
    return e12.prototype.extractData = function(t, r) {
      var n = Pz();
      if (n) {
        var i = Az(n, t, r);
        this.attributeData = this.getAttributeData(i, n), this.uniformData = this.getUniformData(i, n), n.deleteProgram(i);
      } else
        this.uniformData = {}, this.attributeData = {};
    }, e12.prototype.getAttributeData = function(t, r) {
      for (var n = {}, i = [], o = r.getProgramParameter(t, r.ACTIVE_ATTRIBUTES), a = 0; a < o; a++) {
        var s = r.getActiveAttrib(t, a), l = O5(r, s.type), u = {
          type: l,
          name: s.name,
          size: xre(l),
          location: 0
        };
        n[s.name] = u, i.push(u);
      }
      i.sort(function(c, f) {
        return c.name > f.name ? 1 : -1;
      });
      for (var a = 0; a < i.length; a++)
        i[a].location = a;
      return n;
    }, e12.prototype.getUniformData = function(t, r) {
      for (var n = {}, i = r.getProgramParameter(t, r.ACTIVE_UNIFORMS), o = 0; o < i; o++) {
        var a = r.getActiveUniform(t, o), s = a.name.replace(/\[.*?\]$/, ""), l = a.name.match(/\[.*?\]$/), u = O5(r, a.type);
        n[s] = {
          type: u,
          size: a.size,
          isArray: l,
          value: Oz(u, a.size)
        };
      }
      return n;
    }, Object.defineProperty(e12, "defaultVertexSrc", {
      /**
       * The default vertex shader source
       *
       * @static
       * @constant
       * @member {string}
       */
      get: function() {
        return Fre;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12, "defaultFragmentSrc", {
      /**
       * The default fragment shader source
       *
       * @static
       * @constant
       * @member {string}
       */
      get: function() {
        return Bre;
      },
      enumerable: false,
      configurable: true
    }), e12.from = function(t, r, n) {
      var i = t + r, o = hI[i];
      return o || (hI[i] = o = new e12(t, r, n)), o;
    }, e12;
  }()
);
var Kl = (
  /** @class */
  function() {
    function e12(t, r) {
      this.program = t, r ? r instanceof Ul ? this.uniformGroup = r : this.uniformGroup = new Ul(r) : this.uniformGroup = new Ul({});
      for (var n in t.uniformData)
        this.uniformGroup.uniforms[n] instanceof Array && (this.uniformGroup.uniforms[n] = new Float32Array(this.uniformGroup.uniforms[n]));
    }
    return e12.prototype.checkUniformExists = function(t, r) {
      if (r.uniforms[t])
        return true;
      for (var n in r.uniforms) {
        var i = r.uniforms[n];
        if (i.group && this.checkUniformExists(t, i))
          return true;
      }
      return false;
    }, e12.prototype.destroy = function() {
      this.uniformGroup = null;
    }, Object.defineProperty(e12.prototype, "uniforms", {
      /**
       * Shader uniform values, shortcut for `uniformGroup.uniforms`
       * @readonly
       * @member {object}
       */
      get: function() {
        return this.uniformGroup.uniforms;
      },
      enumerable: false,
      configurable: true
    }), e12.from = function(t, r, n) {
      var i = Dv.from(t, r);
      return new e12(i, n);
    }, e12;
  }()
);
var tw = 0;
var rw = 1;
var nw = 2;
var iw = 3;
var ow = 4;
var ec = (
  /** @class */
  function() {
    function e12() {
      this.data = 0, this.blendMode = yt.NORMAL, this.polygonOffset = 0, this.blend = true;
    }
    return Object.defineProperty(e12.prototype, "blend", {
      /**
       * Activates blending of the computed fragment color values
       *
       * @member {boolean}
       */
      get: function() {
        return !!(this.data & 1 << tw);
      },
      set: function(t) {
        !!(this.data & 1 << tw) !== t && (this.data ^= 1 << tw);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "offsets", {
      /**
       * Activates adding an offset to depth values of polygon's fragments
       *
       * @member {boolean}
       * @default false
       */
      get: function() {
        return !!(this.data & 1 << rw);
      },
      set: function(t) {
        !!(this.data & 1 << rw) !== t && (this.data ^= 1 << rw);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "culling", {
      /**
       * Activates culling of polygons.
       *
       * @member {boolean}
       * @default false
       */
      get: function() {
        return !!(this.data & 1 << nw);
      },
      set: function(t) {
        !!(this.data & 1 << nw) !== t && (this.data ^= 1 << nw);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "depthTest", {
      /**
       * Activates depth comparisons and updates to the depth buffer.
       *
       * @member {boolean}
       * @default false
       */
      get: function() {
        return !!(this.data & 1 << iw);
      },
      set: function(t) {
        !!(this.data & 1 << iw) !== t && (this.data ^= 1 << iw);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "clockwiseFrontFace", {
      /**
       * Specifies whether or not front or back-facing polygons can be culled.
       * @member {boolean}
       * @default false
       */
      get: function() {
        return !!(this.data & 1 << ow);
      },
      set: function(t) {
        !!(this.data & 1 << ow) !== t && (this.data ^= 1 << ow);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "blendMode", {
      /**
       * The blend mode to be applied when this state is set. Apply a value of `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.
       * Setting this mode to anything other than NO_BLEND will automatically switch blending on.
       *
       * @member {number}
       * @default PIXI.BLEND_MODES.NORMAL
       * @see PIXI.BLEND_MODES
       */
      get: function() {
        return this._blendMode;
      },
      set: function(t) {
        this.blend = t !== yt.NONE, this._blendMode = t;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "polygonOffset", {
      /**
       * The polygon offset. Setting this property to anything other than 0 will automatically enable polygon offset fill.
       *
       * @member {number}
       * @default 0
       */
      get: function() {
        return this._polygonOffset;
      },
      set: function(t) {
        this.offsets = !!t, this._polygonOffset = t;
      },
      enumerable: false,
      configurable: true
    }), e12.for2d = function() {
      var t = new e12();
      return t.depthTest = false, t.blend = true, t;
    }, e12;
  }()
);
var Hre = `attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;
var Ure = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`;
var js = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r, n, i) {
      var o = this, a = Dv.from(r || t.defaultVertexSrc, n || t.defaultFragmentSrc);
      return o = e12.call(this, a, i) || this, o.padding = 0, o.resolution = ft.FILTER_RESOLUTION, o.enabled = true, o.autoFit = true, o.legacy = !!o.program.attributeData.aTextureCoord, o.state = new ec(), o;
    }
    return t.prototype.apply = function(r, n, i, o, a) {
      r.applyFilter(this, n, i, o);
    }, Object.defineProperty(t.prototype, "blendMode", {
      /**
       * Sets the blendmode of the filter
       *
       * @member {number}
       * @default PIXI.BLEND_MODES.NORMAL
       */
      get: function() {
        return this.state.blendMode;
      },
      set: function(r) {
        this.state.blendMode = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t, "defaultVertexSrc", {
      /**
       * The default vertex shader source
       *
       * @static
       * @type {string}
       * @constant
       */
      get: function() {
        return Hre;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t, "defaultFragmentSrc", {
      /**
       * The default fragment shader source
       *
       * @static
       * @type {string}
       * @constant
       */
      get: function() {
        return Ure;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(Kl)
);
var jre = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;
var Gre = `varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`;
var I5 = new sn();
var $E = (
  /** @class */
  function() {
    function e12(t, r) {
      this._texture = t, this.mapCoord = new sn(), this.uClampFrame = new Float32Array(4), this.uClampOffset = new Float32Array(2), this._textureID = -1, this._updateID = 0, this.clampOffset = 0, this.clampMargin = typeof r > "u" ? 0.5 : r, this.isSimple = false;
    }
    return Object.defineProperty(e12.prototype, "texture", {
      /**
       * texture property
       * @member {PIXI.Texture}
       */
      get: function() {
        return this._texture;
      },
      set: function(t) {
        this._texture = t, this._textureID = -1;
      },
      enumerable: false,
      configurable: true
    }), e12.prototype.multiplyUvs = function(t, r) {
      r === void 0 && (r = t);
      for (var n = this.mapCoord, i = 0; i < t.length; i += 2) {
        var o = t[i], a = t[i + 1];
        r[i] = o * n.a + a * n.c + n.tx, r[i + 1] = o * n.b + a * n.d + n.ty;
      }
      return r;
    }, e12.prototype.update = function(t) {
      var r = this._texture;
      if (!r || !r.valid || !t && this._textureID === r._updateID)
        return false;
      this._textureID = r._updateID, this._updateID++;
      var n = r._uvs;
      this.mapCoord.set(n.x1 - n.x0, n.y1 - n.y0, n.x3 - n.x0, n.y3 - n.y0, n.x0, n.y0);
      var i = r.orig, o = r.trim;
      o && (I5.set(i.width / o.width, 0, 0, i.height / o.height, -o.x / o.width, -o.y / o.height), this.mapCoord.append(I5));
      var a = r.baseTexture, s = this.uClampFrame, l = this.clampMargin / a.resolution, u = this.clampOffset;
      return s[0] = (r._frame.x + l + u) / a.width, s[1] = (r._frame.y + l + u) / a.height, s[2] = (r._frame.x + r._frame.width - l + u) / a.width, s[3] = (r._frame.y + r._frame.height - l + u) / a.height, this.uClampOffset[0] = u / a.realWidth, this.uClampOffset[1] = u / a.realHeight, this.isSimple = r._frame.width === a.width && r._frame.height === a.height && r.rotate === 0, true;
    }, e12;
  }()
);
var xz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = this, i = new sn();
      return n = e12.call(this, jre, Gre) || this, r.renderable = false, n.maskSprite = r, n.maskMatrix = i, n;
    }
    return t.prototype.apply = function(r, n, i, o) {
      var a = this.maskSprite, s = a._texture;
      s.valid && (s.uvMatrix || (s.uvMatrix = new $E(s, 0)), s.uvMatrix.update(), this.uniforms.npmAlpha = s.baseTexture.alphaMode ? 0 : 1, this.uniforms.mask = s, this.uniforms.otherMatrix = r.calculateSpriteMatrix(this.maskMatrix, a).prepend(s.uvMatrix.mapCoord), this.uniforms.alpha = a.worldAlpha, this.uniforms.maskClamp = s.uvMatrix.uClampFrame, r.applyFilter(this, n, i, o));
    }, t;
  }(js)
);
var kz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.enableScissor = false, n.alphaMaskPool = [], n.maskDataPool = [], n.maskStack = [], n.alphaMaskIndex = 0, n;
    }
    return t.prototype.setMaskStack = function(r) {
      this.maskStack = r, this.renderer.scissor.setMaskStack(r), this.renderer.stencil.setMaskStack(r);
    }, t.prototype.push = function(r, n) {
      var i = n;
      if (!i.isMaskData) {
        var o = this.maskDataPool.pop() || new wz();
        o.pooled = true, o.maskObject = n, i = o;
      }
      switch (i.autoDetect && this.detect(i), i.copyCountersOrReset(this.maskStack[this.maskStack.length - 1]), i._target = r, i.type) {
        case Ri.SCISSOR:
          this.maskStack.push(i), this.renderer.scissor.push(i);
          break;
        case Ri.STENCIL:
          this.maskStack.push(i), this.renderer.stencil.push(i);
          break;
        case Ri.SPRITE:
          i.copyCountersOrReset(null), this.pushSpriteMask(i), this.maskStack.push(i);
          break;
      }
    }, t.prototype.pop = function(r) {
      var n = this.maskStack.pop();
      if (!(!n || n._target !== r)) {
        switch (n.type) {
          case Ri.SCISSOR:
            this.renderer.scissor.pop();
            break;
          case Ri.STENCIL:
            this.renderer.stencil.pop(n.maskObject);
            break;
          case Ri.SPRITE:
            this.popSpriteMask();
            break;
        }
        n.reset(), n.pooled && this.maskDataPool.push(n);
      }
    }, t.prototype.detect = function(r) {
      var n = r.maskObject;
      if (n.isSprite) {
        r.type = Ri.SPRITE;
        return;
      }
      if (r.type = Ri.STENCIL, this.enableScissor && n.isFastRect && n.isFastRect()) {
        var i = n.worldTransform, o = Math.atan2(i.b, i.a), a = Math.atan2(i.d, i.c);
        o = Math.round(o * (180 / Math.PI) * 100), a = Math.round(a * (180 / Math.PI) * 100) - o, o = (o % 9e3 + 9e3) % 9e3, a = (a % 18e3 + 18e3) % 18e3, o === 0 && a === 9e3 && (r.type = Ri.SCISSOR);
      }
    }, t.prototype.pushSpriteMask = function(r) {
      var n = r.maskObject, i = r._target, o = this.alphaMaskPool[this.alphaMaskIndex];
      o || (o = this.alphaMaskPool[this.alphaMaskIndex] = [new xz(n)]), o[0].resolution = this.renderer.resolution, o[0].maskSprite = n;
      var a = i.filterArea;
      i.filterArea = n.getBounds(true), this.renderer.filter.push(i, o), i.filterArea = a, this.alphaMaskIndex++;
    }, t.prototype.popSpriteMask = function() {
      this.renderer.filter.pop(), this.alphaMaskIndex--;
    }, t;
  }(Hi)
);
var Dz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.maskStack = [], n.glConst = 0, n;
    }
    return t.prototype.getStackLength = function() {
      return this.maskStack.length;
    }, t.prototype.setMaskStack = function(r) {
      var n = this.renderer.gl, i = this.getStackLength();
      this.maskStack = r;
      var o = this.getStackLength();
      o !== i && (o === 0 ? n.disable(this.glConst) : (n.enable(this.glConst), this._useCurrent()));
    }, t.prototype._useCurrent = function() {
    }, t.prototype.destroy = function() {
      e12.prototype.destroy.call(this), this.maskStack = null;
    }, t;
  }(Hi)
);
var Rz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.glConst = WebGLRenderingContext.SCISSOR_TEST, n;
    }
    return t.prototype.getStackLength = function() {
      var r = this.maskStack[this.maskStack.length - 1];
      return r ? r._scissorCounter : 0;
    }, t.prototype.push = function(r) {
      var n = r.maskObject;
      n.renderable = true;
      var i = r._scissorRect, o = n.getBounds(true), a = this.renderer.gl;
      n.renderable = false, i ? o.fit(i) : a.enable(a.SCISSOR_TEST), r._scissorCounter++, r._scissorRect = o, this._useCurrent();
    }, t.prototype.pop = function() {
      var r = this.renderer.gl;
      this.getStackLength() > 0 ? this._useCurrent() : r.disable(r.SCISSOR_TEST);
    }, t.prototype._useCurrent = function() {
      var r = this.maskStack[this.maskStack.length - 1]._scissorRect, n = this.renderer.renderTexture.current, i = this.renderer.projection, o = i.transform, a = i.sourceFrame, s = i.destinationFrame, l = n ? n.resolution : this.renderer.resolution, u = (r.x - a.x) * l + s.x, c = (r.y - a.y) * l + s.y, f = r.width * l, h = r.height * l;
      o && (u += o.tx * l, c += o.ty * l), n || (c = this.renderer.height - h - c), this.renderer.gl.scissor(u, c, f, h);
    }, t;
  }(Dz)
);
var Nz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.glConst = WebGLRenderingContext.STENCIL_TEST, n;
    }
    return t.prototype.getStackLength = function() {
      var r = this.maskStack[this.maskStack.length - 1];
      return r ? r._stencilCounter : 0;
    }, t.prototype.push = function(r) {
      var n = r.maskObject, i = this.renderer.gl, o = r._stencilCounter;
      o === 0 && (this.renderer.framebuffer.forceStencil(), i.enable(i.STENCIL_TEST)), r._stencilCounter++, i.colorMask(false, false, false, false), i.stencilFunc(i.EQUAL, o, this._getBitwiseMask()), i.stencilOp(i.KEEP, i.KEEP, i.INCR), n.renderable = true, n.render(this.renderer), this.renderer.batch.flush(), n.renderable = false, this._useCurrent();
    }, t.prototype.pop = function(r) {
      var n = this.renderer.gl;
      this.getStackLength() === 0 ? (n.disable(n.STENCIL_TEST), n.clear(n.STENCIL_BUFFER_BIT), n.clearStencil(0)) : (n.colorMask(false, false, false, false), n.stencilOp(n.KEEP, n.KEEP, n.DECR), r.renderable = true, r.render(this.renderer), this.renderer.batch.flush(), r.renderable = false, this._useCurrent());
    }, t.prototype._useCurrent = function() {
      var r = this.renderer.gl;
      r.colorMask(true, true, true, true), r.stencilFunc(r.EQUAL, this.getStackLength(), this._getBitwiseMask()), r.stencilOp(r.KEEP, r.KEEP, r.KEEP);
    }, t.prototype._getBitwiseMask = function() {
      return (1 << this.getStackLength()) - 1;
    }, t;
  }(Dz)
);
var Mz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.destinationFrame = null, n.sourceFrame = null, n.defaultFrame = null, n.projectionMatrix = new sn(), n.transform = null, n;
    }
    return t.prototype.update = function(r, n, i, o) {
      this.destinationFrame = r || this.destinationFrame || this.defaultFrame, this.sourceFrame = n || this.sourceFrame || r, this.calculateProjection(this.destinationFrame, this.sourceFrame, i, o), this.transform && this.projectionMatrix.append(this.transform);
      var a = this.renderer;
      a.globalUniforms.uniforms.projectionMatrix = this.projectionMatrix, a.globalUniforms.update(), a.shader.shader && a.shader.syncUniformGroup(a.shader.shader.uniforms.globals);
    }, t.prototype.calculateProjection = function(r, n, i, o) {
      var a = this.projectionMatrix, s = o ? -1 : 1;
      a.identity(), a.a = 1 / n.width * 2, a.d = s * (1 / n.height * 2), a.tx = -1 - n.x * a.a, a.ty = -s - n.y * a.d;
    }, t.prototype.setTransform = function(r) {
    }, t;
  }(Hi)
);
var _c = new fr();
var Bp = new fr();
var Fp = new fr();
var Lz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.clearColor = r._backgroundColorRgba, n.defaultMaskStack = [], n.current = null, n.sourceFrame = new fr(), n.destinationFrame = new fr(), n;
    }
    return t.prototype.bind = function(r, n, i) {
      r === void 0 && (r = null);
      var o = this.renderer;
      this.current = r;
      var a, s, l;
      r ? (a = r.baseTexture, l = a.resolution, n || (_c.width = r.frame.width, _c.height = r.frame.height, n = _c), i || (Bp.x = r.frame.x, Bp.y = r.frame.y, Bp.width = n.width, Bp.height = n.height, i = Bp), s = a.framebuffer) : (l = o.resolution, n || (_c.width = o.screen.width, _c.height = o.screen.height, n = _c), i || (i = _c, i.width = n.width, i.height = n.height)), Fp.x = i.x * l, Fp.y = i.y * l, Fp.width = i.width * l, Fp.height = i.height * l, this.renderer.framebuffer.bind(s, Fp), this.renderer.projection.update(i, n, l, !s), r ? this.renderer.mask.setMaskStack(a.maskStack) : this.renderer.mask.setMaskStack(this.defaultMaskStack), this.sourceFrame.copyFrom(n), this.destinationFrame.copyFrom(i);
    }, t.prototype.clear = function(r, n) {
      this.current ? r = r || this.current.baseTexture.clearColor : r = r || this.clearColor, this.renderer.framebuffer.clear(r[0], r[1], r[2], r[3], n);
    }, t.prototype.resize = function() {
      this.bind(null);
    }, t.prototype.reset = function() {
      this.bind(null);
    }, t;
  }(Hi)
);
var zre = (
  /** @class */
  /* @__PURE__ */ function() {
    function e12() {
    }
    return e12;
  }()
);
var Bz = (
  /** @class */
  function() {
    function e12(t, r) {
      this.program = t, this.uniformData = r, this.uniformGroups = {};
    }
    return e12.prototype.destroy = function() {
      this.uniformData = null, this.uniformGroups = null, this.program = null;
    }, e12;
  }()
);
var Vre = 0;
var P5 = { textureCount: 0 };
var Fz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.destroyed = false, n.systemCheck(), n.gl = null, n.shader = null, n.program = null, n.cache = {}, n.id = Vre++, n;
    }
    return t.prototype.systemCheck = function() {
      if (!Lre())
        throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.");
    }, t.prototype.contextChange = function(r) {
      this.gl = r, this.reset();
    }, t.prototype.bind = function(r, n) {
      r.uniforms.globals = this.renderer.globalUniforms;
      var i = r.program, o = i.glPrograms[this.renderer.CONTEXT_UID] || this.generateShader(r);
      return this.shader = r, this.program !== i && (this.program = i, this.gl.useProgram(o.program)), n || (P5.textureCount = 0, this.syncUniformGroup(r.uniformGroup, P5)), o;
    }, t.prototype.setUniforms = function(r) {
      var n = this.shader.program, i = n.glPrograms[this.renderer.CONTEXT_UID];
      n.syncUniforms(i.uniformData, r, this.renderer);
    }, t.prototype.syncUniformGroup = function(r, n) {
      var i = this.getglProgram();
      (!r.static || r.dirtyId !== i.uniformGroups[r.id]) && (i.uniformGroups[r.id] = r.dirtyId, this.syncUniforms(r, i, n));
    }, t.prototype.syncUniforms = function(r, n, i) {
      var o = r.syncUniforms[this.shader.program.id] || this.createSyncGroups(r);
      o(n.uniformData, r.uniforms, this.renderer, i);
    }, t.prototype.createSyncGroups = function(r) {
      var n = this.getSignature(r, this.shader.program.uniformData);
      return this.cache[n] || (this.cache[n] = Rre(r, this.shader.program.uniformData)), r.syncUniforms[this.shader.program.id] = this.cache[n], r.syncUniforms[this.shader.program.id];
    }, t.prototype.getSignature = function(r, n) {
      var i = r.uniforms, o = [];
      for (var a in i)
        o.push(a), n[a] && o.push(n[a].type);
      return o.join("-");
    }, t.prototype.getglProgram = function() {
      return this.shader ? this.shader.program.glPrograms[this.renderer.CONTEXT_UID] : null;
    }, t.prototype.generateShader = function(r) {
      var n = this.gl, i = r.program, o = {};
      for (var a in i.attributeData)
        o[a] = i.attributeData[a].location;
      var s = Az(n, i.vertexSrc, i.fragmentSrc, o), l = {};
      for (var a in i.uniformData) {
        var u = i.uniformData[a];
        l[a] = {
          location: n.getUniformLocation(s, a),
          value: Oz(u.type, u.size)
        };
      }
      var c = new Bz(s, l);
      return i.glPrograms[this.renderer.CONTEXT_UID] = c, c;
    }, t.prototype.reset = function() {
      this.program = null, this.shader = null;
    }, t.prototype.destroy = function() {
      this.destroyed = true;
    }, t;
  }(Hi)
);
function Xre(e12, t) {
  return t === void 0 && (t = []), t[yt.NORMAL] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.ADD] = [e12.ONE, e12.ONE], t[yt.MULTIPLY] = [e12.DST_COLOR, e12.ONE_MINUS_SRC_ALPHA, e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.SCREEN] = [e12.ONE, e12.ONE_MINUS_SRC_COLOR, e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.OVERLAY] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.DARKEN] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.LIGHTEN] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.COLOR_DODGE] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.COLOR_BURN] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.HARD_LIGHT] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.SOFT_LIGHT] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.DIFFERENCE] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.EXCLUSION] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.HUE] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.SATURATION] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.COLOR] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.LUMINOSITY] = [e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.NONE] = [0, 0], t[yt.NORMAL_NPM] = [e12.SRC_ALPHA, e12.ONE_MINUS_SRC_ALPHA, e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.ADD_NPM] = [e12.SRC_ALPHA, e12.ONE, e12.ONE, e12.ONE], t[yt.SCREEN_NPM] = [e12.SRC_ALPHA, e12.ONE_MINUS_SRC_COLOR, e12.ONE, e12.ONE_MINUS_SRC_ALPHA], t[yt.SRC_IN] = [e12.DST_ALPHA, e12.ZERO], t[yt.SRC_OUT] = [e12.ONE_MINUS_DST_ALPHA, e12.ZERO], t[yt.SRC_ATOP] = [e12.DST_ALPHA, e12.ONE_MINUS_SRC_ALPHA], t[yt.DST_OVER] = [e12.ONE_MINUS_DST_ALPHA, e12.ONE], t[yt.DST_IN] = [e12.ZERO, e12.SRC_ALPHA], t[yt.DST_OUT] = [e12.ZERO, e12.ONE_MINUS_SRC_ALPHA], t[yt.DST_ATOP] = [e12.ONE_MINUS_DST_ALPHA, e12.SRC_ALPHA], t[yt.XOR] = [e12.ONE_MINUS_DST_ALPHA, e12.ONE_MINUS_SRC_ALPHA], t[yt.SUBTRACT] = [e12.ONE, e12.ONE, e12.ONE, e12.ONE, e12.FUNC_REVERSE_SUBTRACT, e12.FUNC_ADD], t;
}
var Wre = 0;
var Yre = 1;
var qre = 2;
var Kre = 3;
var Zre = 4;
var $z = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.gl = null, n.stateId = 0, n.polygonOffset = 0, n.blendMode = yt.NONE, n._blendEq = false, n.map = [], n.map[Wre] = n.setBlend, n.map[Yre] = n.setOffset, n.map[qre] = n.setCullFace, n.map[Kre] = n.setDepthTest, n.map[Zre] = n.setFrontFace, n.checks = [], n.defaultState = new ec(), n.defaultState.blend = true, n;
    }
    return t.prototype.contextChange = function(r) {
      this.gl = r, this.blendModes = Xre(r), this.set(this.defaultState), this.reset();
    }, t.prototype.set = function(r) {
      if (r = r || this.defaultState, this.stateId !== r.data) {
        for (var n = this.stateId ^ r.data, i = 0; n; )
          n & 1 && this.map[i].call(this, !!(r.data & 1 << i)), n = n >> 1, i++;
        this.stateId = r.data;
      }
      for (var i = 0; i < this.checks.length; i++)
        this.checks[i](this, r);
    }, t.prototype.forceState = function(r) {
      r = r || this.defaultState;
      for (var n = 0; n < this.map.length; n++)
        this.map[n].call(this, !!(r.data & 1 << n));
      for (var n = 0; n < this.checks.length; n++)
        this.checks[n](this, r);
      this.stateId = r.data;
    }, t.prototype.setBlend = function(r) {
      this.updateCheck(t.checkBlendMode, r), this.gl[r ? "enable" : "disable"](this.gl.BLEND);
    }, t.prototype.setOffset = function(r) {
      this.updateCheck(t.checkPolygonOffset, r), this.gl[r ? "enable" : "disable"](this.gl.POLYGON_OFFSET_FILL);
    }, t.prototype.setDepthTest = function(r) {
      this.gl[r ? "enable" : "disable"](this.gl.DEPTH_TEST);
    }, t.prototype.setCullFace = function(r) {
      this.gl[r ? "enable" : "disable"](this.gl.CULL_FACE);
    }, t.prototype.setFrontFace = function(r) {
      this.gl.frontFace(this.gl[r ? "CW" : "CCW"]);
    }, t.prototype.setBlendMode = function(r) {
      if (r !== this.blendMode) {
        this.blendMode = r;
        var n = this.blendModes[r], i = this.gl;
        n.length === 2 ? i.blendFunc(n[0], n[1]) : i.blendFuncSeparate(n[0], n[1], n[2], n[3]), n.length === 6 ? (this._blendEq = true, i.blendEquationSeparate(n[4], n[5])) : this._blendEq && (this._blendEq = false, i.blendEquationSeparate(i.FUNC_ADD, i.FUNC_ADD));
      }
    }, t.prototype.setPolygonOffset = function(r, n) {
      this.gl.polygonOffset(r, n);
    }, t.prototype.reset = function() {
      this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, false), this.forceState(this.defaultState), this._blendEq = true, this.blendMode = -1, this.setBlendMode(0);
    }, t.prototype.updateCheck = function(r, n) {
      var i = this.checks.indexOf(r);
      n && i === -1 ? this.checks.push(r) : !n && i !== -1 && this.checks.splice(i, 1);
    }, t.checkBlendMode = function(r, n) {
      r.setBlendMode(n.blendMode);
    }, t.checkPolygonOffset = function(r, n) {
      r.setPolygonOffset(1, n.polygonOffset);
    }, t;
  }(Hi)
);
var Hz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.count = 0, n.checkCount = 0, n.maxIdle = ft.GC_MAX_IDLE, n.checkCountMax = ft.GC_MAX_CHECK_COUNT, n.mode = ft.GC_MODE, n;
    }
    return t.prototype.postrender = function() {
      this.renderer.renderingToScreen && (this.count++, this.mode !== t0.MANUAL && (this.checkCount++, this.checkCount > this.checkCountMax && (this.checkCount = 0, this.run())));
    }, t.prototype.run = function() {
      for (var r = this.renderer.texture, n = r.managedTextures, i = false, o = 0; o < n.length; o++) {
        var a = n[o];
        !a.framebuffer && this.count - a.touched > this.maxIdle && (r.destroyTexture(a, true), n[o] = null, i = true);
      }
      if (i) {
        for (var s = 0, o = 0; o < n.length; o++)
          n[o] !== null && (n[s++] = n[o]);
        n.length = s;
      }
    }, t.prototype.unload = function(r) {
      var n = this.renderer.texture, i = r._texture;
      i && !i.framebuffer && n.destroyTexture(i);
      for (var o = r.children.length - 1; o >= 0; o--)
        this.unload(r.children[o]);
    }, t;
  }(Hi)
);
var eb = (
  /** @class */
  /* @__PURE__ */ function() {
    function e12(t) {
      this.texture = t, this.width = -1, this.height = -1, this.dirtyId = -1, this.dirtyStyleId = -1, this.mipmap = false, this.wrapMode = 33071, this.type = 6408, this.internalFormat = 5121;
    }
    return e12;
  }()
);
var Uz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.boundTextures = [], n.currentLocation = -1, n.managedTextures = [], n._unknownBoundTextures = false, n.unknownTexture = new Nr(), n;
    }
    return t.prototype.contextChange = function() {
      var r = this.gl = this.renderer.gl;
      this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.webGLVersion = this.renderer.context.webGLVersion;
      var n = r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);
      this.boundTextures.length = n;
      for (var i = 0; i < n; i++)
        this.boundTextures[i] = null;
      this.emptyTextures = {};
      var o = new eb(r.createTexture());
      r.bindTexture(r.TEXTURE_2D, o.texture), r.texImage2D(r.TEXTURE_2D, 0, r.RGBA, 1, 1, 0, r.RGBA, r.UNSIGNED_BYTE, new Uint8Array(4)), this.emptyTextures[r.TEXTURE_2D] = o, this.emptyTextures[r.TEXTURE_CUBE_MAP] = new eb(r.createTexture()), r.bindTexture(r.TEXTURE_CUBE_MAP, this.emptyTextures[r.TEXTURE_CUBE_MAP].texture);
      for (var i = 0; i < 6; i++)
        r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, r.RGBA, 1, 1, 0, r.RGBA, r.UNSIGNED_BYTE, null);
      r.texParameteri(r.TEXTURE_CUBE_MAP, r.TEXTURE_MAG_FILTER, r.LINEAR), r.texParameteri(r.TEXTURE_CUBE_MAP, r.TEXTURE_MIN_FILTER, r.LINEAR);
      for (var i = 0; i < this.boundTextures.length; i++)
        this.bind(null, i);
    }, t.prototype.bind = function(r, n) {
      n === void 0 && (n = 0);
      var i = this.gl;
      if (r) {
        if (r = r.castToBaseTexture(), r.parentTextureArray)
          return;
        if (r.valid) {
          r.touched = this.renderer.textureGC.count;
          var o = r._glTextures[this.CONTEXT_UID] || this.initTexture(r);
          this.boundTextures[n] !== r && (this.currentLocation !== n && (this.currentLocation = n, i.activeTexture(i.TEXTURE0 + n)), i.bindTexture(r.target, o.texture)), o.dirtyId !== r.dirtyId && (this.currentLocation !== n && (this.currentLocation = n, i.activeTexture(i.TEXTURE0 + n)), this.updateTexture(r)), this.boundTextures[n] = r;
        }
      } else
        this.currentLocation !== n && (this.currentLocation = n, i.activeTexture(i.TEXTURE0 + n)), i.bindTexture(i.TEXTURE_2D, this.emptyTextures[i.TEXTURE_2D].texture), this.boundTextures[n] = null;
    }, t.prototype.reset = function() {
      this._unknownBoundTextures = true, this.currentLocation = -1;
      for (var r = 0; r < this.boundTextures.length; r++)
        this.boundTextures[r] = this.unknownTexture;
    }, t.prototype.unbind = function(r) {
      var n = this, i = n.gl, o = n.boundTextures;
      if (this._unknownBoundTextures) {
        this._unknownBoundTextures = false;
        for (var a = 0; a < o.length; a++)
          o[a] === this.unknownTexture && this.bind(null, a);
      }
      for (var a = 0; a < o.length; a++)
        o[a] === r && (this.currentLocation !== a && (i.activeTexture(i.TEXTURE0 + a), this.currentLocation = a), i.bindTexture(r.target, this.emptyTextures[r.target].texture), o[a] = null);
    }, t.prototype.initTexture = function(r) {
      var n = new eb(this.gl.createTexture());
      return n.dirtyId = -1, r._glTextures[this.CONTEXT_UID] = n, this.managedTextures.push(r), r.on("dispose", this.destroyTexture, this), n;
    }, t.prototype.initTextureType = function(r, n) {
      if (n.internalFormat = r.format, n.type = r.type, this.webGLVersion === 2) {
        var i = this.renderer.gl;
        r.type === i.FLOAT && r.format === i.RGBA && (n.internalFormat = i.RGBA32F), r.type === on.HALF_FLOAT && (n.type = i.HALF_FLOAT), n.type === i.HALF_FLOAT && r.format === i.RGBA && (n.internalFormat = i.RGBA16F);
      }
    }, t.prototype.updateTexture = function(r) {
      var n = r._glTextures[this.CONTEXT_UID];
      if (n) {
        var i = this.renderer;
        if (this.initTextureType(r, n), !(r.resource && r.resource.upload(i, r, n))) {
          var o = r.realWidth, a = r.realHeight, s = i.gl;
          (n.width !== o || n.height !== a || n.dirtyId < 0) && (n.width = o, n.height = a, s.texImage2D(r.target, 0, n.internalFormat, o, a, 0, r.format, n.type, null));
        }
        r.dirtyStyleId !== n.dirtyStyleId && this.updateTextureStyle(r), n.dirtyId = r.dirtyId;
      }
    }, t.prototype.destroyTexture = function(r, n) {
      var i = this.gl;
      if (r = r.castToBaseTexture(), r._glTextures[this.CONTEXT_UID] && (this.unbind(r), i.deleteTexture(r._glTextures[this.CONTEXT_UID].texture), r.off("dispose", this.destroyTexture, this), delete r._glTextures[this.CONTEXT_UID], !n)) {
        var o = this.managedTextures.indexOf(r);
        o !== -1 && Jc(this.managedTextures, o, 1);
      }
    }, t.prototype.updateTextureStyle = function(r) {
      var n = r._glTextures[this.CONTEXT_UID];
      n && ((r.mipmap === Zf.POW2 || this.webGLVersion !== 2) && !r.isPowerOfTwo ? n.mipmap = false : n.mipmap = r.mipmap >= 1, this.webGLVersion !== 2 && !r.isPowerOfTwo ? n.wrapMode = Ps.CLAMP : n.wrapMode = r.wrapMode, r.resource && r.resource.style(this.renderer, r, n) || this.setStyle(r, n), n.dirtyStyleId = r.dirtyStyleId);
    }, t.prototype.setStyle = function(r, n) {
      var i = this.gl;
      if (n.mipmap && i.generateMipmap(r.target), i.texParameteri(r.target, i.TEXTURE_WRAP_S, n.wrapMode), i.texParameteri(r.target, i.TEXTURE_WRAP_T, n.wrapMode), n.mipmap) {
        i.texParameteri(r.target, i.TEXTURE_MIN_FILTER, r.scaleMode === Ra.LINEAR ? i.LINEAR_MIPMAP_LINEAR : i.NEAREST_MIPMAP_NEAREST);
        var o = this.renderer.context.extensions.anisotropicFiltering;
        if (o && r.anisotropicLevel > 0 && r.scaleMode === Ra.LINEAR) {
          var a = Math.min(r.anisotropicLevel, i.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT));
          i.texParameterf(r.target, o.TEXTURE_MAX_ANISOTROPY_EXT, a);
        }
      } else
        i.texParameteri(r.target, i.TEXTURE_MIN_FILTER, r.scaleMode === Ra.LINEAR ? i.LINEAR : i.NEAREST);
      i.texParameteri(r.target, i.TEXTURE_MAG_FILTER, r.scaleMode === Ra.LINEAR ? i.LINEAR : i.NEAREST);
    }, t;
  }(Hi)
);
var Qre = {
  FilterSystem: yz,
  BatchSystem: _z,
  ContextSystem: bz,
  FramebufferSystem: Ez,
  GeometrySystem: Sz,
  MaskSystem: kz,
  ScissorSystem: Rz,
  StencilSystem: Nz,
  ProjectionSystem: Mz,
  RenderTextureSystem: Lz,
  ShaderSystem: Fz,
  StateSystem: $z,
  TextureGCSystem: Hz,
  TextureSystem: Uz
};
var aw = new sn();
var jz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r, n) {
      r === void 0 && (r = qf.UNKNOWN);
      var i = e12.call(this) || this;
      return n = Object.assign({}, ft.RENDER_OPTIONS, n), n.roundPixels && (ft.ROUND_PIXELS = n.roundPixels, ze("5.0.0", "Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS", 2)), i.options = n, i.type = r, i.screen = new fr(0, 0, n.width, n.height), i.view = n.view || document.createElement("canvas"), i.resolution = n.resolution || ft.RESOLUTION, i.transparent = n.transparent, i.autoDensity = n.autoDensity || n.autoResize || false, i.preserveDrawingBuffer = n.preserveDrawingBuffer, i.clearBeforeRender = n.clearBeforeRender, i._backgroundColor = 0, i._backgroundColorRgba = [0, 0, 0, 0], i._backgroundColorString = "#000000", i.backgroundColor = n.backgroundColor || i._backgroundColor, i._lastObjectRendered = null, i.plugins = {}, i;
    }
    return t.prototype.initPlugins = function(r) {
      for (var n in r)
        this.plugins[n] = new r[n](this);
    }, Object.defineProperty(t.prototype, "width", {
      /**
       * Same as view.width, actual number of pixels in the canvas by horizontal.
       *
       * @member {number}
       * @readonly
       * @default 800
       */
      get: function() {
        return this.view.width;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "height", {
      /**
       * Same as view.height, actual number of pixels in the canvas by vertical.
       *
       * @member {number}
       * @readonly
       * @default 600
       */
      get: function() {
        return this.view.height;
      },
      enumerable: false,
      configurable: true
    }), t.prototype.resize = function(r, n) {
      this.screen.width = r, this.screen.height = n, this.view.width = r * this.resolution, this.view.height = n * this.resolution, this.autoDensity && (this.view.style.width = r + "px", this.view.style.height = n + "px"), this.emit("resize", r, n);
    }, t.prototype.generateTexture = function(r, n, i, o) {
      o = o || r.getLocalBounds(null, true), o.width === 0 && (o.width = 1), o.height === 0 && (o.height = 1);
      var a = hu.create({
        width: o.width | 0,
        height: o.height | 0,
        scaleMode: n,
        resolution: i
      });
      return aw.tx = -o.x, aw.ty = -o.y, this.render(r, a, false, aw, !!r.parent), a;
    }, t.prototype.destroy = function(r) {
      for (var n in this.plugins)
        this.plugins[n].destroy(), this.plugins[n] = null;
      r && this.view.parentNode && this.view.parentNode.removeChild(this.view);
      var i = this;
      i.plugins = null, i.type = qf.UNKNOWN, i.view = null, i.screen = null, i._tempDisplayObjectParent = null, i.options = null, this._backgroundColorRgba = null, this._backgroundColorString = null, this._lastObjectRendered = null;
    }, Object.defineProperty(t.prototype, "backgroundColor", {
      /**
       * The background color to fill if not transparent
       *
       * @member {number}
       */
      get: function() {
        return this._backgroundColor;
      },
      set: function(r) {
        this._backgroundColor = r, this._backgroundColorString = fD(r), cu(r, this._backgroundColorRgba);
      },
      enumerable: false,
      configurable: true
    }), t;
  }(qd)
);
var Gs2 = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, qf.WEBGL, r) || this;
      return r = n.options, n.gl = null, n.CONTEXT_UID = 0, n.runners = {
        destroy: new Bn("destroy"),
        contextChange: new Bn("contextChange"),
        reset: new Bn("reset"),
        update: new Bn("update"),
        postrender: new Bn("postrender"),
        prerender: new Bn("prerender"),
        resize: new Bn("resize")
      }, n.globalUniforms = new Ul({
        projectionMatrix: new sn()
      }, true), n.addSystem(kz, "mask").addSystem(bz, "context").addSystem($z, "state").addSystem(Fz, "shader").addSystem(Uz, "texture").addSystem(Sz, "geometry").addSystem(Ez, "framebuffer").addSystem(Rz, "scissor").addSystem(Nz, "stencil").addSystem(Mz, "projection").addSystem(Hz, "textureGC").addSystem(yz, "filter").addSystem(Lz, "renderTexture").addSystem(_z, "batch"), n.initPlugins(t.__plugins), r.context ? n.context.initFromContext(r.context) : n.context.initFromOptions({
        alpha: !!n.transparent,
        antialias: r.antialias,
        premultipliedAlpha: n.transparent && n.transparent !== "notMultiplied",
        stencil: true,
        preserveDrawingBuffer: r.preserveDrawingBuffer,
        powerPreference: n.options.powerPreference
      }), n.renderingToScreen = true, GG(n.context.webGLVersion === 2 ? "WebGL 2" : "WebGL 1"), n.resize(n.options.width, n.options.height), n;
    }
    return t.create = function(r) {
      if (zG())
        return new t(r);
      throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.');
    }, t.prototype.addSystem = function(r, n) {
      n || (n = r.name);
      var i = new r(this);
      if (this[n])
        throw new Error('Whoops! The name "' + n + '" is already in use');
      this[n] = i;
      for (var o in this.runners)
        this.runners[o].add(i);
      return this;
    }, t.prototype.render = function(r, n, i, o, a) {
      if (this.renderingToScreen = !n, this.runners.prerender.emit(), this.emit("prerender"), this.projection.transform = o, !this.context.isLost) {
        if (n || (this._lastObjectRendered = r), !a) {
          var s = r.enableTempParent();
          r.updateTransform(), r.disableTempParent(s);
        }
        this.renderTexture.bind(n), this.batch.currentRenderer.start(), (i !== void 0 ? i : this.clearBeforeRender) && this.renderTexture.clear(), r.render(this), this.batch.currentRenderer.flush(), n && n.baseTexture.update(), this.runners.postrender.emit(), this.projection.transform = null, this.emit("postrender");
      }
    }, t.prototype.resize = function(r, n) {
      e12.prototype.resize.call(this, r, n), this.runners.resize.emit(r, n);
    }, t.prototype.reset = function() {
      return this.runners.reset.emit(), this;
    }, t.prototype.clear = function() {
      this.renderTexture.bind(), this.renderTexture.clear();
    }, t.prototype.destroy = function(r) {
      this.runners.destroy.emit();
      for (var n in this.runners)
        this.runners[n].destroy();
      e12.prototype.destroy.call(this, r), this.gl = null;
    }, t.registerPlugin = function(r, n) {
      t.__plugins = t.__plugins || {}, t.__plugins[r] = n;
    }, t;
  }(jz)
);
function Gz(e12) {
  return Gs2.create(e12);
}
var zz = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`;
var OD = `attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;
var i0 = (
  /** @class */
  /* @__PURE__ */ function() {
    function e12() {
      this.texArray = null, this.blend = 0, this.type = wo.TRIANGLES, this.start = 0, this.size = 0, this.data = null;
    }
    return e12;
  }()
);
var o0 = (
  /** @class */
  function() {
    function e12() {
      this.elements = [], this.ids = [], this.count = 0;
    }
    return e12.prototype.clear = function() {
      for (var t = 0; t < this.count; t++)
        this.elements[t] = null;
      this.count = 0;
    }, e12;
  }()
);
var Vz = (
  /** @class */
  function() {
    function e12(t) {
      this.rawBinaryData = new ArrayBuffer(t), this.uint32View = new Uint32Array(this.rawBinaryData), this.float32View = new Float32Array(this.rawBinaryData);
    }
    return Object.defineProperty(e12.prototype, "int8View", {
      /**
       * View on the raw binary data as a `Int8Array`.
       *
       * @member {Int8Array}
       */
      get: function() {
        return this._int8View || (this._int8View = new Int8Array(this.rawBinaryData)), this._int8View;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "uint8View", {
      /**
       * View on the raw binary data as a `Uint8Array`.
       *
       * @member {Uint8Array}
       */
      get: function() {
        return this._uint8View || (this._uint8View = new Uint8Array(this.rawBinaryData)), this._uint8View;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "int16View", {
      /**
       * View on the raw binary data as a `Int16Array`.
       *
       * @member {Int16Array}
       */
      get: function() {
        return this._int16View || (this._int16View = new Int16Array(this.rawBinaryData)), this._int16View;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "uint16View", {
      /**
       * View on the raw binary data as a `Uint16Array`.
       *
       * @member {Uint16Array}
       */
      get: function() {
        return this._uint16View || (this._uint16View = new Uint16Array(this.rawBinaryData)), this._uint16View;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "int32View", {
      /**
       * View on the raw binary data as a `Int32Array`.
       *
       * @member {Int32Array}
       */
      get: function() {
        return this._int32View || (this._int32View = new Int32Array(this.rawBinaryData)), this._int32View;
      },
      enumerable: false,
      configurable: true
    }), e12.prototype.view = function(t) {
      return this[t + "View"];
    }, e12.prototype.destroy = function() {
      this.rawBinaryData = null, this._int8View = null, this._uint8View = null, this._int16View = null, this._uint16View = null, this._int32View = null, this.uint32View = null, this.float32View = null;
    }, e12.sizeOf = function(t) {
      switch (t) {
        case "int8":
        case "uint8":
          return 1;
        case "int16":
        case "uint16":
          return 2;
        case "int32":
        case "uint32":
        case "float32":
          return 4;
        default:
          throw new Error(t + " isn't a valid view type");
      }
    }, e12;
  }()
);
var Xz = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.shaderGenerator = null, n.geometryClass = null, n.vertexSize = null, n.state = ec.for2d(), n.size = ft.SPRITE_BATCH_SIZE * 4, n._vertexCount = 0, n._indexCount = 0, n._bufferedElements = [], n._bufferedTextures = [], n._bufferSize = 0, n._shader = null, n._packedGeometries = [], n._packedGeometryPoolSize = 2, n._flushId = 0, n._aBuffers = {}, n._iBuffers = {}, n.MAX_TEXTURES = 1, n.renderer.on("prerender", n.onPrerender, n), r.runners.contextChange.add(n), n._dcIndex = 0, n._aIndex = 0, n._iIndex = 0, n._attributeBuffer = null, n._indexBuffer = null, n._tempBoundTextures = [], n;
    }
    return t.prototype.contextChange = function() {
      var r = this.renderer.gl;
      ft.PREFER_ENV === Ua.WEBGL_LEGACY ? this.MAX_TEXTURES = 1 : (this.MAX_TEXTURES = Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS), ft.SPRITE_MAX_TEXTURES), this.MAX_TEXTURES = Cz(this.MAX_TEXTURES, r)), this._shader = this.shaderGenerator.generateShader(this.MAX_TEXTURES);
      for (var n = 0; n < this._packedGeometryPoolSize; n++)
        this._packedGeometries[n] = new this.geometryClass();
      this.initFlushBuffers();
    }, t.prototype.initFlushBuffers = function() {
      for (var r = t._drawCallPool, n = t._textureArrayPool, i = this.size / 4, o = Math.floor(i / this.MAX_TEXTURES) + 1; r.length < i; )
        r.push(new i0());
      for (; n.length < o; )
        n.push(new o0());
      for (var a = 0; a < this.MAX_TEXTURES; a++)
        this._tempBoundTextures[a] = null;
    }, t.prototype.onPrerender = function() {
      this._flushId = 0;
    }, t.prototype.render = function(r) {
      r._texture.valid && (this._vertexCount + r.vertexData.length / 2 > this.size && this.flush(), this._vertexCount += r.vertexData.length / 2, this._indexCount += r.indices.length, this._bufferedTextures[this._bufferSize] = r._texture.baseTexture, this._bufferedElements[this._bufferSize++] = r);
    }, t.prototype.buildTexturesAndDrawCalls = function() {
      var r = this, n = r._bufferedTextures, i = r.MAX_TEXTURES, o = t._textureArrayPool, a = this.renderer.batch, s = this._tempBoundTextures, l = this.renderer.textureGC.count, u = ++Nr._globalBatch, c = 0, f = o[0], h = 0;
      a.copyBoundTextures(s, i);
      for (var d = 0; d < this._bufferSize; ++d) {
        var p = n[d];
        n[d] = null, p._batchEnabled !== u && (f.count >= i && (a.boundArray(f, s, u, i), this.buildDrawCalls(f, h, d), h = d, f = o[++c], ++u), p._batchEnabled = u, p.touched = l, f.elements[f.count++] = p);
      }
      f.count > 0 && (a.boundArray(f, s, u, i), this.buildDrawCalls(f, h, this._bufferSize), ++c, ++u);
      for (var d = 0; d < s.length; d++)
        s[d] = null;
      Nr._globalBatch = u;
    }, t.prototype.buildDrawCalls = function(r, n, i) {
      var o = this, a = o._bufferedElements, s = o._attributeBuffer, l = o._indexBuffer, u = o.vertexSize, c = t._drawCallPool, f = this._dcIndex, h = this._aIndex, d = this._iIndex, p = c[f];
      p.start = this._iIndex, p.texArray = r;
      for (var m = n; m < i; ++m) {
        var g = a[m], v = g._texture.baseTexture, _ = pD[v.alphaMode ? 1 : 0][g.blendMode];
        a[m] = null, n < m && p.blend !== _ && (p.size = d - p.start, n = m, p = c[++f], p.texArray = r, p.start = d), this.packInterleavedGeometry(g, s, l, h, d), h += g.vertexData.length / 2 * u, d += g.indices.length, p.blend = _;
      }
      n < i && (p.size = d - p.start, ++f), this._dcIndex = f, this._aIndex = h, this._iIndex = d;
    }, t.prototype.bindAndClearTexArray = function(r) {
      for (var n = this.renderer.texture, i = 0; i < r.count; i++)
        n.bind(r.elements[i], r.ids[i]), r.elements[i] = null;
      r.count = 0;
    }, t.prototype.updateGeometry = function() {
      var r = this, n = r._packedGeometries, i = r._attributeBuffer, o = r._indexBuffer;
      ft.CAN_UPLOAD_SAME_BUFFER ? (n[this._flushId]._buffer.update(i.rawBinaryData), n[this._flushId]._indexBuffer.update(o), this.renderer.geometry.updateBuffers()) : (this._packedGeometryPoolSize <= this._flushId && (this._packedGeometryPoolSize++, n[this._flushId] = new this.geometryClass()), n[this._flushId]._buffer.update(i.rawBinaryData), n[this._flushId]._indexBuffer.update(o), this.renderer.geometry.bind(n[this._flushId]), this.renderer.geometry.updateBuffers(), this._flushId++);
    }, t.prototype.drawBatches = function() {
      for (var r = this._dcIndex, n = this.renderer, i = n.gl, o = n.state, a = t._drawCallPool, s = null, l = 0; l < r; l++) {
        var u = a[l], c = u.texArray, f = u.type, h = u.size, d = u.start, p = u.blend;
        s !== c && (s = c, this.bindAndClearTexArray(c)), this.state.blendMode = p, o.set(this.state), i.drawElements(f, h, i.UNSIGNED_SHORT, d * 2);
      }
    }, t.prototype.flush = function() {
      this._vertexCount !== 0 && (this._attributeBuffer = this.getAttributeBuffer(this._vertexCount), this._indexBuffer = this.getIndexBuffer(this._indexCount), this._aIndex = 0, this._iIndex = 0, this._dcIndex = 0, this.buildTexturesAndDrawCalls(), this.updateGeometry(), this.drawBatches(), this._bufferSize = 0, this._vertexCount = 0, this._indexCount = 0);
    }, t.prototype.start = function() {
      this.renderer.state.set(this.state), this.renderer.shader.bind(this._shader), ft.CAN_UPLOAD_SAME_BUFFER && this.renderer.geometry.bind(this._packedGeometries[this._flushId]);
    }, t.prototype.stop = function() {
      this.flush();
    }, t.prototype.destroy = function() {
      for (var r = 0; r < this._packedGeometryPoolSize; r++)
        this._packedGeometries[r] && this._packedGeometries[r].destroy();
      this.renderer.off("prerender", this.onPrerender, this), this._aBuffers = null, this._iBuffers = null, this._packedGeometries = null, this._attributeBuffer = null, this._indexBuffer = null, this._shader && (this._shader.destroy(), this._shader = null), e12.prototype.destroy.call(this);
    }, t.prototype.getAttributeBuffer = function(r) {
      var n = zg(Math.ceil(r / 8)), i = uI(n), o = n * 8;
      this._aBuffers.length <= i && (this._iBuffers.length = i + 1);
      var a = this._aBuffers[o];
      return a || (this._aBuffers[o] = a = new Vz(o * this.vertexSize * 4)), a;
    }, t.prototype.getIndexBuffer = function(r) {
      var n = zg(Math.ceil(r / 12)), i = uI(n), o = n * 12;
      this._iBuffers.length <= i && (this._iBuffers.length = i + 1);
      var a = this._iBuffers[i];
      return a || (this._iBuffers[i] = a = new Uint16Array(o)), a;
    }, t.prototype.packInterleavedGeometry = function(r, n, i, o, a) {
      for (var s = n.uint32View, l = n.float32View, u = o / this.vertexSize, c = r.uvs, f = r.indices, h = r.vertexData, d = r._texture.baseTexture._batchLocation, p = Math.min(r.worldAlpha, 1), m = p < 1 && r._texture.baseTexture.alphaMode ? LE(r._tintRGB, p) : r._tintRGB + (p * 255 << 24), g = 0; g < h.length; g += 2)
        l[o++] = h[g], l[o++] = h[g + 1], l[o++] = c[g], l[o++] = c[g + 1], s[o++] = m, l[o++] = d;
      for (var g = 0; g < f.length; g++)
        i[a++] = u + f[g];
    }, t._drawCallPool = [], t._textureArrayPool = [], t;
  }(kv)
);
var Wz = (
  /** @class */
  function() {
    function e12(t, r) {
      if (this.vertexSrc = t, this.fragTemplate = r, this.programCache = {}, this.defaultGroupCache = {}, r.indexOf("%count%") < 0)
        throw new Error('Fragment template must contain "%count%".');
      if (r.indexOf("%forloop%") < 0)
        throw new Error('Fragment template must contain "%forloop%".');
    }
    return e12.prototype.generateShader = function(t) {
      if (!this.programCache[t]) {
        for (var r = new Int32Array(t), n = 0; n < t; n++)
          r[n] = n;
        this.defaultGroupCache[t] = Ul.from({ uSamplers: r }, true);
        var i = this.fragTemplate;
        i = i.replace(/%count%/gi, "" + t), i = i.replace(/%forloop%/gi, this.generateSampleSrc(t)), this.programCache[t] = new Dv(this.vertexSrc, i);
      }
      var o = {
        tint: new Float32Array([1, 1, 1, 1]),
        translationMatrix: new sn(),
        default: this.defaultGroupCache[t]
      };
      return new Kl(this.programCache[t], o);
    }, e12.prototype.generateSampleSrc = function(t) {
      var r = "";
      r += `
`, r += `
`;
      for (var n = 0; n < t; n++)
        n > 0 && (r += `
else `), n < t - 1 && (r += "if(vTextureId < " + n + ".5)"), r += `
{`, r += `
	color = texture2D(uSamplers[` + n + "], vTextureCoord);", r += `
}`;
      return r += `
`, r += `
`, r;
    }, e12;
  }()
);
var ID = (
  /** @class */
  function(e12) {
    Ft(t, e12);
    function t(r) {
      r === void 0 && (r = false);
      var n = e12.call(this) || this;
      return n._buffer = new An(null, r, false), n._indexBuffer = new An(null, r, true), n.addAttribute("aVertexPosition", n._buffer, 2, false, on.FLOAT).addAttribute("aTextureCoord", n._buffer, 2, false, on.FLOAT).addAttribute("aColor", n._buffer, 4, true, on.UNSIGNED_BYTE).addAttribute("aTextureId", n._buffer, 1, true, on.FLOAT).addIndex(n._indexBuffer), n;
    }
    return t;
  }(Kd)
);
var C5 = `precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;
var x5 = `varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`;
var Yz = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.create = function(t) {
      var r = Object.assign({
        vertex: C5,
        fragment: x5,
        geometryClass: ID,
        vertexSize: 6
      }, t), n = r.vertex, i = r.fragment, o = r.vertexSize, a = r.geometryClass;
      return (
        /** @class */
        function(s) {
          Ft(l, s);
          function l(u) {
            var c = s.call(this, u) || this;
            return c.shaderGenerator = new Wz(n, i), c.geometryClass = a, c.vertexSize = o, c;
          }
          return l;
        }(Xz)
      );
    }, Object.defineProperty(e12, "defaultVertexSrc", {
      /**
       * The default vertex shader source
       *
       * @static
       * @type {string}
       * @constant
       */
      get: function() {
        return C5;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12, "defaultFragmentTemplate", {
      /**
       * The default fragment shader source
       *
       * @static
       * @type {string}
       * @constant
       */
      get: function() {
        return x5;
      },
      enumerable: false,
      configurable: true
    }), e12;
  }()
);
var qz = Yz.create();
var Rv = (
  /** @class */
  function() {
    function e12(t) {
      var r = this;
      t = Object.assign({
        forceCanvas: false
      }, t), this.renderer = Gz(t), this.stage = new ra(), e12._plugins.forEach(function(n) {
        n.init.call(r, t);
      });
    }
    return e12.registerPlugin = function(t) {
      e12._plugins.push(t);
    }, e12.prototype.render = function() {
      this.renderer.render(this.stage);
    }, Object.defineProperty(e12.prototype, "view", {
      /**
       * Reference to the renderer's canvas element.
       * @member {HTMLCanvasElement}
       * @readonly
       */
      get: function() {
        return this.renderer.view;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "screen", {
      /**
       * Reference to the renderer's screen rectangle. Its safe to use as `filterArea` or `hitArea` for the whole screen.
       * @member {PIXI.Rectangle}
       * @readonly
       */
      get: function() {
        return this.renderer.screen;
      },
      enumerable: false,
      configurable: true
    }), e12.prototype.destroy = function(t, r) {
      var n = this, i = e12._plugins.slice(0);
      i.reverse(), i.forEach(function(o) {
        o.destroy.call(n);
      }), this.stage.destroy(r), this.stage = null, this.renderer.destroy(t), this.renderer = null;
    }, e12;
  }()
);
Rv._plugins = [];
var Jre = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.init = function(t) {
      var r = this;
      Object.defineProperty(this, "resizeTo", {
        set: function(n) {
          window.removeEventListener("resize", this.queueResize), this._resizeTo = n, n && (window.addEventListener("resize", this.queueResize), this.resize());
        },
        get: function() {
          return this._resizeTo;
        }
      }), this.queueResize = function() {
        r._resizeTo && (r.cancelResize(), r._resizeId = requestAnimationFrame(function() {
          return r.resize();
        }));
      }, this.cancelResize = function() {
        r._resizeId && (cancelAnimationFrame(r._resizeId), r._resizeId = null);
      }, this.resize = function() {
        if (r._resizeTo) {
          r.cancelResize();
          var n, i;
          if (r._resizeTo === window)
            n = window.innerWidth, i = window.innerHeight;
          else {
            var o = r._resizeTo, a = o.clientWidth, s = o.clientHeight;
            n = a, i = s;
          }
          r.renderer.resize(n, i);
        }
      }, this._resizeId = null, this._resizeTo = null, this.resizeTo = t.resizeTo || null;
    }, e12.destroy = function() {
      window.removeEventListener("resize", this.queueResize), this.cancelResize(), this.cancelResize = null, this.queueResize = null, this.resizeTo = null, this.resize = null;
    }, e12;
  }()
);
Rv.registerPlugin(Jre);
var k5 = new fr();
var D5 = 4;
var Kz = (
  /** @class */
  function() {
    function e12(t) {
      this.renderer = t, t.extract = this;
    }
    return e12.prototype.image = function(t, r, n) {
      var i = new Image();
      return i.src = this.base64(t, r, n), i;
    }, e12.prototype.base64 = function(t, r, n) {
      return this.canvas(t).toDataURL(r, n);
    }, e12.prototype.canvas = function(t) {
      var r = this.renderer, n, i, o = false, a, s = false;
      t && (t instanceof hu ? a = t : (a = this.renderer.generateTexture(t), s = true)), a ? (n = a.baseTexture.resolution, i = a.frame, o = false, r.renderTexture.bind(a)) : (n = this.renderer.resolution, o = true, i = k5, i.width = this.renderer.width, i.height = this.renderer.height, r.renderTexture.bind(null));
      var l = Math.floor(i.width * n + 1e-4), u = Math.floor(i.height * n + 1e-4), c = new fI(l, u, 1), f = new Uint8Array(D5 * l * u), h = r.gl;
      h.readPixels(i.x * n, i.y * n, l, u, h.RGBA, h.UNSIGNED_BYTE, f);
      var d = c.context.getImageData(0, 0, l, u);
      if (e12.arrayPostDivide(f, d.data), c.context.putImageData(d, 0, 0), o) {
        var p = new fI(c.width, c.height, 1);
        p.context.scale(1, -1), p.context.drawImage(c.canvas, 0, -u), c.destroy(), c = p;
      }
      return s && a.destroy(true), c.canvas;
    }, e12.prototype.pixels = function(t) {
      var r = this.renderer, n, i, o, a = false;
      t && (t instanceof hu ? o = t : (o = this.renderer.generateTexture(t), a = true)), o ? (n = o.baseTexture.resolution, i = o.frame, r.renderTexture.bind(o)) : (n = r.resolution, i = k5, i.width = r.width, i.height = r.height, r.renderTexture.bind(null));
      var s = i.width * n, l = i.height * n, u = new Uint8Array(D5 * s * l), c = r.gl;
      return c.readPixels(i.x * n, i.y * n, s, l, c.RGBA, c.UNSIGNED_BYTE, u), a && o.destroy(true), e12.arrayPostDivide(u, u), u;
    }, e12.prototype.destroy = function() {
      this.renderer.extract = null, this.renderer = null;
    }, e12.arrayPostDivide = function(t, r) {
      for (var n = 0; n < t.length; n += 4) {
        var i = r[n + 3] = t[n + 3];
        i !== 0 ? (r[n] = Math.round(Math.min(t[n] * 255 / i, 255)), r[n + 1] = Math.round(Math.min(t[n + 1] * 255 / i, 255)), r[n + 2] = Math.round(Math.min(t[n + 2] * 255 / i, 255))) : (r[n] = t[n], r[n + 1] = t[n + 1], r[n + 2] = t[n + 2]);
      }
    }, e12;
  }()
);
var ene = (e12, t = {}) => {
  if (!e12)
    return;
  const r = {
    key: [
      "source",
      "protocol",
      "authority",
      "userInfo",
      "user",
      "password",
      "host",
      "port",
      "relative",
      "path",
      "directory",
      "file",
      "query",
      "anchor"
    ],
    q: {
      name: "queryKey",
      parser: /(?:^|&)([^&=]*)=?([^&]*)/g
    },
    parser: {
      strict: /^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
      loose: /^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/
    }
  }, n = r.parser[t.strictMode ? "strict" : "loose"].exec(e12), i = {};
  let o = 14;
  for (; o--; )
    i[r.key[o]] = n[o] || "";
  return i[r.q.name] = {}, i[r.key[12]].replace(r.q.parser, function(a, s, l) {
    s && (i[r.q.name][s] = l);
  }), i;
};
var Zz = Gs(ene);
var qy = class {
  /**
  * MiniSignalBinding constructor.
  * @constructs MiniSignalBinding
  * @param {Function} fn Event handler to be called.
  * @param {Boolean} [once=false] Should this listener be removed after dispatch
  * @param {Mixed} [thisArg] The context of the callback function.
  * @api private
  */
  constructor(t, r = false, n) {
    this._fn = t, this._once = r, this._thisArg = n, this._next = this._prev = this._owner = null;
  }
  detach() {
    return this._owner === null ? false : (this._owner.detach(this), true);
  }
};
function R5(e12, t) {
  return e12._head ? (e12._tail._next = t, t._prev = e12._tail, e12._tail = t) : (e12._head = t, e12._tail = t), t._owner = e12, t;
}
var gs = class {
  /**
  * MiniSignal constructor.
  * @constructs MiniSignal
  * @api public
  *
  * @example
  * let mySignal = new MiniSignal();
  * let binding = mySignal.add(onSignal);
  * mySignal.dispatch('foo', 'bar');
  * mySignal.detach(binding);
  */
  constructor() {
    this._head = this._tail = void 0;
  }
  /**
  * Return an array of attached MiniSignalBinding.
  *
  * @param {Boolean} [exists=false] We only need to know if there are handlers.
  * @returns {MiniSignalBinding[]|Boolean} Array of attached MiniSignalBinding or Boolean if called with exists = true
  * @api public
  */
  handlers(t = false) {
    let r = this._head;
    if (t)
      return !!r;
    const n = [];
    for (; r; )
      n.push(r), r = r._next;
    return n;
  }
  /**
  * Return true if node is a MiniSignalBinding attached to this MiniSignal
  *
  * @param {MiniSignalBinding} node Node to check.
  * @returns {Boolean} True if node is attache to mini-signal
  * @api public
  */
  has(t) {
    if (!(t instanceof qy))
      throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");
    return t._owner === this;
  }
  /**
  * Dispaches a signal to all registered listeners.
  *
  * @returns {Boolean} Indication if we've emitted an event.
  * @api public
  */
  dispatch() {
    let t = this._head;
    if (!t)
      return false;
    for (; t; )
      t._once && this.detach(t), t._fn.apply(t._thisArg, arguments), t = t._next;
    return true;
  }
  /**
  * Register a new listener.
  *
  * @param {Function} fn Callback function.
  * @param {Mixed} [thisArg] The context of the callback function.
  * @returns {MiniSignalBinding} The MiniSignalBinding node that was added.
  * @api public
  */
  add(t, r = null) {
    if (typeof t != "function")
      throw new Error("MiniSignal#add(): First arg must be a Function.");
    return R5(this, new qy(t, false, r));
  }
  /**
  * Register a new listener that will be executed only once.
  *
  * @param {Function} fn Callback function.
  * @param {Mixed} [thisArg] The context of the callback function.
  * @returns {MiniSignalBinding} The MiniSignalBinding node that was added.
  * @api public
  */
  once(t, r = null) {
    if (typeof t != "function")
      throw new Error("MiniSignal#once(): First arg must be a Function.");
    return R5(this, new qy(t, true, r));
  }
  /**
  * Remove binding object.
  *
  * @param {MiniSignalBinding} node The binding node that will be removed.
  * @returns {MiniSignal} The instance on which this method was called.
  * @api public */
  detach(t) {
    if (!(t instanceof qy))
      throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");
    return t._owner !== this ? this : (t._prev && (t._prev._next = t._next), t._next && (t._next._prev = t._prev), t === this._head ? (this._head = t._next, t._next === null && (this._tail = null)) : t === this._tail && (this._tail = t._prev, this._tail._next = null), t._owner = null, this);
  }
  /**
  * Detach all listeners.
  *
  * @returns {MiniSignal} The instance on which this method was called.
  * @api public
  */
  detachAll() {
    let t = this._head;
    if (!t)
      return this;
    for (this._head = this._tail = null; t; )
      t._owner = null, t = t._next;
    return this;
  }
};
function bc() {
}
function N5(e12, t, r, n) {
  var i = 0, o = e12.length;
  (function a(s) {
    if (s || i === o) {
      r && r(s);
      return;
    }
    n ? setTimeout(function() {
      t(e12[i++], a);
    }, 1) : t(e12[i++], a);
  })();
}
function tne(e12) {
  return function() {
    if (e12 === null)
      throw new Error("Callback was already called.");
    var r = e12;
    e12 = null, r.apply(this, arguments);
  };
}
function rne(e12, t) {
  if (t == null)
    t = 1;
  else if (t === 0)
    throw new Error("Concurrency must not be zero");
  var r = 0, n = {
    _tasks: [],
    concurrency: t,
    saturated: bc,
    unsaturated: bc,
    buffer: t / 4,
    empty: bc,
    drain: bc,
    error: bc,
    started: false,
    paused: false,
    push: function(s, l) {
      i(s, false, l);
    },
    kill: function() {
      r = 0, n.drain = bc, n.started = false, n._tasks = [];
    },
    unshift: function(s, l) {
      i(s, true, l);
    },
    process: function() {
      for (; !n.paused && r < n.concurrency && n._tasks.length; ) {
        var s = n._tasks.shift();
        n._tasks.length === 0 && n.empty(), r += 1, r === n.concurrency && n.saturated(), e12(s.data, tne(o(s)));
      }
    },
    length: function() {
      return n._tasks.length;
    },
    running: function() {
      return r;
    },
    idle: function() {
      return n._tasks.length + r === 0;
    },
    pause: function() {
      n.paused !== true && (n.paused = true);
    },
    resume: function() {
      if (n.paused !== false) {
        n.paused = false;
        for (var s = 1; s <= n.concurrency; s++)
          n.process();
      }
    }
  };
  function i(a, s, l) {
    if (l != null && typeof l != "function")
      throw new Error("task callback must be a function");
    if (n.started = true, a == null && n.idle()) {
      setTimeout(function() {
        return n.drain();
      }, 1);
      return;
    }
    var u = {
      data: a,
      callback: typeof l == "function" ? l : bc
    };
    s ? n._tasks.unshift(u) : n._tasks.push(u), setTimeout(function() {
      return n.process();
    }, 1);
  }
  function o(a) {
    return function() {
      r -= 1, a.callback.apply(a, arguments), arguments[0] != null && n.error(arguments[0], a.data), r <= n.concurrency - n.buffer && n.unsaturated(), n.idle() && n.drain(), n.process();
    };
  }
  return n;
}
var sw = {};
function nne(e12, t) {
  var r = this;
  sw[e12.url] ? (e12.data = sw[e12.url], e12.complete()) : e12.onComplete.once(function() {
    return sw[r.url] = r.data;
  }), t();
}
function M5(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, n.key, n);
  }
}
function Qz(e12, t, r) {
  return t && M5(e12.prototype, t), r && M5(e12, r), e12;
}
var ine = !!(window.XDomainRequest && !("withCredentials" in new XMLHttpRequest()));
var Ky = null;
var one = 0;
var L5 = 200;
var ane = 204;
var sne = 1223;
var lne = 2;
function cne() {
}
var _t = function() {
  e12.setExtensionLoadType = function(n, i) {
    B5(e12._loadTypeMap, n, i);
  }, e12.setExtensionXhrType = function(n, i) {
    B5(e12._xhrTypeMap, n, i);
  };
  function e12(r, n, i) {
    if (typeof r != "string" || typeof n != "string")
      throw new Error("Both name and url are required for constructing a resource.");
    i = i || {}, this._flags = 0, this._setFlag(e12.STATUS_FLAGS.DATA_URL, n.indexOf("data:") === 0), this.name = r, this.url = n, this.extension = this._getExtension(), this.data = null, this.crossOrigin = i.crossOrigin === true ? "anonymous" : i.crossOrigin, this.timeout = i.timeout || 0, this.loadType = i.loadType || this._determineLoadType(), this.xhrType = i.xhrType, this.metadata = i.metadata || {}, this.error = null, this.xhr = null, this.children = [], this.type = e12.TYPE.UNKNOWN, this.progressChunk = 0, this._dequeue = cne, this._onLoadBinding = null, this._elementTimer = 0, this._boundComplete = this.complete.bind(this), this._boundOnError = this._onError.bind(this), this._boundOnProgress = this._onProgress.bind(this), this._boundOnTimeout = this._onTimeout.bind(this), this._boundXhrOnError = this._xhrOnError.bind(this), this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this), this._boundXhrOnAbort = this._xhrOnAbort.bind(this), this._boundXhrOnLoad = this._xhrOnLoad.bind(this), this.onStart = new gs(), this.onProgress = new gs(), this.onComplete = new gs(), this.onAfterMiddleware = new gs();
  }
  var t = e12.prototype;
  return t.complete = function() {
    this._clearEvents(), this._finish();
  }, t.abort = function(n) {
    if (!this.error) {
      if (this.error = new Error(n), this._clearEvents(), this.xhr)
        this.xhr.abort();
      else if (this.xdr)
        this.xdr.abort();
      else if (this.data)
        if (this.data.src)
          this.data.src = e12.EMPTY_GIF;
        else
          for (; this.data.firstChild; )
            this.data.removeChild(this.data.firstChild);
      this._finish();
    }
  }, t.load = function(n) {
    var i = this;
    if (!this.isLoading) {
      if (this.isComplete) {
        n && setTimeout(function() {
          return n(i);
        }, 1);
        return;
      } else
        n && this.onComplete.once(n);
      switch (this._setFlag(e12.STATUS_FLAGS.LOADING, true), this.onStart.dispatch(this), (this.crossOrigin === false || typeof this.crossOrigin != "string") && (this.crossOrigin = this._determineCrossOrigin(this.url)), this.loadType) {
        case e12.LOAD_TYPE.IMAGE:
          this.type = e12.TYPE.IMAGE, this._loadElement("image");
          break;
        case e12.LOAD_TYPE.AUDIO:
          this.type = e12.TYPE.AUDIO, this._loadSourceElement("audio");
          break;
        case e12.LOAD_TYPE.VIDEO:
          this.type = e12.TYPE.VIDEO, this._loadSourceElement("video");
          break;
        case e12.LOAD_TYPE.XHR:
        default:
          ine && this.crossOrigin ? this._loadXdr() : this._loadXhr();
          break;
      }
    }
  }, t._hasFlag = function(n) {
    return (this._flags & n) !== 0;
  }, t._setFlag = function(n, i) {
    this._flags = i ? this._flags | n : this._flags & ~n;
  }, t._clearEvents = function() {
    clearTimeout(this._elementTimer), this.data && this.data.removeEventListener && (this.data.removeEventListener("error", this._boundOnError, false), this.data.removeEventListener("load", this._boundComplete, false), this.data.removeEventListener("progress", this._boundOnProgress, false), this.data.removeEventListener("canplaythrough", this._boundComplete, false)), this.xhr && (this.xhr.removeEventListener ? (this.xhr.removeEventListener("error", this._boundXhrOnError, false), this.xhr.removeEventListener("timeout", this._boundXhrOnTimeout, false), this.xhr.removeEventListener("abort", this._boundXhrOnAbort, false), this.xhr.removeEventListener("progress", this._boundOnProgress, false), this.xhr.removeEventListener("load", this._boundXhrOnLoad, false)) : (this.xhr.onerror = null, this.xhr.ontimeout = null, this.xhr.onprogress = null, this.xhr.onload = null));
  }, t._finish = function() {
    if (this.isComplete)
      throw new Error("Complete called again for an already completed resource.");
    this._setFlag(e12.STATUS_FLAGS.COMPLETE, true), this._setFlag(e12.STATUS_FLAGS.LOADING, false), this.onComplete.dispatch(this);
  }, t._loadElement = function(n) {
    this.metadata.loadElement ? this.data = this.metadata.loadElement : n === "image" && typeof window.Image < "u" ? this.data = new Image() : this.data = document.createElement(n), this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), this.metadata.skipSource || (this.data.src = this.url), this.data.addEventListener("error", this._boundOnError, false), this.data.addEventListener("load", this._boundComplete, false), this.data.addEventListener("progress", this._boundOnProgress, false), this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout));
  }, t._loadSourceElement = function(n) {
    if (this.metadata.loadElement ? this.data = this.metadata.loadElement : n === "audio" && typeof window.Audio < "u" ? this.data = new Audio() : this.data = document.createElement(n), this.data === null) {
      this.abort("Unsupported element: " + n);
      return;
    }
    if (this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), !this.metadata.skipSource)
      if (navigator.isCocoonJS)
        this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;
      else if (Array.isArray(this.url))
        for (var i = this.metadata.mimeType, o = 0; o < this.url.length; ++o)
          this.data.appendChild(this._createSource(n, this.url[o], Array.isArray(i) ? i[o] : i));
      else {
        var a = this.metadata.mimeType;
        this.data.appendChild(this._createSource(n, this.url, Array.isArray(a) ? a[0] : a));
      }
    this.data.addEventListener("error", this._boundOnError, false), this.data.addEventListener("load", this._boundComplete, false), this.data.addEventListener("progress", this._boundOnProgress, false), this.data.addEventListener("canplaythrough", this._boundComplete, false), this.data.load(), this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout));
  }, t._loadXhr = function() {
    typeof this.xhrType != "string" && (this.xhrType = this._determineXhrType());
    var n = this.xhr = new XMLHttpRequest();
    n.open("GET", this.url, true), n.timeout = this.timeout, this.xhrType === e12.XHR_RESPONSE_TYPE.JSON || this.xhrType === e12.XHR_RESPONSE_TYPE.DOCUMENT ? n.responseType = e12.XHR_RESPONSE_TYPE.TEXT : n.responseType = this.xhrType, n.addEventListener("error", this._boundXhrOnError, false), n.addEventListener("timeout", this._boundXhrOnTimeout, false), n.addEventListener("abort", this._boundXhrOnAbort, false), n.addEventListener("progress", this._boundOnProgress, false), n.addEventListener("load", this._boundXhrOnLoad, false), n.send();
  }, t._loadXdr = function() {
    typeof this.xhrType != "string" && (this.xhrType = this._determineXhrType());
    var n = this.xhr = new XDomainRequest();
    n.timeout = this.timeout || 5e3, n.onerror = this._boundXhrOnError, n.ontimeout = this._boundXhrOnTimeout, n.onprogress = this._boundOnProgress, n.onload = this._boundXhrOnLoad, n.open("GET", this.url, true), setTimeout(function() {
      return n.send();
    }, 1);
  }, t._createSource = function(n, i, o) {
    o || (o = n + "/" + this._getExtension(i));
    var a = document.createElement("source");
    return a.src = i, a.type = o, a;
  }, t._onError = function(n) {
    this.abort("Failed to load element using: " + n.target.nodeName);
  }, t._onProgress = function(n) {
    n && n.lengthComputable && this.onProgress.dispatch(this, n.loaded / n.total);
  }, t._onTimeout = function() {
    this.abort("Load timed out.");
  }, t._xhrOnError = function() {
    var n = this.xhr;
    this.abort(lw(n) + " Request failed. Status: " + n.status + ', text: "' + n.statusText + '"');
  }, t._xhrOnTimeout = function() {
    var n = this.xhr;
    this.abort(lw(n) + " Request timed out.");
  }, t._xhrOnAbort = function() {
    var n = this.xhr;
    this.abort(lw(n) + " Request was aborted by the user.");
  }, t._xhrOnLoad = function() {
    var n = this.xhr, i = "", o = typeof n.status > "u" ? L5 : n.status;
    (n.responseType === "" || n.responseType === "text" || typeof n.responseType > "u") && (i = n.responseText), o === one && (i.length > 0 || n.responseType === e12.XHR_RESPONSE_TYPE.BUFFER) ? o = L5 : o === sne && (o = ane);
    var a = o / 100 | 0;
    if (a === lne)
      if (this.xhrType === e12.XHR_RESPONSE_TYPE.TEXT)
        this.data = i, this.type = e12.TYPE.TEXT;
      else if (this.xhrType === e12.XHR_RESPONSE_TYPE.JSON)
        try {
          this.data = JSON.parse(i), this.type = e12.TYPE.JSON;
        } catch (u) {
          this.abort("Error trying to parse loaded json: " + u);
          return;
        }
      else if (this.xhrType === e12.XHR_RESPONSE_TYPE.DOCUMENT)
        try {
          if (window.DOMParser) {
            var s = new DOMParser();
            this.data = s.parseFromString(i, "text/xml");
          } else {
            var l = document.createElement("div");
            l.innerHTML = i, this.data = l;
          }
          this.type = e12.TYPE.XML;
        } catch (u) {
          this.abort("Error trying to parse loaded xml: " + u);
          return;
        }
      else
        this.data = n.response || i;
    else {
      this.abort("[" + n.status + "] " + n.statusText + ": " + n.responseURL);
      return;
    }
    this.complete();
  }, t._determineCrossOrigin = function(n, i) {
    if (n.indexOf("data:") === 0)
      return "";
    if (window.origin !== window.location.origin)
      return "anonymous";
    i = i || window.location, Ky || (Ky = document.createElement("a")), Ky.href = n, n = Zz(Ky.href, {
      strictMode: true
    });
    var o = !n.port && i.port === "" || n.port === i.port, a = n.protocol ? n.protocol + ":" : "";
    return n.host !== i.hostname || !o || a !== i.protocol ? "anonymous" : "";
  }, t._determineXhrType = function() {
    return e12._xhrTypeMap[this.extension] || e12.XHR_RESPONSE_TYPE.TEXT;
  }, t._determineLoadType = function() {
    return e12._loadTypeMap[this.extension] || e12.LOAD_TYPE.XHR;
  }, t._getExtension = function() {
    var n = this.url, i = "";
    if (this.isDataUrl) {
      var o = n.indexOf("/");
      i = n.substring(o + 1, n.indexOf(";", o));
    } else {
      var a = n.indexOf("?"), s = n.indexOf("#"), l = Math.min(a > -1 ? a : n.length, s > -1 ? s : n.length);
      n = n.substring(0, l), i = n.substring(n.lastIndexOf(".") + 1);
    }
    return i.toLowerCase();
  }, t._getMimeFromXhrType = function(n) {
    switch (n) {
      case e12.XHR_RESPONSE_TYPE.BUFFER:
        return "application/octet-binary";
      case e12.XHR_RESPONSE_TYPE.BLOB:
        return "application/blob";
      case e12.XHR_RESPONSE_TYPE.DOCUMENT:
        return "application/xml";
      case e12.XHR_RESPONSE_TYPE.JSON:
        return "application/json";
      case e12.XHR_RESPONSE_TYPE.DEFAULT:
      case e12.XHR_RESPONSE_TYPE.TEXT:
      default:
        return "text/plain";
    }
  }, Qz(e12, [{
    key: "isDataUrl",
    get: function() {
      return this._hasFlag(e12.STATUS_FLAGS.DATA_URL);
    }
    /**
     * Describes if this resource has finished loading. Is true when the resource has completely
     * loaded.
     *
     * @readonly
     * @member {boolean}
     */
  }, {
    key: "isComplete",
    get: function() {
      return this._hasFlag(e12.STATUS_FLAGS.COMPLETE);
    }
    /**
     * Describes if this resource is currently loading. Is true when the resource starts loading,
     * and is false again when complete.
     *
     * @readonly
     * @member {boolean}
     */
  }, {
    key: "isLoading",
    get: function() {
      return this._hasFlag(e12.STATUS_FLAGS.LOADING);
    }
  }]), e12;
}();
_t.STATUS_FLAGS = {
  NONE: 0,
  DATA_URL: 1,
  COMPLETE: 2,
  LOADING: 4
};
_t.TYPE = {
  UNKNOWN: 0,
  JSON: 1,
  XML: 2,
  IMAGE: 3,
  AUDIO: 4,
  VIDEO: 5,
  TEXT: 6
};
_t.LOAD_TYPE = {
  /** Uses XMLHttpRequest to load the resource. */
  XHR: 1,
  /** Uses an `Image` object to load the resource. */
  IMAGE: 2,
  /** Uses an `Audio` object to load the resource. */
  AUDIO: 3,
  /** Uses a `Video` object to load the resource. */
  VIDEO: 4
};
_t.XHR_RESPONSE_TYPE = {
  /** string */
  DEFAULT: "text",
  /** ArrayBuffer */
  BUFFER: "arraybuffer",
  /** Blob */
  BLOB: "blob",
  /** Document */
  DOCUMENT: "document",
  /** Object */
  JSON: "json",
  /** String */
  TEXT: "text"
};
_t._loadTypeMap = {
  // images
  gif: _t.LOAD_TYPE.IMAGE,
  png: _t.LOAD_TYPE.IMAGE,
  bmp: _t.LOAD_TYPE.IMAGE,
  jpg: _t.LOAD_TYPE.IMAGE,
  jpeg: _t.LOAD_TYPE.IMAGE,
  tif: _t.LOAD_TYPE.IMAGE,
  tiff: _t.LOAD_TYPE.IMAGE,
  webp: _t.LOAD_TYPE.IMAGE,
  tga: _t.LOAD_TYPE.IMAGE,
  svg: _t.LOAD_TYPE.IMAGE,
  "svg+xml": _t.LOAD_TYPE.IMAGE,
  // for SVG data urls
  // audio
  mp3: _t.LOAD_TYPE.AUDIO,
  ogg: _t.LOAD_TYPE.AUDIO,
  wav: _t.LOAD_TYPE.AUDIO,
  // videos
  mp4: _t.LOAD_TYPE.VIDEO,
  webm: _t.LOAD_TYPE.VIDEO
};
_t._xhrTypeMap = {
  // xml
  xhtml: _t.XHR_RESPONSE_TYPE.DOCUMENT,
  html: _t.XHR_RESPONSE_TYPE.DOCUMENT,
  htm: _t.XHR_RESPONSE_TYPE.DOCUMENT,
  xml: _t.XHR_RESPONSE_TYPE.DOCUMENT,
  tmx: _t.XHR_RESPONSE_TYPE.DOCUMENT,
  svg: _t.XHR_RESPONSE_TYPE.DOCUMENT,
  // This was added to handle Tiled Tileset XML, but .tsx is also a TypeScript React Component.
  // Since it is way less likely for people to be loading TypeScript files instead of Tiled files,
  // this should probably be fine.
  tsx: _t.XHR_RESPONSE_TYPE.DOCUMENT,
  // images
  gif: _t.XHR_RESPONSE_TYPE.BLOB,
  png: _t.XHR_RESPONSE_TYPE.BLOB,
  bmp: _t.XHR_RESPONSE_TYPE.BLOB,
  jpg: _t.XHR_RESPONSE_TYPE.BLOB,
  jpeg: _t.XHR_RESPONSE_TYPE.BLOB,
  tif: _t.XHR_RESPONSE_TYPE.BLOB,
  tiff: _t.XHR_RESPONSE_TYPE.BLOB,
  webp: _t.XHR_RESPONSE_TYPE.BLOB,
  tga: _t.XHR_RESPONSE_TYPE.BLOB,
  // json
  json: _t.XHR_RESPONSE_TYPE.JSON,
  // text
  text: _t.XHR_RESPONSE_TYPE.TEXT,
  txt: _t.XHR_RESPONSE_TYPE.TEXT,
  // fonts
  ttf: _t.XHR_RESPONSE_TYPE.BUFFER,
  otf: _t.XHR_RESPONSE_TYPE.BUFFER
};
_t.EMPTY_GIF = "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";
function B5(e12, t, r) {
  t && t.indexOf(".") === 0 && (t = t.substring(1)), t && (e12[t] = r);
}
function lw(e12) {
  return e12.toString().replace("object ", "");
}
var une = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function hne(e12) {
  for (var t = "", r = 0; r < e12.length; ) {
    for (var n = [0, 0, 0], i = [0, 0, 0, 0], o = 0; o < n.length; ++o)
      r < e12.length ? n[o] = e12.charCodeAt(r++) & 255 : n[o] = 0;
    i[0] = n[0] >> 2, i[1] = (n[0] & 3) << 4 | n[1] >> 4, i[2] = (n[1] & 15) << 2 | n[2] >> 6, i[3] = n[2] & 63;
    var a = r - (e12.length - 1);
    switch (a) {
      case 2:
        i[3] = 64, i[2] = 64;
        break;
      case 1:
        i[3] = 64;
        break;
    }
    for (var s = 0; s < i.length; ++s)
      t += une.charAt(i[s]);
  }
  return t;
}
var F5 = window.URL || window.webkitURL;
function fne(e12, t) {
  if (!e12.data) {
    t();
    return;
  }
  if (e12.xhr && e12.xhrType === _t.XHR_RESPONSE_TYPE.BLOB) {
    if (!window.Blob || typeof e12.data == "string") {
      var r = e12.xhr.getResponseHeader("content-type");
      if (r && r.indexOf("image") === 0) {
        e12.data = new Image(), e12.data.src = "data:" + r + ";base64," + hne(e12.xhr.responseText), e12.type = _t.TYPE.IMAGE, e12.data.onload = function() {
          e12.data.onload = null, t();
        };
        return;
      }
    } else if (e12.data.type.indexOf("image") === 0) {
      var n = F5.createObjectURL(e12.data);
      e12.blob = e12.data, e12.data = new Image(), e12.data.src = n, e12.type = _t.TYPE.IMAGE, e12.data.onload = function() {
        F5.revokeObjectURL(n), e12.data.onload = null, t();
      };
      return;
    }
  }
  t();
}
var dne = {
  caching: nne,
  parsing: fne
};
var cw = 100;
var pne = /(#[\w-]+)?$/;
var Cs = function() {
  function e12(r, n) {
    var i = this;
    r === void 0 && (r = ""), n === void 0 && (n = 10), this.baseUrl = r, this.progress = 0, this.loading = false, this.defaultQueryString = "", this._beforeMiddleware = [], this._afterMiddleware = [], this._resourcesParsing = [], this._boundLoadResource = function(s, l) {
      return i._loadResource(s, l);
    }, this._queue = rne(this._boundLoadResource, n), this._queue.pause(), this.resources = {}, this.onProgress = new gs(), this.onError = new gs(), this.onLoad = new gs(), this.onStart = new gs(), this.onComplete = new gs();
    for (var o = 0; o < e12._defaultBeforeMiddleware.length; ++o)
      this.pre(e12._defaultBeforeMiddleware[o]);
    for (var a = 0; a < e12._defaultAfterMiddleware.length; ++a)
      this.use(e12._defaultAfterMiddleware[a]);
  }
  var t = e12.prototype;
  return t.add = function(n, i, o, a) {
    if (Array.isArray(n)) {
      for (var s = 0; s < n.length; ++s)
        this.add(n[s]);
      return this;
    }
    if (typeof n == "object" && (a = i || n.callback || n.onComplete, o = n, i = n.url, n = n.name || n.key || n.url), typeof i != "string" && (a = o, o = i, i = n), typeof i != "string")
      throw new Error("No url passed to add resource to loader.");
    if (typeof o == "function" && (a = o, o = null), this.loading && (!o || !o.parentResource))
      throw new Error("Cannot add resources while the loader is running.");
    if (this.resources[n])
      throw new Error('Resource named "' + n + '" already exists.');
    if (i = this._prepareUrl(i), this.resources[n] = new _t(n, i, o), typeof a == "function" && this.resources[n].onAfterMiddleware.once(a), this.loading) {
      for (var l = o.parentResource, u = [], c = 0; c < l.children.length; ++c)
        l.children[c].isComplete || u.push(l.children[c]);
      var f = l.progressChunk * (u.length + 1), h = f / (u.length + 2);
      l.children.push(this.resources[n]), l.progressChunk = h;
      for (var d = 0; d < u.length; ++d)
        u[d].progressChunk = h;
      this.resources[n].progressChunk = h;
    }
    return this._queue.push(this.resources[n]), this;
  }, t.pre = function(n) {
    return this._beforeMiddleware.push(n), this;
  }, t.use = function(n) {
    return this._afterMiddleware.push(n), this;
  }, t.reset = function() {
    this.progress = 0, this.loading = false, this._queue.kill(), this._queue.pause();
    for (var n in this.resources) {
      var i = this.resources[n];
      i._onLoadBinding && i._onLoadBinding.detach(), i.isLoading && i.abort();
    }
    return this.resources = {}, this;
  }, t.load = function(n) {
    if (typeof n == "function" && this.onComplete.once(n), this.loading)
      return this;
    if (this._queue.idle())
      this._onStart(), this._onComplete();
    else {
      for (var i = this._queue._tasks.length, o = cw / i, a = 0; a < this._queue._tasks.length; ++a)
        this._queue._tasks[a].data.progressChunk = o;
      this._onStart(), this._queue.resume();
    }
    return this;
  }, t._prepareUrl = function(n) {
    var i = Zz(n, {
      strictMode: true
    }), o;
    if (i.protocol || !i.path || n.indexOf("//") === 0 ? o = n : this.baseUrl.length && this.baseUrl.lastIndexOf("/") !== this.baseUrl.length - 1 && n.charAt(0) !== "/" ? o = this.baseUrl + "/" + n : o = this.baseUrl + n, this.defaultQueryString) {
      var a = pne.exec(o)[0];
      o = o.substr(0, o.length - a.length), o.indexOf("?") !== -1 ? o += "&" + this.defaultQueryString : o += "?" + this.defaultQueryString, o += a;
    }
    return o;
  }, t._loadResource = function(n, i) {
    var o = this;
    n._dequeue = i, N5(this._beforeMiddleware, function(a, s) {
      a.call(o, n, function() {
        s(n.isComplete ? {} : null);
      });
    }, function() {
      n.isComplete ? o._onLoad(n) : (n._onLoadBinding = n.onComplete.once(o._onLoad, o), n.load());
    }, true);
  }, t._onStart = function() {
    this.progress = 0, this.loading = true, this.onStart.dispatch(this);
  }, t._onComplete = function() {
    this.progress = cw, this.loading = false, this.onComplete.dispatch(this, this.resources);
  }, t._onLoad = function(n) {
    var i = this;
    n._onLoadBinding = null, this._resourcesParsing.push(n), n._dequeue(), N5(this._afterMiddleware, function(o, a) {
      o.call(i, n, a);
    }, function() {
      n.onAfterMiddleware.dispatch(n), i.progress = Math.min(cw, i.progress + n.progressChunk), i.onProgress.dispatch(i, n), n.error ? i.onError.dispatch(n.error, i, n) : i.onLoad.dispatch(i, n), i._resourcesParsing.splice(i._resourcesParsing.indexOf(n), 1), i._queue.idle() && i._resourcesParsing.length === 0 && i._onComplete();
    }, true);
  }, Qz(e12, [{
    key: "concurrency",
    get: function() {
      return this._queue.concurrency;
    },
    set: function(n) {
      this._queue.concurrency = n;
    }
  }]), e12;
}();
Cs._defaultBeforeMiddleware = [];
Cs._defaultAfterMiddleware = [];
Cs.pre = function(t) {
  return Cs._defaultBeforeMiddleware.push(t), Cs;
};
Cs.use = function(t) {
  return Cs._defaultAfterMiddleware.push(t), Cs;
};
var Km = _t;
var _I = function(e12, t) {
  return _I = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, _I(e12, t);
};
function mne(e12, t) {
  _I(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var Jz = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.use = function(t, r) {
      t.data && t.type === _t.TYPE.IMAGE && (t.texture = Pt.fromLoader(t.data, t.url, t.name)), r();
    }, e12;
  }()
);
var fu = (
  /** @class */
  function(e12) {
    mne(t, e12);
    function t(r, n) {
      for (var i = e12.call(this, r, n) || this, o = 0; o < t._plugins.length; ++o) {
        var a = t._plugins[o], s = a.pre, l = a.use;
        s && i.pre(s), l && i.use(l);
      }
      return i._protected = false, i;
    }
    return t.prototype.destroy = function() {
      this._protected || this.reset();
    }, Object.defineProperty(t, "shared", {
      /**
       * A premade instance of the loader that can be used to load resources.
       * @name shared
       * @type {PIXI.Loader}
       * @static
       * @memberof PIXI.Loader
       */
      get: function() {
        var r = t._shared;
        return r || (r = new t(), r._protected = true, t._shared = r), r;
      },
      enumerable: false,
      configurable: true
    }), t.registerPlugin = function(r) {
      return t._plugins.push(r), r.add && r.add(), t;
    }, t._plugins = [], t;
  }(Cs)
);
fu.registerPlugin({ use: dne.parsing });
fu.registerPlugin(Jz);
var e8 = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.init = function(t) {
      t = Object.assign({
        sharedLoader: false
      }, t), this.loader = t.sharedLoader ? fu.shared : new fu();
    }, e12.destroy = function() {
      this.loader && (this.loader.destroy(), this.loader = null);
    }, e12;
  }()
);
var bI = function(e12, t) {
  return bI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, bI(e12, t);
};
function t8(e12, t) {
  bI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var gne = (
  /** @class */
  function(e12) {
    t8(t, e12);
    function t(r, n, i, o) {
      r === void 0 && (r = 1500), i === void 0 && (i = 16384), o === void 0 && (o = false);
      var a = e12.call(this) || this, s = 16384;
      return i > s && (i = s), a._properties = [false, true, false, false, false], a._maxSize = r, a._batchSize = i, a._buffers = null, a._bufferUpdateIDs = [], a._updateID = 0, a.interactiveChildren = false, a.blendMode = yt.NORMAL, a.autoResize = o, a.roundPixels = true, a.baseTexture = null, a.setProperties(n), a._tint = 0, a.tintRgb = new Float32Array(4), a.tint = 16777215, a;
    }
    return t.prototype.setProperties = function(r) {
      r && (this._properties[0] = "vertices" in r || "scale" in r ? !!r.vertices || !!r.scale : this._properties[0], this._properties[1] = "position" in r ? !!r.position : this._properties[1], this._properties[2] = "rotation" in r ? !!r.rotation : this._properties[2], this._properties[3] = "uvs" in r ? !!r.uvs : this._properties[3], this._properties[4] = "tint" in r || "alpha" in r ? !!r.tint || !!r.alpha : this._properties[4]);
    }, t.prototype.updateTransform = function() {
      this.displayObjectUpdateTransform();
    }, Object.defineProperty(t.prototype, "tint", {
      /**
       * The tint applied to the container. This is a hex value.
       * A value of 0xFFFFFF will remove any tint effect.
       ** IMPORTANT: This is a WebGL only feature and will be ignored by the canvas renderer.
       * @member {number}
       * @default 0xFFFFFF
       */
      get: function() {
        return this._tint;
      },
      set: function(r) {
        this._tint = r, cu(r, this.tintRgb);
      },
      enumerable: false,
      configurable: true
    }), t.prototype.render = function(r) {
      var n = this;
      !this.visible || this.worldAlpha <= 0 || !this.children.length || !this.renderable || (this.baseTexture || (this.baseTexture = this.children[0]._texture.baseTexture, this.baseTexture.valid || this.baseTexture.once("update", function() {
        return n.onChildrenChange(0);
      })), r.batch.setObjectRenderer(r.plugins.particle), r.plugins.particle.render(this));
    }, t.prototype.onChildrenChange = function(r) {
      for (var n = Math.floor(r / this._batchSize); this._bufferUpdateIDs.length < n; )
        this._bufferUpdateIDs.push(0);
      this._bufferUpdateIDs[n] = ++this._updateID;
    }, t.prototype.dispose = function() {
      if (this._buffers) {
        for (var r = 0; r < this._buffers.length; ++r)
          this._buffers[r].destroy();
        this._buffers = null;
      }
    }, t.prototype.destroy = function(r) {
      e12.prototype.destroy.call(this, r), this.dispose(), this._properties = null, this._buffers = null, this._bufferUpdateIDs = null;
    }, t;
  }(ra)
);
var $5 = (
  /** @class */
  function() {
    function e12(t, r, n) {
      this.geometry = new Kd(), this.indexBuffer = null, this.size = n, this.dynamicProperties = [], this.staticProperties = [];
      for (var i = 0; i < t.length; ++i) {
        var o = t[i];
        o = {
          attributeName: o.attributeName,
          size: o.size,
          uploadFunction: o.uploadFunction,
          type: o.type || on.FLOAT,
          offset: o.offset
        }, r[i] ? this.dynamicProperties.push(o) : this.staticProperties.push(o);
      }
      this.staticStride = 0, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.dynamicStride = 0, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this._updateID = 0, this.initBuffers();
    }
    return e12.prototype.initBuffers = function() {
      var t = this.geometry, r = 0;
      this.indexBuffer = new An(XG(this.size), true, true), t.addIndex(this.indexBuffer), this.dynamicStride = 0;
      for (var n = 0; n < this.dynamicProperties.length; ++n) {
        var i = this.dynamicProperties[n];
        i.offset = r, r += i.size, this.dynamicStride += i.size;
      }
      var o = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);
      this.dynamicData = new Float32Array(o), this.dynamicDataUint32 = new Uint32Array(o), this.dynamicBuffer = new An(this.dynamicData, false, false);
      var a = 0;
      this.staticStride = 0;
      for (var n = 0; n < this.staticProperties.length; ++n) {
        var i = this.staticProperties[n];
        i.offset = a, a += i.size, this.staticStride += i.size;
      }
      var s = new ArrayBuffer(this.size * this.staticStride * 4 * 4);
      this.staticData = new Float32Array(s), this.staticDataUint32 = new Uint32Array(s), this.staticBuffer = new An(this.staticData, true, false);
      for (var n = 0; n < this.dynamicProperties.length; ++n) {
        var i = this.dynamicProperties[n];
        t.addAttribute(i.attributeName, this.dynamicBuffer, 0, i.type === on.UNSIGNED_BYTE, i.type, this.dynamicStride * 4, i.offset * 4);
      }
      for (var n = 0; n < this.staticProperties.length; ++n) {
        var i = this.staticProperties[n];
        t.addAttribute(i.attributeName, this.staticBuffer, 0, i.type === on.UNSIGNED_BYTE, i.type, this.staticStride * 4, i.offset * 4);
      }
    }, e12.prototype.uploadDynamic = function(t, r, n) {
      for (var i = 0; i < this.dynamicProperties.length; i++) {
        var o = this.dynamicProperties[i];
        o.uploadFunction(t, r, n, o.type === on.UNSIGNED_BYTE ? this.dynamicDataUint32 : this.dynamicData, this.dynamicStride, o.offset);
      }
      this.dynamicBuffer._updateID++;
    }, e12.prototype.uploadStatic = function(t, r, n) {
      for (var i = 0; i < this.staticProperties.length; i++) {
        var o = this.staticProperties[i];
        o.uploadFunction(t, r, n, o.type === on.UNSIGNED_BYTE ? this.staticDataUint32 : this.staticData, this.staticStride, o.offset);
      }
      this.staticBuffer._updateID++;
    }, e12.prototype.destroy = function() {
      this.indexBuffer = null, this.dynamicProperties = null, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this.staticProperties = null, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.geometry.destroy();
    }, e12;
  }()
);
var vne = `varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`;
var yne = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;
var r8 = (
  /** @class */
  function(e12) {
    t8(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.shader = null, n.properties = null, n.tempMatrix = new sn(), n.properties = [
        // verticesData
        {
          attributeName: "aVertexPosition",
          size: 2,
          uploadFunction: n.uploadVertices,
          offset: 0
        },
        // positionData
        {
          attributeName: "aPositionCoord",
          size: 2,
          uploadFunction: n.uploadPosition,
          offset: 0
        },
        // rotationData
        {
          attributeName: "aRotation",
          size: 1,
          uploadFunction: n.uploadRotation,
          offset: 0
        },
        // uvsData
        {
          attributeName: "aTextureCoord",
          size: 2,
          uploadFunction: n.uploadUvs,
          offset: 0
        },
        // tintData
        {
          attributeName: "aColor",
          size: 1,
          type: on.UNSIGNED_BYTE,
          uploadFunction: n.uploadTint,
          offset: 0
        }
      ], n.shader = Kl.from(yne, vne, {}), n.state = ec.for2d(), n;
    }
    return t.prototype.render = function(r) {
      var n = r.children, i = r._maxSize, o = r._batchSize, a = this.renderer, s = n.length;
      if (s !== 0) {
        s > i && !r.autoResize && (s = i);
        var l = r._buffers;
        l || (l = r._buffers = this.generateBuffers(r));
        var u = n[0]._texture.baseTexture;
        this.state.blendMode = mD(r.blendMode, u.alphaMode), a.state.set(this.state);
        var c = a.gl, f = r.worldTransform.copyTo(this.tempMatrix);
        f.prepend(a.globalUniforms.uniforms.projectionMatrix), this.shader.uniforms.translationMatrix = f.toArray(true), this.shader.uniforms.uColor = VG(r.tintRgb, r.worldAlpha, this.shader.uniforms.uColor, u.alphaMode), this.shader.uniforms.uSampler = u, this.renderer.shader.bind(this.shader);
        for (var h = false, d = 0, p = 0; d < s; d += o, p += 1) {
          var m = s - d;
          m > o && (m = o), p >= l.length && l.push(this._generateOneMoreBuffer(r));
          var g = l[p];
          g.uploadDynamic(n, d, m);
          var v = r._bufferUpdateIDs[p] || 0;
          h = h || g._updateID < v, h && (g._updateID = r._updateID, g.uploadStatic(n, d, m)), a.geometry.bind(g.geometry), c.drawElements(c.TRIANGLES, m * 6, c.UNSIGNED_SHORT, 0);
        }
      }
    }, t.prototype.generateBuffers = function(r) {
      for (var n = [], i = r._maxSize, o = r._batchSize, a = r._properties, s = 0; s < i; s += o)
        n.push(new $5(this.properties, a, o));
      return n;
    }, t.prototype._generateOneMoreBuffer = function(r) {
      var n = r._batchSize, i = r._properties;
      return new $5(this.properties, i, n);
    }, t.prototype.uploadVertices = function(r, n, i, o, a, s) {
      for (var l = 0, u = 0, c = 0, f = 0, h = 0; h < i; ++h) {
        var d = r[n + h], p = d._texture, m = d.scale.x, g = d.scale.y, v = p.trim, _ = p.orig;
        v ? (u = v.x - d.anchor.x * _.width, l = u + v.width, f = v.y - d.anchor.y * _.height, c = f + v.height) : (l = _.width * (1 - d.anchor.x), u = _.width * -d.anchor.x, c = _.height * (1 - d.anchor.y), f = _.height * -d.anchor.y), o[s] = u * m, o[s + 1] = f * g, o[s + a] = l * m, o[s + a + 1] = f * g, o[s + a * 2] = l * m, o[s + a * 2 + 1] = c * g, o[s + a * 3] = u * m, o[s + a * 3 + 1] = c * g, s += a * 4;
      }
    }, t.prototype.uploadPosition = function(r, n, i, o, a, s) {
      for (var l = 0; l < i; l++) {
        var u = r[n + l].position;
        o[s] = u.x, o[s + 1] = u.y, o[s + a] = u.x, o[s + a + 1] = u.y, o[s + a * 2] = u.x, o[s + a * 2 + 1] = u.y, o[s + a * 3] = u.x, o[s + a * 3 + 1] = u.y, s += a * 4;
      }
    }, t.prototype.uploadRotation = function(r, n, i, o, a, s) {
      for (var l = 0; l < i; l++) {
        var u = r[n + l].rotation;
        o[s] = u, o[s + a] = u, o[s + a * 2] = u, o[s + a * 3] = u, s += a * 4;
      }
    }, t.prototype.uploadUvs = function(r, n, i, o, a, s) {
      for (var l = 0; l < i; ++l) {
        var u = r[n + l]._texture._uvs;
        u ? (o[s] = u.x0, o[s + 1] = u.y0, o[s + a] = u.x1, o[s + a + 1] = u.y1, o[s + a * 2] = u.x2, o[s + a * 2 + 1] = u.y2, o[s + a * 3] = u.x3, o[s + a * 3 + 1] = u.y3, s += a * 4) : (o[s] = 0, o[s + 1] = 0, o[s + a] = 0, o[s + a + 1] = 0, o[s + a * 2] = 0, o[s + a * 2 + 1] = 0, o[s + a * 3] = 0, o[s + a * 3 + 1] = 0, s += a * 4);
      }
    }, t.prototype.uploadTint = function(r, n, i, o, a, s) {
      for (var l = 0; l < i; ++l) {
        var u = r[n + l], c = u._texture.baseTexture.alphaMode > 0, f = u.alpha, h = f < 1 && c ? LE(u._tintRGB, f) : u._tintRGB + (f * 255 << 24);
        o[s] = h, o[s + a] = h, o[s + a * 2] = h, o[s + a * 3] = h, s += a * 4;
      }
    }, t.prototype.destroy = function() {
      e12.prototype.destroy.call(this), this.shader && (this.shader.destroy(), this.shader = null), this.tempMatrix = null;
    }, t;
  }(kv)
);
var vs;
(function(e12) {
  e12.MITER = "miter", e12.BEVEL = "bevel", e12.ROUND = "round";
})(vs || (vs = {}));
var ys;
(function(e12) {
  e12.BUTT = "butt", e12.ROUND = "round", e12.SQUARE = "square";
})(ys || (ys = {}));
var ed = {
  adaptive: true,
  maxLength: 10,
  minSegments: 8,
  maxSegments: 2048,
  epsilon: 1e-4,
  _segmentsCount: function(e12, t) {
    if (t === void 0 && (t = 20), !this.adaptive || !e12 || isNaN(e12))
      return t;
    var r = Math.ceil(e12 / this.maxLength);
    return r < this.minSegments ? r = this.minSegments : r > this.maxSegments && (r = this.maxSegments), r;
  }
};
var PD = (
  /** @class */
  function() {
    function e12() {
      this.color = 16777215, this.alpha = 1, this.texture = Pt.WHITE, this.matrix = null, this.visible = false, this.reset();
    }
    return e12.prototype.clone = function() {
      var t = new e12();
      return t.color = this.color, t.alpha = this.alpha, t.texture = this.texture, t.matrix = this.matrix, t.visible = this.visible, t;
    }, e12.prototype.reset = function() {
      this.color = 16777215, this.alpha = 1, this.texture = Pt.WHITE, this.matrix = null, this.visible = false;
    }, e12.prototype.destroy = function() {
      this.texture = null, this.matrix = null;
    }, e12;
  }()
);
var TI = function(e12, t) {
  return TI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, TI(e12, t);
};
function HE(e12, t) {
  TI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var CD = {
  build: function(e12) {
    e12.points = e12.shape.points.slice();
  },
  triangulate: function(e12, t) {
    var r = e12.points, n = e12.holes, i = t.points, o = t.indices;
    if (r.length >= 6) {
      for (var a = [], s = 0; s < n.length; s++) {
        var l = n[s];
        a.push(r.length / 2), r = r.concat(l.points);
      }
      var u = c$n(r, a, 2);
      if (!u)
        return;
      for (var c = i.length / 2, s = 0; s < u.length; s += 3)
        o.push(u[s] + c), o.push(u[s + 1] + c), o.push(u[s + 2] + c);
      for (var s = 0; s < r.length; s++)
        i.push(r[s]);
    }
  }
};
var EI = {
  build: function(e12) {
    var t = e12.shape, r = e12.points, n = t.x, i = t.y, o, a;
    if (r.length = 0, e12.type === Wr.CIRC)
      o = t.radius, a = t.radius;
    else {
      var s = e12.shape;
      o = s.width, a = s.height;
    }
    if (!(o === 0 || a === 0)) {
      var l = Math.floor(30 * Math.sqrt(t.radius)) || Math.floor(15 * Math.sqrt(o + a));
      l /= 2.3;
      for (var u = Math.PI * 2 / l, c = 0; c < l - 0.5; c++)
        r.push(n + Math.sin(-u * c) * o, i + Math.cos(-u * c) * a);
      r.push(r[0], r[1]);
    }
  },
  triangulate: function(e12, t) {
    var r = e12.points, n = t.points, i = t.indices, o = n.length / 2, a = o, s = e12.shape, l = e12.matrix, u = s.x, c = s.y;
    n.push(e12.matrix ? l.a * u + l.c * c + l.tx : u, e12.matrix ? l.b * u + l.d * c + l.ty : c);
    for (var f = 0; f < r.length; f += 2)
      n.push(r[f], r[f + 1]), i.push(o++, a, o);
  }
};
var n8 = {
  build: function(e12) {
    var t = e12.shape, r = t.x, n = t.y, i = t.width, o = t.height, a = e12.points;
    a.length = 0, a.push(r, n, r + i, n, r + i, n + o, r, n + o);
  },
  triangulate: function(e12, t) {
    var r = e12.points, n = t.points, i = n.length / 2;
    n.push(r[0], r[1], r[2], r[3], r[6], r[7], r[4], r[5]), t.indices.push(i, i + 1, i + 2, i + 1, i + 2, i + 3);
  }
};
function _h(e12, t, r) {
  var n = t - e12;
  return e12 + n * r;
}
function Zy(e12, t, r, n, i, o, a) {
  a === void 0 && (a = []);
  for (var s = 20, l = a, u = 0, c = 0, f = 0, h = 0, d = 0, p = 0, m = 0, g = 0; m <= s; ++m)
    g = m / s, u = _h(e12, r, g), c = _h(t, n, g), f = _h(r, i, g), h = _h(n, o, g), d = _h(u, f, g), p = _h(c, h, g), l.push(d, p);
  return l;
}
var i8 = {
  build: function(e12) {
    var t = e12.shape, r = e12.points, n = t.x, i = t.y, o = t.width, a = t.height, s = Math.max(0, Math.min(t.radius, Math.min(o, a) / 2));
    r.length = 0, s ? (Zy(n, i + s, n, i, n + s, i, r), Zy(n + o - s, i, n + o, i, n + o, i + s, r), Zy(n + o, i + a - s, n + o, i + a, n + o - s, i + a, r), Zy(n + s, i + a, n, i + a, n, i + a - s, r)) : r.push(n, i, n + o, i, n + o, i + a, n, i + a);
  },
  triangulate: function(e12, t) {
    for (var r = e12.points, n = t.points, i = t.indices, o = n.length / 2, a = c$n(r, null, 2), s = 0, l = a.length; s < l; s += 3)
      i.push(a[s] + o), i.push(a[s + 1] + o), i.push(a[s + 2] + o);
    for (var s = 0, l = r.length; s < l; s++)
      n.push(r[s], r[++s]);
  }
};
function H5(e12, t, r, n, i, o, a, s) {
  var l = e12 - r * i, u = t - n * i, c = e12 + r * o, f = t + n * o, h, d;
  a ? (h = n, d = -r) : (h = -n, d = r);
  var p = l + h, m = u + d, g = c + h, v = f + d;
  return s.push(p, m), s.push(g, v), 2;
}
function bh(e12, t, r, n, i, o, a, s) {
  var l = r - e12, u = n - t, c = Math.atan2(l, u), f = Math.atan2(i - e12, o - t);
  s && c < f ? c += Math.PI * 2 : !s && c > f && (f += Math.PI * 2);
  var h = c, d = f - c, p = Math.abs(d), m = Math.sqrt(l * l + u * u), g = (15 * p * Math.sqrt(m) / Math.PI >> 0) + 1, v = d / g;
  if (h += v, s) {
    a.push(e12, t), a.push(r, n);
    for (var _ = 1, y = h; _ < g; _++, y += v)
      a.push(e12, t), a.push(e12 + Math.sin(y) * m, t + Math.cos(y) * m);
    a.push(e12, t), a.push(i, o);
  } else {
    a.push(r, n), a.push(e12, t);
    for (var _ = 1, y = h; _ < g; _++, y += v)
      a.push(e12 + Math.sin(y) * m, t + Math.cos(y) * m), a.push(e12, t);
    a.push(i, o), a.push(e12, t);
  }
  return g * 2;
}
function _ne(e12, t) {
  var r = e12.shape, n = e12.points || r.points.slice(), i = t.closePointEps;
  if (n.length !== 0) {
    var o = e12.lineStyle, a = new In(n[0], n[1]), s = new In(n[n.length - 2], n[n.length - 1]), l = r.type !== Wr.POLY || r.closeStroke, u = Math.abs(a.x - s.x) < i && Math.abs(a.y - s.y) < i;
    if (l) {
      n = n.slice(), u && (n.pop(), n.pop(), s.set(n[n.length - 2], n[n.length - 1]));
      var c = (a.x + s.x) * 0.5, f = (s.y + a.y) * 0.5;
      n.unshift(c, f), n.push(c, f);
    }
    var h = t.points, d = n.length / 2, p = n.length, m = h.length / 2, g = o.width / 2, v = g * g, _ = o.miterLimit * o.miterLimit, y = n[0], b = n[1], T = n[2], E = n[3], P = 0, A = 0, I = -(b - E), x = y - T, S = 0, N = 0, B = Math.sqrt(I * I + x * x);
    I /= B, x /= B, I *= g, x *= g;
    var w = o.alignment, R = (1 - w) * 2, F = w * 2;
    l || (o.cap === ys.ROUND ? p += bh(y - I * (R - F) * 0.5, b - x * (R - F) * 0.5, y - I * R, b - x * R, y + I * F, b + x * F, h, true) + 2 : o.cap === ys.SQUARE && (p += H5(y, b, I, x, R, F, true, h))), h.push(y - I * R, b - x * R), h.push(y + I * F, b + x * F);
    for (var $ = 1; $ < d - 1; ++$) {
      y = n[($ - 1) * 2], b = n[($ - 1) * 2 + 1], T = n[$ * 2], E = n[$ * 2 + 1], P = n[($ + 1) * 2], A = n[($ + 1) * 2 + 1], I = -(b - E), x = y - T, B = Math.sqrt(I * I + x * x), I /= B, x /= B, I *= g, x *= g, S = -(E - A), N = T - P, B = Math.sqrt(S * S + N * N), S /= B, N /= B, S *= g, N *= g;
      var K = T - y, se = b - E, J = T - P, me = A - E, ae = se * J - me * K, Y = ae < 0;
      if (Math.abs(ae) < 0.1) {
        h.push(T - I * R, E - x * R), h.push(T + I * F, E + x * F);
        continue;
      }
      var Q = (-I + y) * (-x + E) - (-I + T) * (-x + b), le = (-S + P) * (-N + E) - (-S + T) * (-N + A), Se = (K * le - J * Q) / ae, Pe = (me * Q - se * le) / ae, Re = (Se - T) * (Se - T) + (Pe - E) * (Pe - E), we = T + (Se - T) * R, Ne = E + (Pe - E) * R, Me = T - (Se - T) * F, Ie = E - (Pe - E) * F, Ge = Math.min(K * K + se * se, J * J + me * me), je = Y ? R : F, ot = Ge + je * je * v, at = Re <= ot;
      at ? o.join === vs.BEVEL || Re / v > _ ? (Y ? (h.push(we, Ne), h.push(T + I * F, E + x * F), h.push(we, Ne), h.push(T + S * F, E + N * F)) : (h.push(T - I * R, E - x * R), h.push(Me, Ie), h.push(T - S * R, E - N * R), h.push(Me, Ie)), p += 2) : o.join === vs.ROUND ? Y ? (h.push(we, Ne), h.push(T + I * F, E + x * F), p += bh(T, E, T + I * F, E + x * F, T + S * F, E + N * F, h, true) + 4, h.push(we, Ne), h.push(T + S * F, E + N * F)) : (h.push(T - I * R, E - x * R), h.push(Me, Ie), p += bh(T, E, T - I * R, E - x * R, T - S * R, E - N * R, h, false) + 4, h.push(T - S * R, E - N * R), h.push(Me, Ie)) : (h.push(we, Ne), h.push(Me, Ie)) : (h.push(T - I * R, E - x * R), h.push(T + I * F, E + x * F), o.join === vs.BEVEL || Re / v > _ || (o.join === vs.ROUND ? Y ? p += bh(T, E, T + I * F, E + x * F, T + S * F, E + N * F, h, true) + 2 : p += bh(T, E, T - I * R, E - x * R, T - S * R, E - N * R, h, false) + 2 : (Y ? (h.push(Me, Ie), h.push(Me, Ie)) : (h.push(we, Ne), h.push(we, Ne)), p += 2)), h.push(T - S * R, E - N * R), h.push(T + S * F, E + N * F), p += 2);
    }
    y = n[(d - 2) * 2], b = n[(d - 2) * 2 + 1], T = n[(d - 1) * 2], E = n[(d - 1) * 2 + 1], I = -(b - E), x = y - T, B = Math.sqrt(I * I + x * x), I /= B, x /= B, I *= g, x *= g, h.push(T - I * R, E - x * R), h.push(T + I * F, E + x * F), l || (o.cap === ys.ROUND ? p += bh(T - I * (R - F) * 0.5, E - x * (R - F) * 0.5, T - I * R, E - x * R, T + I * F, E + x * F, h, false) + 2 : o.cap === ys.SQUARE && (p += H5(T, E, I, x, R, F, false, h)));
    for (var Qe = t.indices, bt = ed.epsilon * ed.epsilon, $ = m; $ < p + m - 2; ++$)
      y = h[$ * 2], b = h[$ * 2 + 1], T = h[($ + 1) * 2], E = h[($ + 1) * 2 + 1], P = h[($ + 2) * 2], A = h[($ + 2) * 2 + 1], !(Math.abs(y * (E - A) + T * (A - b) + P * (b - E)) < bt) && Qe.push($, $ + 1, $ + 2);
  }
}
function bne(e12, t) {
  var r = 0, n = e12.shape, i = e12.points || n.points, o = n.type !== Wr.POLY || n.closeStroke;
  if (i.length !== 0) {
    var a = t.points, s = t.indices, l = i.length / 2, u = a.length / 2, c = u;
    for (a.push(i[0], i[1]), r = 1; r < l; r++)
      a.push(i[r * 2], i[r * 2 + 1]), s.push(c, c + 1), c++;
    o && s.push(c, u);
  }
}
function SI(e12, t) {
  e12.lineStyle.native ? bne(e12, t) : _ne(e12, t);
}
var o8 = (
  /** @class */
  function(e12) {
    HE(t, e12);
    function t(r, n, i, o, a, s) {
      s === void 0 && (s = 0);
      var l = this;
      a = a || o / 2;
      for (var u = -1 * Math.PI / 2 + s, c = i * 2, f = Qf / c, h = [], d = 0; d < c; d++) {
        var p = d % 2 ? a : o, m = d * f + u;
        h.push(r + p * Math.cos(m), n + p * Math.sin(m));
      }
      return l = e12.call(this, h) || this, l;
    }
    return t;
  }(Sf)
);
var wI = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.curveTo = function(t, r, n, i, o, a) {
      var s = a[a.length - 2], l = a[a.length - 1], u = l - r, c = s - t, f = i - r, h = n - t, d = Math.abs(u * h - c * f);
      if (d < 1e-8 || o === 0)
        return (a[a.length - 2] !== t || a[a.length - 1] !== r) && a.push(t, r), null;
      var p = u * u + c * c, m = f * f + h * h, g = u * f + c * h, v = o * Math.sqrt(p) / d, _ = o * Math.sqrt(m) / d, y = v * g / p, b = _ * g / m, T = v * h + _ * c, E = v * f + _ * u, P = c * (_ + y), A = u * (_ + y), I = h * (v + b), x = f * (v + b), S = Math.atan2(A - E, P - T), N = Math.atan2(x - E, I - T);
      return {
        cx: T + t,
        cy: E + r,
        radius: o,
        startAngle: S,
        endAngle: N,
        anticlockwise: c * f > h * u
      };
    }, e12.arc = function(t, r, n, i, o, a, s, l, u) {
      for (var c = s - a, f = ed._segmentsCount(Math.abs(c) * o, Math.ceil(Math.abs(c) / Qf) * 40), h = c / (f * 2), d = h * 2, p = Math.cos(h), m = Math.sin(h), g = f - 1, v = g % 1 / g, _ = 0; _ <= g; ++_) {
        var y = _ + v * _, b = h + a + d * y, T = Math.cos(b), E = -Math.sin(b);
        u.push((p * T + m * E) * o + n, (p * -E + m * T) * o + i);
      }
    }, e12;
  }()
);
var a8 = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.curveLength = function(t, r, n, i, o, a, s, l) {
      for (var u = 10, c = 0, f = 0, h = 0, d = 0, p = 0, m = 0, g = 0, v = 0, _ = 0, y = 0, b = 0, T = t, E = r, P = 1; P <= u; ++P)
        f = P / u, h = f * f, d = h * f, p = 1 - f, m = p * p, g = m * p, v = g * t + 3 * m * f * n + 3 * p * h * o + d * s, _ = g * r + 3 * m * f * i + 3 * p * h * a + d * l, y = T - v, b = E - _, T = v, E = _, c += Math.sqrt(y * y + b * b);
      return c;
    }, e12.curveTo = function(t, r, n, i, o, a, s) {
      var l = s[s.length - 2], u = s[s.length - 1];
      s.length -= 2;
      var c = ed._segmentsCount(e12.curveLength(l, u, t, r, n, i, o, a)), f = 0, h = 0, d = 0, p = 0, m = 0;
      s.push(l, u);
      for (var g = 1, v = 0; g <= c; ++g)
        v = g / c, f = 1 - v, h = f * f, d = h * f, p = v * v, m = p * v, s.push(d * l + 3 * h * v * t + 3 * f * p * n + m * o, d * u + 3 * h * v * r + 3 * f * p * i + m * a);
    }, e12;
  }()
);
var s8 = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.curveLength = function(t, r, n, i, o, a) {
      var s = t - 2 * n + o, l = r - 2 * i + a, u = 2 * n - 2 * t, c = 2 * i - 2 * r, f = 4 * (s * s + l * l), h = 4 * (s * u + l * c), d = u * u + c * c, p = 2 * Math.sqrt(f + h + d), m = Math.sqrt(f), g = 2 * f * m, v = 2 * Math.sqrt(d), _ = h / m;
      return (g * p + m * h * (p - v) + (4 * d * f - h * h) * Math.log((2 * m + _ + p) / (_ + v))) / (4 * g);
    }, e12.curveTo = function(t, r, n, i, o) {
      for (var a = o[o.length - 2], s = o[o.length - 1], l = ed._segmentsCount(e12.curveLength(a, s, t, r, n, i)), u = 0, c = 0, f = 1; f <= l; ++f) {
        var h = f / l;
        u = a + (t - a) * h, c = s + (r - s) * h, o.push(u + (t + (n - t) * h - u) * h, c + (r + (i - r) * h - c) * h);
      }
    }, e12;
  }()
);
var l8 = (
  /** @class */
  function() {
    function e12() {
      this.reset();
    }
    return e12.prototype.begin = function(t, r, n) {
      this.reset(), this.style = t, this.start = r, this.attribStart = n;
    }, e12.prototype.end = function(t, r) {
      this.attribSize = r - this.attribStart, this.size = t - this.start;
    }, e12.prototype.reset = function() {
      this.style = null, this.size = 0, this.start = 0, this.attribStart = 0, this.attribSize = 0;
    }, e12;
  }()
);
var Tc;
var tb = (Tc = {}, Tc[Wr.POLY] = CD, Tc[Wr.CIRC] = EI, Tc[Wr.ELIP] = EI, Tc[Wr.RECT] = n8, Tc[Wr.RREC] = i8, Tc);
var AI = [];
var ym = [];
var Tne = {
  buildPoly: CD,
  buildCircle: EI,
  buildRectangle: n8,
  buildRoundedRectangle: i8,
  FILL_COMMANDS: tb,
  BATCH_POOL: AI,
  DRAW_CALL_POOL: ym,
  buildLine: SI,
  Star: o8,
  ArcUtils: wI,
  BezierUtils: a8,
  QuadraticUtils: s8,
  BatchPart: l8
};
var OI = (
  /** @class */
  function() {
    function e12(t, r, n, i) {
      r === void 0 && (r = null), n === void 0 && (n = null), i === void 0 && (i = null), this.shape = t, this.lineStyle = n, this.fillStyle = r, this.matrix = i, this.type = t.type, this.points = [], this.holes = [];
    }
    return e12.prototype.clone = function() {
      return new e12(this.shape, this.fillStyle, this.lineStyle, this.matrix);
    }, e12.prototype.destroy = function() {
      this.shape = null, this.holes.length = 0, this.holes = null, this.points.length = 0, this.points = null, this.lineStyle = null, this.fillStyle = null;
    }, e12;
  }()
);
var Th = new In();
var Ene = new Xg();
var c8 = (
  /** @class */
  function(e12) {
    HE(t, e12);
    function t() {
      var r = e12.call(this) || this;
      return r.uvsFloat32 = null, r.indicesUint16 = null, r.points = [], r.colors = [], r.uvs = [], r.indices = [], r.textureIds = [], r.graphicsData = [], r.dirty = 0, r.batchDirty = -1, r.cacheDirty = -1, r.clearDirty = 0, r.drawCalls = [], r.batches = [], r.shapeIndex = 0, r._bounds = new Xg(), r.boundsDirty = -1, r.boundsPadding = 0, r.batchable = false, r.indicesUint16 = null, r.uvsFloat32 = null, r.closePointEps = 1e-4, r;
    }
    return Object.defineProperty(t.prototype, "bounds", {
      /**
       * Get the current bounds of the graphic geometry.
       *
       * @member {PIXI.Bounds}
       * @readonly
       */
      get: function() {
        return this.boundsDirty !== this.dirty && (this.boundsDirty = this.dirty, this.calculateBounds()), this._bounds;
      },
      enumerable: false,
      configurable: true
    }), t.prototype.invalidate = function() {
      this.boundsDirty = -1, this.dirty++, this.batchDirty++, this.shapeIndex = 0, this.points.length = 0, this.colors.length = 0, this.uvs.length = 0, this.indices.length = 0, this.textureIds.length = 0;
      for (var r = 0; r < this.drawCalls.length; r++)
        this.drawCalls[r].texArray.clear(), ym.push(this.drawCalls[r]);
      this.drawCalls.length = 0;
      for (var r = 0; r < this.batches.length; r++) {
        var n = this.batches[r];
        n.reset(), AI.push(n);
      }
      this.batches.length = 0;
    }, t.prototype.clear = function() {
      return this.graphicsData.length > 0 && (this.invalidate(), this.clearDirty++, this.graphicsData.length = 0), this;
    }, t.prototype.drawShape = function(r, n, i, o) {
      n === void 0 && (n = null), i === void 0 && (i = null), o === void 0 && (o = null);
      var a = new OI(r, n, i, o);
      return this.graphicsData.push(a), this.dirty++, this;
    }, t.prototype.drawHole = function(r, n) {
      if (n === void 0 && (n = null), !this.graphicsData.length)
        return null;
      var i = new OI(r, null, null, n), o = this.graphicsData[this.graphicsData.length - 1];
      return i.lineStyle = o.lineStyle, o.holes.push(i), this.dirty++, this;
    }, t.prototype.destroy = function() {
      e12.prototype.destroy.call(this);
      for (var r = 0; r < this.graphicsData.length; ++r)
        this.graphicsData[r].destroy();
      this.points.length = 0, this.points = null, this.colors.length = 0, this.colors = null, this.uvs.length = 0, this.uvs = null, this.indices.length = 0, this.indices = null, this.indexBuffer.destroy(), this.indexBuffer = null, this.graphicsData.length = 0, this.graphicsData = null, this.drawCalls.length = 0, this.drawCalls = null, this.batches.length = 0, this.batches = null, this._bounds = null;
    }, t.prototype.containsPoint = function(r) {
      for (var n = this.graphicsData, i = 0; i < n.length; ++i) {
        var o = n[i];
        if (o.fillStyle.visible && o.shape && (o.matrix ? o.matrix.applyInverse(r, Th) : Th.copyFrom(r), o.shape.contains(Th.x, Th.y))) {
          var a = false;
          if (o.holes)
            for (var s = 0; s < o.holes.length; s++) {
              var l = o.holes[s];
              if (l.shape.contains(Th.x, Th.y)) {
                a = true;
                break;
              }
            }
          if (!a)
            return true;
        }
      }
      return false;
    }, t.prototype.updateBatches = function(r) {
      if (!this.graphicsData.length) {
        this.batchable = true;
        return;
      }
      if (this.validateBatching()) {
        this.cacheDirty = this.dirty;
        var n = this.uvs, i = this.graphicsData, o = null, a = null;
        this.batches.length > 0 && (o = this.batches[this.batches.length - 1], a = o.style);
        for (var s = this.shapeIndex; s < i.length; s++) {
          this.shapeIndex++;
          var l = i[s], u = l.fillStyle, c = l.lineStyle, f = tb[l.type];
          f.build(l), l.matrix && this.transformPoints(l.points, l.matrix);
          for (var h = 0; h < 2; h++) {
            var d = h === 0 ? u : c;
            if (d.visible) {
              var p = d.texture.baseTexture, m = this.indices.length, g = this.points.length / 2;
              p.wrapMode = Ps.REPEAT, h === 0 ? this.processFill(l) : this.processLine(l);
              var v = this.points.length / 2 - g;
              v !== 0 && (o && !this._compareStyles(a, d) && (o.end(m, g), o = null), o || (o = AI.pop() || new l8(), o.begin(d, m, g), this.batches.push(o), a = d), this.addUvs(this.points, n, d.texture, g, v, d.matrix));
            }
          }
        }
        var _ = this.indices.length, y = this.points.length / 2;
        if (o && o.end(_, y), this.batches.length === 0) {
          this.batchable = true;
          return;
        }
        if (this.indicesUint16 && this.indices.length === this.indicesUint16.length)
          this.indicesUint16.set(this.indices);
        else {
          var b = y > 65535 && r;
          this.indicesUint16 = b ? new Uint32Array(this.indices) : new Uint16Array(this.indices);
        }
        this.batchable = this.isBatchable(), this.batchable ? this.packBatches() : this.buildDrawCalls();
      }
    }, t.prototype._compareStyles = function(r, n) {
      return !(!r || !n || r.texture.baseTexture !== n.texture.baseTexture || r.color + r.alpha !== n.color + n.alpha || !!r.native != !!n.native);
    }, t.prototype.validateBatching = function() {
      if (this.dirty === this.cacheDirty || !this.graphicsData.length)
        return false;
      for (var r = 0, n = this.graphicsData.length; r < n; r++) {
        var i = this.graphicsData[r], o = i.fillStyle, a = i.lineStyle;
        if (o && !o.texture.baseTexture.valid || a && !a.texture.baseTexture.valid)
          return false;
      }
      return true;
    }, t.prototype.packBatches = function() {
      this.batchDirty++, this.uvsFloat32 = new Float32Array(this.uvs);
      for (var r = this.batches, n = 0, i = r.length; n < i; n++)
        for (var o = r[n], a = 0; a < o.size; a++) {
          var s = o.start + a;
          this.indicesUint16[s] = this.indicesUint16[s] - o.attribStart;
        }
    }, t.prototype.isBatchable = function() {
      if (this.points.length > 65535 * 2)
        return false;
      for (var r = this.batches, n = 0; n < r.length; n++)
        if (r[n].style.native)
          return false;
      return this.points.length < t.BATCHABLE_SIZE * 2;
    }, t.prototype.buildDrawCalls = function() {
      for (var r = ++Nr._globalBatch, n = 0; n < this.drawCalls.length; n++)
        this.drawCalls[n].texArray.clear(), ym.push(this.drawCalls[n]);
      this.drawCalls.length = 0;
      var i = this.colors, o = this.textureIds, a = ym.pop();
      a || (a = new i0(), a.texArray = new o0()), a.texArray.count = 0, a.start = 0, a.size = 0, a.type = wo.TRIANGLES;
      var s = 0, l = null, u = 0, c = false, f = wo.TRIANGLES, h = 0;
      this.drawCalls.push(a);
      for (var n = 0; n < this.batches.length; n++) {
        var d = this.batches[n], p = 8, m = d.style, g = m.texture.baseTexture;
        c !== !!m.native && (c = !!m.native, f = c ? wo.LINES : wo.TRIANGLES, l = null, s = p, r++), l !== g && (l = g, g._batchEnabled !== r && (s === p && (r++, s = 0, a.size > 0 && (a = ym.pop(), a || (a = new i0(), a.texArray = new o0()), this.drawCalls.push(a)), a.start = h, a.size = 0, a.texArray.count = 0, a.type = f), g.touched = 1, g._batchEnabled = r, g._batchLocation = s, g.wrapMode = 10497, a.texArray.elements[a.texArray.count++] = g, s++)), a.size += d.size, h += d.size, u = g._batchLocation, this.addColors(i, m.color, m.alpha, d.attribSize, d.attribStart), this.addTextureIds(o, u, d.attribSize, d.attribStart);
      }
      Nr._globalBatch = r, this.packAttributes();
    }, t.prototype.packAttributes = function() {
      for (var r = this.points, n = this.uvs, i = this.colors, o = this.textureIds, a = new ArrayBuffer(r.length * 3 * 4), s = new Float32Array(a), l = new Uint32Array(a), u = 0, c = 0; c < r.length / 2; c++)
        s[u++] = r[c * 2], s[u++] = r[c * 2 + 1], s[u++] = n[c * 2], s[u++] = n[c * 2 + 1], l[u++] = i[c], s[u++] = o[c];
      this._buffer.update(a), this._indexBuffer.update(this.indicesUint16);
    }, t.prototype.processFill = function(r) {
      if (r.holes.length)
        this.processHoles(r.holes), CD.triangulate(r, this);
      else {
        var n = tb[r.type];
        n.triangulate(r, this);
      }
    }, t.prototype.processLine = function(r) {
      SI(r, this);
      for (var n = 0; n < r.holes.length; n++)
        SI(r.holes[n], this);
    }, t.prototype.processHoles = function(r) {
      for (var n = 0; n < r.length; n++) {
        var i = r[n], o = tb[i.type];
        o.build(i), i.matrix && this.transformPoints(i.points, i.matrix);
      }
    }, t.prototype.calculateBounds = function() {
      var r = this._bounds, n = Ene, i = sn.IDENTITY;
      this._bounds.clear(), n.clear();
      for (var o = 0; o < this.graphicsData.length; o++) {
        var a = this.graphicsData[o], s = a.shape, l = a.type, u = a.lineStyle, c = a.matrix || sn.IDENTITY, f = 0;
        if (u && u.visible) {
          var h = u.alignment;
          f = u.width, l === Wr.POLY ? f = f * (0.5 + Math.abs(0.5 - h)) : f = f * Math.max(0, h);
        }
        if (i !== c && (n.isEmpty() || (r.addBoundsMatrix(n, i), n.clear()), i = c), l === Wr.RECT || l === Wr.RREC) {
          var d = s;
          n.addFramePad(d.x, d.y, d.x + d.width, d.y + d.height, f, f);
        } else if (l === Wr.CIRC) {
          var p = s;
          n.addFramePad(p.x, p.y, p.x, p.y, p.radius + f, p.radius + f);
        } else if (l === Wr.ELIP) {
          var m = s;
          n.addFramePad(m.x, m.y, m.x, m.y, m.width + f, m.height + f);
        } else {
          var g = s;
          r.addVerticesMatrix(i, g.points, 0, g.points.length, f, f);
        }
      }
      n.isEmpty() || r.addBoundsMatrix(n, i), r.pad(this.boundsPadding, this.boundsPadding);
    }, t.prototype.transformPoints = function(r, n) {
      for (var i = 0; i < r.length / 2; i++) {
        var o = r[i * 2], a = r[i * 2 + 1];
        r[i * 2] = n.a * o + n.c * a + n.tx, r[i * 2 + 1] = n.b * o + n.d * a + n.ty;
      }
    }, t.prototype.addColors = function(r, n, i, o, a) {
      a === void 0 && (a = 0);
      var s = (n >> 16) + (n & 65280) + ((n & 255) << 16), l = LE(s, i);
      r.length = Math.max(r.length, a + o);
      for (var u = 0; u < o; u++)
        r[a + u] = l;
    }, t.prototype.addTextureIds = function(r, n, i, o) {
      o === void 0 && (o = 0), r.length = Math.max(r.length, o + i);
      for (var a = 0; a < i; a++)
        r[o + a] = n;
    }, t.prototype.addUvs = function(r, n, i, o, a, s) {
      s === void 0 && (s = null);
      for (var l = 0, u = n.length, c = i.frame; l < a; ) {
        var f = r[(o + l) * 2], h = r[(o + l) * 2 + 1];
        if (s) {
          var d = s.a * f + s.c * h + s.tx;
          h = s.b * f + s.d * h + s.ty, f = d;
        }
        l++, n.push(f / c.width, h / c.height);
      }
      var p = i.baseTexture;
      (c.width < p.width || c.height < p.height) && this.adjustUvs(n, i, u, a);
    }, t.prototype.adjustUvs = function(r, n, i, o) {
      for (var a = n.baseTexture, s = 1e-6, l = i + o * 2, u = n.frame, c = u.width / a.width, f = u.height / a.height, h = u.x / u.width, d = u.y / u.height, p = Math.floor(r[i] + s), m = Math.floor(r[i + 1] + s), g = i + 2; g < l; g += 2)
        p = Math.min(p, Math.floor(r[g] + s)), m = Math.min(m, Math.floor(r[g + 1] + s));
      h -= p, d -= m;
      for (var g = i; g < l; g += 2)
        r[g] = (r[g] + h) * c, r[g + 1] = (r[g + 1] + d) * f;
    }, t.BATCHABLE_SIZE = 100, t;
  }(ID)
);
var u8 = (
  /** @class */
  function(e12) {
    HE(t, e12);
    function t() {
      var r = e12 !== null && e12.apply(this, arguments) || this;
      return r.width = 0, r.alignment = 0.5, r.native = false, r.cap = ys.BUTT, r.join = vs.MITER, r.miterLimit = 10, r;
    }
    return t.prototype.clone = function() {
      var r = new t();
      return r.color = this.color, r.alpha = this.alpha, r.texture = this.texture, r.matrix = this.matrix, r.visible = this.visible, r.width = this.width, r.alignment = this.alignment, r.native = this.native, r.cap = this.cap, r.join = this.join, r.miterLimit = this.miterLimit, r;
    }, t.prototype.reset = function() {
      e12.prototype.reset.call(this), this.color = 0, this.alignment = 0.5, this.width = 0, this.native = false;
    }, t;
  }(PD)
);
var Sne = new Float32Array(3);
var uw = {};
var xD = (
  /** @class */
  function(e12) {
    HE(t, e12);
    function t(r) {
      r === void 0 && (r = null);
      var n = e12.call(this) || this;
      return n._geometry = r || new c8(), n._geometry.refCount++, n.shader = null, n.state = ec.for2d(), n._fillStyle = new PD(), n._lineStyle = new u8(), n._matrix = null, n._holeMode = false, n.currentPath = null, n.batches = [], n.batchTint = -1, n.batchDirty = -1, n.vertexData = null, n.pluginName = "batch", n._transformID = -1, n.tint = 16777215, n.blendMode = yt.NORMAL, n;
    }
    return Object.defineProperty(t.prototype, "geometry", {
      /**
       * Includes vertex positions, face indices, normals, colors, UVs, and
       * custom attributes within buffers, reducing the cost of passing all
       * this data to the GPU. Can be shared between multiple Mesh or Graphics objects.
       *
       * @member {PIXI.GraphicsGeometry}
       * @readonly
       */
      get: function() {
        return this._geometry;
      },
      enumerable: false,
      configurable: true
    }), t.prototype.clone = function() {
      return this.finishPoly(), new t(this._geometry);
    }, Object.defineProperty(t.prototype, "blendMode", {
      get: function() {
        return this.state.blendMode;
      },
      /**
       * The blend mode to be applied to the graphic shape. Apply a value of
       * `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.
       *
       * @member {number}
       * @default PIXI.BLEND_MODES.NORMAL;
       * @see PIXI.BLEND_MODES
       */
      set: function(r) {
        this.state.blendMode = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "tint", {
      /**
       * The tint applied to the graphic shape. This is a hex value. A value of
       * 0xFFFFFF will remove any tint effect.
       *
       * @member {number}
       * @default 0xFFFFFF
       */
      get: function() {
        return this._tint;
      },
      set: function(r) {
        this._tint = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "fill", {
      /**
       * The current fill style.
       *
       * @member {PIXI.FillStyle}
       * @readonly
       */
      get: function() {
        return this._fillStyle;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "line", {
      /**
       * The current line style.
       *
       * @member {PIXI.LineStyle}
       * @readonly
       */
      get: function() {
        return this._lineStyle;
      },
      enumerable: false,
      configurable: true
    }), t.prototype.lineStyle = function(r) {
      if (r === void 0 && (r = null), typeof r == "number") {
        var n = arguments;
        r = {
          width: n[0] || 0,
          color: n[1] || 0,
          alpha: n[2] !== void 0 ? n[2] : 1,
          alignment: n[3] !== void 0 ? n[3] : 0.5,
          native: !!n[4]
        };
      }
      return this.lineTextureStyle(r);
    }, t.prototype.lineTextureStyle = function(r) {
      if (typeof r == "number") {
        ze("v5.2.0", "Please use object-based options for Graphics#lineTextureStyle");
        var n = arguments, i = n[0], o = n[1], a = n[2], s = n[3], l = n[4], u = n[5], c = n[6];
        r = { width: i, texture: o, color: a, alpha: s, matrix: l, alignment: u, native: c }, Object.keys(r).forEach(function(h) {
          return r[h] === void 0 && delete r[h];
        });
      }
      r = Object.assign({
        width: 0,
        texture: Pt.WHITE,
        color: r && r.texture ? 16777215 : 0,
        alpha: 1,
        matrix: null,
        alignment: 0.5,
        native: false,
        cap: ys.BUTT,
        join: vs.MITER,
        miterLimit: 10
      }, r), this.currentPath && this.startPoly();
      var f = r.width > 0 && r.alpha > 0;
      return f ? (r.matrix && (r.matrix = r.matrix.clone(), r.matrix.invert()), Object.assign(this._lineStyle, { visible: f }, r)) : this._lineStyle.reset(), this;
    }, t.prototype.startPoly = function() {
      if (this.currentPath) {
        var r = this.currentPath.points, n = this.currentPath.points.length;
        n > 2 && (this.drawShape(this.currentPath), this.currentPath = new Sf(), this.currentPath.closeStroke = false, this.currentPath.points.push(r[n - 2], r[n - 1]));
      } else
        this.currentPath = new Sf(), this.currentPath.closeStroke = false;
    }, t.prototype.finishPoly = function() {
      this.currentPath && (this.currentPath.points.length > 2 ? (this.drawShape(this.currentPath), this.currentPath = null) : this.currentPath.points.length = 0);
    }, t.prototype.moveTo = function(r, n) {
      return this.startPoly(), this.currentPath.points[0] = r, this.currentPath.points[1] = n, this;
    }, t.prototype.lineTo = function(r, n) {
      this.currentPath || this.moveTo(0, 0);
      var i = this.currentPath.points, o = i[i.length - 2], a = i[i.length - 1];
      return (o !== r || a !== n) && i.push(r, n), this;
    }, t.prototype._initCurve = function(r, n) {
      r === void 0 && (r = 0), n === void 0 && (n = 0), this.currentPath ? this.currentPath.points.length === 0 && (this.currentPath.points = [r, n]) : this.moveTo(r, n);
    }, t.prototype.quadraticCurveTo = function(r, n, i, o) {
      this._initCurve();
      var a = this.currentPath.points;
      return a.length === 0 && this.moveTo(0, 0), s8.curveTo(r, n, i, o, a), this;
    }, t.prototype.bezierCurveTo = function(r, n, i, o, a, s) {
      return this._initCurve(), a8.curveTo(r, n, i, o, a, s, this.currentPath.points), this;
    }, t.prototype.arcTo = function(r, n, i, o, a) {
      this._initCurve(r, n);
      var s = this.currentPath.points, l = wI.curveTo(r, n, i, o, a, s);
      if (l) {
        var u = l.cx, c = l.cy, f = l.radius, h = l.startAngle, d = l.endAngle, p = l.anticlockwise;
        this.arc(u, c, f, h, d, p);
      }
      return this;
    }, t.prototype.arc = function(r, n, i, o, a, s) {
      if (s === void 0 && (s = false), o === a)
        return this;
      !s && a <= o ? a += Qf : s && o <= a && (o += Qf);
      var l = a - o;
      if (l === 0)
        return this;
      var u = r + Math.cos(o) * i, c = n + Math.sin(o) * i, f = this._geometry.closePointEps, h = this.currentPath ? this.currentPath.points : null;
      if (h) {
        var d = Math.abs(h[h.length - 2] - u), p = Math.abs(h[h.length - 1] - c);
        d < f && p < f || h.push(u, c);
      } else
        this.moveTo(u, c), h = this.currentPath.points;
      return wI.arc(u, c, r, n, i, o, a, s, h), this;
    }, t.prototype.beginFill = function(r, n) {
      return r === void 0 && (r = 0), n === void 0 && (n = 1), this.beginTextureFill({ texture: Pt.WHITE, color: r, alpha: n });
    }, t.prototype.beginTextureFill = function(r) {
      if (r instanceof Pt) {
        ze("v5.2.0", "Please use object-based options for Graphics#beginTextureFill");
        var n = arguments, i = n[0], o = n[1], a = n[2], s = n[3];
        r = { texture: i, color: o, alpha: a, matrix: s }, Object.keys(r).forEach(function(u) {
          return r[u] === void 0 && delete r[u];
        });
      }
      r = Object.assign({
        texture: Pt.WHITE,
        color: 16777215,
        alpha: 1,
        matrix: null
      }, r), this.currentPath && this.startPoly();
      var l = r.alpha > 0;
      return l ? (r.matrix && (r.matrix = r.matrix.clone(), r.matrix.invert()), Object.assign(this._fillStyle, { visible: l }, r)) : this._fillStyle.reset(), this;
    }, t.prototype.endFill = function() {
      return this.finishPoly(), this._fillStyle.reset(), this;
    }, t.prototype.drawRect = function(r, n, i, o) {
      return this.drawShape(new fr(r, n, i, o));
    }, t.prototype.drawRoundedRect = function(r, n, i, o, a) {
      return this.drawShape(new tz(r, n, i, o, a));
    }, t.prototype.drawCircle = function(r, n, i) {
      return this.drawShape(new JG(r, n, i));
    }, t.prototype.drawEllipse = function(r, n, i, o) {
      return this.drawShape(new ez(r, n, i, o));
    }, t.prototype.drawPolygon = function() {
      for (var r = arguments, n = [], i = 0; i < arguments.length; i++)
        n[i] = r[i];
      var o, a = true, s = n[0];
      s.points ? (a = s.closeStroke, o = s.points) : Array.isArray(n[0]) ? o = n[0] : o = n;
      var l = new Sf(o);
      return l.closeStroke = a, this.drawShape(l), this;
    }, t.prototype.drawShape = function(r) {
      return this._holeMode ? this._geometry.drawHole(r, this._matrix) : this._geometry.drawShape(r, this._fillStyle.clone(), this._lineStyle.clone(), this._matrix), this;
    }, t.prototype.drawStar = function(r, n, i, o, a, s) {
      return s === void 0 && (s = 0), this.drawPolygon(new o8(r, n, i, o, a, s));
    }, t.prototype.clear = function() {
      return this._geometry.clear(), this._lineStyle.reset(), this._fillStyle.reset(), this._boundsID++, this._matrix = null, this._holeMode = false, this.currentPath = null, this;
    }, t.prototype.isFastRect = function() {
      var r = this._geometry.graphicsData;
      return r.length === 1 && r[0].shape.type === Wr.RECT && !(r[0].lineStyle.visible && r[0].lineStyle.width);
    }, t.prototype._render = function(r) {
      this.finishPoly();
      var n = this._geometry, i = r.context.supports.uint32Indices;
      n.updateBatches(i), n.batchable ? (this.batchDirty !== n.batchDirty && this._populateBatches(), this._renderBatched(r)) : (r.batch.flush(), this._renderDirect(r));
    }, t.prototype._populateBatches = function() {
      var r = this._geometry, n = this.blendMode, i = r.batches.length;
      this.batchTint = -1, this._transformID = -1, this.batchDirty = r.batchDirty, this.batches.length = i, this.vertexData = new Float32Array(r.points);
      for (var o = 0; o < i; o++) {
        var a = r.batches[o], s = a.style.color, l = new Float32Array(this.vertexData.buffer, a.attribStart * 4 * 2, a.attribSize * 2), u = new Float32Array(r.uvsFloat32.buffer, a.attribStart * 4 * 2, a.attribSize * 2), c = new Uint16Array(r.indicesUint16.buffer, a.start * 2, a.size), f = {
          vertexData: l,
          blendMode: n,
          indices: c,
          uvs: u,
          _batchRGB: cu(s),
          _tintRGB: s,
          _texture: a.style.texture,
          alpha: a.style.alpha,
          worldAlpha: 1
        };
        this.batches[o] = f;
      }
    }, t.prototype._renderBatched = function(r) {
      if (this.batches.length) {
        r.batch.setObjectRenderer(r.plugins[this.pluginName]), this.calculateVertices(), this.calculateTints();
        for (var n = 0, i = this.batches.length; n < i; n++) {
          var o = this.batches[n];
          o.worldAlpha = this.worldAlpha * o.alpha, r.plugins[this.pluginName].render(o);
        }
      }
    }, t.prototype._renderDirect = function(r) {
      var n = this._resolveDirectShader(r), i = this._geometry, o = this.tint, a = this.worldAlpha, s = n.uniforms, l = i.drawCalls;
      s.translationMatrix = this.transform.worldTransform, s.tint[0] = (o >> 16 & 255) / 255 * a, s.tint[1] = (o >> 8 & 255) / 255 * a, s.tint[2] = (o & 255) / 255 * a, s.tint[3] = a, r.shader.bind(n), r.geometry.bind(i, n), r.state.set(this.state);
      for (var u = 0, c = l.length; u < c; u++)
        this._renderDrawCallDirect(r, i.drawCalls[u]);
    }, t.prototype._renderDrawCallDirect = function(r, n) {
      for (var i = n.texArray, o = n.type, a = n.size, s = n.start, l = i.count, u = 0; u < l; u++)
        r.texture.bind(i.elements[u], u);
      r.geometry.draw(o, a, s);
    }, t.prototype._resolveDirectShader = function(r) {
      var n = this.shader, i = this.pluginName;
      if (!n) {
        if (!uw[i]) {
          for (var o = r.plugins.batch.MAX_TEXTURES, a = new Int32Array(o), s = 0; s < o; s++)
            a[s] = s;
          var l = {
            tint: new Float32Array([1, 1, 1, 1]),
            translationMatrix: new sn(),
            default: Ul.from({ uSamplers: a }, true)
          }, u = r.plugins[i]._shader.program;
          uw[i] = new Kl(u, l);
        }
        n = uw[i];
      }
      return n;
    }, t.prototype._calculateBounds = function() {
      this.finishPoly();
      var r = this._geometry;
      if (r.graphicsData.length) {
        var n = r.bounds, i = n.minX, o = n.minY, a = n.maxX, s = n.maxY;
        this._bounds.addFrame(this.transform, i, o, a, s);
      }
    }, t.prototype.containsPoint = function(r) {
      return this.worldTransform.applyInverse(r, t._TEMP_POINT), this._geometry.containsPoint(t._TEMP_POINT);
    }, t.prototype.calculateTints = function() {
      if (this.batchTint !== this.tint) {
        this.batchTint = this.tint;
        for (var r = cu(this.tint, Sne), n = 0; n < this.batches.length; n++) {
          var i = this.batches[n], o = i._batchRGB, a = r[0] * o[0] * 255, s = r[1] * o[1] * 255, l = r[2] * o[2] * 255, u = (a << 16) + (s << 8) + (l | 0);
          i._tintRGB = (u >> 16) + (u & 65280) + ((u & 255) << 16);
        }
      }
    }, t.prototype.calculateVertices = function() {
      var r = this.transform._worldID;
      if (this._transformID !== r) {
        this._transformID = r;
        for (var n = this.transform.worldTransform, i = n.a, o = n.b, a = n.c, s = n.d, l = n.tx, u = n.ty, c = this._geometry.points, f = this.vertexData, h = 0, d = 0; d < c.length; d += 2) {
          var p = c[d], m = c[d + 1];
          f[h++] = i * p + a * m + l, f[h++] = s * m + o * p + u;
        }
      }
    }, t.prototype.closePath = function() {
      var r = this.currentPath;
      return r && (r.closeStroke = true), this;
    }, t.prototype.setMatrix = function(r) {
      return this._matrix = r, this;
    }, t.prototype.beginHole = function() {
      return this.finishPoly(), this._holeMode = true, this;
    }, t.prototype.endHole = function() {
      return this.finishPoly(), this._holeMode = false, this;
    }, t.prototype.destroy = function(r) {
      this._geometry.refCount--, this._geometry.refCount === 0 && this._geometry.dispose(), this._matrix = null, this.currentPath = null, this._lineStyle.destroy(), this._lineStyle = null, this._fillStyle.destroy(), this._fillStyle = null, this._geometry = null, this.shader = null, this.vertexData = null, this.batches.length = 0, this.batches = null, e12.prototype.destroy.call(this, r);
    }, t._TEMP_POINT = new In(), t;
  }(ra)
);
var II = function(e12, t) {
  return II = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, II(e12, t);
};
function wne(e12, t) {
  II(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var $p = new In();
var Ane = new Uint16Array([0, 1, 2, 0, 2, 3]);
var Zd = (
  /** @class */
  function(e12) {
    wne(t, e12);
    function t(r) {
      var n = e12.call(this) || this;
      return n._anchor = new Gc(n._onAnchorUpdate, n, r ? r.defaultAnchor.x : 0, r ? r.defaultAnchor.y : 0), n._texture = null, n._width = 0, n._height = 0, n._tint = null, n._tintRGB = null, n.tint = 16777215, n.blendMode = yt.NORMAL, n._cachedTint = 16777215, n.uvs = null, n.texture = r || Pt.EMPTY, n.vertexData = new Float32Array(8), n.vertexTrimmedData = null, n._transformID = -1, n._textureID = -1, n._transformTrimmedID = -1, n._textureTrimmedID = -1, n.indices = Ane, n.pluginName = "batch", n.isSprite = true, n._roundPixels = ft.ROUND_PIXELS, n;
    }
    return t.prototype._onTextureUpdate = function() {
      this._textureID = -1, this._textureTrimmedID = -1, this._cachedTint = 16777215, this._width && (this.scale.x = jc(this.scale.x) * this._width / this._texture.orig.width), this._height && (this.scale.y = jc(this.scale.y) * this._height / this._texture.orig.height);
    }, t.prototype._onAnchorUpdate = function() {
      this._transformID = -1, this._transformTrimmedID = -1;
    }, t.prototype.calculateVertices = function() {
      var r = this._texture;
      if (!(this._transformID === this.transform._worldID && this._textureID === r._updateID)) {
        this._textureID !== r._updateID && (this.uvs = this._texture._uvs.uvsFloat32), this._transformID = this.transform._worldID, this._textureID = r._updateID;
        var n = this.transform.worldTransform, i = n.a, o = n.b, a = n.c, s = n.d, l = n.tx, u = n.ty, c = this.vertexData, f = r.trim, h = r.orig, d = this._anchor, p = 0, m = 0, g = 0, v = 0;
        if (f ? (m = f.x - d._x * h.width, p = m + f.width, v = f.y - d._y * h.height, g = v + f.height) : (m = -d._x * h.width, p = m + h.width, v = -d._y * h.height, g = v + h.height), c[0] = i * m + a * v + l, c[1] = s * v + o * m + u, c[2] = i * p + a * v + l, c[3] = s * v + o * p + u, c[4] = i * p + a * g + l, c[5] = s * g + o * p + u, c[6] = i * m + a * g + l, c[7] = s * g + o * m + u, this._roundPixels)
          for (var _ = ft.RESOLUTION, y = 0; y < c.length; ++y)
            c[y] = Math.round((c[y] * _ | 0) / _);
      }
    }, t.prototype.calculateTrimmedVertices = function() {
      if (!this.vertexTrimmedData)
        this.vertexTrimmedData = new Float32Array(8);
      else if (this._transformTrimmedID === this.transform._worldID && this._textureTrimmedID === this._texture._updateID)
        return;
      this._transformTrimmedID = this.transform._worldID, this._textureTrimmedID = this._texture._updateID;
      var r = this._texture, n = this.vertexTrimmedData, i = r.orig, o = this._anchor, a = this.transform.worldTransform, s = a.a, l = a.b, u = a.c, c = a.d, f = a.tx, h = a.ty, d = -o._x * i.width, p = d + i.width, m = -o._y * i.height, g = m + i.height;
      n[0] = s * d + u * m + f, n[1] = c * m + l * d + h, n[2] = s * p + u * m + f, n[3] = c * m + l * p + h, n[4] = s * p + u * g + f, n[5] = c * g + l * p + h, n[6] = s * d + u * g + f, n[7] = c * g + l * d + h;
    }, t.prototype._render = function(r) {
      this.calculateVertices(), r.batch.setObjectRenderer(r.plugins[this.pluginName]), r.plugins[this.pluginName].render(this);
    }, t.prototype._calculateBounds = function() {
      var r = this._texture.trim, n = this._texture.orig;
      !r || r.width === n.width && r.height === n.height ? (this.calculateVertices(), this._bounds.addQuad(this.vertexData)) : (this.calculateTrimmedVertices(), this._bounds.addQuad(this.vertexTrimmedData));
    }, t.prototype.getLocalBounds = function(r) {
      return this.children.length === 0 ? (this._bounds.minX = this._texture.orig.width * -this._anchor._x, this._bounds.minY = this._texture.orig.height * -this._anchor._y, this._bounds.maxX = this._texture.orig.width * (1 - this._anchor._x), this._bounds.maxY = this._texture.orig.height * (1 - this._anchor._y), r || (this._localBoundsRect || (this._localBoundsRect = new fr()), r = this._localBoundsRect), this._bounds.getRectangle(r)) : e12.prototype.getLocalBounds.call(this, r);
    }, t.prototype.containsPoint = function(r) {
      this.worldTransform.applyInverse(r, $p);
      var n = this._texture.orig.width, i = this._texture.orig.height, o = -n * this.anchor.x, a = 0;
      return $p.x >= o && $p.x < o + n && (a = -i * this.anchor.y, $p.y >= a && $p.y < a + i);
    }, t.prototype.destroy = function(r) {
      e12.prototype.destroy.call(this, r), this._texture.off("update", this._onTextureUpdate, this), this._anchor = null;
      var n = typeof r == "boolean" ? r : r && r.texture;
      if (n) {
        var i = typeof r == "boolean" ? r : r && r.baseTexture;
        this._texture.destroy(!!i);
      }
      this._texture = null;
    }, t.from = function(r, n) {
      var i = r instanceof Pt ? r : Pt.from(r, n);
      return new t(i);
    }, Object.defineProperty(t.prototype, "roundPixels", {
      get: function() {
        return this._roundPixels;
      },
      /**
       * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
       * Advantages can include sharper image quality (like text) and faster rendering on canvas.
       * The main disadvantage is movement of objects may appear less smooth.
       * To set the global default, change {@link PIXI.settings.ROUND_PIXELS}
       *
       * @member {boolean}
       * @default false
       */
      set: function(r) {
        this._roundPixels !== r && (this._transformID = -1), this._roundPixels = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "width", {
      /**
       * The width of the sprite, setting this will actually modify the scale to achieve the value set
       *
       * @member {number}
       */
      get: function() {
        return Math.abs(this.scale.x) * this._texture.orig.width;
      },
      set: function(r) {
        var n = jc(this.scale.x) || 1;
        this.scale.x = n * r / this._texture.orig.width, this._width = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "height", {
      /**
       * The height of the sprite, setting this will actually modify the scale to achieve the value set
       *
       * @member {number}
       */
      get: function() {
        return Math.abs(this.scale.y) * this._texture.orig.height;
      },
      set: function(r) {
        var n = jc(this.scale.y) || 1;
        this.scale.y = n * r / this._texture.orig.height, this._height = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "anchor", {
      /**
       * The anchor sets the origin point of the sprite. The default value is taken from the {@link PIXI.Texture|Texture}
       * and passed to the constructor.
       *
       * The default is `(0,0)`, this means the sprite's origin is the top left.
       *
       * Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.
       *
       * Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.
       *
       * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.
       *
       * @example
       * const sprite = new PIXI.Sprite(texture);
       * sprite.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).
       *
       * @member {PIXI.ObservablePoint}
       */
      get: function() {
        return this._anchor;
      },
      set: function(r) {
        this._anchor.copyFrom(r);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "tint", {
      /**
       * The tint applied to the sprite. This is a hex value.
       * A value of 0xFFFFFF will remove any tint effect.
       *
       * @member {number}
       * @default 0xFFFFFF
       */
      get: function() {
        return this._tint;
      },
      set: function(r) {
        this._tint = r, this._tintRGB = (r >> 16) + (r & 65280) + ((r & 255) << 16);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "texture", {
      /**
       * The texture that the sprite is using
       *
       * @member {PIXI.Texture}
       */
      get: function() {
        return this._texture;
      },
      set: function(r) {
        this._texture !== r && (this._texture && this._texture.off("update", this._onTextureUpdate, this), this._texture = r || Pt.EMPTY, this._cachedTint = 16777215, this._textureID = -1, this._textureTrimmedID = -1, r && (r.baseTexture.valid ? this._onTextureUpdate() : r.once("update", this._onTextureUpdate, this)));
      },
      enumerable: false,
      configurable: true
    }), t;
  }(ra)
);
var PI = function(e12, t) {
  return PI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, PI(e12, t);
};
function One(e12, t) {
  PI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var td;
(function(e12) {
  e12[e12.LINEAR_VERTICAL = 0] = "LINEAR_VERTICAL", e12[e12.LINEAR_HORIZONTAL = 1] = "LINEAR_HORIZONTAL";
})(td || (td = {}));
var hw = {
  align: "left",
  breakWords: false,
  dropShadow: false,
  dropShadowAlpha: 1,
  dropShadowAngle: Math.PI / 6,
  dropShadowBlur: 0,
  dropShadowColor: "black",
  dropShadowDistance: 5,
  fill: "black",
  fillGradientType: td.LINEAR_VERTICAL,
  fillGradientStops: [],
  fontFamily: "Arial",
  fontSize: 26,
  fontStyle: "normal",
  fontVariant: "normal",
  fontWeight: "normal",
  letterSpacing: 0,
  lineHeight: 0,
  lineJoin: "miter",
  miterLimit: 10,
  padding: 0,
  stroke: "black",
  strokeThickness: 0,
  textBaseline: "alphabetic",
  trim: false,
  whiteSpace: "pre",
  wordWrap: false,
  wordWrapWidth: 100,
  leading: 0
};
var Ine = [
  "serif",
  "sans-serif",
  "monospace",
  "cursive",
  "fantasy",
  "system-ui"
];
var du = (
  /** @class */
  function() {
    function e12(t) {
      this.styleID = 0, this.reset(), dw(this, t, t);
    }
    return e12.prototype.clone = function() {
      var t = {};
      return dw(t, this, hw), new e12(t);
    }, e12.prototype.reset = function() {
      dw(this, hw, hw);
    }, Object.defineProperty(e12.prototype, "align", {
      /**
       * Alignment for multiline text ('left', 'center' or 'right'), does not affect single line text
       *
       * @member {string}
       */
      get: function() {
        return this._align;
      },
      set: function(t) {
        this._align !== t && (this._align = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "breakWords", {
      /**
       * Indicates if lines can be wrapped within words, it needs wordWrap to be set to true
       *
       * @member {boolean}
       */
      get: function() {
        return this._breakWords;
      },
      set: function(t) {
        this._breakWords !== t && (this._breakWords = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "dropShadow", {
      /**
       * Set a drop shadow for the text
       *
       * @member {boolean}
       */
      get: function() {
        return this._dropShadow;
      },
      set: function(t) {
        this._dropShadow !== t && (this._dropShadow = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "dropShadowAlpha", {
      /**
       * Set alpha for the drop shadow
       *
       * @member {number}
       */
      get: function() {
        return this._dropShadowAlpha;
      },
      set: function(t) {
        this._dropShadowAlpha !== t && (this._dropShadowAlpha = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "dropShadowAngle", {
      /**
       * Set a angle of the drop shadow
       *
       * @member {number}
       */
      get: function() {
        return this._dropShadowAngle;
      },
      set: function(t) {
        this._dropShadowAngle !== t && (this._dropShadowAngle = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "dropShadowBlur", {
      /**
       * Set a shadow blur radius
       *
       * @member {number}
       */
      get: function() {
        return this._dropShadowBlur;
      },
      set: function(t) {
        this._dropShadowBlur !== t && (this._dropShadowBlur = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "dropShadowColor", {
      /**
       * A fill style to be used on the dropshadow e.g 'red', '#00FF00'
       *
       * @member {string|number}
       */
      get: function() {
        return this._dropShadowColor;
      },
      set: function(t) {
        var r = fw(t);
        this._dropShadowColor !== r && (this._dropShadowColor = r, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "dropShadowDistance", {
      /**
       * Set a distance of the drop shadow
       *
       * @member {number}
       */
      get: function() {
        return this._dropShadowDistance;
      },
      set: function(t) {
        this._dropShadowDistance !== t && (this._dropShadowDistance = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "fill", {
      /**
       * A canvas fillstyle that will be used on the text e.g 'red', '#00FF00'.
       * Can be an array to create a gradient eg ['#000000','#FFFFFF']
       * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillStyle|MDN}
       *
       * @member {string|string[]|number|number[]|CanvasGradient|CanvasPattern}
       */
      get: function() {
        return this._fill;
      },
      set: function(t) {
        var r = fw(t);
        this._fill !== r && (this._fill = r, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "fillGradientType", {
      /**
       * If fill is an array of colours to create a gradient, this can change the type/direction of the gradient.
       * See {@link PIXI.TEXT_GRADIENT}
       *
       * @member {number}
       */
      get: function() {
        return this._fillGradientType;
      },
      set: function(t) {
        this._fillGradientType !== t && (this._fillGradientType = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "fillGradientStops", {
      /**
       * If fill is an array of colours to create a gradient, this array can set the stop points
       * (numbers between 0 and 1) for the color, overriding the default behaviour of evenly spacing them.
       *
       * @member {number[]}
       */
      get: function() {
        return this._fillGradientStops;
      },
      set: function(t) {
        Pne(this._fillGradientStops, t) || (this._fillGradientStops = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "fontFamily", {
      /**
       * The font family
       *
       * @member {string|string[]}
       */
      get: function() {
        return this._fontFamily;
      },
      set: function(t) {
        this.fontFamily !== t && (this._fontFamily = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "fontSize", {
      /**
       * The font size
       * (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em')
       *
       * @member {number|string}
       */
      get: function() {
        return this._fontSize;
      },
      set: function(t) {
        this._fontSize !== t && (this._fontSize = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "fontStyle", {
      /**
       * The font style
       * ('normal', 'italic' or 'oblique')
       *
       * @member {string}
       */
      get: function() {
        return this._fontStyle;
      },
      set: function(t) {
        this._fontStyle !== t && (this._fontStyle = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "fontVariant", {
      /**
       * The font variant
       * ('normal' or 'small-caps')
       *
       * @member {string}
       */
      get: function() {
        return this._fontVariant;
      },
      set: function(t) {
        this._fontVariant !== t && (this._fontVariant = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "fontWeight", {
      /**
       * The font weight
       * ('normal', 'bold', 'bolder', 'lighter' and '100', '200', '300', '400', '500', '600', '700', 800' or '900')
       *
       * @member {string}
       */
      get: function() {
        return this._fontWeight;
      },
      set: function(t) {
        this._fontWeight !== t && (this._fontWeight = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "letterSpacing", {
      /**
       * The amount of spacing between letters, default is 0
       *
       * @member {number}
       */
      get: function() {
        return this._letterSpacing;
      },
      set: function(t) {
        this._letterSpacing !== t && (this._letterSpacing = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "lineHeight", {
      /**
       * The line height, a number that represents the vertical space that a letter uses
       *
       * @member {number}
       */
      get: function() {
        return this._lineHeight;
      },
      set: function(t) {
        this._lineHeight !== t && (this._lineHeight = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "leading", {
      /**
       * The space between lines
       *
       * @member {number}
       */
      get: function() {
        return this._leading;
      },
      set: function(t) {
        this._leading !== t && (this._leading = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "lineJoin", {
      /**
       * The lineJoin property sets the type of corner created, it can resolve spiked text issues.
       * Default is 'miter' (creates a sharp corner).
       *
       * @member {string}
       */
      get: function() {
        return this._lineJoin;
      },
      set: function(t) {
        this._lineJoin !== t && (this._lineJoin = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "miterLimit", {
      /**
       * The miter limit to use when using the 'miter' lineJoin mode
       * This can reduce or increase the spikiness of rendered text.
       *
       * @member {number}
       */
      get: function() {
        return this._miterLimit;
      },
      set: function(t) {
        this._miterLimit !== t && (this._miterLimit = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "padding", {
      /**
       * Occasionally some fonts are cropped. Adding some padding will prevent this from happening
       * by adding padding to all sides of the text.
       *
       * @member {number}
       */
      get: function() {
        return this._padding;
      },
      set: function(t) {
        this._padding !== t && (this._padding = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "stroke", {
      /**
       * A canvas fillstyle that will be used on the text stroke
       * e.g 'blue', '#FCFF00'
       *
       * @member {string|number}
       */
      get: function() {
        return this._stroke;
      },
      set: function(t) {
        var r = fw(t);
        this._stroke !== r && (this._stroke = r, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "strokeThickness", {
      /**
       * A number that represents the thickness of the stroke.
       * Default is 0 (no stroke)
       *
       * @member {number}
       */
      get: function() {
        return this._strokeThickness;
      },
      set: function(t) {
        this._strokeThickness !== t && (this._strokeThickness = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "textBaseline", {
      /**
       * The baseline of the text that is rendered.
       *
       * @member {string}
       */
      get: function() {
        return this._textBaseline;
      },
      set: function(t) {
        this._textBaseline !== t && (this._textBaseline = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "trim", {
      /**
       * Trim transparent borders
       *
       * @member {boolean}
       */
      get: function() {
        return this._trim;
      },
      set: function(t) {
        this._trim !== t && (this._trim = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "whiteSpace", {
      /**
       * How newlines and spaces should be handled.
       * Default is 'pre' (preserve, preserve).
       *
       *  value       | New lines     |   Spaces
       *  ---         | ---           |   ---
       * 'normal'     | Collapse      |   Collapse
       * 'pre'        | Preserve      |   Preserve
       * 'pre-line'   | Preserve      |   Collapse
       *
       * @member {string}
       */
      get: function() {
        return this._whiteSpace;
      },
      set: function(t) {
        this._whiteSpace !== t && (this._whiteSpace = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "wordWrap", {
      /**
       * Indicates if word wrap should be used
       *
       * @member {boolean}
       */
      get: function() {
        return this._wordWrap;
      },
      set: function(t) {
        this._wordWrap !== t && (this._wordWrap = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "wordWrapWidth", {
      /**
       * The width at which text will wrap, it needs wordWrap to be set to true
       *
       * @member {number}
       */
      get: function() {
        return this._wordWrapWidth;
      },
      set: function(t) {
        this._wordWrapWidth !== t && (this._wordWrapWidth = t, this.styleID++);
      },
      enumerable: false,
      configurable: true
    }), e12.prototype.toFontString = function() {
      var t = typeof this.fontSize == "number" ? this.fontSize + "px" : this.fontSize, r = this.fontFamily;
      Array.isArray(this.fontFamily) || (r = this.fontFamily.split(","));
      for (var n = r.length - 1; n >= 0; n--) {
        var i = r[n].trim();
        !/([\"\'])[^\'\"]+\1/.test(i) && Ine.indexOf(i) < 0 && (i = '"' + i + '"'), r[n] = i;
      }
      return this.fontStyle + " " + this.fontVariant + " " + this.fontWeight + " " + t + " " + r.join(",");
    }, e12;
  }()
);
function U5(e12) {
  return typeof e12 == "number" ? fD(e12) : (typeof e12 == "string" && e12.indexOf("0x") === 0 && (e12 = e12.replace("0x", "#")), e12);
}
function fw(e12) {
  if (Array.isArray(e12)) {
    for (var t = 0; t < e12.length; ++t)
      e12[t] = U5(e12[t]);
    return e12;
  } else
    return U5(e12);
}
function Pne(e12, t) {
  if (!Array.isArray(e12) || !Array.isArray(t) || e12.length !== t.length)
    return false;
  for (var r = 0; r < e12.length; ++r)
    if (e12[r] !== t[r])
      return false;
  return true;
}
function dw(e12, t, r) {
  for (var n in r)
    Array.isArray(t[n]) ? e12[n] = t[n].slice() : e12[n] = t[n];
}
var Do = (
  /** @class */
  function() {
    function e12(t, r, n, i, o, a, s, l, u) {
      this.text = t, this.style = r, this.width = n, this.height = i, this.lines = o, this.lineWidths = a, this.lineHeight = s, this.maxLineWidth = l, this.fontProperties = u;
    }
    return e12.measureText = function(t, r, n, i) {
      i === void 0 && (i = e12._canvas), n = n ?? r.wordWrap;
      var o = r.toFontString(), a = e12.measureFont(o);
      a.fontSize === 0 && (a.fontSize = r.fontSize, a.ascent = r.fontSize);
      var s = i.getContext("2d");
      s.font = o;
      for (var l = n ? e12.wordWrap(t, r, i) : t, u = l.split(/(?:\r\n|\r|\n)/), c = new Array(u.length), f = 0, h = 0; h < u.length; h++) {
        var d = s.measureText(u[h]).width + (u[h].length - 1) * r.letterSpacing;
        c[h] = d, f = Math.max(f, d);
      }
      var p = f + r.strokeThickness;
      r.dropShadow && (p += r.dropShadowDistance);
      var m = r.lineHeight || a.fontSize + r.strokeThickness, g = Math.max(m, a.fontSize + r.strokeThickness) + (u.length - 1) * (m + r.leading);
      return r.dropShadow && (g += r.dropShadowDistance), new e12(t, r, p, g, u, c, m + r.leading, f, a);
    }, e12.wordWrap = function(t, r, n) {
      n === void 0 && (n = e12._canvas);
      for (var i = n.getContext("2d"), o = 0, a = "", s = "", l = /* @__PURE__ */ Object.create(null), u = r.letterSpacing, c = r.whiteSpace, f = e12.collapseSpaces(c), h = e12.collapseNewlines(c), d = !f, p = r.wordWrapWidth + u, m = e12.tokenize(t), g = 0; g < m.length; g++) {
        var v = m[g];
        if (e12.isNewline(v)) {
          if (!h) {
            s += e12.addLine(a), d = !f, a = "", o = 0;
            continue;
          }
          v = " ";
        }
        if (f) {
          var _ = e12.isBreakingSpace(v), y = e12.isBreakingSpace(a[a.length - 1]);
          if (_ && y)
            continue;
        }
        var b = e12.getFromCache(v, u, l, i);
        if (b > p)
          if (a !== "" && (s += e12.addLine(a), a = "", o = 0), e12.canBreakWords(v, r.breakWords))
            for (var T = e12.wordWrapSplit(v), E = 0; E < T.length; E++) {
              for (var P = T[E], A = 1; T[E + A]; ) {
                var I = T[E + A], x = P[P.length - 1];
                if (!e12.canBreakChars(x, I, v, E, r.breakWords))
                  P += I;
                else
                  break;
                A++;
              }
              E += P.length - 1;
              var S = e12.getFromCache(P, u, l, i);
              S + o > p && (s += e12.addLine(a), d = false, a = "", o = 0), a += P, o += S;
            }
          else {
            a.length > 0 && (s += e12.addLine(a), a = "", o = 0);
            var N = g === m.length - 1;
            s += e12.addLine(v, !N), d = false, a = "", o = 0;
          }
        else
          b + o > p && (d = false, s += e12.addLine(a), a = "", o = 0), (a.length > 0 || !e12.isBreakingSpace(v) || d) && (a += v, o += b);
      }
      return s += e12.addLine(a, false), s;
    }, e12.addLine = function(t, r) {
      return r === void 0 && (r = true), t = e12.trimRight(t), t = r ? t + `
` : t, t;
    }, e12.getFromCache = function(t, r, n, i) {
      var o = n[t];
      if (typeof o != "number") {
        var a = t.length * r;
        o = i.measureText(t).width + a, n[t] = o;
      }
      return o;
    }, e12.collapseSpaces = function(t) {
      return t === "normal" || t === "pre-line";
    }, e12.collapseNewlines = function(t) {
      return t === "normal";
    }, e12.trimRight = function(t) {
      if (typeof t != "string")
        return "";
      for (var r = t.length - 1; r >= 0; r--) {
        var n = t[r];
        if (!e12.isBreakingSpace(n))
          break;
        t = t.slice(0, -1);
      }
      return t;
    }, e12.isNewline = function(t) {
      return typeof t != "string" ? false : e12._newlines.indexOf(t.charCodeAt(0)) >= 0;
    }, e12.isBreakingSpace = function(t) {
      return typeof t != "string" ? false : e12._breakingSpaces.indexOf(t.charCodeAt(0)) >= 0;
    }, e12.tokenize = function(t) {
      var r = [], n = "";
      if (typeof t != "string")
        return r;
      for (var i = 0; i < t.length; i++) {
        var o = t[i];
        if (e12.isBreakingSpace(o) || e12.isNewline(o)) {
          n !== "" && (r.push(n), n = ""), r.push(o);
          continue;
        }
        n += o;
      }
      return n !== "" && r.push(n), r;
    }, e12.canBreakWords = function(t, r) {
      return r;
    }, e12.canBreakChars = function(t, r, n, i, o) {
      return true;
    }, e12.wordWrapSplit = function(t) {
      return t.split("");
    }, e12.measureFont = function(t) {
      if (e12._fonts[t])
        return e12._fonts[t];
      var r = {
        ascent: 0,
        descent: 0,
        fontSize: 0
      }, n = e12._canvas, i = e12._context;
      i.font = t;
      var o = e12.METRICS_STRING + e12.BASELINE_SYMBOL, a = Math.ceil(i.measureText(o).width), s = Math.ceil(i.measureText(e12.BASELINE_SYMBOL).width), l = 2 * s;
      s = s * e12.BASELINE_MULTIPLIER | 0, n.width = a, n.height = l, i.fillStyle = "#f00", i.fillRect(0, 0, a, l), i.font = t, i.textBaseline = "alphabetic", i.fillStyle = "#000", i.fillText(o, 0, s);
      var u = i.getImageData(0, 0, a, l).data, c = u.length, f = a * 4, h = 0, d = 0, p = false;
      for (h = 0; h < s; ++h) {
        for (var m = 0; m < f; m += 4)
          if (u[d + m] !== 255) {
            p = true;
            break;
          }
        if (!p)
          d += f;
        else
          break;
      }
      for (r.ascent = s - h, d = c - f, p = false, h = l; h > s; --h) {
        for (var m = 0; m < f; m += 4)
          if (u[d + m] !== 255) {
            p = true;
            break;
          }
        if (!p)
          d -= f;
        else
          break;
      }
      return r.descent = h - s, r.fontSize = r.ascent + r.descent, e12._fonts[t] = r, r;
    }, e12.clearMetrics = function(t) {
      t === void 0 && (t = ""), t ? delete e12._fonts[t] : e12._fonts = {};
    }, e12;
  }()
);
var a0 = function() {
  try {
    var e12 = new OffscreenCanvas(0, 0), t = e12.getContext("2d");
    return t && t.measureText ? e12 : document.createElement("canvas");
  } catch {
    return document.createElement("canvas");
  }
}();
a0.width = a0.height = 10;
Do._canvas = a0;
Do._context = a0.getContext("2d");
Do._fonts = {};
Do.METRICS_STRING = "|ÉqÅ";
Do.BASELINE_SYMBOL = "M";
Do.BASELINE_MULTIPLIER = 1.4;
Do._newlines = [
  10,
  13
];
Do._breakingSpaces = [
  9,
  32,
  8192,
  8193,
  8194,
  8195,
  8196,
  8197,
  8198,
  8200,
  8201,
  8202,
  8287,
  12288
];
var Cne = {
  texture: true,
  children: false,
  baseTexture: true
};
var kD = (
  /** @class */
  function(e12) {
    One(t, e12);
    function t(r, n, i) {
      var o = this, a = false;
      i || (i = document.createElement("canvas"), a = true), i.width = 3, i.height = 3;
      var s = Pt.from(i);
      return s.orig = new fr(), s.trim = new fr(), o = e12.call(this, s) || this, o._ownCanvas = a, o.canvas = i, o.context = o.canvas.getContext("2d"), o._resolution = ft.RESOLUTION, o._autoResolution = true, o._text = null, o._style = null, o._styleListener = null, o._font = "", o.text = r, o.style = n, o.localStyleID = -1, o;
    }
    return t.prototype.updateText = function(r) {
      var n = this._style;
      if (this.localStyleID !== n.styleID && (this.dirty = true, this.localStyleID = n.styleID), !(!this.dirty && r)) {
        this._font = this._style.toFontString();
        var i = this.context, o = Do.measureText(this._text || " ", this._style, this._style.wordWrap, this.canvas), a = o.width, s = o.height, l = o.lines, u = o.lineHeight, c = o.lineWidths, f = o.maxLineWidth, h = o.fontProperties;
        this.canvas.width = Math.ceil((Math.max(1, a) + n.padding * 2) * this._resolution), this.canvas.height = Math.ceil((Math.max(1, s) + n.padding * 2) * this._resolution), i.scale(this._resolution, this._resolution), i.clearRect(0, 0, this.canvas.width, this.canvas.height), i.font = this._font, i.lineWidth = n.strokeThickness, i.textBaseline = n.textBaseline, i.lineJoin = n.lineJoin, i.miterLimit = n.miterLimit;
        for (var d, p, m = n.dropShadow ? 2 : 1, g = 0; g < m; ++g) {
          var v = n.dropShadow && g === 0, _ = v ? Math.ceil(Math.max(1, s) + n.padding * 2) : 0, y = _ * this._resolution;
          if (v) {
            i.fillStyle = "black", i.strokeStyle = "black";
            var b = n.dropShadowColor, T = cu(typeof b == "number" ? b : dD(b)), E = n.dropShadowBlur * this._resolution, P = n.dropShadowDistance * this._resolution;
            i.shadowColor = "rgba(" + T[0] * 255 + "," + T[1] * 255 + "," + T[2] * 255 + "," + n.dropShadowAlpha + ")", i.shadowBlur = E, i.shadowOffsetX = Math.cos(n.dropShadowAngle) * P, i.shadowOffsetY = Math.sin(n.dropShadowAngle) * P + y;
          } else
            i.fillStyle = this._generateFillStyle(n, l, o), i.strokeStyle = n.stroke, i.shadowColor = "black", i.shadowBlur = 0, i.shadowOffsetX = 0, i.shadowOffsetY = 0;
          for (var A = 0; A < l.length; A++)
            d = n.strokeThickness / 2, p = n.strokeThickness / 2 + A * u + h.ascent, n.align === "right" ? d += f - c[A] : n.align === "center" && (d += (f - c[A]) / 2), n.stroke && n.strokeThickness && this.drawLetterSpacing(l[A], d + n.padding, p + n.padding - _, true), n.fill && this.drawLetterSpacing(l[A], d + n.padding, p + n.padding - _);
        }
        this.updateTexture();
      }
    }, t.prototype.drawLetterSpacing = function(r, n, i, o) {
      o === void 0 && (o = false);
      var a = this._style, s = a.letterSpacing;
      if (s === 0) {
        o ? this.context.strokeText(r, n, i) : this.context.fillText(r, n, i);
        return;
      }
      for (var l = n, u = Array.from ? Array.from(r) : r.split(""), c = this.context.measureText(r).width, f = 0, h = 0; h < u.length; ++h) {
        var d = u[h];
        o ? this.context.strokeText(d, l, i) : this.context.fillText(d, l, i), f = this.context.measureText(r.substring(h + 1)).width, l += c - f + s, c = f;
      }
    }, t.prototype.updateTexture = function() {
      var r = this.canvas;
      if (this._style.trim) {
        var n = YG(r);
        n.data && (r.width = n.width, r.height = n.height, this.context.putImageData(n.data, 0, 0));
      }
      var i = this._texture, o = this._style, a = o.trim ? 0 : o.padding, s = i.baseTexture;
      i.trim.width = i._frame.width = Math.ceil(r.width / this._resolution), i.trim.height = i._frame.height = Math.ceil(r.height / this._resolution), i.trim.x = -a, i.trim.y = -a, i.orig.width = i._frame.width - a * 2, i.orig.height = i._frame.height - a * 2, this._onTextureUpdate(), s.setRealSize(r.width, r.height, this._resolution), this._recursivePostUpdateTransform(), this.dirty = false;
    }, t.prototype._render = function(r) {
      this._autoResolution && this._resolution !== r.resolution && (this._resolution = r.resolution, this.dirty = true), this.updateText(true), e12.prototype._render.call(this, r);
    }, t.prototype.getLocalBounds = function(r) {
      return this.updateText(true), e12.prototype.getLocalBounds.call(this, r);
    }, t.prototype._calculateBounds = function() {
      this.updateText(true), this.calculateVertices(), this._bounds.addQuad(this.vertexData);
    }, t.prototype._generateFillStyle = function(r, n, i) {
      var o = r.fill;
      if (Array.isArray(o)) {
        if (o.length === 1)
          return o[0];
      } else
        return o;
      var a, s = r.dropShadow ? r.dropShadowDistance : 0, l = r.padding || 0, u = Math.ceil(this.canvas.width / this._resolution) - s - l * 2, c = Math.ceil(this.canvas.height / this._resolution) - s - l * 2, f = o.slice(), h = r.fillGradientStops.slice();
      if (!h.length)
        for (var d = f.length + 1, p = 1; p < d; ++p)
          h.push(p / d);
      if (f.unshift(o[0]), h.unshift(0), f.push(o[o.length - 1]), h.push(1), r.fillGradientType === td.LINEAR_VERTICAL) {
        a = this.context.createLinearGradient(u / 2, l, u / 2, c + l);
        for (var m = 0, g = i.fontProperties.fontSize + r.strokeThickness, v = g / c, p = 0; p < n.length; p++)
          for (var _ = i.lineHeight * p, y = 0; y < f.length; y++) {
            var b = 0;
            typeof h[y] == "number" ? b = h[y] : b = y / f.length;
            var T = _ / c + b * v, E = Math.max(m, T);
            E = Math.min(E, 1), a.addColorStop(E, f[y]), m = E;
          }
      } else {
        a = this.context.createLinearGradient(l, c / 2, u + l, c / 2);
        for (var P = f.length + 1, A = 1, p = 0; p < f.length; p++) {
          var I = void 0;
          typeof h[p] == "number" ? I = h[p] : I = A / P, a.addColorStop(I, f[p]), A++;
        }
      }
      return a;
    }, t.prototype.destroy = function(r) {
      typeof r == "boolean" && (r = { children: r }), r = Object.assign({}, Cne, r), e12.prototype.destroy.call(this, r), this._ownCanvas && (this.canvas.height = this.canvas.width = 0), this.context = null, this.canvas = null, this._style = null;
    }, Object.defineProperty(t.prototype, "width", {
      /**
       * The width of the Text, setting this will actually modify the scale to achieve the value set
       *
       * @member {number}
       */
      get: function() {
        return this.updateText(true), Math.abs(this.scale.x) * this._texture.orig.width;
      },
      set: function(r) {
        this.updateText(true);
        var n = jc(this.scale.x) || 1;
        this.scale.x = n * r / this._texture.orig.width, this._width = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "height", {
      /**
       * The height of the Text, setting this will actually modify the scale to achieve the value set
       *
       * @member {number}
       */
      get: function() {
        return this.updateText(true), Math.abs(this.scale.y) * this._texture.orig.height;
      },
      set: function(r) {
        this.updateText(true);
        var n = jc(this.scale.y) || 1;
        this.scale.y = n * r / this._texture.orig.height, this._height = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "style", {
      /**
       * Set the style of the text. Set up an event listener to listen for changes on the style
       * object and mark the text as dirty.
       *
       * @member {object|PIXI.TextStyle}
       */
      get: function() {
        return this._style;
      },
      set: function(r) {
        r = r || {}, r instanceof du ? this._style = r : this._style = new du(r), this.localStyleID = -1, this.dirty = true;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "text", {
      /**
       * Set the copy for the text object. To split a line you can use '\n'.
       *
       * @member {string}
       */
      get: function() {
        return this._text;
      },
      set: function(r) {
        r = String(r ?? ""), this._text !== r && (this._text = r, this.dirty = true);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "resolution", {
      /**
       * The resolution / device pixel ratio of the canvas.
       * This is set to automatically match the renderer resolution by default, but can be overridden by setting manually.
       * @member {number}
       * @default 1
       */
      get: function() {
        return this._resolution;
      },
      set: function(r) {
        this._autoResolution = false, this._resolution !== r && (this._resolution = r, this.dirty = true);
      },
      enumerable: false,
      configurable: true
    }), t;
  }(Zd)
);
ft.UPLOADS_PER_FRAME = 4;
var CI = function(e12, t) {
  return CI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, CI(e12, t);
};
function xne(e12, t) {
  CI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var h8 = (
  /** @class */
  function() {
    function e12(t) {
      this.maxItemsPerFrame = t, this.itemsLeft = 0;
    }
    return e12.prototype.beginFrame = function() {
      this.itemsLeft = this.maxItemsPerFrame;
    }, e12.prototype.allowedToUpload = function() {
      return this.itemsLeft-- > 0;
    }, e12;
  }()
);
function kne(e12, t) {
  var r = false;
  if (e12 && e12._textures && e12._textures.length) {
    for (var n = 0; n < e12._textures.length; n++)
      if (e12._textures[n] instanceof Pt) {
        var i = e12._textures[n].baseTexture;
        t.indexOf(i) === -1 && (t.push(i), r = true);
      }
  }
  return r;
}
function Dne(e12, t) {
  if (e12.baseTexture instanceof Nr) {
    var r = e12.baseTexture;
    return t.indexOf(r) === -1 && t.push(r), true;
  }
  return false;
}
function Rne(e12, t) {
  if (e12._texture && e12._texture instanceof Pt) {
    var r = e12._texture.baseTexture;
    return t.indexOf(r) === -1 && t.push(r), true;
  }
  return false;
}
function Nne(e12, t) {
  return t instanceof kD ? (t.updateText(true), true) : false;
}
function Mne(e12, t) {
  if (t instanceof du) {
    var r = t.toFontString();
    return Do.measureFont(r), true;
  }
  return false;
}
function Lne(e12, t) {
  if (e12 instanceof kD) {
    t.indexOf(e12.style) === -1 && t.push(e12.style), t.indexOf(e12) === -1 && t.push(e12);
    var r = e12._texture.baseTexture;
    return t.indexOf(r) === -1 && t.push(r), true;
  }
  return false;
}
function Bne(e12, t) {
  return e12 instanceof du ? (t.indexOf(e12) === -1 && t.push(e12), true) : false;
}
var f8 = (
  /** @class */
  function() {
    function e12(t) {
      var r = this;
      this.limiter = new h8(ft.UPLOADS_PER_FRAME), this.renderer = t, this.uploadHookHelper = null, this.queue = [], this.addHooks = [], this.uploadHooks = [], this.completes = [], this.ticking = false, this.delayedTick = function() {
        r.queue && r.prepareItems();
      }, this.registerFindHook(Lne), this.registerFindHook(Bne), this.registerFindHook(kne), this.registerFindHook(Dne), this.registerFindHook(Rne), this.registerUploadHook(Nne), this.registerUploadHook(Mne);
    }
    return e12.prototype.upload = function(t, r) {
      typeof t == "function" && (r = t, t = null), t && this.add(t), this.queue.length ? (r && this.completes.push(r), this.ticking || (this.ticking = true, On.system.addOnce(this.tick, this, ja.UTILITY))) : r && r();
    }, e12.prototype.tick = function() {
      setTimeout(this.delayedTick, 0);
    }, e12.prototype.prepareItems = function() {
      for (this.limiter.beginFrame(); this.queue.length && this.limiter.allowedToUpload(); ) {
        var t = this.queue[0], r = false;
        if (t && !t._destroyed) {
          for (var n = 0, i = this.uploadHooks.length; n < i; n++)
            if (this.uploadHooks[n](this.uploadHookHelper, t)) {
              this.queue.shift(), r = true;
              break;
            }
        }
        r || this.queue.shift();
      }
      if (this.queue.length)
        On.system.addOnce(this.tick, this, ja.UTILITY);
      else {
        this.ticking = false;
        var o = this.completes.slice(0);
        this.completes.length = 0;
        for (var n = 0, i = o.length; n < i; n++)
          o[n]();
      }
    }, e12.prototype.registerFindHook = function(t) {
      return t && this.addHooks.push(t), this;
    }, e12.prototype.registerUploadHook = function(t) {
      return t && this.uploadHooks.push(t), this;
    }, e12.prototype.add = function(t) {
      for (var r = 0, n = this.addHooks.length; r < n && !this.addHooks[r](t, this.queue); r++)
        ;
      if (t instanceof ra)
        for (var r = t.children.length - 1; r >= 0; r--)
          this.add(t.children[r]);
      return this;
    }, e12.prototype.destroy = function() {
      this.ticking && On.system.remove(this.tick, this), this.ticking = false, this.addHooks = null, this.uploadHooks = null, this.renderer = null, this.completes = null, this.queue = null, this.limiter = null, this.uploadHookHelper = null;
    }, e12;
  }()
);
function d8(e12, t) {
  return t instanceof Nr ? (t._glTextures[e12.CONTEXT_UID] || e12.texture.bind(t), true) : false;
}
function Fne(e12, t) {
  if (!(t instanceof xD))
    return false;
  var r = t.geometry;
  t.finishPoly(), r.updateBatches();
  for (var n = r.batches, i = 0; i < n.length; i++) {
    var o = n[i].style.texture;
    o && d8(e12, o.baseTexture);
  }
  return r.batchable || e12.geometry.bind(r, t._resolveDirectShader(e12)), true;
}
function $ne(e12, t) {
  return e12 instanceof xD ? (t.push(e12), true) : false;
}
var p8 = (
  /** @class */
  function(e12) {
    xne(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this;
      return n.uploadHookHelper = n.renderer, n.registerFindHook($ne), n.registerUploadHook(d8), n.registerUploadHook(Fne), n;
    }
    return t;
  }(f8)
);
var Hne = (
  /** @class */
  function() {
    function e12(t) {
      this.maxMilliseconds = t, this.frameStart = 0;
    }
    return e12.prototype.beginFrame = function() {
      this.frameStart = Date.now();
    }, e12.prototype.allowedToUpload = function() {
      return Date.now() - this.frameStart < this.maxMilliseconds;
    }, e12;
  }()
);
var m8 = (
  /** @class */
  function() {
    function e12(t, r, n) {
      n === void 0 && (n = null), this._texture = t instanceof Pt ? t : null, this.baseTexture = t instanceof Nr ? t : this._texture.baseTexture, this.textures = {}, this.animations = {}, this.data = r;
      var i = this.baseTexture.resource;
      this.resolution = this._updateResolution(n || (i ? i.url : null)), this._frames = this.data.frames, this._frameKeys = Object.keys(this._frames), this._batchIndex = 0, this._callback = null;
    }
    return e12.prototype._updateResolution = function(t) {
      t === void 0 && (t = null);
      var r = this.data.meta.scale, n = Vg(t, null);
      return n === null && (n = r !== void 0 ? parseFloat(r) : 1), n !== 1 && this.baseTexture.setResolution(n), n;
    }, e12.prototype.parse = function(t) {
      this._batchIndex = 0, this._callback = t, this._frameKeys.length <= e12.BATCH_SIZE ? (this._processFrames(0), this._processAnimations(), this._parseComplete()) : this._nextBatch();
    }, e12.prototype._processFrames = function(t) {
      for (var r = t, n = e12.BATCH_SIZE; r - t < n && r < this._frameKeys.length; ) {
        var i = this._frameKeys[r], o = this._frames[i], a = o.frame;
        if (a) {
          var s = null, l = null, u = o.trimmed !== false && o.sourceSize ? o.sourceSize : o.frame, c = new fr(0, 0, Math.floor(u.w) / this.resolution, Math.floor(u.h) / this.resolution);
          o.rotated ? s = new fr(Math.floor(a.x) / this.resolution, Math.floor(a.y) / this.resolution, Math.floor(a.h) / this.resolution, Math.floor(a.w) / this.resolution) : s = new fr(Math.floor(a.x) / this.resolution, Math.floor(a.y) / this.resolution, Math.floor(a.w) / this.resolution, Math.floor(a.h) / this.resolution), o.trimmed !== false && o.spriteSourceSize && (l = new fr(Math.floor(o.spriteSourceSize.x) / this.resolution, Math.floor(o.spriteSourceSize.y) / this.resolution, Math.floor(a.w) / this.resolution, Math.floor(a.h) / this.resolution)), this.textures[i] = new Pt(this.baseTexture, s, c, l, o.rotated ? 2 : 0, o.anchor), Pt.addToCache(this.textures[i], i);
        }
        r++;
      }
    }, e12.prototype._processAnimations = function() {
      var t = this.data.animations || {};
      for (var r in t) {
        this.animations[r] = [];
        for (var n = 0; n < t[r].length; n++) {
          var i = t[r][n];
          this.animations[r].push(this.textures[i]);
        }
      }
    }, e12.prototype._parseComplete = function() {
      var t = this._callback;
      this._callback = null, this._batchIndex = 0, t.call(this, this.textures);
    }, e12.prototype._nextBatch = function() {
      var t = this;
      this._processFrames(this._batchIndex * e12.BATCH_SIZE), this._batchIndex++, setTimeout(function() {
        t._batchIndex * e12.BATCH_SIZE < t._frameKeys.length ? t._nextBatch() : (t._processAnimations(), t._parseComplete());
      }, 0);
    }, e12.prototype.destroy = function(t) {
      var r;
      t === void 0 && (t = false);
      for (var n in this.textures)
        this.textures[n].destroy();
      this._frames = null, this._frameKeys = null, this.data = null, this.textures = null, t && ((r = this._texture) === null || r === void 0 || r.destroy(), this.baseTexture.destroy()), this._texture = null, this.baseTexture = null;
    }, e12.BATCH_SIZE = 1e3, e12;
  }()
);
var g8 = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.use = function(t, r) {
      var n = this, i = t.name + "_image";
      if (!t.data || t.type !== Km.TYPE.JSON || !t.data.frames || n.resources[i]) {
        r();
        return;
      }
      var o = {
        crossOrigin: t.crossOrigin,
        metadata: t.metadata.imageMetadata,
        parentResource: t
      }, a = e12.getResourcePath(t, n.baseUrl);
      n.add(i, a, o, function(l) {
        if (l.error) {
          r(l.error);
          return;
        }
        var u = new m8(l.texture, t.data, t.url);
        u.parse(function() {
          t.spritesheet = u, t.textures = u.textures, r();
        });
      });
    }, e12.getResourcePath = function(t, r) {
      return t.isDataUrl ? t.data.meta.image : Xu.resolve(t.url.replace(r, ""), t.data.meta.image);
    }, e12;
  }()
);
var xI = function(e12, t) {
  return xI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, xI(e12, t);
};
function v8(e12, t) {
  xI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var Hp = new In();
var Une = (
  /** @class */
  function(e12) {
    v8(t, e12);
    function t(r, n, i) {
      n === void 0 && (n = 100), i === void 0 && (i = 100);
      var o = e12.call(this, r) || this;
      return o.tileTransform = new vD(), o._width = n, o._height = i, o.uvMatrix = o.texture.uvMatrix || new $E(r), o.pluginName = "tilingSprite", o.uvRespectAnchor = false, o;
    }
    return Object.defineProperty(t.prototype, "clampMargin", {
      /**
       * Changes frame clamping in corresponding textureTransform, shortcut
       * Change to -0.5 to add a pixel to the edge, recommended for transparent trimmed textures in atlas
       *
       * @default 0.5
       * @member {number}
       */
      get: function() {
        return this.uvMatrix.clampMargin;
      },
      set: function(r) {
        this.uvMatrix.clampMargin = r, this.uvMatrix.update(true);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "tileScale", {
      /**
       * The scaling of the image that is being tiled
       *
       * @member {PIXI.ObservablePoint}
       */
      get: function() {
        return this.tileTransform.scale;
      },
      set: function(r) {
        this.tileTransform.scale.copyFrom(r);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "tilePosition", {
      /**
       * The offset of the image that is being tiled
       *
       * @member {PIXI.ObservablePoint}
       */
      get: function() {
        return this.tileTransform.position;
      },
      set: function(r) {
        this.tileTransform.position.copyFrom(r);
      },
      enumerable: false,
      configurable: true
    }), t.prototype._onTextureUpdate = function() {
      this.uvMatrix && (this.uvMatrix.texture = this._texture), this._cachedTint = 16777215;
    }, t.prototype._render = function(r) {
      var n = this._texture;
      !n || !n.valid || (this.tileTransform.updateLocalTransform(), this.uvMatrix.update(), r.batch.setObjectRenderer(r.plugins[this.pluginName]), r.plugins[this.pluginName].render(this));
    }, t.prototype._calculateBounds = function() {
      var r = this._width * -this._anchor._x, n = this._height * -this._anchor._y, i = this._width * (1 - this._anchor._x), o = this._height * (1 - this._anchor._y);
      this._bounds.addFrame(this.transform, r, n, i, o);
    }, t.prototype.getLocalBounds = function(r) {
      return this.children.length === 0 ? (this._bounds.minX = this._width * -this._anchor._x, this._bounds.minY = this._height * -this._anchor._y, this._bounds.maxX = this._width * (1 - this._anchor._x), this._bounds.maxY = this._height * (1 - this._anchor._y), r || (this._localBoundsRect || (this._localBoundsRect = new fr()), r = this._localBoundsRect), this._bounds.getRectangle(r)) : e12.prototype.getLocalBounds.call(this, r);
    }, t.prototype.containsPoint = function(r) {
      this.worldTransform.applyInverse(r, Hp);
      var n = this._width, i = this._height, o = -n * this.anchor._x;
      if (Hp.x >= o && Hp.x < o + n) {
        var a = -i * this.anchor._y;
        if (Hp.y >= a && Hp.y < a + i)
          return true;
      }
      return false;
    }, t.prototype.destroy = function(r) {
      e12.prototype.destroy.call(this, r), this.tileTransform = null, this.uvMatrix = null;
    }, t.from = function(r, n) {
      return typeof n == "number" && (ze("5.3.0", "TilingSprite.from use options instead of width and height args"), n = { width: n, height: arguments[2] }), new t(Pt.from(r, n), n.width, n.height);
    }, Object.defineProperty(t.prototype, "width", {
      /**
       * The width of the sprite, setting this will actually modify the scale to achieve the value set
       *
       * @member {number}
       */
      get: function() {
        return this._width;
      },
      set: function(r) {
        this._width = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "height", {
      /**
       * The height of the TilingSprite, setting this will actually modify the scale to achieve the value set
       *
       * @member {number}
       */
      get: function() {
        return this._height;
      },
      set: function(r) {
        this._height = r;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(Zd)
);
var j5 = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`;
var jne = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`;
var Gne = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;
var Qy = new sn();
var y8 = (
  /** @class */
  function(e12) {
    v8(t, e12);
    function t(r) {
      var n = e12.call(this, r) || this, i = { globals: n.renderer.globalUniforms };
      return n.shader = Kl.from(j5, jne, i), n.simpleShader = Kl.from(j5, Gne, i), n.quad = new AD(), n.state = ec.for2d(), n;
    }
    return t.prototype.render = function(r) {
      var n = this.renderer, i = this.quad, o = i.vertices;
      o[0] = o[6] = r._width * -r.anchor.x, o[1] = o[3] = r._height * -r.anchor.y, o[2] = o[4] = r._width * (1 - r.anchor.x), o[5] = o[7] = r._height * (1 - r.anchor.y), r.uvRespectAnchor && (o = i.uvs, o[0] = o[6] = -r.anchor.x, o[1] = o[3] = -r.anchor.y, o[2] = o[4] = 1 - r.anchor.x, o[5] = o[7] = 1 - r.anchor.y), i.invalidate();
      var a = r._texture, s = a.baseTexture, l = r.tileTransform.localTransform, u = r.uvMatrix, c = s.isPowerOfTwo && a.frame.width === s.width && a.frame.height === s.height;
      c && (s._glTextures[n.CONTEXT_UID] ? c = s.wrapMode !== Ps.CLAMP : s.wrapMode === Ps.CLAMP && (s.wrapMode = Ps.REPEAT));
      var f = c ? this.simpleShader : this.shader, h = a.width, d = a.height, p = r._width, m = r._height;
      Qy.set(l.a * h / p, l.b * h / m, l.c * d / p, l.d * d / m, l.tx / p, l.ty / m), Qy.invert(), c ? Qy.prepend(u.mapCoord) : (f.uniforms.uMapCoord = u.mapCoord.toArray(true), f.uniforms.uClampFrame = u.uClampFrame, f.uniforms.uClampOffset = u.uClampOffset), f.uniforms.uTransform = Qy.toArray(true), f.uniforms.uColor = gD(r.tint, r.worldAlpha, f.uniforms.uColor, s.alphaMode), f.uniforms.translationMatrix = r.transform.worldTransform.toArray(true), f.uniforms.uSampler = a, n.shader.bind(f), n.geometry.bind(i), this.state.blendMode = mD(r.blendMode, s.alphaMode), n.state.set(this.state), n.geometry.draw(this.renderer.gl.TRIANGLES, 6, 0);
    }, t;
  }(kv)
);
var kI = function(e12, t) {
  return kI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, kI(e12, t);
};
function DD(e12, t) {
  kI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var _8 = (
  /** @class */
  function() {
    function e12(t, r) {
      this.uvBuffer = t, this.uvMatrix = r, this.data = null, this._bufferUpdateId = -1, this._textureUpdateId = -1, this._updateID = 0;
    }
    return e12.prototype.update = function(t) {
      if (!(!t && this._bufferUpdateId === this.uvBuffer._updateID && this._textureUpdateId === this.uvMatrix._updateID)) {
        this._bufferUpdateId = this.uvBuffer._updateID, this._textureUpdateId = this.uvMatrix._updateID;
        var r = this.uvBuffer.data;
        (!this.data || this.data.length !== r.length) && (this.data = new Float32Array(r.length)), this.uvMatrix.multiplyUvs(r, this.data), this._updateID++;
      }
    }, e12;
  }()
);
var pw = new In();
var G5 = new Sf();
var rd = (
  /** @class */
  function(e12) {
    DD(t, e12);
    function t(r, n, i, o) {
      o === void 0 && (o = wo.TRIANGLES);
      var a = e12.call(this) || this;
      return a.geometry = r, r.refCount++, a.shader = n, a.state = i || ec.for2d(), a.drawMode = o, a.start = 0, a.size = 0, a.uvs = null, a.indices = null, a.vertexData = new Float32Array(1), a.vertexDirty = 0, a._transformID = -1, a._roundPixels = ft.ROUND_PIXELS, a.batchUvs = null, a;
    }
    return Object.defineProperty(t.prototype, "uvBuffer", {
      /**
       * To change mesh uv's, change its uvBuffer data and increment its _updateID.
       * @member {PIXI.Buffer}
       * @readonly
       */
      get: function() {
        return this.geometry.buffers[1];
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "verticesBuffer", {
      /**
       * To change mesh vertices, change its uvBuffer data and increment its _updateID.
       * Incrementing _updateID is optional because most of Mesh objects do it anyway.
       * @member {PIXI.Buffer}
       * @readonly
       */
      get: function() {
        return this.geometry.buffers[0];
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "material", {
      get: function() {
        return this.shader;
      },
      /**
       * Alias for {@link PIXI.Mesh#shader}.
       * @member {PIXI.MeshMaterial}
       */
      set: function(r) {
        this.shader = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "blendMode", {
      get: function() {
        return this.state.blendMode;
      },
      /**
       * The blend mode to be applied to the Mesh. Apply a value of
       * `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.
       *
       * @member {number}
       * @default PIXI.BLEND_MODES.NORMAL;
       * @see PIXI.BLEND_MODES
       */
      set: function(r) {
        this.state.blendMode = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "roundPixels", {
      get: function() {
        return this._roundPixels;
      },
      /**
       * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
       * Advantages can include sharper image quality (like text) and faster rendering on canvas.
       * The main disadvantage is movement of objects may appear less smooth.
       * To set the global default, change {@link PIXI.settings.ROUND_PIXELS}
       *
       * @member {boolean}
       * @default false
       */
      set: function(r) {
        this._roundPixels !== r && (this._transformID = -1), this._roundPixels = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "tint", {
      /**
       * The multiply tint applied to the Mesh. This is a hex value. A value of
       * `0xFFFFFF` will remove any tint effect.
       *
       * @member {number}
       * @default 0xFFFFFF
       */
      get: function() {
        return this.shader.tint;
      },
      set: function(r) {
        this.shader.tint = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "texture", {
      /**
       * The texture that the Mesh uses.
       *
       * @member {PIXI.Texture}
       */
      get: function() {
        return this.shader.texture;
      },
      set: function(r) {
        this.shader.texture = r;
      },
      enumerable: false,
      configurable: true
    }), t.prototype._render = function(r) {
      var n = this.geometry.buffers[0].data;
      this.shader.batchable && this.drawMode === wo.TRIANGLES && n.length < t.BATCHABLE_SIZE * 2 ? this._renderToBatch(r) : this._renderDefault(r);
    }, t.prototype._renderDefault = function(r) {
      var n = this.shader;
      n.alpha = this.worldAlpha, n.update && n.update(), r.batch.flush(), n.program.uniformData.translationMatrix && (n.uniforms.translationMatrix = this.transform.worldTransform.toArray(true)), r.shader.bind(n), r.state.set(this.state), r.geometry.bind(this.geometry, n), r.geometry.draw(this.drawMode, this.size, this.start, this.geometry.instanceCount);
    }, t.prototype._renderToBatch = function(r) {
      var n = this.geometry;
      this.shader.uvMatrix && (this.shader.uvMatrix.update(), this.calculateUvs()), this.calculateVertices(), this.indices = n.indexBuffer.data, this._tintRGB = this.shader._tintRGB, this._texture = this.shader.texture;
      var i = this.material.pluginName;
      r.batch.setObjectRenderer(r.plugins[i]), r.plugins[i].render(this);
    }, t.prototype.calculateVertices = function() {
      var r = this.geometry, n = r.buffers[0].data;
      if (!(r.vertexDirtyId === this.vertexDirty && this._transformID === this.transform._worldID)) {
        this._transformID = this.transform._worldID, this.vertexData.length !== n.length && (this.vertexData = new Float32Array(n.length));
        for (var i = this.transform.worldTransform, o = i.a, a = i.b, s = i.c, l = i.d, u = i.tx, c = i.ty, f = this.vertexData, h = 0; h < f.length / 2; h++) {
          var d = n[h * 2], p = n[h * 2 + 1];
          f[h * 2] = o * d + s * p + u, f[h * 2 + 1] = a * d + l * p + c;
        }
        if (this._roundPixels)
          for (var m = ft.RESOLUTION, h = 0; h < f.length; ++h)
            f[h] = Math.round((f[h] * m | 0) / m);
        this.vertexDirty = r.vertexDirtyId;
      }
    }, t.prototype.calculateUvs = function() {
      var r = this.geometry.buffers[1];
      this.shader.uvMatrix.isSimple ? this.uvs = r.data : (this.batchUvs || (this.batchUvs = new _8(r, this.shader.uvMatrix)), this.batchUvs.update(), this.uvs = this.batchUvs.data);
    }, t.prototype._calculateBounds = function() {
      this.calculateVertices(), this._bounds.addVertexData(this.vertexData, 0, this.vertexData.length);
    }, t.prototype.containsPoint = function(r) {
      if (!this.getBounds().contains(r.x, r.y))
        return false;
      this.worldTransform.applyInverse(r, pw);
      for (var n = this.geometry.getBuffer("aVertexPosition").data, i = G5.points, o = this.geometry.getIndex().data, a = o.length, s = this.drawMode === 4 ? 3 : 1, l = 0; l + 2 < a; l += s) {
        var u = o[l] * 2, c = o[l + 1] * 2, f = o[l + 2] * 2;
        if (i[0] = n[u], i[1] = n[u + 1], i[2] = n[c], i[3] = n[c + 1], i[4] = n[f], i[5] = n[f + 1], G5.contains(pw.x, pw.y))
          return true;
      }
      return false;
    }, t.prototype.destroy = function(r) {
      e12.prototype.destroy.call(this, r), this.geometry.refCount--, this.geometry.refCount === 0 && this.geometry.dispose(), this.geometry = null, this.shader = null, this.state = null, this.uvs = null, this.indices = null, this.vertexData = null;
    }, t.BATCHABLE_SIZE = 100, t;
  }(ra)
);
var zne = `varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`;
var Vne = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;
var Nv = (
  /** @class */
  function(e12) {
    DD(t, e12);
    function t(r, n) {
      var i = this, o = {
        uSampler: r,
        alpha: 1,
        uTextureMatrix: sn.IDENTITY,
        uColor: new Float32Array([1, 1, 1, 1])
      };
      return n = Object.assign({
        tint: 16777215,
        alpha: 1,
        pluginName: "batch"
      }, n), n.uniforms && Object.assign(o, n.uniforms), i = e12.call(this, n.program || Dv.from(Vne, zne), o) || this, i._colorDirty = false, i.uvMatrix = new $E(r), i.batchable = n.program === void 0, i.pluginName = n.pluginName, i.tint = n.tint, i.alpha = n.alpha, i;
    }
    return Object.defineProperty(t.prototype, "texture", {
      /**
       * Reference to the texture being rendered.
       * @member {PIXI.Texture}
       */
      get: function() {
        return this.uniforms.uSampler;
      },
      set: function(r) {
        this.uniforms.uSampler !== r && (this.uniforms.uSampler = r, this.uvMatrix.texture = r);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "alpha", {
      get: function() {
        return this._alpha;
      },
      /**
       * This gets automatically set by the object using this.
       *
       * @default 1
       * @member {number}
       */
      set: function(r) {
        r !== this._alpha && (this._alpha = r, this._colorDirty = true);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "tint", {
      get: function() {
        return this._tint;
      },
      /**
       * Multiply tint for the material.
       * @member {number}
       * @default 0xFFFFFF
       */
      set: function(r) {
        r !== this._tint && (this._tint = r, this._tintRGB = (r >> 16) + (r & 65280) + ((r & 255) << 16), this._colorDirty = true);
      },
      enumerable: false,
      configurable: true
    }), t.prototype.update = function() {
      if (this._colorDirty) {
        this._colorDirty = false;
        var r = this.texture.baseTexture;
        gD(this._tint, this._alpha, this.uniforms.uColor, r.alphaMode);
      }
      this.uvMatrix.update() && (this.uniforms.uTextureMatrix = this.uvMatrix.mapCoord);
    }, t;
  }(Kl)
);
var Mv = (
  /** @class */
  function(e12) {
    DD(t, e12);
    function t(r, n, i) {
      var o = e12.call(this) || this, a = new An(r), s = new An(n, true), l = new An(i, true, true);
      return o.addAttribute("aVertexPosition", a, 2, false, on.FLOAT).addAttribute("aTextureCoord", s, 2, false, on.FLOAT).addIndex(l), o._updateId = -1, o;
    }
    return Object.defineProperty(t.prototype, "vertexDirtyId", {
      /**
       * If the vertex position is updated.
       * @member {number}
       * @readonly
       * @private
       */
      get: function() {
        return this.buffers[0]._updateID;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(Kd)
);
var DI = function(e12, t) {
  return DI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, DI(e12, t);
};
function Xne(e12, t) {
  DI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var Wg = (
  /** @class */
  /* @__PURE__ */ function() {
    function e12() {
      this.info = [], this.common = [], this.page = [], this.char = [], this.kerning = [];
    }
    return e12;
  }()
);
var Wne = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.test = function(t) {
      return typeof t == "string" && t.indexOf("info face=") === 0;
    }, e12.parse = function(t) {
      var r = t.match(/^[a-z]+\s+.+$/gm), n = {
        info: [],
        common: [],
        page: [],
        char: [],
        chars: [],
        kerning: [],
        kernings: []
      };
      for (var i in r) {
        var o = r[i].match(/^[a-z]+/gm)[0], a = r[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm), s = {};
        for (var l in a) {
          var u = a[l].split("="), c = u[0], f = u[1].replace(/"/gm, ""), h = parseFloat(f), d = isNaN(h) ? f : h;
          s[c] = d;
        }
        n[o].push(s);
      }
      var p = new Wg();
      return n.info.forEach(function(m) {
        return p.info.push({
          face: m.face,
          size: parseInt(m.size, 10)
        });
      }), n.common.forEach(function(m) {
        return p.common.push({
          lineHeight: parseInt(m.lineHeight, 10)
        });
      }), n.page.forEach(function(m) {
        return p.page.push({
          id: parseInt(m.id, 10),
          file: m.file
        });
      }), n.char.forEach(function(m) {
        return p.char.push({
          id: parseInt(m.id, 10),
          page: parseInt(m.page, 10),
          x: parseInt(m.x, 10),
          y: parseInt(m.y, 10),
          width: parseInt(m.width, 10),
          height: parseInt(m.height, 10),
          xoffset: parseInt(m.xoffset, 10),
          yoffset: parseInt(m.yoffset, 10),
          xadvance: parseInt(m.xadvance, 10)
        });
      }), n.kerning.forEach(function(m) {
        return p.kerning.push({
          first: parseInt(m.first, 10),
          second: parseInt(m.second, 10),
          amount: parseInt(m.amount, 10)
        });
      }), p;
    }, e12;
  }()
);
var RI = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.test = function(t) {
      return t instanceof XMLDocument && t.getElementsByTagName("page").length && t.getElementsByTagName("info")[0].getAttribute("face") !== null;
    }, e12.parse = function(t) {
      for (var r = new Wg(), n = t.getElementsByTagName("info"), i = t.getElementsByTagName("common"), o = t.getElementsByTagName("page"), a = t.getElementsByTagName("char"), s = t.getElementsByTagName("kerning"), l = 0; l < n.length; l++)
        r.info.push({
          face: n[l].getAttribute("face"),
          size: parseInt(n[l].getAttribute("size"), 10)
        });
      for (var l = 0; l < i.length; l++)
        r.common.push({
          lineHeight: parseInt(i[l].getAttribute("lineHeight"), 10)
        });
      for (var l = 0; l < o.length; l++)
        r.page.push({
          id: parseInt(o[l].getAttribute("id"), 10) || 0,
          file: o[l].getAttribute("file")
        });
      for (var l = 0; l < a.length; l++) {
        var u = a[l];
        r.char.push({
          id: parseInt(u.getAttribute("id"), 10),
          page: parseInt(u.getAttribute("page"), 10) || 0,
          x: parseInt(u.getAttribute("x"), 10),
          y: parseInt(u.getAttribute("y"), 10),
          width: parseInt(u.getAttribute("width"), 10),
          height: parseInt(u.getAttribute("height"), 10),
          xoffset: parseInt(u.getAttribute("xoffset"), 10),
          yoffset: parseInt(u.getAttribute("yoffset"), 10),
          xadvance: parseInt(u.getAttribute("xadvance"), 10)
        });
      }
      for (var l = 0; l < s.length; l++)
        r.kerning.push({
          first: parseInt(s[l].getAttribute("first"), 10),
          second: parseInt(s[l].getAttribute("second"), 10),
          amount: parseInt(s[l].getAttribute("amount"), 10)
        });
      return r;
    }, e12;
  }()
);
var Yne = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.test = function(t) {
      if (typeof t == "string" && t.indexOf("<font>") > -1) {
        var r = new self.DOMParser().parseFromString(t, "text/xml");
        return RI.test(r);
      }
      return false;
    }, e12.parse = function(t) {
      var r = new window.DOMParser().parseFromString(t, "text/xml");
      return RI.parse(r);
    }, e12;
  }()
);
var mw = [
  Wne,
  RI,
  Yne
];
function b8(e12) {
  for (var t = 0; t < mw.length; t++)
    if (mw[t].test(e12))
      return mw[t];
  return null;
}
function qne(e12, t, r, n, i, o) {
  var a = r.fill;
  if (Array.isArray(a)) {
    if (a.length === 1)
      return a[0];
  } else
    return a;
  var s, l = r.dropShadow ? r.dropShadowDistance : 0, u = r.padding || 0, c = Math.ceil(e12.width / n) - l - u * 2, f = Math.ceil(e12.height / n) - l - u * 2, h = a.slice(), d = r.fillGradientStops.slice();
  if (!d.length)
    for (var p = h.length + 1, m = 1; m < p; ++m)
      d.push(m / p);
  if (h.unshift(a[0]), d.unshift(0), h.push(a[a.length - 1]), d.push(1), r.fillGradientType === td.LINEAR_VERTICAL) {
    s = t.createLinearGradient(c / 2, u, c / 2, f + u);
    for (var g = 0, v = o.fontProperties.fontSize + r.strokeThickness, _ = v / f, m = 0; m < i.length; m++)
      for (var y = o.lineHeight * m, b = 0; b < h.length; b++) {
        var T = 0;
        typeof d[b] == "number" ? T = d[b] : T = b / h.length;
        var E = y / f + T * _, P = Math.max(g, E);
        P = Math.min(P, 1), s.addColorStop(P, h[b]), g = P;
      }
  } else {
    s = t.createLinearGradient(u, f / 2, c + u, f / 2);
    for (var A = h.length + 1, I = 1, m = 0; m < h.length; m++) {
      var x = void 0;
      typeof d[m] == "number" ? x = d[m] : x = I / A, s.addColorStop(x, h[m]), I++;
    }
  }
  return s;
}
function Kne(e12, t, r, n, i, o, a) {
  var s = r.text, l = r.fontProperties;
  t.translate(n, i), t.scale(o, o);
  var u = a.strokeThickness / 2, c = -(a.strokeThickness / 2);
  if (t.font = a.toFontString(), t.lineWidth = a.strokeThickness, t.textBaseline = a.textBaseline, t.lineJoin = a.lineJoin, t.miterLimit = a.miterLimit, t.fillStyle = qne(e12, t, a, o, [s], r), t.strokeStyle = a.stroke, a.dropShadow) {
    var f = a.dropShadowColor, h = cu(typeof f == "number" ? f : dD(f)), d = a.dropShadowBlur * o, p = a.dropShadowDistance * o;
    t.shadowColor = "rgba(" + h[0] * 255 + "," + h[1] * 255 + "," + h[2] * 255 + "," + a.dropShadowAlpha + ")", t.shadowBlur = d, t.shadowOffsetX = Math.cos(a.dropShadowAngle) * p, t.shadowOffsetY = Math.sin(a.dropShadowAngle) * p;
  } else
    t.shadowColor = "black", t.shadowBlur = 0, t.shadowOffsetX = 0, t.shadowOffsetY = 0;
  a.stroke && a.strokeThickness && t.strokeText(s, u, c + r.lineHeight - l.descent), a.fill && t.fillText(s, u, c + r.lineHeight - l.descent), t.setTransform(1, 0, 0, 1, 0, 0), t.fillStyle = "rgba(0, 0, 0, 0)";
}
function Zne(e12) {
  typeof e12 == "string" && (e12 = [e12]);
  for (var t = [], r = 0, n = e12.length; r < n; r++) {
    var i = e12[r];
    if (Array.isArray(i)) {
      if (i.length !== 2)
        throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got " + i.length + ".");
      var o = i[0].charCodeAt(0), a = i[1].charCodeAt(0);
      if (a < o)
        throw new Error("[BitmapFont]: Invalid character range.");
      for (var s = o, l = a; s <= l; s++)
        t.push(String.fromCharCode(s));
    } else
      t.push.apply(t, i.split(""));
  }
  if (t.length === 0)
    throw new Error("[BitmapFont]: Empty set when resolving characters.");
  return t;
}
var El = (
  /** @class */
  function() {
    function e12(t, r, n) {
      var i = t.info[0], o = t.common[0], a = t.page[0], s = Vg(a.file), l = {};
      this._ownsTextures = n, this.font = i.face, this.size = i.size, this.lineHeight = o.lineHeight / s, this.chars = {}, this.pageTextures = l;
      for (var u = 0; u < t.page.length; u++) {
        var c = t.page[u], f = c.id, h = c.file;
        l[f] = r instanceof Array ? r[u] : r[h];
      }
      for (var u = 0; u < t.char.length; u++) {
        var d = t.char[u], f = d.id, p = d.page, m = t.char[u], g = m.x, v = m.y, _ = m.width, y = m.height, b = m.xoffset, T = m.yoffset, E = m.xadvance;
        g /= s, v /= s, _ /= s, y /= s, b /= s, T /= s, E /= s;
        var P = new fr(g + l[p].frame.x / s, v + l[p].frame.y / s, _, y);
        this.chars[f] = {
          xOffset: b,
          yOffset: T,
          xAdvance: E,
          kerning: {},
          texture: new Pt(l[p].baseTexture, P),
          page: p
        };
      }
      for (var u = 0; u < t.kerning.length; u++) {
        var A = t.kerning[u], I = A.first, x = A.second, S = A.amount;
        I /= s, x /= s, S /= s, this.chars[x] && (this.chars[x].kerning[I] = S);
      }
    }
    return e12.prototype.destroy = function() {
      for (var t in this.chars)
        this.chars[t].texture.destroy(), this.chars[t].texture = null;
      for (var t in this.pageTextures)
        this._ownsTextures && this.pageTextures[t].destroy(true), this.pageTextures[t] = null;
      this.chars = null, this.pageTextures = null;
    }, e12.install = function(t, r, n) {
      var i;
      if (t instanceof Wg)
        i = t;
      else {
        var o = b8(t);
        if (!o)
          throw new Error("Unrecognized data format for font.");
        i = o.parse(t);
      }
      r instanceof Pt && (r = [r]);
      var a = new e12(i, r, n);
      return e12.available[a.font] = a, a;
    }, e12.uninstall = function(t) {
      var r = e12.available[t];
      if (!r)
        throw new Error("No font found named '" + t + "'");
      r.destroy(), delete e12.available[t];
    }, e12.from = function(t, r, n) {
      if (!t)
        throw new Error("[BitmapFont] Property `name` is required.");
      var i = Object.assign({}, e12.defaultOptions, n), o = i.chars, a = i.padding, s = i.resolution, l = i.textureWidth, u = i.textureHeight, c = Zne(o), f = r instanceof du ? r : new du(r), h = l, d = new Wg();
      d.info[0] = {
        face: f.fontFamily,
        size: f.fontSize
      }, d.common[0] = {
        lineHeight: f.fontSize
      };
      for (var p = 0, m = 0, g, v, _, y = 0, b = [], T = 0; T < c.length; T++) {
        g || (g = document.createElement("canvas"), g.width = l, g.height = u, v = g.getContext("2d"), _ = new Nr(g, { resolution: s }), b.push(new Pt(_)), d.page.push({
          id: b.length - 1,
          file: ""
        }));
        var E = Do.measureText(c[T], f, false, g), P = E.width, A = Math.ceil(E.height), I = Math.ceil((f.fontStyle === "italic" ? 2 : 1) * P);
        if (m >= u - A * s) {
          if (m === 0)
            throw new Error("[BitmapFont] textureHeight " + u + "px is " + ("too small for " + f.fontSize + "px fonts"));
          --T, g = null, v = null, _ = null, m = 0, p = 0, y = 0;
          continue;
        }
        if (y = Math.max(A + E.fontProperties.descent, y), I * s + p >= h) {
          --T, m += y * s, m = Math.ceil(m), p = 0, y = 0;
          continue;
        }
        Kne(g, v, E, p, m, s, f);
        var x = E.text.charCodeAt(0);
        d.char.push({
          id: x,
          page: b.length - 1,
          x: p / s,
          y: m / s,
          width: I,
          height: A,
          xoffset: 0,
          yoffset: 0,
          xadvance: Math.ceil(P - (f.dropShadow ? f.dropShadowDistance : 0) - (f.stroke ? f.strokeThickness : 0))
        }), p += (I + 2 * a) * s, p = Math.ceil(p);
      }
      var S = new e12(d, b, true);
      return e12.available[t] !== void 0 && e12.uninstall(t), e12.available[t] = S, S;
    }, e12.ALPHA = [["a", "z"], ["A", "Z"], " "], e12.NUMERIC = [["0", "9"]], e12.ALPHANUMERIC = [["a", "z"], ["A", "Z"], ["0", "9"], " "], e12.ASCII = [[" ", "~"]], e12.defaultOptions = {
      resolution: 1,
      textureWidth: 512,
      textureHeight: 512,
      padding: 4,
      chars: e12.ALPHANUMERIC
    }, e12.available = {}, e12;
  }()
);
var z5 = [];
var V5 = [];
var Qne = (
  /** @class */
  function(e12) {
    Xne(t, e12);
    function t(r, n) {
      n === void 0 && (n = {});
      var i = e12.call(this) || this;
      i._tint = 16777215, n.font && (ze("5.3.0", "PIXI.BitmapText constructor style.font property is deprecated."), i._upgradeStyle(n));
      var o = Object.assign({}, t.styleDefaults, n), a = o.align, s = o.tint, l = o.maxWidth, u = o.letterSpacing, c = o.fontName, f = o.fontSize;
      if (!El.available[c])
        throw new Error('Missing BitmapFont "' + c + '"');
      return i._activePagesMeshData = [], i._textWidth = 0, i._textHeight = 0, i._align = a, i._tint = s, i._fontName = c, i._fontSize = f || El.available[c].size, i._text = r, i._maxWidth = l, i._maxLineHeight = 0, i._letterSpacing = u, i._anchor = new Gc(function() {
        i.dirty = true;
      }, i, 0, 0), i._roundPixels = ft.ROUND_PIXELS, i.dirty = true, i._textureCache = {}, i;
    }
    return t.prototype.updateText = function() {
      for (var r, n = El.available[this._fontName], i = this._fontSize / n.size, o = new In(), a = [], s = [], l = this._text.replace(/(?:\r\n|\r)/g, `
`) || " ", u = l.length, c = this._maxWidth * n.size / this._fontSize, f = null, h = 0, d = 0, p = 0, m = -1, g = 0, v = 0, _ = 0, y = 0; y < u; y++) {
        var b = l.charCodeAt(y), T = l.charAt(y);
        if (/(?:\s)/.test(T) && (m = y, g = h), T === "\r" || T === `
`) {
          s.push(h), d = Math.max(d, h), ++p, ++v, o.x = 0, o.y += n.lineHeight, f = null;
          continue;
        }
        var E = n.chars[b];
        if (E) {
          f && E.kerning[f] && (o.x += E.kerning[f]);
          var P = V5.pop() || {
            texture: Pt.EMPTY,
            line: 0,
            charCode: 0,
            position: new In()
          };
          P.texture = E.texture, P.line = p, P.charCode = b, P.position.x = o.x + E.xOffset + this._letterSpacing / 2, P.position.y = o.y + E.yOffset, a.push(P), o.x += E.xAdvance + this._letterSpacing, h = o.x, _ = Math.max(_, E.yOffset + E.texture.height), f = b, m !== -1 && c > 0 && o.x > c && (++v, Jc(a, 1 + m - v, 1 + y - m), y = m, m = -1, s.push(g), d = Math.max(d, g), p++, o.x = 0, o.y += n.lineHeight, f = null);
        }
      }
      var A = l.charAt(l.length - 1);
      A !== "\r" && A !== `
` && (/(?:\s)/.test(A) && (h = g), s.push(h), d = Math.max(d, h));
      for (var I = [], y = 0; y <= p; y++) {
        var x = 0;
        this._align === "right" ? x = d - s[y] : this._align === "center" && (x = (d - s[y]) / 2), I.push(x);
      }
      for (var S = a.length, N = {}, B = [], w = this._activePagesMeshData, y = 0; y < w.length; y++)
        z5.push(w[y]);
      for (var y = 0; y < S; y++) {
        var R = a[y].texture, F = R.baseTexture.uid;
        if (!N[F]) {
          var $ = z5.pop();
          if (!$) {
            var K = new Mv(), se = new Nv(Pt.EMPTY), J = new rd(K, se);
            $ = {
              index: 0,
              indexCount: 0,
              vertexCount: 0,
              uvsCount: 0,
              total: 0,
              mesh: J,
              vertices: null,
              uvs: null,
              indices: null
            };
          }
          $.index = 0, $.indexCount = 0, $.vertexCount = 0, $.uvsCount = 0, $.total = 0;
          var me = this._textureCache;
          me[F] = me[F] || new Pt(R.baseTexture), $.mesh.texture = me[F], $.mesh.tint = this._tint, B.push($), N[F] = $;
        }
        N[F].total++;
      }
      for (var y = 0; y < w.length; y++)
        B.indexOf(w[y]) === -1 && this.removeChild(w[y].mesh);
      for (var y = 0; y < B.length; y++)
        B[y].mesh.parent !== this && this.addChild(B[y].mesh);
      this._activePagesMeshData = B;
      for (var y in N) {
        var $ = N[y], ae = $.total;
        if (!(((r = $.indices) === null || r === void 0 ? void 0 : r.length) > 6 * ae) || $.vertices.length < rd.BATCHABLE_SIZE * 2)
          $.vertices = new Float32Array(4 * 2 * ae), $.uvs = new Float32Array(4 * 2 * ae), $.indices = new Uint16Array(6 * ae);
        else
          for (var Y = $.total, Q = $.vertices, le = Y * 4 * 2; le < Q.length; le++)
            Q[le] = 0;
        $.mesh.size = 6 * ae;
      }
      for (var y = 0; y < S; y++) {
        var T = a[y], Se = T.position.x + I[T.line];
        this._roundPixels && (Se = Math.round(Se));
        var Pe = Se * i, Re = T.position.y * i, R = T.texture, we = N[R.baseTexture.uid], Ne = R.frame, Me = R._uvs, Ie = we.index++;
        we.indices[Ie * 6 + 0] = 0 + Ie * 4, we.indices[Ie * 6 + 1] = 1 + Ie * 4, we.indices[Ie * 6 + 2] = 2 + Ie * 4, we.indices[Ie * 6 + 3] = 0 + Ie * 4, we.indices[Ie * 6 + 4] = 2 + Ie * 4, we.indices[Ie * 6 + 5] = 3 + Ie * 4, we.vertices[Ie * 8 + 0] = Pe, we.vertices[Ie * 8 + 1] = Re, we.vertices[Ie * 8 + 2] = Pe + Ne.width * i, we.vertices[Ie * 8 + 3] = Re, we.vertices[Ie * 8 + 4] = Pe + Ne.width * i, we.vertices[Ie * 8 + 5] = Re + Ne.height * i, we.vertices[Ie * 8 + 6] = Pe, we.vertices[Ie * 8 + 7] = Re + Ne.height * i, we.uvs[Ie * 8 + 0] = Me.x0, we.uvs[Ie * 8 + 1] = Me.y0, we.uvs[Ie * 8 + 2] = Me.x1, we.uvs[Ie * 8 + 3] = Me.y1, we.uvs[Ie * 8 + 4] = Me.x2, we.uvs[Ie * 8 + 5] = Me.y2, we.uvs[Ie * 8 + 6] = Me.x3, we.uvs[Ie * 8 + 7] = Me.y3;
      }
      this._textWidth = d * i, this._textHeight = (o.y + n.lineHeight) * i;
      for (var y in N) {
        var $ = N[y];
        if (this.anchor.x !== 0 || this.anchor.y !== 0)
          for (var Ge = 0, je = this._textWidth * this.anchor.x, ot = this._textHeight * this.anchor.y, at = 0; at < $.total; at++)
            $.vertices[Ge++] -= je, $.vertices[Ge++] -= ot, $.vertices[Ge++] -= je, $.vertices[Ge++] -= ot, $.vertices[Ge++] -= je, $.vertices[Ge++] -= ot, $.vertices[Ge++] -= je, $.vertices[Ge++] -= ot;
        this._maxLineHeight = _ * i;
        var Qe = $.mesh.geometry.getBuffer("aVertexPosition"), bt = $.mesh.geometry.getBuffer("aTextureCoord"), Et = $.mesh.geometry.getIndex();
        Qe.data = $.vertices, bt.data = $.uvs, Et.data = $.indices, Qe.update(), bt.update(), Et.update();
      }
      for (var y = 0; y < a.length; y++)
        V5.push(a[y]);
    }, t.prototype.updateTransform = function() {
      this.validate(), this.containerUpdateTransform();
    }, t.prototype.getLocalBounds = function() {
      return this.validate(), e12.prototype.getLocalBounds.call(this);
    }, t.prototype.validate = function() {
      this.dirty && (this.updateText(), this.dirty = false);
    }, Object.defineProperty(t.prototype, "tint", {
      /**
       * The tint of the BitmapText object.
       *
       * @member {number}
       * @default 0xffffff
       */
      get: function() {
        return this._tint;
      },
      set: function(r) {
        if (this._tint !== r) {
          this._tint = r;
          for (var n = 0; n < this._activePagesMeshData.length; n++)
            this._activePagesMeshData[n].mesh.tint = r;
        }
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "align", {
      /**
       * The alignment of the BitmapText object.
       *
       * @member {string}
       * @default 'left'
       */
      get: function() {
        return this._align;
      },
      set: function(r) {
        this._align !== r && (this._align = r, this.dirty = true);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "fontName", {
      /**
       * The name of the BitmapFont.
       *
       * @member {string}
       */
      get: function() {
        return this._fontName;
      },
      set: function(r) {
        if (!El.available[r])
          throw new Error('Missing BitmapFont "' + r + '"');
        this._fontName !== r && (this._fontName = r, this.dirty = true);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "fontSize", {
      /**
       * The size of the font to display.
       *
       * @member {number}
       */
      get: function() {
        return this._fontSize;
      },
      set: function(r) {
        this._fontSize !== r && (this._fontSize = r, this.dirty = true);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "anchor", {
      /**
       * The anchor sets the origin point of the text.
       *
       * The default is `(0,0)`, this means the text's origin is the top left.
       *
       * Setting the anchor to `(0.5,0.5)` means the text's origin is centered.
       *
       * Setting the anchor to `(1,1)` would mean the text's origin point will be the bottom right corner.
       *
       * @member {PIXI.Point | number}
       */
      get: function() {
        return this._anchor;
      },
      set: function(r) {
        typeof r == "number" ? this._anchor.set(r) : this._anchor.copyFrom(r);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "text", {
      /**
       * The text of the BitmapText object.
       *
       * @member {string}
       */
      get: function() {
        return this._text;
      },
      set: function(r) {
        r = String(r ?? ""), this._text !== r && (this._text = r, this.dirty = true);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "maxWidth", {
      /**
       * The max width of this bitmap text in pixels. If the text provided is longer than the
       * value provided, line breaks will be automatically inserted in the last whitespace.
       * Disable by setting the value to 0.
       *
       * @member {number}
       */
      get: function() {
        return this._maxWidth;
      },
      set: function(r) {
        this._maxWidth !== r && (this._maxWidth = r, this.dirty = true);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "maxLineHeight", {
      /**
       * The max line height. This is useful when trying to use the total height of the Text,
       * i.e. when trying to vertically align.
       *
       * @member {number}
       * @readonly
       */
      get: function() {
        return this.validate(), this._maxLineHeight;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "textWidth", {
      /**
       * The width of the overall text, different from fontSize,
       * which is defined in the style object.
       *
       * @member {number}
       * @readonly
       */
      get: function() {
        return this.validate(), this._textWidth;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "letterSpacing", {
      /**
       * Additional space between characters.
       *
       * @member {number}
       */
      get: function() {
        return this._letterSpacing;
      },
      set: function(r) {
        this._letterSpacing !== r && (this._letterSpacing = r, this.dirty = true);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "roundPixels", {
      /**
       * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
       * Advantages can include sharper image quality (like text) and faster rendering on canvas.
       * The main disadvantage is movement of objects may appear less smooth.
       * To set the global default, change {@link PIXI.settings.ROUND_PIXELS}
       *
       * @member {boolean}
       * @default PIXI.settings.ROUND_PIXELS
       */
      get: function() {
        return this._roundPixels;
      },
      set: function(r) {
        r !== this._roundPixels && (this._roundPixels = r, this.dirty = true);
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "textHeight", {
      /**
       * The height of the overall text, different from fontSize,
       * which is defined in the style object.
       *
       * @member {number}
       * @readonly
       */
      get: function() {
        return this.validate(), this._textHeight;
      },
      enumerable: false,
      configurable: true
    }), t.prototype._upgradeStyle = function(r) {
      if (typeof r.font == "string") {
        var n = r.font.split(" ");
        r.fontName = n.length === 1 ? n[0] : n.slice(1).join(" "), n.length >= 2 && (r.fontSize = parseInt(n[0], 10));
      } else
        r.fontName = r.font.name, r.fontSize = typeof r.font.size == "number" ? r.font.size : parseInt(r.font.size, 10);
    }, t.prototype.destroy = function(r) {
      var n = this._textureCache;
      for (var i in n) {
        var o = n[i];
        o.destroy(), delete n[i];
      }
      this._textureCache = null, e12.prototype.destroy.call(this, r);
    }, t.registerFont = function(r, n) {
      return ze("5.3.0", "PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"), El.install(r, n);
    }, Object.defineProperty(t, "fonts", {
      /**
       * Get the list of installed fonts.
       *
       * @see PIXI.BitmapFont.available
       * @deprecated since 5.3.0
       * @static
       * @readonly
       * @member {Object.<string, PIXI.BitmapFont>}
       */
      get: function() {
        return ze("5.3.0", "PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"), El.available;
      },
      enumerable: false,
      configurable: true
    }), t.styleDefaults = {
      align: "left",
      tint: 16777215,
      maxWidth: 0,
      letterSpacing: 0
    }, t;
  }(ra)
);
var T8 = (
  /** @class */
  function() {
    function e12() {
    }
    return e12.add = function() {
      Km.setExtensionXhrType("fnt", Km.XHR_RESPONSE_TYPE.TEXT);
    }, e12.use = function(t, r) {
      var n = b8(t.data);
      if (!n) {
        r();
        return;
      }
      for (var i = e12.getBaseUrl(this, t), o = n.parse(t.data), a = {}, s = function(m) {
        a[m.metadata.pageFile] = m.texture, Object.keys(a).length === o.page.length && (t.bitmapFont = El.install(o, a, true), r());
      }, l = 0; l < o.page.length; ++l) {
        var u = o.page[l].file, c = i + u, f = false;
        for (var h in this.resources) {
          var d = this.resources[h];
          if (d.url === c) {
            d.metadata.pageFile = u, d.texture ? s(d) : d.onAfterMiddleware.add(s), f = true;
            break;
          }
        }
        if (!f) {
          var p = {
            crossOrigin: t.crossOrigin,
            loadType: Km.LOAD_TYPE.IMAGE,
            metadata: Object.assign({ pageFile: u }, t.metadata.imageMetadata),
            parentResource: t
          };
          this.add(c, p, s);
        }
      }
    }, e12.getBaseUrl = function(t, r) {
      var n = r.isDataUrl ? "" : e12.dirname(r.url);
      return r.isDataUrl && (n === "." && (n = ""), t.baseUrl && n && t.baseUrl.charAt(t.baseUrl.length - 1) === "/" && (n += "/")), n = n.replace(t.baseUrl, ""), n && n.charAt(n.length - 1) !== "/" && (n += "/"), n;
    }, e12.dirname = function(t) {
      var r = t.replace(/\\/g, "/").replace(/\/$/, "").replace(/\/[^\/]*$/, "");
      return r === t ? "." : r === "" ? "/" : r;
    }, e12;
  }()
);
var NI = function(e12, t) {
  return NI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, NI(e12, t);
};
function Jne(e12, t) {
  NI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var eie = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;
var tie = (
  /** @class */
  function(e12) {
    Jne(t, e12);
    function t(r) {
      r === void 0 && (r = 1);
      var n = e12.call(this, zz, eie, { uAlpha: 1 }) || this;
      return n.alpha = r, n;
    }
    return Object.defineProperty(t.prototype, "alpha", {
      /**
       * Coefficient for alpha multiplication
       *
       * @member {number}
       * @default 1
       */
      get: function() {
        return this.uniforms.uAlpha;
      },
      set: function(r) {
        this.uniforms.uAlpha = r;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(js)
);
var MI = function(e12, t) {
  return MI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, MI(e12, t);
};
function E8(e12, t) {
  MI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var rie = `
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;
function nie(e12, t) {
  var r = Math.ceil(e12 / 2), n = rie, i = "", o;
  t ? o = "vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);" : o = "vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";
  for (var a = 0; a < e12; a++) {
    var s = o.replace("%index%", a.toString());
    s = s.replace("%sampleIndex%", a - (r - 1) + ".0"), i += s, i += `
`;
  }
  return n = n.replace("%blur%", i), n = n.replace("%size%", e12.toString()), n;
}
var iie = {
  5: [0.153388, 0.221461, 0.250301],
  7: [0.071303, 0.131514, 0.189879, 0.214607],
  9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],
  11: [93e-4, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],
  13: [2406e-6, 9255e-6, 0.027867, 0.065666, 0.121117, 0.174868, 0.197641],
  15: [489e-6, 2403e-6, 9246e-6, 0.02784, 0.065602, 0.120999, 0.174697, 0.197448]
};
var oie = [
  "varying vec2 vBlurTexCoords[%size%];",
  "uniform sampler2D uSampler;",
  "void main(void)",
  "{",
  "    gl_FragColor = vec4(0.0);",
  "    %blur%",
  "}"
].join(`
`);
function aie(e12) {
  for (var t = iie[e12], r = t.length, n = oie, i = "", o = "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;", a, s = 0; s < e12; s++) {
    var l = o.replace("%index%", s.toString());
    a = s, s >= r && (a = e12 - s - 1), l = l.replace("%value%", t[a].toString()), i += l, i += `
`;
  }
  return n = n.replace("%blur%", i), n = n.replace("%size%", e12.toString()), n;
}
var X5;
(function(e12) {
  e12[e12.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", e12[e12.WEBGL = 1] = "WEBGL", e12[e12.WEBGL2 = 2] = "WEBGL2";
})(X5 || (X5 = {}));
var W5;
(function(e12) {
  e12[e12.UNKNOWN = 0] = "UNKNOWN", e12[e12.WEBGL = 1] = "WEBGL", e12[e12.CANVAS = 2] = "CANVAS";
})(W5 || (W5 = {}));
var Y5;
(function(e12) {
  e12[e12.COLOR = 16384] = "COLOR", e12[e12.DEPTH = 256] = "DEPTH", e12[e12.STENCIL = 1024] = "STENCIL";
})(Y5 || (Y5 = {}));
var q5;
(function(e12) {
  e12[e12.NORMAL = 0] = "NORMAL", e12[e12.ADD = 1] = "ADD", e12[e12.MULTIPLY = 2] = "MULTIPLY", e12[e12.SCREEN = 3] = "SCREEN", e12[e12.OVERLAY = 4] = "OVERLAY", e12[e12.DARKEN = 5] = "DARKEN", e12[e12.LIGHTEN = 6] = "LIGHTEN", e12[e12.COLOR_DODGE = 7] = "COLOR_DODGE", e12[e12.COLOR_BURN = 8] = "COLOR_BURN", e12[e12.HARD_LIGHT = 9] = "HARD_LIGHT", e12[e12.SOFT_LIGHT = 10] = "SOFT_LIGHT", e12[e12.DIFFERENCE = 11] = "DIFFERENCE", e12[e12.EXCLUSION = 12] = "EXCLUSION", e12[e12.HUE = 13] = "HUE", e12[e12.SATURATION = 14] = "SATURATION", e12[e12.COLOR = 15] = "COLOR", e12[e12.LUMINOSITY = 16] = "LUMINOSITY", e12[e12.NORMAL_NPM = 17] = "NORMAL_NPM", e12[e12.ADD_NPM = 18] = "ADD_NPM", e12[e12.SCREEN_NPM = 19] = "SCREEN_NPM", e12[e12.NONE = 20] = "NONE", e12[e12.SRC_OVER = 0] = "SRC_OVER", e12[e12.SRC_IN = 21] = "SRC_IN", e12[e12.SRC_OUT = 22] = "SRC_OUT", e12[e12.SRC_ATOP = 23] = "SRC_ATOP", e12[e12.DST_OVER = 24] = "DST_OVER", e12[e12.DST_IN = 25] = "DST_IN", e12[e12.DST_OUT = 26] = "DST_OUT", e12[e12.DST_ATOP = 27] = "DST_ATOP", e12[e12.ERASE = 26] = "ERASE", e12[e12.SUBTRACT = 28] = "SUBTRACT", e12[e12.XOR = 29] = "XOR";
})(q5 || (q5 = {}));
var K5;
(function(e12) {
  e12[e12.POINTS = 0] = "POINTS", e12[e12.LINES = 1] = "LINES", e12[e12.LINE_LOOP = 2] = "LINE_LOOP", e12[e12.LINE_STRIP = 3] = "LINE_STRIP", e12[e12.TRIANGLES = 4] = "TRIANGLES", e12[e12.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", e12[e12.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(K5 || (K5 = {}));
var Z5;
(function(e12) {
  e12[e12.RGBA = 6408] = "RGBA", e12[e12.RGB = 6407] = "RGB", e12[e12.ALPHA = 6406] = "ALPHA", e12[e12.LUMINANCE = 6409] = "LUMINANCE", e12[e12.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", e12[e12.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", e12[e12.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(Z5 || (Z5 = {}));
var Q5;
(function(e12) {
  e12[e12.TEXTURE_2D = 3553] = "TEXTURE_2D", e12[e12.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", e12[e12.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", e12[e12.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", e12[e12.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", e12[e12.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", e12[e12.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", e12[e12.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", e12[e12.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(Q5 || (Q5 = {}));
var J5;
(function(e12) {
  e12[e12.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", e12[e12.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", e12[e12.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", e12[e12.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", e12[e12.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", e12[e12.FLOAT = 5126] = "FLOAT", e12[e12.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(J5 || (J5 = {}));
var eB;
(function(e12) {
  e12[e12.NEAREST = 0] = "NEAREST", e12[e12.LINEAR = 1] = "LINEAR";
})(eB || (eB = {}));
var tB;
(function(e12) {
  e12[e12.CLAMP = 33071] = "CLAMP", e12[e12.REPEAT = 10497] = "REPEAT", e12[e12.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(tB || (tB = {}));
var rB;
(function(e12) {
  e12[e12.OFF = 0] = "OFF", e12[e12.POW2 = 1] = "POW2", e12[e12.ON = 2] = "ON";
})(rB || (rB = {}));
var nB;
(function(e12) {
  e12[e12.NPM = 0] = "NPM", e12[e12.UNPACK = 1] = "UNPACK", e12[e12.PMA = 2] = "PMA", e12[e12.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", e12[e12.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", e12[e12.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA";
})(nB || (nB = {}));
var Yg;
(function(e12) {
  e12[e12.NO = 0] = "NO", e12[e12.YES = 1] = "YES", e12[e12.AUTO = 2] = "AUTO", e12[e12.BLEND = 0] = "BLEND", e12[e12.CLEAR = 1] = "CLEAR", e12[e12.BLIT = 2] = "BLIT";
})(Yg || (Yg = {}));
var iB;
(function(e12) {
  e12[e12.AUTO = 0] = "AUTO", e12[e12.MANUAL = 1] = "MANUAL";
})(iB || (iB = {}));
var oB;
(function(e12) {
  e12.LOW = "lowp", e12.MEDIUM = "mediump", e12.HIGH = "highp";
})(oB || (oB = {}));
var aB;
(function(e12) {
  e12[e12.NONE = 0] = "NONE", e12[e12.SCISSOR = 1] = "SCISSOR", e12[e12.STENCIL = 2] = "STENCIL", e12[e12.SPRITE = 3] = "SPRITE";
})(aB || (aB = {}));
var sB;
(function(e12) {
  e12[e12.NONE = 0] = "NONE", e12[e12.LOW = 2] = "LOW", e12[e12.MEDIUM = 4] = "MEDIUM", e12[e12.HIGH = 8] = "HIGH";
})(sB || (sB = {}));
var LI = (
  /** @class */
  function(e12) {
    E8(t, e12);
    function t(r, n, i, o, a) {
      n === void 0 && (n = 8), i === void 0 && (i = 4), o === void 0 && (o = ft.FILTER_RESOLUTION), a === void 0 && (a = 5);
      var s = this, l = nie(a, r), u = aie(a);
      return s = e12.call(
        this,
        // vertex shader
        l,
        // fragment shader
        u
      ) || this, s.horizontal = r, s.resolution = o, s._quality = 0, s.quality = i, s.blur = n, s;
    }
    return t.prototype.apply = function(r, n, i, o) {
      if (i ? this.horizontal ? this.uniforms.strength = 1 / i.width * (i.width / n.width) : this.uniforms.strength = 1 / i.height * (i.height / n.height) : this.horizontal ? this.uniforms.strength = 1 / r.renderer.width * (r.renderer.width / n.width) : this.uniforms.strength = 1 / r.renderer.height * (r.renderer.height / n.height), this.uniforms.strength *= this.strength, this.uniforms.strength /= this.passes, this.passes === 1)
        r.applyFilter(this, n, i, o);
      else {
        var a = r.getFilterTexture(), s = r.renderer, l = n, u = a;
        this.state.blend = false, r.applyFilter(this, l, u, Yg.CLEAR);
        for (var c = 1; c < this.passes - 1; c++) {
          r.bindAndClear(l, Yg.BLIT), this.uniforms.uSampler = u;
          var f = u;
          u = l, l = f, s.shader.bind(this), s.geometry.draw(5);
        }
        this.state.blend = true, r.applyFilter(this, u, i, o), r.returnFilterTexture(a);
      }
    }, Object.defineProperty(t.prototype, "blur", {
      /**
       * Sets the strength of both the blur.
       *
       * @member {number}
       * @default 16
       */
      get: function() {
        return this.strength;
      },
      set: function(r) {
        this.padding = 1 + Math.abs(r) * 2, this.strength = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "quality", {
      /**
       * Sets the quality of the blur by modifying the number of passes. More passes means higher
       * quaility bluring but the lower the performance.
       *
       * @member {number}
       * @default 4
       */
      get: function() {
        return this._quality;
      },
      set: function(r) {
        this._quality = r, this.passes = r;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(js)
);
var sie = (
  /** @class */
  function(e12) {
    E8(t, e12);
    function t(r, n, i, o) {
      r === void 0 && (r = 8), n === void 0 && (n = 4), i === void 0 && (i = ft.FILTER_RESOLUTION), o === void 0 && (o = 5);
      var a = e12.call(this) || this;
      return a.blurXFilter = new LI(true, r, n, i, o), a.blurYFilter = new LI(false, r, n, i, o), a.resolution = i, a.quality = n, a.blur = r, a.repeatEdgePixels = false, a;
    }
    return t.prototype.apply = function(r, n, i, o) {
      var a = Math.abs(this.blurXFilter.strength), s = Math.abs(this.blurYFilter.strength);
      if (a && s) {
        var l = r.getFilterTexture();
        this.blurXFilter.apply(r, n, l, Yg.CLEAR), this.blurYFilter.apply(r, l, i, o), r.returnFilterTexture(l);
      } else
        s ? this.blurYFilter.apply(r, n, i, o) : this.blurXFilter.apply(r, n, i, o);
    }, t.prototype.updatePadding = function() {
      this._repeatEdgePixels ? this.padding = 0 : this.padding = Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength)) * 2;
    }, Object.defineProperty(t.prototype, "blur", {
      /**
       * Sets the strength of both the blurX and blurY properties simultaneously
       *
       * @member {number}
       * @default 2
       */
      get: function() {
        return this.blurXFilter.blur;
      },
      set: function(r) {
        this.blurXFilter.blur = this.blurYFilter.blur = r, this.updatePadding();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "quality", {
      /**
       * Sets the number of passes for blur. More passes means higher quaility bluring.
       *
       * @member {number}
       * @default 1
       */
      get: function() {
        return this.blurXFilter.quality;
      },
      set: function(r) {
        this.blurXFilter.quality = this.blurYFilter.quality = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "blurX", {
      /**
       * Sets the strength of the blurX property
       *
       * @member {number}
       * @default 2
       */
      get: function() {
        return this.blurXFilter.blur;
      },
      set: function(r) {
        this.blurXFilter.blur = r, this.updatePadding();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "blurY", {
      /**
       * Sets the strength of the blurY property
       *
       * @member {number}
       * @default 2
       */
      get: function() {
        return this.blurYFilter.blur;
      },
      set: function(r) {
        this.blurYFilter.blur = r, this.updatePadding();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "blendMode", {
      /**
       * Sets the blendmode of the filter
       *
       * @member {number}
       * @default PIXI.BLEND_MODES.NORMAL
       */
      get: function() {
        return this.blurYFilter.blendMode;
      },
      set: function(r) {
        this.blurYFilter.blendMode = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "repeatEdgePixels", {
      /**
       * If set to true the edge of the target will be clamped
       *
       * @member {boolean}
       * @default false
       */
      get: function() {
        return this._repeatEdgePixels;
      },
      set: function(r) {
        this._repeatEdgePixels = r, this.updatePadding();
      },
      enumerable: false,
      configurable: true
    }), t;
  }(js)
);
var BI = function(e12, t) {
  return BI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, BI(e12, t);
};
function lie(e12, t) {
  BI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var cie = `varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;
var FI = (
  /** @class */
  function(e12) {
    lie(t, e12);
    function t() {
      var r = this, n = {
        m: new Float32Array([
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0
        ]),
        uAlpha: 1
      };
      return r = e12.call(this, OD, cie, n) || this, r.alpha = 1, r;
    }
    return t.prototype._loadMatrix = function(r, n) {
      n === void 0 && (n = false);
      var i = r;
      n && (this._multiply(i, this.uniforms.m, r), i = this._colorMatrix(i)), this.uniforms.m = i;
    }, t.prototype._multiply = function(r, n, i) {
      return r[0] = n[0] * i[0] + n[1] * i[5] + n[2] * i[10] + n[3] * i[15], r[1] = n[0] * i[1] + n[1] * i[6] + n[2] * i[11] + n[3] * i[16], r[2] = n[0] * i[2] + n[1] * i[7] + n[2] * i[12] + n[3] * i[17], r[3] = n[0] * i[3] + n[1] * i[8] + n[2] * i[13] + n[3] * i[18], r[4] = n[0] * i[4] + n[1] * i[9] + n[2] * i[14] + n[3] * i[19] + n[4], r[5] = n[5] * i[0] + n[6] * i[5] + n[7] * i[10] + n[8] * i[15], r[6] = n[5] * i[1] + n[6] * i[6] + n[7] * i[11] + n[8] * i[16], r[7] = n[5] * i[2] + n[6] * i[7] + n[7] * i[12] + n[8] * i[17], r[8] = n[5] * i[3] + n[6] * i[8] + n[7] * i[13] + n[8] * i[18], r[9] = n[5] * i[4] + n[6] * i[9] + n[7] * i[14] + n[8] * i[19] + n[9], r[10] = n[10] * i[0] + n[11] * i[5] + n[12] * i[10] + n[13] * i[15], r[11] = n[10] * i[1] + n[11] * i[6] + n[12] * i[11] + n[13] * i[16], r[12] = n[10] * i[2] + n[11] * i[7] + n[12] * i[12] + n[13] * i[17], r[13] = n[10] * i[3] + n[11] * i[8] + n[12] * i[13] + n[13] * i[18], r[14] = n[10] * i[4] + n[11] * i[9] + n[12] * i[14] + n[13] * i[19] + n[14], r[15] = n[15] * i[0] + n[16] * i[5] + n[17] * i[10] + n[18] * i[15], r[16] = n[15] * i[1] + n[16] * i[6] + n[17] * i[11] + n[18] * i[16], r[17] = n[15] * i[2] + n[16] * i[7] + n[17] * i[12] + n[18] * i[17], r[18] = n[15] * i[3] + n[16] * i[8] + n[17] * i[13] + n[18] * i[18], r[19] = n[15] * i[4] + n[16] * i[9] + n[17] * i[14] + n[18] * i[19] + n[19], r;
    }, t.prototype._colorMatrix = function(r) {
      var n = new Float32Array(r);
      return n[4] /= 255, n[9] /= 255, n[14] /= 255, n[19] /= 255, n;
    }, t.prototype.brightness = function(r, n) {
      var i = [
        r,
        0,
        0,
        0,
        0,
        0,
        r,
        0,
        0,
        0,
        0,
        0,
        r,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, n);
    }, t.prototype.greyscale = function(r, n) {
      var i = [
        r,
        r,
        r,
        0,
        0,
        r,
        r,
        r,
        0,
        0,
        r,
        r,
        r,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, n);
    }, t.prototype.blackAndWhite = function(r) {
      var n = [
        0.3,
        0.6,
        0.1,
        0,
        0,
        0.3,
        0.6,
        0.1,
        0,
        0,
        0.3,
        0.6,
        0.1,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, r);
    }, t.prototype.hue = function(r, n) {
      r = (r || 0) / 180 * Math.PI;
      var i = Math.cos(r), o = Math.sin(r), a = Math.sqrt, s = 1 / 3, l = a(s), u = i + (1 - i) * s, c = s * (1 - i) - l * o, f = s * (1 - i) + l * o, h = s * (1 - i) + l * o, d = i + s * (1 - i), p = s * (1 - i) - l * o, m = s * (1 - i) - l * o, g = s * (1 - i) + l * o, v = i + s * (1 - i), _ = [
        u,
        c,
        f,
        0,
        0,
        h,
        d,
        p,
        0,
        0,
        m,
        g,
        v,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(_, n);
    }, t.prototype.contrast = function(r, n) {
      var i = (r || 0) + 1, o = -0.5 * (i - 1), a = [
        i,
        0,
        0,
        0,
        o,
        0,
        i,
        0,
        0,
        o,
        0,
        0,
        i,
        0,
        o,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(a, n);
    }, t.prototype.saturate = function(r, n) {
      r === void 0 && (r = 0);
      var i = r * 2 / 3 + 1, o = (i - 1) * -0.5, a = [
        i,
        o,
        o,
        0,
        0,
        o,
        i,
        o,
        0,
        0,
        o,
        o,
        i,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(a, n);
    }, t.prototype.desaturate = function() {
      this.saturate(-1);
    }, t.prototype.negative = function(r) {
      var n = [
        -1,
        0,
        0,
        1,
        0,
        0,
        -1,
        0,
        1,
        0,
        0,
        0,
        -1,
        1,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, r);
    }, t.prototype.sepia = function(r) {
      var n = [
        0.393,
        0.7689999,
        0.18899999,
        0,
        0,
        0.349,
        0.6859999,
        0.16799999,
        0,
        0,
        0.272,
        0.5339999,
        0.13099999,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, r);
    }, t.prototype.technicolor = function(r) {
      var n = [
        1.9125277891456083,
        -0.8545344976951645,
        -0.09155508482755585,
        0,
        11.793603434377337,
        -0.3087833385928097,
        1.7658908555458428,
        -0.10601743074722245,
        0,
        -70.35205161461398,
        -0.231103377548616,
        -0.7501899197440212,
        1.847597816108189,
        0,
        30.950940869491138,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, r);
    }, t.prototype.polaroid = function(r) {
      var n = [
        1.438,
        -0.062,
        -0.062,
        0,
        0,
        -0.122,
        1.378,
        -0.122,
        0,
        0,
        -0.016,
        -0.016,
        1.483,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, r);
    }, t.prototype.toBGR = function(r) {
      var n = [
        0,
        0,
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, r);
    }, t.prototype.kodachrome = function(r) {
      var n = [
        1.1285582396593525,
        -0.3967382283601348,
        -0.03992559172921793,
        0,
        63.72958762196502,
        -0.16404339962244616,
        1.0835251566291304,
        -0.05498805115633132,
        0,
        24.732407896706203,
        -0.16786010706155763,
        -0.5603416277695248,
        1.6014850761964943,
        0,
        35.62982807460946,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, r);
    }, t.prototype.browni = function(r) {
      var n = [
        0.5997023498159715,
        0.34553243048391263,
        -0.2708298674538042,
        0,
        47.43192855600873,
        -0.037703249837783157,
        0.8609577587992641,
        0.15059552388459913,
        0,
        -36.96841498319127,
        0.24113635128153335,
        -0.07441037908422492,
        0.44972182064877153,
        0,
        -7.562075277591283,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, r);
    }, t.prototype.vintage = function(r) {
      var n = [
        0.6279345635605994,
        0.3202183420819367,
        -0.03965408211312453,
        0,
        9.651285835294123,
        0.02578397704808868,
        0.6441188644374771,
        0.03259127616149294,
        0,
        7.462829176470591,
        0.0466055556782719,
        -0.0851232987247891,
        0.5241648018700465,
        0,
        5.159190588235296,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, r);
    }, t.prototype.colorTone = function(r, n, i, o, a) {
      r = r || 0.2, n = n || 0.15, i = i || 16770432, o = o || 3375104;
      var s = (i >> 16 & 255) / 255, l = (i >> 8 & 255) / 255, u = (i & 255) / 255, c = (o >> 16 & 255) / 255, f = (o >> 8 & 255) / 255, h = (o & 255) / 255, d = [
        0.3,
        0.59,
        0.11,
        0,
        0,
        s,
        l,
        u,
        r,
        0,
        c,
        f,
        h,
        n,
        0,
        s - c,
        l - f,
        u - h,
        0,
        0
      ];
      this._loadMatrix(d, a);
    }, t.prototype.night = function(r, n) {
      r = r || 0.1;
      var i = [
        r * -2,
        -r,
        0,
        0,
        0,
        -r,
        0,
        r,
        0,
        0,
        0,
        r,
        r * 2,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, n);
    }, t.prototype.predator = function(r, n) {
      var i = [
        // row 1
        11.224130630493164 * r,
        -4.794486999511719 * r,
        -2.8746118545532227 * r,
        0 * r,
        0.40342438220977783 * r,
        // row 2
        -3.6330697536468506 * r,
        9.193157196044922 * r,
        -2.951810836791992 * r,
        0 * r,
        -1.316135048866272 * r,
        // row 3
        -3.2184197902679443 * r,
        -4.2375030517578125 * r,
        7.476448059082031 * r,
        0 * r,
        0.8044459223747253 * r,
        // row 4
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, n);
    }, t.prototype.lsd = function(r) {
      var n = [
        2,
        -0.4,
        0.5,
        0,
        0,
        -0.5,
        2,
        -0.4,
        0,
        0,
        -0.4,
        -0.5,
        3,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, r);
    }, t.prototype.reset = function() {
      var r = [
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(r, false);
    }, Object.defineProperty(t.prototype, "matrix", {
      /**
       * The matrix of the color matrix filter
       *
       * @member {number[]}
       * @default [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0]
       */
      get: function() {
        return this.uniforms.m;
      },
      set: function(r) {
        this.uniforms.m = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "alpha", {
      /**
       * The opacity value to use when mixing the original and resultant colors.
       *
       * When the value is 0, the original color is used without modification.
       * When the value is 1, the result color is used.
       * When in the range (0, 1) the color is interpolated between the original and result by this amount.
       *
       * @member {number}
       * @default 1
       */
      get: function() {
        return this.uniforms.uAlpha;
      },
      set: function(r) {
        this.uniforms.uAlpha = r;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(js)
);
FI.prototype.grayscale = FI.prototype.greyscale;
var $I = function(e12, t) {
  return $I = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, $I(e12, t);
};
function uie(e12, t) {
  $I(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var hie = `varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`;
var fie = `attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;
var die = (
  /** @class */
  function(e12) {
    uie(t, e12);
    function t(r, n) {
      var i = this, o = new sn();
      return r.renderable = false, i = e12.call(this, fie, hie, {
        mapSampler: r._texture,
        filterMatrix: o,
        scale: { x: 1, y: 1 },
        rotation: new Float32Array([1, 0, 0, 1])
      }) || this, i.maskSprite = r, i.maskMatrix = o, n == null && (n = 20), i.scale = new In(n, n), i;
    }
    return t.prototype.apply = function(r, n, i, o) {
      this.uniforms.filterMatrix = r.calculateSpriteMatrix(this.maskMatrix, this.maskSprite), this.uniforms.scale.x = this.scale.x, this.uniforms.scale.y = this.scale.y;
      var a = this.maskSprite.worldTransform, s = Math.sqrt(a.a * a.a + a.b * a.b), l = Math.sqrt(a.c * a.c + a.d * a.d);
      s !== 0 && l !== 0 && (this.uniforms.rotation[0] = a.a / s, this.uniforms.rotation[1] = a.b / s, this.uniforms.rotation[2] = a.c / l, this.uniforms.rotation[3] = a.d / l), r.applyFilter(this, n, i, o);
    }, Object.defineProperty(t.prototype, "map", {
      /**
       * The texture used for the displacement map. Must be power of 2 sized texture.
       *
       * @member {PIXI.Texture}
       */
      get: function() {
        return this.uniforms.mapSampler;
      },
      set: function(r) {
        this.uniforms.mapSampler = r;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(js)
);
var HI = function(e12, t) {
  return HI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, HI(e12, t);
};
function pie(e12, t) {
  HI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var mie = `
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputPixel;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;
var gie = `varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputPixel;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;
var vie = (
  /** @class */
  function(e12) {
    pie(t, e12);
    function t() {
      return e12.call(this, mie, gie) || this;
    }
    return t;
  }(js)
);
var UI = function(e12, t) {
  return UI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, UI(e12, t);
};
function yie(e12, t) {
  UI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var _ie = `precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;
var bie = (
  /** @class */
  function(e12) {
    yie(t, e12);
    function t(r, n) {
      r === void 0 && (r = 0.5), n === void 0 && (n = Math.random());
      var i = e12.call(this, OD, _ie, {
        uNoise: 0,
        uSeed: 0
      }) || this;
      return i.noise = r, i.seed = n, i;
    }
    return Object.defineProperty(t.prototype, "noise", {
      /**
       * The amount of noise to apply, this value should be in the range (0, 1].
       *
       * @member {number}
       * @default 0.5
       */
      get: function() {
        return this.uniforms.uNoise;
      },
      set: function(r) {
        this.uniforms.uNoise = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "seed", {
      /**
       * A seed value to apply to the random noise generation. `Math.random()` is a good value to use.
       *
       * @member {number}
       */
      get: function() {
        return this.uniforms.uSeed;
      },
      set: function(r) {
        this.uniforms.uSeed = r;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(js)
);
var S8 = new sn();
ln.prototype._cacheAsBitmap = false;
ln.prototype._cacheData = null;
var Tie = (
  /** @class */
  /* @__PURE__ */ function() {
    function e12() {
      this.textureCacheId = null, this.originalRender = null, this.originalRenderCanvas = null, this.originalCalculateBounds = null, this.originalGetLocalBounds = null, this.originalUpdateTransform = null, this.originalDestroy = null, this.originalMask = null, this.originalFilterArea = null, this.originalContainsPoint = null, this.sprite = null;
    }
    return e12;
  }()
);
Object.defineProperties(ln.prototype, {
  /**
   * Set this to true if you want this display object to be cached as a bitmap.
   * This basically takes a snap shot of the display object as it is at that moment. It can
   * provide a performance benefit for complex static displayObjects.
   * To remove simply set this property to `false`
   *
   * IMPORTANT GOTCHA - Make sure that all your textures are preloaded BEFORE setting this property to true
   * as it will take a snapshot of what is currently there. If the textures have not loaded then they will not appear.
   *
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   */
  cacheAsBitmap: {
    get: function() {
      return this._cacheAsBitmap;
    },
    set: function(e12) {
      if (this._cacheAsBitmap !== e12) {
        this._cacheAsBitmap = e12;
        var t;
        e12 ? (this._cacheData || (this._cacheData = new Tie()), t = this._cacheData, t.originalRender = this.render, t.originalRenderCanvas = this.renderCanvas, t.originalUpdateTransform = this.updateTransform, t.originalCalculateBounds = this.calculateBounds, t.originalGetLocalBounds = this.getLocalBounds, t.originalDestroy = this.destroy, t.originalContainsPoint = this.containsPoint, t.originalMask = this._mask, t.originalFilterArea = this.filterArea, this.render = this._renderCached, this.renderCanvas = this._renderCachedCanvas, this.destroy = this._cacheAsBitmapDestroy) : (t = this._cacheData, t.sprite && this._destroyCachedDisplayObject(), this.render = t.originalRender, this.renderCanvas = t.originalRenderCanvas, this.calculateBounds = t.originalCalculateBounds, this.getLocalBounds = t.originalGetLocalBounds, this.destroy = t.originalDestroy, this.updateTransform = t.originalUpdateTransform, this.containsPoint = t.originalContainsPoint, this._mask = t.originalMask, this.filterArea = t.originalFilterArea);
      }
    }
  }
});
ln.prototype._renderCached = function(t) {
  !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObject(t), this._cacheData.sprite.transform._worldID = this.transform._worldID, this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._render(t));
};
ln.prototype._initCachedDisplayObject = function(t) {
  if (!(this._cacheData && this._cacheData.sprite)) {
    var r = this.alpha;
    this.alpha = 1, t.batch.flush();
    var n = this.getLocalBounds(null, true).clone();
    if (this.filters) {
      var i = this.filters[0].padding;
      n.pad(i);
    }
    n.ceil(ft.RESOLUTION);
    var o = t.renderTexture.current, a = t.renderTexture.sourceFrame.clone(), s = t.renderTexture.destinationFrame.clone(), l = t.projection.transform, u = hu.create({ width: n.width, height: n.height }), c = "cacheAsBitmap_" + uu();
    this._cacheData.textureCacheId = c, Nr.addToCache(u.baseTexture, c), Pt.addToCache(u, c);
    var f = this.transform.localTransform.copyTo(S8).invert().translate(-n.x, -n.y);
    this.render = this._cacheData.originalRender, t.render(this, u, true, f, false), t.projection.transform = l, t.renderTexture.bind(o, a, s), this.render = this._renderCached, this.updateTransform = this.displayObjectUpdateTransform, this.calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._mask = null, this.filterArea = null;
    var h = new Zd(u);
    h.transform.worldTransform = this.transform.worldTransform, h.anchor.x = -(n.x / n.width), h.anchor.y = -(n.y / n.height), h.alpha = r, h._bounds = this._bounds, this._cacheData.sprite = h, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.enableTempParent(), this.updateTransform(), this.disableTempParent(null)), this.containsPoint = h.containsPoint.bind(h);
  }
};
ln.prototype._renderCachedCanvas = function(t) {
  !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObjectCanvas(t), this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._renderCanvas(t));
};
ln.prototype._initCachedDisplayObjectCanvas = function(t) {
  if (!(this._cacheData && this._cacheData.sprite)) {
    var r = this.getLocalBounds(null, true), n = this.alpha;
    this.alpha = 1;
    var i = t.context, o = t._projTransform;
    r.ceil(ft.RESOLUTION);
    var a = hu.create({ width: r.width, height: r.height }), s = "cacheAsBitmap_" + uu();
    this._cacheData.textureCacheId = s, Nr.addToCache(a.baseTexture, s), Pt.addToCache(a, s);
    var l = S8;
    this.transform.localTransform.copyTo(l), l.invert(), l.tx -= r.x, l.ty -= r.y, this.renderCanvas = this._cacheData.originalRenderCanvas, t.render(this, a, true, l, false), t.context = i, t._projTransform = o, this.renderCanvas = this._renderCachedCanvas, this.updateTransform = this.displayObjectUpdateTransform, this.calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._mask = null, this.filterArea = null;
    var u = new Zd(a);
    u.transform.worldTransform = this.transform.worldTransform, u.anchor.x = -(r.x / r.width), u.anchor.y = -(r.y / r.height), u.alpha = n, u._bounds = this._bounds, this._cacheData.sprite = u, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.parent = t._tempDisplayObjectParent, this.updateTransform(), this.parent = null), this.containsPoint = u.containsPoint.bind(u);
  }
};
ln.prototype._calculateCachedBounds = function() {
  this._bounds.clear(), this._cacheData.sprite.transform._worldID = this.transform._worldID, this._cacheData.sprite._calculateBounds(), this._bounds.updateID = this._boundsID;
};
ln.prototype._getCachedLocalBounds = function() {
  return this._cacheData.sprite.getLocalBounds(null);
};
ln.prototype._destroyCachedDisplayObject = function() {
  this._cacheData.sprite._texture.destroy(true), this._cacheData.sprite = null, Nr.removeFromCache(this._cacheData.textureCacheId), Pt.removeFromCache(this._cacheData.textureCacheId), this._cacheData.textureCacheId = null;
};
ln.prototype._cacheAsBitmapDestroy = function(t) {
  this.cacheAsBitmap = false, this.destroy(t);
};
ln.prototype.name = null;
ra.prototype.getChildByName = function(t, r) {
  for (var n = 0, i = this.children.length; n < i; n++)
    if (this.children[n].name === t)
      return this.children[n];
  if (r)
    for (var n = 0, i = this.children.length; n < i; n++) {
      var o = this.children[n];
      if (o.getChildByName) {
        var a = this.children[n].getChildByName(t, true);
        if (a)
          return a;
      }
    }
  return null;
};
ln.prototype.getGlobalPosition = function(t, r) {
  return t === void 0 && (t = new In()), r === void 0 && (r = false), this.parent ? this.parent.toGlobal(this.position, t, r) : (t.x = this.position.x, t.y = this.position.y), t;
};
var jI = function(e12, t) {
  return jI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, jI(e12, t);
};
function Qd(e12, t) {
  jI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var w8 = (
  /** @class */
  function(e12) {
    Qd(t, e12);
    function t(r, n, i, o) {
      r === void 0 && (r = 100), n === void 0 && (n = 100), i === void 0 && (i = 10), o === void 0 && (o = 10);
      var a = e12.call(this) || this;
      return a.segWidth = i, a.segHeight = o, a.width = r, a.height = n, a.build(), a;
    }
    return t.prototype.build = function() {
      for (var r = this.segWidth * this.segHeight, n = [], i = [], o = [], a = this.segWidth - 1, s = this.segHeight - 1, l = this.width / a, u = this.height / s, c = 0; c < r; c++) {
        var f = c % this.segWidth, h = c / this.segWidth | 0;
        n.push(f * l, h * u), i.push(f / a, h / s);
      }
      for (var d = a * s, c = 0; c < d; c++) {
        var p = c % a, m = c / a | 0, g = m * this.segWidth + p, v = m * this.segWidth + p + 1, _ = (m + 1) * this.segWidth + p, y = (m + 1) * this.segWidth + p + 1;
        o.push(g, v, _, v, y, _);
      }
      this.buffers[0].data = new Float32Array(n), this.buffers[1].data = new Float32Array(i), this.indexBuffer.data = new Uint16Array(o), this.buffers[0].update(), this.buffers[1].update(), this.indexBuffer.update();
    }, t;
  }(Mv)
);
var A8 = (
  /** @class */
  function(e12) {
    Qd(t, e12);
    function t(r, n, i) {
      r === void 0 && (r = 200), i === void 0 && (i = 0);
      var o = e12.call(this, new Float32Array(n.length * 4), new Float32Array(n.length * 4), new Uint16Array((n.length - 1) * 6)) || this;
      return o.points = n, o._width = r, o.textureScale = i, o.build(), o;
    }
    return Object.defineProperty(t.prototype, "width", {
      /**
       * The width (i.e., thickness) of the rope.
       * @member {number}
       * @readOnly
       */
      get: function() {
        return this._width;
      },
      enumerable: false,
      configurable: true
    }), t.prototype.build = function() {
      var r = this.points;
      if (r) {
        var n = this.getBuffer("aVertexPosition"), i = this.getBuffer("aTextureCoord"), o = this.getIndex();
        if (!(r.length < 1)) {
          n.data.length / 4 !== r.length && (n.data = new Float32Array(r.length * 4), i.data = new Float32Array(r.length * 4), o.data = new Uint16Array((r.length - 1) * 6));
          var a = i.data, s = o.data;
          a[0] = 0, a[1] = 0, a[2] = 0, a[3] = 1;
          for (var l = 0, u = r[0], c = this._width * this.textureScale, f = r.length, h = 0; h < f; h++) {
            var d = h * 4;
            if (this.textureScale > 0) {
              var p = u.x - r[h].x, m = u.y - r[h].y, g = Math.sqrt(p * p + m * m);
              u = r[h], l += g / c;
            } else
              l = h / (f - 1);
            a[d] = l, a[d + 1] = 0, a[d + 2] = l, a[d + 3] = 1;
          }
          for (var v = 0, h = 0; h < f - 1; h++) {
            var d = h * 2;
            s[v++] = d, s[v++] = d + 1, s[v++] = d + 2, s[v++] = d + 2, s[v++] = d + 1, s[v++] = d + 3;
          }
          i.update(), o.update(), this.updateVertices();
        }
      }
    }, t.prototype.updateVertices = function() {
      var r = this.points;
      if (!(r.length < 1)) {
        for (var n = r[0], i, o = 0, a = 0, s = this.buffers[0].data, l = r.length, u = 0; u < l; u++) {
          var c = r[u], f = u * 4;
          u < r.length - 1 ? i = r[u + 1] : i = c, a = -(i.x - n.x), o = i.y - n.y;
          var h = Math.sqrt(o * o + a * a), d = this.textureScale > 0 ? this.textureScale * this._width / 2 : this._width / 2;
          o /= h, a /= h, o *= d, a *= d, s[f] = c.x + o, s[f + 1] = c.y + a, s[f + 2] = c.x - o, s[f + 3] = c.y - a, n = c;
        }
        this.buffers[0].update();
      }
    }, t.prototype.update = function() {
      this.textureScale > 0 ? this.build() : this.updateVertices();
    }, t;
  }(Mv)
);
var Eie = (
  /** @class */
  function(e12) {
    Qd(t, e12);
    function t(r, n, i) {
      i === void 0 && (i = 0);
      var o = this, a = new A8(r.height, n, i), s = new Nv(r);
      return i > 0 && (r.baseTexture.wrapMode = Ps.REPEAT), o = e12.call(this, a, s) || this, o.autoUpdate = true, o;
    }
    return t.prototype._render = function(r) {
      var n = this.geometry;
      (this.autoUpdate || n._width !== this.shader.texture.height) && (n._width = this.shader.texture.height, n.update()), e12.prototype._render.call(this, r);
    }, t;
  }(rd)
);
var O8 = (
  /** @class */
  function(e12) {
    Qd(t, e12);
    function t(r, n, i) {
      var o = this, a = new w8(r.width, r.height, n, i), s = new Nv(Pt.WHITE);
      return o = e12.call(this, a, s) || this, o.texture = r, o;
    }
    return t.prototype.textureUpdated = function() {
      this._textureID = this.shader.texture._updateID;
      var r = this.geometry;
      r.width = this.shader.texture.width, r.height = this.shader.texture.height, r.build();
    }, Object.defineProperty(t.prototype, "texture", {
      get: function() {
        return this.shader.texture;
      },
      set: function(r) {
        this.shader.texture !== r && (this.shader.texture = r, this._textureID = -1, r.baseTexture.valid ? this.textureUpdated() : r.once("update", this.textureUpdated, this));
      },
      enumerable: false,
      configurable: true
    }), t.prototype._render = function(r) {
      this._textureID !== this.shader.texture._updateID && this.textureUpdated(), e12.prototype._render.call(this, r);
    }, t.prototype.destroy = function(r) {
      this.shader.texture.off("update", this.textureUpdated, this), e12.prototype.destroy.call(this, r);
    }, t;
  }(rd)
);
var Sie = (
  /** @class */
  function(e12) {
    Qd(t, e12);
    function t(r, n, i, o, a) {
      r === void 0 && (r = Pt.EMPTY);
      var s = this, l = new Mv(n, i, o);
      l.getBuffer("aVertexPosition").static = false;
      var u = new Nv(r);
      return s = e12.call(this, l, u, null, a) || this, s.autoUpdate = true, s;
    }
    return Object.defineProperty(t.prototype, "vertices", {
      /**
       * Collection of vertices data.
       * @member {Float32Array}
       */
      get: function() {
        return this.geometry.getBuffer("aVertexPosition").data;
      },
      set: function(r) {
        this.geometry.getBuffer("aVertexPosition").data = r;
      },
      enumerable: false,
      configurable: true
    }), t.prototype._render = function(r) {
      this.autoUpdate && this.geometry.getBuffer("aVertexPosition").update(), e12.prototype._render.call(this, r);
    }, t;
  }(rd)
);
var Jy = 10;
var wie = (
  /** @class */
  function(e12) {
    Qd(t, e12);
    function t(r, n, i, o, a) {
      n === void 0 && (n = Jy), i === void 0 && (i = Jy), o === void 0 && (o = Jy), a === void 0 && (a = Jy);
      var s = e12.call(this, Pt.WHITE, 4, 4) || this;
      return s._origWidth = r.orig.width, s._origHeight = r.orig.height, s._width = s._origWidth, s._height = s._origHeight, s._leftWidth = n, s._rightWidth = o, s._topHeight = i, s._bottomHeight = a, s.texture = r, s;
    }
    return t.prototype.textureUpdated = function() {
      this._textureID = this.shader.texture._updateID, this._refresh();
    }, Object.defineProperty(t.prototype, "vertices", {
      get: function() {
        return this.geometry.getBuffer("aVertexPosition").data;
      },
      set: function(r) {
        this.geometry.getBuffer("aVertexPosition").data = r;
      },
      enumerable: false,
      configurable: true
    }), t.prototype.updateHorizontalVertices = function() {
      var r = this.vertices, n = this._getMinScale();
      r[9] = r[11] = r[13] = r[15] = this._topHeight * n, r[17] = r[19] = r[21] = r[23] = this._height - this._bottomHeight * n, r[25] = r[27] = r[29] = r[31] = this._height;
    }, t.prototype.updateVerticalVertices = function() {
      var r = this.vertices, n = this._getMinScale();
      r[2] = r[10] = r[18] = r[26] = this._leftWidth * n, r[4] = r[12] = r[20] = r[28] = this._width - this._rightWidth * n, r[6] = r[14] = r[22] = r[30] = this._width;
    }, t.prototype._getMinScale = function() {
      var r = this._leftWidth + this._rightWidth, n = this._width > r ? 1 : this._width / r, i = this._topHeight + this._bottomHeight, o = this._height > i ? 1 : this._height / i, a = Math.min(n, o);
      return a;
    }, Object.defineProperty(t.prototype, "width", {
      /**
       * The width of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane
       *
       * @member {number}
       */
      get: function() {
        return this._width;
      },
      set: function(r) {
        this._width = r, this._refresh();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "height", {
      /**
       * The height of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane
       *
       * @member {number}
       */
      get: function() {
        return this._height;
      },
      set: function(r) {
        this._height = r, this._refresh();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "leftWidth", {
      /**
       * The width of the left column
       *
       * @member {number}
       */
      get: function() {
        return this._leftWidth;
      },
      set: function(r) {
        this._leftWidth = r, this._refresh();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "rightWidth", {
      /**
       * The width of the right column
       *
       * @member {number}
       */
      get: function() {
        return this._rightWidth;
      },
      set: function(r) {
        this._rightWidth = r, this._refresh();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "topHeight", {
      /**
       * The height of the top row
       *
       * @member {number}
       */
      get: function() {
        return this._topHeight;
      },
      set: function(r) {
        this._topHeight = r, this._refresh();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "bottomHeight", {
      /**
       * The height of the bottom row
       *
       * @member {number}
       */
      get: function() {
        return this._bottomHeight;
      },
      set: function(r) {
        this._bottomHeight = r, this._refresh();
      },
      enumerable: false,
      configurable: true
    }), t.prototype._refresh = function() {
      var r = this.texture, n = this.geometry.buffers[1].data;
      this._origWidth = r.orig.width, this._origHeight = r.orig.height;
      var i = 1 / this._origWidth, o = 1 / this._origHeight;
      n[0] = n[8] = n[16] = n[24] = 0, n[1] = n[3] = n[5] = n[7] = 0, n[6] = n[14] = n[22] = n[30] = 1, n[25] = n[27] = n[29] = n[31] = 1, n[2] = n[10] = n[18] = n[26] = i * this._leftWidth, n[4] = n[12] = n[20] = n[28] = 1 - i * this._rightWidth, n[9] = n[11] = n[13] = n[15] = o * this._topHeight, n[17] = n[19] = n[21] = n[23] = 1 - o * this._bottomHeight, this.updateHorizontalVertices(), this.updateVerticalVertices(), this.geometry.buffers[0].update(), this.geometry.buffers[1].update();
    }, t;
  }(O8)
);
var GI = function(e12, t) {
  return GI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, GI(e12, t);
};
function Aie(e12, t) {
  GI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var Oie = (
  /** @class */
  function(e12) {
    Aie(t, e12);
    function t(r, n) {
      n === void 0 && (n = true);
      var i = e12.call(this, r[0] instanceof Pt ? r[0] : r[0].texture) || this;
      return i._textures = null, i._durations = null, i._autoUpdate = n, i._isConnectedToTicker = false, i.animationSpeed = 1, i.loop = true, i.updateAnchor = false, i.onComplete = null, i.onFrameChange = null, i.onLoop = null, i._currentTime = 0, i._playing = false, i._previousFrame = null, i.textures = r, i;
    }
    return t.prototype.stop = function() {
      this._playing && (this._playing = false, this._autoUpdate && this._isConnectedToTicker && (On.shared.remove(this.update, this), this._isConnectedToTicker = false));
    }, t.prototype.play = function() {
      this._playing || (this._playing = true, this._autoUpdate && !this._isConnectedToTicker && (On.shared.add(this.update, this, ja.HIGH), this._isConnectedToTicker = true));
    }, t.prototype.gotoAndStop = function(r) {
      this.stop();
      var n = this.currentFrame;
      this._currentTime = r, n !== this.currentFrame && this.updateTexture();
    }, t.prototype.gotoAndPlay = function(r) {
      var n = this.currentFrame;
      this._currentTime = r, n !== this.currentFrame && this.updateTexture(), this.play();
    }, t.prototype.update = function(r) {
      if (this._playing) {
        var n = this.animationSpeed * r, i = this.currentFrame;
        if (this._durations !== null) {
          var o = this._currentTime % 1 * this._durations[this.currentFrame];
          for (o += n / 60 * 1e3; o < 0; )
            this._currentTime--, o += this._durations[this.currentFrame];
          var a = Math.sign(this.animationSpeed * r);
          for (this._currentTime = Math.floor(this._currentTime); o >= this._durations[this.currentFrame]; )
            o -= this._durations[this.currentFrame] * a, this._currentTime += a;
          this._currentTime += o / this._durations[this.currentFrame];
        } else
          this._currentTime += n;
        this._currentTime < 0 && !this.loop ? (this.gotoAndStop(0), this.onComplete && this.onComplete()) : this._currentTime >= this._textures.length && !this.loop ? (this.gotoAndStop(this._textures.length - 1), this.onComplete && this.onComplete()) : i !== this.currentFrame && (this.loop && this.onLoop && (this.animationSpeed > 0 && this.currentFrame < i ? this.onLoop() : this.animationSpeed < 0 && this.currentFrame > i && this.onLoop()), this.updateTexture());
      }
    }, t.prototype.updateTexture = function() {
      var r = this.currentFrame;
      this._previousFrame !== r && (this._previousFrame = r, this._texture = this._textures[r], this._textureID = -1, this._textureTrimmedID = -1, this._cachedTint = 16777215, this.uvs = this._texture._uvs.uvsFloat32, this.updateAnchor && this._anchor.copyFrom(this._texture.defaultAnchor), this.onFrameChange && this.onFrameChange(this.currentFrame));
    }, t.prototype.destroy = function(r) {
      this.stop(), e12.prototype.destroy.call(this, r), this.onComplete = null, this.onFrameChange = null, this.onLoop = null;
    }, t.fromFrames = function(r) {
      for (var n = [], i = 0; i < r.length; ++i)
        n.push(Pt.from(r[i]));
      return new t(n);
    }, t.fromImages = function(r) {
      for (var n = [], i = 0; i < r.length; ++i)
        n.push(Pt.from(r[i]));
      return new t(n);
    }, Object.defineProperty(t.prototype, "totalFrames", {
      /**
       * The total number of frames in the AnimatedSprite. This is the same as number of textures
       * assigned to the AnimatedSprite.
       *
       * @readonly
       * @member {number}
       * @default 0
       */
      get: function() {
        return this._textures.length;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "textures", {
      /**
       * The array of textures used for this AnimatedSprite.
       *
       * @member {PIXI.Texture[]|PIXI.AnimatedSprite.FrameObject[]}
       */
      get: function() {
        return this._textures;
      },
      set: function(r) {
        if (r[0] instanceof Pt)
          this._textures = r, this._durations = null;
        else {
          this._textures = [], this._durations = [];
          for (var n = 0; n < r.length; n++)
            this._textures.push(r[n].texture), this._durations.push(r[n].time);
        }
        this._previousFrame = null, this.gotoAndStop(0), this.updateTexture();
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "currentFrame", {
      /**
      * The AnimatedSprites current frame index.
      *
      * @member {number}
      * @readonly
      */
      get: function() {
        var r = Math.floor(this._currentTime) % this._textures.length;
        return r < 0 && (r += this._textures.length), r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "playing", {
      /**
       * Indicates if the AnimatedSprite is currently playing.
       *
       * @member {boolean}
       * @readonly
       */
      get: function() {
        return this._playing;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "autoUpdate", {
      /**
       * Whether to use PIXI.Ticker.shared to auto update animation time
       *
       * @member {boolean}
       */
      get: function() {
        return this._autoUpdate;
      },
      set: function(r) {
        r !== this._autoUpdate && (this._autoUpdate = r, !this._autoUpdate && this._isConnectedToTicker ? (On.shared.remove(this.update, this), this._isConnectedToTicker = false) : this._autoUpdate && !this._isConnectedToTicker && this._playing && (On.shared.add(this.update, this), this._isConnectedToTicker = true));
      },
      enumerable: false,
      configurable: true
    }), t;
  }(Zd)
);
var zI = function(e12, t) {
  return zI = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n)
      n.hasOwnProperty(i) && (r[i] = n[i]);
  }, zI(e12, t);
};
function lB(e12, t) {
  zI(e12, t);
  function r() {
    this.constructor = e12;
  }
  e12.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var Ze = "5.0.0";
function Iie() {
  var e12 = this;
  Object.defineProperties(e12, {
    /**
     * @constant {RegExp|string} SVG_SIZE
     * @memberof PIXI
     * @see PIXI.resources.SVGResource.SVG_SIZE
     * @deprecated since 5.0.0
     */
    SVG_SIZE: {
      get: function() {
        return ze(Ze, "PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"), e12.SVGResource.SVG_SIZE;
      }
    },
    /**
     * @class PIXI.TransformStatic
     * @deprecated since 5.0.0
     * @see PIXI.Transform
     */
    TransformStatic: {
      get: function() {
        return ze(Ze, "PIXI.TransformStatic class has been removed, use PIXI.Transform"), e12.Transform;
      }
    },
    /**
     * @class PIXI.TransformBase
     * @deprecated since 5.0.0
     * @see PIXI.Transform
     */
    TransformBase: {
      get: function() {
        return ze(Ze, "PIXI.TransformBase class has been removed, use PIXI.Transform"), e12.Transform;
      }
    },
    /**
     * Constants that specify the transform type.
     *
     * @static
     * @constant
     * @name TRANSFORM_MODE
     * @memberof PIXI
     * @enum {number}
     * @deprecated since 5.0.0
     * @property {number} STATIC
     * @property {number} DYNAMIC
     */
    TRANSFORM_MODE: {
      get: function() {
        return ze(Ze, "PIXI.TRANSFORM_MODE property has been removed"), { STATIC: 0, DYNAMIC: 1 };
      }
    },
    /**
     * @class PIXI.WebGLRenderer
     * @see PIXI.Renderer
     * @deprecated since 5.0.0
     */
    WebGLRenderer: {
      get: function() {
        return ze(Ze, "PIXI.WebGLRenderer class has moved to PIXI.Renderer"), e12.Renderer;
      }
    },
    /**
     * @class PIXI.CanvasRenderTarget
     * @see PIXI.utils.CanvasRenderTarget
     * @deprecated since 5.0.0
     */
    CanvasRenderTarget: {
      get: function() {
        return ze(Ze, "PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"), e12.utils.CanvasRenderTarget;
      }
    },
    /**
     * @memberof PIXI
     * @name loader
     * @type {PIXI.Loader}
     * @see PIXI.Loader.shared
     * @deprecated since 5.0.0
     */
    loader: {
      get: function() {
        return ze(Ze, "PIXI.loader instance has moved to PIXI.Loader.shared"), e12.Loader.shared;
      }
    },
    /**
     * @class PIXI.FilterManager
     * @see PIXI.systems.FilterSystem
     * @deprecated since 5.0.0
     */
    FilterManager: {
      get: function() {
        return ze(Ze, "PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"), e12.systems.FilterSystem;
      }
    },
    /**
     * @namespace PIXI.CanvasTinter
     * @see PIXI.canvasUtils
     * @deprecated since 5.2.0
     */
    CanvasTinter: {
      get: function() {
        return ze("5.2.0", "PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"), e12.canvasUtils;
      }
    },
    /**
     * @namespace PIXI.GroupD8
     * @see PIXI.groupD8
     * @deprecated since 5.2.0
     */
    GroupD8: {
      get: function() {
        return ze("5.2.0", "PIXI.GroupD8 namespace has moved to PIXI.groupD8"), e12.groupD8;
      }
    }
  }), e12.accessibility = {}, Object.defineProperties(e12.accessibility, {
    /**
     * @class PIXI.accessibility.AccessibilityManager
     * @deprecated since 5.3.0
     * @see PIXI.AccessibilityManager
     */
    AccessibilityManager: {
      get: function() {
        return ze("5.3.0", "PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"), e12.AccessibilityManager;
      }
    }
  }), e12.interaction = {}, Object.defineProperties(e12.interaction, {
    /**
     * @class PIXI.interaction.InteractionManager
     * @deprecated since 5.3.0
     * @see PIXI.InteractionManager
     */
    InteractionManager: {
      get: function() {
        return ze("5.3.0", "PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"), e12.InteractionManager;
      }
    },
    /**
     * @class PIXI.interaction.InteractionData
     * @deprecated since 5.3.0
     * @see PIXI.InteractionData
     */
    InteractionData: {
      get: function() {
        return ze("5.3.0", "PIXI.interaction.InteractionData moved to PIXI.InteractionData"), e12.InteractionData;
      }
    },
    /**
     * @class PIXI.interaction.InteractionEvent
     * @deprecated since 5.3.0
     * @see PIXI.InteractionEvent
     */
    InteractionEvent: {
      get: function() {
        return ze("5.3.0", "PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"), e12.InteractionEvent;
      }
    }
  }), e12.prepare = {}, Object.defineProperties(e12.prepare, {
    /**
     * @class PIXI.prepare.BasePrepare
     * @deprecated since 5.2.1
     * @see PIXI.BasePrepare
     */
    BasePrepare: {
      get: function() {
        return ze("5.2.1", "PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"), e12.BasePrepare;
      }
    },
    /**
     * @class PIXI.prepare.Prepare
     * @deprecated since 5.2.1
     * @see PIXI.Prepare
     */
    Prepare: {
      get: function() {
        return ze("5.2.1", "PIXI.prepare.Prepare moved to PIXI.Prepare"), e12.Prepare;
      }
    },
    /**
     * @class PIXI.prepare.CanvasPrepare
     * @deprecated since 5.2.1
     * @see PIXI.CanvasPrepare
     */
    CanvasPrepare: {
      get: function() {
        return ze("5.2.1", "PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"), e12.CanvasPrepare;
      }
    }
  }), e12.extract = {}, Object.defineProperties(e12.extract, {
    /**
     * @class PIXI.extract.Extract
     * @deprecated since 5.2.1
     * @see PIXI.Extract
     */
    Extract: {
      get: function() {
        return ze("5.2.1", "PIXI.extract.Extract moved to PIXI.Extract"), e12.Extract;
      }
    },
    /**
     * @class PIXI.extract.CanvasExtract
     * @deprecated since 5.2.1
     * @see PIXI.CanvasExtract
     */
    CanvasExtract: {
      get: function() {
        return ze("5.2.1", "PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"), e12.CanvasExtract;
      }
    }
  }), e12.extras = {}, Object.defineProperties(e12.extras, {
    /**
     * @class PIXI.extras.TilingSprite
     * @see PIXI.TilingSprite
     * @deprecated since 5.0.0
     */
    TilingSprite: {
      get: function() {
        return ze(Ze, "PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"), e12.TilingSprite;
      }
    },
    /**
     * @class PIXI.extras.TilingSpriteRenderer
     * @see PIXI.TilingSpriteRenderer
     * @deprecated since 5.0.0
     */
    TilingSpriteRenderer: {
      get: function() {
        return ze(Ze, "PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"), e12.TilingSpriteRenderer;
      }
    },
    /**
     * @class PIXI.extras.AnimatedSprite
     * @see PIXI.AnimatedSprite
     * @deprecated since 5.0.0
     */
    AnimatedSprite: {
      get: function() {
        return ze(Ze, "PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"), e12.AnimatedSprite;
      }
    },
    /**
     * @class PIXI.extras.BitmapText
     * @see PIXI.BitmapText
     * @deprecated since 5.0.0
     */
    BitmapText: {
      get: function() {
        return ze(Ze, "PIXI.extras.BitmapText class has moved to PIXI.BitmapText"), e12.BitmapText;
      }
    }
  }), e12.TilingSprite.fromFrame = function(h, d, p) {
    return ze("5.3.0", "TilingSprite.fromFrame is deprecated, use TilingSprite.from"), e12.TilingSprite.from(h, { width: d, height: p });
  }, e12.TilingSprite.fromImage = function(h, d, p, m) {
    return m === void 0 && (m = {}), ze("5.3.0", "TilingSprite.fromImage is deprecated, use TilingSprite.from"), m && typeof m != "object" && (m = {
      // eslint-disable-next-line prefer-rest-params
      scaleMode: arguments[4],
      resourceOptions: {
        // eslint-disable-next-line prefer-rest-params
        crossorigin: arguments[3]
      }
    }), m.width = d, m.height = p, e12.TilingSprite.from(h, m);
  }, Object.defineProperties(e12.utils, {
    /**
     * @function PIXI.utils.getSvgSize
     * @see PIXI.resources.SVGResource.getSize
     * @deprecated since 5.0.0
     */
    getSvgSize: {
      get: function() {
        return ze(Ze, "PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"), e12.resources.SVGResource.getSize;
      }
    }
  }), e12.mesh = {}, Object.defineProperties(e12.mesh, {
    /**
     * @class PIXI.mesh.Mesh
     * @see PIXI.SimpleMesh
     * @deprecated since 5.0.0
     */
    Mesh: {
      get: function() {
        return ze(Ze, "PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"), e12.SimpleMesh;
      }
    },
    /**
     * @class PIXI.mesh.NineSlicePlane
     * @see PIXI.NineSlicePlane
     * @deprecated since 5.0.0
     */
    NineSlicePlane: {
      get: function() {
        return ze(Ze, "PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"), e12.NineSlicePlane;
      }
    },
    /**
     * @class PIXI.mesh.Plane
     * @see PIXI.SimplePlane
     * @deprecated since 5.0.0
     */
    Plane: {
      get: function() {
        return ze(Ze, "PIXI.mesh.Plane class has moved to PIXI.SimplePlane"), e12.SimplePlane;
      }
    },
    /**
     * @class PIXI.mesh.Rope
     * @see PIXI.SimpleRope
     * @deprecated since 5.0.0
     */
    Rope: {
      get: function() {
        return ze(Ze, "PIXI.mesh.Rope class has moved to PIXI.SimpleRope"), e12.SimpleRope;
      }
    },
    /**
     * @class PIXI.mesh.RawMesh
     * @see PIXI.Mesh
     * @deprecated since 5.0.0
     */
    RawMesh: {
      get: function() {
        return ze(Ze, "PIXI.mesh.RawMesh class has moved to PIXI.Mesh"), e12.Mesh;
      }
    },
    /**
     * @class PIXI.mesh.CanvasMeshRenderer
     * @see PIXI.CanvasMeshRenderer
     * @deprecated since 5.0.0
     */
    CanvasMeshRenderer: {
      get: function() {
        return ze(Ze, "PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"), e12.CanvasMeshRenderer;
      }
    },
    /**
     * @class PIXI.mesh.MeshRenderer
     * @see PIXI.MeshRenderer
     * @deprecated since 5.0.0
     */
    MeshRenderer: {
      get: function() {
        return ze(Ze, "PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"), e12.MeshRenderer;
      }
    }
  }), e12.particles = {}, Object.defineProperties(e12.particles, {
    /**
     * @class PIXI.particles.ParticleContainer
     * @deprecated since 5.0.0
     * @see PIXI.ParticleContainer
     */
    ParticleContainer: {
      get: function() {
        return ze(Ze, "PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"), e12.ParticleContainer;
      }
    },
    /**
     * @class PIXI.particles.ParticleRenderer
     * @deprecated since 5.0.0
     * @see PIXI.ParticleRenderer
     */
    ParticleRenderer: {
      get: function() {
        return ze(Ze, "PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"), e12.ParticleRenderer;
      }
    }
  }), e12.ticker = {}, Object.defineProperties(e12.ticker, {
    /**
     * @class PIXI.ticker.Ticker
     * @deprecated since 5.0.0
     * @see PIXI.Ticker
     */
    Ticker: {
      get: function() {
        return ze(Ze, "PIXI.ticker.Ticker class has moved to PIXI.Ticker"), e12.Ticker;
      }
    },
    /**
     * @name PIXI.ticker.shared
     * @type {PIXI.Ticker}
     * @deprecated since 5.0.0
     * @see PIXI.Ticker.shared
     */
    shared: {
      get: function() {
        return ze(Ze, "PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"), e12.Ticker.shared;
      }
    }
  }), e12.loaders = {}, Object.defineProperties(e12.loaders, {
    /**
     * @class PIXI.loaders.Loader
     * @see PIXI.Loader
     * @deprecated since 5.0.0
     */
    Loader: {
      get: function() {
        return ze(Ze, "PIXI.loaders.Loader class has moved to PIXI.Loader"), e12.Loader;
      }
    },
    /**
     * @class PIXI.loaders.Resource
     * @see PIXI.LoaderResource
     * @deprecated since 5.0.0
     */
    Resource: {
      get: function() {
        return ze(Ze, "PIXI.loaders.Resource class has moved to PIXI.LoaderResource"), e12.LoaderResource;
      }
    },
    /**
     * @function PIXI.loaders.bitmapFontParser
     * @see PIXI.BitmapFontLoader.use
     * @deprecated since 5.0.0
     */
    bitmapFontParser: {
      get: function() {
        return ze(Ze, "PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"), e12.BitmapFontLoader.use;
      }
    },
    /**
     * @function PIXI.loaders.parseBitmapFontData
     * @deprecated since 5.0.0
     */
    parseBitmapFontData: {
      get: function() {
        ze(Ze, "PIXI.loaders.parseBitmapFontData function has removed");
      }
    },
    /**
     * @function PIXI.loaders.spritesheetParser
     * @see PIXI.SpritesheetLoader.use
     * @deprecated since 5.0.0
     */
    spritesheetParser: {
      get: function() {
        return ze(Ze, "PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"), e12.SpritesheetLoader.use;
      }
    },
    /**
     * @function PIXI.loaders.getResourcePath
     * @see PIXI.SpritesheetLoader.getResourcePath
     * @deprecated since 5.0.0
     */
    getResourcePath: {
      get: function() {
        return ze(Ze, "PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"), e12.SpritesheetLoader.getResourcePath;
      }
    }
  }), e12.Loader.addPixiMiddleware = function(h) {
    return ze(Ze, "PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"), e12.loaders.Loader.registerPlugin({ use: h() });
  };
  var t = function(f) {
    return "on" + f.charAt(0).toUpperCase() + f.slice(1);
  };
  Object.assign(e12.Loader.prototype, {
    /**
     * Use the corresponding signal, e.g., event `start`` is signal `onStart`.
     * @method PIXI.Loader#on
     * @deprecated since 5.0.0
     */
    on: function(f) {
      var h = t(f);
      ze(Ze, "PIXI.Loader#on is completely deprecated, use PIXI.Loader#" + h + ".add");
    },
    /**
     * Use the corresponding signal, e.g., event `start`` is signal `onStart`.
     * @method PIXI.Loader#once
     * @deprecated since 5.0.0
     */
    once: function(f) {
      var h = t(f);
      ze(Ze, "PIXI.Loader#once is completely deprecated, use PIXI.Loader#" + h + ".once");
    },
    /**
     * Use the corresponding signal, e.g., event `start`` is signal `onStart`.
     * @method PIXI.Loader#off
     * @deprecated since 5.0.0
     */
    off: function(f) {
      var h = t(f);
      ze(Ze, "PIXI.Loader#off is completely deprecated, use PIXI.Loader#" + h + ".detach");
    }
  }), Object.defineProperty(e12.extract, "WebGLExtract", {
    get: function() {
      return ze(Ze, "PIXI.extract.WebGLExtract method has moved to PIXI.Extract"), e12.Extract;
    }
  }), Object.defineProperty(e12.prepare, "WebGLPrepare", {
    get: function() {
      return ze(Ze, "PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"), e12.Prepare;
    }
  }), e12.Container.prototype._renderWebGL = function(h) {
    ze(Ze, "PIXI.Container._renderWebGL method has moved to PIXI.Container._render"), this._render(h);
  }, e12.Container.prototype.renderWebGL = function(h) {
    ze(Ze, "PIXI.Container.renderWebGL method has moved to PIXI.Container.render"), this.render(h);
  }, e12.DisplayObject.prototype.renderWebGL = function(h) {
    ze(Ze, "PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"), this.render(h);
  }, e12.Container.prototype.renderAdvancedWebGL = function(h) {
    ze(Ze, "PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"), this.renderAdvanced(h);
  }, Object.defineProperties(e12.settings, {
    /**
     * Default transform type.
     *
     * @static
     * @deprecated since 5.0.0
     * @memberof PIXI.settings
     * @type {PIXI.TRANSFORM_MODE}
     * @default PIXI.TRANSFORM_MODE.STATIC
     */
    TRANSFORM_MODE: {
      get: function() {
        return ze(Ze, "PIXI.settings.TRANSFORM_MODE property has been removed"), 0;
      },
      set: function() {
        ze(Ze, "PIXI.settings.TRANSFORM_MODE property has been removed");
      }
    }
  });
  var r = e12.BaseTexture;
  r.prototype.loadSource = function(h) {
    ze(Ze, "PIXI.BaseTexture.loadSource method has been deprecated");
    var d = e12.resources.autoDetectResource(h);
    d.internal = true, this.setResource(d), this.update();
  };
  var n = false;
  Object.defineProperties(r.prototype, {
    /**
     * @name PIXI.BaseTexture#hasLoaded
     * @type {boolean}
     * @deprecated since 5.0.0
     * @readonly
     * @see PIXI.BaseTexture#valid
     */
    hasLoaded: {
      get: function() {
        return ze(Ze, "PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"), this.valid;
      }
    },
    /**
     * @name PIXI.BaseTexture#imageUrl
     * @type {string}
     * @deprecated since 5.0.0
     * @see PIXI.resources.ImageResource#url
     */
    imageUrl: {
      get: function() {
        var f;
        return ze(Ze, "PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"), (f = this.resource) === null || f === void 0 ? void 0 : f.url;
      },
      set: function(f) {
        ze(Ze, "PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"), this.resource && (this.resource.url = f);
      }
    },
    /**
     * @name PIXI.BaseTexture#source
     * @type {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement|SVGElement}
     * @deprecated since 5.0.0
     * @readonly
     * @see PIXI.resources.BaseImageResource#source
     */
    source: {
      get: function() {
        return ze(Ze, "PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"), this.resource.source;
      },
      set: function(f) {
        ze(Ze, "PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."), this.resource && (this.resource.source = f);
      }
    },
    /**
     * @name PIXI.BaseTexture#premultiplyAlpha
     * @type {boolean}
     * @deprecated since 5.2.0
     * @readonly
     * @see PIXI.BaseTexture#alphaMode
     */
    premultiplyAlpha: {
      get: function() {
        return ze("5.2.0", "PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"), this.alphaMode !== 0;
      },
      set: function(f) {
        ze("5.2.0", "PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"), this.alphaMode = Number(f);
      }
    },
    /**
     * Batch local field, stores current texture location
     *
     * @name PIXI.BaseTexture#_id
     * @deprecated since 5.2.0
     * @type {number}
     * @see PIXI.BaseTexture#_batchLocation
     */
    _id: {
      get: function() {
        return n || (ze("5.2.0", "PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"), n = true), this._batchLocation;
      },
      set: function(f) {
        this._batchLocation = f;
      }
    }
  }), r.fromImage = function(h, d, p, m) {
    ze(Ze, "PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");
    var g = { scale: m, crossorigin: d };
    return r.from(h, { scaleMode: p, resourceOptions: g });
  }, r.fromCanvas = function(h, d) {
    return ze(Ze, "PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"), r.from(h, { scaleMode: d });
  }, r.fromSVG = function(h, d, p, m) {
    ze(Ze, "PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");
    var g = { scale: m, crossorigin: d };
    return r.from(h, { scaleMode: p, resourceOptions: g });
  }, Object.defineProperties(e12.resources.ImageResource.prototype, {
    /**
     * @name PIXI.resources.ImageResource#premultiplyAlpha
     * @type {boolean}
     * @deprecated since 5.2.0
     * @readonly
     * @see PIXI.resources.ImageResource#alphaMode
     */
    premultiplyAlpha: {
      get: function() {
        return ze("5.2.0", "PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"), this.alphaMode !== 0;
      },
      set: function(f) {
        ze("5.2.0", "PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"), this.alphaMode = Number(f);
      }
    }
  }), e12.Point.prototype.copy = function(h) {
    return ze(Ze, "PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"), this.copyFrom(h);
  }, e12.ObservablePoint.prototype.copy = function(h) {
    return ze(Ze, "PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"), this.copyFrom(h);
  }, e12.Rectangle.prototype.copy = function(h) {
    return ze(Ze, "PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"), this.copyFrom(h);
  }, e12.Matrix.prototype.copy = function(h) {
    return ze(Ze, "PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"), this.copyTo(h);
  }, e12.systems.StateSystem.prototype.setState = function(h) {
    return ze("v5.1.0", "StateSystem.setState has been renamed to StateSystem.set"), this.set(h);
  }, Object.assign(e12.systems.FilterSystem.prototype, {
    /**
     * @method PIXI.FilterManager#getRenderTarget
     * @deprecated since 5.0.0
     * @see PIXI.systems.FilterSystem#getFilterTexture
     */
    getRenderTarget: function(f, h) {
      return ze(Ze, "PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"), this.getFilterTexture(null, h);
    },
    /**
     * @method PIXI.FilterManager#returnRenderTarget
     * @deprecated since 5.0.0
     * @see PIXI.systems.FilterSystem#returnFilterTexture
     */
    returnRenderTarget: function(f) {
      ze(Ze, "PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"), this.returnFilterTexture(f);
    },
    /**
     * @method PIXI.systems.FilterSystem#calculateScreenSpaceMatrix
     * @deprecated since 5.0.0
     * @param {PIXI.Matrix} outputMatrix - the matrix to output to.
     * @return {PIXI.Matrix} The mapped matrix.
     */
    calculateScreenSpaceMatrix: function(f) {
      ze(Ze, "PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");
      var h = f.identity(), d = this.activeState, p = d.sourceFrame, m = d.destinationFrame;
      return h.translate(p.x / m.width, p.y / m.height), h.scale(m.width, m.height), h;
    },
    /**
     * @method PIXI.systems.FilterSystem#calculateNormalizedScreenSpaceMatrix
     * @deprecated since 5.0.0
     * @param {PIXI.Matrix} outputMatrix - The matrix to output to.
     * @return {PIXI.Matrix} The mapped matrix.
     */
    calculateNormalizedScreenSpaceMatrix: function(f) {
      ze(Ze, "PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");
      var h = this.activeState, d = h.sourceFrame, p = h.destinationFrame, m = f.identity();
      m.translate(d.x / p.width, d.y / p.height);
      var g = p.width / d.width, v = p.height / d.height;
      return m.scale(g, v), m;
    }
  }), Object.defineProperties(e12.RenderTexture.prototype, {
    /**
     * @name PIXI.RenderTexture#sourceFrame
     * @type {PIXI.Rectangle}
     * @deprecated since 5.0.0
     * @readonly
     */
    sourceFrame: {
      get: function() {
        return ze(Ze, "PIXI.RenderTexture.sourceFrame property has been removed"), this.filterFrame;
      }
    },
    /**
     * @name PIXI.RenderTexture#size
     * @type {PIXI.Rectangle}
     * @deprecated since 5.0.0
     * @readonly
     */
    size: {
      get: function() {
        return ze(Ze, "PIXI.RenderTexture.size property has been removed"), this._frame;
      }
    }
  });
  var i = (
    /** @class */
    function(f) {
      lB(h, f);
      function h(d, p, m, g) {
        var v = this;
        return ze(Ze, "PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"), v = f.call(this, true, d, p, m, g) || this, v;
      }
      return h;
    }(e12.filters.BlurFilterPass)
  ), o = (
    /** @class */
    function(f) {
      lB(h, f);
      function h(d, p, m, g) {
        var v = this;
        return ze(Ze, "PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"), v = f.call(this, false, d, p, m, g) || this, v;
      }
      return h;
    }(e12.filters.BlurFilterPass)
  );
  Object.assign(e12.filters, {
    BlurXFilter: i,
    BlurYFilter: o
  });
  var a = e12.Sprite, s = e12.Texture, l = e12.Graphics;
  l.prototype.generateCanvasTexture || (l.prototype.generateCanvasTexture = function() {
    ze(Ze, 'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"');
  }), Object.defineProperty(l.prototype, "graphicsData", {
    get: function() {
      return ze(Ze, "PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"), this.geometry.graphicsData;
    }
  });
  function u(f, h, d, p) {
    return ze(Ze, "PIXI.Sprite." + f + " method is deprecated, use PIXI.Sprite.from"), a.from(h, {
      resourceOptions: {
        scale: p,
        crossorigin: d
      }
    });
  }
  a.fromImage = u.bind(null, "fromImage"), a.fromSVG = u.bind(null, "fromSVG"), a.fromCanvas = u.bind(null, "fromCanvas"), a.fromVideo = u.bind(null, "fromVideo"), a.fromFrame = u.bind(null, "fromFrame");
  function c(f, h, d, p) {
    return ze(Ze, "PIXI.Texture." + f + " method is deprecated, use PIXI.Texture.from"), s.from(h, {
      resourceOptions: {
        scale: p,
        crossorigin: d
      }
    });
  }
  s.fromImage = c.bind(null, "fromImage"), s.fromSVG = c.bind(null, "fromSVG"), s.fromCanvas = c.bind(null, "fromCanvas"), s.fromVideo = c.bind(null, "fromVideo"), s.fromFrame = c.bind(null, "fromFrame"), Object.defineProperty(e12.AbstractRenderer.prototype, "autoResize", {
    get: function() {
      return ze(Ze, "PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"), this.autoDensity;
    },
    set: function(f) {
      ze(Ze, "PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"), this.autoDensity = f;
    }
  }), Object.defineProperty(e12.Renderer.prototype, "textureManager", {
    get: function() {
      return ze(Ze, "PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"), this.texture;
    }
  }), e12.utils.mixins = {
    /**
     * @memberof PIXI.utils.mixins
     * @function mixin
     * @deprecated since 5.0.0
     */
    mixin: function() {
      ze(Ze, "PIXI.utils.mixins.mixin function is no longer available");
    },
    /**
     * @memberof PIXI.utils.mixins
     * @function delayMixin
     * @deprecated since 5.0.0
     */
    delayMixin: function() {
      ze(Ze, "PIXI.utils.mixins.delayMixin function is no longer available");
    },
    /**
     * @memberof PIXI.utils.mixins
     * @function performMixins
     * @deprecated since 5.0.0
     */
    performMixins: function() {
      ze(Ze, "PIXI.utils.mixins.performMixins function is no longer available");
    }
  }, Object.defineProperty(e12.BitmapText.prototype, "font", {
    get: function() {
      return ze("5.3.0", "PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"), {
        name: this._fontName,
        size: this._fontSize,
        tint: this._tint,
        align: this._align
      };
    },
    set: function(f) {
      if (ze("5.3.0", "PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"), !!f) {
        var h = { font: f };
        this._upgradeStyle(h), h.fontSize = h.fontSize || e12.BitmapFont.available[h.fontName].size, this._fontName = h.fontName, this._fontSize = h.fontSize, this.dirty = true;
      }
    }
  });
}
Gs2.registerPlugin("accessibility", iz);
Gs2.registerPlugin("extract", Kz);
Gs2.registerPlugin("interaction", lz);
Gs2.registerPlugin("particle", r8);
Gs2.registerPlugin("prepare", p8);
Gs2.registerPlugin("batch", qz);
Gs2.registerPlugin("tilingSprite", y8);
fu.registerPlugin(T8);
fu.registerPlugin(g8);
Rv.registerPlugin(oz);
Rv.registerPlugin(e8);
var I8 = "5.3.12";
var Pie = {
  AlphaFilter: tie,
  BlurFilter: sie,
  BlurFilterPass: LI,
  ColorMatrixFilter: FI,
  DisplacementFilter: die,
  FXAAFilter: vie,
  NoiseFilter: bie
};
var P8 = Object.freeze(Object.defineProperty({
  __proto__: null,
  get ALPHA_MODES() {
    return Rs;
  },
  AbstractBatchRenderer: Xz,
  AbstractRenderer: jz,
  AccessibilityManager: iz,
  AnimatedSprite: Oie,
  AppLoaderPlugin: e8,
  Application: Rv,
  Attribute: yI,
  get BLEND_MODES() {
    return yt;
  },
  get BUFFER_BITS() {
    return Gg;
  },
  BasePrepare: f8,
  BaseRenderTexture: qm,
  BaseTexture: Nr,
  BatchDrawCall: i0,
  BatchGeometry: ID,
  BatchPluginFactory: Yz,
  BatchRenderer: qz,
  BatchShaderGenerator: Wz,
  BatchTextureArray: o0,
  BitmapFont: El,
  BitmapFontData: Wg,
  BitmapFontLoader: T8,
  BitmapText: Qne,
  Bounds: Xg,
  Buffer: An,
  get CLEAR_MODES() {
    return Ho;
  },
  Circle: JG,
  Container: ra,
  CountLimiter: h8,
  DEG_TO_RAD: QG,
  get DRAW_MODES() {
    return wo;
  },
  DisplayObject: ln,
  get ENV() {
    return Ua;
  },
  Ellipse: ez,
  Extract: Kz,
  get FORMATS() {
    return Kf;
  },
  FillStyle: PD,
  Filter: js,
  FilterState: vz,
  Framebuffer: n0,
  get GC_MODES() {
    return t0;
  },
  GLFramebuffer: Tz,
  GLProgram: Bz,
  GLTexture: eb,
  GRAPHICS_CURVES: ed,
  Geometry: Kd,
  Graphics: xD,
  GraphicsData: OI,
  GraphicsGeometry: c8,
  IGLUniformData: zre,
  InteractionData: mI,
  InteractionEvent: az,
  InteractionManager: lz,
  InteractionTrackingData: Q_,
  get LINE_CAP() {
    return ys;
  },
  get LINE_JOIN() {
    return vs;
  },
  LineStyle: u8,
  Loader: fu,
  LoaderResource: Km,
  get MASK_TYPES() {
    return Ri;
  },
  get MIPMAP_MODES() {
    return Zf;
  },
  get MSAA_QUALITY() {
    return lu;
  },
  MaskData: wz,
  Matrix: sn,
  Mesh: rd,
  MeshBatchUvs: _8,
  MeshGeometry: Mv,
  MeshMaterial: Nv,
  NineSlicePlane: wie,
  ObjectRenderer: kv,
  ObservablePoint: Gc,
  PI_2: Qf,
  get PRECISION() {
    return Yo;
  },
  ParticleContainer: gne,
  ParticleRenderer: r8,
  PlaneGeometry: w8,
  Point: In,
  Polygon: Sf,
  Prepare: p8,
  Program: Dv,
  Quad: gz,
  QuadUv: AD,
  RAD_TO_DEG: ZG,
  get RENDERER_TYPE() {
    return qf;
  },
  Rectangle: fr,
  RenderTexture: hu,
  RenderTexturePool: pz,
  Renderer: Gs2,
  RopeGeometry: A8,
  RoundedRectangle: tz,
  Runner: Bn,
  get SCALE_MODES() {
    return Ra;
  },
  get SHAPES() {
    return Wr;
  },
  Shader: Kl,
  SimpleMesh: Sie,
  SimplePlane: O8,
  SimpleRope: Eie,
  Sprite: Zd,
  SpriteMaskFilter: xz,
  Spritesheet: m8,
  SpritesheetLoader: g8,
  State: ec,
  System: Hi,
  get TARGETS() {
    return Hl;
  },
  get TEXT_GRADIENT() {
    return td;
  },
  get TYPES() {
    return on;
  },
  TemporaryDisplayObject: _D,
  Text: kD,
  TextMetrics: Do,
  TextStyle: du,
  Texture: Pt,
  TextureLoader: Jz,
  TextureMatrix: $E,
  TextureUvs: wD,
  Ticker: On,
  TickerPlugin: oz,
  TilingSprite: Une,
  TilingSpriteRenderer: y8,
  TimeLimiter: Hne,
  Transform: vD,
  get UPDATE_PRIORITY() {
    return ja;
  },
  UniformGroup: Ul,
  VERSION: I8,
  ViewableBuffer: Vz,
  get WRAP_MODES() {
    return Ps;
  },
  accessibleTarget: nz,
  autoDetectRenderer: Gz,
  checkMaxIfStatementsInShader: Cz,
  defaultFilterVertex: OD,
  defaultVertex: zz,
  filters: Pie,
  graphicsUtils: Tne,
  groupD8: Lr,
  interactiveTarget: sz,
  isMobile: So,
  resources: vre,
  settings: ft,
  systems: Qre,
  uniformParsers: J_,
  useDeprecated: Iie,
  utils: ore
}, Symbol.toStringTag, { value: "Module" }));
(function() {
  try {
    if (typeof document < "u") {
      var e12 = document.createElement("style");
      e12.appendChild(document.createTextNode('._context-menu_18ock_1{position:fixed;background-color:#fffffff2;border:1px solid rgba(0,0,0,.1);border-radius:3px;font-size:12px;cursor:default;padding:3px;box-shadow:0 0 3px #0000001a,0 1px 5px #0000000d}._context-menu-dark_18ock_12{color:#ccc;background-color:#444444f7}._context-menu-icon_18ock_17{display:inline-block;margin-right:3px;vertical-align:middle}._context-menu-icon_18ock_17>svg{width:30px;height:20px}._context-menu-item_18ock_27{padding:2px;white-space:nowrap;border-radius:2px;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._context-menu-item_18ock_27:hover{background:#337ab7;color:#fff}._context-menu-hr_18ock_38{margin-top:5px;margin-bottom:5px;border:0;border-top:1px solid rgba(0,0,0,.1)}._play-icon_18ock_45{width:12px;height:12px;position:absolute;right:5px}._context-menu-span_18ock_52{margin-right:20px;vertical-align:middle;display:inline-block;line-height:normal;white-space:nowrap}._context-menu-thumbnail_18ock_60{margin-right:10px;border:1px solid #888888}._context-menu-thumbnail-inline_18ock_65{display:inline-block;margin-right:10px;vertical-align:middle}._multitrack-header_1yz7l_1,._multitrack-header-focus_1yz7l_2,._multitrack-header-squeazed_1yz7l_3{position:relative;display:flex;justify-content:space-between;height:24px;margin-top:4px;margin-bottom:4px;color:#999;font-size:12px;line-height:24px;vertical-align:middle;border:0;border-radius:3px;background:#e5e5e5;transition:height .15s cubic-bezier(.25,.1,.25,1),margin .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-dark_1yz7l_20{background:#222}._multitrack-header-focus_1yz7l_2{height:32px;margin-top:0;margin-bottom:0}._multitrack-header-id_1yz7l_30{padding-left:3px}._multitrack-header-id_1yz7l_30:before{content:"ID:";font-weight:700;padding-right:5px}._multitrack-header-left_1yz7l_39{display:flex;flex-grow:1}._multitrack-header-grabber_1yz7l_44,._multitrack-header-grabber-squeazed_1yz7l_45{display:flex;align-items:center;justify-content:center;width:24px;height:100%;cursor:move;border-radius:3px 0 0 3px;transition:background .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-grabber_1yz7l_44:hover,._multitrack-header-grabber-squeazed_1yz7l_45:hover{background:#999}._multitrack-header-grabber_1yz7l_44:hover div,._multitrack-header-grabber-squeazed_1yz7l_45:hover div{background:#fff}._multitrack-header-grabber_1yz7l_44 div,._multitrack-header-grabber-squeazed_1yz7l_45 div{width:1px;height:50%;margin:1px;background:#999;transition:background .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-dark_1yz7l_20 ._multitrack-header-grabber_1yz7l_44 div{background:#666}._multitrack-header-grabber-squeazed_1yz7l_45{width:19.2px}._multitrack-header-search_1yz7l_80{position:relative;flex-grow:1;height:100%;margin-right:12px}._multitrack-header-search_1yz7l_80:after{position:absolute;top:3px;bottom:3px;right:-12px;display:block;content:"";width:1px;margin:0 6px;background:#cccccc}._multitrack-header-dark_1yz7l_20 ._multitrack-header-search_1yz7l_80:after{background:#666}._multitrack-header-nav-list_1yz7l_102,._multitrack-header_1yz7l_1>nav{display:flex}._multitrack-header-icon_1yz7l_107,._multitrack-header-icon-squeazed_1yz7l_108{width:24px;height:100%;padding:6px;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-icon_1yz7l_107 g,._multitrack-header-icon-squeazed_1yz7l_108 g{stroke:#999}._multitrack-header-icon_1yz7l_107:hover,._multitrack-header-icon_1yz7l_107:active,._multitrack-header-icon_1yz7l_107:focus,._multitrack-header-icon-squeazed_1yz7l_108:hover,._multitrack-header-icon-squeazed_1yz7l_108:active,._multitrack-header-icon-squeazed_1yz7l_108:focus{color:#fff;background:#337ab7}._multitrack-header-icon_1yz7l_107:hover g,._multitrack-header-icon_1yz7l_107:active g,._multitrack-header-icon_1yz7l_107:focus g,._multitrack-header-icon-squeazed_1yz7l_108:hover g,._multitrack-header-icon-squeazed_1yz7l_108:active g,._multitrack-header-icon-squeazed_1yz7l_108:focus g{stroke:#fff}._multitrack-header-icon_1yz7l_107:last-child,._multitrack-header-icon-squeazed_1yz7l_108:last-child{border-radius:0 3px 3px 0}._mouse-tool-selection_1yz7l_136{color:#fff;border-radius:3px 0 0 3px;background:#337ab7}._multitrack-header-icon-squeazed_1yz7l_108{width:20px 5;padding-left:3px;padding-right:3px}._track-control_w7hx2_1,._track-control-vertical_w7hx2_2{position:absolute;z-index:1;display:flex;background:rgba(255,255,255,.75);right:2px;top:2px;border-radius:2.5px;box-shadow:0 0 0 1px #0000000d,0 0 3px #0000001a;opacity:0;transition:opacity .15s cubic-bezier(.25,.1,.25,1),background .15s cubic-bezier(.25,.1,.25,1),box-shadow .15s cubic-bezier(.25,.1,.25,1)}._track-control-dark_w7hx2_15,._track-control-dark_w7hx2_15 ._track-control-active_w7hx2_16{background:rgba(40,40,40,.85)}._track-control-vertical_w7hx2_2{flex-direction:column-reverse}._track-control-left_w7hx2_24{left:2px;right:auto}._track-control-active_w7hx2_16,._track-control-vertical-active_w7hx2_30{opacity:1;z-index:1}._track-control-active_w7hx2_16:hover,._track-control-vertical-active_w7hx2_30:hover{background:rgb(255,255,255);box-shadow:0 0 0 1px #0000001a,0 0 3px #0003}._track-control-dark_w7hx2_15._track-control-active_w7hx2_16:hover{background:rgba(34,34,34,.95)}._track-control-padding-right_w7hx2_48{right:80px}._track-control-button_w7hx2_52{width:20px;height:20px;padding:4px;cursor:pointer;opacity:.66;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1),opacity .15s cubic-bezier(.25,.1,.25,1)}._track-control-button_w7hx2_52:hover{color:#fff;background:#337ab7;opacity:1}._track-control-button_w7hx2_52:first-child{border-radius:2.5px 0 0 2.5px}._track-control-button_w7hx2_52:last-child{border-radius:0 2.5px 2.5px 0}._track-control-dark_w7hx2_15 ._track-control-button_w7hx2_52{color:#ccc}._track-control-dark_w7hx2_15 ._track-control-button_w7hx2_52:hover{color:#fff;background:#337ab7;opacity:1}._track-control-button-vertical_w7hx2_81:first-child{border-radius:0 0 2.5px 2.5px}._track-control-button-vertical_w7hx2_81:last-child{border-radius:2.5px 2.5px 0 0}._center-track_fiu64_1{position:relative;background:transparent}._center-track-container_fiu64_6{position:absolute;z-index:1}._track-range-selection_5bcsr_1{position:absolute;z-index:-1;opacity:0;transition:opacity .15s cubic-bezier(.25,.1,.25,1)}._track-range-selection-active_5bcsr_8{z-index:1;opacity:1}._track-range-selection-group-inactive_5bcsr_22{display:none}._track-range-selection-group-brush-selection_5bcsr_26{outline:2px solid rgba(0,0,0,.33);fill:#000;fill-opacity:.1}._drag-listening-div-active_19gkt_1{z-index:10;box-shadow:inset 0 0 3px red}._gallery-tracks_fbxxi_1{position:relative;top:0;left:0;width:100%;height:100%}._gallery-track_fbxxi_1{position:absolute;box-sizing:border-box;top:0;right:0;bottom:0;left:0}._gallery-sub-track_fbxxi_18,._gallery-invisible-track_fbxxi_19{position:absolute}._tiled-plot_1y7td_1{position:relative;flex:1;overflow:hidden}._horizontalList_1y7td_7{display:flex;width:600px;height:300px;white-space:nowrap}._list_1y7td_14{width:400px;height:600px;overflow:hidden;-webkit-overflow-scrolling:touch}._stylizedList_1y7td_21{position:relative;z-index:0;background-color:#f3f3f3;outline:none}._stylizedItem_1y7td_28{position:relative;display:flex;align-items:center;width:100%;background-color:transparent;-webkit-user-select:none;user-select:none;color:#333;font-weight:400}._stylizedHelper_1y7td_39{box-shadow:0 5px 5px -5px #0003,0 -5px 5px -5px #0003;background-color:#fffc;cursor:row-resize}._stylizedHelper_1y7td_39._horizontalItem_1y7td_44{cursor:col-resize}._horizontalItem_1y7td_44{display:flex;flex-shrink:0;align-items:center;justify-content:center}._resizable-track_1y7td_55{width:100%;height:100%}path._domain_1y7td_60{stroke-width:0px}._top-right-handle_cizw2_1,._bottom-right-handle_cizw2_2{border-right:black solid;border-top:black solid}._top-left-handle_cizw2_7,._bottom-left-handle_cizw2_8{border-left:black solid;border-top:black solid}._top-draggable-handle_cizw2_13,._bottom-draggable-handle_cizw2_14,._left-draggable-handle_cizw2_15,._right-draggable-handle_cizw2_16{position:absolute;opacity:0;transition:transform .15s cubic-bezier(.25,.1,.25,1),opacity .15s cubic-bezier(.25,.1,.25,1)}._draggable-div_cizw2_22{background-color:transparent;box-sizing:border-box}._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle-grabber_cizw2_28{width:10px;height:4px;border-top:1px solid black;border-bottom:1px solid black}._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle-grabber_cizw2_28{margin:4px 7px}._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle-grabber_cizw2_44{width:4px;height:10px;border-left:1px solid black;border-right:1px solid black}._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle-grabber_cizw2_44{margin:7px 4px}._draggable-div_cizw2_22:hover ._top-draggable-handle_cizw2_13,._draggable-div_cizw2_22:hover ._bottom-draggable-handle_cizw2_14,._draggable-div_cizw2_22:hover ._left-draggable-handle_cizw2_15,._draggable-div_cizw2_22:hover ._right-draggable-handle_cizw2_16{opacity:.5;background:rgba(255,255,255,.75);box-shadow:0 0 3px 1px #ffffffbf;border-radius:3px}._top-draggable-handle_cizw2_13:hover,._top-draggable-handle_cizw2_13:active,._bottom-draggable-handle_cizw2_14:hover,._bottom-draggable-handle_cizw2_14:active,._left-draggable-handle_cizw2_15:hover,._left-draggable-handle_cizw2_15:active,._right-draggable-handle_cizw2_16:hover,._right-draggable-handle_cizw2_16:active{opacity:1!important;transform:scale(2)}._top-draggable-handle_cizw2_13:hover ._top-draggable-handle-grabber_cizw2_27,._top-draggable-handle_cizw2_13:hover ._bottom-draggable-handle-grabber_cizw2_28,._top-draggable-handle_cizw2_13:hover ._left-draggable-handle-grabber_cizw2_43,._top-draggable-handle_cizw2_13:hover ._right-draggable-handle-grabber_cizw2_44,._top-draggable-handle_cizw2_13:active ._top-draggable-handle-grabber_cizw2_27,._top-draggable-handle_cizw2_13:active ._bottom-draggable-handle-grabber_cizw2_28,._top-draggable-handle_cizw2_13:active ._left-draggable-handle-grabber_cizw2_43,._top-draggable-handle_cizw2_13:active ._right-draggable-handle-grabber_cizw2_44,._bottom-draggable-handle_cizw2_14:hover ._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle_cizw2_14:hover ._bottom-draggable-handle-grabber_cizw2_28,._bottom-draggable-handle_cizw2_14:hover ._left-draggable-handle-grabber_cizw2_43,._bottom-draggable-handle_cizw2_14:hover ._right-draggable-handle-grabber_cizw2_44,._bottom-draggable-handle_cizw2_14:active ._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle_cizw2_14:active ._bottom-draggable-handle-grabber_cizw2_28,._bottom-draggable-handle_cizw2_14:active ._left-draggable-handle-grabber_cizw2_43,._bottom-draggable-handle_cizw2_14:active ._right-draggable-handle-grabber_cizw2_44,._left-draggable-handle_cizw2_15:hover ._top-draggable-handle-grabber_cizw2_27,._left-draggable-handle_cizw2_15:hover ._bottom-draggable-handle-grabber_cizw2_28,._left-draggable-handle_cizw2_15:hover ._left-draggable-handle-grabber_cizw2_43,._left-draggable-handle_cizw2_15:hover ._right-draggable-handle-grabber_cizw2_44,._left-draggable-handle_cizw2_15:active ._top-draggable-handle-grabber_cizw2_27,._left-draggable-handle_cizw2_15:active ._bottom-draggable-handle-grabber_cizw2_28,._left-draggable-handle_cizw2_15:active ._left-draggable-handle-grabber_cizw2_43,._left-draggable-handle_cizw2_15:active ._right-draggable-handle-grabber_cizw2_44,._right-draggable-handle_cizw2_16:hover ._top-draggable-handle-grabber_cizw2_27,._right-draggable-handle_cizw2_16:hover ._bottom-draggable-handle-grabber_cizw2_28,._right-draggable-handle_cizw2_16:hover ._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle_cizw2_16:hover ._right-draggable-handle-grabber_cizw2_44,._right-draggable-handle_cizw2_16:active ._top-draggable-handle-grabber_cizw2_27,._right-draggable-handle_cizw2_16:active ._bottom-draggable-handle-grabber_cizw2_28,._right-draggable-handle_cizw2_16:active ._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle_cizw2_16:active ._right-draggable-handle-grabber_cizw2_44{box-shadow:0 0 3px 1px #0089ff;background:#0089ff}._top-draggable-handle_cizw2_13,._bottom-draggable-handle_cizw2_14{height:12px;cursor:row-resize}._left-draggable-handle_cizw2_15,._right-draggable-handle_cizw2_16{width:12px;cursor:col-resize}._horizontal-tiled-plot_1bqkg_1{position:relative}._button_1wnjn_1{display:flex;align-items:center;box-sizing:border-box;padding:.5em;color:#000;font-size:1em;line-height:1em;border:0;border-radius:2.5px;background:#fff;box-shadow:0 0 0 1px #ccc;transition:transform .15s cubic-bezier(.25,.1,.25,1),box-shadow .15s cubic-bezier(.25,.1,.25,1),background .15s cubic-bezier(.25,.1,.25,1);-webkit-appearance:none}._button_1wnjn_1:hover{background:#f2f2f2;box-shadow:0 0 0 1px #ccc}._button_1wnjn_1:focus{box-shadow:0 0 0 2px #0089ff}._button_1wnjn_1:active{transform:scale(.9)}._button_1wnjn_1:hover,._button_1wnjn_1:focus,._button_1wnjn_1:active{cursor:pointer;outline:none}._button-shortcut_1wnjn_35{padding:.1em 5px;color:#999;font-size:.8em;transition:color .15s cubic-bezier(.25,.1,.25,1)}._cross_2ke8w_1{position:relative;width:1em;height:1em}._cross_2ke8w_1:before,._cross_2ke8w_1:after{content:"";display:block;position:absolute;top:50%;left:0;width:1em;height:1px;background:black;transform-origin:center}._cross_2ke8w_1:before{-webkit-transform:translate(0,-50%) rotate(45deg);-moz-transform:translate(0,-50%) rotate(45deg);transform:translateY(-50%) rotate(45deg)}._cross_2ke8w_1:after{-webkit-transform:translate(0,-50%) rotate(-45deg);-moz-transform:translate(0,-50%) rotate(-45deg);transform:translateY(-50%) rotate(-45deg)}._modal-background_zzhoe_1{position:absolute;z-index:1000;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.666);animation:_fade-in_zzhoe_1 .2s cubic-bezier(.25,.1,.25,1) 1;transition:opacity .2s cubic-bezier(.25,.1,.25,1)}._modal-hide_zzhoe_13{opacity:0}._modal-wrap_zzhoe_17{position:absolute;top:20px;right:20px;bottom:20px;left:20px}._modal-window_zzhoe_25{position:relative;width:100%;max-width:640px;max-height:100%;margin-left:auto;margin-right:auto;color:#000;border-radius:5px;background:#fff;animation:_fade-scale-in_zzhoe_1 .2s cubic-bezier(.25,.1,.25,1) 1}._modal-window-max-height_zzhoe_38{height:100%}._modal-content_zzhoe_42{padding:10px}@keyframes _fade-in_zzhoe_1{0%{opacity:0}to{opacity:1}}@keyframes _fade-scale-in_zzhoe_1{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}._dialog-header_wp50s_1{position:relative;z-index:2;display:flex;justify-content:space-between;margin:0 -10px 10px;padding:0 10px 10px;border-bottom:1px solid #cccccc}._dialog-header_wp50s_1 h3{margin:0;padding:0;font-size:20px;line-height:1em}._dialog-header_wp50s_1 button{font-size:10px}._dialog-main-max-height_wp50s_20{position:absolute;z-index:1;top:40px;right:0;bottom:50px;left:0;padding:10px;overflow:auto}._dialog-footer_wp50s_31,._dialog-footer-max-height_wp50s_31{display:flex;justify-content:space-between;margin:10px -10px 0;padding:10px 10px 0;border-top:1px solid #cccccc}._dialog-footer_wp50s_31 button,._dialog-footer-max-height_wp50s_31 button{font-size:14px}._dialog-footer-max-height_wp50s_31{position:absolute;z-index:2;left:10px;right:10px;bottom:10px}table.table-track-options{border-collapse:collapse;margin-left:auto;margin-right:auto}td.td-track-options{border:1px solid #fff;outline:none;padding:3px;position:relative;font-family:Roboto,sans-serif;font-size:14px;color:#666}.cell-label{position:absolute;left:0;top:0;margin-left:5px;color:#777}.modal-dialog{position:relative;display:table;overflow-y:auto;overflow-x:auto;width:auto;min-width:300px;margin:auto}._track-renderer_11dwb_1{position:relative}._track-renderer-element_11dwb_5,._track-renderer-events_11dwb_6{position:absolute;top:0;right:0;bottom:0;left:0;z-index:-1}._track-renderer-events_11dwb_6{z-index:1}.tileset-finder-label{font-weight:700}.tileset-finder-search-box{margin-left:10px}.tileset-finder-search-bar{display:flex;margin-left:5px;justify-content:space-between;align-items:center}.tileset-finder-checkbox-tree{margin:5px;padding:3px;border:1px solid #aaaaaa;border-radius:5px}.react-checkbox-tree{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;font-size:16px}.react-checkbox-tree>ol{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.react-checkbox-tree ol{margin:0;padding-left:0;list-style-type:none}.react-checkbox-tree ol ol{padding-left:24px}.react-checkbox-tree button{line-height:normal;color:inherit}.react-checkbox-tree button:disabled{cursor:not-allowed}.react-checkbox-tree .rct-bare-label{cursor:default}.react-checkbox-tree label{margin-bottom:0;cursor:pointer}.react-checkbox-tree label:hover{background:rgba(51,51,204,.1)}.react-checkbox-tree label:active,.react-checkbox-tree label:focus{background:rgba(51,51,204,.15)}.react-checkbox-tree:not(.rct-native-display) input{display:none}.react-checkbox-tree.rct-native-display input{margin:0 5px}.react-checkbox-tree .rct-icon{display:inline-block;text-align:center;text-rendering:auto;font-family:"Font Awesome 5 Free",FontAwesome,sans-serif;font-weight:400;font-variant:normal;font-style:normal}.rct-disabled>.rct-text>label{opacity:.75;cursor:not-allowed}.rct-disabled>.rct-text>label:hover{background:transparent}.rct-disabled>.rct-text>label:active{background:transparent}.rct-text{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.rct-options{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:.5rem;text-align:right}.rct-option{opacity:.75;border:0;background:none;cursor:pointer;padding:0 4px;font-size:18px}.rct-option:hover{opacity:1}.rct-option+.rct-option{margin-left:2px}.rct-collapse,.rct-checkbox,.rct-node-icon{padding:0 5px}.rct-collapse *,.rct-checkbox *,.rct-node-icon *{display:inline-block;margin:0;width:14px}.rct-collapse{-ms-flex-item-align:stretch;align-self:stretch;border:0;background:none;line-height:normal;color:inherit;font-size:12px}.rct-collapse.rct-collapse-btn{cursor:pointer}.rct-collapse>.rct-icon-expand-close{opacity:.5}.rct-collapse>.rct-icon-expand-close:hover{opacity:1}.rct-native-display .rct-checkbox{display:none}.rct-node-clickable{cursor:pointer}.rct-node-clickable:hover{background:rgba(51,51,204,.1)}.rct-node-clickable:focus{outline:0;background:rgba(51,51,204,.2)}.rct-node-icon{color:#33c}.rct-title{padding:0 5px}.rct-icons-fa4 .rct-icon-expand-close:before{content:""}.rct-icons-fa4 .rct-icon-expand-open:before{content:""}.rct-icons-fa4 .rct-icon-uncheck:before{content:""}.rct-icons-fa4 .rct-icon-check:before{content:""}.rct-icons-fa4 .rct-icon-half-check:before{opacity:.5;content:""}.rct-icons-fa4 .rct-icon-leaf:before{content:""}.rct-icons-fa4 .rct-icon-parent-open:before{content:""}.rct-icons-fa4 .rct-icon-parent-close:before{content:""}.rct-icons-fa4 .rct-icon-expand-all:before{content:""}.rct-icons-fa4 .rct-icon-collapse-all:before{content:""}.rct-icons-fa5 .rct-icon-expand-close:before{font-weight:900;content:""}.rct-icons-fa5 .rct-icon-expand-open:before{font-weight:900;content:""}.rct-icons-fa5 .rct-icon-uncheck:before{content:""}.rct-icons-fa5 .rct-icon-check:before{content:""}.rct-icons-fa5 .rct-icon-half-check:before{opacity:.5;content:""}.rct-icons-fa5 .rct-icon-leaf:before{content:""}.rct-icons-fa5 .rct-icon-parent-open:before{content:""}.rct-icons-fa5 .rct-icon-parent-close:before{content:""}.rct-icons-fa5 .rct-icon-expand-all:before{content:""}.rct-icons-fa5 .rct-icon-collapse-all:before{content:""}.rct-direction-rtl{direction:rtl}.rct-direction-rtl ol ol{padding-right:24px;padding-left:0}.rct-direction-rtl.rct-icons-fa4 .rct-icon-expand-close:before{content:""}.rct-direction-rtl.rct-icons-fa5 .rct-icon-expand-close:before{content:""}.plot-type-selected{background-color:#0000ff4d}.plot-type-container{overflow-y:scroll;margin:5px;padding:3px;border:1px solid #aaaaaa;border-radius:5px;max-height:15vh}.plot-type-container-empty{margin:5px;padding:3px 8px;border:1px solid #aaaaaa;background-color:#e8e8e8;border-radius:5px}.plot-type-item{cursor:pointer}.plot-type-item:not(.plot-type-selected):hover{background-color:#3333cc1a}.track-thumbnail{width:30px;height:20px;display:inline-block;margin-right:10;vertical-align:middle}.track-thumbnail>svg{width:20px;height:20px}._collapse-toggle-icon_ub7s6_1:before{font-family:Glyphicons Halflings;content:"";float:left;padding-right:3px}._collapse-toggle-icon_ub7s6_1._collapsed_ub7s6_9:before{content:""}._modal-title_ub7s6_14{font-family:Roboto;font-weight:700}._modal-container_ub7s6_19{position:relative}._modal-container_ub7s6_19 ._modal_ub7s6_14,._modal-container_ub7s6_19 ._modal-backdrop_ub7s6_23{position:absolute}._modal-dialog_ub7s6_27{position:relative;display:table;overflow-y:auto;overflow-x:auto;width:600px;min-width:300px;margin:auto}._vertical-tiled-plot_f3ho8_1{position:relative}._genome-position-search_1l2sx_1,._genome-position-search-focus_1l2sx_2{position:relative;display:flex;align-items:stretch;height:100%;margin-bottom:0;font-size:13.7142857143px;transition:box-shadow .15s cubic-bezier(.25,.1,.25,1),font-size .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-focus_1l2sx_2{box-shadow:0 0 0 1px #337ab7,0 0 3px 1px #337ab7}._genome-position-search-bar_1l2sx_16{position:relative;box-sizing:border-box;width:100%;height:100%;padding:3px;color:#666;font-size:inherit;line-height:24px;border:0;border-radius:3px 0 0 3px;background:transparent}._genome-position-search-bar_1l2sx_16:focus{outline:none;color:#000}._genome-position-search-dark_1l2sx_34 ._genome-position-search-bar_1l2sx_16:focus{color:#e5e5e5}._genome-position-search-bar-button_1l2sx_38,._genome-position-search-bar-button-focus_1l2sx_39{display:block;height:100%;padding:0 8px!important;color:#999;border:0!important;border-radius:0!important;background:transparent;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-bar-button_1l2sx_38:active,._genome-position-search-bar-button_1l2sx_38:focus,._genome-position-search-bar-button_1l2sx_38:hover,._genome-position-search-bar-button-focus_1l2sx_39:active,._genome-position-search-bar-button-focus_1l2sx_39:focus,._genome-position-search-bar-button-focus_1l2sx_39:hover{color:#fff;background:#337ab7}._genome-position-search-bar-button-focus_1l2sx_39{color:#fff;background:#337ab7}._genome-position-search-bar-icon_1l2sx_62,._genome-position-search-bar-icon-focus_1l2sx_63{display:flex;align-items:center;transition:color .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-bar-icon_1l2sx_62:first-child,._genome-position-search-bar-icon-focus_1l2sx_63:first-child{margin-left:6px;margin-right:2px}._genome-position-search-bar-icon_1l2sx_62 span,._genome-position-search-bar-icon-focus_1l2sx_63 span{display:block;margin-top:-2px}._genome-position-search-bar-icon-focus_1l2sx_63{color:#337ab7}._genome-position-search-bar-suggestions_1l2sx_83{position:fixed;border-radius:3px;box-shadow:0 0 3px #0000001a,0 1px 5px #0000000d;background-color:#fffffff2;border:1px solid rgba(0,0,0,.1);padding:2px 0;font-size:90%;overflow:auto;max-height:50%}._btn_1l2sx_95{display:inline-block;margin-bottom:0;font-size:13.7142857143px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px}._btn-sm_1l2sx_116{font-size:12px;line-height:1.5;border-radius:3px}._btn-default_1l2sx_122{color:#666;background-color:#fff;border-color:#ccc}._btn-default_1l2sx_122:hover{color:#000;background:#ccc}._btn-default_1l2sx_122:active,._btn-default_1l2sx_122:focus{color:#fff;border-color:#000;background:#000}._genome-position-search_1l2sx_1 ._btn_1l2sx_95{border-radius:0 3px 3px 0}._export-link-dialog-wrapper_p9gxw_1{display:flex}._export-link-dialog-wrapper_p9gxw_1 input{flex-grow:1}._add-track-position-table_wdy5w_1{border-collapse:collapse;margin:5px;color:#666}._add-track-position-table-dark_wdy5w_7{color:#ccc}._add-track-position-other_wdy5w_11{outline:none}._add-track-position-top-center_wdy5w_15{min-width:80px;min-height:20px;text-align:center;outline:none;border-top:1px solid #999;border-left:1px solid #999;border-right:1px solid #999;border-radius:2px 2px 0 0}._add-track-position-top-center_wdy5w_15:hover{color:#fff;background-color:#337ab7}._add-track-position-middle-left_wdy5w_30{min-width:40px;text-align:center;outline:none;border-top:1px solid #999;border-left:1px solid #999;border-bottom:1px solid #999;border-radius:2px 0 0 2px}._add-track-position-middle-left_wdy5w_30:hover{background-color:#337ab7;color:#fff}._add-track-position-middle-right_wdy5w_45{min-width:40px;text-align:center;outline:none;border-top:1px solid #999;border-right:1px solid #999;border-bottom:1px solid #999;border-radius:0 2px 2px 0}._add-track-position-middle-right_wdy5w_45:hover{background-color:#337ab7;color:#fff}._add-track-position-middle-middle_wdy5w_60{text-align:center;outline:none;border:1px solid #999}._add-track-position-middle-middle_wdy5w_60:hover{background-color:#337ab7;color:#fff}._add-track-position-bottom-middle_wdy5w_71{min-height:20px;text-align:center;outline:none;border-left:1px solid #999;border-right:1px solid #999;border-bottom:1px solid #999;border-radius:0 0 2px 2px}._add-track-position-bottom-middle_wdy5w_71:hover{background-color:#337ab7;color:#fff}._add-track-position-span_wdy5w_86{margin:5px}._view-config-editor-header_1hlm6_1{margin:-10px -10px 0;padding:10px;display:flex;justify-content:space-between;background:#f2f2f2}._view-config-editor-header_1hlm6_1 button{display:flex;align-items:center;font-size:14px;background:#f2f2f2}._view-config-editor-header_1hlm6_1 button:hover{background:#e5e5e5}._view-config-editor-header_1hlm6_1 button:hover span{color:#666}._view-config-editor_1hlm6_1{position:absolute;top:50px;right:0;bottom:0;left:0;margin:1px 0 0;padding:0;overflow:auto;font-size:12.5px;height:calc(100% - 80px)}._view-config-log_1hlm6_34{position:absolute;right:0;bottom:0;left:0;margin:1px 0 0;padding:0;min-height:30px;background:#f2f2f2;transition:height .15s cubic-bezier(.25,.1,.25,1)}._view-config-log-header_1hlm6_46{background:#f2f2f2;border-top:1px solid #cccccc;border-bottom:1px solid #cccccc;padding-left:10px;height:30px;display:flex;align-items:center;cursor:pointer;position:sticky;position:-webkit-sticky;top:0}._view-config-log-msg_1hlm6_60{background:#f2f2f2;overflow:auto;height:calc(100% - 30px)}._view-config-log-msg_1hlm6_60 tr,._view-config-log-msg_1hlm6_60 td{outline:none;vertical-align:top}._view-config-log-msg_1hlm6_60 ._title_1hlm6_70{font-weight:700;padding-left:8px;padding-top:8px;width:100px}._view-config-log-msg_1hlm6_60 ._Warning_1hlm6_76{color:orange}._view-config-log-msg_1hlm6_60 ._Success_1hlm6_79{color:green}._view-config-log-msg_1hlm6_60 ._Error_1hlm6_82{color:red}._view-config-log-msg_1hlm6_60 pre{background:white;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}._higlass_1uoq8_1{position:relative}._higlass-dark-theme_1uoq8_5{background:black}._higlass-container-overflow_1uoq8_9,._higlass-scroll-container-overflow_1uoq8_10,._higlass-scroll-container-scroll_1uoq8_11{position:absolute;top:0;right:0;bottom:0;left:0}._higlass-scroll-container-overflow_1uoq8_10{overflow:hidden}._higlass-scroll-container-scroll_1uoq8_11{overflow-x:hidden;overflow-y:auto}._higlass-canvas_1uoq8_28{position:absolute;width:100%;height:100%}._higlass-drawing-surface_1uoq8_34{position:relative}._higlass-svg_1uoq8_38{position:absolute;width:100%;height:100%;left:0;top:0;pointer-events:none}._tiled-area_1uoq8_47{display:flex;flex-direction:column}._track-mouseover-menu_1uoq8_52{position:fixed;z-index:1;margin:17px 0 0 9px;padding:0 .25rem;max-width:50vw;word-wrap:break-word;font-size:.8em;pointer-events:none;background:white;border-radius:.25rem;box-shadow:0 0 0 1px #0000001a,0 0 3px #00000013,0 0 7px #0000000d}.react-grid-layout{position:relative;transition:height .2s ease}.react-grid-item{transition:all .2s ease;transition-property:left,top}.react-grid-item.cssTransforms{transition-property:transform}.react-grid-item.resizing{z-index:1;will-change:width,height}.react-grid-item.react-draggable-dragging{transition:none;z-index:3;will-change:transform}.react-grid-item.react-grid-placeholder{background:red;opacity:.2;transition-duration:.1s;z-index:2;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.react-grid-item>.react-resizable-handle{position:absolute;width:20px;height:20px;bottom:0;right:0;cursor:se-resize}.react-grid-item>.react-resizable-handle:after{content:"";position:absolute;right:3px;bottom:3px;width:5px;height:5px;border-right:2px solid rgba(0,0,0,.4);border-bottom:2px solid rgba(0,0,0,.4)}.react-resizable{position:relative}.react-resizable-handle{position:absolute;width:20px;height:20px;background-repeat:no-repeat;background-origin:content-box;box-sizing:border-box;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDYiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmYwMCIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2cHgiIGhlaWdodD0iNnB4Ij48ZyBvcGFjaXR5PSIwLjMwMiI+PHBhdGggZD0iTSA2IDYgTCAwIDYgTCAwIDQuMiBMIDQgNC4yIEwgNC4yIDQuMiBMIDQuMiAwIEwgNiAwIEwgNiA2IEwgNiA2IFoiIGZpbGw9IiMwMDAwMDAiLz48L2c+PC9zdmc+);background-position:bottom right;padding:0 3px 3px 0}.react-resizable-handle-sw{bottom:0;left:0;cursor:sw-resize;transform:rotate(90deg)}.react-resizable-handle-se{bottom:0;right:0;cursor:se-resize}.react-resizable-handle-nw{top:0;left:0;cursor:nw-resize;transform:rotate(180deg)}.react-resizable-handle-ne{top:0;right:0;cursor:ne-resize;transform:rotate(270deg)}.react-resizable-handle-w,.react-resizable-handle-e{top:50%;margin-top:-10px;cursor:ew-resize}.react-resizable-handle-w{left:0;transform:rotate(135deg)}.react-resizable-handle-e{right:0;transform:rotate(315deg)}.react-resizable-handle-n,.react-resizable-handle-s{left:50%;margin-left:-10px;cursor:ns-resize}.react-resizable-handle-n{top:0;transform:rotate(225deg)}.react-resizable-handle-s{bottom:0;transform:rotate(45deg)}code[class*=language-],pre[class*=language-]{color:#393a34;font-family:Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{background:#b3d4fc}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{background:#b3d4fc}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border:1px solid #dddddd;background-color:#fff}:not(pre)>code[class*=language-]{padding:1px .2em;background:#f8f8f8;border:1px solid #dddddd}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#998;font-style:italic}.token.namespace{opacity:.7}.token.string,.token.attr-value{color:#e3116c}.token.punctuation,.token.operator{color:#393a34}.token.entity,.token.url,.token.symbol,.token.number,.token.boolean,.token.variable,.token.constant,.token.property,.token.regex,.token.inserted{color:#36acaa}.token.atrule,.token.keyword,.token.attr-name,.language-autohotkey .token.selector{color:#00a4db}.token.function,.token.deleted,.language-autohotkey .token.tag{color:#9a050f}.token.tag,.token.selector,.language-autohotkey .token.keyword{color:#00009f}.token.important,.token.function,.token.bold{font-weight:700}.token.italic{font-style:italic}.higlass *{box-sizing:border-box}.higlass .react-resizable-handle{z-index:1}')), document.head.appendChild(e12);
    }
  } catch (t) {
    console.error("vite-plugin-css-injected-by-js", t);
  }
})();
var De = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : {};
function Ui(e12) {
  return e12 && e12.__esModule && Object.prototype.hasOwnProperty.call(e12, "default") ? e12.default : e12;
}
function zs(e12) {
  if (e12.__esModule)
    return e12;
  var t = e12.default;
  if (typeof t == "function") {
    var r = function n() {
      return this instanceof n ? Reflect.construct(t, arguments, this.constructor) : t.apply(this, arguments);
    };
    r.prototype = t.prototype;
  } else
    r = {};
  return Object.defineProperty(r, "__esModule", {
    value: true
  }), Object.keys(e12).forEach(function(n) {
    var i = Object.getOwnPropertyDescriptor(e12, n);
    Object.defineProperty(r, n, i.get ? i : {
      enumerable: true,
      get: function() {
        return e12[n];
      }
    });
  }), r;
}
var C8 = { exports: {} };
var Cie = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";
var xie = Cie;
var kie = xie;
function x8() {
}
function k8() {
}
k8.resetWarningCache = x8;
var Die = function() {
  function e12(n, i, o, a, s, l) {
    if (l !== kie) {
      var u = new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");
      throw u.name = "Invariant Violation", u;
    }
  }
  e12.isRequired = e12;
  function t() {
    return e12;
  }
  var r = {
    array: e12,
    bigint: e12,
    bool: e12,
    func: e12,
    number: e12,
    object: e12,
    string: e12,
    symbol: e12,
    any: e12,
    arrayOf: t,
    element: e12,
    elementType: e12,
    instanceOf: t,
    node: e12,
    objectOf: t,
    oneOf: t,
    oneOfType: t,
    shape: t,
    exact: t,
    checkPropTypes: k8,
    resetWarningCache: x8
  };
  return r.PropTypes = r, r;
};
C8.exports = Die();
var Vs = C8.exports;
var L = Ui(Vs);
var VI = "http://www.w3.org/1999/xhtml";
var XI = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: VI,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};
function Wu(e12) {
  var t = e12 += "", r = t.indexOf(":");
  return r >= 0 && (t = e12.slice(0, r)) !== "xmlns" && (e12 = e12.slice(r + 1)), XI.hasOwnProperty(t) ? {
    space: XI[t],
    local: e12
  } : e12;
}
function Rie(e12) {
  return function() {
    var t = this.ownerDocument, r = this.namespaceURI;
    return r === VI && t.documentElement.namespaceURI === VI ? t.createElement(e12) : t.createElementNS(r, e12);
  };
}
function Nie(e12) {
  return function() {
    return this.ownerDocument.createElementNS(e12.space, e12.local);
  };
}
function UE(e12) {
  var t = Wu(e12);
  return (t.local ? Nie : Rie)(t);
}
function Mie() {
}
function Lv(e12) {
  return e12 == null ? Mie : function() {
    return this.querySelector(e12);
  };
}
function Lie(e12) {
  typeof e12 != "function" && (e12 = Lv(e12));
  for (var t = this._groups, r = t.length, n = new Array(r), i = 0; i < r; ++i)
    for (var o = t[i], a = o.length, s = n[i] = new Array(a), l, u, c = 0; c < a; ++c)
      (l = o[c]) && (u = e12.call(l, l.__data__, c, o)) && ("__data__" in l && (u.__data__ = l.__data__), s[c] = u);
  return new ti(n, this._parents);
}
function RD(e12) {
  return typeof e12 == "object" && "length" in e12 ? e12 : Array.from(e12);
}
function Bie() {
  return [];
}
function jE(e12) {
  return e12 == null ? Bie : function() {
    return this.querySelectorAll(e12);
  };
}
function Fie(e12) {
  return function() {
    var t = e12.apply(this, arguments);
    return t == null ? [] : RD(t);
  };
}
function $ie(e12) {
  typeof e12 == "function" ? e12 = Fie(e12) : e12 = jE(e12);
  for (var t = this._groups, r = t.length, n = [], i = [], o = 0; o < r; ++o)
    for (var a = t[o], s = a.length, l, u = 0; u < s; ++u)
      (l = a[u]) && (n.push(e12.call(l, l.__data__, u, a)), i.push(l));
  return new ti(n, i);
}
function GE(e12) {
  return function() {
    return this.matches(e12);
  };
}
function D8(e12) {
  return function(t) {
    return t.matches(e12);
  };
}
var Hie = Array.prototype.find;
function Uie(e12) {
  return function() {
    return Hie.call(this.children, e12);
  };
}
function jie() {
  return this.firstElementChild;
}
function Gie(e12) {
  return this.select(e12 == null ? jie : Uie(typeof e12 == "function" ? e12 : D8(e12)));
}
var zie = Array.prototype.filter;
function Vie() {
  return this.children;
}
function Xie(e12) {
  return function() {
    return zie.call(this.children, e12);
  };
}
function Wie(e12) {
  return this.selectAll(e12 == null ? Vie : Xie(typeof e12 == "function" ? e12 : D8(e12)));
}
function Yie(e12) {
  typeof e12 != "function" && (e12 = GE(e12));
  for (var t = this._groups, r = t.length, n = new Array(r), i = 0; i < r; ++i)
    for (var o = t[i], a = o.length, s = n[i] = [], l, u = 0; u < a; ++u)
      (l = o[u]) && e12.call(l, l.__data__, u, o) && s.push(l);
  return new ti(n, this._parents);
}
function R8(e12) {
  return new Array(e12.length);
}
function qie() {
  return new ti(this._enter || this._groups.map(R8), this._parents);
}
function s0(e12, t) {
  this.ownerDocument = e12.ownerDocument, this.namespaceURI = e12.namespaceURI, this._next = null, this._parent = e12, this.__data__ = t;
}
s0.prototype = {
  constructor: s0,
  appendChild: function(e12) {
    return this._parent.insertBefore(e12, this._next);
  },
  insertBefore: function(e12, t) {
    return this._parent.insertBefore(e12, t);
  },
  querySelector: function(e12) {
    return this._parent.querySelector(e12);
  },
  querySelectorAll: function(e12) {
    return this._parent.querySelectorAll(e12);
  }
};
function Kie(e12) {
  return function() {
    return e12;
  };
}
function Zie(e12, t, r, n, i, o) {
  for (var a = 0, s, l = t.length, u = o.length; a < u; ++a)
    (s = t[a]) ? (s.__data__ = o[a], n[a] = s) : r[a] = new s0(e12, o[a]);
  for (; a < l; ++a)
    (s = t[a]) && (i[a] = s);
}
function Qie(e12, t, r, n, i, o, a) {
  var s, l, u = /* @__PURE__ */ new Map(), c = t.length, f = o.length, h = new Array(c), d;
  for (s = 0; s < c; ++s)
    (l = t[s]) && (h[s] = d = a.call(l, l.__data__, s, t) + "", u.has(d) ? i[s] = l : u.set(d, l));
  for (s = 0; s < f; ++s)
    d = a.call(e12, o[s], s, o) + "", (l = u.get(d)) ? (n[s] = l, l.__data__ = o[s], u.delete(d)) : r[s] = new s0(e12, o[s]);
  for (s = 0; s < c; ++s)
    (l = t[s]) && u.get(h[s]) === l && (i[s] = l);
}
function Jie(e12) {
  return e12.__data__;
}
function eoe(e12, t) {
  if (!arguments.length)
    return Array.from(this, Jie);
  var r = t ? Qie : Zie, n = this._parents, i = this._groups;
  typeof e12 != "function" && (e12 = Kie(e12));
  for (var o = i.length, a = new Array(o), s = new Array(o), l = new Array(o), u = 0; u < o; ++u) {
    var c = n[u], f = i[u], h = f.length, d = RD(e12.call(c, c && c.__data__, u, n)), p = d.length, m = s[u] = new Array(p), g = a[u] = new Array(p), v = l[u] = new Array(h);
    r(c, f, m, g, v, d, t);
    for (var _ = 0, y = 0, b, T; _ < p; ++_)
      if (b = m[_]) {
        for (_ >= y && (y = _ + 1); !(T = g[y]) && ++y < p; )
          ;
        b._next = T || null;
      }
  }
  return a = new ti(a, n), a._enter = s, a._exit = l, a;
}
function toe() {
  return new ti(this._exit || this._groups.map(R8), this._parents);
}
function roe(e12, t, r) {
  var n = this.enter(), i = this, o = this.exit();
  return n = typeof e12 == "function" ? e12(n) : n.append(e12 + ""), t != null && (i = t(i)), r == null ? o.remove() : r(o), n && i ? n.merge(i).order() : i;
}
function noe(e12) {
  if (!(e12 instanceof ti))
    throw new Error("invalid merge");
  for (var t = this._groups, r = e12._groups, n = t.length, i = r.length, o = Math.min(n, i), a = new Array(n), s = 0; s < o; ++s)
    for (var l = t[s], u = r[s], c = l.length, f = a[s] = new Array(c), h, d = 0; d < c; ++d)
      (h = l[d] || u[d]) && (f[d] = h);
  for (; s < n; ++s)
    a[s] = t[s];
  return new ti(a, this._parents);
}
function ioe() {
  for (var e12 = this._groups, t = -1, r = e12.length; ++t < r; )
    for (var n = e12[t], i = n.length - 1, o = n[i], a; --i >= 0; )
      (a = n[i]) && (o && a.compareDocumentPosition(o) ^ 4 && o.parentNode.insertBefore(a, o), o = a);
  return this;
}
function ooe(e12) {
  e12 || (e12 = aoe);
  function t(f, h) {
    return f && h ? e12(f.__data__, h.__data__) : !f - !h;
  }
  for (var r = this._groups, n = r.length, i = new Array(n), o = 0; o < n; ++o) {
    for (var a = r[o], s = a.length, l = i[o] = new Array(s), u, c = 0; c < s; ++c)
      (u = a[c]) && (l[c] = u);
    l.sort(t);
  }
  return new ti(i, this._parents).order();
}
function aoe(e12, t) {
  return e12 < t ? -1 : e12 > t ? 1 : e12 >= t ? 0 : NaN;
}
function soe() {
  var e12 = arguments[0];
  return arguments[0] = this, e12.apply(null, arguments), this;
}
function loe() {
  return Array.from(this);
}
function coe() {
  for (var e12 = this._groups, t = 0, r = e12.length; t < r; ++t)
    for (var n = e12[t], i = 0, o = n.length; i < o; ++i) {
      var a = n[i];
      if (a)
        return a;
    }
  return null;
}
function uoe() {
  let e12 = 0;
  for (const t of this)
    ++e12;
  return e12;
}
function hoe() {
  return !this.node();
}
function foe(e12) {
  for (var t = this._groups, r = 0, n = t.length; r < n; ++r)
    for (var i = t[r], o = 0, a = i.length, s; o < a; ++o)
      (s = i[o]) && e12.call(s, s.__data__, o, i);
  return this;
}
function doe(e12) {
  return function() {
    this.removeAttribute(e12);
  };
}
function poe(e12) {
  return function() {
    this.removeAttributeNS(e12.space, e12.local);
  };
}
function moe(e12, t) {
  return function() {
    this.setAttribute(e12, t);
  };
}
function goe(e12, t) {
  return function() {
    this.setAttributeNS(e12.space, e12.local, t);
  };
}
function voe(e12, t) {
  return function() {
    var r = t.apply(this, arguments);
    r == null ? this.removeAttribute(e12) : this.setAttribute(e12, r);
  };
}
function yoe(e12, t) {
  return function() {
    var r = t.apply(this, arguments);
    r == null ? this.removeAttributeNS(e12.space, e12.local) : this.setAttributeNS(e12.space, e12.local, r);
  };
}
function _oe(e12, t) {
  var r = Wu(e12);
  if (arguments.length < 2) {
    var n = this.node();
    return r.local ? n.getAttributeNS(r.space, r.local) : n.getAttribute(r);
  }
  return this.each((t == null ? r.local ? poe : doe : typeof t == "function" ? r.local ? yoe : voe : r.local ? goe : moe)(r, t));
}
function ND(e12) {
  return e12.ownerDocument && e12.ownerDocument.defaultView || e12.document && e12 || e12.defaultView;
}
function boe(e12) {
  return function() {
    this.style.removeProperty(e12);
  };
}
function Toe(e12, t, r) {
  return function() {
    this.style.setProperty(e12, t, r);
  };
}
function Eoe(e12, t, r) {
  return function() {
    var n = t.apply(this, arguments);
    n == null ? this.style.removeProperty(e12) : this.style.setProperty(e12, n, r);
  };
}
function Soe(e12, t, r) {
  return arguments.length > 1 ? this.each((t == null ? boe : typeof t == "function" ? Eoe : Toe)(e12, t, r ?? "")) : xo(this.node(), e12);
}
function xo(e12, t) {
  return e12.style.getPropertyValue(t) || ND(e12).getComputedStyle(e12, null).getPropertyValue(t);
}
function woe(e12) {
  return function() {
    delete this[e12];
  };
}
function Aoe(e12, t) {
  return function() {
    this[e12] = t;
  };
}
function Ooe(e12, t) {
  return function() {
    var r = t.apply(this, arguments);
    r == null ? delete this[e12] : this[e12] = r;
  };
}
function Ioe(e12, t) {
  return arguments.length > 1 ? this.each((t == null ? woe : typeof t == "function" ? Ooe : Aoe)(e12, t)) : this.node()[e12];
}
function N8(e12) {
  return e12.trim().split(/^|\s+/);
}
function MD(e12) {
  return e12.classList || new M8(e12);
}
function M8(e12) {
  this._node = e12, this._names = N8(e12.getAttribute("class") || "");
}
M8.prototype = {
  add: function(e12) {
    var t = this._names.indexOf(e12);
    t < 0 && (this._names.push(e12), this._node.setAttribute("class", this._names.join(" ")));
  },
  remove: function(e12) {
    var t = this._names.indexOf(e12);
    t >= 0 && (this._names.splice(t, 1), this._node.setAttribute("class", this._names.join(" ")));
  },
  contains: function(e12) {
    return this._names.indexOf(e12) >= 0;
  }
};
function L8(e12, t) {
  for (var r = MD(e12), n = -1, i = t.length; ++n < i; )
    r.add(t[n]);
}
function B8(e12, t) {
  for (var r = MD(e12), n = -1, i = t.length; ++n < i; )
    r.remove(t[n]);
}
function Poe(e12) {
  return function() {
    L8(this, e12);
  };
}
function Coe(e12) {
  return function() {
    B8(this, e12);
  };
}
function xoe(e12, t) {
  return function() {
    (t.apply(this, arguments) ? L8 : B8)(this, e12);
  };
}
function koe(e12, t) {
  var r = N8(e12 + "");
  if (arguments.length < 2) {
    for (var n = MD(this.node()), i = -1, o = r.length; ++i < o; )
      if (!n.contains(r[i]))
        return false;
    return true;
  }
  return this.each((typeof t == "function" ? xoe : t ? Poe : Coe)(r, t));
}
function Doe() {
  this.textContent = "";
}
function Roe(e12) {
  return function() {
    this.textContent = e12;
  };
}
function Noe(e12) {
  return function() {
    var t = e12.apply(this, arguments);
    this.textContent = t ?? "";
  };
}
function Moe(e12) {
  return arguments.length ? this.each(e12 == null ? Doe : (typeof e12 == "function" ? Noe : Roe)(e12)) : this.node().textContent;
}
function Loe() {
  this.innerHTML = "";
}
function Boe(e12) {
  return function() {
    this.innerHTML = e12;
  };
}
function Foe(e12) {
  return function() {
    var t = e12.apply(this, arguments);
    this.innerHTML = t ?? "";
  };
}
function $oe(e12) {
  return arguments.length ? this.each(e12 == null ? Loe : (typeof e12 == "function" ? Foe : Boe)(e12)) : this.node().innerHTML;
}
function Hoe() {
  this.nextSibling && this.parentNode.appendChild(this);
}
function Uoe() {
  return this.each(Hoe);
}
function joe() {
  this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function Goe() {
  return this.each(joe);
}
function zoe(e12) {
  var t = typeof e12 == "function" ? e12 : UE(e12);
  return this.select(function() {
    return this.appendChild(t.apply(this, arguments));
  });
}
function Voe() {
  return null;
}
function Xoe(e12, t) {
  var r = typeof e12 == "function" ? e12 : UE(e12), n = t == null ? Voe : typeof t == "function" ? t : Lv(t);
  return this.select(function() {
    return this.insertBefore(r.apply(this, arguments), n.apply(this, arguments) || null);
  });
}
function Woe() {
  var e12 = this.parentNode;
  e12 && e12.removeChild(this);
}
function Yoe() {
  return this.each(Woe);
}
function qoe() {
  var e12 = this.cloneNode(false), t = this.parentNode;
  return t ? t.insertBefore(e12, this.nextSibling) : e12;
}
function Koe() {
  var e12 = this.cloneNode(true), t = this.parentNode;
  return t ? t.insertBefore(e12, this.nextSibling) : e12;
}
function Zoe(e12) {
  return this.select(e12 ? Koe : qoe);
}
function Qoe(e12) {
  return arguments.length ? this.property("__data__", e12) : this.node().__data__;
}
function Joe(e12) {
  return function(t) {
    e12.call(this, t, this.__data__);
  };
}
function eae(e12) {
  return e12.trim().split(/^|\s+/).map(function(t) {
    var r = "", n = t.indexOf(".");
    return n >= 0 && (r = t.slice(n + 1), t = t.slice(0, n)), {
      type: t,
      name: r
    };
  });
}
function tae(e12) {
  return function() {
    var t = this.__on;
    if (t) {
      for (var r = 0, n = -1, i = t.length, o; r < i; ++r)
        o = t[r], (!e12.type || o.type === e12.type) && o.name === e12.name ? this.removeEventListener(o.type, o.listener, o.options) : t[++n] = o;
      ++n ? t.length = n : delete this.__on;
    }
  };
}
function rae(e12, t, r) {
  return function() {
    var n = this.__on, i, o = Joe(t);
    if (n) {
      for (var a = 0, s = n.length; a < s; ++a)
        if ((i = n[a]).type === e12.type && i.name === e12.name) {
          this.removeEventListener(i.type, i.listener, i.options), this.addEventListener(i.type, i.listener = o, i.options = r), i.value = t;
          return;
        }
    }
    this.addEventListener(e12.type, o, r), i = {
      type: e12.type,
      name: e12.name,
      value: t,
      listener: o,
      options: r
    }, n ? n.push(i) : this.__on = [i];
  };
}
function nae(e12, t, r) {
  var n = eae(e12 + ""), i, o = n.length, a;
  if (arguments.length < 2) {
    var s = this.node().__on;
    if (s) {
      for (var l = 0, u = s.length, c; l < u; ++l)
        for (i = 0, c = s[l]; i < o; ++i)
          if ((a = n[i]).type === c.type && a.name === c.name)
            return c.value;
    }
    return;
  }
  for (s = t ? rae : tae, i = 0; i < o; ++i)
    this.each(s(n[i], t, r));
  return this;
}
function F8(e12, t, r) {
  var n = ND(e12), i = n.CustomEvent;
  typeof i == "function" ? i = new i(t, r) : (i = n.document.createEvent("Event"), r ? (i.initEvent(t, r.bubbles, r.cancelable), i.detail = r.detail) : i.initEvent(t, false, false)), e12.dispatchEvent(i);
}
function iae(e12, t) {
  return function() {
    return F8(this, e12, t);
  };
}
function oae(e12, t) {
  return function() {
    return F8(this, e12, t.apply(this, arguments));
  };
}
function aae(e12, t) {
  return this.each((typeof t == "function" ? oae : iae)(e12, t));
}
function* sae() {
  for (var e12 = this._groups, t = 0, r = e12.length; t < r; ++t)
    for (var n = e12[t], i = 0, o = n.length, a; i < o; ++i)
      (a = n[i]) && (yield a);
}
var LD = [null];
function ti(e12, t) {
  this._groups = e12, this._parents = t;
}
function oa() {
  return new ti([[document.documentElement]], LD);
}
function lae() {
  return this;
}
ti.prototype = oa.prototype = {
  constructor: ti,
  select: Lie,
  selectAll: $ie,
  selectChild: Gie,
  selectChildren: Wie,
  filter: Yie,
  data: eoe,
  enter: qie,
  exit: toe,
  join: roe,
  merge: noe,
  selection: lae,
  order: ioe,
  sort: ooe,
  call: soe,
  nodes: loe,
  node: coe,
  size: uoe,
  empty: hoe,
  each: foe,
  attr: _oe,
  style: Soe,
  property: Ioe,
  classed: koe,
  text: Moe,
  html: $oe,
  raise: Uoe,
  lower: Goe,
  append: zoe,
  insert: Xoe,
  remove: Yoe,
  clone: Zoe,
  datum: Qoe,
  on: nae,
  dispatch: aae,
  [Symbol.iterator]: sae
};
function Wt(e12) {
  return typeof e12 == "string" ? new ti([[document.querySelector(e12)]], [document.documentElement]) : new ti([[e12]], LD);
}
function cae(e12) {
  return Wt(UE(e12).call(document.documentElement));
}
var uae = 0;
function $8() {
  return new WI();
}
function WI() {
  this._ = "@" + (++uae).toString(36);
}
WI.prototype = $8.prototype = {
  constructor: WI,
  get: function(e12) {
    for (var t = this._; !(t in e12); )
      if (!(e12 = e12.parentNode))
        return;
    return e12[t];
  },
  set: function(e12, t) {
    return e12[this._] = t;
  },
  remove: function(e12) {
    return this._ in e12 && delete e12[this._];
  },
  toString: function() {
    return this._;
  }
};
function H8(e12) {
  let t;
  for (; t = e12.sourceEvent; )
    e12 = t;
  return e12;
}
function vr(e12, t) {
  if (e12 = H8(e12), t === void 0 && (t = e12.currentTarget), t) {
    var r = t.ownerSVGElement || t;
    if (r.createSVGPoint) {
      var n = r.createSVGPoint();
      return n.x = e12.clientX, n.y = e12.clientY, n = n.matrixTransform(t.getScreenCTM().inverse()), [n.x, n.y];
    }
    if (t.getBoundingClientRect) {
      var i = t.getBoundingClientRect();
      return [e12.clientX - i.left - t.clientLeft, e12.clientY - i.top - t.clientTop];
    }
  }
  return [e12.pageX, e12.pageY];
}
function hae(e12, t) {
  return e12.target && (e12 = H8(e12), t === void 0 && (t = e12.currentTarget), e12 = e12.touches || [e12]), Array.from(e12, (r) => vr(r, t));
}
function fae(e12) {
  return typeof e12 == "string" ? new ti([document.querySelectorAll(e12)], [document.documentElement]) : new ti([e12 == null ? [] : RD(e12)], LD);
}
var dae = Object.freeze(Object.defineProperty({
  __proto__: null,
  create: cae,
  creator: UE,
  local: $8,
  matcher: GE,
  namespace: Wu,
  namespaces: XI,
  pointer: vr,
  pointers: hae,
  select: Wt,
  selectAll: fae,
  selection: oa,
  selector: Lv,
  selectorAll: jE,
  style: xo,
  window: ND
}, Symbol.toStringTag, { value: "Module" }));
function an(e12, t) {
  return e12 < t ? -1 : e12 > t ? 1 : e12 >= t ? 0 : NaN;
}
function Jd(e12) {
  let t = e12, r = e12;
  e12.length === 1 && (t = (a, s) => e12(a) - s, r = pae(e12));
  function n(a, s, l, u) {
    for (l == null && (l = 0), u == null && (u = a.length); l < u; ) {
      const c = l + u >>> 1;
      r(a[c], s) < 0 ? l = c + 1 : u = c;
    }
    return l;
  }
  function i(a, s, l, u) {
    for (l == null && (l = 0), u == null && (u = a.length); l < u; ) {
      const c = l + u >>> 1;
      r(a[c], s) > 0 ? u = c : l = c + 1;
    }
    return l;
  }
  function o(a, s, l, u) {
    l == null && (l = 0), u == null && (u = a.length);
    const c = n(a, s, l, u - 1);
    return c > l && t(a[c - 1], s) > -t(a[c], s) ? c - 1 : c;
  }
  return {
    left: n,
    center: o,
    right: i
  };
}
function pae(e12) {
  return (t, r) => an(e12(t), r);
}
function U8(e12) {
  return e12 === null ? NaN : +e12;
}
function* mae(e12, t) {
  if (t === void 0)
    for (let r of e12)
      r != null && (r = +r) >= r && (yield r);
  else {
    let r = -1;
    for (let n of e12)
      (n = t(n, ++r, e12)) != null && (n = +n) >= n && (yield n);
  }
}
var j8 = Jd(an);
var G8 = j8.right;
var gae = j8.left;
var vae = Jd(U8).center;
var Yu = G8;
function zE(e12, t) {
  let r = 0;
  if (t === void 0)
    for (let n of e12)
      n != null && (n = +n) >= n && ++r;
  else {
    let n = -1;
    for (let i of e12)
      (i = t(i, ++n, e12)) != null && (i = +i) >= i && ++r;
  }
  return r;
}
function yae(e12) {
  return e12.length | 0;
}
function _ae(e12) {
  return !(e12 > 0);
}
function bae(e12) {
  return typeof e12 != "object" || "length" in e12 ? e12 : Array.from(e12);
}
function Tae(e12) {
  return (t) => e12(...t);
}
function Eae(...e12) {
  const t = typeof e12[e12.length - 1] == "function" && Tae(e12.pop());
  e12 = e12.map(bae);
  const r = e12.map(yae), n = e12.length - 1, i = new Array(n + 1).fill(0), o = [];
  if (n < 0 || r.some(_ae))
    return o;
  for (; ; ) {
    o.push(i.map((s, l) => e12[l][s]));
    let a = n;
    for (; ++i[a] === r[a]; ) {
      if (a === 0)
        return t ? o.map(t) : o;
      i[a--] = 0;
    }
  }
}
function Sae(e12, t) {
  var r = 0, n = 0;
  return Float64Array.from(e12, t === void 0 ? (i) => r += +i || 0 : (i) => r += +t(i, n++, e12) || 0);
}
function wae(e12, t) {
  return t < e12 ? -1 : t > e12 ? 1 : t >= e12 ? 0 : NaN;
}
function BD(e12, t) {
  let r = 0, n, i = 0, o = 0;
  if (t === void 0)
    for (let a of e12)
      a != null && (a = +a) >= a && (n = a - i, i += n / ++r, o += n * (a - i));
  else {
    let a = -1;
    for (let s of e12)
      (s = t(s, ++a, e12)) != null && (s = +s) >= s && (n = s - i, i += n / ++r, o += n * (s - i));
  }
  if (r > 1)
    return o / (r - 1);
}
function FD(e12, t) {
  const r = BD(e12, t);
  return r && Math.sqrt(r);
}
function rb(e12, t) {
  let r, n;
  if (t === void 0)
    for (const i of e12)
      i != null && (r === void 0 ? i >= i && (r = n = i) : (r > i && (r = i), n < i && (n = i)));
  else {
    let i = -1;
    for (let o of e12)
      (o = t(o, ++i, e12)) != null && (r === void 0 ? o >= o && (r = n = o) : (r > o && (r = o), n < o && (n = o)));
  }
  return [r, n];
}
function Aae(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function cB(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, Iae(n.key), n);
  }
}
function Oae(e12, t, r) {
  return t && cB(e12.prototype, t), r && cB(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function Iae(e12) {
  var t = Pae(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function Pae(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
var gn = function() {
  function e12() {
    Aae(this, e12), this._partials = new Float64Array(32), this._n = 0;
  }
  return Oae(e12, [{
    key: "add",
    value: function(r) {
      const n = this._partials;
      let i = 0;
      for (let o = 0; o < this._n && o < 32; o++) {
        const a = n[o], s = r + a, l = Math.abs(r) < Math.abs(a) ? r - (s - a) : a - (s - r);
        l && (n[i++] = l), r = s;
      }
      return n[i] = r, this._n = i + 1, this;
    }
  }, {
    key: "valueOf",
    value: function() {
      const r = this._partials;
      let n = this._n, i, o, a, s = 0;
      if (n > 0) {
        for (s = r[--n]; n > 0 && (i = s, o = r[--n], s = i + o, a = o - (s - i), !a); )
          ;
        n > 0 && (a < 0 && r[n - 1] < 0 || a > 0 && r[n - 1] > 0) && (o = a * 2, i = s + o, o == i - s && (s = i));
      }
      return s;
    }
  }]), e12;
}();
function Cae(e12, t) {
  const r = new gn();
  if (t === void 0)
    for (let n of e12)
      (n = +n) && r.add(n);
  else {
    let n = -1;
    for (let i of e12)
      (i = +t(i, ++n, e12)) && r.add(i);
  }
  return +r;
}
function xae(e12, t) {
  const r = new gn();
  let n = -1;
  return Float64Array.from(e12, t === void 0 ? (i) => r.add(+i || 0) : (i) => r.add(+t(i, ++n, e12) || 0));
}
function z8(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function uB(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, kae(n.key), n);
  }
}
function V8(e12, t, r) {
  return t && uB(e12.prototype, t), r && uB(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function kae(e12) {
  var t = Dae(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function Dae(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Na() {
  return typeof Reflect < "u" && Reflect.get ? Na = Reflect.get.bind() : Na = function(t, r, n) {
    var i = Rae(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Na.apply(this, arguments);
}
function Rae(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = no(e12), e12 !== null); )
    ;
  return e12;
}
function X8(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && qg(e12, t);
}
function W8(e12) {
  var t = Y8();
  return function() {
    var n = no(e12), i;
    if (t) {
      var o = no(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return Nae(this, i);
  };
}
function Nae(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return $D(e12);
}
function $D(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function l0(e12) {
  var t = typeof Map == "function" ? /* @__PURE__ */ new Map() : void 0;
  return l0 = function(n) {
    if (n === null || !Mae(n))
      return n;
    if (typeof n != "function")
      throw new TypeError("Super expression must either be null or a function");
    if (typeof t < "u") {
      if (t.has(n))
        return t.get(n);
      t.set(n, i);
    }
    function i() {
      return nb(n, arguments, no(this).constructor);
    }
    return i.prototype = Object.create(n.prototype, { constructor: { value: i, enumerable: false, writable: true, configurable: true } }), qg(i, n);
  }, l0(e12);
}
function nb(e12, t, r) {
  return Y8() ? nb = Reflect.construct.bind() : nb = function(i, o, a) {
    var s = [null];
    s.push.apply(s, o);
    var l = Function.bind.apply(i, s), u = new l();
    return a && qg(u, a.prototype), u;
  }, nb.apply(null, arguments);
}
function Y8() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Mae(e12) {
  try {
    return Function.toString.call(e12).indexOf("[native code]") !== -1;
  } catch {
    return typeof e12 == "function";
  }
}
function qg(e12, t) {
  return qg = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, qg(e12, t);
}
function no(e12) {
  return no = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, no(e12);
}
var c0 = function(e12) {
  X8(r, e12);
  var t = W8(r);
  function r(n, i = Z8) {
    var o;
    if (z8(this, r), o = t.call(this), Object.defineProperties($D(o), {
      _intern: {
        value: /* @__PURE__ */ new Map()
      },
      _key: {
        value: i
      }
    }), n != null)
      for (const [a, s] of n)
        o.set(a, s);
    return o;
  }
  return V8(r, [{
    key: "get",
    value: function(i) {
      return Na(no(r.prototype), "get", this).call(this, YI(this, i));
    }
  }, {
    key: "has",
    value: function(i) {
      return Na(no(r.prototype), "has", this).call(this, YI(this, i));
    }
  }, {
    key: "set",
    value: function(i, o) {
      return Na(no(r.prototype), "set", this).call(this, q8(this, i), o);
    }
  }, {
    key: "delete",
    value: function(i) {
      return Na(no(r.prototype), "delete", this).call(this, K8(this, i));
    }
  }]), r;
}(l0(Map));
var Lae = function(e12) {
  X8(r, e12);
  var t = W8(r);
  function r(n, i = Z8) {
    var o;
    if (z8(this, r), o = t.call(this), Object.defineProperties($D(o), {
      _intern: {
        value: /* @__PURE__ */ new Map()
      },
      _key: {
        value: i
      }
    }), n != null)
      for (const a of n)
        o.add(a);
    return o;
  }
  return V8(r, [{
    key: "has",
    value: function(i) {
      return Na(no(r.prototype), "has", this).call(this, YI(this, i));
    }
  }, {
    key: "add",
    value: function(i) {
      return Na(no(r.prototype), "add", this).call(this, q8(this, i));
    }
  }, {
    key: "delete",
    value: function(i) {
      return Na(no(r.prototype), "delete", this).call(this, K8(this, i));
    }
  }]), r;
}(l0(Set));
function YI({
  _intern: e12,
  _key: t
}, r) {
  const n = t(r);
  return e12.has(n) ? e12.get(n) : r;
}
function q8({
  _intern: e12,
  _key: t
}, r) {
  const n = t(r);
  return e12.has(n) ? e12.get(n) : (e12.set(n, r), r);
}
function K8({
  _intern: e12,
  _key: t
}, r) {
  const n = t(r);
  return e12.has(n) && (r = e12.get(r), e12.delete(n)), r;
}
function Z8(e12) {
  return e12 !== null && typeof e12 == "object" ? e12.valueOf() : e12;
}
function nd(e12) {
  return e12;
}
function Q8(e12, ...t) {
  return ep(e12, nd, nd, t);
}
function Bae(e12, ...t) {
  return ep(e12, Array.from, nd, t);
}
function J8(e12, t, ...r) {
  return ep(e12, nd, t, r);
}
function Fae(e12, t, ...r) {
  return ep(e12, Array.from, t, r);
}
function $ae(e12, ...t) {
  return ep(e12, nd, e9, t);
}
function Hae(e12, ...t) {
  return ep(e12, Array.from, e9, t);
}
function e9(e12) {
  if (e12.length !== 1)
    throw new Error("duplicate key");
  return e12[0];
}
function ep(e12, t, r, n) {
  return function i(o, a) {
    if (a >= n.length)
      return r(o);
    const s = new c0(), l = n[a++];
    let u = -1;
    for (const c of o) {
      const f = l(c, ++u, o), h = s.get(f);
      h ? h.push(c) : s.set(f, [c]);
    }
    for (const [c, f] of s)
      s.set(c, i(f, a));
    return t(s);
  }(e12, 0);
}
function t9(e12, t) {
  return Array.from(t, (r) => e12[r]);
}
function qI(e12, ...t) {
  if (typeof e12[Symbol.iterator] != "function")
    throw new TypeError("values is not iterable");
  e12 = Array.from(e12);
  let [r = an] = t;
  if (r.length === 1 || t.length > 1) {
    const n = Uint32Array.from(e12, (i, o) => o);
    return t.length > 1 ? (t = t.map((i) => e12.map(i)), n.sort((i, o) => {
      for (const a of t) {
        const s = an(a[i], a[o]);
        if (s)
          return s;
      }
    })) : (r = e12.map(r), n.sort((i, o) => an(r[i], r[o]))), t9(e12, n);
  }
  return e12.sort(r);
}
function Uae(e12, t, r) {
  return (t.length === 1 ? qI(J8(e12, t, r), ([n, i], [o, a]) => an(i, a) || an(n, o)) : qI(Q8(e12, r), ([n, i], [o, a]) => t(i, a) || an(n, o))).map(([n]) => n);
}
var jae = Array.prototype;
var Gae = jae.slice;
function e_(e12) {
  return function() {
    return e12;
  };
}
var KI = Math.sqrt(50);
var ZI = Math.sqrt(10);
var QI = Math.sqrt(2);
function pu(e12, t, r) {
  var n, i = -1, o, a, s;
  if (t = +t, e12 = +e12, r = +r, e12 === t && r > 0)
    return [e12];
  if ((n = t < e12) && (o = e12, e12 = t, t = o), (s = Bv(e12, t, r)) === 0 || !isFinite(s))
    return [];
  if (s > 0) {
    let l = Math.round(e12 / s), u = Math.round(t / s);
    for (l * s < e12 && ++l, u * s > t && --u, a = new Array(o = u - l + 1); ++i < o; )
      a[i] = (l + i) * s;
  } else {
    s = -s;
    let l = Math.round(e12 * s), u = Math.round(t * s);
    for (l / s < e12 && ++l, u / s > t && --u, a = new Array(o = u - l + 1); ++i < o; )
      a[i] = (l + i) / s;
  }
  return n && a.reverse(), a;
}
function Bv(e12, t, r) {
  var n = (t - e12) / Math.max(0, r), i = Math.floor(Math.log(n) / Math.LN10), o = n / Math.pow(10, i);
  return i >= 0 ? (o >= KI ? 10 : o >= ZI ? 5 : o >= QI ? 2 : 1) * Math.pow(10, i) : -Math.pow(10, -i) / (o >= KI ? 10 : o >= ZI ? 5 : o >= QI ? 2 : 1);
}
function u0(e12, t, r) {
  var n = Math.abs(t - e12) / Math.max(0, r), i = Math.pow(10, Math.floor(Math.log(n) / Math.LN10)), o = n / i;
  return o >= KI ? i *= 10 : o >= ZI ? i *= 5 : o >= QI && (i *= 2), t < e12 ? -i : i;
}
function r9(e12, t, r) {
  let n;
  for (; ; ) {
    const i = Bv(e12, t, r);
    if (i === n || i === 0 || !isFinite(i))
      return [e12, t];
    i > 0 ? (e12 = Math.floor(e12 / i) * i, t = Math.ceil(t / i) * i) : i < 0 && (e12 = Math.ceil(e12 * i) / i, t = Math.floor(t * i) / i), n = i;
  }
}
function n9(e12) {
  return Math.ceil(Math.log(zE(e12)) / Math.LN2) + 1;
}
function hB() {
  var e12 = nd, t = rb, r = n9;
  function n(i) {
    Array.isArray(i) || (i = Array.from(i));
    var o, a = i.length, s, l = new Array(a);
    for (o = 0; o < a; ++o)
      l[o] = e12(i[o], o, i);
    var u = t(l), c = u[0], f = u[1], h = r(l, c, f);
    if (!Array.isArray(h)) {
      const g = f, v = +h;
      if (t === rb && ([c, f] = r9(c, f, v)), h = pu(c, f, v), h[h.length - 1] >= f)
        if (g >= f && t === rb) {
          const _ = Bv(c, f, v);
          isFinite(_) && (_ > 0 ? f = (Math.floor(f / _) + 1) * _ : _ < 0 && (f = (Math.ceil(f * -_) + 1) / -_));
        } else
          h.pop();
    }
    for (var d = h.length; h[0] <= c; )
      h.shift(), --d;
    for (; h[d - 1] > f; )
      h.pop(), --d;
    var p = new Array(d + 1), m;
    for (o = 0; o <= d; ++o)
      m = p[o] = [], m.x0 = o > 0 ? h[o - 1] : c, m.x1 = o < d ? h[o] : f;
    for (o = 0; o < a; ++o)
      s = l[o], c <= s && s <= f && p[Yu(h, s, 0, d)].push(i[o]);
    return p;
  }
  return n.value = function(i) {
    return arguments.length ? (e12 = typeof i == "function" ? i : e_(i), n) : e12;
  }, n.domain = function(i) {
    return arguments.length ? (t = typeof i == "function" ? i : e_([i[0], i[1]]), n) : t;
  }, n.thresholds = function(i) {
    return arguments.length ? (r = typeof i == "function" ? i : Array.isArray(i) ? e_(Gae.call(i)) : e_(i), n) : r;
  }, n;
}
function JI(e12, t) {
  let r;
  if (t === void 0)
    for (const n of e12)
      n != null && (r < n || r === void 0 && n >= n) && (r = n);
  else {
    let n = -1;
    for (let i of e12)
      (i = t(i, ++n, e12)) != null && (r < i || r === void 0 && i >= i) && (r = i);
  }
  return r;
}
function h0(e12, t) {
  let r;
  if (t === void 0)
    for (const n of e12)
      n != null && (r > n || r === void 0 && n >= n) && (r = n);
  else {
    let n = -1;
    for (let i of e12)
      (i = t(i, ++n, e12)) != null && (r > i || r === void 0 && i >= i) && (r = i);
  }
  return r;
}
function HD(e12, t, r = 0, n = e12.length - 1, i = an) {
  for (; n > r; ) {
    if (n - r > 600) {
      const l = n - r + 1, u = t - r + 1, c = Math.log(l), f = 0.5 * Math.exp(2 * c / 3), h = 0.5 * Math.sqrt(c * f * (l - f) / l) * (u - l / 2 < 0 ? -1 : 1), d = Math.max(r, Math.floor(t - u * f / l + h)), p = Math.min(n, Math.floor(t + (l - u) * f / l + h));
      HD(e12, t, d, p, i);
    }
    const o = e12[t];
    let a = r, s = n;
    for (Up(e12, r, t), i(e12[n], o) > 0 && Up(e12, r, n); a < s; ) {
      for (Up(e12, a, s), ++a, --s; i(e12[a], o) < 0; )
        ++a;
      for (; i(e12[s], o) > 0; )
        --s;
    }
    i(e12[r], o) === 0 ? Up(e12, r, s) : (++s, Up(e12, s, n)), s <= t && (r = s + 1), t <= s && (n = s - 1);
  }
  return e12;
}
function Up(e12, t, r) {
  const n = e12[t];
  e12[t] = e12[r], e12[r] = n;
}
function Kg(e12, t, r) {
  if (e12 = Float64Array.from(mae(e12, r)), !!(n = e12.length)) {
    if ((t = +t) <= 0 || n < 2)
      return h0(e12);
    if (t >= 1)
      return JI(e12);
    var n, i = (n - 1) * t, o = Math.floor(i), a = JI(HD(e12, o).subarray(0, o + 1)), s = h0(e12.subarray(o + 1));
    return a + (s - a) * (i - o);
  }
}
function i9(e12, t, r = U8) {
  if (n = e12.length) {
    if ((t = +t) <= 0 || n < 2)
      return +r(e12[0], 0, e12);
    if (t >= 1)
      return +r(e12[n - 1], n - 1, e12);
    var n, i = (n - 1) * t, o = Math.floor(i), a = +r(e12[o], o, e12), s = +r(e12[o + 1], o + 1, e12);
    return a + (s - a) * (i - o);
  }
}
function zae(e12, t, r) {
  return Math.ceil((r - t) / (2 * (Kg(e12, 0.75) - Kg(e12, 0.25)) * Math.pow(zE(e12), -1 / 3)));
}
function Vae(e12, t, r) {
  return Math.ceil((r - t) / (3.5 * FD(e12) * Math.pow(zE(e12), -1 / 3)));
}
function o9(e12, t) {
  let r, n = -1, i = -1;
  if (t === void 0)
    for (const o of e12)
      ++i, o != null && (r < o || r === void 0 && o >= o) && (r = o, n = i);
  else
    for (let o of e12)
      (o = t(o, ++i, e12)) != null && (r < o || r === void 0 && o >= o) && (r = o, n = i);
  return n;
}
function eP(e12, t) {
  let r = 0, n = 0;
  if (t === void 0)
    for (let i of e12)
      i != null && (i = +i) >= i && (++r, n += i);
  else {
    let i = -1;
    for (let o of e12)
      (o = t(o, ++i, e12)) != null && (o = +o) >= o && (++r, n += o);
  }
  if (r)
    return n / r;
}
function UD(e12, t) {
  return Kg(e12, 0.5, t);
}
function* Xae(e12) {
  for (const t of e12)
    yield* t;
}
function jD(e12) {
  return Array.from(Xae(e12));
}
function a9(e12, t) {
  let r, n = -1, i = -1;
  if (t === void 0)
    for (const o of e12)
      ++i, o != null && (r > o || r === void 0 && o >= o) && (r = o, n = i);
  else
    for (let o of e12)
      (o = t(o, ++i, e12)) != null && (r > o || r === void 0 && o >= o) && (r = o, n = i);
  return n;
}
function Wae(e12, t = Yae) {
  const r = [];
  let n, i = false;
  for (const o of e12)
    i && r.push(t(n, o)), n = o, i = true;
  return r;
}
function Yae(e12, t) {
  return [e12, t];
}
function yi(e12, t, r) {
  e12 = +e12, t = +t, r = (i = arguments.length) < 2 ? (t = e12, e12 = 0, 1) : i < 3 ? 1 : +r;
  for (var n = -1, i = Math.max(0, Math.ceil((t - e12) / r)) | 0, o = new Array(i); ++n < i; )
    o[n] = e12 + n * r;
  return o;
}
function qae(e12, t = an) {
  let r, n = false;
  if (t.length === 1) {
    let i;
    for (const o of e12) {
      const a = t(o);
      (n ? an(a, i) < 0 : an(a, a) === 0) && (r = o, i = a, n = true);
    }
  } else
    for (const i of e12)
      (n ? t(i, r) < 0 : t(i, i) === 0) && (r = i, n = true);
  return r;
}
function s9(e12, t = an) {
  if (t.length === 1)
    return a9(e12, t);
  let r, n = -1, i = -1;
  for (const o of e12)
    ++i, (n < 0 ? t(o, o) === 0 : t(o, r) < 0) && (r = o, n = i);
  return n;
}
function Kae(e12, t = an) {
  let r, n = false;
  if (t.length === 1) {
    let i;
    for (const o of e12) {
      const a = t(o);
      (n ? an(a, i) > 0 : an(a, a) === 0) && (r = o, i = a, n = true);
    }
  } else
    for (const i of e12)
      (n ? t(i, r) > 0 : t(i, i) === 0) && (r = i, n = true);
  return r;
}
function Zae(e12, t = an) {
  if (t.length === 1)
    return o9(e12, t);
  let r, n = -1, i = -1;
  for (const o of e12)
    ++i, (n < 0 ? t(o, o) === 0 : t(o, r) > 0) && (r = o, n = i);
  return n;
}
function Qae(e12, t) {
  const r = s9(e12, t);
  return r < 0 ? void 0 : r;
}
var Jae = l9(Math.random);
function l9(e12) {
  return function(r, n = 0, i = r.length) {
    let o = i - (n = +n);
    for (; o; ) {
      const a = e12() * o-- | 0, s = r[o + n];
      r[o + n] = r[a + n], r[a + n] = s;
    }
    return r;
  };
}
function c9(e12, t) {
  let r = 0;
  if (t === void 0)
    for (let n of e12)
      (n = +n) && (r += n);
  else {
    let n = -1;
    for (let i of e12)
      (i = +t(i, ++n, e12)) && (r += i);
  }
  return r;
}
function u9(e12) {
  if (!(o = e12.length))
    return [];
  for (var t = -1, r = h0(e12, ese), n = new Array(r); ++t < r; )
    for (var i = -1, o, a = n[t] = new Array(o); ++i < o; )
      a[i] = e12[i][t];
  return n;
}
function ese(e12) {
  return e12.length;
}
function tse() {
  return u9(arguments);
}
function rse(e12, t) {
  if (typeof t != "function")
    throw new TypeError("test is not a function");
  let r = -1;
  for (const n of e12)
    if (!t(n, ++r, e12))
      return false;
  return true;
}
function nse(e12, t) {
  if (typeof t != "function")
    throw new TypeError("test is not a function");
  let r = -1;
  for (const n of e12)
    if (t(n, ++r, e12))
      return true;
  return false;
}
function ise(e12, t) {
  if (typeof t != "function")
    throw new TypeError("test is not a function");
  const r = [];
  let n = -1;
  for (const i of e12)
    t(i, ++n, e12) && r.push(i);
  return r;
}
function ose(e12, t) {
  if (typeof e12[Symbol.iterator] != "function")
    throw new TypeError("values is not iterable");
  if (typeof t != "function")
    throw new TypeError("mapper is not a function");
  return Array.from(e12, (r, n) => t(r, n, e12));
}
function ase(e12, t, r) {
  if (typeof t != "function")
    throw new TypeError("reducer is not a function");
  const n = e12[Symbol.iterator]();
  let i, o, a = -1;
  if (arguments.length < 3) {
    if ({
      done: i,
      value: r
    } = n.next(), i)
      return;
    ++a;
  }
  for (; {
    done: i,
    value: o
  } = n.next(), !i; )
    r = t(r, o, ++a, e12);
  return r;
}
function sse(e12) {
  if (typeof e12[Symbol.iterator] != "function")
    throw new TypeError("values is not iterable");
  return Array.from(e12).reverse();
}
function lse(e12, ...t) {
  e12 = new Set(e12);
  for (const r of t)
    for (const n of r)
      e12.delete(n);
  return e12;
}
function cse(e12, t) {
  const r = t[Symbol.iterator](), n = /* @__PURE__ */ new Set();
  for (const i of e12) {
    if (n.has(i))
      return false;
    let o, a;
    for (; ({
      value: o,
      done: a
    } = r.next()) && !a; ) {
      if (Object.is(i, o))
        return false;
      n.add(o);
    }
  }
  return true;
}
function use(e12) {
  return e12 instanceof Set ? e12 : new Set(e12);
}
function hse(e12, ...t) {
  e12 = new Set(e12), t = t.map(use);
  e:
    for (const r of e12)
      for (const n of t)
        if (!n.has(r)) {
          e12.delete(r);
          continue e;
        }
  return e12;
}
function h9(e12, t) {
  const r = e12[Symbol.iterator](), n = /* @__PURE__ */ new Set();
  for (const i of t) {
    if (n.has(i))
      continue;
    let o, a;
    for (; {
      value: o,
      done: a
    } = r.next(); ) {
      if (a)
        return false;
      if (n.add(o), Object.is(i, o))
        break;
    }
  }
  return true;
}
function fse(e12, t) {
  return h9(t, e12);
}
function dse(...e12) {
  const t = /* @__PURE__ */ new Set();
  for (const r of e12)
    for (const n of r)
      t.add(n);
  return t;
}
var pse = Object.freeze(Object.defineProperty({
  __proto__: null,
  Adder: gn,
  InternMap: c0,
  InternSet: Lae,
  ascending: an,
  bin: hB,
  bisect: Yu,
  bisectCenter: vae,
  bisectLeft: gae,
  bisectRight: G8,
  bisector: Jd,
  count: zE,
  cross: Eae,
  cumsum: Sae,
  descending: wae,
  deviation: FD,
  difference: lse,
  disjoint: cse,
  every: rse,
  extent: rb,
  fcumsum: xae,
  filter: ise,
  fsum: Cae,
  greatest: Kae,
  greatestIndex: Zae,
  group: Q8,
  groupSort: Uae,
  groups: Bae,
  histogram: hB,
  index: $ae,
  indexes: Hae,
  intersection: hse,
  least: qae,
  leastIndex: s9,
  map: ose,
  max: JI,
  maxIndex: o9,
  mean: eP,
  median: UD,
  merge: jD,
  min: h0,
  minIndex: a9,
  nice: r9,
  pairs: Wae,
  permute: t9,
  quantile: Kg,
  quantileSorted: i9,
  quickselect: HD,
  range: yi,
  reduce: ase,
  reverse: sse,
  rollup: J8,
  rollups: Fae,
  scan: Qae,
  shuffle: Jae,
  shuffler: l9,
  some: nse,
  sort: qI,
  subset: fse,
  sum: c9,
  superset: h9,
  thresholdFreedmanDiaconis: zae,
  thresholdScott: Vae,
  thresholdSturges: n9,
  tickIncrement: Bv,
  tickStep: u0,
  ticks: pu,
  transpose: u9,
  union: dse,
  variance: BD,
  zip: tse
}, Symbol.toStringTag, { value: "Module" }));
function Ro(e12, t) {
  switch (arguments.length) {
    case 0:
      break;
    case 1:
      this.range(e12);
      break;
    default:
      this.range(t).domain(e12);
      break;
  }
  return this;
}
function Xs(e12, t) {
  switch (arguments.length) {
    case 0:
      break;
    case 1: {
      typeof e12 == "function" ? this.interpolator(e12) : this.range(e12);
      break;
    }
    default: {
      this.domain(e12), typeof t == "function" ? this.interpolator(t) : this.range(t);
      break;
    }
  }
  return this;
}
var tP = Symbol("implicit");
function GD() {
  var e12 = new c0(), t = [], r = [], n = tP;
  function i(o) {
    let a = e12.get(o);
    if (a === void 0) {
      if (n !== tP)
        return n;
      e12.set(o, a = t.push(o) - 1);
    }
    return r[a % r.length];
  }
  return i.domain = function(o) {
    if (!arguments.length)
      return t.slice();
    t = [], e12 = new c0();
    for (const a of o)
      e12.has(a) || e12.set(a, t.push(a) - 1);
    return i;
  }, i.range = function(o) {
    return arguments.length ? (r = Array.from(o), i) : r.slice();
  }, i.unknown = function(o) {
    return arguments.length ? (n = o, i) : n;
  }, i.copy = function() {
    return GD(t, r).unknown(n);
  }, Ro.apply(i, arguments), i;
}
function Fv() {
  var e12 = GD().unknown(void 0), t = e12.domain, r = e12.range, n = 0, i = 1, o, a, s = false, l = 0, u = 0, c = 0.5;
  delete e12.unknown;
  function f() {
    var h = t().length, d = i < n, p = d ? i : n, m = d ? n : i;
    o = (m - p) / Math.max(1, h - l + u * 2), s && (o = Math.floor(o)), p += (m - p - o * (h - l)) * c, a = o * (1 - l), s && (p = Math.round(p), a = Math.round(a));
    var g = yi(h).map(function(v) {
      return p + o * v;
    });
    return r(d ? g.reverse() : g);
  }
  return e12.domain = function(h) {
    return arguments.length ? (t(h), f()) : t();
  }, e12.range = function(h) {
    return arguments.length ? ([n, i] = h, n = +n, i = +i, f()) : [n, i];
  }, e12.rangeRound = function(h) {
    return [n, i] = h, n = +n, i = +i, s = true, f();
  }, e12.bandwidth = function() {
    return a;
  }, e12.step = function() {
    return o;
  }, e12.round = function(h) {
    return arguments.length ? (s = !!h, f()) : s;
  }, e12.padding = function(h) {
    return arguments.length ? (l = Math.min(1, u = +h), f()) : l;
  }, e12.paddingInner = function(h) {
    return arguments.length ? (l = Math.min(1, h), f()) : l;
  }, e12.paddingOuter = function(h) {
    return arguments.length ? (u = +h, f()) : u;
  }, e12.align = function(h) {
    return arguments.length ? (c = Math.max(0, Math.min(1, h)), f()) : c;
  }, e12.copy = function() {
    return Fv(t(), [n, i]).round(s).paddingInner(l).paddingOuter(u).align(c);
  }, Ro.apply(f(), arguments);
}
function f9(e12) {
  var t = e12.copy;
  return e12.padding = e12.paddingOuter, delete e12.paddingInner, delete e12.paddingOuter, e12.copy = function() {
    return f9(t());
  }, e12;
}
function mse() {
  return f9(Fv.apply(null, arguments).paddingInner(1));
}
function tp(e12, t, r) {
  e12.prototype = t.prototype = r, r.constructor = e12;
}
function $v(e12, t) {
  var r = Object.create(e12.prototype);
  for (var n in t)
    r[n] = t[n];
  return r;
}
function tc() {
}
var mu = 0.7;
var id = 1 / mu;
var wf = "\\s*([+-]?\\d+)\\s*";
var Zg = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*";
var Fa = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*";
var gse = /^#([0-9a-f]{3,8})$/;
var vse = new RegExp("^rgb\\(" + [wf, wf, wf] + "\\)$");
var yse = new RegExp("^rgb\\(" + [Fa, Fa, Fa] + "\\)$");
var _se = new RegExp("^rgba\\(" + [wf, wf, wf, Zg] + "\\)$");
var bse = new RegExp("^rgba\\(" + [Fa, Fa, Fa, Zg] + "\\)$");
var Tse = new RegExp("^hsl\\(" + [Zg, Fa, Fa] + "\\)$");
var Ese = new RegExp("^hsla\\(" + [Zg, Fa, Fa, Zg] + "\\)$");
var fB = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
tp(tc, dn, {
  copy: function(e12) {
    return Object.assign(new this.constructor(), this, e12);
  },
  displayable: function() {
    return this.rgb().displayable();
  },
  hex: dB,
  // Deprecated! Use color.formatHex.
  formatHex: dB,
  formatHsl: Sse,
  formatRgb: pB,
  toString: pB
});
function dB() {
  return this.rgb().formatHex();
}
function Sse() {
  return d9(this).formatHsl();
}
function pB() {
  return this.rgb().formatRgb();
}
function dn(e12) {
  var t, r;
  return e12 = (e12 + "").trim().toLowerCase(), (t = gse.exec(e12)) ? (r = t[1].length, t = parseInt(t[1], 16), r === 6 ? mB(t) : r === 3 ? new $n(t >> 8 & 15 | t >> 4 & 240, t >> 4 & 15 | t & 240, (t & 15) << 4 | t & 15, 1) : r === 8 ? t_(t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, (t & 255) / 255) : r === 4 ? t_(t >> 12 & 15 | t >> 8 & 240, t >> 8 & 15 | t >> 4 & 240, t >> 4 & 15 | t & 240, ((t & 15) << 4 | t & 15) / 255) : null) : (t = vse.exec(e12)) ? new $n(t[1], t[2], t[3], 1) : (t = yse.exec(e12)) ? new $n(t[1] * 255 / 100, t[2] * 255 / 100, t[3] * 255 / 100, 1) : (t = _se.exec(e12)) ? t_(t[1], t[2], t[3], t[4]) : (t = bse.exec(e12)) ? t_(t[1] * 255 / 100, t[2] * 255 / 100, t[3] * 255 / 100, t[4]) : (t = Tse.exec(e12)) ? yB(t[1], t[2] / 100, t[3] / 100, 1) : (t = Ese.exec(e12)) ? yB(t[1], t[2] / 100, t[3] / 100, t[4]) : fB.hasOwnProperty(e12) ? mB(fB[e12]) : e12 === "transparent" ? new $n(NaN, NaN, NaN, 0) : null;
}
function mB(e12) {
  return new $n(e12 >> 16 & 255, e12 >> 8 & 255, e12 & 255, 1);
}
function t_(e12, t, r, n) {
  return n <= 0 && (e12 = t = r = NaN), new $n(e12, t, r, n);
}
function zD(e12) {
  return e12 instanceof tc || (e12 = dn(e12)), e12 ? (e12 = e12.rgb(), new $n(e12.r, e12.g, e12.b, e12.opacity)) : new $n();
}
function od(e12, t, r, n) {
  return arguments.length === 1 ? zD(e12) : new $n(e12, t, r, n ?? 1);
}
function $n(e12, t, r, n) {
  this.r = +e12, this.g = +t, this.b = +r, this.opacity = +n;
}
tp($n, od, $v(tc, {
  brighter: function(e12) {
    return e12 = e12 == null ? id : Math.pow(id, e12), new $n(this.r * e12, this.g * e12, this.b * e12, this.opacity);
  },
  darker: function(e12) {
    return e12 = e12 == null ? mu : Math.pow(mu, e12), new $n(this.r * e12, this.g * e12, this.b * e12, this.opacity);
  },
  rgb: function() {
    return this;
  },
  displayable: function() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: gB,
  // Deprecated! Use color.formatHex.
  formatHex: gB,
  formatRgb: vB,
  toString: vB
}));
function gB() {
  return "#" + gw(this.r) + gw(this.g) + gw(this.b);
}
function vB() {
  var e12 = this.opacity;
  return e12 = isNaN(e12) ? 1 : Math.max(0, Math.min(1, e12)), (e12 === 1 ? "rgb(" : "rgba(") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (e12 === 1 ? ")" : ", " + e12 + ")");
}
function gw(e12) {
  return e12 = Math.max(0, Math.min(255, Math.round(e12) || 0)), (e12 < 16 ? "0" : "") + e12.toString(16);
}
function yB(e12, t, r, n) {
  return n <= 0 ? e12 = t = r = NaN : r <= 0 || r >= 1 ? e12 = t = NaN : t <= 0 && (e12 = NaN), new Ta(e12, t, r, n);
}
function d9(e12) {
  if (e12 instanceof Ta)
    return new Ta(e12.h, e12.s, e12.l, e12.opacity);
  if (e12 instanceof tc || (e12 = dn(e12)), !e12)
    return new Ta();
  if (e12 instanceof Ta)
    return e12;
  e12 = e12.rgb();
  var t = e12.r / 255, r = e12.g / 255, n = e12.b / 255, i = Math.min(t, r, n), o = Math.max(t, r, n), a = NaN, s = o - i, l = (o + i) / 2;
  return s ? (t === o ? a = (r - n) / s + (r < n) * 6 : r === o ? a = (n - t) / s + 2 : a = (t - r) / s + 4, s /= l < 0.5 ? o + i : 2 - o - i, a *= 60) : s = l > 0 && l < 1 ? 0 : a, new Ta(a, s, l, e12.opacity);
}
function p9(e12, t, r, n) {
  return arguments.length === 1 ? d9(e12) : new Ta(e12, t, r, n ?? 1);
}
function Ta(e12, t, r, n) {
  this.h = +e12, this.s = +t, this.l = +r, this.opacity = +n;
}
tp(Ta, p9, $v(tc, {
  brighter: function(e12) {
    return e12 = e12 == null ? id : Math.pow(id, e12), new Ta(this.h, this.s, this.l * e12, this.opacity);
  },
  darker: function(e12) {
    return e12 = e12 == null ? mu : Math.pow(mu, e12), new Ta(this.h, this.s, this.l * e12, this.opacity);
  },
  rgb: function() {
    var e12 = this.h % 360 + (this.h < 0) * 360, t = isNaN(e12) || isNaN(this.s) ? 0 : this.s, r = this.l, n = r + (r < 0.5 ? r : 1 - r) * t, i = 2 * r - n;
    return new $n(vw(e12 >= 240 ? e12 - 240 : e12 + 120, i, n), vw(e12, i, n), vw(e12 < 120 ? e12 + 240 : e12 - 120, i, n), this.opacity);
  },
  displayable: function() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl: function() {
    var e12 = this.opacity;
    return e12 = isNaN(e12) ? 1 : Math.max(0, Math.min(1, e12)), (e12 === 1 ? "hsl(" : "hsla(") + (this.h || 0) + ", " + (this.s || 0) * 100 + "%, " + (this.l || 0) * 100 + "%" + (e12 === 1 ? ")" : ", " + e12 + ")");
  }
}));
function vw(e12, t, r) {
  return (e12 < 60 ? t + (r - t) * e12 / 60 : e12 < 180 ? r : e12 < 240 ? t + (r - t) * (240 - e12) / 60 : t) * 255;
}
var m9 = Math.PI / 180;
var g9 = 180 / Math.PI;
var f0 = 18;
var v9 = 0.96422;
var y9 = 1;
var _9 = 0.82521;
var b9 = 4 / 29;
var Af = 6 / 29;
var T9 = 3 * Af * Af;
var wse = Af * Af * Af;
function E9(e12) {
  if (e12 instanceof Qo)
    return new Qo(e12.l, e12.a, e12.b, e12.opacity);
  if (e12 instanceof Ma)
    return O9(e12);
  e12 instanceof $n || (e12 = zD(e12));
  var t = Tw(e12.r), r = Tw(e12.g), n = Tw(e12.b), i = yw((0.2225045 * t + 0.7168786 * r + 0.0606169 * n) / y9), o, a;
  return t === r && r === n ? o = a = i : (o = yw((0.4360747 * t + 0.3850649 * r + 0.1430804 * n) / v9), a = yw((0.0139322 * t + 0.0971045 * r + 0.7141733 * n) / _9)), new Qo(116 * i - 16, 500 * (o - i), 200 * (i - a), e12.opacity);
}
function Ase(e12, t) {
  return new Qo(e12, 0, 0, t ?? 1);
}
function S9(e12, t, r, n) {
  return arguments.length === 1 ? E9(e12) : new Qo(e12, t, r, n ?? 1);
}
function Qo(e12, t, r, n) {
  this.l = +e12, this.a = +t, this.b = +r, this.opacity = +n;
}
tp(Qo, S9, $v(tc, {
  brighter: function(e12) {
    return new Qo(this.l + f0 * (e12 ?? 1), this.a, this.b, this.opacity);
  },
  darker: function(e12) {
    return new Qo(this.l - f0 * (e12 ?? 1), this.a, this.b, this.opacity);
  },
  rgb: function() {
    var e12 = (this.l + 16) / 116, t = isNaN(this.a) ? e12 : e12 + this.a / 500, r = isNaN(this.b) ? e12 : e12 - this.b / 200;
    return t = v9 * _w(t), e12 = y9 * _w(e12), r = _9 * _w(r), new $n(bw(3.1338561 * t - 1.6168667 * e12 - 0.4906146 * r), bw(-0.9787684 * t + 1.9161415 * e12 + 0.033454 * r), bw(0.0719453 * t - 0.2289914 * e12 + 1.4052427 * r), this.opacity);
  }
}));
function yw(e12) {
  return e12 > wse ? Math.pow(e12, 1 / 3) : e12 / T9 + b9;
}
function _w(e12) {
  return e12 > Af ? e12 * e12 * e12 : T9 * (e12 - b9);
}
function bw(e12) {
  return 255 * (e12 <= 31308e-7 ? 12.92 * e12 : 1.055 * Math.pow(e12, 1 / 2.4) - 0.055);
}
function Tw(e12) {
  return (e12 /= 255) <= 0.04045 ? e12 / 12.92 : Math.pow((e12 + 0.055) / 1.055, 2.4);
}
function w9(e12) {
  if (e12 instanceof Ma)
    return new Ma(e12.h, e12.c, e12.l, e12.opacity);
  if (e12 instanceof Qo || (e12 = E9(e12)), e12.a === 0 && e12.b === 0)
    return new Ma(NaN, 0 < e12.l && e12.l < 100 ? 0 : NaN, e12.l, e12.opacity);
  var t = Math.atan2(e12.b, e12.a) * g9;
  return new Ma(t < 0 ? t + 360 : t, Math.sqrt(e12.a * e12.a + e12.b * e12.b), e12.l, e12.opacity);
}
function Ose(e12, t, r, n) {
  return arguments.length === 1 ? w9(e12) : new Ma(r, t, e12, n ?? 1);
}
function A9(e12, t, r, n) {
  return arguments.length === 1 ? w9(e12) : new Ma(e12, t, r, n ?? 1);
}
function Ma(e12, t, r, n) {
  this.h = +e12, this.c = +t, this.l = +r, this.opacity = +n;
}
function O9(e12) {
  if (isNaN(e12.h))
    return new Qo(e12.l, 0, 0, e12.opacity);
  var t = e12.h * m9;
  return new Qo(e12.l, Math.cos(t) * e12.c, Math.sin(t) * e12.c, e12.opacity);
}
tp(Ma, A9, $v(tc, {
  brighter: function(e12) {
    return new Ma(this.h, this.c, this.l + f0 * (e12 ?? 1), this.opacity);
  },
  darker: function(e12) {
    return new Ma(this.h, this.c, this.l - f0 * (e12 ?? 1), this.opacity);
  },
  rgb: function() {
    return O9(this).rgb();
  }
}));
var I9 = -0.14861;
var VD = 1.78277;
var XD = -0.29227;
var VE = -0.90649;
var Qg = 1.97294;
var _B = Qg * VE;
var bB = Qg * VD;
var TB = VD * XD - VE * I9;
function Ise(e12) {
  if (e12 instanceof eu)
    return new eu(e12.h, e12.s, e12.l, e12.opacity);
  e12 instanceof $n || (e12 = zD(e12));
  var t = e12.r / 255, r = e12.g / 255, n = e12.b / 255, i = (TB * n + _B * t - bB * r) / (TB + _B - bB), o = n - i, a = (Qg * (r - i) - XD * o) / VE, s = Math.sqrt(a * a + o * o) / (Qg * i * (1 - i)), l = s ? Math.atan2(a, o) * g9 - 120 : NaN;
  return new eu(l < 0 ? l + 360 : l, s, i, e12.opacity);
}
function P9(e12, t, r, n) {
  return arguments.length === 1 ? Ise(e12) : new eu(e12, t, r, n ?? 1);
}
function eu(e12, t, r, n) {
  this.h = +e12, this.s = +t, this.l = +r, this.opacity = +n;
}
tp(eu, P9, $v(tc, {
  brighter: function(e12) {
    return e12 = e12 == null ? id : Math.pow(id, e12), new eu(this.h, this.s, this.l * e12, this.opacity);
  },
  darker: function(e12) {
    return e12 = e12 == null ? mu : Math.pow(mu, e12), new eu(this.h, this.s, this.l * e12, this.opacity);
  },
  rgb: function() {
    var e12 = isNaN(this.h) ? 0 : (this.h + 120) * m9, t = +this.l, r = isNaN(this.s) ? 0 : this.s * t * (1 - t), n = Math.cos(e12), i = Math.sin(e12);
    return new $n(255 * (t + r * (I9 * n + VD * i)), 255 * (t + r * (XD * n + VE * i)), 255 * (t + r * (Qg * n)), this.opacity);
  }
}));
var Pse = Object.freeze(Object.defineProperty({
  __proto__: null,
  color: dn,
  cubehelix: P9,
  gray: Ase,
  hcl: A9,
  hsl: p9,
  lab: S9,
  lch: Ose,
  rgb: od
}, Symbol.toStringTag, { value: "Module" }));
var WD = (e12) => () => e12;
function Cse(e12, t) {
  return function(r) {
    return e12 + r * t;
  };
}
function xse(e12, t, r) {
  return e12 = Math.pow(e12, r), t = Math.pow(t, r) - e12, r = 1 / r, function(n) {
    return Math.pow(e12 + n * t, r);
  };
}
function kse(e12) {
  return (e12 = +e12) == 1 ? C9 : function(t, r) {
    return r - t ? xse(t, r, e12) : WD(isNaN(t) ? r : t);
  };
}
function C9(e12, t) {
  var r = t - e12;
  return r ? Cse(e12, r) : WD(isNaN(e12) ? t : e12);
}
var ad = function e(t) {
  var r = kse(t);
  function n(i, o) {
    var a = r((i = od(i)).r, (o = od(o)).r), s = r(i.g, o.g), l = r(i.b, o.b), u = C9(i.opacity, o.opacity);
    return function(c) {
      return i.r = a(c), i.g = s(c), i.b = l(c), i.opacity = u(c), i + "";
    };
  }
  return n.gamma = e, n;
}(1);
function Dse(e12, t) {
  t || (t = []);
  var r = e12 ? Math.min(t.length, e12.length) : 0, n = t.slice(), i;
  return function(o) {
    for (i = 0; i < r; ++i)
      n[i] = e12[i] * (1 - o) + t[i] * o;
    return n;
  };
}
function Rse(e12) {
  return ArrayBuffer.isView(e12) && !(e12 instanceof DataView);
}
function Nse(e12, t) {
  var r = t ? t.length : 0, n = e12 ? Math.min(r, e12.length) : 0, i = new Array(n), o = new Array(r), a;
  for (a = 0; a < n; ++a)
    i[a] = qu(e12[a], t[a]);
  for (; a < r; ++a)
    o[a] = t[a];
  return function(s) {
    for (a = 0; a < n; ++a)
      o[a] = i[a](s);
    return o;
  };
}
function Mse(e12, t) {
  var r = /* @__PURE__ */ new Date();
  return e12 = +e12, t = +t, function(n) {
    return r.setTime(e12 * (1 - n) + t * n), r;
  };
}
function bo(e12, t) {
  return e12 = +e12, t = +t, function(r) {
    return e12 * (1 - r) + t * r;
  };
}
function Lse(e12, t) {
  var r = {}, n = {}, i;
  (e12 === null || typeof e12 != "object") && (e12 = {}), (t === null || typeof t != "object") && (t = {});
  for (i in t)
    i in e12 ? r[i] = qu(e12[i], t[i]) : n[i] = t[i];
  return function(o) {
    for (i in r)
      n[i] = r[i](o);
    return n;
  };
}
var rP = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
var Ew = new RegExp(rP.source, "g");
function Bse(e12) {
  return function() {
    return e12;
  };
}
function Fse(e12) {
  return function(t) {
    return e12(t) + "";
  };
}
function YD(e12, t) {
  var r = rP.lastIndex = Ew.lastIndex = 0, n, i, o, a = -1, s = [], l = [];
  for (e12 = e12 + "", t = t + ""; (n = rP.exec(e12)) && (i = Ew.exec(t)); )
    (o = i.index) > r && (o = t.slice(r, o), s[a] ? s[a] += o : s[++a] = o), (n = n[0]) === (i = i[0]) ? s[a] ? s[a] += i : s[++a] = i : (s[++a] = null, l.push({
      i: a,
      x: bo(n, i)
    })), r = Ew.lastIndex;
  return r < t.length && (o = t.slice(r), s[a] ? s[a] += o : s[++a] = o), s.length < 2 ? l[0] ? Fse(l[0].x) : Bse(t) : (t = l.length, function(u) {
    for (var c = 0, f; c < t; ++c)
      s[(f = l[c]).i] = f.x(u);
    return s.join("");
  });
}
function qu(e12, t) {
  var r = typeof t, n;
  return t == null || r === "boolean" ? WD(t) : (r === "number" ? bo : r === "string" ? (n = dn(t)) ? (t = n, ad) : YD : t instanceof dn ? ad : t instanceof Date ? Mse : Rse(t) ? Dse : Array.isArray(t) ? Nse : typeof t.valueOf != "function" && typeof t.toString != "function" || isNaN(t) ? Lse : bo)(e12, t);
}
function qD(e12, t) {
  return e12 = +e12, t = +t, function(r) {
    return Math.round(e12 * (1 - r) + t * r);
  };
}
var EB = 180 / Math.PI;
var nP = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function x9(e12, t, r, n, i, o) {
  var a, s, l;
  return (a = Math.sqrt(e12 * e12 + t * t)) && (e12 /= a, t /= a), (l = e12 * r + t * n) && (r -= e12 * l, n -= t * l), (s = Math.sqrt(r * r + n * n)) && (r /= s, n /= s, l /= s), e12 * n < t * r && (e12 = -e12, t = -t, l = -l, a = -a), {
    translateX: i,
    translateY: o,
    rotate: Math.atan2(t, e12) * EB,
    skewX: Math.atan(l) * EB,
    scaleX: a,
    scaleY: s
  };
}
var r_;
function $se(e12) {
  const t = new (typeof DOMMatrix == "function" ? DOMMatrix : WebKitCSSMatrix)(e12 + "");
  return t.isIdentity ? nP : x9(t.a, t.b, t.c, t.d, t.e, t.f);
}
function Hse(e12) {
  return e12 == null || (r_ || (r_ = document.createElementNS("http://www.w3.org/2000/svg", "g")), r_.setAttribute("transform", e12), !(e12 = r_.transform.baseVal.consolidate())) ? nP : (e12 = e12.matrix, x9(e12.a, e12.b, e12.c, e12.d, e12.e, e12.f));
}
function k9(e12, t, r, n) {
  function i(u) {
    return u.length ? u.pop() + " " : "";
  }
  function o(u, c, f, h, d, p) {
    if (u !== f || c !== h) {
      var m = d.push("translate(", null, t, null, r);
      p.push({
        i: m - 4,
        x: bo(u, f)
      }, {
        i: m - 2,
        x: bo(c, h)
      });
    } else
      (f || h) && d.push("translate(" + f + t + h + r);
  }
  function a(u, c, f, h) {
    u !== c ? (u - c > 180 ? c += 360 : c - u > 180 && (u += 360), h.push({
      i: f.push(i(f) + "rotate(", null, n) - 2,
      x: bo(u, c)
    })) : c && f.push(i(f) + "rotate(" + c + n);
  }
  function s(u, c, f, h) {
    u !== c ? h.push({
      i: f.push(i(f) + "skewX(", null, n) - 2,
      x: bo(u, c)
    }) : c && f.push(i(f) + "skewX(" + c + n);
  }
  function l(u, c, f, h, d, p) {
    if (u !== f || c !== h) {
      var m = d.push(i(d) + "scale(", null, ",", null, ")");
      p.push({
        i: m - 4,
        x: bo(u, f)
      }, {
        i: m - 2,
        x: bo(c, h)
      });
    } else
      (f !== 1 || h !== 1) && d.push(i(d) + "scale(" + f + "," + h + ")");
  }
  return function(u, c) {
    var f = [], h = [];
    return u = e12(u), c = e12(c), o(u.translateX, u.translateY, c.translateX, c.translateY, f, h), a(u.rotate, c.rotate, f, h), s(u.skewX, c.skewX, f, h), l(u.scaleX, u.scaleY, c.scaleX, c.scaleY, f, h), u = c = null, function(d) {
      for (var p = -1, m = h.length, g; ++p < m; )
        f[(g = h[p]).i] = g.x(d);
      return f.join("");
    };
  };
}
var D9 = k9($se, "px, ", "px)", "deg)");
var R9 = k9(Hse, ", ", ")", ")");
var Use = 1e-12;
function SB(e12) {
  return ((e12 = Math.exp(e12)) + 1 / e12) / 2;
}
function jse(e12) {
  return ((e12 = Math.exp(e12)) - 1 / e12) / 2;
}
function Gse(e12) {
  return ((e12 = Math.exp(2 * e12)) - 1) / (e12 + 1);
}
var zse = function e2(t, r, n) {
  function i(o, a) {
    var s = o[0], l = o[1], u = o[2], c = a[0], f = a[1], h = a[2], d = c - s, p = f - l, m = d * d + p * p, g, v;
    if (m < Use)
      v = Math.log(h / u) / t, g = function(P) {
        return [s + P * d, l + P * p, u * Math.exp(t * P * v)];
      };
    else {
      var _ = Math.sqrt(m), y = (h * h - u * u + n * m) / (2 * u * r * _), b = (h * h - u * u - n * m) / (2 * h * r * _), T = Math.log(Math.sqrt(y * y + 1) - y), E = Math.log(Math.sqrt(b * b + 1) - b);
      v = (E - T) / t, g = function(P) {
        var A = P * v, I = SB(T), x = u / (r * _) * (I * Gse(t * A + T) - jse(T));
        return [s + x * d, l + x * p, u * I / SB(t * A + T)];
      };
    }
    return g.duration = v * 1e3 * t / Math.SQRT2, g;
  }
  return i.rho = function(o) {
    var a = Math.max(1e-3, +o), s = a * a, l = s * s;
    return e2(a, s, l);
  }, i;
}(Math.SQRT2, 2, 4);
function Vse(e12, t) {
  t === void 0 && (t = e12, e12 = qu);
  for (var r = 0, n = t.length - 1, i = t[0], o = new Array(n < 0 ? 0 : n); r < n; )
    o[r] = e12(i, i = t[++r]);
  return function(a) {
    var s = Math.max(0, Math.min(n - 1, Math.floor(a *= n)));
    return o[s](a - s);
  };
}
function Xse(e12) {
  return function() {
    return e12;
  };
}
function d0(e12) {
  return +e12;
}
var wB = [0, 1];
function _i(e12) {
  return e12;
}
function iP(e12, t) {
  return (t -= e12 = +e12) ? function(r) {
    return (r - e12) / t;
  } : Xse(isNaN(t) ? NaN : 0.5);
}
function Wse(e12, t) {
  var r;
  return e12 > t && (r = e12, e12 = t, t = r), function(n) {
    return Math.max(e12, Math.min(t, n));
  };
}
function Yse(e12, t, r) {
  var n = e12[0], i = e12[1], o = t[0], a = t[1];
  return i < n ? (n = iP(i, n), o = r(a, o)) : (n = iP(n, i), o = r(o, a)), function(s) {
    return o(n(s));
  };
}
function qse(e12, t, r) {
  var n = Math.min(e12.length, t.length) - 1, i = new Array(n), o = new Array(n), a = -1;
  for (e12[n] < e12[0] && (e12 = e12.slice().reverse(), t = t.slice().reverse()); ++a < n; )
    i[a] = iP(e12[a], e12[a + 1]), o[a] = r(t[a], t[a + 1]);
  return function(s) {
    var l = Yu(e12, s, 1, n) - 1;
    return o[l](i[l](s));
  };
}
function Hv(e12, t) {
  return t.domain(e12.domain()).range(e12.range()).interpolate(e12.interpolate()).clamp(e12.clamp()).unknown(e12.unknown());
}
function XE() {
  var e12 = wB, t = wB, r = qu, n, i, o, a = _i, s, l, u;
  function c() {
    var h = Math.min(e12.length, t.length);
    return a !== _i && (a = Wse(e12[0], e12[h - 1])), s = h > 2 ? qse : Yse, l = u = null, f;
  }
  function f(h) {
    return h == null || isNaN(h = +h) ? o : (l || (l = s(e12.map(n), t, r)))(n(a(h)));
  }
  return f.invert = function(h) {
    return a(i((u || (u = s(t, e12.map(n), bo)))(h)));
  }, f.domain = function(h) {
    return arguments.length ? (e12 = Array.from(h, d0), c()) : e12.slice();
  }, f.range = function(h) {
    return arguments.length ? (t = Array.from(h), c()) : t.slice();
  }, f.rangeRound = function(h) {
    return t = Array.from(h), r = qD, c();
  }, f.clamp = function(h) {
    return arguments.length ? (a = h ? true : _i, c()) : a !== _i;
  }, f.interpolate = function(h) {
    return arguments.length ? (r = h, c()) : r;
  }, f.unknown = function(h) {
    return arguments.length ? (o = h, f) : o;
  }, function(h, d) {
    return n = h, i = d, c();
  };
}
function KD() {
  return XE()(_i, _i);
}
function Kse(e12) {
  return Math.abs(e12 = Math.round(e12)) >= 1e21 ? e12.toLocaleString("en").replace(/,/g, "") : e12.toString(10);
}
function p0(e12, t) {
  if ((r = (e12 = t ? e12.toExponential(t - 1) : e12.toExponential()).indexOf("e")) < 0)
    return null;
  var r, n = e12.slice(0, r);
  return [n.length > 1 ? n[0] + n.slice(2) : n, +e12.slice(r + 1)];
}
function sd(e12) {
  return e12 = p0(Math.abs(e12)), e12 ? e12[1] : NaN;
}
function Zse(e12, t) {
  return function(r, n) {
    for (var i = r.length, o = [], a = 0, s = e12[0], l = 0; i > 0 && s > 0 && (l + s + 1 > n && (s = Math.max(1, n - l)), o.push(r.substring(i -= s, i + s)), !((l += s + 1) > n)); )
      s = e12[a = (a + 1) % e12.length];
    return o.reverse().join(t);
  };
}
function Qse(e12) {
  return function(t) {
    return t.replace(/[0-9]/g, function(r) {
      return e12[+r];
    });
  };
}
var Jse = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function ld(e12) {
  if (!(t = Jse.exec(e12)))
    throw new Error("invalid format: " + e12);
  var t;
  return new WE({
    fill: t[1],
    align: t[2],
    sign: t[3],
    symbol: t[4],
    zero: t[5],
    width: t[6],
    comma: t[7],
    precision: t[8] && t[8].slice(1),
    trim: t[9],
    type: t[10]
  });
}
ld.prototype = WE.prototype;
function WE(e12) {
  this.fill = e12.fill === void 0 ? " " : e12.fill + "", this.align = e12.align === void 0 ? ">" : e12.align + "", this.sign = e12.sign === void 0 ? "-" : e12.sign + "", this.symbol = e12.symbol === void 0 ? "" : e12.symbol + "", this.zero = !!e12.zero, this.width = e12.width === void 0 ? void 0 : +e12.width, this.comma = !!e12.comma, this.precision = e12.precision === void 0 ? void 0 : +e12.precision, this.trim = !!e12.trim, this.type = e12.type === void 0 ? "" : e12.type + "";
}
WE.prototype.toString = function() {
  return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
};
function ele(e12) {
  e:
    for (var t = e12.length, r = 1, n = -1, i; r < t; ++r)
      switch (e12[r]) {
        case ".":
          n = i = r;
          break;
        case "0":
          n === 0 && (n = r), i = r;
          break;
        default:
          if (!+e12[r])
            break e;
          n > 0 && (n = 0);
          break;
      }
  return n > 0 ? e12.slice(0, n) + e12.slice(i + 1) : e12;
}
var N9;
function tle(e12, t) {
  var r = p0(e12, t);
  if (!r)
    return e12 + "";
  var n = r[0], i = r[1], o = i - (N9 = Math.max(-8, Math.min(8, Math.floor(i / 3))) * 3) + 1, a = n.length;
  return o === a ? n : o > a ? n + new Array(o - a + 1).join("0") : o > 0 ? n.slice(0, o) + "." + n.slice(o) : "0." + new Array(1 - o).join("0") + p0(e12, Math.max(0, t + o - 1))[0];
}
function AB(e12, t) {
  var r = p0(e12, t);
  if (!r)
    return e12 + "";
  var n = r[0], i = r[1];
  return i < 0 ? "0." + new Array(-i).join("0") + n : n.length > i + 1 ? n.slice(0, i + 1) + "." + n.slice(i + 1) : n + new Array(i - n.length + 2).join("0");
}
var OB = {
  "%": (e12, t) => (e12 * 100).toFixed(t),
  b: (e12) => Math.round(e12).toString(2),
  c: (e12) => e12 + "",
  d: Kse,
  e: (e12, t) => e12.toExponential(t),
  f: (e12, t) => e12.toFixed(t),
  g: (e12, t) => e12.toPrecision(t),
  o: (e12) => Math.round(e12).toString(8),
  p: (e12, t) => AB(e12 * 100, t),
  r: AB,
  s: tle,
  X: (e12) => Math.round(e12).toString(16).toUpperCase(),
  x: (e12) => Math.round(e12).toString(16)
};
function IB(e12) {
  return e12;
}
var PB = Array.prototype.map;
var CB = ["y", "z", "a", "f", "p", "n", "µ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
function M9(e12) {
  var t = e12.grouping === void 0 || e12.thousands === void 0 ? IB : Zse(PB.call(e12.grouping, Number), e12.thousands + ""), r = e12.currency === void 0 ? "" : e12.currency[0] + "", n = e12.currency === void 0 ? "" : e12.currency[1] + "", i = e12.decimal === void 0 ? "." : e12.decimal + "", o = e12.numerals === void 0 ? IB : Qse(PB.call(e12.numerals, String)), a = e12.percent === void 0 ? "%" : e12.percent + "", s = e12.minus === void 0 ? "−" : e12.minus + "", l = e12.nan === void 0 ? "NaN" : e12.nan + "";
  function u(f) {
    f = ld(f);
    var h = f.fill, d = f.align, p = f.sign, m = f.symbol, g = f.zero, v = f.width, _ = f.comma, y = f.precision, b = f.trim, T = f.type;
    T === "n" ? (_ = true, T = "g") : OB[T] || (y === void 0 && (y = 12), b = true, T = "g"), (g || h === "0" && d === "=") && (g = true, h = "0", d = "=");
    var E = m === "$" ? r : m === "#" && /[boxX]/.test(T) ? "0" + T.toLowerCase() : "", P = m === "$" ? n : /[%p]/.test(T) ? a : "", A = OB[T], I = /[defgprs%]/.test(T);
    y = y === void 0 ? 6 : /[gprs]/.test(T) ? Math.max(1, Math.min(21, y)) : Math.max(0, Math.min(20, y));
    function x(S) {
      var N = E, B = P, w, R, F;
      if (T === "c")
        B = A(S) + B, S = "";
      else {
        S = +S;
        var $ = S < 0 || 1 / S < 0;
        if (S = isNaN(S) ? l : A(Math.abs(S), y), b && (S = ele(S)), $ && +S == 0 && p !== "+" && ($ = false), N = ($ ? p === "(" ? p : s : p === "-" || p === "(" ? "" : p) + N, B = (T === "s" ? CB[8 + N9 / 3] : "") + B + ($ && p === "(" ? ")" : ""), I) {
          for (w = -1, R = S.length; ++w < R; )
            if (F = S.charCodeAt(w), 48 > F || F > 57) {
              B = (F === 46 ? i + S.slice(w + 1) : S.slice(w)) + B, S = S.slice(0, w);
              break;
            }
        }
      }
      _ && !g && (S = t(S, 1 / 0));
      var K = N.length + S.length + B.length, se = K < v ? new Array(v - K + 1).join(h) : "";
      switch (_ && g && (S = t(se + S, se.length ? v - B.length : 1 / 0), se = ""), d) {
        case "<":
          S = N + S + B + se;
          break;
        case "=":
          S = N + se + S + B;
          break;
        case "^":
          S = se.slice(0, K = se.length >> 1) + N + S + B + se.slice(K);
          break;
        default:
          S = se + N + S + B;
          break;
      }
      return o(S);
    }
    return x.toString = function() {
      return f + "";
    }, x;
  }
  function c(f, h) {
    var d = u((f = ld(f), f.type = "f", f)), p = Math.max(-8, Math.min(8, Math.floor(sd(h) / 3))) * 3, m = Math.pow(10, -p), g = CB[8 + p / 3];
    return function(v) {
      return d(m * v) + g;
    };
  }
  return {
    format: u,
    formatPrefix: c
  };
}
var n_;
var oo;
var Ku;
L9({
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});
function L9(e12) {
  return n_ = M9(e12), oo = n_.format, Ku = n_.formatPrefix, n_;
}
function B9(e12) {
  return Math.max(0, -sd(Math.abs(e12)));
}
function rp(e12, t) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(sd(t) / 3))) * 3 - sd(Math.abs(e12)));
}
function F9(e12, t) {
  return e12 = Math.abs(e12), t = Math.abs(t) - e12, Math.max(0, sd(t) - sd(e12)) + 1;
}
var rle = Object.freeze(Object.defineProperty({
  __proto__: null,
  FormatSpecifier: WE,
  get format() {
    return oo;
  },
  formatDefaultLocale: L9,
  formatLocale: M9,
  get formatPrefix() {
    return Ku;
  },
  formatSpecifier: ld,
  precisionFixed: B9,
  precisionPrefix: rp,
  precisionRound: F9
}, Symbol.toStringTag, { value: "Module" }));
function $9(e12, t, r, n) {
  var i = u0(e12, t, r), o;
  switch (n = ld(n ?? ",f"), n.type) {
    case "s": {
      var a = Math.max(Math.abs(e12), Math.abs(t));
      return n.precision == null && !isNaN(o = rp(i, a)) && (n.precision = o), Ku(n, a);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      n.precision == null && !isNaN(o = F9(i, Math.max(Math.abs(e12), Math.abs(t)))) && (n.precision = o - (n.type === "e"));
      break;
    }
    case "f":
    case "%": {
      n.precision == null && !isNaN(o = B9(i)) && (n.precision = o - (n.type === "%") * 2);
      break;
    }
  }
  return oo(n);
}
function rc(e12) {
  var t = e12.domain;
  return e12.ticks = function(r) {
    var n = t();
    return pu(n[0], n[n.length - 1], r ?? 10);
  }, e12.tickFormat = function(r, n) {
    var i = t();
    return $9(i[0], i[i.length - 1], r ?? 10, n);
  }, e12.nice = function(r) {
    r == null && (r = 10);
    var n = t(), i = 0, o = n.length - 1, a = n[i], s = n[o], l, u, c = 10;
    for (s < a && (u = a, a = s, s = u, u = i, i = o, o = u); c-- > 0; ) {
      if (u = Bv(a, s, r), u === l)
        return n[i] = a, n[o] = s, t(n);
      if (u > 0)
        a = Math.floor(a / u) * u, s = Math.ceil(s / u) * u;
      else if (u < 0)
        a = Math.ceil(a * u) / u, s = Math.floor(s * u) / u;
      else
        break;
      l = u;
    }
    return e12;
  }, e12;
}
function It() {
  var e12 = KD();
  return e12.copy = function() {
    return Hv(e12, It());
  }, Ro.apply(e12, arguments), rc(e12);
}
function H9(e12) {
  var t;
  function r(n) {
    return n == null || isNaN(n = +n) ? t : n;
  }
  return r.invert = r, r.domain = r.range = function(n) {
    return arguments.length ? (e12 = Array.from(n, d0), r) : e12.slice();
  }, r.unknown = function(n) {
    return arguments.length ? (t = n, r) : t;
  }, r.copy = function() {
    return H9(e12).unknown(t);
  }, e12 = arguments.length ? Array.from(e12, d0) : [0, 1], rc(r);
}
function U9(e12, t) {
  e12 = e12.slice();
  var r = 0, n = e12.length - 1, i = e12[r], o = e12[n], a;
  return o < i && (a = r, r = n, n = a, a = i, i = o, o = a), e12[r] = t.floor(i), e12[n] = t.ceil(o), e12;
}
function xB(e12) {
  return Math.log(e12);
}
function kB(e12) {
  return Math.exp(e12);
}
function nle(e12) {
  return -Math.log(-e12);
}
function ile(e12) {
  return -Math.exp(-e12);
}
function ole(e12) {
  return isFinite(e12) ? +("1e" + e12) : e12 < 0 ? 0 : e12;
}
function ale(e12) {
  return e12 === 10 ? ole : e12 === Math.E ? Math.exp : (t) => Math.pow(e12, t);
}
function sle(e12) {
  return e12 === Math.E ? Math.log : e12 === 10 && Math.log10 || e12 === 2 && Math.log2 || (e12 = Math.log(e12), (t) => Math.log(t) / e12);
}
function DB(e12) {
  return (t, r) => -e12(-t, r);
}
function ZD(e12) {
  const t = e12(xB, kB), r = t.domain;
  let n = 10, i, o;
  function a() {
    return i = sle(n), o = ale(n), r()[0] < 0 ? (i = DB(i), o = DB(o), e12(nle, ile)) : e12(xB, kB), t;
  }
  return t.base = function(s) {
    return arguments.length ? (n = +s, a()) : n;
  }, t.domain = function(s) {
    return arguments.length ? (r(s), a()) : r();
  }, t.ticks = (s) => {
    const l = r();
    let u = l[0], c = l[l.length - 1];
    const f = c < u;
    f && ([u, c] = [c, u]);
    let h = i(u), d = i(c), p, m;
    const g = s == null ? 10 : +s;
    let v = [];
    if (!(n % 1) && d - h < g) {
      if (h = Math.floor(h), d = Math.ceil(d), u > 0) {
        for (; h <= d; ++h)
          for (p = 1; p < n; ++p)
            if (m = h < 0 ? p / o(-h) : p * o(h), !(m < u)) {
              if (m > c)
                break;
              v.push(m);
            }
      } else
        for (; h <= d; ++h)
          for (p = n - 1; p >= 1; --p)
            if (m = h > 0 ? p / o(-h) : p * o(h), !(m < u)) {
              if (m > c)
                break;
              v.push(m);
            }
      v.length * 2 < g && (v = pu(u, c, g));
    } else
      v = pu(h, d, Math.min(d - h, g)).map(o);
    return f ? v.reverse() : v;
  }, t.tickFormat = (s, l) => {
    if (s == null && (s = 10), l == null && (l = n === 10 ? "s" : ","), typeof l != "function" && (!(n % 1) && (l = ld(l)).precision == null && (l.trim = true), l = oo(l)), s === 1 / 0)
      return l;
    const u = Math.max(1, n * s / t.ticks().length);
    return (c) => {
      let f = c / o(Math.round(i(c)));
      return f * n < n - 0.5 && (f *= n), f <= u ? l(c) : "";
    };
  }, t.nice = () => r(U9(r(), {
    floor: (s) => o(Math.floor(i(s))),
    ceil: (s) => o(Math.ceil(i(s)))
  })), t;
}
function nc() {
  const e12 = ZD(XE()).domain([1, 10]);
  return e12.copy = () => Hv(e12, nc()).base(e12.base()), Ro.apply(e12, arguments), e12;
}
function RB(e12) {
  return function(t) {
    return Math.sign(t) * Math.log1p(Math.abs(t / e12));
  };
}
function NB(e12) {
  return function(t) {
    return Math.sign(t) * Math.expm1(Math.abs(t)) * e12;
  };
}
function QD(e12) {
  var t = 1, r = e12(RB(t), NB(t));
  return r.constant = function(n) {
    return arguments.length ? e12(RB(t = +n), NB(t)) : t;
  }, rc(r);
}
function j9() {
  var e12 = QD(XE());
  return e12.copy = function() {
    return Hv(e12, j9()).constant(e12.constant());
  }, Ro.apply(e12, arguments);
}
function MB(e12) {
  return function(t) {
    return t < 0 ? -Math.pow(-t, e12) : Math.pow(t, e12);
  };
}
function lle(e12) {
  return e12 < 0 ? -Math.sqrt(-e12) : Math.sqrt(e12);
}
function cle(e12) {
  return e12 < 0 ? -e12 * e12 : e12 * e12;
}
function JD(e12) {
  var t = e12(_i, _i), r = 1;
  function n() {
    return r === 1 ? e12(_i, _i) : r === 0.5 ? e12(lle, cle) : e12(MB(r), MB(1 / r));
  }
  return t.exponent = function(i) {
    return arguments.length ? (r = +i, n()) : r;
  }, rc(t);
}
function eR() {
  var e12 = JD(XE());
  return e12.copy = function() {
    return Hv(e12, eR()).exponent(e12.exponent());
  }, Ro.apply(e12, arguments), e12;
}
function ule() {
  return eR.apply(null, arguments).exponent(0.5);
}
function LB(e12) {
  return Math.sign(e12) * e12 * e12;
}
function hle(e12) {
  return Math.sign(e12) * Math.sqrt(Math.abs(e12));
}
function G9() {
  var e12 = KD(), t = [0, 1], r = false, n;
  function i(o) {
    var a = hle(e12(o));
    return isNaN(a) ? n : r ? Math.round(a) : a;
  }
  return i.invert = function(o) {
    return e12.invert(LB(o));
  }, i.domain = function(o) {
    return arguments.length ? (e12.domain(o), i) : e12.domain();
  }, i.range = function(o) {
    return arguments.length ? (e12.range((t = Array.from(o, d0)).map(LB)), i) : t.slice();
  }, i.rangeRound = function(o) {
    return i.range(o).round(true);
  }, i.round = function(o) {
    return arguments.length ? (r = !!o, i) : r;
  }, i.clamp = function(o) {
    return arguments.length ? (e12.clamp(o), i) : e12.clamp();
  }, i.unknown = function(o) {
    return arguments.length ? (n = o, i) : n;
  }, i.copy = function() {
    return G9(e12.domain(), t).round(r).clamp(e12.clamp()).unknown(n);
  }, Ro.apply(i, arguments), rc(i);
}
function m0() {
  var e12 = [], t = [], r = [], n;
  function i() {
    var a = 0, s = Math.max(1, t.length);
    for (r = new Array(s - 1); ++a < s; )
      r[a - 1] = i9(e12, a / s);
    return o;
  }
  function o(a) {
    return a == null || isNaN(a = +a) ? n : t[Yu(r, a)];
  }
  return o.invertExtent = function(a) {
    var s = t.indexOf(a);
    return s < 0 ? [NaN, NaN] : [s > 0 ? r[s - 1] : e12[0], s < r.length ? r[s] : e12[e12.length - 1]];
  }, o.domain = function(a) {
    if (!arguments.length)
      return e12.slice();
    e12 = [];
    for (let s of a)
      s != null && !isNaN(s = +s) && e12.push(s);
    return e12.sort(an), i();
  }, o.range = function(a) {
    return arguments.length ? (t = Array.from(a), i()) : t.slice();
  }, o.unknown = function(a) {
    return arguments.length ? (n = a, o) : n;
  }, o.quantiles = function() {
    return r.slice();
  }, o.copy = function() {
    return m0().domain(e12).range(t).unknown(n);
  }, Ro.apply(o, arguments);
}
function z9() {
  var e12 = 0, t = 1, r = 1, n = [0.5], i = [0, 1], o;
  function a(l) {
    return l != null && l <= l ? i[Yu(n, l, 0, r)] : o;
  }
  function s() {
    var l = -1;
    for (n = new Array(r); ++l < r; )
      n[l] = ((l + 1) * t - (l - r) * e12) / (r + 1);
    return a;
  }
  return a.domain = function(l) {
    return arguments.length ? ([e12, t] = l, e12 = +e12, t = +t, s()) : [e12, t];
  }, a.range = function(l) {
    return arguments.length ? (r = (i = Array.from(l)).length - 1, s()) : i.slice();
  }, a.invertExtent = function(l) {
    var u = i.indexOf(l);
    return u < 0 ? [NaN, NaN] : u < 1 ? [e12, n[0]] : u >= r ? [n[r - 1], t] : [n[u - 1], n[u]];
  }, a.unknown = function(l) {
    return arguments.length && (o = l), a;
  }, a.thresholds = function() {
    return n.slice();
  }, a.copy = function() {
    return z9().domain([e12, t]).range(i).unknown(o);
  }, Ro.apply(rc(a), arguments);
}
function V9() {
  var e12 = [0.5], t = [0, 1], r, n = 1;
  function i(o) {
    return o != null && o <= o ? t[Yu(e12, o, 0, n)] : r;
  }
  return i.domain = function(o) {
    return arguments.length ? (e12 = Array.from(o), n = Math.min(e12.length, t.length - 1), i) : e12.slice();
  }, i.range = function(o) {
    return arguments.length ? (t = Array.from(o), n = Math.min(e12.length, t.length - 1), i) : t.slice();
  }, i.invertExtent = function(o) {
    var a = t.indexOf(o);
    return [e12[a - 1], e12[a]];
  }, i.unknown = function(o) {
    return arguments.length ? (r = o, i) : r;
  }, i.copy = function() {
    return V9().domain(e12).range(t).unknown(r);
  }, Ro.apply(i, arguments);
}
var Sw = /* @__PURE__ */ new Date();
var ww = /* @__PURE__ */ new Date();
function yn(e12, t, r, n) {
  function i(o) {
    return e12(o = arguments.length === 0 ? /* @__PURE__ */ new Date() : /* @__PURE__ */ new Date(+o)), o;
  }
  return i.floor = (o) => (e12(o = /* @__PURE__ */ new Date(+o)), o), i.ceil = (o) => (e12(o = new Date(o - 1)), t(o, 1), e12(o), o), i.round = (o) => {
    const a = i(o), s = i.ceil(o);
    return o - a < s - o ? a : s;
  }, i.offset = (o, a) => (t(o = /* @__PURE__ */ new Date(+o), a == null ? 1 : Math.floor(a)), o), i.range = (o, a, s) => {
    const l = [];
    if (o = i.ceil(o), s = s == null ? 1 : Math.floor(s), !(o < a) || !(s > 0))
      return l;
    let u;
    do
      l.push(u = /* @__PURE__ */ new Date(+o)), t(o, s), e12(o);
    while (u < o && o < a);
    return l;
  }, i.filter = (o) => yn((a) => {
    if (a >= a)
      for (; e12(a), !o(a); )
        a.setTime(a - 1);
  }, (a, s) => {
    if (a >= a)
      if (s < 0)
        for (; ++s <= 0; )
          for (; t(a, -1), !o(a); )
            ;
      else
        for (; --s >= 0; )
          for (; t(a, 1), !o(a); )
            ;
  }), r && (i.count = (o, a) => (Sw.setTime(+o), ww.setTime(+a), e12(Sw), e12(ww), Math.floor(r(Sw, ww))), i.every = (o) => (o = Math.floor(o), !isFinite(o) || !(o > 0) ? null : o > 1 ? i.filter(n ? (a) => n(a) % o === 0 : (a) => i.count(0, a) % o === 0) : i)), i;
}
var g0 = yn(() => {
}, (e12, t) => {
  e12.setTime(+e12 + t);
}, (e12, t) => t - e12);
g0.every = (e12) => (e12 = Math.floor(e12), !isFinite(e12) || !(e12 > 0) ? null : e12 > 1 ? yn((t) => {
  t.setTime(Math.floor(t / e12) * e12);
}, (t, r) => {
  t.setTime(+t + r * e12);
}, (t, r) => (r - t) / e12) : g0);
g0.range;
var _s = 1e3;
var Ao = _s * 60;
var bs = Ao * 60;
var Ms = bs * 24;
var tR = Ms * 7;
var BB = Ms * 30;
var Aw = Ms * 365;
var zc = yn((e12) => {
  e12.setTime(e12 - e12.getMilliseconds());
}, (e12, t) => {
  e12.setTime(+e12 + t * _s);
}, (e12, t) => (t - e12) / _s, (e12) => e12.getUTCSeconds());
zc.range;
var rR = yn((e12) => {
  e12.setTime(e12 - e12.getMilliseconds() - e12.getSeconds() * _s);
}, (e12, t) => {
  e12.setTime(+e12 + t * Ao);
}, (e12, t) => (t - e12) / Ao, (e12) => e12.getMinutes());
rR.range;
var nR = yn((e12) => {
  e12.setUTCSeconds(0, 0);
}, (e12, t) => {
  e12.setTime(+e12 + t * Ao);
}, (e12, t) => (t - e12) / Ao, (e12) => e12.getUTCMinutes());
nR.range;
var iR = yn((e12) => {
  e12.setTime(e12 - e12.getMilliseconds() - e12.getSeconds() * _s - e12.getMinutes() * Ao);
}, (e12, t) => {
  e12.setTime(+e12 + t * bs);
}, (e12, t) => (t - e12) / bs, (e12) => e12.getHours());
iR.range;
var oR = yn((e12) => {
  e12.setUTCMinutes(0, 0, 0);
}, (e12, t) => {
  e12.setTime(+e12 + t * bs);
}, (e12, t) => (t - e12) / bs, (e12) => e12.getUTCHours());
oR.range;
var Uv = yn((e12) => e12.setHours(0, 0, 0, 0), (e12, t) => e12.setDate(e12.getDate() + t), (e12, t) => (t - e12 - (t.getTimezoneOffset() - e12.getTimezoneOffset()) * Ao) / Ms, (e12) => e12.getDate() - 1);
Uv.range;
var YE = yn((e12) => {
  e12.setUTCHours(0, 0, 0, 0);
}, (e12, t) => {
  e12.setUTCDate(e12.getUTCDate() + t);
}, (e12, t) => (t - e12) / Ms, (e12) => e12.getUTCDate() - 1);
YE.range;
var X9 = yn((e12) => {
  e12.setUTCHours(0, 0, 0, 0);
}, (e12, t) => {
  e12.setUTCDate(e12.getUTCDate() + t);
}, (e12, t) => (t - e12) / Ms, (e12) => Math.floor(e12 / Ms));
X9.range;
function Zu(e12) {
  return yn((t) => {
    t.setDate(t.getDate() - (t.getDay() + 7 - e12) % 7), t.setHours(0, 0, 0, 0);
  }, (t, r) => {
    t.setDate(t.getDate() + r * 7);
  }, (t, r) => (r - t - (r.getTimezoneOffset() - t.getTimezoneOffset()) * Ao) / tR);
}
var qE = Zu(0);
var v0 = Zu(1);
var fle = Zu(2);
var dle = Zu(3);
var cd = Zu(4);
var ple = Zu(5);
var mle = Zu(6);
qE.range;
v0.range;
fle.range;
dle.range;
cd.range;
ple.range;
mle.range;
function Qu(e12) {
  return yn((t) => {
    t.setUTCDate(t.getUTCDate() - (t.getUTCDay() + 7 - e12) % 7), t.setUTCHours(0, 0, 0, 0);
  }, (t, r) => {
    t.setUTCDate(t.getUTCDate() + r * 7);
  }, (t, r) => (r - t) / tR);
}
var KE = Qu(0);
var y0 = Qu(1);
var gle = Qu(2);
var vle = Qu(3);
var ud = Qu(4);
var yle = Qu(5);
var _le = Qu(6);
KE.range;
y0.range;
gle.range;
vle.range;
ud.range;
yle.range;
_le.range;
var aR = yn((e12) => {
  e12.setDate(1), e12.setHours(0, 0, 0, 0);
}, (e12, t) => {
  e12.setMonth(e12.getMonth() + t);
}, (e12, t) => t.getMonth() - e12.getMonth() + (t.getFullYear() - e12.getFullYear()) * 12, (e12) => e12.getMonth());
aR.range;
var sR = yn((e12) => {
  e12.setUTCDate(1), e12.setUTCHours(0, 0, 0, 0);
}, (e12, t) => {
  e12.setUTCMonth(e12.getUTCMonth() + t);
}, (e12, t) => t.getUTCMonth() - e12.getUTCMonth() + (t.getUTCFullYear() - e12.getUTCFullYear()) * 12, (e12) => e12.getUTCMonth());
sR.range;
var Ls = yn((e12) => {
  e12.setMonth(0, 1), e12.setHours(0, 0, 0, 0);
}, (e12, t) => {
  e12.setFullYear(e12.getFullYear() + t);
}, (e12, t) => t.getFullYear() - e12.getFullYear(), (e12) => e12.getFullYear());
Ls.every = (e12) => !isFinite(e12 = Math.floor(e12)) || !(e12 > 0) ? null : yn((t) => {
  t.setFullYear(Math.floor(t.getFullYear() / e12) * e12), t.setMonth(0, 1), t.setHours(0, 0, 0, 0);
}, (t, r) => {
  t.setFullYear(t.getFullYear() + r * e12);
});
Ls.range;
var Bs = yn((e12) => {
  e12.setUTCMonth(0, 1), e12.setUTCHours(0, 0, 0, 0);
}, (e12, t) => {
  e12.setUTCFullYear(e12.getUTCFullYear() + t);
}, (e12, t) => t.getUTCFullYear() - e12.getUTCFullYear(), (e12) => e12.getUTCFullYear());
Bs.every = (e12) => !isFinite(e12 = Math.floor(e12)) || !(e12 > 0) ? null : yn((t) => {
  t.setUTCFullYear(Math.floor(t.getUTCFullYear() / e12) * e12), t.setUTCMonth(0, 1), t.setUTCHours(0, 0, 0, 0);
}, (t, r) => {
  t.setUTCFullYear(t.getUTCFullYear() + r * e12);
});
Bs.range;
function W9(e12, t, r, n, i, o) {
  const a = [[zc, 1, _s], [zc, 5, 5 * _s], [zc, 15, 15 * _s], [zc, 30, 30 * _s], [o, 1, Ao], [o, 5, 5 * Ao], [o, 15, 15 * Ao], [o, 30, 30 * Ao], [i, 1, bs], [i, 3, 3 * bs], [i, 6, 6 * bs], [i, 12, 12 * bs], [n, 1, Ms], [n, 2, 2 * Ms], [r, 1, tR], [t, 1, BB], [t, 3, 3 * BB], [e12, 1, Aw]];
  function s(u, c, f) {
    const h = c < u;
    h && ([u, c] = [c, u]);
    const d = f && typeof f.range == "function" ? f : l(u, c, f), p = d ? d.range(u, +c + 1) : [];
    return h ? p.reverse() : p;
  }
  function l(u, c, f) {
    const h = Math.abs(c - u) / f, d = Jd(([, , g]) => g).right(a, h);
    if (d === a.length)
      return e12.every(u0(u / Aw, c / Aw, f));
    if (d === 0)
      return g0.every(Math.max(u0(u, c, f), 1));
    const [p, m] = a[h / a[d - 1][2] < a[d][2] / h ? d - 1 : d];
    return p.every(m);
  }
  return [s, l];
}
var [ble, Tle] = W9(Bs, sR, KE, X9, oR, nR);
var [Ele, Sle] = W9(Ls, aR, qE, Uv, iR, rR);
function Ow(e12) {
  if (0 <= e12.y && e12.y < 100) {
    var t = new Date(-1, e12.m, e12.d, e12.H, e12.M, e12.S, e12.L);
    return t.setFullYear(e12.y), t;
  }
  return new Date(e12.y, e12.m, e12.d, e12.H, e12.M, e12.S, e12.L);
}
function Iw(e12) {
  if (0 <= e12.y && e12.y < 100) {
    var t = new Date(Date.UTC(-1, e12.m, e12.d, e12.H, e12.M, e12.S, e12.L));
    return t.setUTCFullYear(e12.y), t;
  }
  return new Date(Date.UTC(e12.y, e12.m, e12.d, e12.H, e12.M, e12.S, e12.L));
}
function jp(e12, t, r) {
  return {
    y: e12,
    m: t,
    d: r,
    H: 0,
    M: 0,
    S: 0,
    L: 0
  };
}
function wle(e12) {
  var t = e12.dateTime, r = e12.date, n = e12.time, i = e12.periods, o = e12.days, a = e12.shortDays, s = e12.months, l = e12.shortMonths, u = Gp(i), c = zp(i), f = Gp(o), h = zp(o), d = Gp(a), p = zp(a), m = Gp(s), g = zp(s), v = Gp(l), _ = zp(l), y = {
    a: $,
    A: K,
    b: se,
    B: J,
    c: null,
    d: GB,
    e: GB,
    f: Wle,
    g: nce,
    G: oce,
    H: zle,
    I: Vle,
    j: Xle,
    L: Y9,
    m: Yle,
    M: qle,
    p: me,
    q: ae,
    Q: XB,
    s: WB,
    S: Kle,
    u: Zle,
    U: Qle,
    V: Jle,
    w: ece,
    W: tce,
    x: null,
    X: null,
    y: rce,
    Y: ice,
    Z: ace,
    "%": VB
  }, b = {
    a: Y,
    A: Q,
    b: le,
    B: Se,
    c: null,
    d: zB,
    e: zB,
    f: uce,
    g: bce,
    G: Ece,
    H: sce,
    I: lce,
    j: cce,
    L: K9,
    m: hce,
    M: fce,
    p: Pe,
    q: Re,
    Q: XB,
    s: WB,
    S: dce,
    u: pce,
    U: mce,
    V: gce,
    w: vce,
    W: yce,
    x: null,
    X: null,
    y: _ce,
    Y: Tce,
    Z: Sce,
    "%": VB
  }, T = {
    a: x,
    A: S,
    b: N,
    B,
    c: w,
    d: UB,
    e: UB,
    f: Hle,
    g: HB,
    G: $B,
    H: jB,
    I: jB,
    j: Lle,
    L: $le,
    m: Mle,
    M: Ble,
    p: I,
    q: Nle,
    Q: jle,
    s: Gle,
    S: Fle,
    u: Cle,
    U: xle,
    V: kle,
    w: Ple,
    W: Dle,
    x: R,
    X: F,
    y: HB,
    Y: $B,
    Z: Rle,
    "%": Ule
  };
  y.x = E(r, y), y.X = E(n, y), y.c = E(t, y), b.x = E(r, b), b.X = E(n, b), b.c = E(t, b);
  function E(we, Ne) {
    return function(Me) {
      var Ie = [], Ge = -1, je = 0, ot = we.length, at, Qe, bt;
      for (Me instanceof Date || (Me = /* @__PURE__ */ new Date(+Me)); ++Ge < ot; )
        we.charCodeAt(Ge) === 37 && (Ie.push(we.slice(je, Ge)), (Qe = FB[at = we.charAt(++Ge)]) != null ? at = we.charAt(++Ge) : Qe = at === "e" ? " " : "0", (bt = Ne[at]) && (at = bt(Me, Qe)), Ie.push(at), je = Ge + 1);
      return Ie.push(we.slice(je, Ge)), Ie.join("");
    };
  }
  function P(we, Ne) {
    return function(Me) {
      var Ie = jp(1900, void 0, 1), Ge = A(Ie, we, Me += "", 0), je, ot;
      if (Ge != Me.length)
        return null;
      if ("Q" in Ie)
        return new Date(Ie.Q);
      if ("s" in Ie)
        return new Date(Ie.s * 1e3 + ("L" in Ie ? Ie.L : 0));
      if (Ne && !("Z" in Ie) && (Ie.Z = 0), "p" in Ie && (Ie.H = Ie.H % 12 + Ie.p * 12), Ie.m === void 0 && (Ie.m = "q" in Ie ? Ie.q : 0), "V" in Ie) {
        if (Ie.V < 1 || Ie.V > 53)
          return null;
        "w" in Ie || (Ie.w = 1), "Z" in Ie ? (je = Iw(jp(Ie.y, 0, 1)), ot = je.getUTCDay(), je = ot > 4 || ot === 0 ? y0.ceil(je) : y0(je), je = YE.offset(je, (Ie.V - 1) * 7), Ie.y = je.getUTCFullYear(), Ie.m = je.getUTCMonth(), Ie.d = je.getUTCDate() + (Ie.w + 6) % 7) : (je = Ow(jp(Ie.y, 0, 1)), ot = je.getDay(), je = ot > 4 || ot === 0 ? v0.ceil(je) : v0(je), je = Uv.offset(je, (Ie.V - 1) * 7), Ie.y = je.getFullYear(), Ie.m = je.getMonth(), Ie.d = je.getDate() + (Ie.w + 6) % 7);
      } else
        ("W" in Ie || "U" in Ie) && ("w" in Ie || (Ie.w = "u" in Ie ? Ie.u % 7 : "W" in Ie ? 1 : 0), ot = "Z" in Ie ? Iw(jp(Ie.y, 0, 1)).getUTCDay() : Ow(jp(Ie.y, 0, 1)).getDay(), Ie.m = 0, Ie.d = "W" in Ie ? (Ie.w + 6) % 7 + Ie.W * 7 - (ot + 5) % 7 : Ie.w + Ie.U * 7 - (ot + 6) % 7);
      return "Z" in Ie ? (Ie.H += Ie.Z / 100 | 0, Ie.M += Ie.Z % 100, Iw(Ie)) : Ow(Ie);
    };
  }
  function A(we, Ne, Me, Ie) {
    for (var Ge = 0, je = Ne.length, ot = Me.length, at, Qe; Ge < je; ) {
      if (Ie >= ot)
        return -1;
      if (at = Ne.charCodeAt(Ge++), at === 37) {
        if (at = Ne.charAt(Ge++), Qe = T[at in FB ? Ne.charAt(Ge++) : at], !Qe || (Ie = Qe(we, Me, Ie)) < 0)
          return -1;
      } else if (at != Me.charCodeAt(Ie++))
        return -1;
    }
    return Ie;
  }
  function I(we, Ne, Me) {
    var Ie = u.exec(Ne.slice(Me));
    return Ie ? (we.p = c.get(Ie[0].toLowerCase()), Me + Ie[0].length) : -1;
  }
  function x(we, Ne, Me) {
    var Ie = d.exec(Ne.slice(Me));
    return Ie ? (we.w = p.get(Ie[0].toLowerCase()), Me + Ie[0].length) : -1;
  }
  function S(we, Ne, Me) {
    var Ie = f.exec(Ne.slice(Me));
    return Ie ? (we.w = h.get(Ie[0].toLowerCase()), Me + Ie[0].length) : -1;
  }
  function N(we, Ne, Me) {
    var Ie = v.exec(Ne.slice(Me));
    return Ie ? (we.m = _.get(Ie[0].toLowerCase()), Me + Ie[0].length) : -1;
  }
  function B(we, Ne, Me) {
    var Ie = m.exec(Ne.slice(Me));
    return Ie ? (we.m = g.get(Ie[0].toLowerCase()), Me + Ie[0].length) : -1;
  }
  function w(we, Ne, Me) {
    return A(we, t, Ne, Me);
  }
  function R(we, Ne, Me) {
    return A(we, r, Ne, Me);
  }
  function F(we, Ne, Me) {
    return A(we, n, Ne, Me);
  }
  function $(we) {
    return a[we.getDay()];
  }
  function K(we) {
    return o[we.getDay()];
  }
  function se(we) {
    return l[we.getMonth()];
  }
  function J(we) {
    return s[we.getMonth()];
  }
  function me(we) {
    return i[+(we.getHours() >= 12)];
  }
  function ae(we) {
    return 1 + ~~(we.getMonth() / 3);
  }
  function Y(we) {
    return a[we.getUTCDay()];
  }
  function Q(we) {
    return o[we.getUTCDay()];
  }
  function le(we) {
    return l[we.getUTCMonth()];
  }
  function Se(we) {
    return s[we.getUTCMonth()];
  }
  function Pe(we) {
    return i[+(we.getUTCHours() >= 12)];
  }
  function Re(we) {
    return 1 + ~~(we.getUTCMonth() / 3);
  }
  return {
    format: function(we) {
      var Ne = E(we += "", y);
      return Ne.toString = function() {
        return we;
      }, Ne;
    },
    parse: function(we) {
      var Ne = P(we += "", false);
      return Ne.toString = function() {
        return we;
      }, Ne;
    },
    utcFormat: function(we) {
      var Ne = E(we += "", b);
      return Ne.toString = function() {
        return we;
      }, Ne;
    },
    utcParse: function(we) {
      var Ne = P(we += "", true);
      return Ne.toString = function() {
        return we;
      }, Ne;
    }
  };
}
var FB = {
  "-": "",
  _: " ",
  0: "0"
};
var Cn = /^\s*\d+/;
var Ale = /^%/;
var Ole = /[\\^$*+?|[\]().{}]/g;
function lr(e12, t, r) {
  var n = e12 < 0 ? "-" : "", i = (n ? -e12 : e12) + "", o = i.length;
  return n + (o < r ? new Array(r - o + 1).join(t) + i : i);
}
function Ile(e12) {
  return e12.replace(Ole, "\\$&");
}
function Gp(e12) {
  return new RegExp("^(?:" + e12.map(Ile).join("|") + ")", "i");
}
function zp(e12) {
  return new Map(e12.map((t, r) => [t.toLowerCase(), r]));
}
function Ple(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 1));
  return n ? (e12.w = +n[0], r + n[0].length) : -1;
}
function Cle(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 1));
  return n ? (e12.u = +n[0], r + n[0].length) : -1;
}
function xle(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 2));
  return n ? (e12.U = +n[0], r + n[0].length) : -1;
}
function kle(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 2));
  return n ? (e12.V = +n[0], r + n[0].length) : -1;
}
function Dle(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 2));
  return n ? (e12.W = +n[0], r + n[0].length) : -1;
}
function $B(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 4));
  return n ? (e12.y = +n[0], r + n[0].length) : -1;
}
function HB(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 2));
  return n ? (e12.y = +n[0] + (+n[0] > 68 ? 1900 : 2e3), r + n[0].length) : -1;
}
function Rle(e12, t, r) {
  var n = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r, r + 6));
  return n ? (e12.Z = n[1] ? 0 : -(n[2] + (n[3] || "00")), r + n[0].length) : -1;
}
function Nle(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 1));
  return n ? (e12.q = n[0] * 3 - 3, r + n[0].length) : -1;
}
function Mle(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 2));
  return n ? (e12.m = n[0] - 1, r + n[0].length) : -1;
}
function UB(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 2));
  return n ? (e12.d = +n[0], r + n[0].length) : -1;
}
function Lle(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 3));
  return n ? (e12.m = 0, e12.d = +n[0], r + n[0].length) : -1;
}
function jB(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 2));
  return n ? (e12.H = +n[0], r + n[0].length) : -1;
}
function Ble(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 2));
  return n ? (e12.M = +n[0], r + n[0].length) : -1;
}
function Fle(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 2));
  return n ? (e12.S = +n[0], r + n[0].length) : -1;
}
function $le(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 3));
  return n ? (e12.L = +n[0], r + n[0].length) : -1;
}
function Hle(e12, t, r) {
  var n = Cn.exec(t.slice(r, r + 6));
  return n ? (e12.L = Math.floor(n[0] / 1e3), r + n[0].length) : -1;
}
function Ule(e12, t, r) {
  var n = Ale.exec(t.slice(r, r + 1));
  return n ? r + n[0].length : -1;
}
function jle(e12, t, r) {
  var n = Cn.exec(t.slice(r));
  return n ? (e12.Q = +n[0], r + n[0].length) : -1;
}
function Gle(e12, t, r) {
  var n = Cn.exec(t.slice(r));
  return n ? (e12.s = +n[0], r + n[0].length) : -1;
}
function GB(e12, t) {
  return lr(e12.getDate(), t, 2);
}
function zle(e12, t) {
  return lr(e12.getHours(), t, 2);
}
function Vle(e12, t) {
  return lr(e12.getHours() % 12 || 12, t, 2);
}
function Xle(e12, t) {
  return lr(1 + Uv.count(Ls(e12), e12), t, 3);
}
function Y9(e12, t) {
  return lr(e12.getMilliseconds(), t, 3);
}
function Wle(e12, t) {
  return Y9(e12, t) + "000";
}
function Yle(e12, t) {
  return lr(e12.getMonth() + 1, t, 2);
}
function qle(e12, t) {
  return lr(e12.getMinutes(), t, 2);
}
function Kle(e12, t) {
  return lr(e12.getSeconds(), t, 2);
}
function Zle(e12) {
  var t = e12.getDay();
  return t === 0 ? 7 : t;
}
function Qle(e12, t) {
  return lr(qE.count(Ls(e12) - 1, e12), t, 2);
}
function q9(e12) {
  var t = e12.getDay();
  return t >= 4 || t === 0 ? cd(e12) : cd.ceil(e12);
}
function Jle(e12, t) {
  return e12 = q9(e12), lr(cd.count(Ls(e12), e12) + (Ls(e12).getDay() === 4), t, 2);
}
function ece(e12) {
  return e12.getDay();
}
function tce(e12, t) {
  return lr(v0.count(Ls(e12) - 1, e12), t, 2);
}
function rce(e12, t) {
  return lr(e12.getFullYear() % 100, t, 2);
}
function nce(e12, t) {
  return e12 = q9(e12), lr(e12.getFullYear() % 100, t, 2);
}
function ice(e12, t) {
  return lr(e12.getFullYear() % 1e4, t, 4);
}
function oce(e12, t) {
  var r = e12.getDay();
  return e12 = r >= 4 || r === 0 ? cd(e12) : cd.ceil(e12), lr(e12.getFullYear() % 1e4, t, 4);
}
function ace(e12) {
  var t = e12.getTimezoneOffset();
  return (t > 0 ? "-" : (t *= -1, "+")) + lr(t / 60 | 0, "0", 2) + lr(t % 60, "0", 2);
}
function zB(e12, t) {
  return lr(e12.getUTCDate(), t, 2);
}
function sce(e12, t) {
  return lr(e12.getUTCHours(), t, 2);
}
function lce(e12, t) {
  return lr(e12.getUTCHours() % 12 || 12, t, 2);
}
function cce(e12, t) {
  return lr(1 + YE.count(Bs(e12), e12), t, 3);
}
function K9(e12, t) {
  return lr(e12.getUTCMilliseconds(), t, 3);
}
function uce(e12, t) {
  return K9(e12, t) + "000";
}
function hce(e12, t) {
  return lr(e12.getUTCMonth() + 1, t, 2);
}
function fce(e12, t) {
  return lr(e12.getUTCMinutes(), t, 2);
}
function dce(e12, t) {
  return lr(e12.getUTCSeconds(), t, 2);
}
function pce(e12) {
  var t = e12.getUTCDay();
  return t === 0 ? 7 : t;
}
function mce(e12, t) {
  return lr(KE.count(Bs(e12) - 1, e12), t, 2);
}
function Z9(e12) {
  var t = e12.getUTCDay();
  return t >= 4 || t === 0 ? ud(e12) : ud.ceil(e12);
}
function gce(e12, t) {
  return e12 = Z9(e12), lr(ud.count(Bs(e12), e12) + (Bs(e12).getUTCDay() === 4), t, 2);
}
function vce(e12) {
  return e12.getUTCDay();
}
function yce(e12, t) {
  return lr(y0.count(Bs(e12) - 1, e12), t, 2);
}
function _ce(e12, t) {
  return lr(e12.getUTCFullYear() % 100, t, 2);
}
function bce(e12, t) {
  return e12 = Z9(e12), lr(e12.getUTCFullYear() % 100, t, 2);
}
function Tce(e12, t) {
  return lr(e12.getUTCFullYear() % 1e4, t, 4);
}
function Ece(e12, t) {
  var r = e12.getUTCDay();
  return e12 = r >= 4 || r === 0 ? ud(e12) : ud.ceil(e12), lr(e12.getUTCFullYear() % 1e4, t, 4);
}
function Sce() {
  return "+0000";
}
function VB() {
  return "%";
}
function XB(e12) {
  return +e12;
}
function WB(e12) {
  return Math.floor(+e12 / 1e3);
}
var Eh;
var Q9;
var J9;
wce({
  dateTime: "%x, %X",
  date: "%-m/%-d/%Y",
  time: "%-I:%M:%S %p",
  periods: ["AM", "PM"],
  days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
  shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
  shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
});
function wce(e12) {
  return Eh = wle(e12), Q9 = Eh.format, Eh.parse, J9 = Eh.utcFormat, Eh.utcParse, Eh;
}
function Ace(e12) {
  return new Date(e12);
}
function Oce(e12) {
  return e12 instanceof Date ? +e12 : +/* @__PURE__ */ new Date(+e12);
}
function lR(e12, t, r, n, i, o, a, s, l, u) {
  var c = KD(), f = c.invert, h = c.domain, d = u(".%L"), p = u(":%S"), m = u("%I:%M"), g = u("%I %p"), v = u("%a %d"), _ = u("%b %d"), y = u("%B"), b = u("%Y");
  function T(E) {
    return (l(E) < E ? d : s(E) < E ? p : a(E) < E ? m : o(E) < E ? g : n(E) < E ? i(E) < E ? v : _ : r(E) < E ? y : b)(E);
  }
  return c.invert = function(E) {
    return new Date(f(E));
  }, c.domain = function(E) {
    return arguments.length ? h(Array.from(E, Oce)) : h().map(Ace);
  }, c.ticks = function(E) {
    var P = h();
    return e12(P[0], P[P.length - 1], E ?? 10);
  }, c.tickFormat = function(E, P) {
    return P == null ? T : u(P);
  }, c.nice = function(E) {
    var P = h();
    return (!E || typeof E.range != "function") && (E = t(P[0], P[P.length - 1], E ?? 10)), E ? h(U9(P, E)) : c;
  }, c.copy = function() {
    return Hv(c, lR(e12, t, r, n, i, o, a, s, l, u));
  }, c;
}
function Ice() {
  return Ro.apply(lR(Ele, Sle, Ls, aR, qE, Uv, iR, rR, zc, Q9).domain([new Date(2e3, 0, 1), new Date(2e3, 0, 2)]), arguments);
}
function Pce() {
  return Ro.apply(lR(ble, Tle, Bs, sR, KE, YE, oR, nR, zc, J9).domain([Date.UTC(2e3, 0, 1), Date.UTC(2e3, 0, 2)]), arguments);
}
function ZE() {
  var e12 = 0, t = 1, r, n, i, o, a = _i, s = false, l;
  function u(f) {
    return f == null || isNaN(f = +f) ? l : a(i === 0 ? 0.5 : (f = (o(f) - r) * i, s ? Math.max(0, Math.min(1, f)) : f));
  }
  u.domain = function(f) {
    return arguments.length ? ([e12, t] = f, r = o(e12 = +e12), n = o(t = +t), i = r === n ? 0 : 1 / (n - r), u) : [e12, t];
  }, u.clamp = function(f) {
    return arguments.length ? (s = !!f, u) : s;
  }, u.interpolator = function(f) {
    return arguments.length ? (a = f, u) : a;
  };
  function c(f) {
    return function(h) {
      var d, p;
      return arguments.length ? ([d, p] = h, a = f(d, p), u) : [a(0), a(1)];
    };
  }
  return u.range = c(qu), u.rangeRound = c(qD), u.unknown = function(f) {
    return arguments.length ? (l = f, u) : l;
  }, function(f) {
    return o = f, r = f(e12), n = f(t), i = r === n ? 0 : 1 / (n - r), u;
  };
}
function ic(e12, t) {
  return t.domain(e12.domain()).interpolator(e12.interpolator()).clamp(e12.clamp()).unknown(e12.unknown());
}
function e7() {
  var e12 = rc(ZE()(_i));
  return e12.copy = function() {
    return ic(e12, e7());
  }, Xs.apply(e12, arguments);
}
function t7() {
  var e12 = ZD(ZE()).domain([1, 10]);
  return e12.copy = function() {
    return ic(e12, t7()).base(e12.base());
  }, Xs.apply(e12, arguments);
}
function r7() {
  var e12 = QD(ZE());
  return e12.copy = function() {
    return ic(e12, r7()).constant(e12.constant());
  }, Xs.apply(e12, arguments);
}
function cR() {
  var e12 = JD(ZE());
  return e12.copy = function() {
    return ic(e12, cR()).exponent(e12.exponent());
  }, Xs.apply(e12, arguments);
}
function Cce() {
  return cR.apply(null, arguments).exponent(0.5);
}
function n7() {
  var e12 = [], t = _i;
  function r(n) {
    if (n != null && !isNaN(n = +n))
      return t((Yu(e12, n, 1) - 1) / (e12.length - 1));
  }
  return r.domain = function(n) {
    if (!arguments.length)
      return e12.slice();
    e12 = [];
    for (let i of n)
      i != null && !isNaN(i = +i) && e12.push(i);
    return e12.sort(an), r;
  }, r.interpolator = function(n) {
    return arguments.length ? (t = n, r) : t;
  }, r.range = function() {
    return e12.map((n, i) => t(i / (e12.length - 1)));
  }, r.quantiles = function(n) {
    return Array.from({
      length: n + 1
    }, (i, o) => Kg(e12, o / n));
  }, r.copy = function() {
    return n7(t).domain(e12);
  }, Xs.apply(r, arguments);
}
function QE() {
  var e12 = 0, t = 0.5, r = 1, n = 1, i, o, a, s, l, u = _i, c, f = false, h;
  function d(m) {
    return isNaN(m = +m) ? h : (m = 0.5 + ((m = +c(m)) - o) * (n * m < n * o ? s : l), u(f ? Math.max(0, Math.min(1, m)) : m));
  }
  d.domain = function(m) {
    return arguments.length ? ([e12, t, r] = m, i = c(e12 = +e12), o = c(t = +t), a = c(r = +r), s = i === o ? 0 : 0.5 / (o - i), l = o === a ? 0 : 0.5 / (a - o), n = o < i ? -1 : 1, d) : [e12, t, r];
  }, d.clamp = function(m) {
    return arguments.length ? (f = !!m, d) : f;
  }, d.interpolator = function(m) {
    return arguments.length ? (u = m, d) : u;
  };
  function p(m) {
    return function(g) {
      var v, _, y;
      return arguments.length ? ([v, _, y] = g, u = Vse(m, [v, _, y]), d) : [u(0), u(0.5), u(1)];
    };
  }
  return d.range = p(qu), d.rangeRound = p(qD), d.unknown = function(m) {
    return arguments.length ? (h = m, d) : h;
  }, function(m) {
    return c = m, i = m(e12), o = m(t), a = m(r), s = i === o ? 0 : 0.5 / (o - i), l = o === a ? 0 : 0.5 / (a - o), n = o < i ? -1 : 1, d;
  };
}
function i7() {
  var e12 = rc(QE()(_i));
  return e12.copy = function() {
    return ic(e12, i7());
  }, Xs.apply(e12, arguments);
}
function o7() {
  var e12 = ZD(QE()).domain([0.1, 1, 10]);
  return e12.copy = function() {
    return ic(e12, o7()).base(e12.base());
  }, Xs.apply(e12, arguments);
}
function a7() {
  var e12 = QD(QE());
  return e12.copy = function() {
    return ic(e12, a7()).constant(e12.constant());
  }, Xs.apply(e12, arguments);
}
function uR() {
  var e12 = JD(QE());
  return e12.copy = function() {
    return ic(e12, uR()).exponent(e12.exponent());
  }, Xs.apply(e12, arguments);
}
function xce() {
  return uR.apply(null, arguments).exponent(0.5);
}
var kce = Object.freeze(Object.defineProperty({
  __proto__: null,
  scaleBand: Fv,
  scaleDiverging: i7,
  scaleDivergingLog: o7,
  scaleDivergingPow: uR,
  scaleDivergingSqrt: xce,
  scaleDivergingSymlog: a7,
  scaleIdentity: H9,
  scaleImplicit: tP,
  scaleLinear: It,
  scaleLog: nc,
  scaleOrdinal: GD,
  scalePoint: mse,
  scalePow: eR,
  scaleQuantile: m0,
  scaleQuantize: z9,
  scaleRadial: G9,
  scaleSequential: e7,
  scaleSequentialLog: t7,
  scaleSequentialPow: cR,
  scaleSequentialQuantile: n7,
  scaleSequentialSqrt: Cce,
  scaleSequentialSymlog: r7,
  scaleSqrt: ule,
  scaleSymlog: j9,
  scaleThreshold: V9,
  scaleTime: Ice,
  scaleUtc: Pce,
  tickFormat: $9
}, Symbol.toStringTag, { value: "Module" }));
var jv = {};
var i_;
var Dce = new Uint8Array(16);
function s7() {
  if (!i_ && (i_ = typeof crypto < "u" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto < "u" && typeof msCrypto.getRandomValues == "function" && msCrypto.getRandomValues.bind(msCrypto), !i_))
    throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
  return i_(Dce);
}
var Rce = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;
function JE(e12) {
  return typeof e12 == "string" && Rce.test(e12);
}
var Dn = [];
for (Pw = 0; Pw < 256; ++Pw)
  Dn.push((Pw + 256).toString(16).substr(1));
var Pw;
function e1(e12) {
  var t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, r = (Dn[e12[t + 0]] + Dn[e12[t + 1]] + Dn[e12[t + 2]] + Dn[e12[t + 3]] + "-" + Dn[e12[t + 4]] + Dn[e12[t + 5]] + "-" + Dn[e12[t + 6]] + Dn[e12[t + 7]] + "-" + Dn[e12[t + 8]] + Dn[e12[t + 9]] + "-" + Dn[e12[t + 10]] + Dn[e12[t + 11]] + Dn[e12[t + 12]] + Dn[e12[t + 13]] + Dn[e12[t + 14]] + Dn[e12[t + 15]]).toLowerCase();
  if (!JE(r))
    throw TypeError("Stringified UUID is invalid");
  return r;
}
var YB;
var Cw;
var xw = 0;
var kw = 0;
function Nce(e12, t, r) {
  var n = t && r || 0, i = t || new Array(16);
  e12 = e12 || {};
  var o = e12.node || YB, a = e12.clockseq !== void 0 ? e12.clockseq : Cw;
  if (o == null || a == null) {
    var s = e12.random || (e12.rng || s7)();
    o == null && (o = YB = [s[0] | 1, s[1], s[2], s[3], s[4], s[5]]), a == null && (a = Cw = (s[6] << 8 | s[7]) & 16383);
  }
  var l = e12.msecs !== void 0 ? e12.msecs : Date.now(), u = e12.nsecs !== void 0 ? e12.nsecs : kw + 1, c = l - xw + (u - kw) / 1e4;
  if (c < 0 && e12.clockseq === void 0 && (a = a + 1 & 16383), (c < 0 || l > xw) && e12.nsecs === void 0 && (u = 0), u >= 1e4)
    throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
  xw = l, kw = u, Cw = a, l += 122192928e5;
  var f = ((l & 268435455) * 1e4 + u) % 4294967296;
  i[n++] = f >>> 24 & 255, i[n++] = f >>> 16 & 255, i[n++] = f >>> 8 & 255, i[n++] = f & 255;
  var h = l / 4294967296 * 1e4 & 268435455;
  i[n++] = h >>> 8 & 255, i[n++] = h & 255, i[n++] = h >>> 24 & 15 | 16, i[n++] = h >>> 16 & 255, i[n++] = a >>> 8 | 128, i[n++] = a & 255;
  for (var d = 0; d < 6; ++d)
    i[n + d] = o[d];
  return t || e1(i);
}
function l7(e12) {
  if (!JE(e12))
    throw TypeError("Invalid UUID");
  var t, r = new Uint8Array(16);
  return r[0] = (t = parseInt(e12.slice(0, 8), 16)) >>> 24, r[1] = t >>> 16 & 255, r[2] = t >>> 8 & 255, r[3] = t & 255, r[4] = (t = parseInt(e12.slice(9, 13), 16)) >>> 8, r[5] = t & 255, r[6] = (t = parseInt(e12.slice(14, 18), 16)) >>> 8, r[7] = t & 255, r[8] = (t = parseInt(e12.slice(19, 23), 16)) >>> 8, r[9] = t & 255, r[10] = (t = parseInt(e12.slice(24, 36), 16)) / 1099511627776 & 255, r[11] = t / 4294967296 & 255, r[12] = t >>> 24 & 255, r[13] = t >>> 16 & 255, r[14] = t >>> 8 & 255, r[15] = t & 255, r;
}
function Mce(e12) {
  e12 = unescape(encodeURIComponent(e12));
  for (var t = [], r = 0; r < e12.length; ++r)
    t.push(e12.charCodeAt(r));
  return t;
}
var Lce = "6ba7b810-9dad-11d1-80b4-00c04fd430c8";
var Bce = "6ba7b811-9dad-11d1-80b4-00c04fd430c8";
function c7(e12, t, r) {
  function n(i, o, a, s) {
    if (typeof i == "string" && (i = Mce(i)), typeof o == "string" && (o = l7(o)), o.length !== 16)
      throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");
    var l = new Uint8Array(16 + i.length);
    if (l.set(o), l.set(i, o.length), l = r(l), l[6] = l[6] & 15 | t, l[8] = l[8] & 63 | 128, a) {
      s = s || 0;
      for (var u = 0; u < 16; ++u)
        a[s + u] = l[u];
      return a;
    }
    return e1(l);
  }
  try {
    n.name = e12;
  } catch {
  }
  return n.DNS = Lce, n.URL = Bce, n;
}
function Fce(e12) {
  if (typeof e12 == "string") {
    var t = unescape(encodeURIComponent(e12));
    e12 = new Uint8Array(t.length);
    for (var r = 0; r < t.length; ++r)
      e12[r] = t.charCodeAt(r);
  }
  return $ce(Hce(Uce(e12), e12.length * 8));
}
function $ce(e12) {
  for (var t = [], r = e12.length * 32, n = "0123456789abcdef", i = 0; i < r; i += 8) {
    var o = e12[i >> 5] >>> i % 32 & 255, a = parseInt(n.charAt(o >>> 4 & 15) + n.charAt(o & 15), 16);
    t.push(a);
  }
  return t;
}
function u7(e12) {
  return (e12 + 64 >>> 9 << 4) + 14 + 1;
}
function Hce(e12, t) {
  e12[t >> 5] |= 128 << t % 32, e12[u7(t) - 1] = t;
  for (var r = 1732584193, n = -271733879, i = -1732584194, o = 271733878, a = 0; a < e12.length; a += 16) {
    var s = r, l = n, u = i, c = o;
    r = Wn(r, n, i, o, e12[a], 7, -680876936), o = Wn(o, r, n, i, e12[a + 1], 12, -389564586), i = Wn(i, o, r, n, e12[a + 2], 17, 606105819), n = Wn(n, i, o, r, e12[a + 3], 22, -1044525330), r = Wn(r, n, i, o, e12[a + 4], 7, -176418897), o = Wn(o, r, n, i, e12[a + 5], 12, 1200080426), i = Wn(i, o, r, n, e12[a + 6], 17, -1473231341), n = Wn(n, i, o, r, e12[a + 7], 22, -45705983), r = Wn(r, n, i, o, e12[a + 8], 7, 1770035416), o = Wn(o, r, n, i, e12[a + 9], 12, -1958414417), i = Wn(i, o, r, n, e12[a + 10], 17, -42063), n = Wn(n, i, o, r, e12[a + 11], 22, -1990404162), r = Wn(r, n, i, o, e12[a + 12], 7, 1804603682), o = Wn(o, r, n, i, e12[a + 13], 12, -40341101), i = Wn(i, o, r, n, e12[a + 14], 17, -1502002290), n = Wn(n, i, o, r, e12[a + 15], 22, 1236535329), r = Yn(r, n, i, o, e12[a + 1], 5, -165796510), o = Yn(o, r, n, i, e12[a + 6], 9, -1069501632), i = Yn(i, o, r, n, e12[a + 11], 14, 643717713), n = Yn(n, i, o, r, e12[a], 20, -373897302), r = Yn(r, n, i, o, e12[a + 5], 5, -701558691), o = Yn(o, r, n, i, e12[a + 10], 9, 38016083), i = Yn(i, o, r, n, e12[a + 15], 14, -660478335), n = Yn(n, i, o, r, e12[a + 4], 20, -405537848), r = Yn(r, n, i, o, e12[a + 9], 5, 568446438), o = Yn(o, r, n, i, e12[a + 14], 9, -1019803690), i = Yn(i, o, r, n, e12[a + 3], 14, -187363961), n = Yn(n, i, o, r, e12[a + 8], 20, 1163531501), r = Yn(r, n, i, o, e12[a + 13], 5, -1444681467), o = Yn(o, r, n, i, e12[a + 2], 9, -51403784), i = Yn(i, o, r, n, e12[a + 7], 14, 1735328473), n = Yn(n, i, o, r, e12[a + 12], 20, -1926607734), r = qn(r, n, i, o, e12[a + 5], 4, -378558), o = qn(o, r, n, i, e12[a + 8], 11, -2022574463), i = qn(i, o, r, n, e12[a + 11], 16, 1839030562), n = qn(n, i, o, r, e12[a + 14], 23, -35309556), r = qn(r, n, i, o, e12[a + 1], 4, -1530992060), o = qn(o, r, n, i, e12[a + 4], 11, 1272893353), i = qn(i, o, r, n, e12[a + 7], 16, -155497632), n = qn(n, i, o, r, e12[a + 10], 23, -1094730640), r = qn(r, n, i, o, e12[a + 13], 4, 681279174), o = qn(o, r, n, i, e12[a], 11, -358537222), i = qn(i, o, r, n, e12[a + 3], 16, -722521979), n = qn(n, i, o, r, e12[a + 6], 23, 76029189), r = qn(r, n, i, o, e12[a + 9], 4, -640364487), o = qn(o, r, n, i, e12[a + 12], 11, -421815835), i = qn(i, o, r, n, e12[a + 15], 16, 530742520), n = qn(n, i, o, r, e12[a + 2], 23, -995338651), r = Kn(r, n, i, o, e12[a], 6, -198630844), o = Kn(o, r, n, i, e12[a + 7], 10, 1126891415), i = Kn(i, o, r, n, e12[a + 14], 15, -1416354905), n = Kn(n, i, o, r, e12[a + 5], 21, -57434055), r = Kn(r, n, i, o, e12[a + 12], 6, 1700485571), o = Kn(o, r, n, i, e12[a + 3], 10, -1894986606), i = Kn(i, o, r, n, e12[a + 10], 15, -1051523), n = Kn(n, i, o, r, e12[a + 1], 21, -2054922799), r = Kn(r, n, i, o, e12[a + 8], 6, 1873313359), o = Kn(o, r, n, i, e12[a + 15], 10, -30611744), i = Kn(i, o, r, n, e12[a + 6], 15, -1560198380), n = Kn(n, i, o, r, e12[a + 13], 21, 1309151649), r = Kn(r, n, i, o, e12[a + 4], 6, -145523070), o = Kn(o, r, n, i, e12[a + 11], 10, -1120210379), i = Kn(i, o, r, n, e12[a + 2], 15, 718787259), n = Kn(n, i, o, r, e12[a + 9], 21, -343485551), r = Rl(r, s), n = Rl(n, l), i = Rl(i, u), o = Rl(o, c);
  }
  return [r, n, i, o];
}
function Uce(e12) {
  if (e12.length === 0)
    return [];
  for (var t = e12.length * 8, r = new Uint32Array(u7(t)), n = 0; n < t; n += 8)
    r[n >> 5] |= (e12[n / 8] & 255) << n % 32;
  return r;
}
function Rl(e12, t) {
  var r = (e12 & 65535) + (t & 65535), n = (e12 >> 16) + (t >> 16) + (r >> 16);
  return n << 16 | r & 65535;
}
function jce(e12, t) {
  return e12 << t | e12 >>> 32 - t;
}
function t1(e12, t, r, n, i, o) {
  return Rl(jce(Rl(Rl(t, e12), Rl(n, o)), i), r);
}
function Wn(e12, t, r, n, i, o, a) {
  return t1(t & r | ~t & n, e12, t, i, o, a);
}
function Yn(e12, t, r, n, i, o, a) {
  return t1(t & n | r & ~n, e12, t, i, o, a);
}
function qn(e12, t, r, n, i, o, a) {
  return t1(t ^ r ^ n, e12, t, i, o, a);
}
function Kn(e12, t, r, n, i, o, a) {
  return t1(r ^ (t | ~n), e12, t, i, o, a);
}
var Gce = c7("v3", 48, Fce);
var zce = Gce;
function Vce(e12, t, r) {
  e12 = e12 || {};
  var n = e12.random || (e12.rng || s7)();
  if (n[6] = n[6] & 15 | 64, n[8] = n[8] & 63 | 128, t) {
    r = r || 0;
    for (var i = 0; i < 16; ++i)
      t[r + i] = n[i];
    return t;
  }
  return e1(n);
}
function Xce(e12, t, r, n) {
  switch (e12) {
    case 0:
      return t & r ^ ~t & n;
    case 1:
      return t ^ r ^ n;
    case 2:
      return t & r ^ t & n ^ r & n;
    case 3:
      return t ^ r ^ n;
  }
}
function Dw(e12, t) {
  return e12 << t | e12 >>> 32 - t;
}
function Wce(e12) {
  var t = [1518500249, 1859775393, 2400959708, 3395469782], r = [1732584193, 4023233417, 2562383102, 271733878, 3285377520];
  if (typeof e12 == "string") {
    var n = unescape(encodeURIComponent(e12));
    e12 = [];
    for (var i = 0; i < n.length; ++i)
      e12.push(n.charCodeAt(i));
  } else
    Array.isArray(e12) || (e12 = Array.prototype.slice.call(e12));
  e12.push(128);
  for (var o = e12.length / 4 + 2, a = Math.ceil(o / 16), s = new Array(a), l = 0; l < a; ++l) {
    for (var u = new Uint32Array(16), c = 0; c < 16; ++c)
      u[c] = e12[l * 64 + c * 4] << 24 | e12[l * 64 + c * 4 + 1] << 16 | e12[l * 64 + c * 4 + 2] << 8 | e12[l * 64 + c * 4 + 3];
    s[l] = u;
  }
  s[a - 1][14] = (e12.length - 1) * 8 / Math.pow(2, 32), s[a - 1][14] = Math.floor(s[a - 1][14]), s[a - 1][15] = (e12.length - 1) * 8 & 4294967295;
  for (var f = 0; f < a; ++f) {
    for (var h = new Uint32Array(80), d = 0; d < 16; ++d)
      h[d] = s[f][d];
    for (var p = 16; p < 80; ++p)
      h[p] = Dw(h[p - 3] ^ h[p - 8] ^ h[p - 14] ^ h[p - 16], 1);
    for (var m = r[0], g = r[1], v = r[2], _ = r[3], y = r[4], b = 0; b < 80; ++b) {
      var T = Math.floor(b / 20), E = Dw(m, 5) + Xce(T, g, v, _) + y + t[T] + h[b] >>> 0;
      y = _, _ = v, v = Dw(g, 30) >>> 0, g = m, m = E;
    }
    r[0] = r[0] + m >>> 0, r[1] = r[1] + g >>> 0, r[2] = r[2] + v >>> 0, r[3] = r[3] + _ >>> 0, r[4] = r[4] + y >>> 0;
  }
  return [r[0] >> 24 & 255, r[0] >> 16 & 255, r[0] >> 8 & 255, r[0] & 255, r[1] >> 24 & 255, r[1] >> 16 & 255, r[1] >> 8 & 255, r[1] & 255, r[2] >> 24 & 255, r[2] >> 16 & 255, r[2] >> 8 & 255, r[2] & 255, r[3] >> 24 & 255, r[3] >> 16 & 255, r[3] >> 8 & 255, r[3] & 255, r[4] >> 24 & 255, r[4] >> 16 & 255, r[4] >> 8 & 255, r[4] & 255];
}
var Yce = c7("v5", 80, Wce);
var qce = Yce;
var Kce = "00000000-0000-0000-0000-000000000000";
function Zce(e12) {
  if (!JE(e12))
    throw TypeError("Invalid UUID");
  return parseInt(e12.substr(14, 1), 16);
}
var Qce = Object.freeze(Object.defineProperty({
  __proto__: null,
  NIL: Kce,
  parse: l7,
  stringify: e1,
  v1: Nce,
  v3: zce,
  v4: Vce,
  v5: qce,
  validate: JE,
  version: Zce
}, Symbol.toStringTag, { value: "Module" }));
var Jce = zs(Qce);
var r1 = Jce;
var hR = /* @__PURE__ */ (() => typeof Buffer < "u" ? (e12) => Buffer.from(e12).toString("base64") : (e12) => btoa(String.fromCharCode(...e12)))();
var eue = /* @__PURE__ */ (() => typeof Buffer < "u" ? (e12) => Buffer.from(e12, "base64") : (e12) => Uint8Array.from(atob(e12), (t) => t.charCodeAt(0)))();
jv.encode = function(e12) {
  var t = r1.parse(e12), r = hR(t), n = r.replace(/\+/g, "-").replace(/\//g, "_").substring(0, 22);
  return n;
};
jv.decode = function(e12) {
  var t = e12.replace(/-/g, "+").replace(/_/g, "/") + "==";
  return r1.stringify(eue(t));
};
jv.v4 = function() {
  var e12 = r1.v4(null, new Uint8Array(16)), t = hR(e12), r = t.replace(/\+/g, "-").replace(/\//g, "_").substring(0, 22);
  return r;
};
jv.nice = function() {
  var e12 = r1.v4(null, new Uint8Array(16));
  e12[0] = e12[0] & 127;
  var t = hR(e12), r = t.replace(/\+/g, "-").replace(/\//g, "_").substring(0, 22);
  return r;
};
var tue = jv;
var Gt = Ui(tue);
var h7 = { exports: {} };
var n1 = {};
var _0 = { exports: {} };
_0.exports;
(function(e12, t) {
  var r = 200, n = "__lodash_hash_undefined__", i = 1, o = 2, a = 9007199254740991, s = "[object Arguments]", l = "[object Array]", u = "[object AsyncFunction]", c = "[object Boolean]", f = "[object Date]", h = "[object Error]", d = "[object Function]", p = "[object GeneratorFunction]", m = "[object Map]", g = "[object Number]", v = "[object Null]", _ = "[object Object]", y = "[object Promise]", b = "[object Proxy]", T = "[object RegExp]", E = "[object Set]", P = "[object String]", A = "[object Symbol]", I = "[object Undefined]", x = "[object WeakMap]", S = "[object ArrayBuffer]", N = "[object DataView]", B = "[object Float32Array]", w = "[object Float64Array]", R = "[object Int8Array]", F = "[object Int16Array]", $ = "[object Int32Array]", K = "[object Uint8Array]", se = "[object Uint8ClampedArray]", J = "[object Uint16Array]", me = "[object Uint32Array]", ae = /[\\^$.*+?()[\]{}|]/g, Y = /^\[object .+?Constructor\]$/, Q = /^(?:0|[1-9]\d*)$/, le = {};
  le[B] = le[w] = le[R] = le[F] = le[$] = le[K] = le[se] = le[J] = le[me] = true, le[s] = le[l] = le[S] = le[c] = le[N] = le[f] = le[h] = le[d] = le[m] = le[g] = le[_] = le[T] = le[E] = le[P] = le[x] = false;
  var Se = typeof globalThis == "object" && globalThis && globalThis.Object === Object && globalThis, Pe = typeof self == "object" && self && self.Object === Object && self, Re = Se || Pe || Function("return this")(), we = t && !t.nodeType && t, Ne = we && true && e12 && !e12.nodeType && e12, Me = Ne && Ne.exports === we, Ie = Me && Se.process, Ge = function() {
    try {
      return Ie && Ie.binding && Ie.binding("util");
    } catch {
    }
  }(), je = Ge && Ge.isTypedArray;
  function ot(oe, Ae) {
    for (var He = -1, rt = oe == null ? 0 : oe.length, xr = 0, Nt = []; ++He < rt; ) {
      var Vr = oe[He];
      Ae(Vr, He, oe) && (Nt[xr++] = Vr);
    }
    return Nt;
  }
  function at(oe, Ae) {
    for (var He = -1, rt = Ae.length, xr = oe.length; ++He < rt; )
      oe[xr + He] = Ae[He];
    return oe;
  }
  function Qe(oe, Ae) {
    for (var He = -1, rt = oe == null ? 0 : oe.length; ++He < rt; )
      if (Ae(oe[He], He, oe))
        return true;
    return false;
  }
  function bt(oe, Ae) {
    for (var He = -1, rt = Array(oe); ++He < oe; )
      rt[He] = Ae(He);
    return rt;
  }
  function Et(oe) {
    return function(Ae) {
      return oe(Ae);
    };
  }
  function $t(oe, Ae) {
    return oe.has(Ae);
  }
  function rn(oe, Ae) {
    return oe == null ? void 0 : oe[Ae];
  }
  function Ht(oe) {
    var Ae = -1, He = Array(oe.size);
    return oe.forEach(function(rt, xr) {
      He[++Ae] = [xr, rt];
    }), He;
  }
  function xe(oe, Ae) {
    return function(He) {
      return oe(Ae(He));
    };
  }
  function ne(oe) {
    var Ae = -1, He = Array(oe.size);
    return oe.forEach(function(rt) {
      He[++Ae] = rt;
    }), He;
  }
  var ce = Array.prototype, _e = Function.prototype, ee = Object.prototype, de = Re["__core-js_shared__"], Ce = _e.toString, ke = ee.hasOwnProperty, Ve = function() {
    var oe = /[^.]+$/.exec(de && de.keys && de.keys.IE_PROTO || "");
    return oe ? "Symbol(src)_1." + oe : "";
  }(), We = ee.toString, Ke = RegExp("^" + Ce.call(ke).replace(ae, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), tt = Me ? Re.Buffer : void 0, ut = Re.Symbol, Dt = Re.Uint8Array, gt = ee.propertyIsEnumerable, pr = ce.splice, H = ut ? ut.toStringTag : void 0, C = Object.getOwnPropertySymbols, M = tt ? tt.isBuffer : void 0, Z = xe(Object.keys, Object), ge = vh(Re, "DataView"), q = vh(Re, "Map"), W = vh(Re, "Promise"), j = vh(Re, "Set"), G = vh(Re, "WeakMap"), ue = vh(Object, "create"), ye = vc(ge), ve = vc(q), Te = vc(W), pe = vc(j), be = vc(G), z = ut ? ut.prototype : void 0, U = z ? z.valueOf : void 0;
  function ie(oe) {
    var Ae = -1, He = oe == null ? 0 : oe.length;
    for (this.clear(); ++Ae < He; ) {
      var rt = oe[Ae];
      this.set(rt[0], rt[1]);
    }
  }
  function Ee() {
    this.__data__ = ue ? ue(null) : {}, this.size = 0;
  }
  function Oe(oe) {
    var Ae = this.has(oe) && delete this.__data__[oe];
    return this.size -= Ae ? 1 : 0, Ae;
  }
  function Ye(oe) {
    var Ae = this.__data__;
    if (ue) {
      var He = Ae[oe];
      return He === n ? void 0 : He;
    }
    return ke.call(Ae, oe) ? Ae[oe] : void 0;
  }
  function qe(oe) {
    var Ae = this.__data__;
    return ue ? Ae[oe] !== void 0 : ke.call(Ae, oe);
  }
  function dt(oe, Ae) {
    var He = this.__data__;
    return this.size += this.has(oe) ? 0 : 1, He[oe] = ue && Ae === void 0 ? n : Ae, this;
  }
  ie.prototype.clear = Ee, ie.prototype.delete = Oe, ie.prototype.get = Ye, ie.prototype.has = qe, ie.prototype.set = dt;
  function At(oe) {
    var Ae = -1, He = oe == null ? 0 : oe.length;
    for (this.clear(); ++Ae < He; ) {
      var rt = oe[Ae];
      this.set(rt[0], rt[1]);
    }
  }
  function Yt() {
    this.__data__ = [], this.size = 0;
  }
  function Tt(oe) {
    var Ae = this.__data__, He = xn(Ae, oe);
    if (He < 0)
      return false;
    var rt = Ae.length - 1;
    return He == rt ? Ae.pop() : pr.call(Ae, He, 1), --this.size, true;
  }
  function Ut(oe) {
    var Ae = this.__data__, He = xn(Ae, oe);
    return He < 0 ? void 0 : Ae[He][1];
  }
  function or(oe) {
    return xn(this.__data__, oe) > -1;
  }
  function pt(oe, Ae) {
    var He = this.__data__, rt = xn(He, oe);
    return rt < 0 ? (++this.size, He.push([oe, Ae])) : He[rt][1] = Ae, this;
  }
  At.prototype.clear = Yt, At.prototype.delete = Tt, At.prototype.get = Ut, At.prototype.has = or, At.prototype.set = pt;
  function zt(oe) {
    var Ae = -1, He = oe == null ? 0 : oe.length;
    for (this.clear(); ++Ae < He; ) {
      var rt = oe[Ae];
      this.set(rt[0], rt[1]);
    }
  }
  function ar() {
    this.size = 0, this.__data__ = {
      hash: new ie(),
      map: new (q || At)(),
      string: new ie()
    };
  }
  function cr(oe) {
    var Ae = Ly(this, oe).delete(oe);
    return this.size -= Ae ? 1 : 0, Ae;
  }
  function Cr(oe) {
    return Ly(this, oe).get(oe);
  }
  function Vn(oe) {
    return Ly(this, oe).has(oe);
  }
  function Xe(oe, Ae) {
    var He = Ly(this, oe), rt = He.size;
    return He.set(oe, Ae), this.size += He.size == rt ? 0 : 1, this;
  }
  zt.prototype.clear = ar, zt.prototype.delete = cr, zt.prototype.get = Cr, zt.prototype.has = Vn, zt.prototype.set = Xe;
  function nt(oe) {
    var Ae = -1, He = oe == null ? 0 : oe.length;
    for (this.__data__ = new zt(); ++Ae < He; )
      this.add(oe[Ae]);
  }
  function Rt(oe) {
    return this.__data__.set(oe, n), this;
  }
  function Ot(oe) {
    return this.__data__.has(oe);
  }
  nt.prototype.add = nt.prototype.push = Rt, nt.prototype.has = Ot;
  function vt(oe) {
    var Ae = this.__data__ = new At(oe);
    this.size = Ae.size;
  }
  function qt() {
    this.__data__ = new At(), this.size = 0;
  }
  function xt(oe) {
    var Ae = this.__data__, He = Ae.delete(oe);
    return this.size = Ae.size, He;
  }
  function Mt(oe) {
    return this.__data__.get(oe);
  }
  function Kt(oe) {
    return this.__data__.has(oe);
  }
  function ur(oe, Ae) {
    var He = this.__data__;
    if (He instanceof At) {
      var rt = He.__data__;
      if (!q || rt.length < r - 1)
        return rt.push([oe, Ae]), this.size = ++He.size, this;
      He = this.__data__ = new zt(rt);
    }
    return He.set(oe, Ae), this.size = He.size, this;
  }
  vt.prototype.clear = qt, vt.prototype.delete = xt, vt.prototype.get = Mt, vt.prototype.has = Kt, vt.prototype.set = ur;
  function hr(oe, Ae) {
    var He = By(oe), rt = !He && fte(oe), xr = !He && !rt && VS(oe), Nt = !He && !rt && !xr && QL(oe), Vr = He || rt || xr || Nt, bn = Vr ? bt(oe.length, String) : [], kn = bn.length;
    for (var Hr in oe)
      (Ae || ke.call(oe, Hr)) && !(Vr && // Safari 9 has enumerable `arguments.length` in strict mode.
      (Hr == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
      xr && (Hr == "offset" || Hr == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
      Nt && (Hr == "buffer" || Hr == "byteLength" || Hr == "byteOffset") || // Skip index properties.
      ste(Hr, kn))) && bn.push(Hr);
    return bn;
  }
  function xn(oe, Ae) {
    for (var He = oe.length; He--; )
      if (YL(oe[He][0], Ae))
        return He;
    return -1;
  }
  function lo(oe, Ae, He) {
    var rt = Ae(oe);
    return By(oe) ? rt : at(rt, He(oe));
  }
  function rl(oe) {
    return oe == null ? oe === void 0 ? I : v : H && H in Object(oe) ? ote(oe) : hte(oe);
  }
  function Dp(oe) {
    return Rp(oe) && rl(oe) == s;
  }
  function nl(oe, Ae, He, rt, xr) {
    return oe === Ae ? true : oe == null || Ae == null || !Rp(oe) && !Rp(Ae) ? oe !== oe && Ae !== Ae : Jee(oe, Ae, He, rt, nl, xr);
  }
  function Jee(oe, Ae, He, rt, xr, Nt) {
    var Vr = By(oe), bn = By(Ae), kn = Vr ? l : il(oe), Hr = bn ? l : il(Ae);
    kn = kn == s ? _ : kn, Hr = Hr == s ? _ : Hr;
    var Vi = kn == _, No = Hr == _, Xn = kn == Hr;
    if (Xn && VS(oe)) {
      if (!VS(Ae))
        return false;
      Vr = true, Vi = false;
    }
    if (Xn && !Vi)
      return Nt || (Nt = new vt()), Vr || QL(oe) ? XL(oe, Ae, He, rt, xr, Nt) : nte(oe, Ae, kn, He, rt, xr, Nt);
    if (!(He & i)) {
      var co = Vi && ke.call(oe, "__wrapped__"), uo = No && ke.call(Ae, "__wrapped__");
      if (co || uo) {
        var ol = co ? oe.value() : oe, ts = uo ? Ae.value() : Ae;
        return Nt || (Nt = new vt()), xr(ol, ts, He, rt, Nt);
      }
    }
    return Xn ? (Nt || (Nt = new vt()), ite(oe, Ae, He, rt, xr, Nt)) : false;
  }
  function ete(oe) {
    if (!ZL(oe) || cte(oe))
      return false;
    var Ae = qL(oe) ? Ke : Y;
    return Ae.test(vc(oe));
  }
  function tte(oe) {
    return Rp(oe) && KL(oe.length) && !!le[rl(oe)];
  }
  function rte(oe) {
    if (!ute(oe))
      return Z(oe);
    var Ae = [];
    for (var He in Object(oe))
      ke.call(oe, He) && He != "constructor" && Ae.push(He);
    return Ae;
  }
  function XL(oe, Ae, He, rt, xr, Nt) {
    var Vr = He & i, bn = oe.length, kn = Ae.length;
    if (bn != kn && !(Vr && kn > bn))
      return false;
    var Hr = Nt.get(oe);
    if (Hr && Nt.get(Ae))
      return Hr == Ae;
    var Vi = -1, No = true, Xn = He & o ? new nt() : void 0;
    for (Nt.set(oe, Ae), Nt.set(Ae, oe); ++Vi < bn; ) {
      var co = oe[Vi], uo = Ae[Vi];
      if (rt)
        var ol = Vr ? rt(uo, co, Vi, Ae, oe, Nt) : rt(co, uo, Vi, oe, Ae, Nt);
      if (ol !== void 0) {
        if (ol)
          continue;
        No = false;
        break;
      }
      if (Xn) {
        if (!Qe(Ae, function(ts, yc) {
          if (!$t(Xn, yc) && (co === ts || xr(co, ts, He, rt, Nt)))
            return Xn.push(yc);
        })) {
          No = false;
          break;
        }
      } else if (!(co === uo || xr(co, uo, He, rt, Nt))) {
        No = false;
        break;
      }
    }
    return Nt.delete(oe), Nt.delete(Ae), No;
  }
  function nte(oe, Ae, He, rt, xr, Nt, Vr) {
    switch (He) {
      case N:
        if (oe.byteLength != Ae.byteLength || oe.byteOffset != Ae.byteOffset)
          return false;
        oe = oe.buffer, Ae = Ae.buffer;
      case S:
        return !(oe.byteLength != Ae.byteLength || !Nt(new Dt(oe), new Dt(Ae)));
      case c:
      case f:
      case g:
        return YL(+oe, +Ae);
      case h:
        return oe.name == Ae.name && oe.message == Ae.message;
      case T:
      case P:
        return oe == Ae + "";
      case m:
        var bn = Ht;
      case E:
        var kn = rt & i;
        if (bn || (bn = ne), oe.size != Ae.size && !kn)
          return false;
        var Hr = Vr.get(oe);
        if (Hr)
          return Hr == Ae;
        rt |= o, Vr.set(oe, Ae);
        var Vi = XL(bn(oe), bn(Ae), rt, xr, Nt, Vr);
        return Vr.delete(oe), Vi;
      case A:
        if (U)
          return U.call(oe) == U.call(Ae);
    }
    return false;
  }
  function ite(oe, Ae, He, rt, xr, Nt) {
    var Vr = He & i, bn = WL(oe), kn = bn.length, Hr = WL(Ae), Vi = Hr.length;
    if (kn != Vi && !Vr)
      return false;
    for (var No = kn; No--; ) {
      var Xn = bn[No];
      if (!(Vr ? Xn in Ae : ke.call(Ae, Xn)))
        return false;
    }
    var co = Nt.get(oe);
    if (co && Nt.get(Ae))
      return co == Ae;
    var uo = true;
    Nt.set(oe, Ae), Nt.set(Ae, oe);
    for (var ol = Vr; ++No < kn; ) {
      Xn = bn[No];
      var ts = oe[Xn], yc = Ae[Xn];
      if (rt)
        var JL = Vr ? rt(yc, ts, Xn, Ae, oe, Nt) : rt(ts, yc, Xn, oe, Ae, Nt);
      if (!(JL === void 0 ? ts === yc || xr(ts, yc, He, rt, Nt) : JL)) {
        uo = false;
        break;
      }
      ol || (ol = Xn == "constructor");
    }
    if (uo && !ol) {
      var Fy = oe.constructor, $y = Ae.constructor;
      Fy != $y && "constructor" in oe && "constructor" in Ae && !(typeof Fy == "function" && Fy instanceof Fy && typeof $y == "function" && $y instanceof $y) && (uo = false);
    }
    return Nt.delete(oe), Nt.delete(Ae), uo;
  }
  function WL(oe) {
    return lo(oe, mte, ate);
  }
  function Ly(oe, Ae) {
    var He = oe.__data__;
    return lte(Ae) ? He[typeof Ae == "string" ? "string" : "hash"] : He.map;
  }
  function vh(oe, Ae) {
    var He = rn(oe, Ae);
    return ete(He) ? He : void 0;
  }
  function ote(oe) {
    var Ae = ke.call(oe, H), He = oe[H];
    try {
      oe[H] = void 0;
      var rt = true;
    } catch {
    }
    var xr = We.call(oe);
    return rt && (Ae ? oe[H] = He : delete oe[H]), xr;
  }
  var ate = C ? function(oe) {
    return oe == null ? [] : (oe = Object(oe), ot(C(oe), function(Ae) {
      return gt.call(oe, Ae);
    }));
  } : gte, il = rl;
  (ge && il(new ge(new ArrayBuffer(1))) != N || q && il(new q()) != m || W && il(W.resolve()) != y || j && il(new j()) != E || G && il(new G()) != x) && (il = function(oe) {
    var Ae = rl(oe), He = Ae == _ ? oe.constructor : void 0, rt = He ? vc(He) : "";
    if (rt)
      switch (rt) {
        case ye:
          return N;
        case ve:
          return m;
        case Te:
          return y;
        case pe:
          return E;
        case be:
          return x;
      }
    return Ae;
  });
  function ste(oe, Ae) {
    return Ae = Ae ?? a, !!Ae && (typeof oe == "number" || Q.test(oe)) && oe > -1 && oe % 1 == 0 && oe < Ae;
  }
  function lte(oe) {
    var Ae = typeof oe;
    return Ae == "string" || Ae == "number" || Ae == "symbol" || Ae == "boolean" ? oe !== "__proto__" : oe === null;
  }
  function cte(oe) {
    return !!Ve && Ve in oe;
  }
  function ute(oe) {
    var Ae = oe && oe.constructor, He = typeof Ae == "function" && Ae.prototype || ee;
    return oe === He;
  }
  function hte(oe) {
    return We.call(oe);
  }
  function vc(oe) {
    if (oe != null) {
      try {
        return Ce.call(oe);
      } catch {
      }
      try {
        return oe + "";
      } catch {
      }
    }
    return "";
  }
  function YL(oe, Ae) {
    return oe === Ae || oe !== oe && Ae !== Ae;
  }
  var fte = Dp(/* @__PURE__ */ function() {
    return arguments;
  }()) ? Dp : function(oe) {
    return Rp(oe) && ke.call(oe, "callee") && !gt.call(oe, "callee");
  }, By = Array.isArray;
  function dte(oe) {
    return oe != null && KL(oe.length) && !qL(oe);
  }
  var VS = M || vte;
  function pte(oe, Ae) {
    return nl(oe, Ae);
  }
  function qL(oe) {
    if (!ZL(oe))
      return false;
    var Ae = rl(oe);
    return Ae == d || Ae == p || Ae == u || Ae == b;
  }
  function KL(oe) {
    return typeof oe == "number" && oe > -1 && oe % 1 == 0 && oe <= a;
  }
  function ZL(oe) {
    var Ae = typeof oe;
    return oe != null && (Ae == "object" || Ae == "function");
  }
  function Rp(oe) {
    return oe != null && typeof oe == "object";
  }
  var QL = je ? Et(je) : tte;
  function mte(oe) {
    return dte(oe) ? hr(oe) : rte(oe);
  }
  function gte() {
    return [];
  }
  function vte() {
    return false;
  }
  e12.exports = pte;
})(_0, _0.exports);
var i1 = _0.exports;
var f7 = { exports: {} };
(function(e12) {
  (function() {
    var t = {}.hasOwnProperty;
    function r() {
      for (var n = [], i = 0; i < arguments.length; i++) {
        var o = arguments[i];
        if (o) {
          var a = typeof o;
          if (a === "string" || a === "number")
            n.push(o);
          else if (Array.isArray(o)) {
            if (o.length) {
              var s = r.apply(null, o);
              s && n.push(s);
            }
          } else if (a === "object") {
            if (o.toString !== Object.prototype.toString && !o.toString.toString().includes("[native code]")) {
              n.push(o.toString());
              continue;
            }
            for (var l in o)
              t.call(o, l) && o[l] && n.push(l);
          }
        }
      }
      return n.join(" ");
    }
    e12.exports ? (r.default = r, e12.exports = r) : window.classNames = r;
  })();
})(f7);
var d7 = f7.exports;
var dr = {};
dr.__esModule = true;
dr.noop = void 0;
var rue = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
dr.bottom = b0;
dr.cloneLayout = aue;
dr.cloneLayoutItem = Of;
dr.childrenEqual = sue;
dr.collides = o1;
dr.compact = m7;
dr.compactItem = g7;
dr.correctBounds = v7;
dr.getLayoutItem = y7;
dr.getFirstCollision = If;
dr.getAllCollisions = _7;
dr.getStatics = fR;
dr.moveElement = sP;
dr.moveElementAwayFromCollision = lP;
dr.perc = cue;
dr.setTransform = uue;
dr.setTopLeft = hue;
dr.sortLayoutItems = dR;
dr.sortLayoutItemsByRowCol = b7;
dr.sortLayoutItemsByColRow = T7;
dr.synchronizeLayoutWithChildren = fue;
dr.validateLayout = due;
dr.autoBindHandlers = pue;
var nue = i1;
var iue = p7(nue);
var oue = import_react.default;
var oP = p7(oue);
function p7(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function b0(e12) {
  for (var t = 0, r = void 0, n = 0, i = e12.length; n < i; n++)
    r = e12[n].y + e12[n].h, r > t && (t = r);
  return t;
}
function aue(e12) {
  for (var t = Array(e12.length), r = 0, n = e12.length; r < n; r++)
    t[r] = Of(e12[r]);
  return t;
}
function Of(e12) {
  return {
    w: e12.w,
    h: e12.h,
    x: e12.x,
    y: e12.y,
    i: e12.i,
    minW: e12.minW,
    maxW: e12.maxW,
    minH: e12.minH,
    maxH: e12.maxH,
    moved: !!e12.moved,
    static: !!e12.static,
    // These can be null
    isDraggable: e12.isDraggable,
    isResizable: e12.isResizable
  };
}
function sue(e12, t) {
  return (0, iue.default)(oP.default.Children.map(e12, function(r) {
    return r.key;
  }), oP.default.Children.map(t, function(r) {
    return r.key;
  }));
}
function o1(e12, t) {
  return !(e12 === t || e12.x + e12.w <= t.x || e12.x >= t.x + t.w || e12.y + e12.h <= t.y || e12.y >= t.y + t.h);
}
function m7(e12, t, r) {
  for (var n = fR(e12), i = dR(e12, t), o = Array(e12.length), a = 0, s = i.length; a < s; a++) {
    var l = Of(i[a]);
    l.static || (l = g7(n, l, t, r, i), n.push(l)), o[e12.indexOf(i[a])] = l, l.moved = false;
  }
  return o;
}
var lue = {
  x: "w",
  y: "h"
};
function aP(e12, t, r, n) {
  var i = lue[n];
  t[n] += 1;
  for (var o = e12.indexOf(t), a = o + 1; a < e12.length; a++) {
    var s = e12[a];
    if (!s.static) {
      if (s.y > t.y + t.h)
        break;
      o1(t, s) && aP(e12, s, r + t[i], n);
    }
  }
  t[n] = r;
}
function g7(e12, t, r, n, i) {
  var o = r === "vertical", a = r === "horizontal";
  if (o)
    for (t.y = Math.min(b0(e12), t.y); t.y > 0 && !If(e12, t); )
      t.y--;
  else if (a)
    for (t.y = Math.min(b0(e12), t.y); t.x > 0 && !If(e12, t); )
      t.x--;
  for (var s = void 0; s = If(e12, t); )
    a ? aP(i, t, s.x + s.w, "x") : aP(i, t, s.y + s.h, "y"), a && t.x + t.w > n && (t.x = n - t.w, t.y++);
  return t;
}
function v7(e12, t) {
  for (var r = fR(e12), n = 0, i = e12.length; n < i; n++) {
    var o = e12[n];
    if (o.x + o.w > t.cols && (o.x = t.cols - o.w), o.x < 0 && (o.x = 0, o.w = t.cols), !o.static)
      r.push(o);
    else
      for (; If(r, o); )
        o.y++;
  }
  return e12;
}
function y7(e12, t) {
  for (var r = 0, n = e12.length; r < n; r++)
    if (e12[r].i === t)
      return e12[r];
}
function If(e12, t) {
  for (var r = 0, n = e12.length; r < n; r++)
    if (o1(e12[r], t))
      return e12[r];
}
function _7(e12, t) {
  return e12.filter(function(r) {
    return o1(r, t);
  });
}
function fR(e12) {
  return e12.filter(function(t) {
    return t.static;
  });
}
function sP(e12, t, r, n, i, o, a, s) {
  if (t.static || t.y === n && t.x === r)
    return e12;
  "" + t.i + String(r) + String(n) + t.x + t.y;
  var l = t.x, u = t.y;
  typeof r == "number" && (t.x = r), typeof n == "number" && (t.y = n), t.moved = true;
  var c = dR(e12, a), f = a === "vertical" && typeof n == "number" ? u >= n : a === "horizontal" && typeof r == "number" ? l >= r : false;
  f && (c = c.reverse());
  var h = _7(c, t);
  if (o && h.length)
    return "" + t.i, t.x = l, t.y = u, t.moved = false, e12;
  for (var d = 0, p = h.length; d < p; d++) {
    var m = h[d];
    "" + t.i + t.x + t.y + m.i + m.x + m.y, !m.moved && (m.static ? e12 = lP(e12, m, t, i, a) : e12 = lP(e12, t, m, i, a));
  }
  return e12;
}
function lP(e12, t, r, n, i, o) {
  var a = i === "horizontal", s = i === "vertical", l = false;
  if (n) {
    n = false;
    var u = {
      x: a ? Math.max(t.x - r.w, 0) : r.x,
      y: s ? Math.max(t.y - r.h, 0) : r.y,
      w: r.w,
      h: r.h,
      i: "-1"
    };
    if (!If(e12, u))
      return "" + r.i + u.x + u.y, sP(e12, r, a ? u.x : void 0, s ? u.y : void 0, n, l, i);
  }
  return sP(e12, r, a ? r.x + 1 : void 0, s ? r.y + 1 : void 0, n, l, i);
}
function cue(e12) {
  return e12 * 100 + "%";
}
function uue(e12) {
  var t = e12.top, r = e12.left, n = e12.width, i = e12.height, o = "translate(" + r + "px," + t + "px)";
  return {
    transform: o,
    WebkitTransform: o,
    MozTransform: o,
    msTransform: o,
    OTransform: o,
    width: n + "px",
    height: i + "px",
    position: "absolute"
  };
}
function hue(e12) {
  var t = e12.top, r = e12.left, n = e12.width, i = e12.height;
  return {
    top: t + "px",
    left: r + "px",
    width: n + "px",
    height: i + "px",
    position: "absolute"
  };
}
function dR(e12, t) {
  return t === "horizontal" ? T7(e12) : b7(e12);
}
function b7(e12) {
  return [].concat(e12).sort(function(t, r) {
    return t.y > r.y || t.y === r.y && t.x > r.x ? 1 : t.y === r.y && t.x === r.x ? 0 : -1;
  });
}
function T7(e12) {
  return [].concat(e12).sort(function(t, r) {
    return t.x > r.x || t.x === r.x && t.y > r.y ? 1 : -1;
  });
}
function fue(e12, t, r, n) {
  e12 = e12 || [];
  var i = [];
  return oP.default.Children.forEach(t, function(o, a) {
    var s = y7(e12, String(o.key));
    if (s)
      i[a] = Of(s);
    else {
      var l = o.props["data-grid"] || o.props._grid;
      l ? i[a] = Of(rue({}, l, {
        i: o.key
      })) : i[a] = Of({
        w: 1,
        h: 1,
        x: 0,
        y: b0(i),
        i: String(o.key)
      });
    }
  }), i = v7(i, {
    cols: r
  }), i = m7(i, n, r), i;
}
function due(e12) {
  var t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "Layout", r = ["x", "y", "w", "h"];
  if (!Array.isArray(e12))
    throw new Error(t + " must be an array!");
  for (var n = 0, i = e12.length; n < i; n++) {
    for (var o = e12[n], a = 0; a < r.length; a++)
      if (typeof o[r[a]] != "number")
        throw new Error("ReactGridLayout: " + t + "[" + n + "]." + r[a] + " must be a number!");
    if (o.i && typeof o.i != "string")
      throw new Error("ReactGridLayout: " + t + "[" + n + "].i must be a string!");
    if (o.static !== void 0 && typeof o.static != "boolean")
      throw new Error("ReactGridLayout: " + t + "[" + n + "].static must be a boolean!");
  }
}
function pue(e12, t) {
  t.forEach(function(r) {
    return e12[r] = e12[r].bind(e12);
  });
}
dr.noop = function() {
};
var pR = {};
var E7 = { exports: {} };
(function(e12, t) {
  (function(r, n) {
    e12.exports = n(import_react_dom.default, import_react.default);
  })(De, function(r, n) {
    r = r && r.hasOwnProperty("default") ? r.default : r, n = n && n.hasOwnProperty("default") ? n.default : n;
    function i(j, G) {
      return G = {
        exports: {}
      }, j(G, G.exports), G.exports;
    }
    function o(j) {
      return function() {
        return j;
      };
    }
    var a = function() {
    };
    a.thatReturns = o, a.thatReturnsFalse = o(false), a.thatReturnsTrue = o(true), a.thatReturnsNull = o(null), a.thatReturnsThis = function() {
      return this;
    }, a.thatReturnsArgument = function(j) {
      return j;
    };
    var s = a, l = function(G) {
    };
    l = function(G) {
      if (G === void 0)
        throw new Error("invariant requires an error message argument");
    };
    function u(j, G, ue, ye, ve, Te, pe, be) {
      if (l(G), !j) {
        var z;
        if (G === void 0)
          z = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
        else {
          var U = [ue, ye, ve, Te, pe, be], ie = 0;
          z = new Error(G.replace(/%s/g, function() {
            return U[ie++];
          })), z.name = "Invariant Violation";
        }
        throw z.framesToPop = 1, z;
      }
    }
    var c = u, f = s;
    {
      var h = function(G) {
        for (var ue = arguments.length, ye = Array(ue > 1 ? ue - 1 : 0), ve = 1; ve < ue; ve++)
          ye[ve - 1] = arguments[ve];
        var Te = 0, pe = "Warning: " + G.replace(/%s/g, function() {
          return ye[Te++];
        });
        typeof console < "u" && console.error(pe);
        try {
          throw new Error(pe);
        } catch {
        }
      };
      f = function(G, ue) {
        if (ue === void 0)
          throw new Error("`warning(condition, format, ...args)` requires a warning message argument");
        if (ue.indexOf("Failed Composite propType: ") !== 0 && !G) {
          for (var ye = arguments.length, ve = Array(ye > 2 ? ye - 2 : 0), Te = 2; Te < ye; Te++)
            ve[Te - 2] = arguments[Te];
          h.apply(void 0, [ue].concat(ve));
        }
      };
    }
    var d = f;
    var p = Object.getOwnPropertySymbols, m = Object.prototype.hasOwnProperty, g = Object.prototype.propertyIsEnumerable;
    function v(j) {
      if (j == null)
        throw new TypeError("Object.assign cannot be called with null or undefined");
      return Object(j);
    }
    function _() {
      try {
        if (!Object.assign)
          return false;
        var j = new String("abc");
        if (j[5] = "de", Object.getOwnPropertyNames(j)[0] === "5")
          return false;
        for (var G = {}, ue = 0; ue < 10; ue++)
          G["_" + String.fromCharCode(ue)] = ue;
        var ye = Object.getOwnPropertyNames(G).map(function(Te) {
          return G[Te];
        });
        if (ye.join("") !== "0123456789")
          return false;
        var ve = {};
        return "abcdefghijklmnopqrst".split("").forEach(function(Te) {
          ve[Te] = Te;
        }), Object.keys(Object.assign({}, ve)).join("") === "abcdefghijklmnopqrst";
      } catch {
        return false;
      }
    }
    var y = _() ? Object.assign : function(j, G) {
      for (var ue, ye = v(j), ve, Te = 1; Te < arguments.length; Te++) {
        ue = Object(arguments[Te]);
        for (var pe in ue)
          m.call(ue, pe) && (ye[pe] = ue[pe]);
        if (p) {
          ve = p(ue);
          for (var be = 0; be < ve.length; be++)
            g.call(ue, ve[be]) && (ye[ve[be]] = ue[ve[be]]);
        }
      }
      return ye;
    }, b = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED", T = b, E = c, P = d, A = T, I = {};
    function x(j, G, ue, ye, ve) {
      for (var Te in j)
        if (j.hasOwnProperty(Te)) {
          var pe;
          try {
            E(typeof j[Te] == "function", "%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.", ye || "React class", ue, Te, typeof j[Te]), pe = j[Te](G, Te, ye, ue, null, A);
          } catch (z) {
            pe = z;
          }
          if (P(!pe || pe instanceof Error, "%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).", ye || "React class", ue, Te, typeof pe), pe instanceof Error && !(pe.message in I)) {
            I[pe.message] = true;
            var be = ve ? ve() : "";
            P(false, "Failed %s type: %s%s", ue, pe.message, be ?? "");
          }
        }
    }
    var S = x, N = function(j, G) {
      var ue = typeof Symbol == "function" && Symbol.iterator, ye = "@@iterator";
      function ve(Xe) {
        var nt = Xe && (ue && Xe[ue] || Xe[ye]);
        if (typeof nt == "function")
          return nt;
      }
      var Te = "<<anonymous>>", pe = {
        array: ie("array"),
        bool: ie("boolean"),
        func: ie("function"),
        number: ie("number"),
        object: ie("object"),
        string: ie("string"),
        symbol: ie("symbol"),
        any: Ee(),
        arrayOf: Oe,
        element: Ye(),
        instanceOf: qe,
        node: Tt(),
        objectOf: At,
        oneOf: dt,
        oneOfType: Yt,
        shape: Ut,
        exact: or
      };
      function be(Xe, nt) {
        return Xe === nt ? Xe !== 0 || 1 / Xe === 1 / nt : Xe !== Xe && nt !== nt;
      }
      function z(Xe) {
        this.message = Xe, this.stack = "";
      }
      z.prototype = Error.prototype;
      function U(Xe) {
        var nt = {}, Rt = 0;
        function Ot(qt, xt, Mt, Kt, ur, hr, xn) {
          if (Kt = Kt || Te, hr = hr || Mt, xn !== T) {
            if (G)
              c(false, "Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");
            else if (typeof console < "u") {
              var lo = Kt + ":" + Mt;
              !nt[lo] && // Avoid spamming the console because they are often not actionable except for lib authors
              Rt < 3 && (d(false, "You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.", hr, Kt), nt[lo] = true, Rt++);
            }
          }
          return xt[Mt] == null ? qt ? xt[Mt] === null ? new z("The " + ur + " `" + hr + "` is marked as required " + ("in `" + Kt + "`, but its value is `null`.")) : new z("The " + ur + " `" + hr + "` is marked as required in " + ("`" + Kt + "`, but its value is `undefined`.")) : null : Xe(xt, Mt, Kt, ur, hr);
        }
        var vt = Ot.bind(null, false);
        return vt.isRequired = Ot.bind(null, true), vt;
      }
      function ie(Xe) {
        function nt(Rt, Ot, vt, qt, xt, Mt) {
          var Kt = Rt[Ot], ur = ar(Kt);
          if (ur !== Xe) {
            var hr = cr(Kt);
            return new z("Invalid " + qt + " `" + xt + "` of type " + ("`" + hr + "` supplied to `" + vt + "`, expected ") + ("`" + Xe + "`."));
          }
          return null;
        }
        return U(nt);
      }
      function Ee() {
        return U(s.thatReturnsNull);
      }
      function Oe(Xe) {
        function nt(Rt, Ot, vt, qt, xt) {
          if (typeof Xe != "function")
            return new z("Property `" + xt + "` of component `" + vt + "` has invalid PropType notation inside arrayOf.");
          var Mt = Rt[Ot];
          if (!Array.isArray(Mt)) {
            var Kt = ar(Mt);
            return new z("Invalid " + qt + " `" + xt + "` of type " + ("`" + Kt + "` supplied to `" + vt + "`, expected an array."));
          }
          for (var ur = 0; ur < Mt.length; ur++) {
            var hr = Xe(Mt, ur, vt, qt, xt + "[" + ur + "]", T);
            if (hr instanceof Error)
              return hr;
          }
          return null;
        }
        return U(nt);
      }
      function Ye() {
        function Xe(nt, Rt, Ot, vt, qt) {
          var xt = nt[Rt];
          if (!j(xt)) {
            var Mt = ar(xt);
            return new z("Invalid " + vt + " `" + qt + "` of type " + ("`" + Mt + "` supplied to `" + Ot + "`, expected a single ReactElement."));
          }
          return null;
        }
        return U(Xe);
      }
      function qe(Xe) {
        function nt(Rt, Ot, vt, qt, xt) {
          if (!(Rt[Ot] instanceof Xe)) {
            var Mt = Xe.name || Te, Kt = Vn(Rt[Ot]);
            return new z("Invalid " + qt + " `" + xt + "` of type " + ("`" + Kt + "` supplied to `" + vt + "`, expected ") + ("instance of `" + Mt + "`."));
          }
          return null;
        }
        return U(nt);
      }
      function dt(Xe) {
        if (!Array.isArray(Xe))
          return d(false, "Invalid argument supplied to oneOf, expected an instance of array."), s.thatReturnsNull;
        function nt(Rt, Ot, vt, qt, xt) {
          for (var Mt = Rt[Ot], Kt = 0; Kt < Xe.length; Kt++)
            if (be(Mt, Xe[Kt]))
              return null;
          var ur = JSON.stringify(Xe);
          return new z("Invalid " + qt + " `" + xt + "` of value `" + Mt + "` " + ("supplied to `" + vt + "`, expected one of " + ur + "."));
        }
        return U(nt);
      }
      function At(Xe) {
        function nt(Rt, Ot, vt, qt, xt) {
          if (typeof Xe != "function")
            return new z("Property `" + xt + "` of component `" + vt + "` has invalid PropType notation inside objectOf.");
          var Mt = Rt[Ot], Kt = ar(Mt);
          if (Kt !== "object")
            return new z("Invalid " + qt + " `" + xt + "` of type " + ("`" + Kt + "` supplied to `" + vt + "`, expected an object."));
          for (var ur in Mt)
            if (Mt.hasOwnProperty(ur)) {
              var hr = Xe(Mt, ur, vt, qt, xt + "." + ur, T);
              if (hr instanceof Error)
                return hr;
            }
          return null;
        }
        return U(nt);
      }
      function Yt(Xe) {
        if (!Array.isArray(Xe))
          return d(false, "Invalid argument supplied to oneOfType, expected an instance of array."), s.thatReturnsNull;
        for (var nt = 0; nt < Xe.length; nt++) {
          var Rt = Xe[nt];
          if (typeof Rt != "function")
            return d(false, "Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.", Cr(Rt), nt), s.thatReturnsNull;
        }
        function Ot(vt, qt, xt, Mt, Kt) {
          for (var ur = 0; ur < Xe.length; ur++) {
            var hr = Xe[ur];
            if (hr(vt, qt, xt, Mt, Kt, T) == null)
              return null;
          }
          return new z("Invalid " + Mt + " `" + Kt + "` supplied to " + ("`" + xt + "`."));
        }
        return U(Ot);
      }
      function Tt() {
        function Xe(nt, Rt, Ot, vt, qt) {
          return pt(nt[Rt]) ? null : new z("Invalid " + vt + " `" + qt + "` supplied to " + ("`" + Ot + "`, expected a ReactNode."));
        }
        return U(Xe);
      }
      function Ut(Xe) {
        function nt(Rt, Ot, vt, qt, xt) {
          var Mt = Rt[Ot], Kt = ar(Mt);
          if (Kt !== "object")
            return new z("Invalid " + qt + " `" + xt + "` of type `" + Kt + "` " + ("supplied to `" + vt + "`, expected `object`."));
          for (var ur in Xe) {
            var hr = Xe[ur];
            if (hr) {
              var xn = hr(Mt, ur, vt, qt, xt + "." + ur, T);
              if (xn)
                return xn;
            }
          }
          return null;
        }
        return U(nt);
      }
      function or(Xe) {
        function nt(Rt, Ot, vt, qt, xt) {
          var Mt = Rt[Ot], Kt = ar(Mt);
          if (Kt !== "object")
            return new z("Invalid " + qt + " `" + xt + "` of type `" + Kt + "` " + ("supplied to `" + vt + "`, expected `object`."));
          var ur = y({}, Rt[Ot], Xe);
          for (var hr in ur) {
            var xn = Xe[hr];
            if (!xn)
              return new z("Invalid " + qt + " `" + xt + "` key `" + hr + "` supplied to `" + vt + "`.\nBad object: " + JSON.stringify(Rt[Ot], null, "  ") + `
Valid keys: ` + JSON.stringify(Object.keys(Xe), null, "  "));
            var lo = xn(Mt, hr, vt, qt, xt + "." + hr, T);
            if (lo)
              return lo;
          }
          return null;
        }
        return U(nt);
      }
      function pt(Xe) {
        switch (typeof Xe) {
          case "number":
          case "string":
          case "undefined":
            return true;
          case "boolean":
            return !Xe;
          case "object":
            if (Array.isArray(Xe))
              return Xe.every(pt);
            if (Xe === null || j(Xe))
              return true;
            var nt = ve(Xe);
            if (nt) {
              var Rt = nt.call(Xe), Ot;
              if (nt !== Xe.entries) {
                for (; !(Ot = Rt.next()).done; )
                  if (!pt(Ot.value))
                    return false;
              } else
                for (; !(Ot = Rt.next()).done; ) {
                  var vt = Ot.value;
                  if (vt && !pt(vt[1]))
                    return false;
                }
            } else
              return false;
            return true;
          default:
            return false;
        }
      }
      function zt(Xe, nt) {
        return Xe === "symbol" || nt["@@toStringTag"] === "Symbol" || typeof Symbol == "function" && nt instanceof Symbol;
      }
      function ar(Xe) {
        var nt = typeof Xe;
        return Array.isArray(Xe) ? "array" : Xe instanceof RegExp ? "object" : zt(nt, Xe) ? "symbol" : nt;
      }
      function cr(Xe) {
        if (typeof Xe > "u" || Xe === null)
          return "" + Xe;
        var nt = ar(Xe);
        if (nt === "object") {
          if (Xe instanceof Date)
            return "date";
          if (Xe instanceof RegExp)
            return "regexp";
        }
        return nt;
      }
      function Cr(Xe) {
        var nt = cr(Xe);
        switch (nt) {
          case "array":
          case "object":
            return "an " + nt;
          case "boolean":
          case "date":
          case "regexp":
            return "a " + nt;
          default:
            return nt;
        }
      }
      function Vn(Xe) {
        return !Xe.constructor || !Xe.constructor.name ? Te : Xe.constructor.name;
      }
      return pe.checkPropTypes = S, pe.PropTypes = pe, pe;
    }, B = i(function(j) {
      {
        var G = typeof Symbol == "function" && Symbol.for && Symbol.for("react.element") || 60103, ue = function(ve) {
          return typeof ve == "object" && ve !== null && ve.$$typeof === G;
        }, ye = true;
        j.exports = N(ue, ye);
      }
    }), w = i(function(j) {
      (function() {
        var G = {}.hasOwnProperty;
        function ue() {
          for (var ye = [], ve = 0; ve < arguments.length; ve++) {
            var Te = arguments[ve];
            if (Te) {
              var pe = typeof Te;
              if (pe === "string" || pe === "number")
                ye.push(Te);
              else if (Array.isArray(Te))
                ye.push(ue.apply(null, Te));
              else if (pe === "object")
                for (var be in Te)
                  G.call(Te, be) && Te[be] && ye.push(be);
            }
          }
          return ye.join(" ");
        }
        j.exports ? j.exports = ue : window.classNames = ue;
      })();
    });
    function R(j, G) {
      for (var ue = 0, ye = j.length; ue < ye; ue++)
        if (G.apply(G, [j[ue], ue, j]))
          return j[ue];
    }
    function F(j) {
      return typeof j == "function" || Object.prototype.toString.call(j) === "[object Function]";
    }
    function $(j) {
      return typeof j == "number" && !isNaN(j);
    }
    function K(j) {
      return parseInt(j, 10);
    }
    function se(j, G, ue) {
      if (j[G])
        return new Error("Invalid prop " + G + " passed to " + ue + " - do not set this, set it on the child.");
    }
    var J = ["Moz", "Webkit", "O", "ms"];
    function me() {
      var j = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "transform";
      if (typeof window > "u" || typeof window.document > "u")
        return "";
      var G = window.document.documentElement.style;
      if (j in G)
        return "";
      for (var ue = 0; ue < J.length; ue++)
        if (ae(j, J[ue]) in G)
          return J[ue];
      return "";
    }
    function ae(j, G) {
      return G ? "" + G + Y(j) : j;
    }
    function Y(j) {
      for (var G = "", ue = true, ye = 0; ye < j.length; ye++)
        ue ? (G += j[ye].toUpperCase(), ue = false) : j[ye] === "-" ? ue = true : G += j[ye];
      return G;
    }
    var Q = me(), le = function(j, G) {
      if (!(j instanceof G))
        throw new TypeError("Cannot call a class as a function");
    }, Se = /* @__PURE__ */ function() {
      function j(G, ue) {
        for (var ye = 0; ye < ue.length; ye++) {
          var ve = ue[ye];
          ve.enumerable = ve.enumerable || false, ve.configurable = true, "value" in ve && (ve.writable = true), Object.defineProperty(G, ve.key, ve);
        }
      }
      return function(G, ue, ye) {
        return ue && j(G.prototype, ue), ye && j(G, ye), G;
      };
    }(), Pe = function(j, G, ue) {
      return G in j ? Object.defineProperty(j, G, {
        value: ue,
        enumerable: true,
        configurable: true,
        writable: true
      }) : j[G] = ue, j;
    }, Re = Object.assign || function(j) {
      for (var G = 1; G < arguments.length; G++) {
        var ue = arguments[G];
        for (var ye in ue)
          Object.prototype.hasOwnProperty.call(ue, ye) && (j[ye] = ue[ye]);
      }
      return j;
    }, we = function(j, G) {
      if (typeof G != "function" && G !== null)
        throw new TypeError("Super expression must either be null or a function, not " + typeof G);
      j.prototype = Object.create(G && G.prototype, {
        constructor: {
          value: j,
          enumerable: false,
          writable: true,
          configurable: true
        }
      }), G && (Object.setPrototypeOf ? Object.setPrototypeOf(j, G) : j.__proto__ = G);
    }, Ne = function(j, G) {
      if (!j)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return G && (typeof G == "object" || typeof G == "function") ? G : j;
    }, Me = /* @__PURE__ */ function() {
      function j(G, ue) {
        var ye = [], ve = true, Te = false, pe = void 0;
        try {
          for (var be = G[Symbol.iterator](), z; !(ve = (z = be.next()).done) && (ye.push(z.value), !(ue && ye.length === ue)); ve = true)
            ;
        } catch (U) {
          Te = true, pe = U;
        } finally {
          try {
            !ve && be.return && be.return();
          } finally {
            if (Te)
              throw pe;
          }
        }
        return ye;
      }
      return function(G, ue) {
        if (Array.isArray(G))
          return G;
        if (Symbol.iterator in Object(G))
          return j(G, ue);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(), Ie = "";
    function Ge(j, G) {
      return Ie || (Ie = R(["matches", "webkitMatchesSelector", "mozMatchesSelector", "msMatchesSelector", "oMatchesSelector"], function(ue) {
        return F(j[ue]);
      })), F(j[Ie]) ? j[Ie](G) : false;
    }
    function je(j, G, ue) {
      var ye = j;
      do {
        if (Ge(ye, G))
          return true;
        if (ye === ue)
          return false;
        ye = ye.parentNode;
      } while (ye);
      return false;
    }
    function ot(j, G, ue) {
      j && (j.attachEvent ? j.attachEvent("on" + G, ue) : j.addEventListener ? j.addEventListener(G, ue, true) : j["on" + G] = ue);
    }
    function at(j, G, ue) {
      j && (j.detachEvent ? j.detachEvent("on" + G, ue) : j.removeEventListener ? j.removeEventListener(G, ue, true) : j["on" + G] = null);
    }
    function Qe(j) {
      var G = j.clientHeight, ue = j.ownerDocument.defaultView.getComputedStyle(j);
      return G += K(ue.borderTopWidth), G += K(ue.borderBottomWidth), G;
    }
    function bt(j) {
      var G = j.clientWidth, ue = j.ownerDocument.defaultView.getComputedStyle(j);
      return G += K(ue.borderLeftWidth), G += K(ue.borderRightWidth), G;
    }
    function Et(j) {
      var G = j.clientHeight, ue = j.ownerDocument.defaultView.getComputedStyle(j);
      return G -= K(ue.paddingTop), G -= K(ue.paddingBottom), G;
    }
    function $t(j) {
      var G = j.clientWidth, ue = j.ownerDocument.defaultView.getComputedStyle(j);
      return G -= K(ue.paddingLeft), G -= K(ue.paddingRight), G;
    }
    function rn(j, G) {
      var ue = G === G.ownerDocument.body, ye = ue ? {
        left: 0,
        top: 0
      } : G.getBoundingClientRect(), ve = j.clientX + G.scrollLeft - ye.left, Te = j.clientY + G.scrollTop - ye.top;
      return {
        x: ve,
        y: Te
      };
    }
    function Ht(j, G) {
      var ue = ne(j, G, "px");
      return Pe({}, ae("transform", Q), ue);
    }
    function xe(j, G) {
      var ue = ne(j, G, "");
      return ue;
    }
    function ne(j, G, ue) {
      var ye = j.x, ve = j.y, Te = "translate(" + ye + ue + "," + ve + ue + ")";
      if (G) {
        var pe = "" + (typeof G.x == "string" ? G.x : G.x + ue), be = "" + (typeof G.y == "string" ? G.y : G.y + ue);
        Te = "translate(" + pe + ", " + be + ")" + Te;
      }
      return Te;
    }
    function ce(j, G) {
      return j.targetTouches && R(j.targetTouches, function(ue) {
        return G === ue.identifier;
      }) || j.changedTouches && R(j.changedTouches, function(ue) {
        return G === ue.identifier;
      });
    }
    function _e(j) {
      if (j.targetTouches && j.targetTouches[0])
        return j.targetTouches[0].identifier;
      if (j.changedTouches && j.changedTouches[0])
        return j.changedTouches[0].identifier;
    }
    function ee(j) {
      if (j) {
        var G = j.getElementById("react-draggable-style-el");
        G || (G = j.createElement("style"), G.type = "text/css", G.id = "react-draggable-style-el", G.innerHTML = `.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`, G.innerHTML += `.react-draggable-transparent-selection *::selection {all: inherit;}
`, j.getElementsByTagName("head")[0].appendChild(G)), j.body && ke(j.body, "react-draggable-transparent-selection");
      }
    }
    function de(j) {
      try {
        j && j.body && Ve(j.body, "react-draggable-transparent-selection"), j.selection ? j.selection.empty() : window.getSelection().removeAllRanges();
      } catch {
      }
    }
    function Ce() {
      var j = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
      return Re({
        touchAction: "none"
      }, j);
    }
    function ke(j, G) {
      j.classList ? j.classList.add(G) : j.className.match(new RegExp("(?:^|\\s)" + G + "(?!\\S)")) || (j.className += " " + G);
    }
    function Ve(j, G) {
      j.classList ? j.classList.remove(G) : j.className = j.className.replace(new RegExp("(?:^|\\s)" + G + "(?!\\S)", "g"), "");
    }
    function We(j, G, ue) {
      if (!j.props.bounds)
        return [G, ue];
      var ye = j.props.bounds;
      ye = typeof ye == "string" ? ye : H(ye);
      var ve = C(j);
      if (typeof ye == "string") {
        var Te = ve.ownerDocument, pe = Te.defaultView, be = void 0;
        if (ye === "parent" ? be = ve.parentNode : be = Te.querySelector(ye), !(be instanceof pe.HTMLElement))
          throw new Error('Bounds selector "' + ye + '" could not find an element.');
        var z = pe.getComputedStyle(ve), U = pe.getComputedStyle(be);
        ye = {
          left: -ve.offsetLeft + K(U.paddingLeft) + K(z.marginLeft),
          top: -ve.offsetTop + K(U.paddingTop) + K(z.marginTop),
          right: $t(be) - bt(ve) - ve.offsetLeft + K(U.paddingRight) - K(z.marginRight),
          bottom: Et(be) - Qe(ve) - ve.offsetTop + K(U.paddingBottom) - K(z.marginBottom)
        };
      }
      return $(ye.right) && (G = Math.min(G, ye.right)), $(ye.bottom) && (ue = Math.min(ue, ye.bottom)), $(ye.left) && (G = Math.max(G, ye.left)), $(ye.top) && (ue = Math.max(ue, ye.top)), [G, ue];
    }
    function Ke(j, G, ue) {
      var ye = Math.round(G / j[0]) * j[0], ve = Math.round(ue / j[1]) * j[1];
      return [ye, ve];
    }
    function tt(j) {
      return j.props.axis === "both" || j.props.axis === "x";
    }
    function ut(j) {
      return j.props.axis === "both" || j.props.axis === "y";
    }
    function Dt(j, G, ue) {
      var ye = typeof G == "number" ? ce(j, G) : null;
      if (typeof G == "number" && !ye)
        return null;
      var ve = C(ue), Te = ue.props.offsetParent || ve.offsetParent || ve.ownerDocument.body;
      return rn(ye || j, Te);
    }
    function gt(j, G, ue) {
      var ye = j.state, ve = !$(ye.lastX), Te = C(j);
      return ve ? {
        node: Te,
        deltaX: 0,
        deltaY: 0,
        lastX: G,
        lastY: ue,
        x: G,
        y: ue
      } : {
        node: Te,
        deltaX: G - ye.lastX,
        deltaY: ue - ye.lastY,
        lastX: ye.lastX,
        lastY: ye.lastY,
        x: G,
        y: ue
      };
    }
    function pr(j, G) {
      var ue = j.props.scale;
      return {
        node: G.node,
        x: j.state.x + G.deltaX / ue,
        y: j.state.y + G.deltaY / ue,
        deltaX: G.deltaX / ue,
        deltaY: G.deltaY / ue,
        lastX: j.state.x,
        lastY: j.state.y
      };
    }
    function H(j) {
      return {
        left: j.left,
        top: j.top,
        right: j.right,
        bottom: j.bottom
      };
    }
    function C(j) {
      var G = r.findDOMNode(j);
      if (!G)
        throw new Error("<DraggableCore>: Unmounted during event!");
      return G;
    }
    function M() {
    }
    var Z = {
      touch: {
        start: "touchstart",
        move: "touchmove",
        stop: "touchend"
      },
      mouse: {
        start: "mousedown",
        move: "mousemove",
        stop: "mouseup"
      }
    }, ge = Z.mouse, q = function(j) {
      we(G, j);
      function G() {
        var ue, ye, ve, Te;
        le(this, G);
        for (var pe = arguments.length, be = Array(pe), z = 0; z < pe; z++)
          be[z] = arguments[z];
        return Te = (ye = (ve = Ne(this, (ue = G.__proto__ || Object.getPrototypeOf(G)).call.apply(ue, [this].concat(be))), ve), ve.state = {
          dragging: false,
          // Used while dragging to determine deltas.
          lastX: NaN,
          lastY: NaN,
          touchIdentifier: null
        }, ve.handleDragStart = function(U) {
          if (ve.props.onMouseDown(U), !ve.props.allowAnyClick && typeof U.button == "number" && U.button !== 0)
            return false;
          var ie = r.findDOMNode(ve);
          if (!ie || !ie.ownerDocument || !ie.ownerDocument.body)
            throw new Error("<DraggableCore> not mounted on DragStart!");
          var Ee = ie.ownerDocument;
          if (!(ve.props.disabled || !(U.target instanceof Ee.defaultView.Node) || ve.props.handle && !je(U.target, ve.props.handle, ie) || ve.props.cancel && je(U.target, ve.props.cancel, ie))) {
            var Oe = _e(U);
            ve.setState({
              touchIdentifier: Oe
            });
            var Ye = Dt(U, Oe, ve);
            if (Ye != null) {
              var qe = Ye.x, dt = Ye.y, At = gt(ve, qe, dt);
              ve.props.onStart;
              var Yt = ve.props.onStart(U, At);
              Yt !== false && (ve.props.enableUserSelectHack && ee(Ee), ve.setState({
                dragging: true,
                lastX: qe,
                lastY: dt
              }), ot(Ee, ge.move, ve.handleDrag), ot(Ee, ge.stop, ve.handleDragStop));
            }
          }
        }, ve.handleDrag = function(U) {
          U.type === "touchmove" && U.preventDefault();
          var ie = Dt(U, ve.state.touchIdentifier, ve);
          if (ie != null) {
            var Ee = ie.x, Oe = ie.y;
            if (Array.isArray(ve.props.grid)) {
              var Ye = Ee - ve.state.lastX, qe = Oe - ve.state.lastY, dt = Ke(ve.props.grid, Ye, qe), At = Me(dt, 2);
              if (Ye = At[0], qe = At[1], !Ye && !qe)
                return;
              Ee = ve.state.lastX + Ye, Oe = ve.state.lastY + qe;
            }
            var Yt = gt(ve, Ee, Oe), Tt = ve.props.onDrag(U, Yt);
            if (Tt === false) {
              try {
                ve.handleDragStop(new MouseEvent("mouseup"));
              } catch {
                var Ut = document.createEvent("MouseEvents");
                Ut.initMouseEvent("mouseup", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null), ve.handleDragStop(Ut);
              }
              return;
            }
            ve.setState({
              lastX: Ee,
              lastY: Oe
            });
          }
        }, ve.handleDragStop = function(U) {
          if (ve.state.dragging) {
            var ie = Dt(U, ve.state.touchIdentifier, ve);
            if (ie != null) {
              var Ee = ie.x, Oe = ie.y, Ye = gt(ve, Ee, Oe), qe = r.findDOMNode(ve);
              qe && ve.props.enableUserSelectHack && de(qe.ownerDocument), ve.setState({
                dragging: false,
                lastX: NaN,
                lastY: NaN
              }), ve.props.onStop(U, Ye), qe && (at(qe.ownerDocument, ge.move, ve.handleDrag), at(qe.ownerDocument, ge.stop, ve.handleDragStop));
            }
          }
        }, ve.onMouseDown = function(U) {
          return ge = Z.mouse, ve.handleDragStart(U);
        }, ve.onMouseUp = function(U) {
          return ge = Z.mouse, ve.handleDragStop(U);
        }, ve.onTouchStart = function(U) {
          return ge = Z.touch, ve.handleDragStart(U);
        }, ve.onTouchEnd = function(U) {
          return ge = Z.touch, ve.handleDragStop(U);
        }, ye), Ne(ve, Te);
      }
      return Se(G, [{
        key: "componentWillUnmount",
        value: function() {
          var ye = r.findDOMNode(this);
          if (ye) {
            var ve = ye.ownerDocument;
            at(ve, Z.mouse.move, this.handleDrag), at(ve, Z.touch.move, this.handleDrag), at(ve, Z.mouse.stop, this.handleDragStop), at(ve, Z.touch.stop, this.handleDragStop), this.props.enableUserSelectHack && de(ve);
          }
        }
        // Same as onMouseDown (start drag), but now consider this a touch device.
      }, {
        key: "render",
        value: function() {
          return n.cloneElement(n.Children.only(this.props.children), {
            style: Ce(this.props.children.props.style),
            // Note: mouseMove handler is attached to document so it will still function
            // when the user drags quickly and leaves the bounds of the element.
            onMouseDown: this.onMouseDown,
            onTouchStart: this.onTouchStart,
            onMouseUp: this.onMouseUp,
            onTouchEnd: this.onTouchEnd
          });
        }
      }]), G;
    }(n.Component);
    q.displayName = "DraggableCore", q.propTypes = {
      /**
       * `allowAnyClick` allows dragging using any mouse button.
       * By default, we only accept the left button.
       *
       * Defaults to `false`.
       */
      allowAnyClick: B.bool,
      /**
       * `disabled`, if true, stops the <Draggable> from dragging. All handlers,
       * with the exception of `onMouseDown`, will not fire.
       */
      disabled: B.bool,
      /**
       * By default, we add 'user-select:none' attributes to the document body
       * to prevent ugly text selection during drag. If this is causing problems
       * for your app, set this to `false`.
       */
      enableUserSelectHack: B.bool,
      /**
       * `offsetParent`, if set, uses the passed DOM node to compute drag offsets
       * instead of using the parent node.
       */
      offsetParent: function(G, ue) {
        if (G[ue] && G[ue].nodeType !== 1)
          throw new Error("Draggable's offsetParent must be a DOM Node.");
      },
      /**
       * `grid` specifies the x and y that dragging should snap to.
       */
      grid: B.arrayOf(B.number),
      /**
       * `scale` specifies the scale of the area you are dragging inside of. It allows
       * the drag deltas to scale correctly with how far zoomed in/out you are.
       */
      scale: B.number,
      /**
       * `handle` specifies a selector to be used as the handle that initiates drag.
       *
       * Example:
       *
       * ```jsx
       *   let App = React.createClass({
       *       render: function () {
       *         return (
       *            <Draggable handle=".handle">
       *              <div>
       *                  <div className="handle">Click me to drag</div>
       *                  <div>This is some other content</div>
       *              </div>
       *           </Draggable>
       *         );
       *       }
       *   });
       * ```
       */
      handle: B.string,
      /**
       * `cancel` specifies a selector to be used to prevent drag initialization.
       *
       * Example:
       *
       * ```jsx
       *   let App = React.createClass({
       *       render: function () {
       *           return(
       *               <Draggable cancel=".cancel">
       *                   <div>
       *                     <div className="cancel">You can't drag from here</div>
       *                     <div>Dragging here works fine</div>
       *                   </div>
       *               </Draggable>
       *           );
       *       }
       *   });
       * ```
       */
      cancel: B.string,
      /**
       * Called when dragging starts.
       * If this function returns the boolean false, dragging will be canceled.
       */
      onStart: B.func,
      /**
       * Called while dragging.
       * If this function returns the boolean false, dragging will be canceled.
       */
      onDrag: B.func,
      /**
       * Called when dragging stops.
       * If this function returns the boolean false, the drag will remain active.
       */
      onStop: B.func,
      /**
       * A workaround option which can be passed if onMouseDown needs to be accessed,
       * since it'll always be blocked (as there is internal use of onMouseDown)
       */
      onMouseDown: B.func,
      /**
       * These properties should be defined on the child, not here.
       */
      className: se,
      style: se,
      transform: se
    }, q.defaultProps = {
      allowAnyClick: false,
      // by default only accept left click
      cancel: null,
      disabled: false,
      enableUserSelectHack: true,
      offsetParent: null,
      handle: null,
      grid: null,
      transform: null,
      onStart: function() {
      },
      onDrag: function() {
      },
      onStop: function() {
      },
      onMouseDown: function() {
      }
    };
    var W = function(j) {
      we(G, j);
      function G(ue) {
        le(this, G);
        var ye = Ne(this, (G.__proto__ || Object.getPrototypeOf(G)).call(this, ue));
        return ye.onDragStart = function(ve, Te) {
          var pe = ye.props.onStart(ve, pr(ye, Te));
          if (pe === false)
            return false;
          ye.setState({
            dragging: true,
            dragged: true
          });
        }, ye.onDrag = function(ve, Te) {
          if (!ye.state.dragging)
            return false;
          var pe = pr(ye, Te), be = {
            x: pe.x,
            y: pe.y
          };
          if (ye.props.bounds) {
            var z = be.x, U = be.y;
            be.x += ye.state.slackX, be.y += ye.state.slackY;
            var ie = We(ye, be.x, be.y), Ee = Me(ie, 2), Oe = Ee[0], Ye = Ee[1];
            be.x = Oe, be.y = Ye, be.slackX = ye.state.slackX + (z - be.x), be.slackY = ye.state.slackY + (U - be.y), pe.x = be.x, pe.y = be.y, pe.deltaX = be.x - ye.state.x, pe.deltaY = be.y - ye.state.y;
          }
          var qe = ye.props.onDrag(ve, pe);
          if (qe === false)
            return false;
          ye.setState(be);
        }, ye.onDragStop = function(ve, Te) {
          if (!ye.state.dragging)
            return false;
          var pe = ye.props.onStop(ve, pr(ye, Te));
          if (pe === false)
            return false;
          var be = {
            dragging: false,
            slackX: 0,
            slackY: 0
          }, z = !!ye.props.position;
          if (z) {
            var U = ye.props.position, ie = U.x, Ee = U.y;
            be.x = ie, be.y = Ee;
          }
          ye.setState(be);
        }, ye.state = {
          // Whether or not we are currently dragging.
          dragging: false,
          // Whether or not we have been dragged before.
          dragged: false,
          // Current transform x and y.
          x: ue.position ? ue.position.x : ue.defaultPosition.x,
          y: ue.position ? ue.position.y : ue.defaultPosition.y,
          // Used for compensating for out-of-bounds drags
          slackX: 0,
          slackY: 0,
          // Can only determine if SVG after mounting
          isElementSVG: false
        }, ue.position && !(ue.onDrag || ue.onStop) && console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."), ye;
      }
      return Se(G, [{
        key: "componentDidMount",
        value: function() {
          typeof window.SVGElement < "u" && r.findDOMNode(this) instanceof window.SVGElement && this.setState({
            isElementSVG: true
          });
        }
      }, {
        key: "componentWillReceiveProps",
        value: function(ye) {
          ye.position && (!this.props.position || ye.position.x !== this.props.position.x || ye.position.y !== this.props.position.y) && this.setState({
            x: ye.position.x,
            y: ye.position.y
          });
        }
      }, {
        key: "componentWillUnmount",
        value: function() {
          this.setState({
            dragging: false
          });
        }
      }, {
        key: "render",
        value: function() {
          var ye, ve = {}, Te = null, pe = !!this.props.position, be = !pe || this.state.dragging, z = this.props.position || this.props.defaultPosition, U = {
            // Set left if horizontal drag is enabled
            x: tt(this) && be ? this.state.x : z.x,
            // Set top if vertical drag is enabled
            y: ut(this) && be ? this.state.y : z.y
          };
          this.state.isElementSVG ? Te = xe(U, this.props.positionOffset) : ve = Ht(U, this.props.positionOffset);
          var ie = this.props, Ee = ie.defaultClassName, Oe = ie.defaultClassNameDragging, Ye = ie.defaultClassNameDragged, qe = n.Children.only(this.props.children), dt = w(qe.props.className || "", Ee, (ye = {}, Pe(ye, Oe, this.state.dragging), Pe(ye, Ye, this.state.dragged), ye));
          return n.createElement(q, Re({}, this.props, {
            onStart: this.onDragStart,
            onDrag: this.onDrag,
            onStop: this.onDragStop
          }), n.cloneElement(qe, {
            className: dt,
            style: Re({}, qe.props.style, ve),
            transform: Te
          }));
        }
      }]), G;
    }(n.Component);
    return W.displayName = "Draggable", W.propTypes = Re({}, q.propTypes, {
      /**
       * `axis` determines which axis the draggable can move.
       *
       *  Note that all callbacks will still return data as normal. This only
       *  controls flushing to the DOM.
       *
       * 'both' allows movement horizontally and vertically.
       * 'x' limits movement to horizontal axis.
       * 'y' limits movement to vertical axis.
       * 'none' limits all movement.
       *
       * Defaults to 'both'.
       */
      axis: B.oneOf(["both", "x", "y", "none"]),
      /**
       * `bounds` determines the range of movement available to the element.
       * Available values are:
       *
       * 'parent' restricts movement within the Draggable's parent node.
       *
       * Alternatively, pass an object with the following properties, all of which are optional:
       *
       * {left: LEFT_BOUND, right: RIGHT_BOUND, bottom: BOTTOM_BOUND, top: TOP_BOUND}
       *
       * All values are in px.
       *
       * Example:
       *
       * ```jsx
       *   let App = React.createClass({
       *       render: function () {
       *         return (
       *            <Draggable bounds={{right: 300, bottom: 300}}>
       *              <div>Content</div>
       *           </Draggable>
       *         );
       *       }
       *   });
       * ```
       */
      bounds: B.oneOfType([B.shape({
        left: B.number,
        right: B.number,
        top: B.number,
        bottom: B.number
      }), B.string, B.oneOf([false])]),
      defaultClassName: B.string,
      defaultClassNameDragging: B.string,
      defaultClassNameDragged: B.string,
      /**
       * `defaultPosition` specifies the x and y that the dragged item should start at
       *
       * Example:
       *
       * ```jsx
       *      let App = React.createClass({
       *          render: function () {
       *              return (
       *                  <Draggable defaultPosition={{x: 25, y: 25}}>
       *                      <div>I start with transformX: 25px and transformY: 25px;</div>
       *                  </Draggable>
       *              );
       *          }
       *      });
       * ```
       */
      defaultPosition: B.shape({
        x: B.number,
        y: B.number
      }),
      positionOffset: B.shape({
        x: B.oneOfType([B.number, B.string]),
        y: B.oneOfType([B.number, B.string])
      }),
      /**
       * `position`, if present, defines the current position of the element.
       *
       *  This is similar to how form elements in React work - if no `position` is supplied, the component
       *  is uncontrolled.
       *
       * Example:
       *
       * ```jsx
       *      let App = React.createClass({
       *          render: function () {
       *              return (
       *                  <Draggable position={{x: 25, y: 25}}>
       *                      <div>I start with transformX: 25px and transformY: 25px;</div>
       *                  </Draggable>
       *              );
       *          }
       *      });
       * ```
       */
      position: B.shape({
        x: B.number,
        y: B.number
      }),
      /**
       * These properties should be defined on the child, not here.
       */
      className: se,
      style: se,
      transform: se
    }), W.defaultProps = Re({}, q.defaultProps, {
      axis: "both",
      bounds: false,
      defaultClassName: "react-draggable",
      defaultClassNameDragging: "react-draggable-dragging",
      defaultClassNameDragged: "react-draggable-dragged",
      defaultPosition: {
        x: 0,
        y: 0
      },
      position: null,
      scale: 1
    }), W.default = W, W.DraggableCore = q, W;
  });
})(E7);
var mue = E7.exports;
var a1 = { exports: {} };
var Gv = {};
var s1 = { exports: {} };
var S7 = {};
function w7(e12) {
  var t, r, n = "";
  if (typeof e12 == "string" || typeof e12 == "number")
    n += e12;
  else if (typeof e12 == "object")
    if (Array.isArray(e12))
      for (t = 0; t < e12.length; t++)
        e12[t] && (r = w7(e12[t])) && (n && (n += " "), n += r);
    else
      for (t in e12)
        e12[t] && (n && (n += " "), n += t);
  return n;
}
function nr() {
  for (var e12, t, r = 0, n = ""; r < arguments.length; )
    (e12 = arguments[r++]) && (t = w7(e12)) && (n && (n += " "), n += t);
  return n;
}
var gue = Object.freeze(Object.defineProperty({
  __proto__: null,
  clsx: nr,
  default: nr
}, Symbol.toStringTag, { value: "Module" }));
var vue = zs(gue);
var Kr = {};
var qa = {};
Object.defineProperty(qa, "__esModule", {
  value: true
});
qa.dontSetMe = Eue;
qa.findInArray = yue;
qa.int = Tue;
qa.isFunction = _ue;
qa.isNum = bue;
function yue(e12, t) {
  for (let r = 0, n = e12.length; r < n; r++)
    if (t.apply(t, [e12[r], r, e12]))
      return e12[r];
}
function _ue(e12) {
  return typeof e12 == "function" || Object.prototype.toString.call(e12) === "[object Function]";
}
function bue(e12) {
  return typeof e12 == "number" && !isNaN(e12);
}
function Tue(e12) {
  return parseInt(e12, 10);
}
function Eue(e12, t, r) {
  if (e12[t])
    return new Error("Invalid prop ".concat(t, " passed to ").concat(r, " - do not set this, set it on the child."));
}
var Ju = {};
Object.defineProperty(Ju, "__esModule", {
  value: true
});
Ju.browserPrefixToKey = O7;
Ju.browserPrefixToStyle = Sue;
Ju.default = void 0;
Ju.getPrefix = A7;
var Rw = ["Moz", "Webkit", "O", "ms"];
function A7() {
  var e12;
  let t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "transform";
  if (typeof window > "u")
    return "";
  const r = (e12 = window.document) === null || e12 === void 0 || (e12 = e12.documentElement) === null || e12 === void 0 ? void 0 : e12.style;
  if (!r || t in r)
    return "";
  for (let n = 0; n < Rw.length; n++)
    if (O7(t, Rw[n]) in r)
      return Rw[n];
  return "";
}
function O7(e12, t) {
  return t ? "".concat(t).concat(wue(e12)) : e12;
}
function Sue(e12, t) {
  return t ? "-".concat(t.toLowerCase(), "-").concat(e12) : e12;
}
function wue(e12) {
  let t = "", r = true;
  for (let n = 0; n < e12.length; n++)
    r ? (t += e12[n].toUpperCase(), r = false) : e12[n] === "-" ? r = true : t += e12[n];
  return t;
}
Ju.default = A7();
Object.defineProperty(Kr, "__esModule", {
  value: true
});
Kr.addClassName = C7;
Kr.addEvent = Iue;
Kr.addUserSelectStyles = Fue;
Kr.createCSSTransform = Nue;
Kr.createSVGTransform = Mue;
Kr.getTouch = Lue;
Kr.getTouchIdentifier = Bue;
Kr.getTranslation = mR;
Kr.innerHeight = kue;
Kr.innerWidth = Due;
Kr.matchesSelector = P7;
Kr.matchesSelectorAndParentsTo = Oue;
Kr.offsetXYFromParent = Rue;
Kr.outerHeight = Cue;
Kr.outerWidth = xue;
Kr.removeClassName = x7;
Kr.removeEvent = Pue;
Kr.removeUserSelectStyles = $ue;
var ao2 = qa;
var qB = Aue(Ju);
function I7(e12) {
  if (typeof WeakMap != "function")
    return null;
  var t = /* @__PURE__ */ new WeakMap(), r = /* @__PURE__ */ new WeakMap();
  return (I7 = function(n) {
    return n ? r : t;
  })(e12);
}
function Aue(e12, t) {
  if (!t && e12 && e12.__esModule)
    return e12;
  if (e12 === null || typeof e12 != "object" && typeof e12 != "function")
    return {
      default: e12
    };
  var r = I7(t);
  if (r && r.has(e12))
    return r.get(e12);
  var n = {}, i = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var o in e12)
    if (o !== "default" && Object.prototype.hasOwnProperty.call(e12, o)) {
      var a = i ? Object.getOwnPropertyDescriptor(e12, o) : null;
      a && (a.get || a.set) ? Object.defineProperty(n, o, a) : n[o] = e12[o];
    }
  return n.default = e12, r && r.set(e12, n), n;
}
var o_ = "";
function P7(e12, t) {
  return o_ || (o_ = (0, ao2.findInArray)(["matches", "webkitMatchesSelector", "mozMatchesSelector", "msMatchesSelector", "oMatchesSelector"], function(r) {
    return (0, ao2.isFunction)(e12[r]);
  })), (0, ao2.isFunction)(e12[o_]) ? e12[o_](t) : false;
}
function Oue(e12, t, r) {
  let n = e12;
  do {
    if (P7(n, t))
      return true;
    if (n === r)
      return false;
    n = n.parentNode;
  } while (n);
  return false;
}
function Iue(e12, t, r, n) {
  if (!e12)
    return;
  const i = {
    capture: true,
    ...n
  };
  e12.addEventListener ? e12.addEventListener(t, r, i) : e12.attachEvent ? e12.attachEvent("on" + t, r) : e12["on" + t] = r;
}
function Pue(e12, t, r, n) {
  if (!e12)
    return;
  const i = {
    capture: true,
    ...n
  };
  e12.removeEventListener ? e12.removeEventListener(t, r, i) : e12.detachEvent ? e12.detachEvent("on" + t, r) : e12["on" + t] = null;
}
function Cue(e12) {
  let t = e12.clientHeight;
  const r = e12.ownerDocument.defaultView.getComputedStyle(e12);
  return t += (0, ao2.int)(r.borderTopWidth), t += (0, ao2.int)(r.borderBottomWidth), t;
}
function xue(e12) {
  let t = e12.clientWidth;
  const r = e12.ownerDocument.defaultView.getComputedStyle(e12);
  return t += (0, ao2.int)(r.borderLeftWidth), t += (0, ao2.int)(r.borderRightWidth), t;
}
function kue(e12) {
  let t = e12.clientHeight;
  const r = e12.ownerDocument.defaultView.getComputedStyle(e12);
  return t -= (0, ao2.int)(r.paddingTop), t -= (0, ao2.int)(r.paddingBottom), t;
}
function Due(e12) {
  let t = e12.clientWidth;
  const r = e12.ownerDocument.defaultView.getComputedStyle(e12);
  return t -= (0, ao2.int)(r.paddingLeft), t -= (0, ao2.int)(r.paddingRight), t;
}
function Rue(e12, t, r) {
  const i = t === t.ownerDocument.body ? {
    left: 0,
    top: 0
  } : t.getBoundingClientRect(), o = (e12.clientX + t.scrollLeft - i.left) / r, a = (e12.clientY + t.scrollTop - i.top) / r;
  return {
    x: o,
    y: a
  };
}
function Nue(e12, t) {
  const r = mR(e12, t, "px");
  return {
    [(0, qB.browserPrefixToKey)("transform", qB.default)]: r
  };
}
function Mue(e12, t) {
  return mR(e12, t, "");
}
function mR(e12, t, r) {
  let {
    x: n,
    y: i
  } = e12, o = "translate(".concat(n).concat(r, ",").concat(i).concat(r, ")");
  if (t) {
    const a = "".concat(typeof t.x == "string" ? t.x : t.x + r), s = "".concat(typeof t.y == "string" ? t.y : t.y + r);
    o = "translate(".concat(a, ", ").concat(s, ")") + o;
  }
  return o;
}
function Lue(e12, t) {
  return e12.targetTouches && (0, ao2.findInArray)(e12.targetTouches, (r) => t === r.identifier) || e12.changedTouches && (0, ao2.findInArray)(e12.changedTouches, (r) => t === r.identifier);
}
function Bue(e12) {
  if (e12.targetTouches && e12.targetTouches[0])
    return e12.targetTouches[0].identifier;
  if (e12.changedTouches && e12.changedTouches[0])
    return e12.changedTouches[0].identifier;
}
function Fue(e12) {
  if (!e12)
    return;
  let t = e12.getElementById("react-draggable-style-el");
  t || (t = e12.createElement("style"), t.type = "text/css", t.id = "react-draggable-style-el", t.innerHTML = `.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`, t.innerHTML += `.react-draggable-transparent-selection *::selection {all: inherit;}
`, e12.getElementsByTagName("head")[0].appendChild(t)), e12.body && C7(e12.body, "react-draggable-transparent-selection");
}
function $ue(e12) {
  if (e12)
    try {
      if (e12.body && x7(e12.body, "react-draggable-transparent-selection"), e12.selection)
        e12.selection.empty();
      else {
        const t = (e12.defaultView || window).getSelection();
        t && t.type !== "Caret" && t.removeAllRanges();
      }
    } catch {
    }
}
function C7(e12, t) {
  e12.classList ? e12.classList.add(t) : e12.className.match(new RegExp("(?:^|\\s)".concat(t, "(?!\\S)"))) || (e12.className += " ".concat(t));
}
function x7(e12, t) {
  e12.classList ? e12.classList.remove(t) : e12.className = e12.className.replace(new RegExp("(?:^|\\s)".concat(t, "(?!\\S)"), "g"), "");
}
var Ka = {};
Object.defineProperty(Ka, "__esModule", {
  value: true
});
Ka.canDragX = jue;
Ka.canDragY = Gue;
Ka.createCoreData = Vue;
Ka.createDraggableData = Xue;
Ka.getBoundPosition = Hue;
Ka.getControlPosition = zue;
Ka.snapToGrid = Uue;
var Wi = qa;
var ff = Kr;
function Hue(e12, t, r) {
  if (!e12.props.bounds)
    return [t, r];
  let {
    bounds: n
  } = e12.props;
  n = typeof n == "string" ? n : Wue(n);
  const i = gR(e12);
  if (typeof n == "string") {
    const {
      ownerDocument: o
    } = i, a = o.defaultView;
    let s;
    if (n === "parent" ? s = i.parentNode : s = o.querySelector(n), !(s instanceof a.HTMLElement))
      throw new Error('Bounds selector "' + n + '" could not find an element.');
    const l = s, u = a.getComputedStyle(i), c = a.getComputedStyle(l);
    n = {
      left: -i.offsetLeft + (0, Wi.int)(c.paddingLeft) + (0, Wi.int)(u.marginLeft),
      top: -i.offsetTop + (0, Wi.int)(c.paddingTop) + (0, Wi.int)(u.marginTop),
      right: (0, ff.innerWidth)(l) - (0, ff.outerWidth)(i) - i.offsetLeft + (0, Wi.int)(c.paddingRight) - (0, Wi.int)(u.marginRight),
      bottom: (0, ff.innerHeight)(l) - (0, ff.outerHeight)(i) - i.offsetTop + (0, Wi.int)(c.paddingBottom) - (0, Wi.int)(u.marginBottom)
    };
  }
  return (0, Wi.isNum)(n.right) && (t = Math.min(t, n.right)), (0, Wi.isNum)(n.bottom) && (r = Math.min(r, n.bottom)), (0, Wi.isNum)(n.left) && (t = Math.max(t, n.left)), (0, Wi.isNum)(n.top) && (r = Math.max(r, n.top)), [t, r];
}
function Uue(e12, t, r) {
  const n = Math.round(t / e12[0]) * e12[0], i = Math.round(r / e12[1]) * e12[1];
  return [n, i];
}
function jue(e12) {
  return e12.props.axis === "both" || e12.props.axis === "x";
}
function Gue(e12) {
  return e12.props.axis === "both" || e12.props.axis === "y";
}
function zue(e12, t, r) {
  const n = typeof t == "number" ? (0, ff.getTouch)(e12, t) : null;
  if (typeof t == "number" && !n)
    return null;
  const i = gR(r), o = r.props.offsetParent || i.offsetParent || i.ownerDocument.body;
  return (0, ff.offsetXYFromParent)(n || e12, o, r.props.scale);
}
function Vue(e12, t, r) {
  const n = !(0, Wi.isNum)(e12.lastX), i = gR(e12);
  return n ? {
    node: i,
    deltaX: 0,
    deltaY: 0,
    lastX: t,
    lastY: r,
    x: t,
    y: r
  } : {
    node: i,
    deltaX: t - e12.lastX,
    deltaY: r - e12.lastY,
    lastX: e12.lastX,
    lastY: e12.lastY,
    x: t,
    y: r
  };
}
function Xue(e12, t) {
  const r = e12.props.scale;
  return {
    node: t.node,
    x: e12.state.x + t.deltaX / r,
    y: e12.state.y + t.deltaY / r,
    deltaX: t.deltaX / r,
    deltaY: t.deltaY / r,
    lastX: e12.state.x,
    lastY: e12.state.y
  };
}
function Wue(e12) {
  return {
    left: e12.left,
    top: e12.top,
    right: e12.right,
    bottom: e12.bottom
  };
}
function gR(e12) {
  const t = e12.findDOMNode();
  if (!t)
    throw new Error("<DraggableCore>: Unmounted during event!");
  return t;
}
var l1 = {};
var c1 = {};
Object.defineProperty(c1, "__esModule", {
  value: true
});
c1.default = Yue;
function Yue() {
}
function que(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function KB(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, Zue(n.key), n);
  }
}
function Kue(e12, t, r) {
  return t && KB(e12.prototype, t), r && KB(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function Zue(e12) {
  var t = Que(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function Que(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Jue(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && cP(e12, t);
}
function cP(e12, t) {
  return cP = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, cP(e12, t);
}
function ehe(e12) {
  var t = rhe();
  return function() {
    var n = T0(e12), i;
    if (t) {
      var o = T0(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return the(this, i);
  };
}
function the(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return cn(e12);
}
function cn(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function rhe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function T0(e12) {
  return T0 = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, T0(e12);
}
Object.defineProperty(l1, "__esModule", {
  value: true
});
l1.default = void 0;
var Nw = ihe(import_react.default);
var Ii = vR(Vs);
var nhe = vR(import_react_dom.default);
var Zn = Kr;
var al = Ka;
var Mw = qa;
var Vp = vR(c1);
function vR(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function k7(e12) {
  if (typeof WeakMap != "function")
    return null;
  var t = /* @__PURE__ */ new WeakMap(), r = /* @__PURE__ */ new WeakMap();
  return (k7 = function(n) {
    return n ? r : t;
  })(e12);
}
function ihe(e12, t) {
  if (!t && e12 && e12.__esModule)
    return e12;
  if (e12 === null || typeof e12 != "object" && typeof e12 != "function")
    return {
      default: e12
    };
  var r = k7(t);
  if (r && r.has(e12))
    return r.get(e12);
  var n = {}, i = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var o in e12)
    if (o !== "default" && Object.prototype.hasOwnProperty.call(e12, o)) {
      var a = i ? Object.getOwnPropertyDescriptor(e12, o) : null;
      a && (a.get || a.set) ? Object.defineProperty(n, o, a) : n[o] = e12[o];
    }
  return n.default = e12, r && r.set(e12, n), n;
}
function ci(e12, t, r) {
  return t = ohe(t), t in e12 ? Object.defineProperty(e12, t, {
    value: r,
    enumerable: true,
    configurable: true,
    writable: true
  }) : e12[t] = r, e12;
}
function ohe(e12) {
  var t = ahe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function ahe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
var Bo = {
  touch: {
    start: "touchstart",
    move: "touchmove",
    stop: "touchend"
  },
  mouse: {
    start: "mousedown",
    move: "mousemove",
    stop: "mouseup"
  }
};
var sl = Bo.mouse;
var u1 = function(e12) {
  Jue(r, e12);
  var t = ehe(r);
  function r() {
    var n;
    return que(this, r), n = t.apply(this, arguments), ci(cn(n), "dragging", false), ci(cn(n), "lastX", NaN), ci(cn(n), "lastY", NaN), ci(cn(n), "touchIdentifier", null), ci(cn(n), "mounted", false), ci(cn(n), "handleDragStart", (i) => {
      if (n.props.onMouseDown(i), !n.props.allowAnyClick && typeof i.button == "number" && i.button !== 0)
        return false;
      const o = n.findDOMNode();
      if (!o || !o.ownerDocument || !o.ownerDocument.body)
        throw new Error("<DraggableCore> not mounted on DragStart!");
      const {
        ownerDocument: a
      } = o;
      if (n.props.disabled || !(i.target instanceof a.defaultView.Node) || n.props.handle && !(0, Zn.matchesSelectorAndParentsTo)(i.target, n.props.handle, o) || n.props.cancel && (0, Zn.matchesSelectorAndParentsTo)(i.target, n.props.cancel, o))
        return;
      i.type === "touchstart" && i.preventDefault();
      const s = (0, Zn.getTouchIdentifier)(i);
      n.touchIdentifier = s;
      const l = (0, al.getControlPosition)(i, s, cn(n));
      if (l == null)
        return;
      const {
        x: u,
        y: c
      } = l, f = (0, al.createCoreData)(cn(n), u, c);
      (0, Vp.default)("DraggableCore: handleDragStart: %j", f), (0, Vp.default)("calling", n.props.onStart), !(n.props.onStart(i, f) === false || n.mounted === false) && (n.props.enableUserSelectHack && (0, Zn.addUserSelectStyles)(a), n.dragging = true, n.lastX = u, n.lastY = c, (0, Zn.addEvent)(a, sl.move, n.handleDrag), (0, Zn.addEvent)(a, sl.stop, n.handleDragStop));
    }), ci(cn(n), "handleDrag", (i) => {
      const o = (0, al.getControlPosition)(i, n.touchIdentifier, cn(n));
      if (o == null)
        return;
      let {
        x: a,
        y: s
      } = o;
      if (Array.isArray(n.props.grid)) {
        let c = a - n.lastX, f = s - n.lastY;
        if ([c, f] = (0, al.snapToGrid)(n.props.grid, c, f), !c && !f)
          return;
        a = n.lastX + c, s = n.lastY + f;
      }
      const l = (0, al.createCoreData)(cn(n), a, s);
      if ((0, Vp.default)("DraggableCore: handleDrag: %j", l), n.props.onDrag(i, l) === false || n.mounted === false) {
        try {
          n.handleDragStop(new MouseEvent("mouseup"));
        } catch {
          const f = document.createEvent("MouseEvents");
          f.initMouseEvent("mouseup", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null), n.handleDragStop(f);
        }
        return;
      }
      n.lastX = a, n.lastY = s;
    }), ci(cn(n), "handleDragStop", (i) => {
      if (!n.dragging)
        return;
      const o = (0, al.getControlPosition)(i, n.touchIdentifier, cn(n));
      if (o == null)
        return;
      let {
        x: a,
        y: s
      } = o;
      if (Array.isArray(n.props.grid)) {
        let f = a - n.lastX || 0, h = s - n.lastY || 0;
        [f, h] = (0, al.snapToGrid)(n.props.grid, f, h), a = n.lastX + f, s = n.lastY + h;
      }
      const l = (0, al.createCoreData)(cn(n), a, s);
      if (n.props.onStop(i, l) === false || n.mounted === false)
        return false;
      const c = n.findDOMNode();
      c && n.props.enableUserSelectHack && (0, Zn.removeUserSelectStyles)(c.ownerDocument), (0, Vp.default)("DraggableCore: handleDragStop: %j", l), n.dragging = false, n.lastX = NaN, n.lastY = NaN, c && ((0, Vp.default)("DraggableCore: Removing handlers"), (0, Zn.removeEvent)(c.ownerDocument, sl.move, n.handleDrag), (0, Zn.removeEvent)(c.ownerDocument, sl.stop, n.handleDragStop));
    }), ci(cn(n), "onMouseDown", (i) => (sl = Bo.mouse, n.handleDragStart(i))), ci(cn(n), "onMouseUp", (i) => (sl = Bo.mouse, n.handleDragStop(i))), ci(cn(n), "onTouchStart", (i) => (sl = Bo.touch, n.handleDragStart(i))), ci(cn(n), "onTouchEnd", (i) => (sl = Bo.touch, n.handleDragStop(i))), n;
  }
  return Kue(r, [{
    key: "componentDidMount",
    value: function() {
      this.mounted = true;
      const i = this.findDOMNode();
      i && (0, Zn.addEvent)(i, Bo.touch.start, this.onTouchStart, {
        passive: false
      });
    }
  }, {
    key: "componentWillUnmount",
    value: function() {
      this.mounted = false;
      const i = this.findDOMNode();
      if (i) {
        const {
          ownerDocument: o
        } = i;
        (0, Zn.removeEvent)(o, Bo.mouse.move, this.handleDrag), (0, Zn.removeEvent)(o, Bo.touch.move, this.handleDrag), (0, Zn.removeEvent)(o, Bo.mouse.stop, this.handleDragStop), (0, Zn.removeEvent)(o, Bo.touch.stop, this.handleDragStop), (0, Zn.removeEvent)(i, Bo.touch.start, this.onTouchStart, {
          passive: false
        }), this.props.enableUserSelectHack && (0, Zn.removeUserSelectStyles)(o);
      }
    }
    // React Strict Mode compatibility: if `nodeRef` is passed, we will use it instead of trying to find
    // the underlying DOM node ourselves. See the README for more information.
  }, {
    key: "findDOMNode",
    value: function() {
      var i, o;
      return (i = this.props) !== null && i !== void 0 && i.nodeRef ? (o = this.props) === null || o === void 0 || (o = o.nodeRef) === null || o === void 0 ? void 0 : o.current : nhe.default.findDOMNode(this);
    }
  }, {
    key: "render",
    value: function() {
      return Nw.cloneElement(Nw.Children.only(this.props.children), {
        // Note: mouseMove handler is attached to document so it will still function
        // when the user drags quickly and leaves the bounds of the element.
        onMouseDown: this.onMouseDown,
        onMouseUp: this.onMouseUp,
        // onTouchStart is added on `componentDidMount` so they can be added with
        // {passive: false}, which allows it to cancel. See
        // https://developers.google.com/web/updates/2017/01/scrolling-intervention
        onTouchEnd: this.onTouchEnd
      });
    }
  }]), r;
}(
  Nw.Component
  /*:: <DraggableCoreProps>*/
);
l1.default = u1;
ci(u1, "displayName", "DraggableCore");
ci(u1, "propTypes", {
  /**
   * `allowAnyClick` allows dragging using any mouse button.
   * By default, we only accept the left button.
   *
   * Defaults to `false`.
   */
  allowAnyClick: Ii.default.bool,
  children: Ii.default.node.isRequired,
  /**
   * `disabled`, if true, stops the <Draggable> from dragging. All handlers,
   * with the exception of `onMouseDown`, will not fire.
   */
  disabled: Ii.default.bool,
  /**
   * By default, we add 'user-select:none' attributes to the document body
   * to prevent ugly text selection during drag. If this is causing problems
   * for your app, set this to `false`.
   */
  enableUserSelectHack: Ii.default.bool,
  /**
   * `offsetParent`, if set, uses the passed DOM node to compute drag offsets
   * instead of using the parent node.
   */
  offsetParent: function(e12, t) {
    if (e12[t] && e12[t].nodeType !== 1)
      throw new Error("Draggable's offsetParent must be a DOM Node.");
  },
  /**
   * `grid` specifies the x and y that dragging should snap to.
   */
  grid: Ii.default.arrayOf(Ii.default.number),
  /**
   * `handle` specifies a selector to be used as the handle that initiates drag.
   *
   * Example:
   *
   * ```jsx
   *   let App = React.createClass({
   *       render: function () {
   *         return (
   *            <Draggable handle=".handle">
   *              <div>
   *                  <div className="handle">Click me to drag</div>
   *                  <div>This is some other content</div>
   *              </div>
   *           </Draggable>
   *         );
   *       }
   *   });
   * ```
   */
  handle: Ii.default.string,
  /**
   * `cancel` specifies a selector to be used to prevent drag initialization.
   *
   * Example:
   *
   * ```jsx
   *   let App = React.createClass({
   *       render: function () {
   *           return(
   *               <Draggable cancel=".cancel">
   *                   <div>
   *                     <div className="cancel">You can't drag from here</div>
   *                     <div>Dragging here works fine</div>
   *                   </div>
   *               </Draggable>
   *           );
   *       }
   *   });
   * ```
   */
  cancel: Ii.default.string,
  /* If running in React Strict mode, ReactDOM.findDOMNode() is deprecated.
   * Unfortunately, in order for <Draggable> to work properly, we need raw access
   * to the underlying DOM node. If you want to avoid the warning, pass a `nodeRef`
   * as in this example:
   *
   * function MyComponent() {
   *   const nodeRef = React.useRef(null);
   *   return (
   *     <Draggable nodeRef={nodeRef}>
   *       <div ref={nodeRef}>Example Target</div>
   *     </Draggable>
   *   );
   * }
   *
   * This can be used for arbitrarily nested components, so long as the ref ends up
   * pointing to the actual child DOM node and not a custom component.
   */
  nodeRef: Ii.default.object,
  /**
   * Called when dragging starts.
   * If this function returns the boolean false, dragging will be canceled.
   */
  onStart: Ii.default.func,
  /**
   * Called while dragging.
   * If this function returns the boolean false, dragging will be canceled.
   */
  onDrag: Ii.default.func,
  /**
   * Called when dragging stops.
   * If this function returns the boolean false, the drag will remain active.
   */
  onStop: Ii.default.func,
  /**
   * A workaround option which can be passed if onMouseDown needs to be accessed,
   * since it'll always be blocked (as there is internal use of onMouseDown)
   */
  onMouseDown: Ii.default.func,
  /**
   * `scale`, if set, applies scaling while dragging an element
   */
  scale: Ii.default.number,
  /**
   * These properties should be defined on the child, not here.
   */
  className: Mw.dontSetMe,
  style: Mw.dontSetMe,
  transform: Mw.dontSetMe
});
ci(u1, "defaultProps", {
  allowAnyClick: false,
  // by default only accept left click
  disabled: false,
  enableUserSelectHack: true,
  onStart: function() {
  },
  onDrag: function() {
  },
  onStop: function() {
  },
  onMouseDown: function() {
  },
  scale: 1
});
(function(e12) {
  function t(w, R) {
    if (!(w instanceof R))
      throw new TypeError("Cannot call a class as a function");
  }
  function r(w, R) {
    for (var F = 0; F < R.length; F++) {
      var $ = R[F];
      $.enumerable = $.enumerable || false, $.configurable = true, "value" in $ && ($.writable = true), Object.defineProperty(w, i($.key), $);
    }
  }
  function n(w, R, F) {
    return R && r(w.prototype, R), F && r(w, F), Object.defineProperty(w, "prototype", { writable: false }), w;
  }
  function i(w) {
    var R = o(w, "string");
    return typeof R == "symbol" ? R : String(R);
  }
  function o(w, R) {
    if (typeof w != "object" || w === null)
      return w;
    var F = w[Symbol.toPrimitive];
    if (F !== void 0) {
      var $ = F.call(w, R || "default");
      if (typeof $ != "object")
        return $;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return (R === "string" ? String : Number)(w);
  }
  function a(w, R) {
    if (typeof R != "function" && R !== null)
      throw new TypeError("Super expression must either be null or a function");
    w.prototype = Object.create(R && R.prototype, { constructor: { value: w, writable: true, configurable: true } }), Object.defineProperty(w, "prototype", { writable: false }), R && s(w, R);
  }
  function s(w, R) {
    return s = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function($, K) {
      return $.__proto__ = K, $;
    }, s(w, R);
  }
  function l(w) {
    var R = f();
    return function() {
      var $ = h(w), K;
      if (R) {
        var se = h(this).constructor;
        K = Reflect.construct($, arguments, se);
      } else
        K = $.apply(this, arguments);
      return u(this, K);
    };
  }
  function u(w, R) {
    if (R && (typeof R == "object" || typeof R == "function"))
      return R;
    if (R !== void 0)
      throw new TypeError("Derived constructors may only return object or undefined");
    return c(w);
  }
  function c(w) {
    if (w === void 0)
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return w;
  }
  function f() {
    if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
      return false;
    if (typeof Proxy == "function")
      return true;
    try {
      return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      })), true;
    } catch {
      return false;
    }
  }
  function h(w) {
    return h = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(F) {
      return F.__proto__ || Object.getPrototypeOf(F);
    }, h(w);
  }
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), Object.defineProperty(e12, "DraggableCore", {
    enumerable: true,
    get: function() {
      return b.default;
    }
  }), e12.default = void 0;
  var d = A(import_react.default), p = E(Vs), m = E(import_react_dom.default), g = E(vue), v = Kr, _ = Ka, y = qa, b = E(l1), T = E(c1);
  function E(w) {
    return w && w.__esModule ? w : {
      default: w
    };
  }
  function P(w) {
    if (typeof WeakMap != "function")
      return null;
    var R = /* @__PURE__ */ new WeakMap(), F = /* @__PURE__ */ new WeakMap();
    return (P = function($) {
      return $ ? F : R;
    })(w);
  }
  function A(w, R) {
    if (!R && w && w.__esModule)
      return w;
    if (w === null || typeof w != "object" && typeof w != "function")
      return {
        default: w
      };
    var F = P(R);
    if (F && F.has(w))
      return F.get(w);
    var $ = {}, K = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for (var se in w)
      if (se !== "default" && Object.prototype.hasOwnProperty.call(w, se)) {
        var J = K ? Object.getOwnPropertyDescriptor(w, se) : null;
        J && (J.get || J.set) ? Object.defineProperty($, se, J) : $[se] = w[se];
      }
    return $.default = w, F && F.set(w, $), $;
  }
  function I() {
    return I = Object.assign ? Object.assign.bind() : function(w) {
      for (var R = 1; R < arguments.length; R++) {
        var F = arguments[R];
        for (var $ in F)
          Object.prototype.hasOwnProperty.call(F, $) && (w[$] = F[$]);
      }
      return w;
    }, I.apply(this, arguments);
  }
  function x(w, R, F) {
    return R = S(R), R in w ? Object.defineProperty(w, R, {
      value: F,
      enumerable: true,
      configurable: true,
      writable: true
    }) : w[R] = F, w;
  }
  function S(w) {
    var R = N(w, "string");
    return typeof R == "symbol" ? R : String(R);
  }
  function N(w, R) {
    if (typeof w != "object" || w === null)
      return w;
    var F = w[Symbol.toPrimitive];
    if (F !== void 0) {
      var $ = F.call(w, R || "default");
      if (typeof $ != "object")
        return $;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return (R === "string" ? String : Number)(w);
  }
  let B = function(w) {
    a(F, w);
    var R = l(F);
    function F($) {
      var K;
      return t(this, F), K = R.call(this, $), x(c(K), "onDragStart", (se, J) => {
        if ((0, T.default)("Draggable: onDragStart: %j", J), K.props.onStart(se, (0, _.createDraggableData)(c(K), J)) === false)
          return false;
        K.setState({
          dragging: true,
          dragged: true
        });
      }), x(c(K), "onDrag", (se, J) => {
        if (!K.state.dragging)
          return false;
        (0, T.default)("Draggable: onDrag: %j", J);
        const me = (0, _.createDraggableData)(c(K), J), ae = {
          x: me.x,
          y: me.y,
          slackX: 0,
          slackY: 0
        };
        if (K.props.bounds) {
          const {
            x: Q,
            y: le
          } = ae;
          ae.x += K.state.slackX, ae.y += K.state.slackY;
          const [Se, Pe] = (0, _.getBoundPosition)(c(K), ae.x, ae.y);
          ae.x = Se, ae.y = Pe, ae.slackX = K.state.slackX + (Q - ae.x), ae.slackY = K.state.slackY + (le - ae.y), me.x = ae.x, me.y = ae.y, me.deltaX = ae.x - K.state.x, me.deltaY = ae.y - K.state.y;
        }
        if (K.props.onDrag(se, me) === false)
          return false;
        K.setState(ae);
      }), x(c(K), "onDragStop", (se, J) => {
        if (!K.state.dragging || K.props.onStop(se, (0, _.createDraggableData)(c(K), J)) === false)
          return false;
        (0, T.default)("Draggable: onDragStop: %j", J);
        const ae = {
          dragging: false,
          slackX: 0,
          slackY: 0
        };
        if (!!K.props.position) {
          const {
            x: Q,
            y: le
          } = K.props.position;
          ae.x = Q, ae.y = le;
        }
        K.setState(ae);
      }), K.state = {
        // Whether or not we are currently dragging.
        dragging: false,
        // Whether or not we have been dragged before.
        dragged: false,
        // Current transform x and y.
        x: $.position ? $.position.x : $.defaultPosition.x,
        y: $.position ? $.position.y : $.defaultPosition.y,
        prevPropsPosition: {
          ...$.position
        },
        // Used for compensating for out-of-bounds drags
        slackX: 0,
        slackY: 0,
        // Can only determine if SVG after mounting
        isElementSVG: false
      }, $.position && !($.onDrag || $.onStop) && console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."), K;
    }
    return n(F, [{
      key: "componentDidMount",
      value: function() {
        typeof window.SVGElement < "u" && this.findDOMNode() instanceof window.SVGElement && this.setState({
          isElementSVG: true
        });
      }
    }, {
      key: "componentWillUnmount",
      value: function() {
        this.setState({
          dragging: false
        });
      }
      // React Strict Mode compatibility: if `nodeRef` is passed, we will use it instead of trying to find
      // the underlying DOM node ourselves. See the README for more information.
    }, {
      key: "findDOMNode",
      value: function() {
        var K, se;
        return (K = (se = this.props) === null || se === void 0 || (se = se.nodeRef) === null || se === void 0 ? void 0 : se.current) !== null && K !== void 0 ? K : m.default.findDOMNode(this);
      }
    }, {
      key: "render",
      value: function() {
        const {
          axis: K,
          bounds: se,
          children: J,
          defaultPosition: me,
          defaultClassName: ae,
          defaultClassNameDragging: Y,
          defaultClassNameDragged: Q,
          position: le,
          positionOffset: Se,
          scale: Pe,
          ...Re
        } = this.props;
        let we = {}, Ne = null;
        const Ie = !!!le || this.state.dragging, Ge = le || me, je = {
          // Set left if horizontal drag is enabled
          x: (0, _.canDragX)(this) && Ie ? this.state.x : Ge.x,
          // Set top if vertical drag is enabled
          y: (0, _.canDragY)(this) && Ie ? this.state.y : Ge.y
        };
        this.state.isElementSVG ? Ne = (0, v.createSVGTransform)(je, Se) : we = (0, v.createCSSTransform)(je, Se);
        const ot = (0, g.default)(J.props.className || "", ae, {
          [Y]: this.state.dragging,
          [Q]: this.state.dragged
        });
        return d.createElement(b.default, I({}, Re, {
          onStart: this.onDragStart,
          onDrag: this.onDrag,
          onStop: this.onDragStop
        }), d.cloneElement(d.Children.only(J), {
          className: ot,
          style: {
            ...J.props.style,
            ...we
          },
          transform: Ne
        }));
      }
    }], [{
      key: "getDerivedStateFromProps",
      value: (
        // React 16.3+
        // Arity (props, state)
        function(K, se) {
          let {
            position: J
          } = K, {
            prevPropsPosition: me
          } = se;
          return J && (!me || J.x !== me.x || J.y !== me.y) ? ((0, T.default)("Draggable: getDerivedStateFromProps %j", {
            position: J,
            prevPropsPosition: me
          }), {
            x: J.x,
            y: J.y,
            prevPropsPosition: {
              ...J
            }
          }) : null;
        }
      )
    }]), F;
  }(
    d.Component
    /*:: <DraggableProps, DraggableState>*/
  );
  e12.default = B, x(B, "displayName", "Draggable"), x(B, "propTypes", {
    // Accepts all props <DraggableCore> accepts.
    ...b.default.propTypes,
    /**
     * `axis` determines which axis the draggable can move.
     *
     *  Note that all callbacks will still return data as normal. This only
     *  controls flushing to the DOM.
     *
     * 'both' allows movement horizontally and vertically.
     * 'x' limits movement to horizontal axis.
     * 'y' limits movement to vertical axis.
     * 'none' limits all movement.
     *
     * Defaults to 'both'.
     */
    axis: p.default.oneOf(["both", "x", "y", "none"]),
    /**
     * `bounds` determines the range of movement available to the element.
     * Available values are:
     *
     * 'parent' restricts movement within the Draggable's parent node.
     *
     * Alternatively, pass an object with the following properties, all of which are optional:
     *
     * {left: LEFT_BOUND, right: RIGHT_BOUND, bottom: BOTTOM_BOUND, top: TOP_BOUND}
     *
     * All values are in px.
     *
     * Example:
     *
     * ```jsx
     *   let App = React.createClass({
     *       render: function () {
     *         return (
     *            <Draggable bounds={{right: 300, bottom: 300}}>
     *              <div>Content</div>
     *           </Draggable>
     *         );
     *       }
     *   });
     * ```
     */
    bounds: p.default.oneOfType([p.default.shape({
      left: p.default.number,
      right: p.default.number,
      top: p.default.number,
      bottom: p.default.number
    }), p.default.string, p.default.oneOf([false])]),
    defaultClassName: p.default.string,
    defaultClassNameDragging: p.default.string,
    defaultClassNameDragged: p.default.string,
    /**
     * `defaultPosition` specifies the x and y that the dragged item should start at
     *
     * Example:
     *
     * ```jsx
     *      let App = React.createClass({
     *          render: function () {
     *              return (
     *                  <Draggable defaultPosition={{x: 25, y: 25}}>
     *                      <div>I start with transformX: 25px and transformY: 25px;</div>
     *                  </Draggable>
     *              );
     *          }
     *      });
     * ```
     */
    defaultPosition: p.default.shape({
      x: p.default.number,
      y: p.default.number
    }),
    positionOffset: p.default.shape({
      x: p.default.oneOfType([p.default.number, p.default.string]),
      y: p.default.oneOfType([p.default.number, p.default.string])
    }),
    /**
     * `position`, if present, defines the current position of the element.
     *
     *  This is similar to how form elements in React work - if no `position` is supplied, the component
     *  is uncontrolled.
     *
     * Example:
     *
     * ```jsx
     *      let App = React.createClass({
     *          render: function () {
     *              return (
     *                  <Draggable position={{x: 25, y: 25}}>
     *                      <div>I start with transformX: 25px and transformY: 25px;</div>
     *                  </Draggable>
     *              );
     *          }
     *      });
     * ```
     */
    position: p.default.shape({
      x: p.default.number,
      y: p.default.number
    }),
    /**
     * These properties should be defined on the child, not here.
     */
    className: y.dontSetMe,
    style: y.dontSetMe,
    transform: y.dontSetMe
  }), x(B, "defaultProps", {
    ...b.default.defaultProps,
    axis: "both",
    bounds: false,
    defaultClassName: "react-draggable",
    defaultClassNameDragging: "react-draggable-dragging",
    defaultClassNameDragged: "react-draggable-dragged",
    defaultPosition: {
      x: 0,
      y: 0
    },
    scale: 1
  });
})(S7);
var {
  default: D7,
  DraggableCore: she
} = S7;
s1.exports = D7;
s1.exports.default = D7;
s1.exports.DraggableCore = she;
var lhe = s1.exports;
var yR = {};
yR.__esModule = true;
yR.cloneElement = fhe;
var che = uhe(import_react.default);
function uhe(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function ZB(e12, t) {
  var r = Object.keys(e12);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e12);
    t && (n = n.filter(function(i) {
      return Object.getOwnPropertyDescriptor(e12, i).enumerable;
    })), r.push.apply(r, n);
  }
  return r;
}
function QB(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t] != null ? arguments[t] : {};
    t % 2 ? ZB(Object(r), true).forEach(function(n) {
      hhe(e12, n, r[n]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e12, Object.getOwnPropertyDescriptors(r)) : ZB(Object(r)).forEach(function(n) {
      Object.defineProperty(e12, n, Object.getOwnPropertyDescriptor(r, n));
    });
  }
  return e12;
}
function hhe(e12, t, r) {
  return t in e12 ? Object.defineProperty(e12, t, {
    value: r,
    enumerable: true,
    configurable: true,
    writable: true
  }) : e12[t] = r, e12;
}
function fhe(e12, t) {
  return t.style && e12.props.style && (t.style = QB(QB({}, e12.props.style), t.style)), t.className && e12.props.className && (t.className = e12.props.className + " " + t.className), che.default.cloneElement(e12, t);
}
var zv = {};
zv.__esModule = true;
zv.resizableProps = void 0;
var Vt = dhe(Vs);
function dhe(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
var phe = {
  /*
  * Restricts resizing to a particular axis (default: 'both')
  * 'both' - allows resizing by width or height
  * 'x' - only allows the width to be changed
  * 'y' - only allows the height to be changed
  * 'none' - disables resizing altogether
  * */
  axis: Vt.default.oneOf(["both", "x", "y", "none"]),
  className: Vt.default.string,
  /*
  * Require that one and only one child be present.
  * */
  children: Vt.default.element.isRequired,
  /*
  * These will be passed wholesale to react-draggable's DraggableCore
  * */
  draggableOpts: Vt.default.shape({
    allowAnyClick: Vt.default.bool,
    cancel: Vt.default.string,
    children: Vt.default.node,
    disabled: Vt.default.bool,
    enableUserSelectHack: Vt.default.bool,
    offsetParent: Vt.default.node,
    grid: Vt.default.arrayOf(Vt.default.number),
    handle: Vt.default.string,
    nodeRef: Vt.default.object,
    onStart: Vt.default.func,
    onDrag: Vt.default.func,
    onStop: Vt.default.func,
    onMouseDown: Vt.default.func,
    scale: Vt.default.number
  }),
  /*
  * Initial height
  * */
  height: Vt.default.number.isRequired,
  /*
  * Customize cursor resize handle
  * */
  handle: Vt.default.oneOfType([Vt.default.node, Vt.default.func]),
  /*
  * If you change this, be sure to update your css
  * */
  handleSize: Vt.default.arrayOf(Vt.default.number),
  lockAspectRatio: Vt.default.bool,
  /*
  * Max X & Y measure
  * */
  maxConstraints: Vt.default.arrayOf(Vt.default.number),
  /*
  * Min X & Y measure
  * */
  minConstraints: Vt.default.arrayOf(Vt.default.number),
  /*
  * Called on stop resize event
  * */
  onResizeStop: Vt.default.func,
  /*
  * Called on start resize event
  * */
  onResizeStart: Vt.default.func,
  /*
  * Called on resize event
  * */
  onResize: Vt.default.func,
  /*
  * Defines which resize handles should be rendered (default: 'se')
  * 's' - South handle (bottom-center)
  * 'w' - West handle (left-center)
  * 'e' - East handle (right-center)
  * 'n' - North handle (top-center)
  * 'sw' - Southwest handle (bottom-left)
  * 'nw' - Northwest handle (top-left)
  * 'se' - Southeast handle (bottom-right)
  * 'ne' - Northeast handle (top-center)
  * */
  resizeHandles: Vt.default.arrayOf(Vt.default.oneOf(["s", "w", "e", "n", "sw", "nw", "se", "ne"])),
  /*
  * If `transform: scale(n)` is set on the parent, this should be set to `n`.
  * */
  transformScale: Vt.default.number,
  /*
   * Initial width
   */
  width: Vt.default.number.isRequired
};
zv.resizableProps = phe;
Gv.__esModule = true;
Gv.default = void 0;
var Lw = yhe(import_react.default);
var mhe = lhe;
var ghe = yR;
var vhe = zv;
function yhe(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function uP() {
  return uP = Object.assign || function(e12) {
    for (var t = 1; t < arguments.length; t++) {
      var r = arguments[t];
      for (var n in r)
        Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
    }
    return e12;
  }, uP.apply(this, arguments);
}
function JB(e12, t) {
  var r = Object.keys(e12);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e12);
    t && (n = n.filter(function(i) {
      return Object.getOwnPropertyDescriptor(e12, i).enumerable;
    })), r.push.apply(r, n);
  }
  return r;
}
function eF(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t] != null ? arguments[t] : {};
    t % 2 ? JB(Object(r), true).forEach(function(n) {
      Pf(e12, n, r[n]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e12, Object.getOwnPropertyDescriptors(r)) : JB(Object(r)).forEach(function(n) {
      Object.defineProperty(e12, n, Object.getOwnPropertyDescriptor(r, n));
    });
  }
  return e12;
}
function _he(e12, t) {
  if (e12 == null)
    return {};
  var r = {}, n = Object.keys(e12), i, o;
  for (o = 0; o < n.length; o++)
    i = n[o], !(t.indexOf(i) >= 0) && (r[i] = e12[i]);
  return r;
}
function Bw(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function bhe(e12, t) {
  e12.prototype = Object.create(t.prototype), e12.prototype.constructor = e12, e12.__proto__ = t;
}
function Pf(e12, t, r) {
  return t in e12 ? Object.defineProperty(e12, t, {
    value: r,
    enumerable: true,
    configurable: true,
    writable: true
  }) : e12[t] = r, e12;
}
var _R = function(e12) {
  bhe(t, e12);
  function t() {
    for (var n, i = arguments.length, o = new Array(i), a = 0; a < i; a++)
      o[a] = arguments[a];
    return n = e12.call.apply(e12, [this].concat(o)) || this, Pf(Bw(n), "state", void 0), Pf(Bw(n), "lastHandleRect", null), Pf(Bw(n), "slack", null), n;
  }
  var r = t.prototype;
  return r.componentWillUnmount = function() {
    this.resetData();
  }, r.lockAspectRatio = function(i, o, a) {
    return o = i / a, i = o * a, [i, o];
  }, r.resetData = function() {
    this.lastHandleRect = this.slack = null;
  }, r.runConstraints = function(i, o) {
    var a = [this.props.minConstraints, this.props.maxConstraints], s = a[0], l = a[1];
    if (!s && !l)
      return [i, o];
    if (this.props.lockAspectRatio) {
      var u = o === this.props.height;
      if (u) {
        var c = this.props.width / this.props.height;
        o = i / c, i = o * c;
      } else {
        var f = this.props.height / this.props.width;
        i = o / f, o = i * f;
      }
    }
    var h = i, d = o, p = this.slack || [0, 0], m = p[0], g = p[1];
    return i += m, o += g, s && (i = Math.max(s[0], i), o = Math.max(s[1], o)), l && (i = Math.min(l[0], i), o = Math.min(l[1], o)), this.slack = [m + (h - i), g + (d - o)], [i, o];
  }, r.resizeHandler = function(i, o) {
    var a = this;
    return function(s, l) {
      var u = l.node, c = l.deltaX, f = l.deltaY;
      i === "onResizeStart" && a.resetData();
      var h = (a.props.axis === "both" || a.props.axis === "x") && o !== "n" && o !== "s", d = (a.props.axis === "both" || a.props.axis === "y") && o !== "e" && o !== "w";
      if (!(!h && !d)) {
        var p = o[0], m = o[o.length - 1], g = u.getBoundingClientRect();
        if (a.lastHandleRect != null) {
          if (m === "w") {
            var v = g.left - a.lastHandleRect.left;
            c += v;
          }
          if (p === "n") {
            var _ = g.top - a.lastHandleRect.top;
            f += _;
          }
        }
        a.lastHandleRect = g, m === "w" && (c = -c), p === "n" && (f = -f);
        var y = a.props.width + (h ? c / a.props.transformScale : 0), b = a.props.height + (d ? f / a.props.transformScale : 0), T = a.runConstraints(y, b);
        y = T[0], b = T[1];
        var E = y !== a.props.width || b !== a.props.height, P = typeof a.props[i] == "function" ? a.props[i] : null, A = i === "onResize" && !E;
        P && !A && (typeof s.persist == "function" && s.persist(), P(s, {
          node: u,
          size: {
            width: y,
            height: b
          },
          handle: o
        })), i === "onResizeStop" && a.resetData();
      }
    };
  }, r.renderResizeHandle = function(i) {
    var o = this.props.handle;
    return o ? typeof o == "function" ? o(i) : o : Lw.default.createElement("span", {
      className: "react-resizable-handle react-resizable-handle-" + i
    });
  }, r.render = function() {
    var i = this, o = this.props, a = o.children, s = o.className, l = o.draggableOpts;
    o.width, o.height, o.handle, o.handleSize, o.lockAspectRatio, o.axis, o.minConstraints, o.maxConstraints, o.onResize, o.onResizeStop, o.onResizeStart;
    var u = o.resizeHandles;
    o.transformScale;
    var c = _he(o, ["children", "className", "draggableOpts", "width", "height", "handle", "handleSize", "lockAspectRatio", "axis", "minConstraints", "maxConstraints", "onResize", "onResizeStop", "onResizeStart", "resizeHandles", "transformScale"]);
    return (0, ghe.cloneElement)(a, eF(eF({}, c), {}, {
      className: (s ? s + " " : "") + "react-resizable",
      children: [].concat(a.props.children, u.map(function(f) {
        return Lw.default.createElement(mhe.DraggableCore, uP({}, l, {
          key: "resizableHandle-" + f,
          onStop: i.resizeHandler("onResizeStop", f),
          onStart: i.resizeHandler("onResizeStart", f),
          onDrag: i.resizeHandler("onResize", f)
        }), i.renderResizeHandle(f));
      }))
    }));
  }, t;
}(Lw.default.Component);
Gv.default = _R;
Pf(_R, "propTypes", vhe.resizableProps);
Pf(_R, "defaultProps", {
  handleSize: [20, 20],
  lockAspectRatio: false,
  axis: "both",
  minConstraints: [20, 20],
  maxConstraints: [1 / 0, 1 / 0],
  resizeHandles: ["se"],
  transformScale: 1
});
var h1 = {};
h1.__esModule = true;
h1.default = void 0;
var Fw = whe(import_react.default);
var The = R7(Vs);
var Ehe = R7(Gv);
var She = zv;
function R7(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function N7() {
  if (typeof WeakMap != "function")
    return null;
  var e12 = /* @__PURE__ */ new WeakMap();
  return N7 = function() {
    return e12;
  }, e12;
}
function whe(e12) {
  if (e12 && e12.__esModule)
    return e12;
  if (e12 === null || typeof e12 != "object" && typeof e12 != "function")
    return {
      default: e12
    };
  var t = N7();
  if (t && t.has(e12))
    return t.get(e12);
  var r = {}, n = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var i in e12)
    if (Object.prototype.hasOwnProperty.call(e12, i)) {
      var o = n ? Object.getOwnPropertyDescriptor(e12, i) : null;
      o && (o.get || o.set) ? Object.defineProperty(r, i, o) : r[i] = e12[i];
    }
  return r.default = e12, t && t.set(e12, r), r;
}
function hP() {
  return hP = Object.assign || function(e12) {
    for (var t = 1; t < arguments.length; t++) {
      var r = arguments[t];
      for (var n in r)
        Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
    }
    return e12;
  }, hP.apply(this, arguments);
}
function tF(e12, t) {
  var r = Object.keys(e12);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e12);
    t && (n = n.filter(function(i) {
      return Object.getOwnPropertyDescriptor(e12, i).enumerable;
    })), r.push.apply(r, n);
  }
  return r;
}
function E0(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t] != null ? arguments[t] : {};
    t % 2 ? tF(Object(r), true).forEach(function(n) {
      S0(e12, n, r[n]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e12, Object.getOwnPropertyDescriptors(r)) : tF(Object(r)).forEach(function(n) {
      Object.defineProperty(e12, n, Object.getOwnPropertyDescriptor(r, n));
    });
  }
  return e12;
}
function Ahe(e12, t) {
  if (e12 == null)
    return {};
  var r = {}, n = Object.keys(e12), i, o;
  for (o = 0; o < n.length; o++)
    i = n[o], !(t.indexOf(i) >= 0) && (r[i] = e12[i]);
  return r;
}
function rF(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function Ohe(e12, t) {
  e12.prototype = Object.create(t.prototype), e12.prototype.constructor = e12, e12.__proto__ = t;
}
function S0(e12, t, r) {
  return t in e12 ? Object.defineProperty(e12, t, {
    value: r,
    enumerable: true,
    configurable: true,
    writable: true
  }) : e12[t] = r, e12;
}
var M7 = function(e12) {
  Ohe(t, e12);
  function t() {
    for (var n, i = arguments.length, o = new Array(i), a = 0; a < i; a++)
      o[a] = arguments[a];
    return n = e12.call.apply(e12, [this].concat(o)) || this, S0(rF(n), "state", {
      width: n.props.width,
      height: n.props.height,
      propsWidth: n.props.width,
      propsHeight: n.props.height
    }), S0(rF(n), "onResize", function(s, l) {
      var u = l.size;
      n.props.onResize ? (s.persist && s.persist(), n.setState(u, function() {
        return n.props.onResize && n.props.onResize(s, l);
      })) : n.setState(u);
    }), n;
  }
  t.getDerivedStateFromProps = function(i, o) {
    return o.propsWidth !== i.width || o.propsHeight !== i.height ? {
      width: i.width,
      height: i.height,
      propsWidth: i.width,
      propsHeight: i.height
    } : null;
  };
  var r = t.prototype;
  return r.render = function() {
    var i = this.props, o = i.handle, a = i.handleSize;
    i.onResize;
    var s = i.onResizeStart, l = i.onResizeStop, u = i.draggableOpts, c = i.minConstraints, f = i.maxConstraints, h = i.lockAspectRatio, d = i.axis;
    i.width, i.height;
    var p = i.resizeHandles, m = i.style, g = i.transformScale, v = Ahe(i, ["handle", "handleSize", "onResize", "onResizeStart", "onResizeStop", "draggableOpts", "minConstraints", "maxConstraints", "lockAspectRatio", "axis", "width", "height", "resizeHandles", "style", "transformScale"]);
    return Fw.createElement(Ehe.default, {
      axis: d,
      draggableOpts: u,
      handle: o,
      handleSize: a,
      height: this.state.height,
      lockAspectRatio: h,
      maxConstraints: f,
      minConstraints: c,
      onResizeStart: s,
      onResize: this.onResize,
      onResizeStop: l,
      resizeHandles: p,
      transformScale: g,
      width: this.state.width
    }, Fw.createElement("div", hP({}, v, {
      style: E0(E0({}, m), {}, {
        width: this.state.width + "px",
        height: this.state.height + "px"
      })
    })));
  }, t;
}(Fw.Component);
h1.default = M7;
S0(M7, "propTypes", E0(E0({}, She.resizableProps), {}, {
  children: The.default.element
}));
a1.exports = function() {
  throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable");
};
a1.exports.Resizable = Gv.default;
a1.exports.ResizableBox = h1.default;
var Ihe = a1.exports;
pR.__esModule = true;
var Phe = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var Che = import_react.default;
var Xp = bR(Che);
var xhe = Vs;
var kr = bR(xhe);
var khe = mue;
var Dhe = Ihe;
var a_ = dr;
var Rhe = d7;
var Nhe = bR(Rhe);
function bR(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function Mhe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function nF(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function Lhe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var TR = function(e12) {
  Lhe(t, e12);
  function t() {
    var r, n, i;
    Mhe(this, t);
    for (var o = arguments.length, a = Array(o), s = 0; s < o; s++)
      a[s] = arguments[s];
    return i = (r = (n = nF(this, e12.call.apply(e12, [this].concat(a))), n), n.state = {
      resizing: null,
      dragging: null,
      className: ""
    }, r), nF(n, i);
  }
  return t.prototype.calcColWidth = function() {
    var n = this.props, i = n.margin, o = n.containerPadding, a = n.containerWidth, s = n.cols;
    return (a - i[0] * (s - 1) - o[0] * 2) / s;
  }, t.prototype.calcPosition = function(n, i, o, a, s) {
    var l = this.props, u = l.margin, c = l.containerPadding, f = l.rowHeight, h = this.calcColWidth(), d = {
      left: Math.round((h + u[0]) * n + c[0]),
      top: Math.round((f + u[1]) * i + c[1]),
      // 0 * Infinity === NaN, which causes problems with resize constraints;
      // Fix this if it occurs.
      // Note we do it here rather than later because Math.round(Infinity) causes deopt
      width: o === 1 / 0 ? o : Math.round(h * o + Math.max(0, o - 1) * u[0]),
      height: a === 1 / 0 ? a : Math.round(f * a + Math.max(0, a - 1) * u[1])
    };
    return s && s.resizing && (d.width = Math.round(s.resizing.width), d.height = Math.round(s.resizing.height)), s && s.dragging && (d.top = Math.round(s.dragging.top), d.left = Math.round(s.dragging.left)), d;
  }, t.prototype.calcXY = function(n, i) {
    var o = this.props, a = o.margin, s = o.cols, l = o.rowHeight, u = o.w, c = o.h, f = o.maxRows, h = this.calcColWidth(), d = Math.round((i - a[0]) / (h + a[0])), p = Math.round((n - a[1]) / (l + a[1]));
    return d = Math.max(Math.min(d, s - u), 0), p = Math.max(Math.min(p, f - c), 0), {
      x: d,
      y: p
    };
  }, t.prototype.calcWH = function(n) {
    var i = n.height, o = n.width, a = this.props, s = a.margin, l = a.maxRows, u = a.cols, c = a.rowHeight, f = a.x, h = a.y, d = this.calcColWidth(), p = Math.round((o + s[0]) / (d + s[0])), m = Math.round((i + s[1]) / (c + s[1]));
    return p = Math.max(Math.min(p, u - f), 0), m = Math.max(Math.min(m, l - h), 0), {
      w: p,
      h: m
    };
  }, t.prototype.createStyle = function(n) {
    var i = this.props, o = i.usePercentages, a = i.containerWidth, s = i.useCSSTransforms, l = void 0;
    return s ? l = (0, a_.setTransform)(n) : (l = (0, a_.setTopLeft)(n), o && (l.left = (0, a_.perc)(n.left / a), l.width = (0, a_.perc)(n.width / a))), l;
  }, t.prototype.mixinDraggable = function(n) {
    return Xp.default.createElement(khe.DraggableCore, {
      onStart: this.onDragHandler("onDragStart"),
      onDrag: this.onDragHandler("onDrag"),
      onStop: this.onDragHandler("onDragStop"),
      handle: this.props.handle,
      cancel: ".react-resizable-handle" + (this.props.cancel ? "," + this.props.cancel : "")
    }, n);
  }, t.prototype.mixinResizable = function(n, i) {
    var o = this.props, a = o.cols, s = o.x, l = o.minW, u = o.minH, c = o.maxW, f = o.maxH, h = this.calcPosition(0, 0, a - s, 0).width, d = this.calcPosition(0, 0, l, u), p = this.calcPosition(0, 0, c, f), m = [d.width, d.height], g = [Math.min(p.width, h), Math.min(p.height, 1 / 0)];
    return Xp.default.createElement(Dhe.Resizable, {
      width: i.width,
      height: i.height,
      minConstraints: m,
      maxConstraints: g,
      onResizeStop: this.onResizeHandler("onResizeStop"),
      onResizeStart: this.onResizeHandler("onResizeStart"),
      onResize: this.onResizeHandler("onResize")
    }, n);
  }, t.prototype.onDragHandler = function(n) {
    var i = this;
    return function(o, a) {
      var s = a.node, l = a.deltaX, u = a.deltaY, c = i.props[n];
      if (c) {
        var f = {
          top: 0,
          left: 0
        };
        switch (n) {
          case "onDragStart": {
            var h = s.offsetParent;
            if (!h)
              return;
            var d = h.getBoundingClientRect(), p = s.getBoundingClientRect();
            f.left = p.left - d.left + h.scrollLeft, f.top = p.top - d.top + h.scrollTop, i.setState({
              dragging: f
            });
            break;
          }
          case "onDrag":
            if (!i.state.dragging)
              throw new Error("onDrag called before onDragStart.");
            f.left = i.state.dragging.left + l, f.top = i.state.dragging.top + u, i.setState({
              dragging: f
            });
            break;
          case "onDragStop":
            if (!i.state.dragging)
              throw new Error("onDragEnd called before onDragStart.");
            f.left = i.state.dragging.left, f.top = i.state.dragging.top, i.setState({
              dragging: null
            });
            break;
          default:
            throw new Error("onDragHandler called with unrecognized handlerName: " + n);
        }
        var m = i.calcXY(f.top, f.left), g = m.x, v = m.y;
        return c.call(i, i.props.i, g, v, {
          e: o,
          node: s,
          newPosition: f
        });
      }
    };
  }, t.prototype.onResizeHandler = function(n) {
    var i = this;
    return function(o, a) {
      var s = a.node, l = a.size, u = i.props[n];
      if (u) {
        var c = i.props, f = c.cols, h = c.x, d = c.i, p = c.maxW, m = c.minW, g = c.maxH, v = c.minH, _ = i.calcWH(l), y = _.w, b = _.h;
        y = Math.min(y, f - h), y = Math.max(y, 1), y = Math.max(Math.min(y, p), m), b = Math.max(Math.min(b, g), v), i.setState({
          resizing: n === "onResizeStop" ? null : l
        }), u.call(i, d, y, b, {
          e: o,
          node: s,
          size: l
        });
      }
    };
  }, t.prototype.render = function() {
    var n = this.props, i = n.x, o = n.y, a = n.w, s = n.h, l = n.isDraggable, u = n.isResizable, c = n.useCSSTransforms, f = this.calcPosition(i, o, a, s, this.state), h = Xp.default.Children.only(this.props.children), d = Xp.default.cloneElement(h, {
      className: (0, Nhe.default)("react-grid-item", h.props.className, this.props.className, {
        static: this.props.static,
        resizing: !!this.state.resizing,
        "react-draggable": l,
        "react-draggable-dragging": !!this.state.dragging,
        cssTransforms: c
      }),
      // We can set the width and height on the child, but unfortunately we can't set the position.
      style: Phe({}, this.props.style, h.props.style, this.createStyle(f))
    });
    return u && (d = this.mixinResizable(d, f)), l && (d = this.mixinDraggable(d)), d;
  }, t;
}(Xp.default.Component);
TR.propTypes = {
  // Children must be only a single element
  children: kr.default.element,
  // General grid attributes
  cols: kr.default.number.isRequired,
  containerWidth: kr.default.number.isRequired,
  rowHeight: kr.default.number.isRequired,
  margin: kr.default.array.isRequired,
  maxRows: kr.default.number.isRequired,
  containerPadding: kr.default.array.isRequired,
  // These are all in grid units
  x: kr.default.number.isRequired,
  y: kr.default.number.isRequired,
  w: kr.default.number.isRequired,
  h: kr.default.number.isRequired,
  // All optional
  minW: function(t, r) {
    var n = t[r];
    if (typeof n != "number")
      return new Error("minWidth not Number");
    if (n > t.w || n > t.maxW)
      return new Error("minWidth larger than item width/maxWidth");
  },
  maxW: function(t, r) {
    var n = t[r];
    if (typeof n != "number")
      return new Error("maxWidth not Number");
    if (n < t.w || n < t.minW)
      return new Error("maxWidth smaller than item width/minWidth");
  },
  minH: function(t, r) {
    var n = t[r];
    if (typeof n != "number")
      return new Error("minHeight not Number");
    if (n > t.h || n > t.maxH)
      return new Error("minHeight larger than item height/maxHeight");
  },
  maxH: function(t, r) {
    var n = t[r];
    if (typeof n != "number")
      return new Error("maxHeight not Number");
    if (n < t.h || n < t.minH)
      return new Error("maxHeight smaller than item height/minHeight");
  },
  // ID is nice to have for callbacks
  i: kr.default.string.isRequired,
  // Functions
  onDragStop: kr.default.func,
  onDragStart: kr.default.func,
  onDrag: kr.default.func,
  onResizeStop: kr.default.func,
  onResizeStart: kr.default.func,
  onResize: kr.default.func,
  // Flags
  isDraggable: kr.default.bool.isRequired,
  isResizable: kr.default.bool.isRequired,
  static: kr.default.bool,
  // Use CSS transforms instead of top/left
  useCSSTransforms: kr.default.bool.isRequired,
  // Others
  className: kr.default.string,
  // Selector for draggable handle
  handle: kr.default.string,
  // Selector for draggable cancel (see react-draggable)
  cancel: kr.default.string
};
TR.defaultProps = {
  className: "",
  cancel: "",
  handle: "",
  minH: 1,
  minW: 1,
  maxH: 1 / 0,
  maxW: 1 / 0
};
pR.default = TR;
n1.__esModule = true;
var iF = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var Bhe = import_react.default;
var Lc = Vv(Bhe);
var Fhe = Vs;
var Dr = Vv(Fhe);
var $he = i1;
var oF = Vv($he);
var Hhe = d7;
var Uhe = Vv(Hhe);
var gr = dr;
var jhe = pR;
var aF = Vv(jhe);
function Vv(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function Ghe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function zhe(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function Vhe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var f1 = function(e12) {
  Vhe(t, e12);
  function t(r, n) {
    Ghe(this, t);
    var i = zhe(this, e12.call(this, r, n));
    return Xhe.call(i), (0, gr.autoBindHandlers)(i, ["onDragStart", "onDrag", "onDragStop", "onResizeStart", "onResize", "onResizeStop"]), i;
  }
  return t.prototype.componentDidMount = function() {
    this.setState({
      mounted: true
    }), this.onLayoutMaybeChanged(this.state.layout, this.props.layout);
  }, t.prototype.componentWillReceiveProps = function(n) {
    var i = void 0;
    if (!(0, oF.default)(n.layout, this.props.layout) || n.compactType !== this.props.compactType ? i = n.layout : (0, gr.childrenEqual)(this.props.children, n.children) || (i = this.state.layout), i) {
      var o = (0, gr.synchronizeLayoutWithChildren)(i, n.children, n.cols, this.compactType(n)), a = this.state.layout;
      this.setState({
        layout: o
      }), this.onLayoutMaybeChanged(o, a);
    }
  }, t.prototype.containerHeight = function() {
    if (this.props.autoSize) {
      var n = (0, gr.bottom)(this.state.layout), i = this.props.containerPadding ? this.props.containerPadding[1] : this.props.margin[1];
      return n * this.props.rowHeight + (n - 1) * this.props.margin[1] + i * 2 + "px";
    }
  }, t.prototype.compactType = function(n) {
    return n || (n = this.props), n.verticalCompact === false ? null : n.compactType;
  }, t.prototype.onDragStart = function(n, i, o, a) {
    var s = a.e, l = a.node, u = this.state.layout, c = (0, gr.getLayoutItem)(u, n);
    if (c)
      return this.setState({
        oldDragItem: (0, gr.cloneLayoutItem)(c),
        oldLayout: this.state.layout
      }), this.props.onDragStart(u, c, c, null, s, l);
  }, t.prototype.onDrag = function(n, i, o, a) {
    var s = a.e, l = a.node, u = this.state.oldDragItem, c = this.state.layout, f = this.props.cols, h = (0, gr.getLayoutItem)(c, n);
    if (h) {
      var d = {
        w: h.w,
        h: h.h,
        x: h.x,
        y: h.y,
        placeholder: true,
        i: n
      }, p = true;
      c = (0, gr.moveElement)(c, h, i, o, p, this.props.preventCollision, this.compactType(), f), this.props.onDrag(c, u, h, d, s, l), this.setState({
        layout: (0, gr.compact)(c, this.compactType(), f),
        activeDrag: d
      });
    }
  }, t.prototype.onDragStop = function(n, i, o, a) {
    var s = a.e, l = a.node, u = this.state.oldDragItem, c = this.state.layout, f = this.props, h = f.cols, d = f.preventCollision, p = (0, gr.getLayoutItem)(c, n);
    if (p) {
      var m = true;
      c = (0, gr.moveElement)(c, p, i, o, m, d, this.compactType(), h), this.props.onDragStop(c, u, p, null, s, l);
      var g = (0, gr.compact)(c, this.compactType(), h), v = this.state.oldLayout;
      this.setState({
        activeDrag: null,
        layout: g,
        oldDragItem: null,
        oldLayout: null
      }), this.onLayoutMaybeChanged(g, v);
    }
  }, t.prototype.onLayoutMaybeChanged = function(n, i) {
    i || (i = this.state.layout), (0, oF.default)(i, n) || this.props.onLayoutChange(n);
  }, t.prototype.onResizeStart = function(n, i, o, a) {
    var s = a.e, l = a.node, u = this.state.layout, c = (0, gr.getLayoutItem)(u, n);
    c && (this.setState({
      oldResizeItem: (0, gr.cloneLayoutItem)(c),
      oldLayout: this.state.layout
    }), this.props.onResizeStart(u, c, c, null, s, l));
  }, t.prototype.onResize = function(n, i, o, a) {
    var s = a.e, l = a.node, u = this.state, c = u.layout, f = u.oldResizeItem, h = this.props, d = h.cols, p = h.preventCollision, m = (0, gr.getLayoutItem)(c, n);
    if (m) {
      var g = void 0;
      if (p) {
        var v = (0, gr.getAllCollisions)(c, iF({}, m, {
          w: i,
          h: o
        })).filter(function(T) {
          return T.i !== m.i;
        });
        if (g = v.length > 0, g) {
          var _ = 1 / 0, y = 1 / 0;
          v.forEach(function(T) {
            T.x > m.x && (_ = Math.min(_, T.x)), T.y > m.y && (y = Math.min(y, T.y));
          }), Number.isFinite(_) && (m.w = _ - m.x), Number.isFinite(y) && (m.h = y - m.y);
        }
      }
      g || (m.w = i, m.h = o);
      var b = {
        w: m.w,
        h: m.h,
        x: m.x,
        y: m.y,
        static: true,
        i: n
      };
      this.props.onResize(c, f, m, b, s, l), this.setState({
        layout: (0, gr.compact)(c, this.compactType(), d),
        activeDrag: b
      });
    }
  }, t.prototype.onResizeStop = function(n, i, o, a) {
    var s = a.e, l = a.node, u = this.state, c = u.layout, f = u.oldResizeItem, h = this.props.cols, d = (0, gr.getLayoutItem)(c, n);
    this.props.onResizeStop(c, f, d, null, s, l);
    var p = (0, gr.compact)(c, this.compactType(), h), m = this.state.oldLayout;
    this.setState({
      activeDrag: null,
      layout: p,
      oldResizeItem: null,
      oldLayout: null
    }), this.onLayoutMaybeChanged(p, m);
  }, t.prototype.placeholder = function() {
    var n = this.state.activeDrag;
    if (!n)
      return null;
    var i = this.props, o = i.width, a = i.cols, s = i.margin, l = i.containerPadding, u = i.rowHeight, c = i.maxRows, f = i.useCSSTransforms;
    return Lc.default.createElement(aF.default, {
      w: n.w,
      h: n.h,
      x: n.x,
      y: n.y,
      i: n.i,
      className: "react-grid-placeholder",
      containerWidth: o,
      cols: a,
      margin: s,
      containerPadding: l || s,
      maxRows: c,
      rowHeight: u,
      isDraggable: false,
      isResizable: false,
      useCSSTransforms: f
    }, Lc.default.createElement("div", null));
  }, t.prototype.processGridItem = function(n) {
    if (!(!n || !n.key)) {
      var i = (0, gr.getLayoutItem)(this.state.layout, String(n.key));
      if (!i)
        return null;
      var o = this.props, a = o.width, s = o.cols, l = o.margin, u = o.containerPadding, c = o.rowHeight, f = o.maxRows, h = o.isDraggable, d = o.isResizable, p = o.useCSSTransforms, m = o.draggableCancel, g = o.draggableHandle, v = this.state.mounted, _ = !!(!i.static && h && (i.isDraggable || i.isDraggable == null)), y = !!(!i.static && d && (i.isResizable || i.isResizable == null));
      return Lc.default.createElement(aF.default, {
        containerWidth: a,
        cols: s,
        margin: l,
        containerPadding: u || l,
        maxRows: f,
        rowHeight: c,
        cancel: m,
        handle: g,
        onDragStop: this.onDragStop,
        onDragStart: this.onDragStart,
        onDrag: this.onDrag,
        onResizeStart: this.onResizeStart,
        onResize: this.onResize,
        onResizeStop: this.onResizeStop,
        isDraggable: _,
        isResizable: y,
        useCSSTransforms: p && v,
        usePercentages: !v,
        w: i.w,
        h: i.h,
        x: i.x,
        y: i.y,
        i: i.i,
        minH: i.minH,
        minW: i.minW,
        maxH: i.maxH,
        maxW: i.maxW,
        static: i.static
      }, n);
    }
  }, t.prototype.render = function() {
    var n = this, i = this.props, o = i.className, a = i.style, s = (0, Uhe.default)("react-grid-layout", o), l = iF({
      height: this.containerHeight()
    }, a);
    return Lc.default.createElement("div", {
      className: s,
      style: l
    }, Lc.default.Children.map(this.props.children, function(u) {
      return n.processGridItem(u);
    }), this.placeholder());
  }, t;
}(Lc.default.Component);
f1.displayName = "ReactGridLayout";
f1.propTypes = {
  //
  // Basic props
  //
  className: Dr.default.string,
  style: Dr.default.object,
  // This can be set explicitly. If it is not set, it will automatically
  // be set to the container width. Note that resizes will *not* cause this to adjust.
  // If you need that behavior, use WidthProvider.
  width: Dr.default.number,
  // If true, the container height swells and contracts to fit contents
  autoSize: Dr.default.bool,
  // # of cols.
  cols: Dr.default.number,
  // A selector that will not be draggable.
  draggableCancel: Dr.default.string,
  // A selector for the draggable handler
  draggableHandle: Dr.default.string,
  // Deprecated
  verticalCompact: function(t) {
    t.verticalCompact;
  },
  // Choose vertical or hotizontal compaction
  compactType: Dr.default.oneOf(["vertical", "horizontal"]),
  // layout is an array of object with the format:
  // {x: Number, y: Number, w: Number, h: Number, i: String}
  layout: function(t) {
    var r = t.layout;
    r !== void 0 && (0, gr.validateLayout)(r, "layout");
  },
  //
  // Grid Dimensions
  //
  // Margin between items [x, y] in px
  margin: Dr.default.arrayOf(Dr.default.number),
  // Padding inside the container [x, y] in px
  containerPadding: Dr.default.arrayOf(Dr.default.number),
  // Rows have a static height, but you can change this based on breakpoints if you like
  rowHeight: Dr.default.number,
  // Default Infinity, but you can specify a max here if you like.
  // Note that this isn't fully fleshed out and won't error if you specify a layout that
  // extends beyond the row capacity. It will, however, not allow users to drag/resize
  // an item past the barrier. They can push items beyond the barrier, though.
  // Intentionally not documented for this reason.
  maxRows: Dr.default.number,
  //
  // Flags
  //
  isDraggable: Dr.default.bool,
  isResizable: Dr.default.bool,
  // If true, grid items won't change position when being dragged over.
  preventCollision: Dr.default.bool,
  // Use CSS transforms instead of top/left
  useCSSTransforms: Dr.default.bool,
  //
  // Callbacks
  //
  // Callback so you can save the layout. Calls after each drag & resize stops.
  onLayoutChange: Dr.default.func,
  // Calls when drag starts. Callback is of the signature (layout, oldItem, newItem, placeholder, e, ?node).
  // All callbacks below have the same signature. 'start' and 'stop' callbacks omit the 'placeholder'.
  onDragStart: Dr.default.func,
  // Calls on each drag movement.
  onDrag: Dr.default.func,
  // Calls when drag is complete.
  onDragStop: Dr.default.func,
  //Calls when resize starts.
  onResizeStart: Dr.default.func,
  // Calls when resize movement happens.
  onResize: Dr.default.func,
  // Calls when resize is complete.
  onResizeStop: Dr.default.func,
  //
  // Other validations
  //
  // Children must not have duplicate keys.
  children: function(t, r) {
    var n = t[r], i = {};
    Lc.default.Children.forEach(n, function(o) {
      if (i[o.key])
        throw new Error('Duplicate child key "' + o.key + '" found! This will cause problems in ReactGridLayout.');
      i[o.key] = true;
    });
  }
};
f1.defaultProps = {
  autoSize: true,
  cols: 12,
  className: "",
  style: {},
  draggableHandle: "",
  draggableCancel: "",
  containerPadding: null,
  rowHeight: 150,
  maxRows: 1 / 0,
  // infinite vertical growth
  layout: [],
  margin: [10, 10],
  isDraggable: true,
  isResizable: true,
  useCSSTransforms: true,
  verticalCompact: true,
  compactType: "vertical",
  preventCollision: false,
  onLayoutChange: gr.noop,
  onDragStart: gr.noop,
  onDrag: gr.noop,
  onDragStop: gr.noop,
  onResizeStart: gr.noop,
  onResize: gr.noop,
  onResizeStop: gr.noop
};
var Xhe = function() {
  this.state = {
    activeDrag: null,
    layout: (0, gr.synchronizeLayoutWithChildren)(
      this.props.layout,
      this.props.children,
      this.props.cols,
      // Legacy support for verticalCompact: false
      this.compactType()
    ),
    mounted: false,
    oldDragItem: null,
    oldLayout: null,
    oldResizeItem: null
  };
};
n1.default = f1;
var ER = {};
var eh = {};
eh.__esModule = true;
eh.getBreakpointFromWidth = Whe;
eh.getColsFromBreakpoint = Yhe;
eh.findOrGenerateResponsiveLayout = qhe;
eh.sortBreakpoints = SR;
var s_ = dr;
function Whe(e12, t) {
  for (var r = SR(e12), n = r[0], i = 1, o = r.length; i < o; i++) {
    var a = r[i];
    t > e12[a] && (n = a);
  }
  return n;
}
function Yhe(e12, t) {
  if (!t[e12])
    throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint " + e12 + " is missing!");
  return t[e12];
}
function qhe(e12, t, r, n, i, o) {
  if (e12[r])
    return (0, s_.cloneLayout)(e12[r]);
  for (var a = e12[n], s = SR(t), l = s.slice(s.indexOf(r)), u = 0, c = l.length; u < c; u++) {
    var f = l[u];
    if (e12[f]) {
      a = e12[f];
      break;
    }
  }
  return a = (0, s_.cloneLayout)(a || []), (0, s_.compact)((0, s_.correctBounds)(a, {
    cols: i
  }), o, i);
}
function SR(e12) {
  var t = Object.keys(e12);
  return t.sort(function(r, n) {
    return e12[r] - e12[n];
  });
}
ER.__esModule = true;
var sF = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var Khe = import_react.default;
var lF = d1(Khe);
var Zhe = Vs;
var Ec = d1(Zhe);
var Qhe = i1;
var $w = d1(Qhe);
var Cf = dr;
var Sc = eh;
var Jhe = n1;
var efe = d1(Jhe);
function d1(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function tfe(e12, t) {
  var r = {};
  for (var n in e12)
    t.indexOf(n) >= 0 || Object.prototype.hasOwnProperty.call(e12, n) && (r[n] = e12[n]);
  return r;
}
function rfe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function cF(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function nfe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var uF = function(t) {
  return Object.prototype.toString.call(t);
};
var wR = function(e12) {
  nfe(t, e12);
  function t() {
    var r, n, i;
    rfe(this, t);
    for (var o = arguments.length, a = Array(o), s = 0; s < o; s++)
      a[s] = arguments[s];
    return i = (r = (n = cF(this, e12.call.apply(e12, [this].concat(a))), n), n.state = n.generateInitialState(), n.onLayoutChange = function(l) {
      var u;
      n.props.onLayoutChange(l, sF({}, n.props.layouts, (u = {}, u[n.state.breakpoint] = l, u)));
    }, r), cF(n, i);
  }
  return t.prototype.generateInitialState = function() {
    var n = this.props, i = n.width, o = n.breakpoints, a = n.layouts, s = n.cols, l = (0, Sc.getBreakpointFromWidth)(o, i), u = (0, Sc.getColsFromBreakpoint)(l, s), c = this.props.verticalCompact === false ? null : this.props.compactType, f = (0, Sc.findOrGenerateResponsiveLayout)(a, o, l, l, u, c);
    return {
      layout: f,
      breakpoint: l,
      cols: u
    };
  }, t.prototype.componentWillReceiveProps = function(n) {
    if (n.width != this.props.width || n.breakpoint !== this.props.breakpoint || !(0, $w.default)(n.breakpoints, this.props.breakpoints) || !(0, $w.default)(n.cols, this.props.cols))
      this.onWidthChange(n);
    else if (!(0, $w.default)(n.layouts, this.props.layouts)) {
      var i = this.state, o = i.breakpoint, a = i.cols, s = (0, Sc.findOrGenerateResponsiveLayout)(n.layouts, n.breakpoints, o, o, a, n.compactType);
      this.setState({
        layout: s
      });
    }
  }, t.prototype.onWidthChange = function(n) {
    var i = n.breakpoints, o = n.cols, a = n.layouts, s = n.compactType, l = n.breakpoint || (0, Sc.getBreakpointFromWidth)(n.breakpoints, n.width), u = this.state.breakpoint;
    if (u !== l || this.props.breakpoints !== i || this.props.cols !== o) {
      u in a || (a[u] = (0, Cf.cloneLayout)(this.state.layout));
      var c = (0, Sc.getColsFromBreakpoint)(l, o), f = (0, Sc.findOrGenerateResponsiveLayout)(a, i, l, u, c, s);
      f = (0, Cf.synchronizeLayoutWithChildren)(f, n.children, c, s), a[l] = f, this.props.onLayoutChange(f, a), this.props.onBreakpointChange(l, c), this.props.onWidthChange(n.width, n.margin, c, n.containerPadding), this.setState({
        breakpoint: l,
        layout: f,
        cols: c
      });
    }
  }, t.prototype.render = function() {
    var n = this.props;
    n.breakpoint, n.breakpoints, n.cols, n.layouts, n.onBreakpointChange, n.onLayoutChange, n.onWidthChange;
    var i = tfe(n, ["breakpoint", "breakpoints", "cols", "layouts", "onBreakpointChange", "onLayoutChange", "onWidthChange"]);
    return lF.default.createElement(efe.default, sF({}, i, {
      onLayoutChange: this.onLayoutChange,
      layout: this.state.layout,
      cols: this.state.cols
    }));
  }, t;
}(lF.default.Component);
wR.propTypes = {
  //
  // Basic props
  //
  // Optional, but if you are managing width yourself you may want to set the breakpoint
  // yourself as well.
  breakpoint: Ec.default.string,
  // {name: pxVal}, e.g. {lg: 1200, md: 996, sm: 768, xs: 480}
  breakpoints: Ec.default.object,
  // # of cols. This is a breakpoint -> cols map
  cols: Ec.default.object,
  // layouts is an object mapping breakpoints to layouts.
  // e.g. {lg: Layout, md: Layout, ...}
  layouts: function(t, r) {
    if (uF(t[r]) !== "[object Object]")
      throw new Error("Layout property must be an object. Received: " + uF(t[r]));
    Object.keys(t[r]).forEach(function(n) {
      if (!(n in t.breakpoints))
        throw new Error("Each key in layouts must align with a key in breakpoints.");
      (0, Cf.validateLayout)(t.layouts[n], "layouts." + n);
    });
  },
  // The width of this component.
  // Required in this propTypes stanza because generateInitialState() will fail without it.
  width: Ec.default.number.isRequired,
  //
  // Callbacks
  //
  // Calls back with breakpoint and new # cols
  onBreakpointChange: Ec.default.func,
  // Callback so you can save the layout.
  // Calls back with (currentLayout, allLayouts). allLayouts are keyed by breakpoint.
  onLayoutChange: Ec.default.func,
  // Calls back with (containerWidth, margin, cols, containerPadding)
  onWidthChange: Ec.default.func
};
wR.defaultProps = {
  breakpoints: {
    lg: 1200,
    md: 996,
    sm: 768,
    xs: 480,
    xxs: 0
  },
  cols: {
    lg: 12,
    md: 10,
    sm: 6,
    xs: 4,
    xxs: 2
  },
  layouts: {},
  onBreakpointChange: Cf.noop,
  onLayoutChange: Cf.noop,
  onWidthChange: Cf.noop
};
ER.default = wR;
var AR = {};
AR.__esModule = true;
var ife = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
AR.default = dfe;
var ofe = import_react.default;
var Hw = OR(ofe);
var afe = Vs;
var sfe = OR(afe);
var lfe = import_react_dom.default;
var cfe = OR(lfe);
function OR(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function ufe(e12, t) {
  var r = {};
  for (var n in e12)
    t.indexOf(n) >= 0 || Object.prototype.hasOwnProperty.call(e12, n) && (r[n] = e12[n]);
  return r;
}
function hfe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function hF(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function ffe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
function dfe(e12) {
  var t, r;
  return r = t = function(n) {
    ffe(i, n);
    function i() {
      var o, a, s;
      hfe(this, i);
      for (var l = arguments.length, u = Array(l), c = 0; c < l; c++)
        u[c] = arguments[c];
      return s = (o = (a = hF(this, n.call.apply(n, [this].concat(u))), a), a.state = {
        width: 1280
      }, a.mounted = false, a.onWindowResize = function() {
        if (a.mounted) {
          var f = cfe.default.findDOMNode(a);
          f instanceof HTMLElement && a.setState({
            width: f.offsetWidth
          });
        }
      }, o), hF(a, s);
    }
    return i.prototype.componentDidMount = function() {
      this.mounted = true, window.addEventListener("resize", this.onWindowResize), this.onWindowResize();
    }, i.prototype.componentWillUnmount = function() {
      this.mounted = false, window.removeEventListener("resize", this.onWindowResize);
    }, i.prototype.render = function() {
      var a = this.props, s = a.measureBeforeMount, l = ufe(a, ["measureBeforeMount"]);
      return s && !this.mounted ? Hw.default.createElement("div", {
        className: this.props.className,
        style: this.props.style
      }) : Hw.default.createElement(e12, ife({}, l, this.state));
    }, i;
  }(Hw.default.Component), t.defaultProps = {
    measureBeforeMount: false
  }, t.propTypes = {
    // If true, will not render children until mounted. Useful for getting the exact width before
    // rendering, to prevent any unsightly resizing.
    measureBeforeMount: sfe.default.bool
  }, r;
}
(function(e12) {
  e12.exports = n1.default, e12.exports.utils = dr, e12.exports.Responsive = ER.default, e12.exports.Responsive.utils = eh, e12.exports.WidthProvider = AR.default;
})(h7);
var pfe = h7.exports;
var mfe = Ui(pfe);
var L7 = { exports: {} };
(function(e12, t) {
  (function(r, n) {
    e12.exports = n();
  })(typeof window < "u" ? window : De, function() {
    if (typeof window > "u")
      return null;
    var r = typeof window < "u" && window.Math == Math ? window : typeof self < "u" && self.Math == Math ? self : Function("return this")(), n = r.requestAnimationFrame || r.mozRequestAnimationFrame || r.webkitRequestAnimationFrame || function(c) {
      return r.setTimeout(c, 20);
    }, i = r.cancelAnimationFrame || r.mozCancelAnimationFrame || r.webkitCancelAnimationFrame || function(c) {
      r.clearTimeout(c);
    };
    function o(c, f) {
      var h = Object.prototype.toString.call(c), d = h === "[object Array]" || h === "[object NodeList]" || h === "[object HTMLCollection]" || h === "[object Object]" || typeof jQuery < "u" && c instanceof jQuery || typeof Elements < "u" && c instanceof Elements, p = 0, m = c.length;
      if (d)
        for (; p < m; p++)
          f(c[p]);
      else
        f(c);
    }
    function a(c) {
      if (!c.getBoundingClientRect)
        return {
          width: c.offsetWidth,
          height: c.offsetHeight
        };
      var f = c.getBoundingClientRect();
      return {
        width: Math.round(f.width),
        height: Math.round(f.height)
      };
    }
    function s(c, f) {
      Object.keys(f).forEach(function(h) {
        c.style[h] = f[h];
      });
    }
    var l = function(c, f) {
      var h = 0;
      function d() {
        var m = [];
        this.add = function(_) {
          m.push(_);
        };
        var g, v;
        this.call = function(_) {
          for (g = 0, v = m.length; g < v; g++)
            m[g].call(this, _);
        }, this.remove = function(_) {
          var y = [];
          for (g = 0, v = m.length; g < v; g++)
            m[g] !== _ && y.push(m[g]);
          m = y;
        }, this.length = function() {
          return m.length;
        };
      }
      function p(m, g) {
        if (m) {
          if (m.resizedAttached) {
            m.resizedAttached.add(g);
            return;
          }
          m.resizedAttached = new d(), m.resizedAttached.add(g), m.resizeSensor = document.createElement("div"), m.resizeSensor.dir = "ltr", m.resizeSensor.className = "resize-sensor";
          var v = {
            pointerEvents: "none",
            position: "absolute",
            left: "0px",
            top: "0px",
            right: "0px",
            bottom: "0px",
            overflow: "hidden",
            zIndex: "-1",
            visibility: "hidden",
            maxWidth: "100%"
          }, _ = {
            position: "absolute",
            left: "0px",
            top: "0px",
            transition: "0s"
          };
          s(m.resizeSensor, v);
          var y = document.createElement("div");
          y.className = "resize-sensor-expand", s(y, v);
          var b = document.createElement("div");
          s(b, _), y.appendChild(b);
          var T = document.createElement("div");
          T.className = "resize-sensor-shrink", s(T, v);
          var E = document.createElement("div");
          s(E, _), s(E, {
            width: "200%",
            height: "200%"
          }), T.appendChild(E), m.resizeSensor.appendChild(y), m.resizeSensor.appendChild(T), m.appendChild(m.resizeSensor);
          var P = window.getComputedStyle(m), A = P ? P.getPropertyValue("position") : null;
          A !== "absolute" && A !== "relative" && A !== "fixed" && A !== "sticky" && (m.style.position = "relative");
          var I = false, x = 0, S = a(m), N = 0, B = 0, w = true;
          h = 0;
          var R = function() {
            var J = m.offsetWidth, me = m.offsetHeight;
            b.style.width = J + 10 + "px", b.style.height = me + 10 + "px", y.scrollLeft = J + 10, y.scrollTop = me + 10, T.scrollLeft = J + 10, T.scrollTop = me + 10;
          }, F = function() {
            if (w) {
              var J = m.offsetWidth === 0 && m.offsetHeight === 0;
              if (J) {
                h || (h = n(function() {
                  h = 0, F();
                }));
                return;
              } else
                w = false;
            }
            R();
          };
          m.resizeSensor.resetSensor = F;
          var $ = function() {
            x = 0, I && (N = S.width, B = S.height, m.resizedAttached && m.resizedAttached.call(S));
          }, K = function() {
            S = a(m), I = S.width !== N || S.height !== B, I && !x && (x = n($)), F();
          }, se = function(J, me, ae) {
            J.attachEvent ? J.attachEvent("on" + me, ae) : J.addEventListener(me, ae);
          };
          se(y, "scroll", K), se(T, "scroll", K), h = n(function() {
            h = 0, F();
          });
        }
      }
      o(c, function(m) {
        p(m, f);
      }), this.detach = function(m) {
        h || (i(h), h = 0), l.detach(c, m);
      }, this.reset = function() {
        c.resizeSensor.resetSensor();
      };
    };
    if (l.reset = function(c) {
      o(c, function(f) {
        f.resizeSensor.resetSensor();
      });
    }, l.detach = function(c, f) {
      o(c, function(h) {
        h && (h.resizedAttached && typeof f == "function" && (h.resizedAttached.remove(f), h.resizedAttached.length()) || h.resizeSensor && (h.contains(h.resizeSensor) && h.removeChild(h.resizeSensor), delete h.resizeSensor, delete h.resizedAttached));
      });
    }, typeof MutationObserver < "u") {
      var u = new MutationObserver(function(c) {
        for (var f in c)
          if (c.hasOwnProperty(f))
            for (var h = c[f].addedNodes, d = 0; d < h.length; d++)
              h[d].resizeSensor && l.reset(h[d]);
      });
      document.addEventListener("DOMContentLoaded", function(c) {
        u.observe(document.body, {
          childList: true,
          subtree: true
        });
      });
    }
    return l;
  });
})(L7);
var B7 = L7.exports;
var F7 = { exports: {} };
(function(e12, t) {
  (function(r, n) {
    e12.exports = n(B7);
  })(typeof window < "u" ? window : De, function(r) {
    var n = function() {
      var o, a = {}, s = [];
      function l(P) {
        P || (P = document.documentElement);
        var A = window.getComputedStyle(P, null).fontSize;
        return parseFloat(A) || 16;
      }
      function u(P) {
        if (!P.getBoundingClientRect)
          return {
            width: P.offsetWidth,
            height: P.offsetHeight
          };
        var A = P.getBoundingClientRect();
        return {
          width: Math.round(A.width),
          height: Math.round(A.height)
        };
      }
      function c(P, A) {
        var I = A.split(/\d/), x = I[I.length - 1];
        switch (A = parseFloat(A), x) {
          case "px":
            return A;
          case "em":
            return A * l(P);
          case "rem":
            return A * l();
          case "vw":
            return A * document.documentElement.clientWidth / 100;
          case "vh":
            return A * document.documentElement.clientHeight / 100;
          case "vmin":
          case "vmax":
            var S = document.documentElement.clientWidth / 100, N = document.documentElement.clientHeight / 100, B = Math[x === "vmin" ? "min" : "max"];
            return A * B(S, N);
          default:
            return A;
        }
      }
      function f(P, A) {
        this.element = P;
        var I, x, S, N, B, w, R, F, $ = ["min-width", "min-height", "max-width", "max-height"];
        this.call = function() {
          S = u(this.element), w = {};
          for (I in a[A])
            a[A].hasOwnProperty(I) && (x = a[A][I], N = c(this.element, x.value), B = x.property === "width" ? S.width : S.height, F = x.mode + "-" + x.property, R = "", x.mode === "min" && B >= N && (R += x.value), x.mode === "max" && B <= N && (R += x.value), w[F] || (w[F] = ""), R && (" " + w[F] + " ").indexOf(" " + R + " ") === -1 && (w[F] += " " + R));
          for (var K in $)
            $.hasOwnProperty(K) && (w[$[K]] ? this.element.setAttribute($[K], w[$[K]].substr(1)) : this.element.removeAttribute($[K]));
        };
      }
      function h(P, A) {
        P.elementQueriesSetupInformation || (P.elementQueriesSetupInformation = new f(P, A)), P.elementQueriesSensor || (P.elementQueriesSensor = new r(P, function() {
          P.elementQueriesSetupInformation.call();
        }));
      }
      function d(P, A, I, x) {
        if (typeof a[P] > "u") {
          a[P] = [];
          var S = s.length;
          o.innerHTML += `
` + P + " {animation: 0.1s element-queries;}", o.innerHTML += `
` + P + " > .resize-sensor {min-width: " + S + "px;}", s.push(P);
        }
        a[P].push({
          mode: A,
          property: I,
          value: x
        });
      }
      function p(P) {
        var A;
        if (document.querySelectorAll && (A = P ? P.querySelectorAll.bind(P) : document.querySelectorAll.bind(document)), !A && typeof $$ < "u" && (A = $$), !A && typeof jQuery < "u" && (A = jQuery), !A)
          throw "No document.querySelectorAll, jQuery or Mootools's $$ found.";
        return A;
      }
      function m(P) {
        var A = p(P);
        for (var I in a)
          if (a.hasOwnProperty(I))
            for (var x = A(I, P), S = 0, N = x.length; S < N; S++)
              h(x[S], I);
      }
      function g(P) {
        var A = [], I = [], x = [], S = 0, N = -1, B = [];
        for (var w in P.children)
          if (P.children.hasOwnProperty(w) && P.children[w].tagName && P.children[w].tagName.toLowerCase() === "img") {
            A.push(P.children[w]);
            var R = P.children[w].getAttribute("min-width") || P.children[w].getAttribute("data-min-width"), F = P.children[w].getAttribute("data-src") || P.children[w].getAttribute("url");
            x.push(F);
            var $ = {
              minWidth: R
            };
            I.push($), R ? P.children[w].style.display = "none" : (S = A.length - 1, P.children[w].style.display = "block");
          }
        N = S;
        function K() {
          var se = false, J;
          for (J in A)
            A.hasOwnProperty(J) && I[J].minWidth && P.offsetWidth > I[J].minWidth && (se = J);
          if (se || (se = S), N !== se)
            if (B[se])
              A[N].style.display = "none", A[se].style.display = "block", N = se;
            else {
              var me = new Image();
              me.onload = function() {
                A[se].src = x[se], A[N].style.display = "none", A[se].style.display = "block", B[se] = true, N = se;
              }, me.src = x[se];
            }
          else
            A[se].src = x[se];
        }
        P.resizeSensorInstance = new r(P, K), K();
      }
      function v() {
        for (var P = p(), A = P("[data-responsive-image],[responsive-image]"), I = 0, x = A.length; I < x; I++)
          g(A[I]);
      }
      var _ = /,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/mgi, y = /\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/mgi;
      function b(P) {
        var A, I, x, S;
        for (P = P.replace(/'/g, '"'); (A = _.exec(P)) !== null; )
          for (I = A[1] + A[3], x = A[2]; (S = y.exec(x)) !== null; )
            d(I, S[1], S[2], S[3]);
      }
      function T(P) {
        var A = "";
        if (P)
          if (typeof P == "string")
            P = P.toLowerCase(), (P.indexOf("min-width") !== -1 || P.indexOf("max-width") !== -1) && b(P);
          else
            for (var I = 0, x = P.length; I < x; I++)
              P[I].type === 1 ? (A = P[I].selectorText || P[I].cssText, (A.indexOf("min-height") !== -1 || A.indexOf("max-height") !== -1 || A.indexOf("min-width") !== -1 || A.indexOf("max-width") !== -1) && b(A)) : P[I].type === 4 ? T(P[I].cssRules || P[I].rules) : P[I].type === 3 && P[I].styleSheet.hasOwnProperty("cssRules") && T(P[I].styleSheet.cssRules);
      }
      var E = false;
      this.init = function() {
        var P = "animationstart";
        typeof document.documentElement.style.webkitAnimationName < "u" ? P = "webkitAnimationStart" : typeof document.documentElement.style.MozAnimationName < "u" ? P = "mozanimationstart" : typeof document.documentElement.style.OAnimationName < "u" && (P = "oanimationstart"), document.body.addEventListener(P, function(x) {
          var S = x.target, N = S && window.getComputedStyle(S, null), B = N && N.getPropertyValue("animation-name"), w = B && B.indexOf("element-queries") !== -1;
          if (w) {
            S.elementQueriesSensor = new r(S, function() {
              S.elementQueriesSetupInformation && S.elementQueriesSetupInformation.call();
            });
            var R = window.getComputedStyle(S.resizeSensor, null), F = R.getPropertyValue("min-width");
            F = parseInt(F.replace("px", "")), h(x.target, s[F]);
          }
        }), E || (o = document.createElement("style"), o.type = "text/css", o.innerHTML = "[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}", o.innerHTML += `
@keyframes element-queries { 0% { visibility: inherit; } }`, document.getElementsByTagName("head")[0].appendChild(o), E = true);
        for (var A = 0, I = document.styleSheets.length; A < I; A++)
          try {
            document.styleSheets[A].href && document.styleSheets[A].href.indexOf("file://") === 0 && console.warn("CssElementQueries: unable to parse local css files, " + document.styleSheets[A].href), T(document.styleSheets[A].cssRules || document.styleSheets[A].rules || document.styleSheets[A].cssText);
          } catch {
          }
        v();
      }, this.findElementQueriesElements = function(P) {
        m(P);
      }, this.update = function() {
        this.init();
      };
    };
    n.update = function() {
      n.instance.update();
    }, n.detach = function(o) {
      o.elementQueriesSetupInformation ? (o.elementQueriesSensor.detach(), delete o.elementQueriesSetupInformation, delete o.elementQueriesSensor) : o.resizeSensorInstance && (o.resizeSensorInstance.detach(), delete o.resizeSensorInstance);
    }, n.init = function() {
      n.instance || (n.instance = new n()), n.instance.init();
    };
    var i = function(o) {
      if (document.addEventListener)
        document.addEventListener("DOMContentLoaded", o, false);
      else if (/KHTML|WebKit|iCab/i.test(navigator.userAgent))
        var a = setInterval(function() {
          /loaded|complete/i.test(document.readyState) && (o(), clearInterval(a));
        }, 10);
      else
        window.onload = o;
    };
    return n.findElementQueriesElements = function(o) {
      n.instance.findElementQueriesElements(o);
    }, n.listen = function() {
      i(n.init);
    }, n;
  });
})(F7);
var gfe = F7.exports;
var w0 = {
  ResizeSensor: B7,
  ElementQueries: gfe
};
function p1(e12) {
  var t = "    ";
  if (isNaN(parseInt(e12)))
    t = e12;
  else
    switch (e12) {
      case 1:
        t = " ";
        break;
      case 2:
        t = "  ";
        break;
      case 3:
        t = "   ";
        break;
      case 4:
        t = "    ";
        break;
      case 5:
        t = "     ";
        break;
      case 6:
        t = "      ";
        break;
      case 7:
        t = "       ";
        break;
      case 8:
        t = "        ";
        break;
      case 9:
        t = "         ";
        break;
      case 10:
        t = "          ";
        break;
      case 11:
        t = "           ";
        break;
      case 12:
        t = "            ";
        break;
    }
  for (var r = [`
`], n = 0; n < 100; n++)
    r.push(r[n] + t);
  return r;
}
function Ws() {
  this.step = "    ", this.shift = p1(this.step);
}
Ws.prototype.xml = function(e12, t) {
  var r = e12.replace(/>\s{0,}</g, "><").replace(/</g, "~::~<").replace(/\s*xmlns\:/g, "~::~xmlns:").replace(/\s*xmlns\=/g, "~::~xmlns=").split("~::~"), n = r.length, i = false, o = 0, a = "", s = 0, l = t ? p1(t) : this.shift;
  for (s = 0; s < n; s++)
    r[s].search(/<!/) > -1 ? (a += l[o] + r[s], i = true, (r[s].search(/-->/) > -1 || r[s].search(/\]>/) > -1 || r[s].search(/!DOCTYPE/) > -1) && (i = false)) : r[s].search(/-->/) > -1 || r[s].search(/\]>/) > -1 ? (a += r[s], i = false) : /^<\w/.exec(r[s - 1]) && /^<\/\w/.exec(r[s]) && /^<[\w:\-\.\,]+/.exec(r[s - 1]) == /^<\/[\w:\-\.\,]+/.exec(r[s])[0].replace("/", "") ? (a += r[s], i || o--) : r[s].search(/<\w/) > -1 && r[s].search(/<\//) == -1 && r[s].search(/\/>/) == -1 ? a = i ? a += r[s] : a += l[o++] + r[s] : r[s].search(/<\w/) > -1 && r[s].search(/<\//) > -1 ? a = i ? a += r[s] : a += l[o] + r[s] : r[s].search(/<\//) > -1 ? a = i ? a += r[s] : a += l[--o] + r[s] : r[s].search(/\/>/) > -1 ? a = i ? a += r[s] : a += l[o] + r[s] : r[s].search(/<\?/) > -1 || r[s].search(/xmlns\:/) > -1 || r[s].search(/xmlns\=/) > -1 ? a += l[o] + r[s] : a += r[s];
  return a[0] == `
` ? a.slice(1) : a;
};
Ws.prototype.json = function(e12, r) {
  var r = r || this.step;
  return typeof JSON > "u" ? e12 : typeof e12 == "string" ? JSON.stringify(JSON.parse(e12), null, r) : typeof e12 == "object" ? JSON.stringify(e12, null, r) : e12;
};
Ws.prototype.css = function(e12, t) {
  var r = e12.replace(/\s{1,}/g, " ").replace(/\{/g, "{~::~").replace(/\}/g, "~::~}~::~").replace(/\;/g, ";~::~").replace(/\/\*/g, "~::~/*").replace(/\*\//g, "*/~::~").replace(/~::~\s{0,}~::~/g, "~::~").split("~::~"), n = r.length, i = 0, o = "", a = 0, s = t ? p1(t) : this.shift;
  for (a = 0; a < n; a++)
    /\{/.exec(r[a]) ? o += s[i++] + r[a] : /\}/.exec(r[a]) ? o += s[--i] + r[a] : (/\*\\/.exec(r[a]), o += s[i] + r[a]);
  return o.replace(/^\n{1,}/, "");
};
function vfe(e12, t) {
  return t - (e12.replace(/\(/g, "").length - e12.replace(/\)/g, "").length);
}
function yfe(e12, t) {
  return e12.replace(/\s{1,}/g, " ").replace(/ AND /ig, "~::~" + t + t + "AND ").replace(/ BETWEEN /ig, "~::~" + t + "BETWEEN ").replace(/ CASE /ig, "~::~" + t + "CASE ").replace(/ ELSE /ig, "~::~" + t + "ELSE ").replace(/ END /ig, "~::~" + t + "END ").replace(/ FROM /ig, "~::~FROM ").replace(/ GROUP\s{1,}BY/ig, "~::~GROUP BY ").replace(/ HAVING /ig, "~::~HAVING ").replace(/ IN /ig, " IN ").replace(/ JOIN /ig, "~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /ig, "~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /ig, "~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /ig, "~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /ig, "~::~RIGHT JOIN ").replace(/ ON /ig, "~::~" + t + "ON ").replace(/ OR /ig, "~::~" + t + t + "OR ").replace(/ ORDER\s{1,}BY/ig, "~::~ORDER BY ").replace(/ OVER /ig, "~::~" + t + "OVER ").replace(/\(\s{0,}SELECT /ig, "~::~(SELECT ").replace(/\)\s{0,}SELECT /ig, ")~::~SELECT ").replace(/ THEN /ig, " THEN~::~" + t).replace(/ UNION /ig, "~::~UNION~::~").replace(/ USING /ig, "~::~USING ").replace(/ WHEN /ig, "~::~" + t + "WHEN ").replace(/ WHERE /ig, "~::~WHERE ").replace(/ WITH /ig, "~::~WITH ").replace(/ ALL /ig, " ALL ").replace(/ AS /ig, " AS ").replace(/ ASC /ig, " ASC ").replace(/ DESC /ig, " DESC ").replace(/ DISTINCT /ig, " DISTINCT ").replace(/ EXISTS /ig, " EXISTS ").replace(/ NOT /ig, " NOT ").replace(/ NULL /ig, " NULL ").replace(/ LIKE /ig, " LIKE ").replace(/\s{0,}SELECT /ig, "SELECT ").replace(/\s{0,}UPDATE /ig, "UPDATE ").replace(/ SET /ig, " SET ").replace(/~::~{1,}/g, "~::~").split("~::~");
}
Ws.prototype.sql = function(e12, t) {
  var r = e12.replace(/\s{1,}/g, " ").replace(/\'/ig, "~::~'").split("~::~"), n = r.length, i = [], o = 0, a = this.step, s = 0, l = "", u = 0, c = t ? p1(t) : this.shift;
  for (u = 0; u < n; u++)
    u % 2 ? i = i.concat(r[u]) : i = i.concat(yfe(r[u], a));
  for (n = i.length, u = 0; u < n; u++)
    s = vfe(i[u], s), /\s{0,}\s{0,}SELECT\s{0,}/.exec(i[u]) && (i[u] = i[u].replace(/\,/g, `,
` + a + a)), /\s{0,}\s{0,}SET\s{0,}/.exec(i[u]) && (i[u] = i[u].replace(/\,/g, `,
` + a + a)), /\s{0,}\(\s{0,}SELECT\s{0,}/.exec(i[u]) ? (o++, l += c[o] + i[u]) : /\'/.exec(i[u]) ? (s < 1 && o && o--, l += i[u]) : (l += c[o] + i[u], s < 1 && o && o--);
  return l = l.replace(/^\n{1,}/, "").replace(/\n{1,}/g, `
`), l;
};
Ws.prototype.xmlmin = function(e12, t) {
  var r = t ? e12 : e12.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g, "").replace(/[ \r\n\t]{1,}xmlns/g, " xmlns");
  return r.replace(/>\s{0,}</g, "><");
};
Ws.prototype.jsonmin = function(e12) {
  return typeof JSON > "u" ? e12 : JSON.stringify(JSON.parse(e12), null, 0);
};
Ws.prototype.cssmin = function(e12, t) {
  var r = t ? e12 : e12.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g, "");
  return r.replace(/\s{1,}/g, " ").replace(/\{\s{1,}/g, "{").replace(/\}\s{1,}/g, "}").replace(/\;\s{1,}/g, ";").replace(/\/\*\s{1,}/g, "/*").replace(/\*\/\s{1,}/g, "*/");
};
Ws.prototype.sqlmin = function(e12) {
  return e12.replace(/\s{1,}/g, " ").replace(/\s{1,}\(/, "(").replace(/\s{1,}\)/, ")");
};
var _fe = new Ws();
var bfe = Ui(_fe);
var Tfe = function(t, r) {
  if (r = r.split(":")[0], t = +t, !t)
    return false;
  switch (r) {
    case "http":
    case "ws":
      return t !== 80;
    case "https":
    case "wss":
      return t !== 443;
    case "ftp":
      return t !== 21;
    case "gopher":
      return t !== 70;
    case "file":
      return false;
  }
  return t !== 0;
};
var IR = {};
var Efe = Object.prototype.hasOwnProperty;
var Sfe;
function fF(e12) {
  try {
    return decodeURIComponent(e12.replace(/\+/g, " "));
  } catch {
    return null;
  }
}
function dF(e12) {
  try {
    return encodeURIComponent(e12);
  } catch {
    return null;
  }
}
function wfe(e12) {
  for (var t = /([^=?#&]+)=?([^&]*)/g, r = {}, n; n = t.exec(e12); ) {
    var i = fF(n[1]), o = fF(n[2]);
    i === null || o === null || i in r || (r[i] = o);
  }
  return r;
}
function Afe(e12, t) {
  t = t || "";
  var r = [], n, i;
  typeof t != "string" && (t = "?");
  for (i in e12)
    if (Efe.call(e12, i)) {
      if (n = e12[i], !n && (n === null || n === Sfe || isNaN(n)) && (n = ""), i = dF(i), n = dF(n), i === null || n === null)
        continue;
      r.push(i + "=" + n);
    }
  return r.length ? t + r.join("&") : "";
}
IR.stringify = Afe;
IR.parse = wfe;
var $7 = Tfe;
var m1 = IR;
var Ofe = /^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/;
var H7 = /[\n\r\t]/g;
var Ife = /^[A-Za-z][A-Za-z0-9+-.]*:\/\//;
var U7 = /:\d+$/;
var Pfe = /^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i;
var Cfe = /^[a-zA-Z]:/;
function PR(e12) {
  return (e12 || "").toString().replace(Ofe, "");
}
var fP = [
  ["#", "hash"],
  // Extract from the back.
  ["?", "query"],
  // Extract from the back.
  function(t, r) {
    return $a(r.protocol) ? t.replace(/\\/g, "/") : t;
  },
  ["/", "pathname"],
  // Extract from the back.
  ["@", "auth", 1],
  // Extract from the front.
  [NaN, "host", void 0, 1, 1],
  // Set left over value.
  [/:(\d*)$/, "port", void 0, 1],
  // RegExp the back.
  [NaN, "hostname", void 0, 1, 1]
  // Set left over.
];
var pF = {
  hash: 1,
  query: 1
};
function j7(e12) {
  var t;
  typeof window < "u" ? t = window : typeof globalThis < "u" ? t = globalThis : typeof self < "u" ? t = self : t = {};
  var r = t.location || {};
  e12 = e12 || r;
  var n = {}, i = typeof e12, o;
  if (e12.protocol === "blob:")
    n = new Ga(unescape(e12.pathname), {});
  else if (i === "string") {
    n = new Ga(e12, {});
    for (o in pF)
      delete n[o];
  } else if (i === "object") {
    for (o in e12)
      o in pF || (n[o] = e12[o]);
    n.slashes === void 0 && (n.slashes = Ife.test(e12.href));
  }
  return n;
}
function $a(e12) {
  return e12 === "file:" || e12 === "ftp:" || e12 === "http:" || e12 === "https:" || e12 === "ws:" || e12 === "wss:";
}
function G7(e12, t) {
  e12 = PR(e12), e12 = e12.replace(H7, ""), t = t || {};
  var r = Pfe.exec(e12), n = r[1] ? r[1].toLowerCase() : "", i = !!r[2], o = !!r[3], a = 0, s;
  return i ? o ? (s = r[2] + r[3] + r[4], a = r[2].length + r[3].length) : (s = r[2] + r[4], a = r[2].length) : o ? (s = r[3] + r[4], a = r[3].length) : s = r[4], n === "file:" ? a >= 2 && (s = s.slice(2)) : $a(n) ? s = r[4] : n ? i && (s = s.slice(2)) : a >= 2 && $a(t.protocol) && (s = r[4]), {
    protocol: n,
    slashes: i || $a(n),
    slashesCount: a,
    rest: s
  };
}
function xfe(e12, t) {
  if (e12 === "")
    return t;
  for (var r = (t || "/").split("/").slice(0, -1).concat(e12.split("/")), n = r.length, i = r[n - 1], o = false, a = 0; n--; )
    r[n] === "." ? r.splice(n, 1) : r[n] === ".." ? (r.splice(n, 1), a++) : a && (n === 0 && (o = true), r.splice(n, 1), a--);
  return o && r.unshift(""), (i === "." || i === "..") && r.push(""), r.join("/");
}
function Ga(e12, t, r) {
  if (e12 = PR(e12), e12 = e12.replace(H7, ""), !(this instanceof Ga))
    return new Ga(e12, t, r);
  var n, i, o, a, s, l, u = fP.slice(), c = typeof t, f = this, h = 0;
  for (c !== "object" && c !== "string" && (r = t, t = null), r && typeof r != "function" && (r = m1.parse), t = j7(t), i = G7(e12 || "", t), n = !i.protocol && !i.slashes, f.slashes = i.slashes || n && t.slashes, f.protocol = i.protocol || t.protocol || "", e12 = i.rest, (i.protocol === "file:" && (i.slashesCount !== 2 || Cfe.test(e12)) || !i.slashes && (i.protocol || i.slashesCount < 2 || !$a(f.protocol))) && (u[3] = [/(.*)/, "pathname"]); h < u.length; h++) {
    if (a = u[h], typeof a == "function") {
      e12 = a(e12, f);
      continue;
    }
    o = a[0], l = a[1], o !== o ? f[l] = e12 : typeof o == "string" ? (s = o === "@" ? e12.lastIndexOf(o) : e12.indexOf(o), ~s && (typeof a[2] == "number" ? (f[l] = e12.slice(0, s), e12 = e12.slice(s + a[2])) : (f[l] = e12.slice(s), e12 = e12.slice(0, s)))) : (s = o.exec(e12)) && (f[l] = s[1], e12 = e12.slice(0, s.index)), f[l] = f[l] || n && a[3] && t[l] || "", a[4] && (f[l] = f[l].toLowerCase());
  }
  r && (f.query = r(f.query)), n && t.slashes && f.pathname.charAt(0) !== "/" && (f.pathname !== "" || t.pathname !== "") && (f.pathname = xfe(f.pathname, t.pathname)), f.pathname.charAt(0) !== "/" && $a(f.protocol) && (f.pathname = "/" + f.pathname), $7(f.port, f.protocol) || (f.host = f.hostname, f.port = ""), f.username = f.password = "", f.auth && (s = f.auth.indexOf(":"), ~s ? (f.username = f.auth.slice(0, s), f.username = encodeURIComponent(decodeURIComponent(f.username)), f.password = f.auth.slice(s + 1), f.password = encodeURIComponent(decodeURIComponent(f.password))) : f.username = encodeURIComponent(decodeURIComponent(f.auth)), f.auth = f.password ? f.username + ":" + f.password : f.username), f.origin = f.protocol !== "file:" && $a(f.protocol) && f.host ? f.protocol + "//" + f.host : "null", f.href = f.toString();
}
function kfe(e12, t, r) {
  var n = this;
  switch (e12) {
    case "query":
      typeof t == "string" && t.length && (t = (r || m1.parse)(t)), n[e12] = t;
      break;
    case "port":
      n[e12] = t, $7(t, n.protocol) ? t && (n.host = n.hostname + ":" + t) : (n.host = n.hostname, n[e12] = "");
      break;
    case "hostname":
      n[e12] = t, n.port && (t += ":" + n.port), n.host = t;
      break;
    case "host":
      n[e12] = t, U7.test(t) ? (t = t.split(":"), n.port = t.pop(), n.hostname = t.join(":")) : (n.hostname = t, n.port = "");
      break;
    case "protocol":
      n.protocol = t.toLowerCase(), n.slashes = !r;
      break;
    case "pathname":
    case "hash":
      if (t) {
        var i = e12 === "pathname" ? "/" : "#";
        n[e12] = t.charAt(0) !== i ? i + t : t;
      } else
        n[e12] = t;
      break;
    case "username":
    case "password":
      n[e12] = encodeURIComponent(t);
      break;
    case "auth":
      var o = t.indexOf(":");
      ~o ? (n.username = t.slice(0, o), n.username = encodeURIComponent(decodeURIComponent(n.username)), n.password = t.slice(o + 1), n.password = encodeURIComponent(decodeURIComponent(n.password))) : n.username = encodeURIComponent(decodeURIComponent(t));
  }
  for (var a = 0; a < fP.length; a++) {
    var s = fP[a];
    s[4] && (n[s[1]] = n[s[1]].toLowerCase());
  }
  return n.auth = n.password ? n.username + ":" + n.password : n.username, n.origin = n.protocol !== "file:" && $a(n.protocol) && n.host ? n.protocol + "//" + n.host : "null", n.href = n.toString(), n;
}
function Dfe(e12) {
  (!e12 || typeof e12 != "function") && (e12 = m1.stringify);
  var t, r = this, n = r.host, i = r.protocol;
  i && i.charAt(i.length - 1) !== ":" && (i += ":");
  var o = i + (r.protocol && r.slashes || $a(r.protocol) ? "//" : "");
  return r.username ? (o += r.username, r.password && (o += ":" + r.password), o += "@") : r.password ? (o += ":" + r.password, o += "@") : r.protocol !== "file:" && $a(r.protocol) && !n && r.pathname !== "/" && (o += "@"), (n[n.length - 1] === ":" || U7.test(r.hostname) && !r.port) && (n += ":"), o += n + r.pathname, t = typeof r.query == "object" ? e12(r.query) : r.query, t && (o += t.charAt(0) !== "?" ? "?" + t : t), r.hash && (o += r.hash), o;
}
Ga.prototype = {
  set: kfe,
  toString: Dfe
};
Ga.extractProtocol = G7;
Ga.location = j7;
Ga.trimLeft = PR;
Ga.qs = m1;
var Rfe = Ga;
var Nfe = Ui(Rfe);
var z7 = (() => {
  try {
    return new window.BroadcastChannel("pub-sub-es");
  } catch {
    return {
      postMessage: () => {
      }
    };
  }
})();
var CR = (e12, t) => t ? e12.toLowerCase() : e12;
var V7 = (e12, {
  caseInsensitive: t
} = {}) => (r, n, i = 1 / 0) => {
  const o = CR(r, t);
  return e12[o] || (e12[o] = [], e12.__times__[o] = []), e12[o].push(n), e12.__times__[o].push(+i || 1 / 0), {
    event: o,
    handler: n
  };
};
var xR = (e12, {
  caseInsensitive: t
} = {}) => (r, n) => {
  typeof r == "object" && (n = r.handler, r = r.event);
  const i = CR(r, t);
  if (!e12[i])
    return;
  const o = e12[i].indexOf(n);
  o === -1 || o >= e12[i].length || (e12[i].splice(o, 1), e12.__times__[i].splice(o, 1));
};
var mF = (e12, t) => () => {
  e12.forEach((r) => r(t));
};
var X7 = (e12, {
  isGlobal: t,
  caseInsensitive: r,
  async: n
} = {}) => {
  const i = xR(e12);
  return (o, a, s = {}) => {
    const l = CR(o, r);
    if (!e12[l])
      return;
    const u = [...e12[l]];
    if (u.forEach((c, f) => {
      --e12.__times__[l][f] < 1 && i(l, c);
    }), n || s.async ? setTimeout(mF(u, a), 0) : mF(u, a)(), t && !s.isNoGlobalBroadcast)
      try {
        z7.postMessage({
          event: l,
          news: a
        });
      } catch (c) {
        if (c instanceof DOMException)
          console.warn(`Could not broadcast '${l}' globally. Payload is not clonable.`);
        else
          throw c;
      }
  };
};
var W7 = (e12) => () => {
  Object.keys(e12).filter((t) => t[0] !== "_").forEach((t) => {
    e12[t] = void 0, e12.__times__[t] = void 0, delete e12[t], delete e12.__times__[t];
  });
};
var Y7 = () => ({
  __times__: {}
});
var g1 = (e12 = {}) => {
  const t = e12.async || false, r = e12.caseInsensitive || false, n = e12.stack || Y7();
  return n.__times__ || (n.__times__ = {}), {
    publish: X7(n, {
      async: t,
      caseInsensitive: r
    }),
    subscribe: V7(n, {
      caseInsensitive: r
    }),
    unsubscribe: xR(n, {
      caseInsensitive: r
    }),
    clear: W7(n),
    stack: n
  };
};
var Wp = Y7();
var Zm = {
  publish: X7(Wp, {
    isGlobal: true
  }),
  subscribe: V7(Wp),
  unsubscribe: xR(Wp),
  clear: W7(Wp),
  stack: Wp
};
z7.onmessage = ({
  data: {
    event: e12,
    news: t
  }
}) => Zm.publish(e12, t, {
  isNoGlobalBroadcast: true
});
var St = {
  "context-menu": "_context-menu_18ock_1",
  "context-menu-dark": "_context-menu-dark_18ock_12",
  "context-menu-icon": "_context-menu-icon_18ock_17",
  "context-menu-item": "_context-menu-item_18ock_27",
  "context-menu-hr": "_context-menu-hr_18ock_38",
  "play-icon": "_play-icon_18ock_45",
  "context-menu-span": "_context-menu-span_18ock_52",
  "context-menu-thumbnail": "_context-menu-thumbnail_18ock_60",
  "context-menu-thumbnail-inline": "_context-menu-thumbnail-inline_18ock_65"
};
function Ct(e12) {
  return import_react.default.createElement("div", {
    "data-menu-item-for": typeof e12.children == "string" ? e12.children : null,
    className: St["context-menu-item"],
    onClick: (t) => e12.onClick(t),
    onMouseEnter: (t) => e12.onMouseEnter(t),
    onMouseLeave: (t) => e12.onMouseLeave(t),
    role: "button",
    tabIndex: 0
  }, import_react.default.createElement("span", {
    className: St["context-menu-span"]
  }, e12.children));
}
Ct.defaultProps = {
  onMouseEnter: () => {
  },
  onMouseLeave: () => {
  }
};
Ct.propTypes = {
  children: L.node.isRequired,
  onClick: L.func.isRequired,
  onMouseEnter: L.func,
  onMouseLeave: L.func
};
var Mfe = {
  value: () => {
  }
};
function np() {
  for (var e12 = 0, t = arguments.length, r = {}, n; e12 < t; ++e12) {
    if (!(n = arguments[e12] + "") || n in r || /[\s.]/.test(n))
      throw new Error("illegal type: " + n);
    r[n] = [];
  }
  return new ib(r);
}
function ib(e12) {
  this._ = e12;
}
function Lfe(e12, t) {
  return e12.trim().split(/^|\s+/).map(function(r) {
    var n = "", i = r.indexOf(".");
    if (i >= 0 && (n = r.slice(i + 1), r = r.slice(0, i)), r && !t.hasOwnProperty(r))
      throw new Error("unknown type: " + r);
    return {
      type: r,
      name: n
    };
  });
}
ib.prototype = np.prototype = {
  constructor: ib,
  on: function(e12, t) {
    var r = this._, n = Lfe(e12 + "", r), i, o = -1, a = n.length;
    if (arguments.length < 2) {
      for (; ++o < a; )
        if ((i = (e12 = n[o]).type) && (i = Bfe(r[i], e12.name)))
          return i;
      return;
    }
    if (t != null && typeof t != "function")
      throw new Error("invalid callback: " + t);
    for (; ++o < a; )
      if (i = (e12 = n[o]).type)
        r[i] = gF(r[i], e12.name, t);
      else if (t == null)
        for (i in r)
          r[i] = gF(r[i], e12.name, null);
    return this;
  },
  copy: function() {
    var e12 = {}, t = this._;
    for (var r in t)
      e12[r] = t[r].slice();
    return new ib(e12);
  },
  call: function(e12, t) {
    if ((i = arguments.length - 2) > 0)
      for (var r = new Array(i), n = 0, i, o; n < i; ++n)
        r[n] = arguments[n + 2];
    if (!this._.hasOwnProperty(e12))
      throw new Error("unknown type: " + e12);
    for (o = this._[e12], n = 0, i = o.length; n < i; ++n)
      o[n].value.apply(t, r);
  },
  apply: function(e12, t, r) {
    if (!this._.hasOwnProperty(e12))
      throw new Error("unknown type: " + e12);
    for (var n = this._[e12], i = 0, o = n.length; i < o; ++i)
      n[i].value.apply(t, r);
  }
};
function Bfe(e12, t) {
  for (var r = 0, n = e12.length, i; r < n; ++r)
    if ((i = e12[r]).name === t)
      return i.value;
}
function gF(e12, t, r) {
  for (var n = 0, i = e12.length; n < i; ++n)
    if (e12[n].name === t) {
      e12[n] = Mfe, e12 = e12.slice(0, n).concat(e12.slice(n + 1));
      break;
    }
  return r != null && e12.push({
    name: t,
    value: r
  }), e12;
}
function Uw(e12) {
  e12.stopImmediatePropagation();
}
function xf(e12) {
  e12.preventDefault(), e12.stopImmediatePropagation();
}
function v1(e12) {
  var t = e12.document.documentElement, r = Wt(e12).on("dragstart.drag", xf, true);
  "onselectstart" in t ? r.on("selectstart.drag", xf, true) : (t.__noselect = t.style.MozUserSelect, t.style.MozUserSelect = "none");
}
function y1(e12, t) {
  var r = e12.document.documentElement, n = Wt(e12).on("dragstart.drag", null);
  t && (n.on("click.drag", xf, true), setTimeout(function() {
    n.on("click.drag", null);
  }, 0)), "onselectstart" in r ? n.on("selectstart.drag", null) : (r.style.MozUserSelect = r.__noselect, delete r.__noselect);
}
var l_ = (e12) => () => e12;
function dP(e12, {
  sourceEvent: t,
  subject: r,
  target: n,
  identifier: i,
  active: o,
  x: a,
  y: s,
  dx: l,
  dy: u,
  dispatch: c
}) {
  Object.defineProperties(this, {
    type: {
      value: e12,
      enumerable: true,
      configurable: true
    },
    sourceEvent: {
      value: t,
      enumerable: true,
      configurable: true
    },
    subject: {
      value: r,
      enumerable: true,
      configurable: true
    },
    target: {
      value: n,
      enumerable: true,
      configurable: true
    },
    identifier: {
      value: i,
      enumerable: true,
      configurable: true
    },
    active: {
      value: o,
      enumerable: true,
      configurable: true
    },
    x: {
      value: a,
      enumerable: true,
      configurable: true
    },
    y: {
      value: s,
      enumerable: true,
      configurable: true
    },
    dx: {
      value: l,
      enumerable: true,
      configurable: true
    },
    dy: {
      value: u,
      enumerable: true,
      configurable: true
    },
    _: {
      value: c
    }
  });
}
dP.prototype.on = function() {
  var e12 = this._.on.apply(this._, arguments);
  return e12 === this._ ? this : e12;
};
function Ffe(e12) {
  return !e12.ctrlKey && !e12.button;
}
function $fe() {
  return this.parentNode;
}
function Hfe(e12, t) {
  return t ?? {
    x: e12.x,
    y: e12.y
  };
}
function Ufe() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function cs() {
  var e12 = Ffe, t = $fe, r = Hfe, n = Ufe, i = {}, o = np("start", "drag", "end"), a = 0, s, l, u, c, f = 0;
  function h(b) {
    b.on("mousedown.drag", d).filter(n).on("touchstart.drag", g).on("touchmove.drag", v).on("touchend.drag touchcancel.drag", _).style("touch-action", "none").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  function d(b, T) {
    if (!(c || !e12.call(this, b, T))) {
      var E = y(this, t.call(this, b, T), b, T, "mouse");
      E && (Wt(b.view).on("mousemove.drag", p, true).on("mouseup.drag", m, true), v1(b.view), Uw(b), u = false, s = b.clientX, l = b.clientY, E("start", b));
    }
  }
  function p(b) {
    if (xf(b), !u) {
      var T = b.clientX - s, E = b.clientY - l;
      u = T * T + E * E > f;
    }
    i.mouse("drag", b);
  }
  function m(b) {
    Wt(b.view).on("mousemove.drag mouseup.drag", null), y1(b.view, u), xf(b), i.mouse("end", b);
  }
  function g(b, T) {
    if (e12.call(this, b, T)) {
      var E = b.changedTouches, P = t.call(this, b, T), A = E.length, I, x;
      for (I = 0; I < A; ++I)
        (x = y(this, P, b, T, E[I].identifier, E[I])) && (Uw(b), x("start", b, E[I]));
    }
  }
  function v(b) {
    var T = b.changedTouches, E = T.length, P, A;
    for (P = 0; P < E; ++P)
      (A = i[T[P].identifier]) && (xf(b), A("drag", b, T[P]));
  }
  function _(b) {
    var T = b.changedTouches, E = T.length, P, A;
    for (c && clearTimeout(c), c = setTimeout(function() {
      c = null;
    }, 500), P = 0; P < E; ++P)
      (A = i[T[P].identifier]) && (Uw(b), A("end", b, T[P]));
  }
  function y(b, T, E, P, A, I) {
    var x = o.copy(), S = vr(I || E, T), N, B, w;
    if ((w = r.call(b, new dP("beforestart", {
      sourceEvent: E,
      target: h,
      identifier: A,
      active: a,
      x: S[0],
      y: S[1],
      dx: 0,
      dy: 0,
      dispatch: x
    }), P)) != null)
      return N = w.x - S[0] || 0, B = w.y - S[1] || 0, function R(F, $, K) {
        var se = S, J;
        switch (F) {
          case "start":
            i[A] = R, J = a++;
            break;
          case "end":
            delete i[A], --a;
          case "drag":
            S = vr(K || $, T), J = a;
            break;
        }
        x.call(F, b, new dP(F, {
          sourceEvent: $,
          subject: w,
          target: h,
          identifier: A,
          active: J,
          x: S[0] + N,
          y: S[1] + B,
          dx: S[0] - se[0],
          dy: S[1] - se[1],
          dispatch: x
        }), P);
      };
  }
  return h.filter = function(b) {
    return arguments.length ? (e12 = typeof b == "function" ? b : l_(!!b), h) : e12;
  }, h.container = function(b) {
    return arguments.length ? (t = typeof b == "function" ? b : l_(b), h) : t;
  }, h.subject = function(b) {
    return arguments.length ? (r = typeof b == "function" ? b : l_(b), h) : r;
  }, h.touchable = function(b) {
    return arguments.length ? (n = typeof b == "function" ? b : l_(!!b), h) : n;
  }, h.on = function() {
    var b = o.on.apply(o, arguments);
    return b === o ? h : b;
  }, h.clickDistance = function(b) {
    return arguments.length ? (f = (b = +b) * b, h) : Math.sqrt(f);
  }, h;
}
var jfe = Object.freeze(Object.defineProperty({
  __proto__: null,
  drag: cs,
  dragDisable: v1,
  dragEnable: y1
}, Symbol.toStringTag, { value: "Module" }));
var hd = 0;
var _m = 0;
var Yp = 0;
var q7 = 1e3;
var A0;
var bm;
var O0 = 0;
var gu = 0;
var _1 = 0;
var Jg = typeof performance == "object" && performance.now ? performance : Date;
var K7 = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(e12) {
  setTimeout(e12, 17);
};
function kR() {
  return gu || (K7(Gfe), gu = Jg.now() + _1);
}
function Gfe() {
  gu = 0;
}
function I0() {
  this._call = this._time = this._next = null;
}
I0.prototype = Z7.prototype = {
  constructor: I0,
  restart: function(e12, t, r) {
    if (typeof e12 != "function")
      throw new TypeError("callback is not a function");
    r = (r == null ? kR() : +r) + (t == null ? 0 : +t), !this._next && bm !== this && (bm ? bm._next = this : A0 = this, bm = this), this._call = e12, this._time = r, pP();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, pP());
  }
};
function Z7(e12, t, r) {
  var n = new I0();
  return n.restart(e12, t, r), n;
}
function zfe() {
  kR(), ++hd;
  for (var e12 = A0, t; e12; )
    (t = gu - e12._time) >= 0 && e12._call.call(null, t), e12 = e12._next;
  --hd;
}
function vF() {
  gu = (O0 = Jg.now()) + _1, hd = _m = 0;
  try {
    zfe();
  } finally {
    hd = 0, Xfe(), gu = 0;
  }
}
function Vfe() {
  var e12 = Jg.now(), t = e12 - O0;
  t > q7 && (_1 -= t, O0 = e12);
}
function Xfe() {
  for (var e12, t = A0, r, n = 1 / 0; t; )
    t._call ? (n > t._time && (n = t._time), e12 = t, t = t._next) : (r = t._next, t._next = null, t = e12 ? e12._next = r : A0 = r);
  bm = e12, pP(n);
}
function pP(e12) {
  if (!hd) {
    _m && (_m = clearTimeout(_m));
    var t = e12 - gu;
    t > 24 ? (e12 < 1 / 0 && (_m = setTimeout(vF, e12 - Jg.now() - _1)), Yp && (Yp = clearInterval(Yp))) : (Yp || (O0 = Jg.now(), Yp = setInterval(Vfe, q7)), hd = 1, K7(vF));
  }
}
function yF(e12, t, r) {
  var n = new I0();
  return t = t == null ? 0 : +t, n.restart((i) => {
    n.stop(), e12(i + t);
  }, t, r), n;
}
var Wfe = np("start", "end", "cancel", "interrupt");
var Yfe = [];
var Q7 = 0;
var _F = 1;
var mP = 2;
var ob = 3;
var bF = 4;
var gP = 5;
var ab = 6;
function b1(e12, t, r, n, i, o) {
  var a = e12.__transition;
  if (!a)
    e12.__transition = {};
  else if (r in a)
    return;
  qfe(e12, r, {
    name: t,
    index: n,
    // For context during callback.
    group: i,
    // For context during callback.
    on: Wfe,
    tween: Yfe,
    time: o.time,
    delay: o.delay,
    duration: o.duration,
    ease: o.ease,
    timer: null,
    state: Q7
  });
}
function DR(e12, t) {
  var r = aa(e12, t);
  if (r.state > Q7)
    throw new Error("too late; already scheduled");
  return r;
}
function Za(e12, t) {
  var r = aa(e12, t);
  if (r.state > ob)
    throw new Error("too late; already running");
  return r;
}
function aa(e12, t) {
  var r = e12.__transition;
  if (!r || !(r = r[t]))
    throw new Error("transition not found");
  return r;
}
function qfe(e12, t, r) {
  var n = e12.__transition, i;
  n[t] = r, r.timer = Z7(o, 0, r.time);
  function o(u) {
    r.state = _F, r.timer.restart(a, r.delay, r.time), r.delay <= u && a(u - r.delay);
  }
  function a(u) {
    var c, f, h, d;
    if (r.state !== _F)
      return l();
    for (c in n)
      if (d = n[c], d.name === r.name) {
        if (d.state === ob)
          return yF(a);
        d.state === bF ? (d.state = ab, d.timer.stop(), d.on.call("interrupt", e12, e12.__data__, d.index, d.group), delete n[c]) : +c < t && (d.state = ab, d.timer.stop(), d.on.call("cancel", e12, e12.__data__, d.index, d.group), delete n[c]);
      }
    if (yF(function() {
      r.state === ob && (r.state = bF, r.timer.restart(s, r.delay, r.time), s(u));
    }), r.state = mP, r.on.call("start", e12, e12.__data__, r.index, r.group), r.state === mP) {
      for (r.state = ob, i = new Array(h = r.tween.length), c = 0, f = -1; c < h; ++c)
        (d = r.tween[c].value.call(e12, e12.__data__, r.index, r.group)) && (i[++f] = d);
      i.length = f + 1;
    }
  }
  function s(u) {
    for (var c = u < r.duration ? r.ease.call(null, u / r.duration) : (r.timer.restart(l), r.state = gP, 1), f = -1, h = i.length; ++f < h; )
      i[f].call(e12, c);
    r.state === gP && (r.on.call("end", e12, e12.__data__, r.index, r.group), l());
  }
  function l() {
    r.state = ab, r.timer.stop(), delete n[t];
    for (var u in n)
      return;
    delete e12.__transition;
  }
}
function vP(e12, t) {
  var r = e12.__transition, n, i, o = true, a;
  if (r) {
    t = t == null ? null : t + "";
    for (a in r) {
      if ((n = r[a]).name !== t) {
        o = false;
        continue;
      }
      i = n.state > mP && n.state < gP, n.state = ab, n.timer.stop(), n.on.call(i ? "interrupt" : "cancel", e12, e12.__data__, n.index, n.group), delete r[a];
    }
    o && delete e12.__transition;
  }
}
function Kfe(e12) {
  return this.each(function() {
    vP(this, e12);
  });
}
function Zfe(e12, t) {
  var r, n;
  return function() {
    var i = Za(this, e12), o = i.tween;
    if (o !== r) {
      n = r = o;
      for (var a = 0, s = n.length; a < s; ++a)
        if (n[a].name === t) {
          n = n.slice(), n.splice(a, 1);
          break;
        }
    }
    i.tween = n;
  };
}
function Qfe(e12, t, r) {
  var n, i;
  if (typeof r != "function")
    throw new Error();
  return function() {
    var o = Za(this, e12), a = o.tween;
    if (a !== n) {
      i = (n = a).slice();
      for (var s = {
        name: t,
        value: r
      }, l = 0, u = i.length; l < u; ++l)
        if (i[l].name === t) {
          i[l] = s;
          break;
        }
      l === u && i.push(s);
    }
    o.tween = i;
  };
}
function Jfe(e12, t) {
  var r = this._id;
  if (e12 += "", arguments.length < 2) {
    for (var n = aa(this.node(), r).tween, i = 0, o = n.length, a; i < o; ++i)
      if ((a = n[i]).name === e12)
        return a.value;
    return null;
  }
  return this.each((t == null ? Zfe : Qfe)(r, e12, t));
}
function RR(e12, t, r) {
  var n = e12._id;
  return e12.each(function() {
    var i = Za(this, n);
    (i.value || (i.value = {}))[t] = r.apply(this, arguments);
  }), function(i) {
    return aa(i, n).value[t];
  };
}
function J7(e12, t) {
  var r;
  return (typeof t == "number" ? bo : t instanceof dn ? ad : (r = dn(t)) ? (t = r, ad) : YD)(e12, t);
}
function ede(e12) {
  return function() {
    this.removeAttribute(e12);
  };
}
function tde(e12) {
  return function() {
    this.removeAttributeNS(e12.space, e12.local);
  };
}
function rde(e12, t, r) {
  var n, i = r + "", o;
  return function() {
    var a = this.getAttribute(e12);
    return a === i ? null : a === n ? o : o = t(n = a, r);
  };
}
function nde(e12, t, r) {
  var n, i = r + "", o;
  return function() {
    var a = this.getAttributeNS(e12.space, e12.local);
    return a === i ? null : a === n ? o : o = t(n = a, r);
  };
}
function ide(e12, t, r) {
  var n, i, o;
  return function() {
    var a, s = r(this), l;
    return s == null ? void this.removeAttribute(e12) : (a = this.getAttribute(e12), l = s + "", a === l ? null : a === n && l === i ? o : (i = l, o = t(n = a, s)));
  };
}
function ode(e12, t, r) {
  var n, i, o;
  return function() {
    var a, s = r(this), l;
    return s == null ? void this.removeAttributeNS(e12.space, e12.local) : (a = this.getAttributeNS(e12.space, e12.local), l = s + "", a === l ? null : a === n && l === i ? o : (i = l, o = t(n = a, s)));
  };
}
function ade(e12, t) {
  var r = Wu(e12), n = r === "transform" ? R9 : J7;
  return this.attrTween(e12, typeof t == "function" ? (r.local ? ode : ide)(r, n, RR(this, "attr." + e12, t)) : t == null ? (r.local ? tde : ede)(r) : (r.local ? nde : rde)(r, n, t));
}
function sde(e12, t) {
  return function(r) {
    this.setAttribute(e12, t.call(this, r));
  };
}
function lde(e12, t) {
  return function(r) {
    this.setAttributeNS(e12.space, e12.local, t.call(this, r));
  };
}
function cde(e12, t) {
  var r, n;
  function i() {
    var o = t.apply(this, arguments);
    return o !== n && (r = (n = o) && lde(e12, o)), r;
  }
  return i._value = t, i;
}
function ude(e12, t) {
  var r, n;
  function i() {
    var o = t.apply(this, arguments);
    return o !== n && (r = (n = o) && sde(e12, o)), r;
  }
  return i._value = t, i;
}
function hde(e12, t) {
  var r = "attr." + e12;
  if (arguments.length < 2)
    return (r = this.tween(r)) && r._value;
  if (t == null)
    return this.tween(r, null);
  if (typeof t != "function")
    throw new Error();
  var n = Wu(e12);
  return this.tween(r, (n.local ? cde : ude)(n, t));
}
function fde(e12, t) {
  return function() {
    DR(this, e12).delay = +t.apply(this, arguments);
  };
}
function dde(e12, t) {
  return t = +t, function() {
    DR(this, e12).delay = t;
  };
}
function pde(e12) {
  var t = this._id;
  return arguments.length ? this.each((typeof e12 == "function" ? fde : dde)(t, e12)) : aa(this.node(), t).delay;
}
function mde(e12, t) {
  return function() {
    Za(this, e12).duration = +t.apply(this, arguments);
  };
}
function gde(e12, t) {
  return t = +t, function() {
    Za(this, e12).duration = t;
  };
}
function vde(e12) {
  var t = this._id;
  return arguments.length ? this.each((typeof e12 == "function" ? mde : gde)(t, e12)) : aa(this.node(), t).duration;
}
function yde(e12, t) {
  if (typeof t != "function")
    throw new Error();
  return function() {
    Za(this, e12).ease = t;
  };
}
function _de(e12) {
  var t = this._id;
  return arguments.length ? this.each(yde(t, e12)) : aa(this.node(), t).ease;
}
function bde(e12, t) {
  return function() {
    var r = t.apply(this, arguments);
    if (typeof r != "function")
      throw new Error();
    Za(this, e12).ease = r;
  };
}
function Tde(e12) {
  if (typeof e12 != "function")
    throw new Error();
  return this.each(bde(this._id, e12));
}
function Ede(e12) {
  typeof e12 != "function" && (e12 = GE(e12));
  for (var t = this._groups, r = t.length, n = new Array(r), i = 0; i < r; ++i)
    for (var o = t[i], a = o.length, s = n[i] = [], l, u = 0; u < a; ++u)
      (l = o[u]) && e12.call(l, l.__data__, u, o) && s.push(l);
  return new Fs(n, this._parents, this._name, this._id);
}
function Sde(e12) {
  if (e12._id !== this._id)
    throw new Error();
  for (var t = this._groups, r = e12._groups, n = t.length, i = r.length, o = Math.min(n, i), a = new Array(n), s = 0; s < o; ++s)
    for (var l = t[s], u = r[s], c = l.length, f = a[s] = new Array(c), h, d = 0; d < c; ++d)
      (h = l[d] || u[d]) && (f[d] = h);
  for (; s < n; ++s)
    a[s] = t[s];
  return new Fs(a, this._parents, this._name, this._id);
}
function wde(e12) {
  return (e12 + "").trim().split(/^|\s+/).every(function(t) {
    var r = t.indexOf(".");
    return r >= 0 && (t = t.slice(0, r)), !t || t === "start";
  });
}
function Ade(e12, t, r) {
  var n, i, o = wde(t) ? DR : Za;
  return function() {
    var a = o(this, e12), s = a.on;
    s !== n && (i = (n = s).copy()).on(t, r), a.on = i;
  };
}
function Ode(e12, t) {
  var r = this._id;
  return arguments.length < 2 ? aa(this.node(), r).on.on(e12) : this.each(Ade(r, e12, t));
}
function Ide(e12) {
  return function() {
    var t = this.parentNode;
    for (var r in this.__transition)
      if (+r !== e12)
        return;
    t && t.removeChild(this);
  };
}
function Pde() {
  return this.on("end.remove", Ide(this._id));
}
function Cde(e12) {
  var t = this._name, r = this._id;
  typeof e12 != "function" && (e12 = Lv(e12));
  for (var n = this._groups, i = n.length, o = new Array(i), a = 0; a < i; ++a)
    for (var s = n[a], l = s.length, u = o[a] = new Array(l), c, f, h = 0; h < l; ++h)
      (c = s[h]) && (f = e12.call(c, c.__data__, h, s)) && ("__data__" in c && (f.__data__ = c.__data__), u[h] = f, b1(u[h], t, r, h, u, aa(c, r)));
  return new Fs(o, this._parents, t, r);
}
function xde(e12) {
  var t = this._name, r = this._id;
  typeof e12 != "function" && (e12 = jE(e12));
  for (var n = this._groups, i = n.length, o = [], a = [], s = 0; s < i; ++s)
    for (var l = n[s], u = l.length, c, f = 0; f < u; ++f)
      if (c = l[f]) {
        for (var h = e12.call(c, c.__data__, f, l), d, p = aa(c, r), m = 0, g = h.length; m < g; ++m)
          (d = h[m]) && b1(d, t, r, m, h, p);
        o.push(h), a.push(c);
      }
  return new Fs(o, a, t, r);
}
var kde = oa.prototype.constructor;
function Dde() {
  return new kde(this._groups, this._parents);
}
function Rde(e12, t) {
  var r, n, i;
  return function() {
    var o = xo(this, e12), a = (this.style.removeProperty(e12), xo(this, e12));
    return o === a ? null : o === r && a === n ? i : i = t(r = o, n = a);
  };
}
function eV(e12) {
  return function() {
    this.style.removeProperty(e12);
  };
}
function Nde(e12, t, r) {
  var n, i = r + "", o;
  return function() {
    var a = xo(this, e12);
    return a === i ? null : a === n ? o : o = t(n = a, r);
  };
}
function Mde(e12, t, r) {
  var n, i, o;
  return function() {
    var a = xo(this, e12), s = r(this), l = s + "";
    return s == null && (l = s = (this.style.removeProperty(e12), xo(this, e12))), a === l ? null : a === n && l === i ? o : (i = l, o = t(n = a, s));
  };
}
function Lde(e12, t) {
  var r, n, i, o = "style." + t, a = "end." + o, s;
  return function() {
    var l = Za(this, e12), u = l.on, c = l.value[o] == null ? s || (s = eV(t)) : void 0;
    (u !== r || i !== c) && (n = (r = u).copy()).on(a, i = c), l.on = n;
  };
}
function Bde(e12, t, r) {
  var n = (e12 += "") == "transform" ? D9 : J7;
  return t == null ? this.styleTween(e12, Rde(e12, n)).on("end.style." + e12, eV(e12)) : typeof t == "function" ? this.styleTween(e12, Mde(e12, n, RR(this, "style." + e12, t))).each(Lde(this._id, e12)) : this.styleTween(e12, Nde(e12, n, t), r).on("end.style." + e12, null);
}
function Fde(e12, t, r) {
  return function(n) {
    this.style.setProperty(e12, t.call(this, n), r);
  };
}
function $de(e12, t, r) {
  var n, i;
  function o() {
    var a = t.apply(this, arguments);
    return a !== i && (n = (i = a) && Fde(e12, a, r)), n;
  }
  return o._value = t, o;
}
function Hde(e12, t, r) {
  var n = "style." + (e12 += "");
  if (arguments.length < 2)
    return (n = this.tween(n)) && n._value;
  if (t == null)
    return this.tween(n, null);
  if (typeof t != "function")
    throw new Error();
  return this.tween(n, $de(e12, t, r ?? ""));
}
function Ude(e12) {
  return function() {
    this.textContent = e12;
  };
}
function jde(e12) {
  return function() {
    var t = e12(this);
    this.textContent = t ?? "";
  };
}
function Gde(e12) {
  return this.tween("text", typeof e12 == "function" ? jde(RR(this, "text", e12)) : Ude(e12 == null ? "" : e12 + ""));
}
function zde(e12) {
  return function(t) {
    this.textContent = e12.call(this, t);
  };
}
function Vde(e12) {
  var t, r;
  function n() {
    var i = e12.apply(this, arguments);
    return i !== r && (t = (r = i) && zde(i)), t;
  }
  return n._value = e12, n;
}
function Xde(e12) {
  var t = "text";
  if (arguments.length < 1)
    return (t = this.tween(t)) && t._value;
  if (e12 == null)
    return this.tween(t, null);
  if (typeof e12 != "function")
    throw new Error();
  return this.tween(t, Vde(e12));
}
function Wde() {
  for (var e12 = this._name, t = this._id, r = tV(), n = this._groups, i = n.length, o = 0; o < i; ++o)
    for (var a = n[o], s = a.length, l, u = 0; u < s; ++u)
      if (l = a[u]) {
        var c = aa(l, t);
        b1(l, e12, r, u, a, {
          time: c.time + c.delay + c.duration,
          delay: 0,
          duration: c.duration,
          ease: c.ease
        });
      }
  return new Fs(n, this._parents, e12, r);
}
function Yde() {
  var e12, t, r = this, n = r._id, i = r.size();
  return new Promise(function(o, a) {
    var s = {
      value: a
    }, l = {
      value: function() {
        --i === 0 && o();
      }
    };
    r.each(function() {
      var u = Za(this, n), c = u.on;
      c !== e12 && (t = (e12 = c).copy(), t._.cancel.push(s), t._.interrupt.push(s), t._.end.push(l)), u.on = t;
    }), i === 0 && o();
  });
}
var qde = 0;
function Fs(e12, t, r, n) {
  this._groups = e12, this._parents = t, this._name = r, this._id = n;
}
function tV() {
  return ++qde;
}
var wc = oa.prototype;
Fs.prototype = {
  constructor: Fs,
  select: Cde,
  selectAll: xde,
  filter: Ede,
  merge: Sde,
  selection: Dde,
  transition: Wde,
  call: wc.call,
  nodes: wc.nodes,
  node: wc.node,
  size: wc.size,
  empty: wc.empty,
  each: wc.each,
  on: Ode,
  attr: ade,
  attrTween: hde,
  style: Bde,
  styleTween: Hde,
  text: Gde,
  textTween: Xde,
  remove: Pde,
  tween: Jfe,
  delay: pde,
  duration: vde,
  ease: _de,
  easeVarying: Tde,
  end: Yde,
  [Symbol.iterator]: wc[Symbol.iterator]
};
function Kde(e12) {
  return ((e12 *= 2) <= 1 ? e12 * e12 * e12 : (e12 -= 2) * e12 * e12 + 2) / 2;
}
var Zde = {
  time: null,
  // Set on use.
  delay: 0,
  duration: 250,
  ease: Kde
};
function Qde(e12, t) {
  for (var r; !(r = e12.__transition) || !(r = r[t]); )
    if (!(e12 = e12.parentNode))
      throw new Error(`transition ${t} not found`);
  return r;
}
function Jde(e12) {
  var t, r;
  e12 instanceof Fs ? (t = e12._id, e12 = e12._name) : (t = tV(), (r = Zde).time = kR(), e12 = e12 == null ? null : e12 + "");
  for (var n = this._groups, i = n.length, o = 0; o < i; ++o)
    for (var a = n[o], s = a.length, l, u = 0; u < s; ++u)
      (l = a[u]) && b1(l, e12, t, u, a, r || Qde(l, t));
  return new Fs(n, this._parents, e12, t);
}
oa.prototype.interrupt = Kfe;
oa.prototype.transition = Jde;
var jw = (e12) => () => e12;
function epe(e12, {
  sourceEvent: t,
  target: r,
  selection: n,
  mode: i,
  dispatch: o
}) {
  Object.defineProperties(this, {
    type: {
      value: e12,
      enumerable: true,
      configurable: true
    },
    sourceEvent: {
      value: t,
      enumerable: true,
      configurable: true
    },
    target: {
      value: r,
      enumerable: true,
      configurable: true
    },
    selection: {
      value: n,
      enumerable: true,
      configurable: true
    },
    mode: {
      value: i,
      enumerable: true,
      configurable: true
    },
    _: {
      value: o
    }
  });
}
function tpe(e12) {
  e12.stopImmediatePropagation();
}
function Gw(e12) {
  e12.preventDefault(), e12.stopImmediatePropagation();
}
var TF = {
  name: "drag"
};
var zw = {
  name: "space"
};
var Sh = {
  name: "handle"
};
var wh = {
  name: "center"
};
var {
  abs: EF,
  max: Qn,
  min: Jn
} = Math;
function SF(e12) {
  return [+e12[0], +e12[1]];
}
function yP(e12) {
  return [SF(e12[0]), SF(e12[1])];
}
var sb = {
  name: "x",
  handles: ["w", "e"].map(ev),
  input: function(e12, t) {
    return e12 == null ? null : [[+e12[0], t[0][1]], [+e12[1], t[1][1]]];
  },
  output: function(e12) {
    return e12 && [e12[0][0], e12[1][0]];
  }
};
var lb = {
  name: "y",
  handles: ["n", "s"].map(ev),
  input: function(e12, t) {
    return e12 == null ? null : [[t[0][0], +e12[0]], [t[1][0], +e12[1]]];
  },
  output: function(e12) {
    return e12 && [e12[0][1], e12[1][1]];
  }
};
var rpe = {
  name: "xy",
  handles: ["n", "w", "e", "s", "nw", "ne", "sw", "se"].map(ev),
  input: function(e12) {
    return e12 == null ? null : yP(e12);
  },
  output: function(e12) {
    return e12;
  }
};
var ns = {
  overlay: "crosshair",
  selection: "move",
  n: "ns-resize",
  e: "ew-resize",
  s: "ns-resize",
  w: "ew-resize",
  nw: "nwse-resize",
  ne: "nesw-resize",
  se: "nwse-resize",
  sw: "nesw-resize"
};
var wF = {
  e: "w",
  w: "e",
  nw: "ne",
  ne: "nw",
  se: "sw",
  sw: "se"
};
var AF = {
  n: "s",
  s: "n",
  nw: "sw",
  ne: "se",
  se: "ne",
  sw: "nw"
};
var npe = {
  overlay: 1,
  selection: 1,
  n: null,
  e: 1,
  s: null,
  w: -1,
  nw: -1,
  ne: 1,
  se: 1,
  sw: -1
};
var ipe = {
  overlay: 1,
  selection: 1,
  n: -1,
  e: null,
  s: 1,
  w: null,
  nw: -1,
  ne: -1,
  se: 1,
  sw: 1
};
function ev(e12) {
  return {
    type: e12
  };
}
function ope(e12) {
  return !e12.ctrlKey && !e12.button;
}
function ape() {
  var e12 = this.ownerSVGElement || this;
  return e12.hasAttribute("viewBox") ? (e12 = e12.viewBox.baseVal, [[e12.x, e12.y], [e12.x + e12.width, e12.y + e12.height]]) : [[0, 0], [e12.width.baseVal.value, e12.height.baseVal.value]];
}
function spe() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function Vw(e12) {
  for (; !e12.__brush; )
    if (!(e12 = e12.parentNode))
      return;
  return e12.__brush;
}
function lpe(e12) {
  return e12[0][0] === e12[1][0] || e12[0][1] === e12[1][1];
}
function cpe(e12) {
  var t = e12.__brush;
  return t ? t.dim.output(t.selection) : null;
}
function T1() {
  return MR(sb);
}
function Xv() {
  return MR(lb);
}
function NR() {
  return MR(rpe);
}
function MR(e12) {
  var t = ape, r = ope, n = spe, i = true, o = np("start", "brush", "end"), a = 6, s;
  function l(g) {
    var v = g.property("__brush", m).selectAll(".overlay").data([ev("overlay")]);
    v.enter().append("rect").attr("class", "overlay").attr("pointer-events", "all").attr("cursor", ns.overlay).merge(v).each(function() {
      var y = Vw(this).extent;
      Wt(this).attr("x", y[0][0]).attr("y", y[0][1]).attr("width", y[1][0] - y[0][0]).attr("height", y[1][1] - y[0][1]);
    }), g.selectAll(".selection").data([ev("selection")]).enter().append("rect").attr("class", "selection").attr("cursor", ns.selection).attr("fill", "#777").attr("fill-opacity", 0.3).attr("stroke", "#fff").attr("shape-rendering", "crispEdges");
    var _ = g.selectAll(".handle").data(e12.handles, function(y) {
      return y.type;
    });
    _.exit().remove(), _.enter().append("rect").attr("class", function(y) {
      return "handle handle--" + y.type;
    }).attr("cursor", function(y) {
      return ns[y.type];
    }), g.each(u).attr("fill", "none").attr("pointer-events", "all").on("mousedown.brush", h).filter(n).on("touchstart.brush", h).on("touchmove.brush", d).on("touchend.brush touchcancel.brush", p).style("touch-action", "none").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  l.move = function(g, v) {
    g.tween ? g.on("start.brush", function(_) {
      c(this, arguments).beforestart().start(_);
    }).on("interrupt.brush end.brush", function(_) {
      c(this, arguments).end(_);
    }).tween("brush", function() {
      var _ = this, y = _.__brush, b = c(_, arguments), T = y.selection, E = e12.input(typeof v == "function" ? v.apply(this, arguments) : v, y.extent), P = qu(T, E);
      function A(I) {
        y.selection = I === 1 && E === null ? null : P(I), u.call(_), b.brush();
      }
      return T !== null && E !== null ? A : A(1);
    }) : g.each(function() {
      var _ = this, y = arguments, b = _.__brush, T = e12.input(typeof v == "function" ? v.apply(_, y) : v, b.extent), E = c(_, y).beforestart();
      vP(_), b.selection = T === null ? null : T, u.call(_), E.start().brush().end();
    });
  }, l.clear = function(g) {
    l.move(g, null);
  };
  function u() {
    var g = Wt(this), v = Vw(this).selection;
    v ? (g.selectAll(".selection").style("display", null).attr("x", v[0][0]).attr("y", v[0][1]).attr("width", v[1][0] - v[0][0]).attr("height", v[1][1] - v[0][1]), g.selectAll(".handle").style("display", null).attr("x", function(_) {
      return _.type[_.type.length - 1] === "e" ? v[1][0] - a / 2 : v[0][0] - a / 2;
    }).attr("y", function(_) {
      return _.type[0] === "s" ? v[1][1] - a / 2 : v[0][1] - a / 2;
    }).attr("width", function(_) {
      return _.type === "n" || _.type === "s" ? v[1][0] - v[0][0] + a : a;
    }).attr("height", function(_) {
      return _.type === "e" || _.type === "w" ? v[1][1] - v[0][1] + a : a;
    })) : g.selectAll(".selection,.handle").style("display", "none").attr("x", null).attr("y", null).attr("width", null).attr("height", null);
  }
  function c(g, v, _) {
    var y = g.__brush.emitter;
    return y && (!_ || !y.clean) ? y : new f(g, v, _);
  }
  function f(g, v, _) {
    this.that = g, this.args = v, this.state = g.__brush, this.active = 0, this.clean = _;
  }
  f.prototype = {
    beforestart: function() {
      return ++this.active === 1 && (this.state.emitter = this, this.starting = true), this;
    },
    start: function(g, v) {
      return this.starting ? (this.starting = false, this.emit("start", g, v)) : this.emit("brush", g), this;
    },
    brush: function(g, v) {
      return this.emit("brush", g, v), this;
    },
    end: function(g, v) {
      return --this.active === 0 && (delete this.state.emitter, this.emit("end", g, v)), this;
    },
    emit: function(g, v, _) {
      var y = Wt(this.that).datum();
      o.call(g, this.that, new epe(g, {
        sourceEvent: v,
        target: l,
        selection: e12.output(this.state.selection),
        mode: _,
        dispatch: o
      }), y);
    }
  };
  function h(g) {
    if (s && !g.touches || !r.apply(this, arguments))
      return;
    var v = this, _ = g.target.__data__.type, y = (i && g.metaKey ? _ = "overlay" : _) === "selection" ? TF : i && g.altKey ? wh : Sh, b = e12 === lb ? null : npe[_], T = e12 === sb ? null : ipe[_], E = Vw(v), P = E.extent, A = E.selection, I = P[0][0], x, S, N = P[0][1], B, w, R = P[1][0], F, $, K = P[1][1], se, J, me = 0, ae = 0, Y, Q = b && T && i && g.shiftKey, le, Se, Pe = Array.from(g.touches || [g], (Qe) => {
      const bt = Qe.identifier;
      return Qe = vr(Qe, v), Qe.point0 = Qe.slice(), Qe.identifier = bt, Qe;
    });
    if (_ === "overlay") {
      A && (Y = true);
      const Qe = [Pe[0], Pe[1] || Pe[0]];
      E.selection = A = [[x = e12 === lb ? I : Jn(Qe[0][0], Qe[1][0]), B = e12 === sb ? N : Jn(Qe[0][1], Qe[1][1])], [F = e12 === lb ? R : Qn(Qe[0][0], Qe[1][0]), se = e12 === sb ? K : Qn(Qe[0][1], Qe[1][1])]], Pe.length > 1 && Ge();
    } else
      x = A[0][0], B = A[0][1], F = A[1][0], se = A[1][1];
    S = x, w = B, $ = F, J = se;
    var Re = Wt(v).attr("pointer-events", "none"), we = Re.selectAll(".overlay").attr("cursor", ns[_]);
    vP(v);
    var Ne = c(v, arguments, true).beforestart();
    if (g.touches)
      Ne.moved = Ie, Ne.ended = je;
    else {
      var Me = Wt(g.view).on("mousemove.brush", Ie, true).on("mouseup.brush", je, true);
      i && Me.on("keydown.brush", ot, true).on("keyup.brush", at, true), v1(g.view);
    }
    u.call(v), Ne.start(g, y.name);
    function Ie(Qe) {
      for (const bt of Qe.changedTouches || [Qe])
        for (const Et of Pe)
          Et.identifier === bt.identifier && (Et.cur = vr(bt, v));
      if (Q && !le && !Se && Pe.length === 1) {
        const bt = Pe[0];
        EF(bt.cur[0] - bt[0]) > EF(bt.cur[1] - bt[1]) ? Se = true : le = true;
      }
      for (const bt of Pe)
        bt.cur && (bt[0] = bt.cur[0], bt[1] = bt.cur[1]);
      Y = true, Gw(Qe), Ge(Qe);
    }
    function Ge(Qe) {
      const bt = Pe[0], Et = bt.point0;
      var $t;
      switch (me = bt[0] - Et[0], ae = bt[1] - Et[1], y) {
        case zw:
        case TF: {
          b && (me = Qn(I - x, Jn(R - F, me)), S = x + me, $ = F + me), T && (ae = Qn(N - B, Jn(K - se, ae)), w = B + ae, J = se + ae);
          break;
        }
        case Sh: {
          Pe[1] ? (b && (S = Qn(I, Jn(R, Pe[0][0])), $ = Qn(I, Jn(R, Pe[1][0])), b = 1), T && (w = Qn(N, Jn(K, Pe[0][1])), J = Qn(N, Jn(K, Pe[1][1])), T = 1)) : (b < 0 ? (me = Qn(I - x, Jn(R - x, me)), S = x + me, $ = F) : b > 0 && (me = Qn(I - F, Jn(R - F, me)), S = x, $ = F + me), T < 0 ? (ae = Qn(N - B, Jn(K - B, ae)), w = B + ae, J = se) : T > 0 && (ae = Qn(N - se, Jn(K - se, ae)), w = B, J = se + ae));
          break;
        }
        case wh: {
          b && (S = Qn(I, Jn(R, x - me * b)), $ = Qn(I, Jn(R, F + me * b))), T && (w = Qn(N, Jn(K, B - ae * T)), J = Qn(N, Jn(K, se + ae * T)));
          break;
        }
      }
      $ < S && (b *= -1, $t = x, x = F, F = $t, $t = S, S = $, $ = $t, _ in wF && we.attr("cursor", ns[_ = wF[_]])), J < w && (T *= -1, $t = B, B = se, se = $t, $t = w, w = J, J = $t, _ in AF && we.attr("cursor", ns[_ = AF[_]])), E.selection && (A = E.selection), le && (S = A[0][0], $ = A[1][0]), Se && (w = A[0][1], J = A[1][1]), (A[0][0] !== S || A[0][1] !== w || A[1][0] !== $ || A[1][1] !== J) && (E.selection = [[S, w], [$, J]], u.call(v), Ne.brush(Qe, y.name));
    }
    function je(Qe) {
      if (tpe(Qe), Qe.touches) {
        if (Qe.touches.length)
          return;
        s && clearTimeout(s), s = setTimeout(function() {
          s = null;
        }, 500);
      } else
        y1(Qe.view, Y), Me.on("keydown.brush keyup.brush mousemove.brush mouseup.brush", null);
      Re.attr("pointer-events", "all"), we.attr("cursor", ns.overlay), E.selection && (A = E.selection), lpe(A) && (E.selection = null, u.call(v)), Ne.end(Qe, y.name);
    }
    function ot(Qe) {
      switch (Qe.keyCode) {
        case 16: {
          Q = b && T;
          break;
        }
        case 18: {
          y === Sh && (b && (F = $ - me * b, x = S + me * b), T && (se = J - ae * T, B = w + ae * T), y = wh, Ge());
          break;
        }
        case 32: {
          (y === Sh || y === wh) && (b < 0 ? F = $ - me : b > 0 && (x = S - me), T < 0 ? se = J - ae : T > 0 && (B = w - ae), y = zw, we.attr("cursor", ns.selection), Ge());
          break;
        }
        default:
          return;
      }
      Gw(Qe);
    }
    function at(Qe) {
      switch (Qe.keyCode) {
        case 16: {
          Q && (le = Se = Q = false, Ge());
          break;
        }
        case 18: {
          y === wh && (b < 0 ? F = $ : b > 0 && (x = S), T < 0 ? se = J : T > 0 && (B = w), y = Sh, Ge());
          break;
        }
        case 32: {
          y === zw && (Qe.altKey ? (b && (F = $ - me * b, x = S + me * b), T && (se = J - ae * T, B = w + ae * T), y = wh) : (b < 0 ? F = $ : b > 0 && (x = S), T < 0 ? se = J : T > 0 && (B = w), y = Sh), we.attr("cursor", ns[_]), Ge());
          break;
        }
        default:
          return;
      }
      Gw(Qe);
    }
  }
  function d(g) {
    c(this, arguments).moved(g);
  }
  function p(g) {
    c(this, arguments).ended(g);
  }
  function m() {
    var g = this.__brush || {
      selection: null
    };
    return g.extent = yP(t.apply(this, arguments)), g.dim = e12, g;
  }
  return l.extent = function(g) {
    return arguments.length ? (t = typeof g == "function" ? g : jw(yP(g)), l) : t;
  }, l.filter = function(g) {
    return arguments.length ? (r = typeof g == "function" ? g : jw(!!g), l) : r;
  }, l.touchable = function(g) {
    return arguments.length ? (n = typeof g == "function" ? g : jw(!!g), l) : n;
  }, l.handleSize = function(g) {
    return arguments.length ? (a = +g, l) : a;
  }, l.keyModifiers = function(g) {
    return arguments.length ? (i = !!g, l) : i;
  }, l.on = function() {
    var g = o.on.apply(o, arguments);
    return g === o ? l : g;
  }, l;
}
var upe = Object.freeze(Object.defineProperty({
  __proto__: null,
  brush: NR,
  brushSelection: cpe,
  brushX: T1,
  brushY: Xv
}, Symbol.toStringTag, { value: "Module" }));
function tv() {
  return tv = Object.assign ? Object.assign.bind() : function(e12) {
    for (var t = 1; t < arguments.length; t++) {
      var r = arguments[t];
      for (var n in r)
        Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
    }
    return e12;
  }, tv.apply(this, arguments);
}
function hpe(e12) {
  if (Array.isArray(e12))
    return e12;
}
function fpe(e12, t) {
  var r = e12 == null ? null : typeof Symbol < "u" && e12[Symbol.iterator] || e12["@@iterator"];
  if (r != null) {
    var n, i, o, a, s = [], l = true, u = false;
    try {
      if (o = (r = r.call(e12)).next, t === 0) {
        if (Object(r) !== r)
          return;
        l = false;
      } else
        for (; !(l = (n = o.call(r)).done) && (s.push(n.value), s.length !== t); l = true)
          ;
    } catch (c) {
      u = true, i = c;
    } finally {
      try {
        if (!l && r.return != null && (a = r.return(), Object(a) !== a))
          return;
      } finally {
        if (u)
          throw i;
      }
    }
    return s;
  }
}
function _P(e12, t) {
  (t == null || t > e12.length) && (t = e12.length);
  for (var r = 0, n = new Array(t); r < t; r++)
    n[r] = e12[r];
  return n;
}
function rV(e12, t) {
  if (e12) {
    if (typeof e12 == "string")
      return _P(e12, t);
    var r = Object.prototype.toString.call(e12).slice(8, -1);
    if (r === "Object" && e12.constructor && (r = e12.constructor.name), r === "Map" || r === "Set")
      return Array.from(e12);
    if (r === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))
      return _P(e12, t);
  }
}
function dpe() {
  throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function nV(e12, t) {
  return hpe(e12) || fpe(e12, t) || rV(e12, t) || dpe();
}
function fd(e12) {
  "@babel/helpers - typeof";
  return fd = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, fd(e12);
}
function ppe(e12, t) {
  if (fd(e12) !== "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (fd(n) !== "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function iV(e12) {
  var t = ppe(e12, "string");
  return fd(t) === "symbol" ? t : String(t);
}
function br(e12, t, r) {
  return t = iV(t), t in e12 ? Object.defineProperty(e12, t, {
    value: r,
    enumerable: true,
    configurable: true,
    writable: true
  }) : e12[t] = r, e12;
}
function Xw(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t] != null ? Object(arguments[t]) : {}, n = Object.keys(r);
    typeof Object.getOwnPropertySymbols == "function" && n.push.apply(n, Object.getOwnPropertySymbols(r).filter(function(i) {
      return Object.getOwnPropertyDescriptor(r, i).enumerable;
    })), n.forEach(function(i) {
      br(e12, i, r[i]);
    });
  }
  return e12;
}
function Wv(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function OF(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, iV(n.key), n);
  }
}
function Yv(e12, t, r) {
  return t && OF(e12.prototype, t), r && OF(e12, r), Object.defineProperty(e12, "prototype", {
    writable: false
  }), e12;
}
function Zt(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function LR(e12, t) {
  if (t && (fd(t) === "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Zt(e12);
}
function rv(e12) {
  return rv = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, rv(e12);
}
function bP(e12, t) {
  return bP = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, bP(e12, t);
}
function BR(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      writable: true,
      configurable: true
    }
  }), Object.defineProperty(e12, "prototype", {
    writable: false
  }), t && bP(e12, t);
}
var mpe = function(e12, t, r, n, i, o, a, s) {
  if (!e12) {
    var l;
    if (t === void 0)
      l = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
    else {
      var u = [r, n, i, o, a, s], c = 0;
      l = new Error(t.replace(/%s/g, function() {
        return u[c++];
      })), l.name = "Invariant Violation";
    }
    throw l.framesToPop = 1, l;
  }
};
var gpe = mpe;
var vu = Ui(gpe);
function vpe(e12) {
  if (Array.isArray(e12))
    return _P(e12);
}
function ype(e12) {
  if (typeof Symbol < "u" && e12[Symbol.iterator] != null || e12["@@iterator"] != null)
    return Array.from(e12);
}
function _pe() {
  throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function bpe(e12) {
  return vpe(e12) || ype(e12) || rV(e12) || _pe();
}
var Tpe = function() {
  function e12() {
    Wv(this, e12), br(this, "refs", {});
  }
  return Yv(e12, [{
    key: "add",
    value: function(r, n) {
      this.refs[r] || (this.refs[r] = []), this.refs[r].push(n);
    }
  }, {
    key: "remove",
    value: function(r, n) {
      var i = this.getIndex(r, n);
      i !== -1 && this.refs[r].splice(i, 1);
    }
  }, {
    key: "isActive",
    value: function() {
      return this.active;
    }
  }, {
    key: "getActive",
    value: function() {
      var r = this;
      return this.refs[this.active.collection].find(function(n) {
        var i = n.node;
        return i.sortableInfo.index == r.active.index;
      });
    }
  }, {
    key: "getIndex",
    value: function(r, n) {
      return this.refs[r].indexOf(n);
    }
  }, {
    key: "getOrderedRefs",
    value: function() {
      var r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.active.collection;
      return this.refs[r].sort(Epe);
    }
  }]), e12;
}();
function Epe(e12, t) {
  var r = e12.node.sortableInfo.index, n = t.node.sortableInfo.index;
  return r - n;
}
function Spe(e12, t, r) {
  return e12 = e12.slice(), e12.splice(r < 0 ? e12.length + r : r, 0, e12.splice(t, 1)[0]), e12;
}
function oV(e12, t) {
  return Object.keys(e12).reduce(function(r, n) {
    return t.indexOf(n) === -1 && (r[n] = e12[n]), r;
  }, {});
}
var Ah = {
  end: ["touchend", "touchcancel", "mouseup"],
  move: ["touchmove", "mousemove"],
  start: ["touchstart", "mousedown"]
};
var aV = function() {
  if (typeof window > "u" || typeof document > "u")
    return "";
  var e12 = window.getComputedStyle(document.documentElement, "") || ["-moz-hidden-iframe"], t = (Array.prototype.slice.call(e12).join("").match(/-(moz|webkit|ms)-/) || e12.OLink === "" && ["", "o"])[1];
  switch (t) {
    case "ms":
      return "ms";
    default:
      return t && t.length ? t[0].toUpperCase() + t.substr(1) : "";
  }
}();
function c_(e12, t) {
  Object.keys(t).forEach(function(r) {
    e12.style[r] = t[r];
  });
}
function u_(e12, t) {
  e12.style["".concat(aV, "Transform")] = t == null ? "" : "translate3d(".concat(t.x, "px,").concat(t.y, "px,0)");
}
function Ww(e12, t) {
  e12.style["".concat(aV, "TransitionDuration")] = t == null ? "" : "".concat(t, "ms");
}
function Tm(e12, t) {
  for (; e12; ) {
    if (t(e12))
      return e12;
    e12 = e12.parentNode;
  }
  return null;
}
function IF(e12, t, r) {
  return Math.max(e12, Math.min(r, t));
}
function df(e12) {
  return e12.substr(-2) === "px" ? parseFloat(e12) : 0;
}
function wpe(e12) {
  var t = window.getComputedStyle(e12);
  return {
    bottom: df(t.marginBottom),
    left: df(t.marginLeft),
    right: df(t.marginRight),
    top: df(t.marginTop)
  };
}
function FR(e12, t) {
  var r = t.displayName || t.name;
  return r ? "".concat(e12, "(").concat(r, ")") : e12;
}
function Yw(e12, t) {
  var r = e12.getBoundingClientRect();
  return {
    top: r.top + t.top,
    left: r.left + t.left
  };
}
function qp(e12) {
  return e12.touches && e12.touches.length ? {
    x: e12.touches[0].pageX,
    y: e12.touches[0].pageY
  } : e12.changedTouches && e12.changedTouches.length ? {
    x: e12.changedTouches[0].pageX,
    y: e12.changedTouches[0].pageY
  } : {
    x: e12.pageX,
    y: e12.pageY
  };
}
function Ape(e12) {
  return e12.touches && e12.touches.length || e12.changedTouches && e12.changedTouches.length;
}
function cb(e12, t) {
  var r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {
    left: 0,
    top: 0
  };
  if (e12) {
    var n = {
      left: r.left + e12.offsetLeft,
      top: r.top + e12.offsetTop
    };
    return e12.parentNode === t ? n : cb(e12.parentNode, t, n);
  }
}
function Ope(e12, t, r) {
  return e12 < r && e12 > t ? e12 - 1 : e12 > r && e12 < t ? e12 + 1 : e12;
}
function PF(e12) {
  var t = e12.lockOffset, r = e12.width, n = e12.height, i = t, o = t, a = "px";
  if (typeof t == "string") {
    var s = /^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);
    vu(s !== null, 'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s', t), i = parseFloat(t), o = parseFloat(t), a = s[1];
  }
  return vu(isFinite(i) && isFinite(o), "lockOffset value should be a finite. Given %s", t), a === "%" && (i = i * r / 100, o = o * n / 100), {
    x: i,
    y: o
  };
}
function Ipe(e12) {
  var t = e12.height, r = e12.width, n = e12.lockOffset, i = Array.isArray(n) ? n : [n, n];
  vu(i.length === 2, "lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s", n);
  var o = nV(i, 2), a = o[0], s = o[1];
  return [PF({
    height: t,
    lockOffset: a,
    width: r
  }), PF({
    height: t,
    lockOffset: s,
    width: r
  })];
}
function Ppe(e12) {
  var t = window.getComputedStyle(e12), r = /(auto|scroll)/, n = ["overflow", "overflowX", "overflowY"];
  return n.find(function(i) {
    return r.test(t[i]);
  });
}
function sV(e12) {
  return e12 instanceof HTMLElement ? Ppe(e12) ? e12 : sV(e12.parentNode) : null;
}
function Cpe(e12) {
  var t = window.getComputedStyle(e12);
  return t.display === "grid" ? {
    x: df(t.gridColumnGap),
    y: df(t.gridRowGap)
  } : {
    x: 0,
    y: 0
  };
}
var Ac = {
  TAB: 9,
  ESC: 27,
  SPACE: 32,
  LEFT: 37,
  UP: 38,
  RIGHT: 39,
  DOWN: 40
};
var Hc = {
  Anchor: "A",
  Button: "BUTTON",
  Canvas: "CANVAS",
  Input: "INPUT",
  Option: "OPTION",
  Textarea: "TEXTAREA",
  Select: "SELECT"
};
function xpe(e12) {
  var t = "input, textarea, select, canvas, [contenteditable]", r = e12.querySelectorAll(t), n = e12.cloneNode(true), i = bpe(n.querySelectorAll(t));
  return i.forEach(function(o, a) {
    if (o.type !== "file" && (o.value = r[a].value), o.type === "radio" && o.name && (o.name = "__sortableClone__".concat(o.name)), o.tagName === Hc.Canvas && r[a].width > 0 && r[a].height > 0) {
      var s = o.getContext("2d");
      s.drawImage(r[a], 0, 0);
    }
  }), n;
}
function TP(e12) {
  var t, r, n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
    withRef: false
  };
  return r = t = function(i) {
    BR(o, i);
    function o() {
      return Wv(this, o), LR(this, rv(o).apply(this, arguments));
    }
    return Yv(o, [{
      key: "componentDidMount",
      value: function() {
        var s = (0, import_react_dom.findDOMNode)(this);
        s.sortableHandle = true;
      }
    }, {
      key: "getWrappedInstance",
      value: function() {
        return vu(n.withRef, "To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"), this.refs.wrappedInstance;
      }
    }, {
      key: "render",
      value: function() {
        var s = n.withRef ? "wrappedInstance" : null;
        return (0, import_react.createElement)(e12, tv({
          ref: s
        }, this.props));
      }
    }]), o;
  }(import_react.Component), br(t, "displayName", FR("sortableHandle", e12)), r;
}
function CF(e12) {
  return e12.sortableHandle != null;
}
var kpe = function() {
  function e12(t, r) {
    Wv(this, e12), this.container = t, this.onScrollCallback = r;
  }
  return Yv(e12, [{
    key: "clear",
    value: function() {
      this.interval != null && (clearInterval(this.interval), this.interval = null);
    }
  }, {
    key: "update",
    value: function(r) {
      var n = this, i = r.translate, o = r.minTranslate, a = r.maxTranslate, s = r.width, l = r.height, u = {
        x: 0,
        y: 0
      }, c = {
        x: 1,
        y: 1
      }, f = {
        x: 10,
        y: 10
      }, h = this.container, d = h.scrollTop, p = h.scrollLeft, m = h.scrollHeight, g = h.scrollWidth, v = h.clientHeight, _ = h.clientWidth, y = d === 0, b = m - d - v === 0, T = p === 0, E = g - p - _ === 0;
      i.y >= a.y - l / 2 && !b ? (u.y = 1, c.y = f.y * Math.abs((a.y - l / 2 - i.y) / l)) : i.x >= a.x - s / 2 && !E ? (u.x = 1, c.x = f.x * Math.abs((a.x - s / 2 - i.x) / s)) : i.y <= o.y + l / 2 && !y ? (u.y = -1, c.y = f.y * Math.abs((i.y - l / 2 - o.y) / l)) : i.x <= o.x + s / 2 && !T && (u.x = -1, c.x = f.x * Math.abs((i.x - s / 2 - o.x) / s)), this.interval && (this.clear(), this.isAutoScrolling = false), (u.x !== 0 || u.y !== 0) && (this.interval = setInterval(function() {
        n.isAutoScrolling = true;
        var P = {
          left: c.x * u.x,
          top: c.y * u.y
        };
        n.container.scrollTop += P.top, n.container.scrollLeft += P.left, n.onScrollCallback(P);
      }, 5));
    }
  }]), e12;
}();
function Dpe(e12) {
  var t = e12.node;
  return {
    height: t.offsetHeight,
    width: t.offsetWidth
  };
}
function Rpe(e12) {
  var t = [Hc.Input, Hc.Textarea, Hc.Select, Hc.Option, Hc.Button];
  return !!(t.indexOf(e12.target.tagName) !== -1 || Tm(e12.target, function(r) {
    return r.contentEditable === "true";
  }));
}
var lV = {
  axis: L.oneOf(["x", "y", "xy"]),
  contentWindow: L.any,
  disableAutoscroll: L.bool,
  distance: L.number,
  getContainer: L.func,
  getHelperDimensions: L.func,
  helperClass: L.string,
  helperContainer: L.oneOfType([L.func, typeof HTMLElement > "u" ? L.any : L.instanceOf(HTMLElement)]),
  hideSortableGhost: L.bool,
  keyboardSortingTransitionDuration: L.number,
  lockAxis: L.string,
  lockOffset: L.oneOfType([L.number, L.string, L.arrayOf(L.oneOfType([L.number, L.string]))]),
  lockToContainerEdges: L.bool,
  onSortEnd: L.func,
  onSortMove: L.func,
  onSortOver: L.func,
  onSortStart: L.func,
  pressDelay: L.number,
  pressThreshold: L.number,
  keyCodes: L.shape({
    lift: L.arrayOf(L.number),
    drop: L.arrayOf(L.number),
    cancel: L.arrayOf(L.number),
    up: L.arrayOf(L.number),
    down: L.arrayOf(L.number)
  }),
  shouldCancelStart: L.func,
  transitionDuration: L.number,
  updateBeforeSortStart: L.func,
  useDragHandle: L.bool,
  useWindowAsScrollContainer: L.bool
};
var cV = {
  lift: [Ac.SPACE],
  drop: [Ac.SPACE],
  cancel: [Ac.ESC],
  up: [Ac.UP, Ac.LEFT],
  down: [Ac.DOWN, Ac.RIGHT]
};
var Npe = {
  axis: "y",
  disableAutoscroll: false,
  distance: 0,
  getHelperDimensions: Dpe,
  hideSortableGhost: true,
  lockOffset: "50%",
  lockToContainerEdges: false,
  pressDelay: 0,
  pressThreshold: 5,
  keyCodes: cV,
  shouldCancelStart: Rpe,
  transitionDuration: 300,
  useWindowAsScrollContainer: false
};
var Mpe = Object.keys(lV);
function Lpe(e12) {
  vu(!(e12.distance && e12.pressDelay), "Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.");
}
function Bpe(e12, t) {
  try {
    var r = e12();
  } catch (n) {
    return t(true, n);
  }
  return r && r.then ? r.then(t.bind(null, false), t.bind(null, true)) : t(false, value);
}
function Fpe(e12) {
  var t, r, n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
    withRef: false
  };
  return r = t = function(i) {
    BR(o, i);
    function o(a) {
      var s;
      return Wv(this, o), s = LR(this, rv(o).call(this, a)), br(Zt(Zt(s)), "state", {}), br(Zt(Zt(s)), "handleStart", function(l) {
        var u = s.props, c = u.distance, f = u.shouldCancelStart;
        if (!(l.button === 2 || f(l))) {
          s.touched = true, s.position = qp(l);
          var h = Tm(l.target, function(_) {
            return _.sortableInfo != null;
          });
          if (h && h.sortableInfo && s.nodeIsChild(h) && !s.state.sorting) {
            var d = s.props.useDragHandle, p = h.sortableInfo, m = p.index, g = p.collection, v = p.disabled;
            if (v || d && !Tm(l.target, CF))
              return;
            s.manager.active = {
              collection: g,
              index: m
            }, !Ape(l) && l.target.tagName === Hc.Anchor && l.preventDefault(), c || (s.props.pressDelay === 0 ? s.handlePress(l) : s.pressTimer = setTimeout(function() {
              return s.handlePress(l);
            }, s.props.pressDelay));
          }
        }
      }), br(Zt(Zt(s)), "nodeIsChild", function(l) {
        return l.sortableInfo.manager === s.manager;
      }), br(Zt(Zt(s)), "handleMove", function(l) {
        var u = s.props, c = u.distance, f = u.pressThreshold;
        if (!s.state.sorting && s.touched && !s._awaitingUpdateBeforeSortStart) {
          var h = qp(l), d = {
            x: s.position.x - h.x,
            y: s.position.y - h.y
          }, p = Math.abs(d.x) + Math.abs(d.y);
          s.delta = d, !c && (!f || p >= f) ? (clearTimeout(s.cancelTimer), s.cancelTimer = setTimeout(s.cancel, 0)) : c && p >= c && s.manager.isActive() && s.handlePress(l);
        }
      }), br(Zt(Zt(s)), "handleEnd", function() {
        s.touched = false, s.cancel();
      }), br(Zt(Zt(s)), "cancel", function() {
        var l = s.props.distance, u = s.state.sorting;
        u || (l || clearTimeout(s.pressTimer), s.manager.active = null);
      }), br(Zt(Zt(s)), "handlePress", function(l) {
        try {
          var u = s.manager.getActive(), c = function() {
            if (u) {
              var f = function() {
                var I = b.sortableInfo.index, x = wpe(b), S = Cpe(s.container), N = s.scrollContainer.getBoundingClientRect(), B = p({
                  index: I,
                  node: b,
                  collection: T
                });
                if (s.node = b, s.margin = x, s.gridGap = S, s.width = B.width, s.height = B.height, s.marginOffset = {
                  x: s.margin.left + s.margin.right + s.gridGap.x,
                  y: Math.max(s.margin.top, s.margin.bottom, s.gridGap.y)
                }, s.boundingClientRect = b.getBoundingClientRect(), s.containerBoundingRect = N, s.index = I, s.newIndex = I, s.axis = {
                  x: d.indexOf("x") >= 0,
                  y: d.indexOf("y") >= 0
                }, s.offsetEdge = cb(b, s.container), E ? s.initialOffset = qp(Xw({}, l, {
                  pageX: s.boundingClientRect.left,
                  pageY: s.boundingClientRect.top
                })) : s.initialOffset = qp(l), s.initialScroll = {
                  left: s.scrollContainer.scrollLeft,
                  top: s.scrollContainer.scrollTop
                }, s.initialWindowScroll = {
                  left: window.pageXOffset,
                  top: window.pageYOffset
                }, s.helper = s.helperContainer.appendChild(xpe(b)), c_(s.helper, {
                  boxSizing: "border-box",
                  height: "".concat(s.height, "px"),
                  left: "".concat(s.boundingClientRect.left - x.left, "px"),
                  pointerEvents: "none",
                  position: "fixed",
                  top: "".concat(s.boundingClientRect.top - x.top, "px"),
                  width: "".concat(s.width, "px")
                }), E && s.helper.focus(), g && (s.sortableGhost = b, c_(b, {
                  opacity: 0,
                  visibility: "hidden"
                })), s.minTranslate = {}, s.maxTranslate = {}, E) {
                  var w = y ? {
                    top: 0,
                    left: 0,
                    width: s.contentWindow.innerWidth,
                    height: s.contentWindow.innerHeight
                  } : s.containerBoundingRect, R = w.top, F = w.left, $ = w.width, K = w.height, se = R + K, J = F + $;
                  s.axis.x && (s.minTranslate.x = F - s.boundingClientRect.left, s.maxTranslate.x = J - (s.boundingClientRect.left + s.width)), s.axis.y && (s.minTranslate.y = R - s.boundingClientRect.top, s.maxTranslate.y = se - (s.boundingClientRect.top + s.height));
                } else
                  s.axis.x && (s.minTranslate.x = (y ? 0 : N.left) - s.boundingClientRect.left - s.width / 2, s.maxTranslate.x = (y ? s.contentWindow.innerWidth : N.left + N.width) - s.boundingClientRect.left - s.width / 2), s.axis.y && (s.minTranslate.y = (y ? 0 : N.top) - s.boundingClientRect.top - s.height / 2, s.maxTranslate.y = (y ? s.contentWindow.innerHeight : N.top + N.height) - s.boundingClientRect.top - s.height / 2);
                m && m.split(" ").forEach(function(me) {
                  return s.helper.classList.add(me);
                }), s.listenerNode = l.touches ? b : s.contentWindow, E ? (s.listenerNode.addEventListener("wheel", s.handleKeyEnd, true), s.listenerNode.addEventListener("mousedown", s.handleKeyEnd, true), s.listenerNode.addEventListener("keydown", s.handleKeyDown)) : (Ah.move.forEach(function(me) {
                  return s.listenerNode.addEventListener(me, s.handleSortMove, false);
                }), Ah.end.forEach(function(me) {
                  return s.listenerNode.addEventListener(me, s.handleSortEnd, false);
                })), s.setState({
                  sorting: true,
                  sortingIndex: I
                }), _ && _({
                  node: b,
                  index: I,
                  collection: T,
                  isKeySorting: E,
                  nodes: s.manager.getOrderedRefs(),
                  helper: s.helper
                }, l), E && s.keyMove(0);
              }, h = s.props, d = h.axis, p = h.getHelperDimensions, m = h.helperClass, g = h.hideSortableGhost, v = h.updateBeforeSortStart, _ = h.onSortStart, y = h.useWindowAsScrollContainer, b = u.node, T = u.collection, E = s.manager.isKeySorting, P = function() {
                if (typeof v == "function") {
                  s._awaitingUpdateBeforeSortStart = true;
                  var A = Bpe(function() {
                    var I = b.sortableInfo.index;
                    return Promise.resolve(v({
                      collection: T,
                      index: I,
                      node: b,
                      isKeySorting: E
                    }, l)).then(function() {
                    });
                  }, function(I, x) {
                    if (s._awaitingUpdateBeforeSortStart = false, I)
                      throw x;
                    return x;
                  });
                  if (A && A.then)
                    return A.then(function() {
                    });
                }
              }();
              return P && P.then ? P.then(f) : f(P);
            }
          }();
          return Promise.resolve(c && c.then ? c.then(function() {
          }) : void 0);
        } catch (f) {
          return Promise.reject(f);
        }
      }), br(Zt(Zt(s)), "handleSortMove", function(l) {
        var u = s.props.onSortMove;
        typeof l.preventDefault == "function" && l.preventDefault(), s.updateHelperPosition(l), s.animateNodes(), s.autoscroll(), u && u(l);
      }), br(Zt(Zt(s)), "handleSortEnd", function(l) {
        var u = s.props, c = u.hideSortableGhost, f = u.onSortEnd, h = s.manager, d = h.active.collection, p = h.isKeySorting, m = s.manager.getOrderedRefs();
        s.listenerNode && (p ? (s.listenerNode.removeEventListener("wheel", s.handleKeyEnd, true), s.listenerNode.removeEventListener("mousedown", s.handleKeyEnd, true), s.listenerNode.removeEventListener("keydown", s.handleKeyDown)) : (Ah.move.forEach(function(b) {
          return s.listenerNode.removeEventListener(b, s.handleSortMove);
        }), Ah.end.forEach(function(b) {
          return s.listenerNode.removeEventListener(b, s.handleSortEnd);
        }))), s.helper.parentNode.removeChild(s.helper), c && s.sortableGhost && c_(s.sortableGhost, {
          opacity: "",
          visibility: ""
        });
        for (var g = 0, v = m.length; g < v; g++) {
          var _ = m[g], y = _.node;
          _.edgeOffset = null, _.boundingClientRect = null, u_(y, null), Ww(y, null), _.translate = null;
        }
        s.autoScroller.clear(), s.manager.active = null, s.manager.isKeySorting = false, s.setState({
          sorting: false,
          sortingIndex: null
        }), typeof f == "function" && f({
          collection: d,
          newIndex: s.newIndex,
          oldIndex: s.index,
          isKeySorting: p,
          nodes: m
        }, l), s.touched = false;
      }), br(Zt(Zt(s)), "autoscroll", function() {
        var l = s.props.disableAutoscroll, u = s.manager.isKeySorting;
        if (l) {
          s.autoScroller.clear();
          return;
        }
        if (u) {
          var c = Xw({}, s.translate), f = 0, h = 0;
          s.axis.x && (c.x = Math.min(s.maxTranslate.x, Math.max(s.minTranslate.x, s.translate.x)), f = s.translate.x - c.x), s.axis.y && (c.y = Math.min(s.maxTranslate.y, Math.max(s.minTranslate.y, s.translate.y)), h = s.translate.y - c.y), s.translate = c, u_(s.helper, s.translate), s.scrollContainer.scrollLeft += f, s.scrollContainer.scrollTop += h;
          return;
        }
        s.autoScroller.update({
          height: s.height,
          maxTranslate: s.maxTranslate,
          minTranslate: s.minTranslate,
          translate: s.translate,
          width: s.width
        });
      }), br(Zt(Zt(s)), "onAutoScroll", function(l) {
        s.translate.x += l.left, s.translate.y += l.top, s.animateNodes();
      }), br(Zt(Zt(s)), "handleKeyDown", function(l) {
        var u = l.keyCode, c = s.props, f = c.shouldCancelStart, h = c.keyCodes, d = h === void 0 ? {} : h, p = Xw({}, cV, d);
        s.manager.active && !s.manager.isKeySorting || !s.manager.active && (!p.lift.includes(u) || f(l) || !s.isValidSortingTarget(l)) || (l.stopPropagation(), l.preventDefault(), p.lift.includes(u) && !s.manager.active ? s.keyLift(l) : p.drop.includes(u) && s.manager.active ? s.keyDrop(l) : p.cancel.includes(u) ? (s.newIndex = s.manager.active.index, s.keyDrop(l)) : p.up.includes(u) ? s.keyMove(-1) : p.down.includes(u) && s.keyMove(1));
      }), br(Zt(Zt(s)), "keyLift", function(l) {
        var u = l.target, c = Tm(u, function(p) {
          return p.sortableInfo != null;
        }), f = c.sortableInfo, h = f.index, d = f.collection;
        s.initialFocusedNode = u, s.manager.isKeySorting = true, s.manager.active = {
          index: h,
          collection: d
        }, s.handlePress(l);
      }), br(Zt(Zt(s)), "keyMove", function(l) {
        var u = s.manager.getOrderedRefs(), c = u[u.length - 1].node.sortableInfo.index, f = s.newIndex + l, h = s.newIndex;
        if (!(f < 0 || f > c)) {
          s.prevIndex = h, s.newIndex = f;
          var d = Ope(s.newIndex, s.prevIndex, s.index), p = u.find(function(E) {
            var P = E.node;
            return P.sortableInfo.index === d;
          }), m = p.node, g = s.containerScrollDelta, v = p.boundingClientRect || Yw(m, g), _ = p.translate || {
            x: 0,
            y: 0
          }, y = {
            top: v.top + _.y - g.top,
            left: v.left + _.x - g.left
          }, b = h < f, T = {
            x: b && s.axis.x ? m.offsetWidth - s.width : 0,
            y: b && s.axis.y ? m.offsetHeight - s.height : 0
          };
          s.handleSortMove({
            pageX: y.left + T.x,
            pageY: y.top + T.y,
            ignoreTransition: l === 0
          });
        }
      }), br(Zt(Zt(s)), "keyDrop", function(l) {
        s.handleSortEnd(l), s.initialFocusedNode && s.initialFocusedNode.focus();
      }), br(Zt(Zt(s)), "handleKeyEnd", function(l) {
        s.manager.active && s.keyDrop(l);
      }), br(Zt(Zt(s)), "isValidSortingTarget", function(l) {
        var u = s.props.useDragHandle, c = l.target, f = Tm(c, function(h) {
          return h.sortableInfo != null;
        });
        return f && f.sortableInfo && !f.sortableInfo.disabled && (u ? CF(c) : c.sortableInfo);
      }), Lpe(a), s.manager = new Tpe(), s.events = {
        end: s.handleEnd,
        move: s.handleMove,
        start: s.handleStart
      }, s;
    }
    return Yv(o, [{
      key: "getChildContext",
      value: function() {
        return {
          manager: this.manager
        };
      }
    }, {
      key: "componentDidMount",
      value: function() {
        var s = this, l = this.props.useWindowAsScrollContainer, u = this.getContainer();
        Promise.resolve(u).then(function(c) {
          s.container = c, s.document = s.container.ownerDocument || document;
          var f = s.props.contentWindow || s.document.defaultView || window;
          s.contentWindow = typeof f == "function" ? f() : f, s.scrollContainer = l ? s.document.scrollingElement || s.document.documentElement : sV(s.container) || s.container, s.autoScroller = new kpe(s.scrollContainer, s.onAutoScroll), Object.keys(s.events).forEach(function(h) {
            return Ah[h].forEach(function(d) {
              return s.container.addEventListener(d, s.events[h], false);
            });
          }), s.container.addEventListener("keydown", s.handleKeyDown);
        });
      }
    }, {
      key: "componentWillUnmount",
      value: function() {
        var s = this;
        this.helper && this.helper.parentNode && this.helper.parentNode.removeChild(this.helper), this.container && (Object.keys(this.events).forEach(function(l) {
          return Ah[l].forEach(function(u) {
            return s.container.removeEventListener(u, s.events[l]);
          });
        }), this.container.removeEventListener("keydown", this.handleKeyDown));
      }
    }, {
      key: "updateHelperPosition",
      value: function(s) {
        var l = this.props, u = l.lockAxis, c = l.lockOffset, f = l.lockToContainerEdges, h = l.transitionDuration, d = l.keyboardSortingTransitionDuration, p = d === void 0 ? h : d, m = this.manager.isKeySorting, g = s.ignoreTransition, v = qp(s), _ = {
          x: v.x - this.initialOffset.x,
          y: v.y - this.initialOffset.y
        };
        if (_.y -= window.pageYOffset - this.initialWindowScroll.top, _.x -= window.pageXOffset - this.initialWindowScroll.left, this.translate = _, f) {
          var y = Ipe({
            height: this.height,
            lockOffset: c,
            width: this.width
          }), b = nV(y, 2), T = b[0], E = b[1], P = {
            x: this.width / 2 - T.x,
            y: this.height / 2 - T.y
          }, A = {
            x: this.width / 2 - E.x,
            y: this.height / 2 - E.y
          };
          _.x = IF(this.minTranslate.x + P.x, this.maxTranslate.x - A.x, _.x), _.y = IF(this.minTranslate.y + P.y, this.maxTranslate.y - A.y, _.y);
        }
        u === "x" ? _.y = 0 : u === "y" && (_.x = 0), m && p && !g && Ww(this.helper, p), u_(this.helper, _);
      }
    }, {
      key: "animateNodes",
      value: function() {
        var s = this.props, l = s.transitionDuration, u = s.hideSortableGhost, c = s.onSortOver, f = this.containerScrollDelta, h = this.windowScrollDelta, d = this.manager.getOrderedRefs(), p = {
          left: this.offsetEdge.left + this.translate.x + f.left,
          top: this.offsetEdge.top + this.translate.y + f.top
        }, m = this.manager.isKeySorting, g = this.newIndex;
        this.newIndex = null;
        for (var v = 0, _ = d.length; v < _; v++) {
          var y = d[v].node, b = y.sortableInfo.index, T = y.offsetWidth, E = y.offsetHeight, P = {
            height: this.height > E ? E / 2 : this.height / 2,
            width: this.width > T ? T / 2 : this.width / 2
          }, A = m && b > this.index && b <= g, I = m && b < this.index && b >= g, x = {
            x: 0,
            y: 0
          }, S = d[v].edgeOffset;
          S || (S = cb(y, this.container), d[v].edgeOffset = S, m && (d[v].boundingClientRect = Yw(y, f)));
          var N = v < d.length - 1 && d[v + 1], B = v > 0 && d[v - 1];
          if (N && !N.edgeOffset && (N.edgeOffset = cb(N.node, this.container), m && (N.boundingClientRect = Yw(N.node, f))), b === this.index) {
            u && (this.sortableGhost = y, c_(y, {
              opacity: 0,
              visibility: "hidden"
            }));
            continue;
          }
          l && Ww(y, l), this.axis.x ? this.axis.y ? I || b < this.index && (p.left + h.left - P.width <= S.left && p.top + h.top <= S.top + P.height || p.top + h.top + P.height <= S.top) ? (x.x = this.width + this.marginOffset.x, S.left + x.x > this.containerBoundingRect.width - P.width && N && (x.x = N.edgeOffset.left - S.left, x.y = N.edgeOffset.top - S.top), this.newIndex === null && (this.newIndex = b)) : (A || b > this.index && (p.left + h.left + P.width >= S.left && p.top + h.top + P.height >= S.top || p.top + h.top + P.height >= S.top + E)) && (x.x = -(this.width + this.marginOffset.x), S.left + x.x < this.containerBoundingRect.left + P.width && B && (x.x = B.edgeOffset.left - S.left, x.y = B.edgeOffset.top - S.top), this.newIndex = b) : A || b > this.index && p.left + h.left + P.width >= S.left ? (x.x = -(this.width + this.marginOffset.x), this.newIndex = b) : (I || b < this.index && p.left + h.left <= S.left + P.width) && (x.x = this.width + this.marginOffset.x, this.newIndex == null && (this.newIndex = b)) : this.axis.y && (A || b > this.index && p.top + h.top + P.height >= S.top ? (x.y = -(this.height + this.marginOffset.y), this.newIndex = b) : (I || b < this.index && p.top + h.top <= S.top + P.height) && (x.y = this.height + this.marginOffset.y, this.newIndex == null && (this.newIndex = b))), u_(y, x), d[v].translate = x;
        }
        this.newIndex == null && (this.newIndex = this.index), m && (this.newIndex = g);
        var w = m ? this.prevIndex : g;
        c && this.newIndex !== w && c({
          collection: this.manager.active.collection,
          index: this.index,
          newIndex: this.newIndex,
          oldIndex: w,
          isKeySorting: m,
          nodes: d,
          helper: this.helper
        });
      }
    }, {
      key: "getWrappedInstance",
      value: function() {
        return vu(n.withRef, "To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"), this.refs.wrappedInstance;
      }
    }, {
      key: "getContainer",
      value: function() {
        var s = this.props.getContainer;
        return typeof s != "function" ? (0, import_react_dom.findDOMNode)(this) : s(n.withRef ? this.getWrappedInstance() : void 0);
      }
    }, {
      key: "render",
      value: function() {
        var s = n.withRef ? "wrappedInstance" : null;
        return (0, import_react.createElement)(e12, tv({
          ref: s
        }, oV(this.props, Mpe)));
      }
    }, {
      key: "helperContainer",
      get: function() {
        var s = this.props.helperContainer;
        return typeof s == "function" ? s() : this.props.helperContainer || this.document.body;
      }
    }, {
      key: "containerScrollDelta",
      get: function() {
        var s = this.props.useWindowAsScrollContainer;
        return s ? {
          left: 0,
          top: 0
        } : {
          left: this.scrollContainer.scrollLeft - this.initialScroll.left,
          top: this.scrollContainer.scrollTop - this.initialScroll.top
        };
      }
    }, {
      key: "windowScrollDelta",
      get: function() {
        return {
          left: this.contentWindow.pageXOffset - this.initialWindowScroll.left,
          top: this.contentWindow.pageYOffset - this.initialWindowScroll.top
        };
      }
    }]), o;
  }(import_react.Component), br(t, "displayName", FR("sortableList", e12)), br(t, "defaultProps", Npe), br(t, "propTypes", lV), br(t, "childContextTypes", {
    manager: L.object.isRequired
  }), r;
}
var uV = {
  index: L.number.isRequired,
  collection: L.oneOfType([L.number, L.string]),
  disabled: L.bool
};
var $pe = Object.keys(uV);
function hV(e12) {
  var t, r, n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
    withRef: false
  };
  return r = t = function(i) {
    BR(o, i);
    function o() {
      return Wv(this, o), LR(this, rv(o).apply(this, arguments));
    }
    return Yv(o, [{
      key: "componentDidMount",
      value: function() {
        this.register();
      }
    }, {
      key: "componentDidUpdate",
      value: function(s) {
        this.node && (s.index !== this.props.index && (this.node.sortableInfo.index = this.props.index), s.disabled !== this.props.disabled && (this.node.sortableInfo.disabled = this.props.disabled)), s.collection !== this.props.collection && (this.unregister(s.collection), this.register());
      }
    }, {
      key: "componentWillUnmount",
      value: function() {
        this.unregister();
      }
    }, {
      key: "register",
      value: function() {
        var s = this.props, l = s.collection, u = s.disabled, c = s.index, f = (0, import_react_dom.findDOMNode)(this);
        f.sortableInfo = {
          collection: l,
          disabled: u,
          index: c,
          manager: this.context.manager
        }, this.node = f, this.ref = {
          node: f
        }, this.context.manager.add(l, this.ref);
      }
    }, {
      key: "unregister",
      value: function() {
        var s = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.props.collection;
        this.context.manager.remove(s, this.ref);
      }
    }, {
      key: "getWrappedInstance",
      value: function() {
        return vu(n.withRef, "To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"), this.refs.wrappedInstance;
      }
    }, {
      key: "render",
      value: function() {
        var s = n.withRef ? "wrappedInstance" : null;
        return (0, import_react.createElement)(e12, tv({
          ref: s
        }, oV(this.props, $pe)));
      }
    }]), o;
  }(import_react.Component), br(t, "displayName", FR("sortableElement", e12)), br(t, "contextTypes", {
    manager: L.object.isRequired
  }), br(t, "propTypes", uV), br(t, "defaultProps", {
    collection: 0
  }), r;
}
var fV = Jd((e12) => e12.pos).left;
var pn = (e12, t) => {
  if (!t || !t.cumPositions || !t.cumPositions.length)
    return null;
  let r = fV(t.cumPositions, e12);
  const n = t.cumPositions[t.cumPositions.length - 1].chr, i = t.chromLengths[n];
  r > 0 && (r -= 1);
  let o = Math.floor(e12 - t.cumPositions[r].pos), a = 0;
  return o < 0 && (a = o - 1, o = 1), r === t.cumPositions.length - 1 && o > i && (a = o - i, o = i), [t.cumPositions[r].chr, o, a, r];
};
var dV = (e12, t) => (r) => r % e12 * t + Math.floor(r / e12);
var Hpe = (e12) => e12;
var pV = (e12, t, r = Hpe) => e12.map((n, i) => n + t[r(i)]);
var Upe = "http://www.w3.org/2000/svg";
var P0 = (e12, t) => {
  if (e12.namespaceURI === Upe) {
    const r = e12.getAttribute("class");
    return !!r && !!r.match(new RegExp(`(\\s|^)${t}(\\s|$)`));
  }
  return e12.classList ? e12.classList.contains(t) : !!e12.className.match(new RegExp(`(\\s|^)${t}(\\s|$)`));
};
var jpe = "http://www.w3.org/2000/svg";
var Gpe = (e12, t) => {
  if (e12.namespaceURI === jpe) {
    if (!P0(e12, t)) {
      const r = e12.getAttribute("class") || "";
      e12.setAttribute("class", `${r} ${t}`);
    }
  } else
    e12.classList ? e12.classList.add(t) : P0(e12, t) || (e12.className += ` ${t}`);
};
var zpe = (e12, t, r) => {
  const n = document.createElement("canvas");
  return new Promise((i, o) => {
    const a = new window.Image();
    a.onload = () => {
      n.width = t || a.width, n.height = r || a.height;
      const s = n.getContext("2d");
      if (!s) {
        o(new Error("Could not get canvas context"));
        return;
      }
      s.drawImage(a, 0, 0), i(n);
    }, a.onerror = () => {
      o(new Error("Could not convert base64 to canvas"));
    }, a.src = `data:image/png;base64,${e12}`;
  });
};
var C0 = (e12, t, r) => r.chrPositions[e12].pos + t;
var mV = (e12) => {
  if (!(e12 instanceof Event))
    throw new Error("Event must be an instance of Event");
  const t = new e12.constructor(e12.type, e12);
  return t.sourceUid = e12.sourceUid, t.forwarded = e12.forwarded, t;
};
var Zl = (e12, t = false) => {
  const r = e12.map((a, s) => s * (255 / (e12.length - 1))), n = It().domain(r).range(e12), o = yi(t ? 255 : 254, -1, -1).map(n).map((a) => {
    const s = od(a);
    return [s.r, s.g, s.b, s.opacity * 255];
  });
  return o.length < 256 && o.push([255, 255, 255, 0]), o;
};
var Em = 0;
var Sm = 5;
var gV = 10;
var vV = 10;
var yV = 300;
var x0 = "move";
var To = "select";
var EP = 100;
var k0 = 10;
var _V = 110;
var wm = 3e3;
var Am = "locationListenerPrefix";
var bV = 1e3;
var SP = "http://higlass.io/api/v1";
var TV = 400;
var EV = 300;
var wP = (
  /** @type {const} */
  ["top", "left", "right", "bottom", "center", "whole", "gallery"]
);
var SV = 20;
var wV = 20;
var D0 = Symbol("Light theme");
var wr = Symbol("Dark theme");
var Vpe = D0;
var Ue = {
  PIXI: P8
};
var po = {
  "multitrack-header": "_multitrack-header_1yz7l_1",
  "multitrack-header-focus": "_multitrack-header-focus_1yz7l_2",
  "multitrack-header-squeazed": "_multitrack-header-squeazed_1yz7l_3",
  "multitrack-header-dark": "_multitrack-header-dark_1yz7l_20",
  "multitrack-header-id": "_multitrack-header-id_1yz7l_30",
  "multitrack-header-left": "_multitrack-header-left_1yz7l_39",
  "multitrack-header-grabber": "_multitrack-header-grabber_1yz7l_44",
  "multitrack-header-grabber-squeazed": "_multitrack-header-grabber-squeazed_1yz7l_45",
  "multitrack-header-search": "_multitrack-header-search_1yz7l_80",
  "multitrack-header-nav-list": "_multitrack-header-nav-list_1yz7l_102",
  "multitrack-header-icon": "_multitrack-header-icon_1yz7l_107",
  "multitrack-header-icon-squeazed": "_multitrack-header-icon-squeazed_1yz7l_108",
  "mouse-tool-selection": "_mouse-tool-selection_1yz7l_136"
};
var Xpe = {
  id: "cog",
  paths: ["M466.895 305.125c-26.863-46.527-10.708-106.152 36.076-133.244l-50.313-87.146c-14.375 8.427-31.088 13.259-48.923 13.259-53.768 0-97.354-43.873-97.354-97.995h-100.629c0.133 16.705-4.037 33.641-12.979 49.126-26.862 46.528-86.578 62.351-133.431 35.379l-50.312 87.146c14.485 8.236 27.025 20.294 35.943 35.739 26.819 46.454 10.756 105.96-35.854 133.112l50.313 87.146c14.325-8.348 30.958-13.127 48.7-13.127 53.598 0 97.072 43.596 97.35 97.479h100.627c-0.043-16.537 4.136-33.285 12.983-48.609 26.818-46.453 86.388-62.297 133.207-35.506l50.313-87.145c-14.39-8.233-26.846-20.249-35.717-35.614zM256 359.666c-57.254 0-103.668-46.412-103.668-103.667 0-57.254 46.413-103.667 103.668-103.667s103.666 46.413 103.666 103.667c-0.001 57.255-46.412 103.667-103.666 103.667z"],
  viewBox: "0 0 512 512"
};
var Wpe = {
  id: "cross",
  paths: ["M507.331 411.33c-0.002-0.002-0.004-0.004-0.006-0.005l-155.322-155.325 155.322-155.325c0.002-0.002 0.004-0.003 0.006-0.005 1.672-1.673 2.881-3.627 3.656-5.708 2.123-5.688 0.912-12.341-3.662-16.915l-73.373-73.373c-4.574-4.573-11.225-5.783-16.914-3.66-2.080 0.775-4.035 1.984-5.709 3.655 0 0.002-0.002 0.003-0.004 0.005l-155.324 155.326-155.324-155.325c-0.002-0.002-0.003-0.003-0.005-0.005-1.673-1.671-3.627-2.88-5.707-3.655-5.69-2.124-12.341-0.913-16.915 3.66l-73.374 73.374c-4.574 4.574-5.784 11.226-3.661 16.914 0.776 2.080 1.985 4.036 3.656 5.708 0.002 0.001 0.003 0.003 0.005 0.005l155.325 155.324-155.325 155.326c-0.001 0.002-0.003 0.003-0.004 0.005-1.671 1.673-2.88 3.627-3.657 5.707-2.124 5.688-0.913 12.341 3.661 16.915l73.374 73.373c4.575 4.574 11.226 5.784 16.915 3.661 2.080-0.776 4.035-1.985 5.708-3.656 0.001-0.002 0.003-0.003 0.005-0.005l155.324-155.325 155.324 155.325c0.002 0.001 0.004 0.003 0.006 0.004 1.674 1.672 3.627 2.881 5.707 3.657 5.689 2.123 12.342 0.913 16.914-3.661l73.373-73.374c4.574-4.574 5.785-11.227 3.662-16.915-0.776-2.080-1.985-4.034-3.657-5.707z"],
  viewBox: "0 0 512 512"
};
var Ype = {
  id: "enlarge",
  paths: ["M512 0h-208l80 80-96 96 48 48 96-96 80 80z", "M512 512v-208l-80 80-96-96-48 48 96 96-80 80z", "M0 512h208l-80-80 96-96-48-48-96 96-80-80z", "M0 0v208l80-80 96 96 48-48-96-96 80-80z"],
  viewBox: "0 0 512 512"
};
var qpe = {
  id: "minus",
  paths: ["M0 208v96c0 8.836 7.164 16 16 16h480c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16h-480c-8.836 0-16 7.164-16 16z"],
  viewBox: "0 0 512 512"
};
var Kpe = {
  id: "move",
  paths: ["M512,260.096L405.5,161.79v49.155H301.061v-104.45h49.149L251.904,0L160.77,106.495h49.15v104.45H106.495V161.79L0,260.096l106.495,91.135v-49.149h104.45v104.45H161.79L251.904,512l98.306-106.5h-49.149V301.061H405.5v49.149L512,260.096z"],
  viewBox: "0 0 512 512"
};
var Zpe = {
  id: "play",
  paths: ["M96 64l320 192-320 192z"],
  viewBox: "0 0 512 512"
};
var Qpe = {
  id: "plus",
  paths: ["M496 192h-176v-176c0-8.836-7.164-16-16-16h-96c-8.836 0-16 7.164-16 16v176h-176c-8.836 0-16 7.164-16 16v96c0 8.836 7.164 16 16 16h176v176c0 8.836 7.164 16 16 16h96c8.836 0 16-7.164 16-16v-176h176c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16z"],
  viewBox: "0 0 512 512"
};
var Jpe = {
  id: "copy",
  paths: ["M607.5 672v-448.5h-351v448.5h351zM607.5 160.5c34.5 0 64.5 28.5 64.5 63v448.5c0 34.5-30 64.5-64.5 64.5h-351c-34.5 0-64.5-30-64.5-64.5v-448.5c0-34.5 30-63 64.5-63h351zM511.5 31.5v64.5h-384v448.5h-63v-448.5c0-34.5 28.5-64.5 63-64.5h384z"],
  viewBox: "0 0 712 712"
};
var eme = {
  id: "select",
  viewBox: "0 0 16 16",
  paths: ["M2 14h2v1H1v-3h1v2zm8 1H6v-1h4v1zm5 0h-3v-1h2v-2h1v3zm0-5h-1V6h1v4zM2 10H1V6h1v4zm13-6h-1V2h-2V1h3v3zM4 2H2v2H1V1h3v1zm6 0H6V1h4.03L10 2z"]
};
var tme = {
  id: "check_square_o",
  viewBox: "0 0 1792 1792",
  paths: ["M1472 930v318q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-10 10-23 10-3 0-9-2-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-254q0-13 9-22l64-64q10-10 23-10 6 0 12 3 20 8 20 29zm231-489l-814 814q-24 24-57 24t-57-24l-430-430q-24-24-24-57t24-57l110-110q24-24 57-24t57 24l263 263 647-647q24-24 57-24t57 24l110 110q24 24 24 57t-24 57z"]
};
var rme = {
  id: "square_o",
  viewBox: "0 0 1792 1792",
  paths: ["M1312 256h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-832q0-66-47-113t-113-47zm288 160v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"]
};
var nme = {
  id: "file_o",
  viewBox: "0 0 1792 1792",
  paths: ["M1596 380q28 28 48 76t20 88v1152q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1600q0-40 28-68t68-28h896q40 0 88 20t76 48zm-444-244v376h376q-10-29-22-41l-313-313q-12-12-41-22zm384 1528v-1024h-416q-40 0-68-28t-28-68v-416h-768v1536h1280z"]
};
var ime = {
  id: "chevron_right",
  viewBox: "0 0 1792 1792",
  paths: ["M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45l166-166q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"]
};
var ome = {
  id: "chevron_down",
  viewBox: "0 0 1792 1792",
  paths: ["M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"]
};
var ame = {
  id: "folder_o",
  viewBox: "0 0 1792 1792",
  paths: ["M1600 1312v-704q0-40-28-68t-68-28h-704q-40 0-68-28t-28-68v-64q0-40-28-68t-68-28h-320q-40 0-68 28t-28 68v960q0 40 28 68t68 28h1216q40 0 68-28t28-68zm128-704v704q0 92-66 158t-158 66h-1216q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h672q92 0 158 66t66 158z"]
};
var sme = {
  id: "folder_open_o",
  viewBox: "0 0 1792 1792",
  paths: ["M1845 931q0-35-53-35h-1088q-40 0-85.5 21.5t-71.5 52.5l-294 363q-18 24-18 40 0 35 53 35h1088q40 0 86-22t71-53l294-363q18-22 18-39zm-1141-163h768v-160q0-40-28-68t-68-28h-576q-40 0-68-28t-28-68v-64q0-40-28-68t-68-28h-320q-40 0-68 28t-28 68v853l256-315q44-53 116-87.5t140-34.5zm1269 163q0 62-46 120l-295 363q-43 53-116 87.5t-140 34.5h-1088q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h544q92 0 158 66t66 158v160h192q54 0 99 24.5t67 70.5q15 32 15 68z"]
};
var lme = [Xpe, Wpe, Ype, qpe, Kpe, Zpe, Qpe, Jpe, eme, tme, rme, nme, ame, sme, ime, ome];
var sa = new DOMParser();
var cme = '<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268M10.5 3.5v12" fill="none" stroke="currentColor"/><path d="M5.5 13.5v-7" fill="none" stroke="currentColor" stroke-width=".9969299999999999"/><path d="M5.494 0c-1.803 0-3.26 1.496-3.26 3.35 0 .427.124.97.264 1.343L5.5 11l3.003-6.306c.142-.375.263-.916.263-1.342C8.766 1.496 7.3 0 5.494 0zM5.5 4.64c-.76 0-1.375-.616-1.375-1.374 0-.76.616-1.376 1.375-1.376.76 0 1.374.616 1.374 1.376 0 .758-.614 1.375-1.374 1.375z" fill="currentColor"/></svg>';
var $R = sa.parseFromString(cme, "text/xml").documentElement;
var ume = `
<svg width="20px" height="20px" viewBox="0 0 20 20">
  <rect x="0" y="3" width="4" height="14" fill="#637993"/>
  <rect x="4" y="3" width="2" height="14" fill="#c7d1de"/>
  <rect x="6" y="3" width="5" height="14" fill="#3c5068"/>
  <rect x="11" y="3" width="3" height="14" fill="#92a3ba"/>
  <rect x="14" y="3" width="2" height="14" fill="#000000"/>
  <rect x="16" y="3" width="4" height="14" fill="#637993"/>
</svg>
`;
var hme = sa.parseFromString(ume, "text/xml").documentElement;
var fme = `
<svg width="20px" height="20px" viewBox="0 0 135 85" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>line</title>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polyline id="Path" stroke="#4990E2" stroke-width="8" points="2 45.5625 20.7460938 6.3359375 36.828125 86.6484375 59.8945312 17.5742188 79.0390625 70.703125 99.9335938 27 112.769531 81.1601562 132.078125 3"></polyline>
    </g>
</svg>
`;
var dme = sa.parseFromString(fme, "text/xml").documentElement;
var pme = `
<svg width="20px" height="20px" viewBox="0 0 60 60" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>2d-tiles-icon</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="tiles2DIconStr-path-1" x="0" y="0" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-1"></use>
        </mask>
        <rect id="tiles2DIconStr-path-3" x="0" y="30" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-3"></use>
        </mask>
        <rect id="tiles2DIconStr-path-5" x="30" y="0" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-5"></use>
        </mask>
        <rect id="tiles2DIconStr-path-7" x="30" y="30" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-8" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-7"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-2)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-4)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-3"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-6)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-5"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-8)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-7"></use>
    </g>
</svg>
`;
var xF = sa.parseFromString(pme, "text/xml").documentElement;
var mme = `
<svg width="20px" height="20px" viewBox="0 0 90 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>2d-heatmap</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="heatmap2DStr-path-1" x="0" y="0" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-2" x="30" y="0" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-3" x="60" y="0" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-4" x="0" y="30" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-5" x="30" y="30" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-6" x="60" y="30" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-7" x="0" y="60" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-8" x="30" y="60" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-9" x="60" y="60" width="30" height="30"></rect>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <use id="Rectangle" fill="#858372" xlink:href="#heatmap2DStr-path-1"></use>
        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-2"></use>
        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-3"></use>
        <use id="Rectangle" fill="#BCBD9E" xlink:href="#heatmap2DStr-path-4"></use>
        <use id="Rectangle" fill="#817C7C" xlink:href="#heatmap2DStr-path-5"></use>
        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-6"></use>
        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-7"></use>
        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-8"></use>
        <use id="Rectangle" fill="#7B7777" xlink:href="#heatmap2DStr-path-9"></use>
    </g>
</svg>
`;
var kF = sa.parseFromString(mme, "text/xml").documentElement;
var AV = `
<svg width="20px" height="20px" viewBox="0 0 77 33" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>axis-1d</title>
    <desc>Created with Sketch.</desc>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polyline id="Path" stroke="#979797" stroke-width="8" transform="translate(38.258485, 27.557860) scale(1, -1) translate(-38.258485, -27.557860) " points="4 27.05786 36.7512307 27.05786 72.5169695 27.05786"></polyline>
        <path d="M38,24.484375 L38,3" id="Path-2" stroke="#979797" stroke-width="4"></path>
    </g>
</svg>
`;
var gme = sa.parseFromString(AV, "text/xml").documentElement;
var vme = Wt(sa.parseFromString(AV, "text/xml").documentElement).style("transform", "rotate(90deg)").node();
var yme = `
<svg width="20px" height="20px" viewBox="0 0 171 116" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>gene-annotations</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="geneAnnotations-path-1" x="34" y="0" width="24" height="116"></rect>
        <mask id="geneAnnotations-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="116" fill="white">
            <use xlink:href="#geneAnnotations-path-1"></use>
        </mask>
        <rect id="geneAnnotations-path-3" x="80" y="0" width="56" height="116"></rect>
        <mask id="geneAnnotations-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="56" height="116" fill="white">
            <use xlink:href="#geneAnnotations-path-3"></use>
        </mask>
        <rect id="geneAnnotations-path-5" x="147" y="40" width="24" height="35"></rect>
        <mask id="geneAnnotations-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="35" fill="white">
            <use xlink:href="#geneAnnotations-path-5"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M12.71875,58 L147.10172,58" id="Path" stroke="#979797" stroke-width="8"></path>
        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-2)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-4)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-3"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-6)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-5"></use>
        <polygon id="Triangle" stroke="#979797" fill="#D8D8D8" points="25 57.5 1 75 1 40"></polygon>
    </g>
</svg>
`;
var _me = sa.parseFromString(yme, "text/xml").documentElement;
var OV = `
<svg width="20px" height="20px" viewBox="0 0 180 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch -->
    <title>1d-tiles-icon</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="tiles1DIconStr-path-1" x="0" y="0" width="90" height="90"></rect>
        <mask id="tiles1DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">
            <use xlink:href="#tiles1DIconStr-path-1"></use>
        </mask>
        <rect id="tiles1DIconStr-path-3" x="90" y="0" width="90" height="90"></rect>
        <mask id="tiles1DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">
            <use xlink:href="#tiles1DIconStr-path-3"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-2)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-4)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-3"></use>
    </g>
</svg>
`;
var bme = sa.parseFromString(OV, "text/xml").documentElement;
var Tme = Wt(sa.parseFromString(OV, "text/xml").documentElement).style("transform", "rotate(90deg)").node();
var Eme = `
<svg width="20px" height="20px" viewBox="0 0 111 111" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch -->
    <title>arrowhead-domains</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="arrowHeadDomainsStr-path-1" x="0" y="0" width="90" height="90"></rect>
        <mask id="arrowHeadDomainsStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">
            <use xlink:href="#arrowHeadDomainsStr-path-1"></use>
        </mask>
        <rect id="arrowHeadDomainsStr-path-3" x="52" y="52" width="59" height="59"></rect>
        <mask id="arrowHeadDomainsStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="59" height="59" fill="white">
            <use xlink:href="#arrowHeadDomainsStr-path-3"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0">
        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-2)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-4)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-3"></use>
    </g>
</svg>
`;
var Kp = sa.parseFromString(Eme, "text/xml").documentElement;
function IV({
  theStyle: e12,
  onClick: t
}) {
  return import_react.default.createElement("svg", {
    className: po[e12],
    viewBox: "0 0 12 13",
    onClick: t,
    xmlns: "http://www.w3.org/2000/svg"
  }, import_react.default.createElement("g", {
    fill: "none",
    stroke: "#6c6c6c",
    strokeWidth: "2"
  }, import_react.default.createElement("path", {
    d: "M11.29 11.71l-4-4"
  }), import_react.default.createElement("circle", {
    cx: "5",
    cy: "5",
    r: "4"
  })));
}
IV.propTypes = {
  theStyle: L.string,
  onClick: L.func
};
var DF = {
  type: "osm-tiles",
  datatype: ["map-tiles"],
  local: true,
  orientation: "2d",
  hidden: true,
  name: "OSM Tiles",
  thumbnail: $R,
  availableOptions: ["minPos", "maxPos", "maxZoom", "labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "name"],
  defaultOptions: {
    minPos: -180,
    maxPos: 180,
    maxZoom: 19,
    labelPosition: "bottomRight",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0
  }
};
var RF = {
  type: "mapbox-tiles",
  datatype: ["map-tiles"],
  local: true,
  orientation: "2d",
  hidden: true,
  name: "Mapbox Tiles",
  thumbnail: $R,
  availableOptions: ["style", "labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "name"],
  defaultOptions: {
    style: "mapbox.streets",
    labelPosition: "bottomRight",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0
  }
};
var yu = [DF, {
  ...DF,
  type: "osm"
}, RF, {
  ...RF,
  type: "mapbox"
}, {
  type: "left-axis",
  datatype: ["axis"],
  local: true,
  orientation: "1d-vertical",
  name: "Left Axis",
  thumbnail: vme,
  availableOptions: ["minWidth"],
  defaultOptions: {
    minWidth: 100
  }
}, {
  type: "top-axis",
  datatype: ["axis"],
  local: true,
  orientation: "1d-horizontal",
  name: "Top Axis",
  thumbnail: gme,
  defaultOptions: {}
}, {
  type: "horizontal-rule",
  datatype: ["x-coord"],
  local: true,
  orientation: "whole",
  name: "Horizontal Rule",
  thumbnail: null,
  availableOptions: ["color"],
  defaultOptions: {
    color: "black"
  }
}, {
  type: "vertical-rule",
  datatype: ["y-coord"],
  local: true,
  orientation: "whole",
  name: "Vertical Rule",
  thumbnail: null,
  availableOptions: ["color"],
  defaultOptions: {
    color: "black"
  }
}, {
  type: "cross-rule",
  datatype: ["xy-coord"],
  local: true,
  orientation: "whole",
  name: "Cross Rule",
  thumbnail: null,
  availableOptions: ["color"],
  defaultOptions: {
    color: "black"
  }
}, {
  type: "simple-svg",
  datatype: [],
  local: false,
  orientation: "2d",
  exportable: true,
  availableOptions: ["minWidth", "minHeight"],
  defaultOptions: {
    minWidth: 100,
    minHeight: 100
  }
}, {
  type: "heatmap",
  datatype: ["matrix"],
  local: false,
  orientation: "2d",
  thumbnail: kF,
  exportable: true,
  availableOptions: ["backgroundColor", "labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelShowResolution", "labelShowAssembly", "labelColor", "labelTextOpacity", "labelBackgroundOpacity", "colorRange", "colorbarBackgroundColor", "maxZoom", "minWidth", "minHeight", "dataTransform", "colorbarPosition", "trackBorderWidth", "trackBorderColor", "heatmapValueScaling", "showMousePosition", "mousePositionColor", "showTooltip", "extent", "zeroValueColor"],
  defaultOptions: {
    backgroundColor: "#eeeeee",
    labelPosition: "bottomRight",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    labelShowResolution: true,
    labelShowAssembly: true,
    colorRange: [
      // corresponding to the fall colormap
      "white",
      "rgba(245,166,35,1.0)",
      "rgba(208,2,27,1.0)",
      "black"
    ],
    colorbarBackgroundColor: "#ffffff",
    maxZoom: null,
    minWidth: 100,
    minHeight: 100,
    colorbarPosition: "topRight",
    trackBorderWidth: 0,
    trackBorderColor: "black",
    heatmapValueScaling: "log",
    showMousePosition: false,
    mousePositionColor: "#000000",
    showTooltip: false,
    extent: "full",
    zeroValueColor: null
  },
  defaultOptionsByTheme: {
    [wr]: {
      backgroundColor: "#000000",
      colorRange: [
        // corresponding to the inverted fall colormap
        "black",
        "rgba(208,2,27,1.0)",
        "rgba(245,166,35,1.0)",
        "white"
      ],
      colorbarBackgroundColor: "#000000",
      labelColor: "#ffffff",
      labelBackgroundColor: "#000000",
      trackBorderColor: "#ffffff",
      mousePositionColor: "#ffffff"
    }
  }
}, {
  type: "linear-heatmap",
  aliases: ["horizontal-heatmap", "vertical-heatmap"],
  datatype: ["matrix"],
  local: false,
  orientation: "1d-horizontal",
  rotatable: true,
  thumbnail: kF,
  defaultOptions: {
    backgroundColor: "#eeeeee",
    labelPosition: "bottomRight",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    labelShowResolution: true,
    labelShowAssembly: true,
    labelColor: "black",
    colorRange: [
      // corresponding to the fall colormap
      "white",
      "rgba(245,166,35,1.0)",
      "rgba(208,2,27,1.0)",
      "black"
    ],
    maxZoom: null,
    minWidth: 100,
    minHeight: 40,
    trackBorderWidth: 0,
    trackBorderColor: "black"
  },
  availableOptions: ["backgroundColor", "labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelShowResolution", "labelShowAssembly", "labelColor", "labelTextOpacity", "labelBackgroundOpacity", "colorRange", "maxZoom", "minWidth", "minHeight", "dataTransform", "oneDHeatmapFlipped", "colorbarPosition", "trackBorderWidth", "trackBorderColor", "heatmapValueScaling"]
}, {
  type: "line",
  aliases: ["horizontal-line", "vertical-line"],
  datatype: ["vector"],
  local: false,
  orientation: "1d-horizontal",
  rotatable: true,
  thumbnail: dme,
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelShowResolution", "labelShowAssembly", "labelColor", "labelTextOpacity", "labelBackgroundColor", "labelBackgroundOpacity", "axisLabelFormatting", "axisPositionHorizontal", "axisMargin", "lineStrokeWidth", "lineStrokeColor", "valueScaling", "valueScaleMin", "valueScaleMax", "trackBorderWidth", "trackBorderColor", "trackType", "showMousePosition", "showTooltip", "mousePositionColor", "aggregationMode", "minHeight"],
  defaultOptions: {
    labelColor: "black",
    labelPosition: "topLeft",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    labelBackgroundColor: "white",
    labelShowResolution: false,
    labelShowAssembly: true,
    axisLabelFormatting: "scientific",
    axisPositionHorizontal: "right",
    lineStrokeColor: "blue",
    lineStrokeWidth: 1,
    valueScaling: "linear",
    trackBorderWidth: 0,
    trackBorderColor: "black",
    labelTextOpacity: 0.4,
    showMousePosition: false,
    minHeight: 20,
    mousePositionColor: "#000000",
    showTooltip: false
  },
  defaultOptionsByTheme: {
    [wr]: {
      labelColor: "#ffffff",
      labelBackgroundColor: "#000000",
      trackBorderColor: "#ffffff",
      mousePositionColor: "#ffffff"
    }
  }
}, {
  type: "1d-heatmap",
  aliases: ["horizontal-1d-heatmap", "vertical-1d-heatmap"],
  datatype: ["vector"],
  local: false,
  orientation: "1d-horizontal",
  rotatable: true,
  thumbnail: hme,
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelShowResolution", "labelShowAssembly", "labelColor", "labelTextOpacity", "labelBackgroundOpacity", "axisPositionHorizontal", "axisMargin", "colorRange", "valueScaling", "trackBorderWidth", "trackBorderColor", "trackType", "showMousePosition", "showTooltip", "mousePositionColor", "aggregationMode"],
  defaultOptions: {
    labelColor: "black",
    labelPosition: "topLeft",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    labelShowResolution: false,
    labelShowAssembly: true,
    axisPositionHorizontal: "right",
    colorRange: [
      // corresponding to the fall colormap
      "white",
      "rgba(245,166,35,1.0)",
      "rgba(208,2,27,1.0)",
      "black"
    ],
    valueScaling: "linear",
    trackBorderWidth: 0,
    trackBorderColor: "black",
    labelTextOpacity: 0.4,
    showMousePosition: false,
    mousePositionColor: "#000000",
    showTooltip: false
  }
}, {
  type: "vector-heatmap",
  aliases: ["horizontal-vector-heatmap", "vertical-vector-heatmap"],
  datatype: ["vector"],
  local: false,
  orientation: "1d-horizontal",
  rotatable: true,
  minHeight: 1,
  thumbnail: null,
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelShowResolution", "labelShowAssembly", "labelColor", "valueScaling", "labelTextOpacity", "labelBackgroundOpacity", "colorRange", "trackBorderWidth", "trackBorderColor", "trackType", "heatmapValueScaling"],
  defaultOptions: {
    labelPosition: "topLeft",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    labelShowResolution: false,
    labelShowAssembly: true,
    labelColor: "black",
    labelTextOpacity: 0.4,
    valueScaling: "linear",
    trackBorderWidth: 0,
    trackBorderColor: "black",
    heatmapValueScaling: "log"
  }
}, {
  type: "multivec",
  aliases: ["horizontal-multivec", "vertical-multivec"],
  datatype: ["multivec"],
  local: false,
  orientation: "1d-horizontal",
  rotatable: true,
  thumbnail: null,
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelShowResolution", "labelShowAssembly", "labelColor", "minHeight", "valueScaling", "labelTextOpacity", "labelBackgroundOpacity", "colorRange", "trackBorderWidth", "trackBorderColor", "trackType", "heatmapValueScaling", "selectRows", "selectRowsAggregationMode", "selectRowsAggregationWithRelativeHeight", "selectRowsAggregationMethod", "colorbarBackgroundColor", "colorbarPosition", "zeroValueColor"],
  defaultOptions: {
    labelPosition: "topLeft",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    labelShowResolution: true,
    labelShowAssembly: true,
    labelColor: "black",
    labelTextOpacity: 0.4,
    minHeight: 100,
    valueScaling: "linear",
    trackBorderWidth: 0,
    trackBorderColor: "black",
    heatmapValueScaling: "log",
    selectRows: null,
    selectRowsAggregationMode: "mean",
    selectRowsAggregationWithRelativeHeight: true,
    selectRowsAggregationMethod: "client",
    colorbarBackgroundColor: "#ffffff",
    colorbarPosition: "topRight",
    zeroValueColor: null
  },
  defaultOptionsByTheme: {
    [wr]: {
      colorbarBackgroundColor: "#000000"
    }
  }
}, {
  type: "point",
  aliases: ["horizontal-point", "vertical-point"],
  datatype: ["vector"],
  local: false,
  orientation: "1d-horizontal",
  rotatable: true,
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelShowResolution", "labelShowAssembly", "labelColor", "labelTextOpacity", "labelBackgroundOpacity", "axisLabelFormatting", "axisPositionHorizontal", "axisMargin", "pointColor", "pointSize", "valueScaling", "trackBorderWidth", "trackBorderColor"],
  defaultOptions: {
    labelColor: "black",
    labelPosition: "topLeft",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    labelShowResolution: false,
    labelShowAssembly: true,
    axisLabelFormatting: "scientific",
    axisPositionHorizontal: "right",
    pointColor: "red",
    pointSize: 3,
    valueScaling: "linear",
    trackBorderWidth: 0,
    trackBorderColor: "black",
    labelTextOpacity: 0.4
  }
}, {
  type: "divergent-bar",
  aliases: ["horizontal-divergent-bar", "vertical-divergent-bar"],
  datatype: ["vector"],
  local: false,
  orientation: "1d-horizontal",
  rotatable: true,
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelShowResolution", "labelShowAssembly", "labelColor", "labelTextOpacity", "labelBackgroundOpacity", "axisLabelFormatting", "axisPositionHorizontal", "axisMargin", "barFillColorTop", "barFillColorBottom", "valueScaling", "trackBorderWidth", "trackBorderColor", "barOpacity"],
  defaultOptions: {
    labelColor: "black",
    labelPosition: "topLeft",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    labelShowResolution: false,
    labelShowAssembly: true,
    axisPositionHorizontal: "right",
    axisLabelFormatting: "scientific",
    barFillColorBottom: "red",
    barFillColorTop: "green",
    valueScaling: "linear",
    trackBorderWidth: 0,
    trackBorderColor: "black",
    labelTextOpacity: 0.4,
    barOpacity: 1
  }
}, {
  type: "bar",
  aliases: ["horizontal-bar", "vertical-bar"],
  datatype: ["vector"],
  local: false,
  orientation: "1d-horizontal",
  rotatable: true,
  availableOptions: ["align", "labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelShowResolution", "labelShowAssembly", "labelColor", "labelTextOpacity", "labelBackgroundOpacity", "axisLabelFormatting", "axisPositionHorizontal", "axisMargin", "barFillColor", "colorRange", "colorRangeGradient", "valueScaling", "valueScaleMin", "valueScaleMax", "trackBorderWidth", "trackBorderColor", "barOpacity", "showMousePosition", "showTooltip", "aggregationMode", "zeroLineVisible", "zeroLineColor", "zeroLineOpacity"],
  defaultOptions: {
    align: "bottom",
    labelColor: "[glyph-color]",
    labelPosition: "topLeft",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    labelShowResolution: false,
    labelShowAssembly: true,
    axisLabelFormatting: "scientific",
    axisPositionHorizontal: "right",
    barFillColor: "darkgreen",
    valueScaling: "linear",
    trackBorderWidth: 0,
    trackBorderColor: "black",
    labelTextOpacity: 0.4,
    barOpacity: 1
  }
}, {
  type: "2d-tiles",
  datatype: ["matrix"],
  local: false,
  orientation: "2d",
  name: "2D Tile Outlines",
  thumbnail: xF
}, {
  type: "1d-value-interval",
  aliases: ["horizontal-1d-value-interval", "vertical-1d-value-interval"],
  datatype: ["bed-value"],
  local: false,
  orientation: "1d-horizontal",
  rotatable: true,
  name: "1D Rectangles",
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelColor", "labelTextOpacity", "labelBackgroundOpacity", "axisPositionHorizontal", "axisMargin"],
  defaultOptions: {
    labelColor: "black",
    labelPosition: "bottomLeft",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    axisPositionHorizontal: "left",
    lineStrokeColor: "blue",
    valueScaling: "linear"
  }
}, {
  type: "stacked-interval",
  aliases: ["top-stacked-interval", "left-stacked-interval"],
  datatype: ["stacked-interval"],
  local: false,
  orientation: "1d-horizontal",
  rotatable: true,
  thumbnail: "horizontal-stacked-interval.png",
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelColor", "labelTextOpacity", "labelBackgroundOpacity"]
}, {
  type: "viewport-projection-vertical",
  datatype: ["1d-projection"],
  local: true,
  hidden: true,
  projection: true,
  orientation: "1d-vertical",
  name: "Viewport Projection",
  thumbnail: "viewport-projection-center.png",
  availableOptions: ["projectionFillColor", "projectionStrokeColor", "strokeWidth"],
  defaultOptions: {
    projectionFillColor: "#777",
    projectionStrokeColor: "#777",
    projectionFillOpacity: 0.3,
    projectionStrokeOpacity: 0.7,
    strokeWidth: 1
  }
}, {
  type: "viewport-projection-horizontal",
  datatype: ["1d-projection"],
  local: true,
  hidden: true,
  projection: true,
  orientation: "1d-horizontal",
  name: "Viewport Projection",
  thumbnail: "viewport-projection-center.png",
  availableOptions: ["projectionFillColor", "projectionStrokeColor", "strokeWidth"],
  defaultOptions: {
    projectionFillColor: "#777",
    projectionStrokeColor: "#777",
    projectionFillOpacity: 0.3,
    projectionStrokeOpacity: 0.7,
    strokeWidth: 1
  }
}, {
  type: "viewport-projection-center",
  datatype: ["2d-projection"],
  local: true,
  hidden: true,
  projection: true,
  orientation: "2d",
  name: "Viewport Projection",
  thumbnail: "viewport-projection-center.png",
  availableOptions: ["projectionFillColor", "projectionStrokeColor", "strokeWidth"],
  defaultOptions: {
    projectionFillColor: "#777",
    projectionStrokeColor: "#777",
    projectionFillOpacity: 0.3,
    projectionStrokeOpacity: 0.7,
    strokeWidth: 1
  }
}, {
  type: "gene-annotations",
  aliases: ["horizontal-gene-annotations", "vertical-gene-annotations"],
  datatype: ["gene-annotation"],
  local: false,
  defaultHeight: 90,
  defaultWidth: 90,
  rotatable: true,
  orientation: "1d-horizontal",
  name: "Gene Annotations",
  thumbnail: _me,
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelColor", "labelTextOpacity", "labelBackgroundColor", "labelBackgroundOpacity", "minHeight", "plusStrandColor", "minusStrandColor", "trackBorderWidth", "trackBorderColor", "showMousePosition", "mousePositionColor", "fontSize", "geneAnnotationHeight", "geneLabelPosition", "geneStrandSpacing"],
  defaultOptions: {
    fontSize: 10,
    labelColor: "black",
    labelBackgroundColor: "#ffffff",
    labelPosition: "hidden",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    minHeight: 24,
    plusStrandColor: "blue",
    minusStrandColor: "red",
    trackBorderWidth: 0,
    trackBorderColor: "black",
    showMousePosition: false,
    mousePositionColor: "#000000",
    geneAnnotationHeight: 16,
    geneLabelPosition: "outside",
    geneStrandSpacing: 4
  },
  defaultOptionsByTheme: {
    [wr]: {
      labelColor: "#ffffff",
      labelBackgroundColor: "#000000",
      trackBorderColor: "#ffffff",
      mousePositionColor: "#ffffff",
      plusStrandColor: "#40a0ff"
    }
  }
}, {
  type: "arrowhead-domains",
  datatype: ["arrowhead-domains"],
  local: false,
  orientation: "2d",
  name: "Arrowhead Domains",
  thumbnail: Kp,
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelColor", "labelTextOpacity", "labelBackgroundOpacity", "trackBorderWidth", "trackBorderColor"],
  defaultOptions: {
    labelColor: "black",
    labelPosition: "hidden",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    trackBorderWidth: 0,
    trackBorderColor: "black"
  }
}, {
  type: "linear-2d-rectangle-domains",
  aliases: ["horizontal-2d-rectangle-domains", "vertical-2d-rectangle-domains"],
  datatype: ["2d-rectangle-domains"],
  local: false,
  orientation: "1d-horizontal",
  rotatable: true,
  name: "Horizontal 2D Rectangle Domains",
  thumbnail: Kp,
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelColor", "labelTextOpacity", "labelBackgroundOpacity", "trackBorderWidth", "trackBorderColor", "rectangleDomainFillColor", "rectangleDomainStrokeColor", "rectangleDomainOpacity", "minSquareSize"],
  defaultOptions: {
    labelColor: "black",
    labelPosition: "bottomLeft",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    trackBorderWidth: 0,
    trackBorderColor: "black",
    rectangleDomainFillColor: "grey",
    rectangleDomainStrokeColor: "black",
    rectangleDomainOpacity: 0.6,
    minSquareSize: "none"
  }
}, {
  type: "2d-rectangle-domains",
  datatype: ["2d-rectangle-domains"],
  local: false,
  orientation: "2d",
  name: "2D Rectangle Domains",
  thumbnail: Kp,
  availableOptions: ["flipDiagonal", "labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelColor", "labelTextOpacity", "labelBackgroundOpacity", "trackBorderWidth", "trackBorderColor", "rectangleDomainFillColor", "rectangleDomainFillOpacity", "rectangleDomainStrokeColor", "rectangleDomainOpacity", "minSquareSize"],
  defaultOptions: {
    flipDiagonal: "none",
    labelColor: "black",
    labelPosition: "hidden",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    trackBorderWidth: 0,
    trackBorderColor: "black",
    rectangleDomainFillColor: "grey",
    rectangleDomainFillOpacity: 0.4,
    rectangleDomainStrokeColor: "black",
    rectangleDomainOpacity: 0.6,
    minSquareSize: "none"
  }
}, {
  type: "horizontal-1d-annotations",
  datatype: ["nothing"],
  // Unfortunately one has to specify something here
  local: false,
  orientation: "1d-horizontal",
  name: "Horizontal 1D Annotations",
  thumbnail: null,
  availableOptions: ["fill", "fillOpacity", "stroke", "strokeOpacity", "strokeWidth", "strokePos", "regions"],
  defaultOptions: {
    fill: "red",
    fillOpacity: 0.2,
    stroke: "red",
    strokeOpacity: 0,
    strokeWidth: 1,
    regions: [],
    strokePos: []
  }
}, {
  type: "vertical-1d-annotations",
  datatype: ["nothing"],
  // Unfortunately one has to specify something here
  local: false,
  orientation: "1d-vertical",
  name: "Vertical 1D Annotations",
  thumbnail: null,
  availableOptions: ["fill", "fillOpacity", "stroke", "strokeOpacity", "regions"],
  defaultOptions: {
    fill: "red",
    fillOpacity: "0.2",
    stroke: "red",
    strokeOpacity: "0",
    regions: []
  }
}, {
  type: "2d-annotations",
  datatype: ["2d-annotations"],
  local: false,
  orientation: "2d",
  name: "2D Annotations",
  thumbnail: Kp,
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelColor", "labelTextOpacity", "labelBackgroundOpacity", "trackBorderWidth", "trackBorderColor", "rectangleDomainFillColor", "rectangleDomainStrokeColor", "rectangleDomainOpacity", "minSquareSize", "isClickable", "hoverColor", "selectColor", "exclude", "trackBorderBgWidth", "trackBorderBgColor", "trackBorderBgAlpha"],
  defaultOptions: {
    labelColor: "black",
    labelPosition: "hidden",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    trackBorderWidth: 0,
    trackBorderColor: "black",
    rectangleDomainFillColor: "grey",
    rectangleDomainStrokeColor: "black",
    rectangleDomainOpacity: 0.6,
    minSquareSize: "none",
    isClickable: false,
    hoverColor: "orange",
    selectColor: "fuchsia",
    exclude: [],
    trackBorderBgWidth: 0,
    trackBorderBgColor: "black",
    trackBorderBgAlpha: 0.33
  }
}, {
  type: "square-markers",
  datatype: ["bedpe"],
  local: false,
  orientation: "2d",
  name: "Square Markers",
  thumbnail: Kp,
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "labelColor"],
  defaultOptions: {
    labelColor: "black",
    labelPosition: "hidden",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    trackBorderWidth: 0,
    trackBorderColor: "black"
  }
}, {
  type: "combined",
  datatype: "any",
  local: true,
  orientation: "any"
}, {
  type: "horizontal-chromosome-grid",
  datatype: ["chromsizes"],
  local: false,
  orientation: "1d-horizontal",
  name: "Chromosome Grid",
  chromInfoPath: "//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",
  thumbnail: null,
  availableOptions: ["lineStrokeWidth", "lineStrokeColor", "showMousePosition"],
  defaultOptions: {
    lineStrokeWidth: 1,
    lineStrokeColor: "grey",
    showMousePosition: false
  }
}, {
  type: "vertical-chromosome-grid",
  datatype: ["chromsizes"],
  local: false,
  orientation: "1d-vertical",
  name: "Chromosome Grid",
  chromInfoPath: "//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",
  thumbnail: null,
  availableOptions: ["lineStrokeWidth", "lineStrokeColor", "showMousePosition"],
  defaultOptions: {
    lineStrokeWidth: 1,
    lineStrokeColor: "grey",
    showMousePosition: false
  }
}, {
  type: "2d-chromosome-grid",
  datatype: ["chromsizes"],
  local: false,
  orientation: "2d",
  name: "Chromosome Grid",
  chromInfoPath: "//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",
  thumbnail: null,
  availableOptions: ["lineStrokeWidth", "lineStrokeColor"],
  defaultOptions: {
    lineStrokeWidth: 1,
    lineStrokeColor: "grey"
  }
}, {
  type: "2d-chromosome-annotations",
  datatype: ["chromsizes"],
  local: true,
  orientation: "2d",
  name: "2D Chromosome Annotations",
  thumbnail: null,
  hidden: true
}, {
  type: "2d-chromosome-labels",
  datatype: ["chromsizes"],
  local: true,
  orientation: "2d",
  name: "Pairwise Chromosome Labels",
  thumbnail: null
}, {
  type: "chromosome-labels",
  aliases: ["horizontal-chromosome-labels", "vertical-chromosome-labels"],
  datatype: ["chromsizes"],
  orientation: "1d-horizontal",
  rotatable: true,
  minHeight: 35,
  defaultHeight: 30,
  name: "Chromosome Axis",
  thumbnail: null,
  availableOptions: ["color", "stroke", "fontSize", "fontIsLeftAligned", "showMousePosition", "mousePositionColor", "tickPositions", "tickFormat", "reverseOrientation"],
  defaultOptions: {
    color: "#808080",
    stroke: "#ffffff",
    fontSize: 12,
    fontIsLeftAligned: false,
    showMousePosition: false,
    mousePositionColor: "#000000",
    reverseOrientation: false
  },
  defaultOptionsByTheme: {
    [wr]: {
      color: "#808080",
      stroke: "#000000",
      mousePositionColor: "#ffffff"
    }
  }
}, {
  type: "vertical-1d-tiles",
  datatype: ["1d-tiles"],
  local: false,
  orientation: "1d-vertical",
  name: "Vertical 1D Tile Outlines",
  thumbnail: Tme
}, {
  type: "horizontal-1d-tiles",
  datatype: ["vector", "stacked-interval", "gene-annotation"],
  local: false,
  orientation: "1d-horizontal",
  name: "Horizontal 1D Tile Outlines",
  thumbnail: bme
}, {
  type: "osm-2d-tile-ids",
  datatype: ["map-tiles"],
  local: false,
  orientation: "2d",
  name: "OSM Tile Outlines",
  thumbnail: xF,
  availableOptions: ["minPos", "maxPos", "maxZoom", "labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "name"],
  defaultOptions: {
    minPos: -180,
    maxPos: 180,
    maxZoom: 19,
    labelPosition: "bottomRight",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0
  }
}, {
  type: "raster-tiles",
  datatype: ["map-tiles"],
  local: true,
  orientation: "2d",
  hidden: true,
  name: "Raster Tiles",
  thumbnail: $R,
  availableOptions: ["labelPosition", "labelLeftMargin", "labelRightMargin", "labelTopMargin", "labelBottomMargin", "name"],
  defaultOptions: {
    labelPosition: "bottomRight",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0
  }
}, {
  type: "image-tiles",
  datatype: ["image-tiles"],
  local: true,
  orientation: "2d",
  hidden: true,
  name: "Image Tiles",
  thumbnail: null
}, {
  type: "bedlike",
  datatype: ["bedlike"],
  aliases: ["vertical-bedlike"],
  local: false,
  orientation: "1d-horizontal",
  rotatable: true,
  name: "BED-like track",
  thumbnail: null,
  availableOptions: ["alternating", "annotationHeight", "annotationStyle", "fillColor", "fillOpacity", "fontColor", "fontSize", "minusStrandColor", "plusStrandColor", "labelBottomMargin", "labelColor", "labelLeftMargin", "labelPosition", "labelRightMargin", "labelTopMargin", "labelTextOpacity", "labelBackgroundOpacity", "maxAnnotationHeight", "minHeight", "trackBorderWidth", "trackBorderColor", "valueColumn", "colorEncoding", "colorRange", "colorEncodingRange", "separatePlusMinusStrands", "showTexts", "axisPositionHorizontal", "axisMargin"],
  defaultOptions: {
    alternating: false,
    annotationStyle: "box",
    fillColor: "blue",
    fillOpacity: 0.3,
    fontSize: "10",
    axisPositionHorizontal: "right",
    labelColor: "black",
    labelPosition: "hidden",
    labelLeftMargin: 0,
    labelRightMargin: 0,
    labelTopMargin: 0,
    labelBottomMargin: 0,
    minHeight: 20,
    maxAnnotationHeight: null,
    trackBorderWidth: 0,
    trackBorderColor: "black",
    valueColumn: null,
    colorEncoding: "itemRgb",
    showTexts: false,
    colorRange: ["#000000", "#652537", "#bf5458", "#fba273", "#ffffe0"],
    colorEncodingRange: false,
    separatePlusMinusStrands: true,
    annotationHeight: 16
  }
}, {
  type: "empty",
  datatype: [],
  orientation: "1d-horizontal",
  name: "Empty track",
  thumbnail: null,
  availableOptions: [],
  defaultOptions: {}
}];
var HR = (e12) => {
  const t = {}, r = (n) => !!(n.orientation === e12 || e12 === "1d-vertical" && n.orientation === "1d-horizontal" && n.rotatable);
  return yu.filter(r).forEach((n) => {
    let i = n.datatype;
    Array.isArray(n.datatype) || (i = [i]), i.forEach((o) => {
      o in t || (t[o] = []), t[o].push(n);
    });
  }), t.none = [], t;
};
var dd = [[0, 0, 0, 255], [35, 0, 0, 255], [52, 0, 0, 255], [60, 0, 0, 255], [63, 1, 0, 255], [64, 2, 0, 255], [68, 5, 0, 255], [69, 6, 0, 255], [72, 8, 0, 255], [74, 10, 0, 255], [77, 12, 0, 255], [78, 14, 0, 255], [81, 16, 0, 255], [83, 17, 0, 255], [85, 19, 0, 255], [86, 20, 0, 255], [89, 22, 0, 255], [91, 24, 0, 255], [92, 25, 0, 255], [94, 26, 0, 255], [95, 28, 0, 255], [98, 30, 0, 255], [100, 31, 0, 255], [102, 33, 0, 255], [103, 34, 0, 255], [105, 35, 0, 255], [106, 36, 0, 255], [108, 38, 0, 255], [109, 39, 0, 255], [111, 40, 0, 255], [112, 42, 0, 255], [114, 43, 0, 255], [115, 44, 0, 255], [117, 45, 0, 255], [119, 47, 0, 255], [119, 47, 0, 255], [120, 48, 0, 255], [122, 49, 0, 255], [123, 51, 0, 255], [125, 52, 0, 255], [125, 52, 0, 255], [126, 53, 0, 255], [128, 54, 0, 255], [129, 56, 0, 255], [129, 56, 0, 255], [131, 57, 0, 255], [132, 58, 0, 255], [134, 59, 0, 255], [134, 59, 0, 255], [136, 61, 0, 255], [137, 62, 0, 255], [137, 62, 0, 255], [139, 63, 0, 255], [139, 63, 0, 255], [140, 65, 0, 255], [142, 66, 0, 255], [142, 66, 0, 255], [143, 67, 0, 255], [143, 67, 0, 255], [145, 68, 0, 255], [145, 68, 0, 255], [146, 70, 0, 255], [146, 70, 0, 255], [148, 71, 0, 255], [148, 71, 0, 255], [149, 72, 0, 255], [149, 72, 0, 255], [151, 73, 0, 255], [151, 73, 0, 255], [153, 75, 0, 255], [153, 75, 0, 255], [154, 76, 0, 255], [154, 76, 0, 255], [154, 76, 0, 255], [156, 77, 0, 255], [156, 77, 0, 255], [157, 79, 0, 255], [157, 79, 0, 255], [159, 80, 0, 255], [159, 80, 0, 255], [159, 80, 0, 255], [160, 81, 0, 255], [160, 81, 0, 255], [162, 82, 0, 255], [162, 82, 0, 255], [163, 84, 0, 255], [163, 84, 0, 255], [165, 85, 0, 255], [165, 85, 0, 255], [166, 86, 0, 255], [166, 86, 0, 255], [166, 86, 0, 255], [168, 87, 0, 255], [168, 87, 0, 255], [170, 89, 0, 255], [170, 89, 0, 255], [171, 90, 0, 255], [171, 90, 0, 255], [173, 91, 0, 255], [173, 91, 0, 255], [174, 93, 0, 255], [174, 93, 0, 255], [176, 94, 0, 255], [176, 94, 0, 255], [177, 95, 0, 255], [177, 95, 0, 255], [179, 96, 0, 255], [179, 96, 0, 255], [180, 98, 0, 255], [182, 99, 0, 255], [182, 99, 0, 255], [183, 100, 0, 255], [183, 100, 0, 255], [185, 102, 0, 255], [185, 102, 0, 255], [187, 103, 0, 255], [187, 103, 0, 255], [188, 104, 0, 255], [188, 104, 0, 255], [190, 105, 0, 255], [191, 107, 0, 255], [191, 107, 0, 255], [193, 108, 0, 255], [193, 108, 0, 255], [194, 109, 0, 255], [196, 110, 0, 255], [196, 110, 0, 255], [197, 112, 0, 255], [197, 112, 0, 255], [199, 113, 0, 255], [200, 114, 0, 255], [200, 114, 0, 255], [202, 116, 0, 255], [202, 116, 0, 255], [204, 117, 0, 255], [205, 118, 0, 255], [205, 118, 0, 255], [207, 119, 0, 255], [208, 121, 0, 255], [208, 121, 0, 255], [210, 122, 0, 255], [211, 123, 0, 255], [211, 123, 0, 255], [213, 124, 0, 255], [214, 126, 0, 255], [214, 126, 0, 255], [216, 127, 0, 255], [217, 128, 0, 255], [217, 128, 0, 255], [219, 130, 0, 255], [221, 131, 0, 255], [221, 131, 0, 255], [222, 132, 0, 255], [224, 133, 0, 255], [224, 133, 0, 255], [225, 135, 0, 255], [227, 136, 0, 255], [227, 136, 0, 255], [228, 137, 0, 255], [230, 138, 0, 255], [230, 138, 0, 255], [231, 140, 0, 255], [233, 141, 0, 255], [233, 141, 0, 255], [234, 142, 0, 255], [236, 144, 0, 255], [236, 144, 0, 255], [238, 145, 0, 255], [239, 146, 0, 255], [241, 147, 0, 255], [241, 147, 0, 255], [242, 149, 0, 255], [244, 150, 0, 255], [244, 150, 0, 255], [245, 151, 0, 255], [247, 153, 0, 255], [247, 153, 0, 255], [248, 154, 0, 255], [250, 155, 0, 255], [251, 156, 0, 255], [251, 156, 0, 255], [253, 158, 0, 255], [255, 159, 0, 255], [255, 159, 0, 255], [255, 160, 0, 255], [255, 161, 0, 255], [255, 163, 0, 255], [255, 163, 0, 255], [255, 164, 0, 255], [255, 165, 0, 255], [255, 167, 0, 255], [255, 167, 0, 255], [255, 168, 0, 255], [255, 169, 0, 255], [255, 169, 0, 255], [255, 170, 0, 255], [255, 172, 0, 255], [255, 173, 0, 255], [255, 173, 0, 255], [255, 174, 0, 255], [255, 175, 0, 255], [255, 177, 0, 255], [255, 178, 0, 255], [255, 179, 0, 255], [255, 181, 0, 255], [255, 181, 0, 255], [255, 182, 0, 255], [255, 183, 0, 255], [255, 184, 0, 255], [255, 187, 7, 255], [255, 188, 10, 255], [255, 189, 14, 255], [255, 191, 18, 255], [255, 192, 21, 255], [255, 193, 25, 255], [255, 195, 29, 255], [255, 197, 36, 255], [255, 198, 40, 255], [255, 200, 43, 255], [255, 202, 51, 255], [255, 204, 54, 255], [255, 206, 61, 255], [255, 207, 65, 255], [255, 210, 72, 255], [255, 211, 76, 255], [255, 214, 83, 255], [255, 216, 91, 255], [255, 219, 98, 255], [255, 221, 105, 255], [255, 223, 109, 255], [255, 225, 116, 255], [255, 228, 123, 255], [255, 232, 134, 255], [255, 234, 142, 255], [255, 237, 149, 255], [255, 239, 156, 255], [255, 240, 160, 255], [255, 243, 167, 255], [255, 246, 174, 255], [255, 248, 182, 255], [255, 249, 185, 255], [255, 252, 193, 255], [255, 253, 196, 255], [255, 255, 204, 255], [255, 255, 207, 255], [255, 255, 211, 255], [255, 255, 218, 255], [255, 255, 222, 255], [255, 255, 225, 255], [255, 255, 229, 255], [255, 255, 233, 255], [255, 255, 236, 255], [255, 255, 240, 255], [255, 255, 244, 255], [255, 255, 247, 255], [255, 255, 255, 0]];
var Tr = yu.reduce(
  (e12, t) => {
    if (e12[t.type] = t, t.aliases)
      for (const r of t.aliases)
        e12[r] = t;
    return e12;
  },
  /** @type {TracksInfoByType} */
  {}
);
var Sme = yu.reduce((e12, t) => {
  for (let r = 0; r < t.datatype.length; r++) {
    const n = t.datatype[r];
    return e12[n] ? e12[n].add(t.orientation) : e12[n] = /* @__PURE__ */ new Set(), e12;
  }
  return {};
}, {});
var nv = (
  /** @type {const} */
  {
    chromsizes: {
      center: "2d-chromosome-grid",
      top: "chromosome-labels",
      left: "chromosome-labels",
      bottom: "chromosome-labels",
      right: "chromosome-labels"
    },
    matrix: {
      center: "heatmap",
      top: "linear-heatmap",
      left: "linear-heatmap",
      right: "linear-heatmap",
      bottom: "linear-heatmap"
    },
    vector: {
      top: "bar",
      bottom: "bar",
      left: "bar",
      right: "bar"
    },
    "geo-json": {
      center: "geo-json"
    },
    "gene-annotation": {
      top: "gene-annotations",
      bottom: "gene-annotations",
      left: "gene-annotations",
      right: "gene-annotations"
    },
    bedlike: {
      top: "bedlike",
      bottom: "bedlike",
      left: "vertical-bedlike",
      right: "vertical-bedlike"
    }
  }
);
var R0 = (e12, t) => {
  const r = HR(t);
  let n = new Set(Object.values(r).flatMap((i) => i));
  for (const i of e12) {
    const o = new Set(i);
    n = new Set([...n].filter((a) => a.datatype.filter((s) => o.has(s)).length > 0));
  }
  return [...n];
};
var PV = 8;
var UR = 8;
var wme = Object.freeze(Object.defineProperty({
  __proto__: null,
  AVAILABLE_TRACK_TYPES: R0,
  DATATYPE_TO_TRACK_TYPE: HR,
  DEFAULT_CONTAINER_PADDING_X: gV,
  DEFAULT_CONTAINER_PADDING_Y: vV,
  DEFAULT_SERVER: SP,
  DEFAULT_TRACKS_FOR_DATATYPE: nv,
  DEFAULT_VIEW_MARGIN: Em,
  DEFAULT_VIEW_PADDING: Sm,
  GLOBALS: Ue,
  HEATED_OBJECT_MAP: dd,
  LOCATION_LISTENER_PREFIX: Am,
  LONG_DRAG_TIMEOUT: wm,
  MAX_CLICK_DELAY: yV,
  MIN_HORIZONTAL_HEIGHT: SV,
  MIN_VERTICAL_WIDTH: wV,
  MOUSE_TOOL_MOVE: x0,
  MOUSE_TOOL_SELECT: To,
  NUM_PRECOMP_SUBSETS_PER_1D_TTILE: PV,
  NUM_PRECOMP_SUBSETS_PER_2D_TTILE: UR,
  POSITIONS_BY_DATATYPE: Sme,
  SHORT_DRAG_TIMEOUT: _V,
  THEME_DARK: wr,
  THEME_DEFAULT: Vpe,
  THEME_LIGHT: D0,
  TILE_FETCH_DEBOUNCE: EP,
  TRACKS_INFO: yu,
  TRACKS_INFO_BY_TYPE: Tr,
  TRACK_LOCATIONS: wP,
  VIEW_HEADER_MED_WIDTH_SEARCH_BAR: TV,
  VIEW_HEADER_MIN_WIDTH_SEARCH_BAR: EV,
  ZOOM_DEBOUNCE: k0,
  ZOOM_TRANSITION_DURATION: bV
}, Symbol.toStringTag, { value: "Module" }));
var ct = (e12) => {
  const t = dn(e12);
  return Ue.PIXI.utils.rgb2hex([t.r / 255, t.g / 255, t.b / 255]);
};
var CV = (e12) => {
  if (e12 === "transparent")
    return [255, 255, 255, 0];
  const t = dn(e12);
  return [t.r, t.g, t.b, 255];
};
var N0 = (e12, t, r) => {
  const n = pn(e12, r), i = pn(t, r);
  if (!n || !i)
    throw new Error("Couldn't convert data to genomic coordinates");
  return [n[0], Math.round(n[1]), i[0], Math.round(i[1])];
};
var jR = (e12, t, r) => {
  let n;
  const i = (...o) => {
    const a = () => {
      n = void 0, r || e12(...o);
    }, s = r && !n;
    clearTimeout(n), n = setTimeout(a, t), s && e12(...o);
  };
  return i.cancel = () => {
    clearTimeout(n), n = void 0;
  }, i;
};
var AP = (e12) => (e12 + 16 ** 6).toString(16).substr(-6);
var xV = (e12) => {
  const t = {};
  return e12.forEach((r) => {
    t[r[0]] = r[1];
  }), t;
};
var vo = (e12) => {
  const t = [];
  for (const r in e12)
    e12.hasOwnProperty(r) && t.push([r, e12[r]]);
  return t;
};
function mo(e12) {
  const t = [];
  for (const r in e12)
    e12.hasOwnProperty(r) && t.push(r);
  return t;
}
function mr(e12) {
  const t = [];
  for (const r in e12)
    e12.hasOwnProperty(r) && t.push(e12[r]);
  return t;
}
function Qm(e12, t) {
  const r = typeof t == "string" ? new Blob([t], {
    type: "application/octet-stream"
  }) : t, n = window.document.createElement("a");
  n.href = window.URL.createObjectURL(r), n.download = e12, document.body.appendChild(n), n.click(), document.body.removeChild(n), URL.revokeObjectURL(n.href);
}
var kV = (e12) => {
  const t = ["top", "bottom", "gallery"], r = ["left", "right", "gallery"];
  return e12.center = e12.center || [], e12.left = e12.left || [], e12.right = e12.right || [], e12.top = e12.top || [], e12.bottom = e12.bottom || [], e12.whole = e12.whole || [], e12.gallery = e12.gallery || [], t.map((n) => e12[n]).forEach((n) => n.forEach((i) => {
    const o = Tr[i.type], a = o && o.defaultOptions || {}, s = i.options ? {
      ...a,
      ...i.options
    } : a;
    s.minHeight !== void 0 && i.height === void 0 && (i.height = s.minHeight), i.height === void 0 && (i.height = o && o.defaultHeight || SV);
  })), r.map((n) => e12[n]).forEach((n) => n.forEach((i) => {
    const o = Tr[i.type], a = o && o.defaultOptions || {}, s = i.options ? {
      ...a,
      ...i.options
    } : a;
    s.minWidth !== void 0 && i.width === void 0 && (i.width = s.minWidth), i.width === void 0 && (i.width = o && o.defaultWidth || wV);
  })), e12;
};
var DV = (e12) => (t) => Array.prototype.reduce.call(t, e12);
var Ame = DV((e12, t) => e12.concat(t));
var Ome = (e12) => (t) => Array.prototype.forEach.call(t, e12);
var M0 = (e12, t) => {
  t.dispatchEvent(mV(e12));
};
var Ime = (e12, t) => [C0(e12[0], e12[1], t), C0(e12[2], e12[3], t)];
function Pme(e12, t, r, n, i) {
  const {
    chr: o,
    pos: a
  } = t, {
    chr: s,
    pos: l
  } = r, u = [];
  if (o === s) {
    const c = o, f = Math.floor(a / n), h = Math.min(f + i, Math.ceil(l / n));
    u.push([c, f, h]);
  } else {
    let c = i;
    const f = e12.findIndex(([d]) => d === o), h = e12.findIndex(([d]) => d === s);
    for (let d = f; d <= h; d++) {
      let p, m;
      const [g, v] = e12[d];
      d < h ? (d === f ? p = a : p = 0, m = v) : (p = 0, m = l);
      const _ = Math.floor(p / n), y = Math.min(_ + c, Math.ceil(m / n));
      u.push([g, _, y]), c -= y - _;
    }
  }
  return u;
}
var GR = (e12, t, r) => {
  if (r.length === 0)
    return;
  if (r.length === 1)
    return r[0];
  let n = r[0];
  const i = nv[e12] !== void 0 ? nv[e12][t] : void 0;
  return i !== void 0 && (n = r.find((o) => o.type === i) || n), n;
};
var NF = {};
var qw = {};
var Kw = 34;
var Zp = 10;
var Zw = 13;
function RV(e12) {
  return new Function("d", "return {" + e12.map(function(t, r) {
    return JSON.stringify(t) + ": d[" + r + '] || ""';
  }).join(",") + "}");
}
function Cme(e12, t) {
  var r = RV(e12);
  return function(n, i) {
    return t(r(n), i, e12);
  };
}
function MF(e12) {
  var t = /* @__PURE__ */ Object.create(null), r = [];
  return e12.forEach(function(n) {
    for (var i in n)
      i in t || r.push(t[i] = i);
  }), r;
}
function ki(e12, t) {
  var r = e12 + "", n = r.length;
  return n < t ? new Array(t - n + 1).join(0) + r : r;
}
function xme(e12) {
  return e12 < 0 ? "-" + ki(-e12, 6) : e12 > 9999 ? "+" + ki(e12, 6) : ki(e12, 4);
}
function kme(e12) {
  var t = e12.getUTCHours(), r = e12.getUTCMinutes(), n = e12.getUTCSeconds(), i = e12.getUTCMilliseconds();
  return isNaN(e12) ? "Invalid Date" : xme(e12.getUTCFullYear()) + "-" + ki(e12.getUTCMonth() + 1, 2) + "-" + ki(e12.getUTCDate(), 2) + (i ? "T" + ki(t, 2) + ":" + ki(r, 2) + ":" + ki(n, 2) + "." + ki(i, 3) + "Z" : n ? "T" + ki(t, 2) + ":" + ki(r, 2) + ":" + ki(n, 2) + "Z" : r || t ? "T" + ki(t, 2) + ":" + ki(r, 2) + "Z" : "");
}
function zR(e12) {
  var t = new RegExp('["' + e12 + `
\r]`), r = e12.charCodeAt(0);
  function n(f, h) {
    var d, p, m = i(f, function(g, v) {
      if (d)
        return d(g, v - 1);
      p = g, d = h ? Cme(g, h) : RV(g);
    });
    return m.columns = p || [], m;
  }
  function i(f, h) {
    var d = [], p = f.length, m = 0, g = 0, v, _ = p <= 0, y = false;
    f.charCodeAt(p - 1) === Zp && --p, f.charCodeAt(p - 1) === Zw && --p;
    function b() {
      if (_)
        return qw;
      if (y)
        return y = false, NF;
      var E, P = m, A;
      if (f.charCodeAt(P) === Kw) {
        for (; m++ < p && f.charCodeAt(m) !== Kw || f.charCodeAt(++m) === Kw; )
          ;
        return (E = m) >= p ? _ = true : (A = f.charCodeAt(m++)) === Zp ? y = true : A === Zw && (y = true, f.charCodeAt(m) === Zp && ++m), f.slice(P + 1, E - 1).replace(/""/g, '"');
      }
      for (; m < p; ) {
        if ((A = f.charCodeAt(E = m++)) === Zp)
          y = true;
        else if (A === Zw)
          y = true, f.charCodeAt(m) === Zp && ++m;
        else if (A !== r)
          continue;
        return f.slice(P, E);
      }
      return _ = true, f.slice(P, p);
    }
    for (; (v = b()) !== qw; ) {
      for (var T = []; v !== NF && v !== qw; )
        T.push(v), v = b();
      h && (T = h(T, g++)) == null || d.push(T);
    }
    return d;
  }
  function o(f, h) {
    return f.map(function(d) {
      return h.map(function(p) {
        return c(d[p]);
      }).join(e12);
    });
  }
  function a(f, h) {
    return h == null && (h = MF(f)), [h.map(c).join(e12)].concat(o(f, h)).join(`
`);
  }
  function s(f, h) {
    return h == null && (h = MF(f)), o(f, h).join(`
`);
  }
  function l(f) {
    return f.map(u).join(`
`);
  }
  function u(f) {
    return f.map(c).join(e12);
  }
  function c(f) {
    return f == null ? "" : f instanceof Date ? kme(f) : t.test(f += "") ? '"' + f.replace(/"/g, '""') + '"' : f;
  }
  return {
    parse: n,
    parseRows: i,
    format: a,
    formatBody: s,
    formatRows: l,
    formatRow: u,
    formatValue: c
  };
}
var th = zR(",");
var Dme = th.parse;
var Rme = th.parseRows;
var Nme = th.format;
var Mme = th.formatBody;
var Lme = th.formatRows;
var Bme = th.formatRow;
var Fme = th.formatValue;
var rh = zR("	");
var $me = rh.parse;
var VR = rh.parseRows;
var Hme = rh.format;
var Ume = rh.formatBody;
var jme = rh.formatRows;
var Gme = rh.formatRow;
var zme = rh.formatValue;
function Vme(e12) {
  for (var t in e12) {
    var r = e12[t].trim(), n, i;
    if (!r)
      r = null;
    else if (r === "true")
      r = true;
    else if (r === "false")
      r = false;
    else if (r === "NaN")
      r = NaN;
    else if (!isNaN(n = +r))
      r = n;
    else if (i = r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))
      Xme && i[4] && !i[7] && (r = r.replace(/-/g, "/").replace(/T/, " ")), r = new Date(r);
    else
      continue;
    e12[t] = r;
  }
  return e12;
}
var Xme = (/* @__PURE__ */ new Date("2019-01-01T00:00")).getHours() || (/* @__PURE__ */ new Date("2019-07-01T00:00")).getHours();
var Wme = Object.freeze(Object.defineProperty({
  __proto__: null,
  autoType: Vme,
  csvFormat: Nme,
  csvFormatBody: Mme,
  csvFormatRow: Bme,
  csvFormatRows: Lme,
  csvFormatValue: Fme,
  csvParse: Dme,
  csvParseRows: Rme,
  dsvFormat: zR,
  tsvFormat: Hme,
  tsvFormatBody: Ume,
  tsvFormatRow: Gme,
  tsvFormatRows: jme,
  tsvFormatValue: zme,
  tsvParse: $me,
  tsvParseRows: VR
}, Symbol.toStringTag, { value: "Module" }));
var L0 = {};
var Yme = (e12, t) => L0[e12] ? Promise.resolve(L0[e12]) : t(e12);
var qme = (e12) => {
  if (e12.length === 0)
    return null;
  const t = VR(e12);
  return S1(t);
};
var Kme = (e12) => fetch(e12, {
  credentials: "same-origin"
}).then((t) => t.text()).then((t) => qme(t)).catch((t) => {
  console.error("Could not retrieve or parse chrom info.", t);
});
var Zme = (e12, t, r) => t(e12, r).then((n) => (L0[e12] = n, L0[e12]));
var Qme = (e12) => Zme(e12, Yme, Kme);
var XR = {
  get: Qme
};
function Jme(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function LF(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, tge(n.key), n);
  }
}
function ege(e12, t, r) {
  return t && LF(e12.prototype, t), r && LF(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function tge(e12) {
  var t = rge(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function rge(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
var nge = function() {
  function e12(t) {
    Jme(this, e12), this.customEventHandlers = {}, this.registeredEls = {}, this.pubSub = t;
  }
  return ege(e12, [{
    key: "getEventHandler",
    value: function(r) {
      return this.customEventHandlers[r] ? this.customEventHandlers[r] : (n) => this.pubSub.publish(r, n);
    }
    /**
     * Unregister an event listener.
     *
     * @param {string} event - Name of the event to stop listening from.
     * @param {object} element - DOM element which we listened to.
     */
  }, {
    key: "unregister",
    value: function(r, n) {
      !this.registeredEls[r] && this.registeredEls[r] !== n || (this.registeredEls[r].removeEventListener(r, this.registeredEls[r].__handler__), this.registeredEls[r] = void 0, delete this.registeredEls[r]);
    }
    /**
     * Register an event listener.
     *
     * @param {string} event - Name of the event to listen to.
     * @param {object} newElement - DOM element which to listen to.
     */
  }, {
    key: "register",
    value: function(r, n, i = false) {
      !n || this.registeredEls[r] === n || (this.registeredEls[r] && this.unregister(this.registeredEls[r]), this.registeredEls[r] = n, this.registeredEls[r].__handler__ = this.getEventHandler(r), this.registeredEls[r].addEventListener(r, this.registeredEls[r].__handler__, {
        capture: i,
        passive: false
      }));
    }
  }]), e12;
}();
var NV = (e12) => new nge(e12);
var BF = false;
var ige = () => {
  if (BF)
    return;
  const [e12, t] = HV(), r = "102117110099116105111110040041123115101108102046099111110115111108101046108111103040039", n = "072", i = "105", o = "071", a = "108097115115", s = "032118", l = "058032104116116112058047047104105103108097115115046105111039041125", u = [String.fromCharCode(...r.match(/.{1,3}/g).map((P) => +P)).toLowerCase(), String.fromCharCode(...n.match(/.{1,3}/g).map((P) => +P)), String.fromCharCode(...i.match(/.{1,3}/g).map((P) => +P)).toLowerCase(), String.fromCharCode(...o.match(/.{1,3}/g).map((P) => +P)), String.fromCharCode(...a.match(/.{1,3}/g).map((P) => +P)).toLowerCase(), String.fromCharCode(...s.match(/.{1,3}/g).map((P) => +P)).toLowerCase(), String.fromCharCode(...t.match(/.{1,3}/g).map((P) => +P)).toLowerCase(), String.fromCharCode(...l.match(/.{1,3}/g).map((P) => +P)).toLowerCase()].join(""), c = "085082076", f = "066076079066", h = "087111114107101114", d = "099114101097116101079098106101099116085082076", p = "114101118111107101079098106101099116085082076", m = (P) => P.charAt(0).toUpperCase() + P.slice(1), g = (P) => P.slice(0, 6) + P.charAt(6).toUpperCase() + P.slice(7, 12) + P.slice(12).toUpperCase(), v = e12[String.fromCharCode(...c.match(/.{1,3}/g).map((P) => +P))], _ = e12[m(String.fromCharCode(...f.match(/.{1,3}/g).map((P) => +P)).toLowerCase())], y = e12[m(String.fromCharCode(...h.match(/.{1,3}/g).map((P) => +P)).toLowerCase())], b = g(String.fromCharCode(...d.match(/.{1,3}/g).map((P) => +P)).toLowerCase()), T = g(String.fromCharCode(...p.match(/.{1,3}/g).map((P) => +P)).toLowerCase()), E = v[b](new _([`(${u})()`], {
    type: "application/javascript"
  }));
  new y(E), v[T](E), BF = true;
};
var MV = {
  listen: ige
};
function oge(e12, t, r, n, i, o, a) {
  let s, l;
  if (i) {
    const m = tN(i);
    s = m, l = (g, v) => m(v.map((_) => e12[_ * t[1] + g])) ?? 0;
  }
  let u, c, f, h, d, p;
  for (f = 0; f < t[1]; f++)
    for (c = 0, h = 0; h < n.length; h++) {
      if (p = n[h], s && a === "server")
        u = e12[h * t[1] + f];
      else if (Array.isArray(p)) {
        if (!l)
          throw new Error("row aggregation requires 'aggFromDataFunc'");
        u = l(f, p);
      } else
        u = e12[p * t[1] + f];
      if (o && Array.isArray(p))
        for (d = 0; d < p.length; d++)
          r(
            c * t[1] + f,
            // pixData index
            u
            // data point
          ), c++;
      else
        r(
          c * t[1] + f,
          // pixData index
          u
          // data point
        ), c++;
    }
}
function age(e12, t, r, n, i, o, a = false, s = false, l = null, u = null, c = null) {
  let f;
  r === "log" ? f = nc().range([254, 0]).domain(n) : (r !== "linear" && console.warn("Unknown value scale type:", r, " Defaulting to linear"), f = It().range([254, 0]).domain(n));
  const {
    selectedRows: h,
    selectedRowsAggregationMode: d = "mean",
    selectedRowsAggregationWithRelativeHeight: p = false,
    selectedRowsAggregationMethod: m = "client"
  } = c ?? {};
  let g = e12;
  l && h && (g = av(h, p) * l[1]);
  let v, _ = 0;
  const y = l ? l[1] : Math.sqrt(e12), b = new Uint8ClampedArray(g * 4), T = (A) => {
    const I = f(A);
    return Number.isNaN(I) ? 254 : Math.max(0, Math.min(254, Math.floor(I)));
  }, E = (A, I) => {
    _ = 255, // ignore the upper right portion of a tile because it's on the diagonal
    // and its mirror will fill in that space
    !(a && Math.floor(A / y) < A % y) && !(s && Math.floor(A / y) > A % y) && // Ignore color if the value is invalid
    !Number.isNaN(+I) && (_ = T(I + i)), (_ < 0 || _ > 255) && console.warn("out of bounds rgbIdx:", _, " (should be 0 <= rgbIdx <= 255)"), u && !Number.isNaN(+I) && +I == 0 ? v = u : v = o[_], b[A * 4] = v[0], b[A * 4 + 1] = v[1], b[A * 4 + 2] = v[2], b[A * 4 + 3] = v[3];
  };
  let P;
  try {
    if (h && l)
      oge(t, l, E, h, d, p, m);
    else
      for (let A = 0; A < t.length; A++)
        P = t[A], E(A, P);
  } catch (A) {
    return console.warn("Odd datapoint"), console.warn("d:", P), P = P ?? 0, console.warn("valueScale.domain():", f.domain()), console.warn("valueScale.range():", f.range()), console.warn("value:", f(P + i)), console.warn("pseudocount:", i), console.warn("rgbIdx:", _, "d:", P, "ct:", f(P)), console.error("ERROR:", A), b;
  }
  return b;
}
function sge(e12) {
  let t = e12 & 31744, r, n, i;
  const o = (e12 & 32768) << 16;
  switch (t) {
    case 0:
      if (r = e12 & 1023, r === 0)
        return o;
      for (r <<= 1; !(r & 1024); )
        r <<= 1, t++;
      return n = 127 - 15 - t << 23, i = (r & 1023) << 13, o + n + i;
    case 31744:
      return o + 2139095040 + ((e12 & 1023) << 13);
    default:
      return o + ((e12 & 32767) + 114688 << 13);
  }
}
function lge(e12) {
  const t = atob(e12), r = t.length, n = new Uint8Array(r);
  for (let i = 0; i < r; i++)
    n[i] = t.charCodeAt(i);
  return n.buffer;
}
function cge(e12) {
  const t = new Uint32Array(e12.length);
  for (let n = 0; n < e12.length; n++)
    t[n] = sge(e12[n]);
  return new Float32Array(t.buffer);
}
function WR(e12, t, r) {
  const n = e12 ?? {};
  for (const i of r) {
    i in n || (n[i] = {});
    const o = i, a = o.split(".");
    n[o].server = t, n[o].tileId = o, n[o].zoomLevel = +a[1];
    const s = a.slice(2, a.length).map((l) => +l).filter((l) => !Number.isNaN(l));
    if (n[o].tilePos = s, n[o].tilesetUid = a[0], "dense" in n[o]) {
      const l = n[o].dense, u = lge(l);
      let c;
      if (n[o].dtype === "float16") {
        const h = new Uint16Array(u);
        c = cge(h);
      } else
        c = new Float32Array(u);
      const f = s.length === 2 ? new eN(c) : new H0(c);
      n[o].dense = c, n[o].denseDataExtrema = f, n[o].minNonZero = f.minNonZeroInTile, n[o].maxNonZero = f.maxNonZeroInTile;
    }
  }
  return n;
}
function uge(e12, t, r, n, i, o) {
  const a = {
    "content-type": "application/json"
  };
  n && (a.Authorization = n), fetch(e12, {
    credentials: "same-origin",
    headers: a,
    ...o && Object.keys(o).length > 0 ? {
      method: "POST",
      body: JSON.stringify(o)
    } : {}
  }).then((s) => s.json()).then((s) => {
    i(WR(s, t, r));
  }).catch((s) => console.warn("err:", s));
}
var FF = 15;
var B0 = Gt.nice();
var iv = 0;
var pd = null;
var hge = (e12, t, r) => {
  let n, i = [], o = {}, a = 0;
  const s = (d) => {
    const p = o[d.id];
    p && i[p] ? i[p].ids = i[p].ids.concat(d.ids) : (o[d.id] = i.length, i.push(d));
  }, l = () => {
    n = null, i = [], o = {};
  }, u = (d, ...p) => {
    e12({
      sessionId: B0,
      requests: i
    }, ...p), l();
  }, c = (d, ...p) => {
    const m = () => {
      a > 0 && (u(d, ...p), a = 0);
    };
    clearTimeout(n), n = setTimeout(m, r);
  };
  c.cancel = () => {
    clearTimeout(n), l();
  }, c.immediate = () => {
    e12({
      sessionId: B0,
      requests: i
    });
  };
  let f = false;
  return (d, ...p) => {
    s(d), f ? a++ : (u(d, ...p), c(d, ...p), f = true, a = 0, setTimeout(() => {
      f = false;
    }, t));
  };
};
var ov = (e12) => {
  pd = e12;
};
var fge = () => pd;
function dge(e12, t) {
  const r = e12.requests, n = [], i = {}, o = {};
  for (const s of r) {
    i[s.server] || (i[s.server] = {}, o[s.server] = []);
    for (const l of s.ids)
      if (i[s.server][l] = true, s.options) {
        const u = l.indexOf("."), c = l.substring(0, u), f = l.substring(u + 1), h = o[s.server].find((d) => d.tilesetUid === c);
        h ? h.tileIds.push(f) : o[s.server].push({
          tilesetUid: c,
          tileIds: [f],
          options: s.options
        });
      }
  }
  const a = Object.keys(i);
  for (const s of a) {
    const l = Object.keys(i[s]), u = o[s];
    for (let c = 0; c < l.length; c += FF) {
      const f = l.slice(c, c + Math.min(l.length - c, FF)), h = f.map((m) => `d=${m}`).join("&"), d = `${s}/tiles/?${h}&s=${B0}`, p = new Promise((m, g) => {
        t.publish("requestSent", d);
        const v = {};
        v.outUrl = d, v.server = s, v.theseTileIds = f, v.authHeader = pd, uge(v.outUrl, v.server, v.theseTileIds, v.authHeader, m, u), t.publish("requestReceived", d);
      });
      n.push(p);
    }
  }
  Promise.all(n).then((s) => {
    const l = {};
    for (const u of s) {
      const c = Object.keys(u);
      for (const f of c)
        l[`${u[f].server}/${f}`] = u[f];
    }
    for (const u of r) {
      const c = {}, {
        server: f
      } = u;
      for (const h of u.ids)
        c[h] = l[`${f}/${h}`];
      u.done(c);
    }
  });
}
var pge = hge(dge, EP, EP);
var mge = (e12, t) => {
  const r = e12.map((s) => +s).sort((s, l) => l - s), n = t.range()[1] - t.range()[0], o = r.map((s) => (t.domain()[1] - t.domain()[0]) / s).map((s) => s / n), a = o.filter((s) => s < 1);
  return a.length === 0 ? 0 : o.indexOf(a[a.length - 1]);
};
var gge = (e12, t) => {
  if (e12.resolutions)
    return e12.resolutions.map((s) => +s).sort((s, l) => l - s)[t];
  const r = e12.max_width, n = +e12.bins_per_dimension;
  return r / (2 ** t * n);
};
var vge = (e12, t, r, n) => {
  const i = e12.range()[1] - e12.range()[0], o = Math.max((r - t) / (e12.domain()[1] - e12.domain()[0]), 1), s = Math.max(0, Math.ceil(Math.log(i / 384) / Math.LN2));
  let l = Math.round(Math.log(o) / Math.LN2) + s, u = 0;
  return n && (u = Math.floor(Math.log(256) / Math.log(2) - Math.log(n) / Math.log(2))), l += u, l;
};
function yge(e12, t, r, n, i) {
  let o = null;
  const a = e12.bins_per_dimension || 256;
  e12.resolutions ? o = e12.resolutions[n] * a : o = t / 2 ** n;
  const s = Math.floor((i - r) / o), l = Math.floor(a * (i - s * o) / o);
  return [s, l];
}
var _ge = (e12, t, r, n, i, o) => {
  const a = Math.min(e12, i), s = o / 2 ** a, l = 1e-7;
  return yi(Math.max(0, Math.floor((t.domain()[0] - r) / s)), Math.min(2 ** a, Math.ceil((t.domain()[1] - r - l) / s)));
};
var bge = (e12, t, r) => e12.resolutions ? e12.resolutions.map((i) => +i).sort((i, o) => o - i)[t] * r : e12.max_width / 2 ** t;
var Tge = (e12, t, r, n, i) => {
  const s = e12 * (i || 256), l = 20;
  n || (n = Number.MAX_VALUE);
  const u = Math.max(0, Math.floor((t.domain()[0] - r) / s)), c = Math.ceil(Math.min(n, t.domain()[1] - r - 1e-7) / s);
  let f = yi(u, c);
  return f.length > l && (console.warn(`Too many visible tiles: ${f.length} truncating to ${l}`), f = f.slice(0, l)), f;
};
var Ege = (e12, t, r, n, i, o, a, s, l, u) => {
  const {
    tileData: c
  } = e12;
  if (!c.dense) {
    o(null);
    return;
  }
  if (e12.mirrored && // Data is already copied over
  !e12.isMirrored && e12.tileData.tilePos.length > 0 && e12.tileData.tilePos[0] === e12.tileData.tilePos[1]) {
    e12.tileData.dense = e12.tileData.dense.slice();
    const h = Math.floor(Math.sqrt(e12.tileData.dense.length));
    for (let d = 0; d < h; d++)
      for (let p = d + 1; p < h; p++)
        e12.tileData.dense[d * h + p] = e12.tileData.dense[p * h + d];
    if (s)
      for (let d = 0; d < h; d++)
        for (let p = 0; p < d; p++)
          e12.tileData.dense[d * h + p] = NaN;
    e12.isMirrored = true;
  }
  const f = age(c.dense.length, c.dense, t, r, n, i, a, s, e12.tileData.shape, l, u);
  o({
    pixData: f
  });
};
function LV(e12, t, r, n) {
  iv += 1, n.publish("requestSent", e12);
  let i = null;
  if (r === "text")
    i = null;
  else if (r === "json")
    i = "application/json";
  else
    throw new Error(`fetch either "text" or "json", not "${r}"`);
  const o = {};
  return i && (o["Content-Type"] = i), pd && (o.Authorization = pd), fetch(e12, {
    credentials: "same-origin",
    headers: o
  }).then((a) => {
    if (!a.ok)
      throw Error(a.statusText);
    return a[r]();
  }).then((a) => (t(void 0, a), a)).catch((a) => (console.error(`Could not fetch ${e12}`, a), t(a, void 0), a)).finally(() => {
    n.publish("requestReceived", e12), iv -= 1;
  });
}
function Sge(e12, t, r) {
  return LV(e12, t, "text", r);
}
async function BV(e12, t, r) {
  return e12.indexOf("hg19") >= 0 && await QR(1), LV(e12, t, "json", r);
}
var wge = (e12, t, r, n, i) => {
  const o = `${w1(e12)}/tileset_info/?d=${t}&s=${B0}`;
  i.publish("requestSent", o), BV(o, (a, s) => {
    i.publish("requestReceived", o), a ? n ? n(`Error retrieving tilesetInfo from: ${e12}`) : console.warn("Error retrieving: ", o) : r(s);
  }, i);
};
var Je = {
  calculateResolution: gge,
  calculateTileAndPosInTile: yge,
  calculateTiles: _ge,
  calculateTilesFromResolution: Tge,
  calculateTileWidth: bge,
  calculateZoomLevel: vge,
  calculateZoomLevelFromResolutions: mge,
  fetchTilesDebounced: pge,
  json: BV,
  text: Sge,
  tileDataToPixData: Ege,
  trackInfo: wge
};
var Age = Object.freeze(Object.defineProperty({
  __proto__: null,
  ElementResizeListener: MV,
  get authHeader() {
    return pd;
  },
  chromInfo: XR,
  createDomEvent: NV,
  getTileProxyAuthHeader: fge,
  get requestsInFlight() {
    return iv;
  },
  setTileProxyAuthHeader: ov,
  tileProxy: Je,
  tileResponseToData: WR
}, Symbol.toStringTag, { value: "Module" }));
var FV = (e12) => (MV.listen(), [e12.clientWidth, e12.clientHeight]);
var Zi = (e12, t) => {
  let r = null;
  const n = (i) => (i.uid === t && (r = i), i.type.substr(0, 8) === "combined" && i.contents.forEach(n), null);
  return Object.keys(e12).map((i) => e12[i]).filter((i) => i.filter).reduce((i, o) => i.concat(o), []).forEach(n), r;
};
var Oge = (e12, t, r) => {
  const i = e12.state.views[t];
  if (!i)
    return null;
  let o = null;
  const a = (l) => (l.uid === r && (o = l), l.type.substr(0, 8) === "combined" && l.contents.forEach(a), null), s = i.tracks;
  return Object.keys(s).map((l) => s[l]).filter((l) => l.filter).reduce((l, u) => l.concat(u), []).forEach(a), o;
};
var Om = (e12, t, r) => {
  const n = t ? e12[t] : Object.values(e12)[0];
  if (!n) {
    console.warn(t ? `Could't find view with id "${t}"` : "No views available.");
    return;
  }
  let i = n.trackRenderer.trackDefObjects[r];
  return i ? i = i.trackObject : Object.values(n.trackRenderer.trackDefObjects).map((o) => o.trackObject).filter((o) => o.childTracks).forEach((o) => {
    o.createdTracks[r] && (i = o.createdTracks[r]);
  }), i;
};
function ub(e12) {
  return e12.type === "combined";
}
function Ige(e12) {
  return "deltaY" in e12 && "deltaMode" in e12;
}
function $V(e12) {
  return e12 !== null && typeof e12 == "object";
}
function Pge(e12) {
  return $V(e12) && "max_width" in e12;
}
function Cge(e12) {
  return $V(e12) && "resolutions" in e12;
}
var YR = (e12, t, r = true, n = null) => e12.forEach((i) => {
  r && ub(i) && YR(i.contents, t, r, n), t(i, n);
});
var hs = (e12, t, r = true) => {
  const n = [];
  for (const [i, o] of Object.entries(e12))
    YR(o, t, r, i), n.push(...o);
  return n;
};
var Jm = (e12, t) => {
  let r = null;
  return hs(e12, (n, i) => {
    n.uid === t && (r = i);
  }), r;
};
var qR = (e12) => (t) => Array.prototype.map.call(t, e12);
var HV = () => [window, qR((e12) => e12.charCodeAt(0))("1.13.4").map((e12) => e12 <= 999 ? `00${e12}`.slice(-3) : e12).join("")];
var UV = (e12, t = 1, r = 100, n = 0, i = 0, o = 0, a = 100) => {
  const s = document.createElement("canvas");
  s.width = t, s.height = r;
  const l = s.getContext("2d");
  if (!l)
    throw new Error("Could not get canvas context");
  const u = l.createLinearGradient(n, i, o, a);
  return e12.forEach((c) => {
    u.addColorStop(c.from, c.color);
  }), l.fillStyle = u, l.fillRect(0, 0, t, r), s;
};
var jV = (e12, t) => {
  let r = e12;
  for (; r && r !== t && r.tagName !== "HTML"; )
    r = r.parentNode;
  return r === t;
};
var GV = (e12) => parseInt(e12.replace(/^#/, ""), 16);
var zV = () => {
};
function xge(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function $F(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, Dge(n.key), n);
  }
}
function kge(e12, t, r) {
  return t && $F(e12.prototype, t), r && $F(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function Dge(e12) {
  var t = Rge(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function Rge(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
var KR = function() {
  function e12(t) {
    xge(this, e12), this.context = t;
    const {
      tracks: r,
      createTrackObject: n
    } = t;
    this.childTracks = r.map(n), this.createdTracks = {}, this.uid = Gt.nice(), this.childTracks.forEach((i, o) => {
      this.createdTracks[r[o].uid] = i;
    });
    for (let i = 0; i < this.childTracks.length; i++)
      this.childTracks[i] || console.error("Empty child track in CombinedTrack:", this);
  }
  return kge(e12, [{
    key: "updateContents",
    value: function(r, n) {
      const i = [], o = /* @__PURE__ */ new Set();
      r.forEach((l) => {
        if (o.add(l.uid), l.uid in this.createdTracks)
          i.push(this.createdTracks[l.uid]);
        else {
          const u = n(l);
          u.setPosition(this.position), u.setDimensions(this.dimensions), i.push(u), u.zoomed(this._xScale, this._yScale), this.createdTracks[l.uid] = u;
        }
      }), this.childTracks = i;
      const a = new Set(Object.keys(this.createdTracks));
      return [...new Set([...a].filter((l) => !o.has(l)))].forEach((l) => {
        this.createdTracks[l].remove(), delete this.createdTracks[l];
      }), this;
    }
  }, {
    key: "setPosition",
    value: function(r) {
      this.position = r;
      for (let n = 0; n < this.childTracks.length; n++)
        this.childTracks[n].setPosition(r);
    }
  }, {
    key: "setDimensions",
    value: function(r) {
      this.dimensions = r;
      for (let n = 0; n < this.childTracks.length; n++)
        this.childTracks[n].setDimensions(r);
    }
  }, {
    key: "zoomed",
    value: function(r, n, i, o, a, s, l) {
      this._xScale = r, this._yScale = n;
      for (let u = 0; u < this.childTracks.length; u++)
        this.childTracks[u].zoomed(r, n, i, o, a, s, l);
    }
    // refXScale(xScale) {
    //   for (let i = 0; i < this.childTracks.length; i++) {
    //     this.childTracks[i].refXScale(xScale);
    //   }
    // }
    // refYScale(yScale) {
    //   for (let i = 0; i < this.childTracks.length; i++) {
    //     this.childTracks[i].refYScale(yScale);
    //   }
    // }
  }, {
    key: "clickOutside",
    value: function() {
      for (let r = 0; r < this.childTracks.length; r++)
        this.childTracks[r].clickOutside();
    }
  }, {
    key: "click",
    value: function(...r) {
      for (let n = 0; n < this.childTracks.length; n++)
        this.childTracks[n].click(...r);
    }
  }, {
    key: "draw",
    value: function() {
    }
    // xScale(xScale) {
    //   this._xScale = xScale;
    //   for (let i = 0; i < this.childTracks.length; i++) {
    //     this.childTracks[i].xScale(xScale);
    //   }
    // }
    // yScale(xScale) {
    //   this._yScale = yScale;
    //   for (let i = 0; i < this.childTracks.length; i++) {
    //     this.childTracks[i].yScale(yScale);
    //   }
    // }
  }, {
    key: "refScalesChanged",
    value: function(r, n) {
      for (let i = 0; i < this.childTracks.length; i++)
        this.childTracks[i].refScalesChanged(r, n);
    }
  }, {
    key: "remove",
    value: function() {
      for (let r = 0; r < this.childTracks.length; r++)
        this.childTracks[r].remove();
    }
  }, {
    key: "exportSVG",
    value: function() {
      const r = document.createElement("g");
      for (const n of this.childTracks)
        n.exportSVG && r.appendChild(n.exportSVG()[0]);
      return [r, r];
    }
  }, {
    key: "rerender",
    value: function(r) {
    }
  }, {
    key: "minValue",
    value: function(r) {
      if (arguments.length === 0) {
        const n = this.childTracks.filter((i) => i.minValue).map((i) => i.minValue()).filter((i) => i);
        return Math.min(...n);
      }
      for (const n of this.childTracks)
        n.minValue && n.minValue(r);
    }
  }, {
    key: "maxValue",
    value: function(r) {
      if (arguments.length === 0) {
        const n = this.childTracks.filter((i) => i.maxValue).map((i) => i.maxValue()).filter((i) => i);
        return Math.max(...n);
      }
      for (const n of this.childTracks)
        n.maxValue && n.maxValue(r);
    }
  }, {
    key: "respondsToPosition",
    value: function(r, n) {
      return r >= this.position[0] && r <= this.dimensions[0] + this.position[0] && n >= this.position[1] && n <= this.dimensions[1] + this.position[1];
    }
  }, {
    key: "stopHover",
    value: function() {
      for (const r of this.childTracks)
        r.stopHover && r.stopHover();
    }
  }, {
    key: "getMouseOverHtml",
    value: function(r, n) {
      let i = "";
      for (const o of this.childTracks)
        if (o.getMouseOverHtml) {
          const a = o.getMouseOverHtml(r, n);
          a && a.length && (i += a, i += "<br/>");
        }
      return i;
    }
  }]), e12;
}();
var VV = (e12, t) => t === e12 ? true : t instanceof KR ? Object.keys(t.createdTracks).map((r) => t.createdTracks[r]).some((r) => VV(e12, r)) : false;
var ZR = (e12, t, r, n, i, o, a = false) => a ? e12 >= r && e12 <= n || t >= i && t <= o : e12 >= r && e12 <= n && t >= i && t <= o;
var Nge = (e12) => Math.log(Math.tan((e12 + Math.PI / 2) / 2));
var Mge = (e12, t) => {
  let r = e12 * Math.PI / 180;
  return r = Nge(r), 2 ** t * (Math.PI - r) / (2 * Math.PI);
};
var E1 = (e12) => qR((t) => e12[t])(Object.keys(e12));
var Lge = (e12) => E1(e12).map((t) => t.chromInfoPath).forEach((t) => XR.get(t));
var Bge = (e12, t) => 2 ** t * (e12 + 180) / 360;
var OP = (e12, t) => e12 > t ? e12 : t;
var HF = 1e-7;
function IP(e12) {
  let t = Number.MIN_SAFE_INTEGER;
  for (let r = 0; r < e12.length; r++) {
    const n = e12[r];
    n < HF && n > -HF || n > t && (t = n);
  }
  return t;
}
var XV = (e12, t) => e12 < t ? e12 : t;
var UF = 1e-7;
function PP(e12) {
  let t = Number.MAX_SAFE_INTEGER;
  for (let r = 0; r < e12.length; r++) {
    const n = e12[r];
    n < UF && n > -UF || n < t && (t = n);
  }
  return t;
}
var Fge = (e12, t) => (e12 % t + t) % t;
var WV = (e12, t) => {
  const r = +t;
  if (!Number.isNaN(r))
    if (e12.dimension === 1)
      for (let i = 0; i < e12.shape[0]; ++i)
        e12.set(i, r);
    else
      for (let i = 0; i < e12.shape[0]; ++i)
        for (let o = 0; o < e12.shape[1]; ++o)
          e12.set(i, o, r);
  else {
    const i = e12.shape[0], o = e12.shape[1], a = t.shape[0], s = t.shape[1];
    if (i !== a || o !== s) {
      console.warn("Cannot assign source to target ndarray as the dimensions do not match", i, a, o, s);
      return;
    }
    if (e12.dimension === 1)
      for (let l = 0; l < e12.shape[0]; ++l)
        e12.set(l, t.get(l));
    else
      for (let l = 0; l < e12.shape[0]; ++l)
        for (let u = 0; u < e12.shape[1]; ++u)
          e12.set(l, u, t.get(l, u));
  }
};
function $ge(e12) {
  for (var t = new Array(e12), r = 0; r < e12; ++r)
    t[r] = r;
  return t;
}
var Hge = $ge;
var Uge = function(e12) {
  return e12 != null && (YV(e12) || jge(e12) || !!e12._isBuffer);
};
function YV(e12) {
  return !!e12.constructor && typeof e12.constructor.isBuffer == "function" && e12.constructor.isBuffer(e12);
}
function jge(e12) {
  return typeof e12.readFloatLE == "function" && typeof e12.slice == "function" && YV(e12.slice(0, 0));
}
var Gge = Hge;
var zge = Uge;
var Vge = typeof Float64Array < "u";
function Xge(e12, t) {
  return e12[0] - t[0];
}
function Wge() {
  var e12 = this.stride, t = new Array(e12.length), r;
  for (r = 0; r < t.length; ++r)
    t[r] = [Math.abs(e12[r]), r];
  t.sort(Xge);
  var n = new Array(t.length);
  for (r = 0; r < n.length; ++r)
    n[r] = t[r][1];
  return n;
}
function Yge(e12, t) {
  var r = ["View", t, "d", e12].join("");
  t < 0 && (r = "View_Nil" + e12);
  var n = e12 === "generic";
  if (t === -1) {
    var i = "function " + r + "(a){this.data=a;};var proto=" + r + ".prototype;proto.dtype='" + e12 + "';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new " + r + "(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_" + r + "(a){return new " + r + "(a);}", m = new Function(i);
    return m();
  } else if (t === 0) {
    var i = "function " + r + "(a,d) {this.data = a;this.offset = d};var proto=" + r + ".prototype;proto.dtype='" + e12 + "';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function " + r + "_copy() {return new " + r + "(this.data,this.offset)};proto.pick=function " + r + "_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function " + r + "_get(){return " + (n ? "this.data.get(this.offset)" : "this.data[this.offset]") + "};proto.set=function " + r + "_set(v){return " + (n ? "this.data.set(this.offset,v)" : "this.data[this.offset]=v") + "};return function construct_" + r + "(a,b,c,d){return new " + r + "(a,d)}", m = new Function("TrivialArray", i);
    return m(F0[e12][0]);
  }
  var i = ["'use strict'"], o = Gge(t), a = o.map(function(g) {
    return "i" + g;
  }), s = "this.offset+" + o.map(function(g) {
    return "this.stride[" + g + "]*i" + g;
  }).join("+"), l = o.map(function(g) {
    return "b" + g;
  }).join(","), u = o.map(function(g) {
    return "c" + g;
  }).join(",");
  i.push("function " + r + "(a," + l + "," + u + ",d){this.data=a", "this.shape=[" + l + "]", "this.stride=[" + u + "]", "this.offset=d|0}", "var proto=" + r + ".prototype", "proto.dtype='" + e12 + "'", "proto.dimension=" + t), i.push("Object.defineProperty(proto,'size',{get:function " + r + "_size(){return " + o.map(function(g) {
    return "this.shape[" + g + "]";
  }).join("*"), "}})"), t === 1 ? i.push("proto.order=[0]") : (i.push("Object.defineProperty(proto,'order',{get:"), t < 4 ? (i.push("function " + r + "_order(){"), t === 2 ? i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})") : t === 3 && i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")) : i.push("ORDER})")), i.push("proto.set=function " + r + "_set(" + a.join(",") + ",v){"), n ? i.push("return this.data.set(" + s + ",v)}") : i.push("return this.data[" + s + "]=v}"), i.push("proto.get=function " + r + "_get(" + a.join(",") + "){"), n ? i.push("return this.data.get(" + s + ")}") : i.push("return this.data[" + s + "]}"), i.push("proto.index=function " + r + "_index(", a.join(), "){return " + s + "}"), i.push("proto.hi=function " + r + "_hi(" + a.join(",") + "){return new " + r + "(this.data," + o.map(function(g) {
    return ["(typeof i", g, "!=='number'||i", g, "<0)?this.shape[", g, "]:i", g, "|0"].join("");
  }).join(",") + "," + o.map(function(g) {
    return "this.stride[" + g + "]";
  }).join(",") + ",this.offset)}");
  var c = o.map(function(g) {
    return "a" + g + "=this.shape[" + g + "]";
  }), f = o.map(function(g) {
    return "c" + g + "=this.stride[" + g + "]";
  });
  i.push("proto.lo=function " + r + "_lo(" + a.join(",") + "){var b=this.offset,d=0," + c.join(",") + "," + f.join(","));
  for (var h = 0; h < t; ++h)
    i.push("if(typeof i" + h + "==='number'&&i" + h + ">=0){d=i" + h + "|0;b+=c" + h + "*d;a" + h + "-=d}");
  i.push("return new " + r + "(this.data," + o.map(function(g) {
    return "a" + g;
  }).join(",") + "," + o.map(function(g) {
    return "c" + g;
  }).join(",") + ",b)}"), i.push("proto.step=function " + r + "_step(" + a.join(",") + "){var " + o.map(function(g) {
    return "a" + g + "=this.shape[" + g + "]";
  }).join(",") + "," + o.map(function(g) {
    return "b" + g + "=this.stride[" + g + "]";
  }).join(",") + ",c=this.offset,d=0,ceil=Math.ceil");
  for (var h = 0; h < t; ++h)
    i.push("if(typeof i" + h + "==='number'){d=i" + h + "|0;if(d<0){c+=b" + h + "*(a" + h + "-1);a" + h + "=ceil(-a" + h + "/d)}else{a" + h + "=ceil(a" + h + "/d)}b" + h + "*=d}");
  i.push("return new " + r + "(this.data," + o.map(function(g) {
    return "a" + g;
  }).join(",") + "," + o.map(function(g) {
    return "b" + g;
  }).join(",") + ",c)}");
  for (var d = new Array(t), p = new Array(t), h = 0; h < t; ++h)
    d[h] = "a[i" + h + "]", p[h] = "b[i" + h + "]";
  i.push("proto.transpose=function " + r + "_transpose(" + a + "){" + a.map(function(g, v) {
    return g + "=(" + g + "===undefined?" + v + ":" + g + "|0)";
  }).join(";"), "var a=this.shape,b=this.stride;return new " + r + "(this.data," + d.join(",") + "," + p.join(",") + ",this.offset)}"), i.push("proto.pick=function " + r + "_pick(" + a + "){var a=[],b=[],c=this.offset");
  for (var h = 0; h < t; ++h)
    i.push("if(typeof i" + h + "==='number'&&i" + h + ">=0){c=(c+this.stride[" + h + "]*i" + h + ")|0}else{a.push(this.shape[" + h + "]);b.push(this.stride[" + h + "])}");
  i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"), i.push("return function construct_" + r + "(data,shape,stride,offset){return new " + r + "(data," + o.map(function(g) {
    return "shape[" + g + "]";
  }).join(",") + "," + o.map(function(g) {
    return "stride[" + g + "]";
  }).join(",") + ",offset)}");
  var m = new Function("CTOR_LIST", "ORDER", i.join(`
`));
  return m(F0[e12], Wge);
}
function qge(e12) {
  if (zge(e12))
    return "buffer";
  if (Vge)
    switch (Object.prototype.toString.call(e12)) {
      case "[object Float64Array]":
        return "float64";
      case "[object Float32Array]":
        return "float32";
      case "[object Int8Array]":
        return "int8";
      case "[object Int16Array]":
        return "int16";
      case "[object Int32Array]":
        return "int32";
      case "[object Uint8Array]":
        return "uint8";
      case "[object Uint16Array]":
        return "uint16";
      case "[object Uint32Array]":
        return "uint32";
      case "[object Uint8ClampedArray]":
        return "uint8_clamped";
      case "[object BigInt64Array]":
        return "bigint64";
      case "[object BigUint64Array]":
        return "biguint64";
    }
  return Array.isArray(e12) ? "array" : "generic";
}
var F0 = {
  float32: [],
  float64: [],
  int8: [],
  int16: [],
  int32: [],
  uint8: [],
  uint16: [],
  uint32: [],
  array: [],
  uint8_clamped: [],
  bigint64: [],
  biguint64: [],
  buffer: [],
  generic: []
};
function Kge(e12, t, r, n) {
  if (e12 === void 0) {
    var u = F0.array[0];
    return u([]);
  } else
    typeof e12 == "number" && (e12 = [e12]);
  t === void 0 && (t = [e12.length]);
  var i = t.length;
  if (r === void 0) {
    r = new Array(i);
    for (var o = i - 1, a = 1; o >= 0; --o)
      r[o] = a, a *= t[o];
  }
  if (n === void 0) {
    n = 0;
    for (var o = 0; o < i; ++o)
      r[o] < 0 && (n -= (t[o] - 1) * r[o]);
  }
  for (var s = qge(e12), l = F0[s]; l.length <= i + 1; )
    l.push(Yge(s, l.length - 1));
  var u = l[i + 1];
  return u(e12, t, r, n);
}
var Zge = Kge;
var kf = Ui(Zge);
var qV = (e12) => {
  const t = e12.shape.reduce((n, i) => n * i, 1), r = new Array(t);
  if (e12.dimension === 1) {
    let n = 0;
    for (let i = 0; i < e12.shape[0]; ++i)
      r[n] = e12.get(i), n++;
  } else {
    let n = 0;
    for (let i = 0; i < e12.shape[0]; ++i)
      for (let o = 0; o < e12.shape[1]; ++o)
        r[n] = e12.get(i, o), n++;
  }
  return r;
};
var KV = (e12) => e12.shape.length === 1 ? e12 : kf(qV(e12));
var ZV = (e12) => {
  const t = e12.split("."), r = t.slice(1).join("").length;
  return +t.join("") / 10 ** r;
};
var qv = (e12, t) => e12 || t;
function S1(e12) {
  const t = [], r = {}, n = {};
  let i = 0;
  for (let o = 0; o < e12.length; o++) {
    const a = Number(e12[o][1]);
    i += a;
    const s = {
      id: o,
      chr: e12[o][0],
      pos: i - a
    };
    t.push(s), n[s.chr] = s, r[e12[o][0]] = a;
  }
  return {
    cumPositions: t,
    chrPositions: n,
    totalLength: i,
    chromLengths: r
  };
}
var CP = (e12) => {
  const t = document.createElement("g"), r = document.createElement("text");
  return e12.anchor.x === 0 ? r.setAttribute("text-anchor", "start") : e12.anchor.x === 1 ? r.setAttribute("text-anchor", "end") : r.setAttribute("text-anchor", "middle"), r.setAttribute("font-family", e12.style.fontFamily), r.setAttribute("font-size", e12.style.fontSize), t.setAttribute("transform", `scale(${e12.scale.x},1)`), r.setAttribute("fill", e12.style.fill), r.innerHTML = e12.text, t.appendChild(r), t.setAttribute("transform", `translate(${e12.x},${e12.y})scale(${e12.scale.x},1)`), t;
};
var Qge = (e12) => {
  try {
    const t = e12.split(".");
    return (r) => {
      let n = r;
      return t.forEach((i) => {
        n = n[i];
      }), n;
    };
  } catch {
    return;
  }
};
var Jge = (e12, t, r, n, i, o, a = 0, s = 0, l) => {
  const u = o ? i : n, c = o ? n : i, f = o ? s : a, h = o ? a : s, d = Math.max(0, +u[0] || 0), p = Math.max(0, +u[1] || 0), m = Math.max(0, +c[0] || 0), g = Math.max(0, +c[1] || 0);
  let v = [];
  ArrayBuffer.isView(l) || console.warn("Not supported yet");
  try {
    const _ = new l.constructor(l.length);
    let y = 0 + h;
    for (let T = m; T < g; T++)
      _.set(e12.slice(T * t + d, T * t + p), f + y * r), y += 1;
    const b = o ? dV(r, r) : void 0;
    v = pV(l, _, b);
  } catch {
  }
  return v;
};
var eve = (e12, t, r, n) => [n.chrPositions[e12].pos + +t, n.chrPositions[e12].pos + +r];
var tve = "http://www.w3.org/2000/svg";
var rve = (e12, t) => {
  const r = new RegExp(`(\\s|^)${t}(\\s|$)`);
  if (e12.namespaceURI === tve) {
    const n = e12.getAttribute("class") || "";
    e12.setAttribute("class", n.replace(r, " "));
  } else
    e12.classList ? e12.classList.remove(t) : P0(e12, t) && (e12.className = e12.className.replace(r, " "));
};
var Df = (e12, t) => {
  e12.select(".selection").attr("fill", null).attr("fill-opacity", null).attr("stroke", null).classed(t, true);
};
var Qw = (e12) => {
  const t = e12.toString(16);
  return t.length === 1 ? `0${t}` : t;
};
var nve = (e12, t, r) => `#${Qw(e12)}${Qw(t)}${Qw(r)}`;
var un = (e12, t) => {
  const r = e12.invert((e12.range()[0] + e12.range()[1]) / 2), n = t.invert((t.range()[0] + t.range()[1]) / 2), i = e12.invert(1) - e12.invert(0);
  return [r, n, i];
};
var QV = (e12, t, r) => {
  if (r === null || !e12 || !t)
    return;
  const n = e12.domain()[0], i = e12.domain()[1], o = t.domain()[0], a = t.domain()[1];
  return [...N0(n, i, r), ...N0(o, a, r)];
};
var ive = 11184810;
var ove = 1;
var ave = (e12, t, r, n, i, o, a, s, l) => {
  e12.publish("app.animateOnMouseMove", true);
  const u = r.mousePositionColor ? GV(r.mousePositionColor) : ive, c = r.mousePositionAlpha || ove, f = new Ue.PIXI.Graphics(), h = () => {
    f.clear();
  }, d = (m, g, v) => {
    if (v || h(), f.lineStyle(1, u, c), g) {
      const _ = s ? i()[0] : 0;
      f.moveTo(0, m), f.lineTo(o()[0] + _, m);
    } else {
      const _ = s ? i()[1] : 0;
      f.moveTo(m, 0), f.lineTo(m, o()[1] + _);
    }
  }, p = (m) => {
    if (m.noHoveredTracks)
      return h(), f;
    let g, v;
    m.isFromVerticalTrack ? (g = m.dataY, v = m.dataY) : (g = m.dataX, v = m.isFrom2dTrack ? m.dataY : m.dataX);
    const _ = s ? i() : [0, 0], y = a() ? n()[0](v) + _[1] : n()[0](g) + _[0];
    return d(y), s && d(n()[1](v) + _[1], true, true), f;
  };
  return t.push(e12.subscribe("app.mouseMove", p)), t.push(e12.subscribe("app.mouseLeave", h)), t.push(e12.subscribe("blur", h)), l && t.push(Zm.subscribe("higlass.mouseMove", p)), f;
};
var _u = (e12, t = false, r = false) => {
  const n = t ? e12.pMasked : e12.pForeground || e12.pMain;
  if (!n)
    throw new Error("setupShowMousePosition: No scene found. Please make sure to call this method after the scene has been initialized.");
  const i = () => [e12.xScale(), e12.yScale()], o = ave(e12.pubSub, e12.pubSubs, e12.options, i, e12.getPosition.bind(e12), e12.getDimensions.bind(e12), e12.getProp("flipText"), t, r);
  return n.addChild(o), () => {
    n.removeChild(o);
  };
};
var sve = (e12) => (t) => Array.prototype.some.call(t, e12);
var Ol = (e12, t) => e12 + t;
var JV = (e12, t, r, n, i, o) => {
  const a = document.createElement("line");
  return a.setAttribute("x1", e12), a.setAttribute("x2", r), a.setAttribute("y1", t), a.setAttribute("y2", n), i && a.setAttribute("stroke-width", i), o && a.setAttribute("stroke", o), a;
};
var e22 = (e12, t, r) => {
  let n, i = 0;
  const o = () => {
    n = void 0;
  }, a = (...u) => {
    const c = () => {
      i > 0 && (e12(...u), i = 0);
    };
    clearTimeout(n), n = setTimeout(c, r);
  };
  a.cancel = () => {
    clearTimeout(n), o();
  }, a.immediate = (...u) => {
    e12(...u);
  };
  let s = false;
  return (u, ...c) => {
    s ? i++ : (e12(...c), a(...c), s = true, i = 0, setTimeout(() => {
      s = false;
    }, t));
  };
};
var lve = (e12, t = 256, r = 256) => {
  const n = document.createElement("canvas");
  n.width = t, n.height = r;
  const i = n.getContext("2d");
  if (!i)
    throw new Error("Could not get canvas context");
  i.fillStyle = "transparent", i.fillRect(0, 0, n.width, n.height);
  const o = new ImageData(e12, n.width, n.height);
  return i.putImageData(o, 0, 0), n;
};
var QR = (e12) => new Promise((t) => {
  setTimeout(t, e12);
});
var cve = (e12) => {
  if (!e12.tracks)
    return 0;
  let t = 0;
  return e12.tracks.top && (t += e12.tracks.top.map((r) => r.height).reduce((r, n) => r + n, 0)), e12.tracks.center && (t += e12.tracks.center.map((r) => r.height).reduce((r, n) => r + n, 0)), e12.tracks.bottom && (t += e12.tracks.bottom.map((r) => r.height).reduce((r, n) => r + n, 0)), t;
};
var qo = () => {
};
var w1 = (e12) => (e12 || "").replace(/\/$/, "");
var JR = (e12, t, r = 0, n = 1e-6) => (i) => {
  let o = 255;
  return i > n && (o = Math.max(0, Math.min(255, Math.floor(e12(i + r))))), t[o];
};
var hb = (e12) => {
  let t = [];
  for (let r = 0; r < e12.length; r++)
    e12[r].contents ? t = t.concat(e12[r].contents) : t.push(e12[r]);
  return t;
};
function t2(e12, t, r, n) {
  this.interval = [e12, t], this.max = -1 / 0, this.parentNode = null, this.left = r, this.right = n;
}
function $s() {
  this.root = null;
}
function jF(e12, t, r) {
  let n = new t2(r[0], r[1]);
  if (n.max = r[1], n.parentNode = e12, e12[t] = n, e12.max < r[1])
    for (; n; )
      n.max < r[1] && (n.max = r[1]), n = n.parentNode;
}
function xP(e12, t) {
  e12.interval[0] > t[0] ? e12.left ? xP(e12.left, t) : jF(e12, "left", t) : e12.right ? xP(e12.right, t) : jF(e12, "right", t);
}
$s.prototype.add = function(t) {
  if (!this.root) {
    this.root = new t2(t[0], t[1]), this.root.max = t[1];
    return;
  }
  xP(this.root, t);
};
function r2(e12, t) {
  if (!t)
    return false;
  if (t.interval[0] <= e12 && t.interval[1] >= e12)
    return true;
  let r = false, n;
  return ["left", "right"].forEach((i) => {
    n = t[i], n && n.max > e12 && (r = r || r2(e12, n));
  }), r;
}
$s.prototype.contains = function(t) {
  return r2(t, this.root);
};
function uve(e12, t) {
  return (
    // The first case checks for completely overlapping
    // intervals. Necessary because we usually consider
    // the ends to be open ended and that misses completely
    // overlapping intervals
    e12[0] === t[0] && e12[1] === t[1] || e12[0] < t[0] && e12[1] > t[0] || e12[0] < t[1] && e12[1] > t[1] || t[0] < e12[0] && t[1] > e12[0] || t[0] < e12[1] && t[1] > e12[1]
  );
}
function n2(e12, t) {
  if (!t)
    return false;
  if (uve(t.interval, e12))
    return true;
  let r = false, n;
  return ["left", "right"].forEach((i) => {
    n = t[i], n && n.max >= e12[0] && (r = r || n2(e12, n));
  }), r;
}
$s.prototype.intersects = function(t) {
  return n2(t, this.root);
};
function kP(e12) {
  return e12 ? 1 + Math.max(kP(e12.left), kP(e12.right)) : 0;
}
$s.prototype.height = function() {
  return kP(this.root);
};
$s.prototype.findMax = function(t) {
  const r = [t];
  let n, i = -1 / 0, o;
  for (; r.length; )
    n = r.pop(), n.left && r.push(n.left), n.right && r.push(n.right), n.interval[1] > i && (i = n.interval[1], o = n);
  return o;
};
$s.prototype._removeHelper = function(t, r) {
  if (r)
    if (r.interval[0] === t[0] && r.interval[1] === t[1]) {
      if (r.left && r.right) {
        let i = r.left;
        for (; i.left; )
          i = i.left;
        const o = i.interval;
        i.interval = r.interval, r.interval = o, this._removeHelper(i.interval, r);
      } else {
        let i = "left";
        r.right && (i = "right");
        const o = r.parentNode;
        o ? (o.left === r ? o.left = r[i] : o.right = r[i], r[i] && (r[i].parentNode = o)) : (this.root = r[i], this.root && (this.root.parentNode = null));
      }
      const n = r.parentNode;
      if (n) {
        let i = this.findMax(n);
        const o = i.interval[1];
        for (; i; )
          i.max === r.interval[1] ? (i.max = o, i = i.parentNode) : i = false;
      }
    } else
      this._removeHelper(t, r.left), this._removeHelper(t, r.right);
};
$s.prototype.remove = function(t) {
  return this._removeHelper(t, this.root);
};
function $0(e12) {
  e12.sort((n, i) => i.to - i.from - (n.to - n.from));
  const t = [[]], r = [new $s()];
  for (let n = 0; n < e12.length; n++) {
    let i = false;
    for (let o = 0; o < t.length; o++) {
      const a = r[o], s = [+e12[n].from, +e12[n].to];
      if (!a.intersects(s)) {
        a.add(s), t[o].push(e12[n]), i = true;
        break;
      }
    }
    if (!i) {
      const o = new $s();
      o.add([e12[n].from, e12[n].to]), t.push([e12[n]]), r.push(o);
    }
  }
  return t;
}
function hve(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function GF(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, dve(n.key), n);
  }
}
function fve(e12, t, r) {
  return t && GF(e12.prototype, t), r && GF(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function dve(e12) {
  var t = pve(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function pve(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
var H0 = function() {
  function e12(t) {
    hve(this, e12), this.epsilon = 1e-6, this.data = t, this.tileSize = this.data.length, this.paddedTileSize = 2 ** Math.ceil(Math.log2(this.tileSize)), this.numSubsets = Math.min(PV, this.paddedTileSize), this.subsetSize = this.paddedTileSize / this.numSubsets, this.subsetMinimums = this.computeSubsetNonZeroMinimums(), this.subsetMaximums = this.computeSubsetNonZeroMaximums(), this.minNonZeroInTile = this.getMinNonZeroInTile(), this.maxNonZeroInTile = this.getMaxNonZeroInTile();
  }
  return fve(e12, [{
    key: "getMinNonZeroInSubset",
    value: function(r) {
      const n = r[0], i = r[1];
      let o = Number.MAX_SAFE_INTEGER;
      if (n === 0 && i === this.tileSize)
        return this.minNonZeroInTile;
      const a = Math.ceil(n / this.subsetSize), s = Math.floor((i - 1) / this.subsetSize);
      return a >= s ? this.minNonZero(this.data, n, i) : (n < a * this.subsetSize && (o = Math.min(o, this.minNonZero(this.data, n, a * this.subsetSize))), o = Math.min(o, this.minNonZero(this.subsetMinimums, a, s)), i > s * this.subsetSize && (o = Math.min(o, this.minNonZero(this.data, s * this.subsetSize, i))), o);
    }
    /**
     * Computes the non-zero maximum in a subset using precomputed values, if possible
     *
     * @param {[start: number, end: number]}  indexBounds
     * @return {number} non-zero maxium of the subset
     */
  }, {
    key: "getMaxNonZeroInSubset",
    value: function(r) {
      const n = r[0], i = r[1];
      let o = Number.MIN_SAFE_INTEGER;
      if (n === 0 && i === this.tileSize)
        return this.maxNonZeroInTile;
      const a = Math.ceil(n / this.subsetSize), s = Math.floor((i - 1) / this.subsetSize);
      return a >= s ? this.maxNonZero(this.data, n, i) : (n < a * this.subsetSize && (o = Math.max(o, this.maxNonZero(this.data, n, a * this.subsetSize))), o = Math.max(o, this.maxNonZero(this.subsetMaximums, a, s)), i > s * this.subsetSize && (o = Math.max(o, this.maxNonZero(this.data, s * this.subsetSize, i))), o);
    }
    /**
     * Precomputes non-zero minimums of subsets of the given data vector
     *
     * @returns {Array<number>} - Minimums of the regularly subdivided data vector
     */
  }, {
    key: "computeSubsetNonZeroMinimums",
    value: function() {
      const r = [];
      for (let n = 0; n < this.numSubsets; n++) {
        let i = Number.MAX_SAFE_INTEGER;
        for (let o = 0; o < this.subsetSize; o++) {
          const a = this.data[n * this.subsetSize + o];
          a !== void 0 && (a < this.epsilon && a > -this.epsilon || a < i && (i = a));
        }
        r.push(i);
      }
      return r;
    }
    /**
     * Precomputes non-zero maximums of subsets of the given data vector
     * @return {Array<number>} Maximums of the regularly subdivided data vector
     */
  }, {
    key: "computeSubsetNonZeroMaximums",
    value: function() {
      const r = [];
      for (let n = 0; n < this.numSubsets; n++) {
        let i = Number.MIN_SAFE_INTEGER;
        for (let o = 0; o < this.subsetSize; o++) {
          const a = this.data[n * this.subsetSize + o];
          a !== void 0 && (a < this.epsilon && a > -this.epsilon || a > i && (i = a));
        }
        r.push(i);
      }
      return r;
    }
    /**
     * Computes the non-zero minimum in the entire data array using precomputed values
     *
     * @return {number} Non-zeros maximum of the data
     */
  }, {
    key: "getMinNonZeroInTile",
    value: function() {
      return Math.min(...this.subsetMinimums);
    }
    /**
     * Computes the non-zero maximum in the entire data array using precomputed values
     *
     * @return {number} Non-zeros maximum of the data
     */
  }, {
    key: "getMaxNonZeroInTile",
    value: function() {
      return Math.max(...this.subsetMaximums);
    }
    /**
     * Calculate the minimum non-zero value in the data from start
     * to end. No precomputations are used to compute the min.
     *
     * @param {ArrayLike<number>} data
     * @param {number} start
     * @param {number} end
     * @return {number} non-zero min in subset
     */
  }, {
    key: "minNonZero",
    value: function(r, n, i) {
      let o = Number.MAX_SAFE_INTEGER;
      for (let a = n; a < i; a++) {
        const s = r[a];
        s < this.epsilon && s > -this.epsilon || s < o && (o = s);
      }
      return o;
    }
    /**
     * Calculate the maximum non-zero value in the data from start
     * to end. No precomputations are used to compute the max.
     *
     * @param {ArrayLike<number>} data
     * @param {number} start
     * @param {number} end
     * @return {number} non-zero max in subset
     */
  }, {
    key: "maxNonZero",
    value: function(r, n, i) {
      let o = Number.MIN_SAFE_INTEGER;
      for (let a = n; a < i; a++) {
        const s = r[a];
        s < this.epsilon && s > -this.epsilon || s > o && (o = s);
      }
      return o;
    }
  }]), e12;
}();
function mve(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function zF(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, vve(n.key), n);
  }
}
function gve(e12, t, r) {
  return t && zF(e12.prototype, t), r && zF(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function vve(e12) {
  var t = yve(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function yve(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
var eN = function() {
  function e12(t) {
    mve(this, e12), this.epsilon = 1e-6, this.tileSize = Math.sqrt(t.length), Number.isSafeInteger(this.tileSize) || console.error("The DenseDataExtrema2D module only works for data of quadratic length."), this.numSubsets = Math.min(UR, this.tileSize), this.subsetSize = this.tileSize / this.numSubsets;
    const r = kf(Array.from(t), [this.tileSize, this.tileSize]);
    this.subsetMinimums = this.computeSubsetNonZeroMinimums(r), this.subsetMaximums = this.computeSubsetNonZeroMaximums(r), this.minNonZeroInTile = this.getMinNonZeroInTile(), this.maxNonZeroInTile = this.getMaxNonZeroInTile();
  }
  return gve(e12, [{
    key: "getMinNonZeroInSubset",
    value: function(r) {
      const n = r[0], i = r[1], o = r[2], a = r[3], s = Math.floor(i / this.subsetSize), l = Math.floor(n / this.subsetSize), u = Math.ceil((a + 1) / this.subsetSize) - s, c = Math.ceil((o + 1) / this.subsetSize) - l;
      return this.getMinNonZeroInNdarraySubset(this.subsetMinimums, s, l, c, u);
    }
    /**
     * Computes an approximation of the non-zero maximum in a subset
     *
     * @param {[startX: number, startY: number, endX: number, endY: number]} indexBounds
     * @return {number} Non-zero maxium of the subset
     */
  }, {
    key: "getMaxNonZeroInSubset",
    value: function(r) {
      const n = r[0], i = r[1], o = r[2], a = r[3], s = Math.floor(i / this.subsetSize), l = Math.floor(n / this.subsetSize), u = Math.ceil((a + 1) / this.subsetSize) - s, c = Math.ceil((o + 1) / this.subsetSize) - l;
      return this.getMaxNonZeroInNdarraySubset(this.subsetMaximums, s, l, c, u);
    }
    /**
     * Precomputes non-zero minimums of subsets of a given matrix
     * @param {View2D} dataMatrix
     * @return {View2D} Matrix containing minimums of the dataMatrix after subdivision using a regular grid
     */
  }, {
    key: "computeSubsetNonZeroMinimums",
    value: function(r) {
      const n = kf(new Array(this.numSubsets ** 2), [this.numSubsets, this.numSubsets]);
      for (let i = 0; i < this.numSubsets; i++)
        for (let o = 0; o < this.numSubsets; o++) {
          const a = this.getMinNonZeroInNdarraySubset(r, i * this.subsetSize, o * this.subsetSize, this.subsetSize, this.subsetSize);
          n.set(i, o, a);
        }
      return n;
    }
    /**
     * Precomputes non-zero maximums of subsets of a given matrix
     *
     * @param {View2D} dataMatrix
     * @return {View2D} Matrix containing maximums of the dataMatrix after subdivision using a regular grid
     */
  }, {
    key: "computeSubsetNonZeroMaximums",
    value: function(r) {
      const n = kf(new Array(this.numSubsets ** 2), [this.numSubsets, this.numSubsets]);
      for (let i = 0; i < this.numSubsets; i++)
        for (let o = 0; o < this.numSubsets; o++) {
          const a = this.getMaxNonZeroInNdarraySubset(r, i * this.subsetSize, o * this.subsetSize, this.subsetSize, this.subsetSize);
          n.set(i, o, a);
        }
      return n;
    }
    /**
     * Computes the non-zero minimum of a subset of a matrix (ndarray)
     * @param {View2D} arr
     * @param {number} rowOffset - Starting row of the subset
     * @param {number} colOffset - Starting column of the subset
     * @param {number} width - Width (num columns) of the subset
     * @param {number} height - Height (num rows) of the subset
     * @return {number} Non-zeros - minimum of the subset
     */
  }, {
    key: "getMinNonZeroInNdarraySubset",
    value: function(r, n, i, o, a) {
      let s = Number.MAX_SAFE_INTEGER;
      for (let l = 0; l < o; l++)
        for (let u = 0; u < a; u++) {
          const c = r.get(n + u, i + l);
          c < this.epsilon && c > -this.epsilon || c < s && (s = c);
        }
      return s;
    }
    /**
     * Computes the non-zero maximum of a subset of a matrix (ndarray)
     * @param {View2D} arr
     * @param {number} rowOffset - Starting row of the subset
     * @param {number} colOffset - Starting column of the subset
     * @param {number} width - Width (num columns) of the subset
     * @param {number} height - Height (num rows) of the subset
     * @return {number} Non-zeros maximum of the subset
     */
  }, {
    key: "getMaxNonZeroInNdarraySubset",
    value: function(r, n, i, o, a) {
      let s = Number.MIN_SAFE_INTEGER;
      for (let l = 0; l < o; l++)
        for (let u = 0; u < a; u++) {
          const c = r.get(n + u, i + l);
          c < this.epsilon && c > -this.epsilon || c > s && (s = c);
        }
      return s;
    }
  }, {
    key: "mirrorPrecomputedExtrema",
    value: function() {
      for (let r = 1; r < this.numSubsets; r++)
        for (let n = 0; n < r; n++)
          this.subsetMinimums.set(n, r, this.subsetMinimums.get(r, n)), this.subsetMaximums.set(n, r, this.subsetMaximums.get(r, n));
    }
    /**
     * Computes the non-zero minimum in the entire data array using precomputed values
     *
     * @return {number} Non-zeros minimum of the data
     */
  }, {
    key: "getMinNonZeroInTile",
    value: function() {
      return this.getMinNonZeroInNdarraySubset(this.subsetMinimums, 0, 0, this.numSubsets, this.numSubsets);
    }
    /**
     * Computes the non-zero maximum in the entire data array using precomputed values
     *
     * @return {number} Non-zeros maximum of the data
     */
  }, {
    key: "getMaxNonZeroInTile",
    value: function() {
      return this.getMaxNonZeroInNdarraySubset(this.subsetMaximums, 0, 0, this.numSubsets, this.numSubsets);
    }
  }]), e12;
}();
var tN = (e12) => {
  let t;
  switch (e12 && e12.toLowerCase()) {
    case "mean":
      t = eP;
      break;
    case "sum":
      t = c9;
      break;
    case "variance":
      t = BD;
      break;
    case "deviation":
      t = FD;
      break;
    default:
      t = eP, console.warn("Encountered an unsupported selectedRowsAggregationMode option.");
  }
  return t;
};
var av = (e12, t) => e12.reduce((r, n) => r + (Array.isArray(n) && t ? n.length : 1), 0);
var ip = (e12) => {
  switch (e12.type) {
    case "heatmap":
    case "horizontal-1d-heatmap":
    case "horizontal-bar":
    case "horizontal-line":
    case "horizontal-point":
    case "vertical-1d-heatmap":
    case "vertical-bar":
    case "vertical-line":
    case "vertical-point":
    case "horizontal-1d-tiles":
    case "vertical-1d-tiles":
    case "2d-tiles":
    case "horizontal-gene-annotations":
    case "vertical-gene-annotations":
    case "horizontal-heatmap":
    case "vertical-heatmap":
    case "osm-tiles":
    case "mapbox-tiles":
    case "horizontal-multivec":
      return true;
    case "combined":
      return e12.contents.map((r) => ip(r)).reduce(qv, false);
    default:
      return false;
  }
};
var rN = (e12, t, r) => {
  let n = t, i = r;
  return r || (i = t, n = Object.values(e12.state.views)[0].uid), e12.tiledPlots[n].trackRenderer.getTrackObject(i);
};
var i2 = (e12, t) => e12.tiledPlots[t].trackRenderer;
var _ve = (e12, t) => e12.tiledPlots[t];
var nN = {};
var VF = Object.prototype.toString;
var o2 = function(t) {
  var r = VF.call(t), n = r === "[object Arguments]";
  return n || (n = r !== "[object Array]" && t !== null && typeof t == "object" && typeof t.length == "number" && t.length >= 0 && VF.call(t.callee) === "[object Function]"), n;
};
var Jw;
var XF;
function bve() {
  if (XF)
    return Jw;
  XF = 1;
  var e12;
  if (!Object.keys) {
    var t = Object.prototype.hasOwnProperty, r = Object.prototype.toString, n = o2, i = Object.prototype.propertyIsEnumerable, o = !i.call({
      toString: null
    }, "toString"), a = i.call(function() {
    }, "prototype"), s = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"], l = function(h) {
      var d = h.constructor;
      return d && d.prototype === h;
    }, u = {
      $applicationCache: true,
      $console: true,
      $external: true,
      $frame: true,
      $frameElement: true,
      $frames: true,
      $innerHeight: true,
      $innerWidth: true,
      $onmozfullscreenchange: true,
      $onmozfullscreenerror: true,
      $outerHeight: true,
      $outerWidth: true,
      $pageXOffset: true,
      $pageYOffset: true,
      $parent: true,
      $scrollLeft: true,
      $scrollTop: true,
      $scrollX: true,
      $scrollY: true,
      $self: true,
      $webkitIndexedDB: true,
      $webkitStorageInfo: true,
      $window: true
    }, c = function() {
      if (typeof window > "u")
        return false;
      for (var h in window)
        try {
          if (!u["$" + h] && t.call(window, h) && window[h] !== null && typeof window[h] == "object")
            try {
              l(window[h]);
            } catch {
              return true;
            }
        } catch {
          return true;
        }
      return false;
    }(), f = function(h) {
      if (typeof window > "u" || !c)
        return l(h);
      try {
        return l(h);
      } catch {
        return false;
      }
    };
    e12 = function(d) {
      var p = d !== null && typeof d == "object", m = r.call(d) === "[object Function]", g = n(d), v = p && r.call(d) === "[object String]", _ = [];
      if (!p && !m && !g)
        throw new TypeError("Object.keys called on a non-object");
      var y = a && m;
      if (v && d.length > 0 && !t.call(d, 0))
        for (var b = 0; b < d.length; ++b)
          _.push(String(b));
      if (g && d.length > 0)
        for (var T = 0; T < d.length; ++T)
          _.push(String(T));
      else
        for (var E in d)
          !(y && E === "prototype") && t.call(d, E) && _.push(String(E));
      if (o)
        for (var P = f(d), A = 0; A < s.length; ++A)
          !(P && s[A] === "constructor") && t.call(d, s[A]) && _.push(s[A]);
      return _;
    };
  }
  return Jw = e12, Jw;
}
var Tve = Array.prototype.slice;
var Eve = o2;
var WF = Object.keys;
var fb = WF ? function(t) {
  return WF(t);
} : bve();
var YF = Object.keys;
fb.shim = function() {
  if (Object.keys) {
    var t = function() {
      var r = Object.keys(arguments);
      return r && r.length === arguments.length;
    }(1, 2);
    t || (Object.keys = function(n) {
      return Eve(n) ? YF(Tve.call(n)) : YF(n);
    });
  } else
    Object.keys = fb;
  return Object.keys || fb;
};
var a2 = fb;
var iN = function() {
  if (typeof Symbol != "function" || typeof Object.getOwnPropertySymbols != "function")
    return false;
  if (typeof Symbol.iterator == "symbol")
    return true;
  var t = {}, r = Symbol("test"), n = Object(r);
  if (typeof r == "string" || Object.prototype.toString.call(r) !== "[object Symbol]" || Object.prototype.toString.call(n) !== "[object Symbol]")
    return false;
  var i = 42;
  t[r] = i;
  for (r in t)
    return false;
  if (typeof Object.keys == "function" && Object.keys(t).length !== 0 || typeof Object.getOwnPropertyNames == "function" && Object.getOwnPropertyNames(t).length !== 0)
    return false;
  var o = Object.getOwnPropertySymbols(t);
  if (o.length !== 1 || o[0] !== r || !Object.prototype.propertyIsEnumerable.call(t, r))
    return false;
  if (typeof Object.getOwnPropertyDescriptor == "function") {
    var a = Object.getOwnPropertyDescriptor(t, r);
    if (a.value !== i || a.enumerable !== true)
      return false;
  }
  return true;
};
var qF = typeof Symbol < "u" && Symbol;
var Sve = iN;
var s2 = function() {
  return typeof qF != "function" || typeof Symbol != "function" || typeof qF("foo") != "symbol" || typeof Symbol("bar") != "symbol" ? false : Sve();
};
var KF = {
  foo: {}
};
var wve = Object;
var l2 = function() {
  return {
    __proto__: KF
  }.foo === KF.foo && !({
    __proto__: null
  } instanceof wve);
};
var Ave = "Function.prototype.bind called on incompatible ";
var Ove = Object.prototype.toString;
var Ive = Math.max;
var Pve = "[object Function]";
var ZF = function(t, r) {
  for (var n = [], i = 0; i < t.length; i += 1)
    n[i] = t[i];
  for (var o = 0; o < r.length; o += 1)
    n[o + t.length] = r[o];
  return n;
};
var Cve = function(t, r) {
  for (var n = [], i = r || 0, o = 0; i < t.length; i += 1, o += 1)
    n[o] = t[i];
  return n;
};
var xve = function(e12, t) {
  for (var r = "", n = 0; n < e12.length; n += 1)
    r += e12[n], n + 1 < e12.length && (r += t);
  return r;
};
var kve = function(t) {
  var r = this;
  if (typeof r != "function" || Ove.apply(r) !== Pve)
    throw new TypeError(Ave + r);
  for (var n = Cve(arguments, 1), i, o = function() {
    if (this instanceof i) {
      var c = r.apply(this, ZF(n, arguments));
      return Object(c) === c ? c : this;
    }
    return r.apply(t, ZF(n, arguments));
  }, a = Ive(0, r.length - n.length), s = [], l = 0; l < a; l++)
    s[l] = "$" + l;
  if (i = Function("binder", "return function (" + xve(s, ",") + "){ return binder.apply(this,arguments); }")(o), r.prototype) {
    var u = function() {
    };
    u.prototype = r.prototype, i.prototype = new u(), u.prototype = null;
  }
  return i;
};
var Dve = kve;
var oN = Function.prototype.bind || Dve;
var Rve = Function.prototype.call;
var Nve = Object.prototype.hasOwnProperty;
var Mve = oN;
var Ys = Mve.call(Rve, Nve);
var Qt;
var md = SyntaxError;
var c2 = Function;
var Rf = TypeError;
var eA = function(e12) {
  try {
    return c2('"use strict"; return (' + e12 + ").constructor;")();
  } catch {
  }
};
var tu = Object.getOwnPropertyDescriptor;
if (tu)
  try {
    tu({}, "");
  } catch {
    tu = null;
  }
var tA = function() {
  throw new Rf();
};
var Lve = tu ? function() {
  try {
    return arguments.callee, tA;
  } catch {
    try {
      return tu(arguments, "callee").get;
    } catch {
      return tA;
    }
  }
}() : tA;
var Oh = s2();
var Bve = l2();
var En = Object.getPrototypeOf || (Bve ? function(e12) {
  return e12.__proto__;
} : null);
var zh = {};
var Fve = typeof Uint8Array > "u" || !En ? Qt : En(Uint8Array);
var ru = {
  "%AggregateError%": typeof AggregateError > "u" ? Qt : AggregateError,
  "%Array%": Array,
  "%ArrayBuffer%": typeof ArrayBuffer > "u" ? Qt : ArrayBuffer,
  "%ArrayIteratorPrototype%": Oh && En ? En([][Symbol.iterator]()) : Qt,
  "%AsyncFromSyncIteratorPrototype%": Qt,
  "%AsyncFunction%": zh,
  "%AsyncGenerator%": zh,
  "%AsyncGeneratorFunction%": zh,
  "%AsyncIteratorPrototype%": zh,
  "%Atomics%": typeof Atomics > "u" ? Qt : Atomics,
  "%BigInt%": typeof BigInt > "u" ? Qt : BigInt,
  "%BigInt64Array%": typeof BigInt64Array > "u" ? Qt : BigInt64Array,
  "%BigUint64Array%": typeof BigUint64Array > "u" ? Qt : BigUint64Array,
  "%Boolean%": Boolean,
  "%DataView%": typeof DataView > "u" ? Qt : DataView,
  "%Date%": Date,
  "%decodeURI%": decodeURI,
  "%decodeURIComponent%": decodeURIComponent,
  "%encodeURI%": encodeURI,
  "%encodeURIComponent%": encodeURIComponent,
  "%Error%": Error,
  "%eval%": eval,
  // eslint-disable-line no-eval
  "%EvalError%": EvalError,
  "%Float32Array%": typeof Float32Array > "u" ? Qt : Float32Array,
  "%Float64Array%": typeof Float64Array > "u" ? Qt : Float64Array,
  "%FinalizationRegistry%": typeof FinalizationRegistry > "u" ? Qt : FinalizationRegistry,
  "%Function%": c2,
  "%GeneratorFunction%": zh,
  "%Int8Array%": typeof Int8Array > "u" ? Qt : Int8Array,
  "%Int16Array%": typeof Int16Array > "u" ? Qt : Int16Array,
  "%Int32Array%": typeof Int32Array > "u" ? Qt : Int32Array,
  "%isFinite%": isFinite,
  "%isNaN%": isNaN,
  "%IteratorPrototype%": Oh && En ? En(En([][Symbol.iterator]())) : Qt,
  "%JSON%": typeof JSON == "object" ? JSON : Qt,
  "%Map%": typeof Map > "u" ? Qt : Map,
  "%MapIteratorPrototype%": typeof Map > "u" || !Oh || !En ? Qt : En((/* @__PURE__ */ new Map())[Symbol.iterator]()),
  "%Math%": Math,
  "%Number%": Number,
  "%Object%": Object,
  "%parseFloat%": parseFloat,
  "%parseInt%": parseInt,
  "%Promise%": typeof Promise > "u" ? Qt : Promise,
  "%Proxy%": typeof Proxy > "u" ? Qt : Proxy,
  "%RangeError%": RangeError,
  "%ReferenceError%": ReferenceError,
  "%Reflect%": typeof Reflect > "u" ? Qt : Reflect,
  "%RegExp%": RegExp,
  "%Set%": typeof Set > "u" ? Qt : Set,
  "%SetIteratorPrototype%": typeof Set > "u" || !Oh || !En ? Qt : En((/* @__PURE__ */ new Set())[Symbol.iterator]()),
  "%SharedArrayBuffer%": typeof SharedArrayBuffer > "u" ? Qt : SharedArrayBuffer,
  "%String%": String,
  "%StringIteratorPrototype%": Oh && En ? En(""[Symbol.iterator]()) : Qt,
  "%Symbol%": Oh ? Symbol : Qt,
  "%SyntaxError%": md,
  "%ThrowTypeError%": Lve,
  "%TypedArray%": Fve,
  "%TypeError%": Rf,
  "%Uint8Array%": typeof Uint8Array > "u" ? Qt : Uint8Array,
  "%Uint8ClampedArray%": typeof Uint8ClampedArray > "u" ? Qt : Uint8ClampedArray,
  "%Uint16Array%": typeof Uint16Array > "u" ? Qt : Uint16Array,
  "%Uint32Array%": typeof Uint32Array > "u" ? Qt : Uint32Array,
  "%URIError%": URIError,
  "%WeakMap%": typeof WeakMap > "u" ? Qt : WeakMap,
  "%WeakRef%": typeof WeakRef > "u" ? Qt : WeakRef,
  "%WeakSet%": typeof WeakSet > "u" ? Qt : WeakSet
};
if (En)
  try {
    null.error;
  } catch (e12) {
    $ve = En(En(e12));
    ru["%Error.prototype%"] = $ve;
  }
var $ve;
var Hve = function e3(t) {
  var r;
  if (t === "%AsyncFunction%")
    r = eA("async function () {}");
  else if (t === "%GeneratorFunction%")
    r = eA("function* () {}");
  else if (t === "%AsyncGeneratorFunction%")
    r = eA("async function* () {}");
  else if (t === "%AsyncGenerator%") {
    var n = e3("%AsyncGeneratorFunction%");
    n && (r = n.prototype);
  } else if (t === "%AsyncIteratorPrototype%") {
    var i = e3("%AsyncGenerator%");
    i && En && (r = En(i.prototype));
  }
  return ru[t] = r, r;
};
var QF = {
  "%ArrayBufferPrototype%": ["ArrayBuffer", "prototype"],
  "%ArrayPrototype%": ["Array", "prototype"],
  "%ArrayProto_entries%": ["Array", "prototype", "entries"],
  "%ArrayProto_forEach%": ["Array", "prototype", "forEach"],
  "%ArrayProto_keys%": ["Array", "prototype", "keys"],
  "%ArrayProto_values%": ["Array", "prototype", "values"],
  "%AsyncFunctionPrototype%": ["AsyncFunction", "prototype"],
  "%AsyncGenerator%": ["AsyncGeneratorFunction", "prototype"],
  "%AsyncGeneratorPrototype%": ["AsyncGeneratorFunction", "prototype", "prototype"],
  "%BooleanPrototype%": ["Boolean", "prototype"],
  "%DataViewPrototype%": ["DataView", "prototype"],
  "%DatePrototype%": ["Date", "prototype"],
  "%ErrorPrototype%": ["Error", "prototype"],
  "%EvalErrorPrototype%": ["EvalError", "prototype"],
  "%Float32ArrayPrototype%": ["Float32Array", "prototype"],
  "%Float64ArrayPrototype%": ["Float64Array", "prototype"],
  "%FunctionPrototype%": ["Function", "prototype"],
  "%Generator%": ["GeneratorFunction", "prototype"],
  "%GeneratorPrototype%": ["GeneratorFunction", "prototype", "prototype"],
  "%Int8ArrayPrototype%": ["Int8Array", "prototype"],
  "%Int16ArrayPrototype%": ["Int16Array", "prototype"],
  "%Int32ArrayPrototype%": ["Int32Array", "prototype"],
  "%JSONParse%": ["JSON", "parse"],
  "%JSONStringify%": ["JSON", "stringify"],
  "%MapPrototype%": ["Map", "prototype"],
  "%NumberPrototype%": ["Number", "prototype"],
  "%ObjectPrototype%": ["Object", "prototype"],
  "%ObjProto_toString%": ["Object", "prototype", "toString"],
  "%ObjProto_valueOf%": ["Object", "prototype", "valueOf"],
  "%PromisePrototype%": ["Promise", "prototype"],
  "%PromiseProto_then%": ["Promise", "prototype", "then"],
  "%Promise_all%": ["Promise", "all"],
  "%Promise_reject%": ["Promise", "reject"],
  "%Promise_resolve%": ["Promise", "resolve"],
  "%RangeErrorPrototype%": ["RangeError", "prototype"],
  "%ReferenceErrorPrototype%": ["ReferenceError", "prototype"],
  "%RegExpPrototype%": ["RegExp", "prototype"],
  "%SetPrototype%": ["Set", "prototype"],
  "%SharedArrayBufferPrototype%": ["SharedArrayBuffer", "prototype"],
  "%StringPrototype%": ["String", "prototype"],
  "%SymbolPrototype%": ["Symbol", "prototype"],
  "%SyntaxErrorPrototype%": ["SyntaxError", "prototype"],
  "%TypedArrayPrototype%": ["TypedArray", "prototype"],
  "%TypeErrorPrototype%": ["TypeError", "prototype"],
  "%Uint8ArrayPrototype%": ["Uint8Array", "prototype"],
  "%Uint8ClampedArrayPrototype%": ["Uint8ClampedArray", "prototype"],
  "%Uint16ArrayPrototype%": ["Uint16Array", "prototype"],
  "%Uint32ArrayPrototype%": ["Uint32Array", "prototype"],
  "%URIErrorPrototype%": ["URIError", "prototype"],
  "%WeakMapPrototype%": ["WeakMap", "prototype"],
  "%WeakSetPrototype%": ["WeakSet", "prototype"]
};
var Kv = oN;
var U0 = Ys;
var Uve = Kv.call(Function.call, Array.prototype.concat);
var jve = Kv.call(Function.apply, Array.prototype.splice);
var JF = Kv.call(Function.call, String.prototype.replace);
var j0 = Kv.call(Function.call, String.prototype.slice);
var Gve = Kv.call(Function.call, RegExp.prototype.exec);
var zve = /[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;
var Vve = /\\(\\)?/g;
var Xve = function(t) {
  var r = j0(t, 0, 1), n = j0(t, -1);
  if (r === "%" && n !== "%")
    throw new md("invalid intrinsic syntax, expected closing `%`");
  if (n === "%" && r !== "%")
    throw new md("invalid intrinsic syntax, expected opening `%`");
  var i = [];
  return JF(t, zve, function(o, a, s, l) {
    i[i.length] = s ? JF(l, Vve, "$1") : a || o;
  }), i;
};
var Wve = function(t, r) {
  var n = t, i;
  if (U0(QF, n) && (i = QF[n], n = "%" + i[0] + "%"), U0(ru, n)) {
    var o = ru[n];
    if (o === zh && (o = Hve(n)), typeof o > "u" && !r)
      throw new Rf("intrinsic " + t + " exists, but is not available. Please file an issue!");
    return {
      alias: i,
      name: n,
      value: o
    };
  }
  throw new md("intrinsic " + t + " does not exist!");
};
var ir = function(t, r) {
  if (typeof t != "string" || t.length === 0)
    throw new Rf("intrinsic name must be a non-empty string");
  if (arguments.length > 1 && typeof r != "boolean")
    throw new Rf('"allowMissing" argument must be a boolean');
  if (Gve(/^%?[^%]*%?$/, t) === null)
    throw new md("`%` may not be present anywhere but at the beginning and end of the intrinsic name");
  var n = Xve(t), i = n.length > 0 ? n[0] : "", o = Wve("%" + i + "%", r), a = o.name, s = o.value, l = false, u = o.alias;
  u && (i = u[0], jve(n, Uve([0, 1], u)));
  for (var c = 1, f = true; c < n.length; c += 1) {
    var h = n[c], d = j0(h, 0, 1), p = j0(h, -1);
    if ((d === '"' || d === "'" || d === "`" || p === '"' || p === "'" || p === "`") && d !== p)
      throw new md("property names with quotes must have matching quotes");
    if ((h === "constructor" || !f) && (l = true), i += "." + h, a = "%" + i + "%", U0(ru, a))
      s = ru[a];
    else if (s != null) {
      if (!(h in s)) {
        if (!r)
          throw new Rf("base intrinsic for " + t + " exists, but the property is not available.");
        return;
      }
      if (tu && c + 1 >= n.length) {
        var m = tu(s, h);
        f = !!m, f && "get" in m && !("originalValue" in m.get) ? s = m.get : s = s[h];
      } else
        f = U0(s, h), s = s[h];
      f && !l && (ru[a] = s);
    }
  }
  return s;
};
var Yve = ir;
var DP = Yve("%Object.defineProperty%", true);
var RP = function() {
  if (DP)
    try {
      return DP({}, "a", {
        value: 1
      }), true;
    } catch {
      return false;
    }
  return false;
};
RP.hasArrayLengthDefineBug = function() {
  if (!RP())
    return null;
  try {
    return DP([], "length", {
      value: 1
    }).length !== 1;
  } catch {
    return true;
  }
};
var A1 = RP;
var qve = ir;
var db = qve("%Object.getOwnPropertyDescriptor%", true);
if (db)
  try {
    db([], "length");
  } catch {
    db = null;
  }
var aN = db;
var Kve = A1();
var sN = ir;
var eg = Kve && sN("%Object.defineProperty%", true);
if (eg)
  try {
    eg({}, "a", {
      value: 1
    });
  } catch {
    eg = false;
  }
var Zve = sN("%SyntaxError%");
var Ih = sN("%TypeError%");
var e$ = aN;
var u2 = function(t, r, n) {
  if (!t || typeof t != "object" && typeof t != "function")
    throw new Ih("`obj` must be an object or a function`");
  if (typeof r != "string" && typeof r != "symbol")
    throw new Ih("`property` must be a string or a symbol`");
  if (arguments.length > 3 && typeof arguments[3] != "boolean" && arguments[3] !== null)
    throw new Ih("`nonEnumerable`, if provided, must be a boolean or null");
  if (arguments.length > 4 && typeof arguments[4] != "boolean" && arguments[4] !== null)
    throw new Ih("`nonWritable`, if provided, must be a boolean or null");
  if (arguments.length > 5 && typeof arguments[5] != "boolean" && arguments[5] !== null)
    throw new Ih("`nonConfigurable`, if provided, must be a boolean or null");
  if (arguments.length > 6 && typeof arguments[6] != "boolean")
    throw new Ih("`loose`, if provided, must be a boolean");
  var i = arguments.length > 3 ? arguments[3] : null, o = arguments.length > 4 ? arguments[4] : null, a = arguments.length > 5 ? arguments[5] : null, s = arguments.length > 6 ? arguments[6] : false, l = !!e$ && e$(t, r);
  if (eg)
    eg(t, r, {
      configurable: a === null && l ? l.configurable : !a,
      enumerable: i === null && l ? l.enumerable : !i,
      value: n,
      writable: o === null && l ? l.writable : !o
    });
  else if (s || !i && !o && !a)
    t[r] = n;
  else
    throw new Zve("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");
};
var Qve = a2;
var Jve = typeof Symbol == "function" && typeof Symbol("foo") == "symbol";
var eye = Object.prototype.toString;
var tye = Array.prototype.concat;
var t$ = u2;
var rye = function(e12) {
  return typeof e12 == "function" && eye.call(e12) === "[object Function]";
};
var h2 = A1();
var nye = function(e12, t, r, n) {
  if (t in e12) {
    if (n === true) {
      if (e12[t] === r)
        return;
    } else if (!rye(n) || !n())
      return;
  }
  h2 ? t$(e12, t, r, true) : t$(e12, t, r);
};
var f2 = function(e12, t) {
  var r = arguments.length > 2 ? arguments[2] : {}, n = Qve(t);
  Jve && (n = tye.call(n, Object.getOwnPropertySymbols(t)));
  for (var i = 0; i < n.length; i += 1)
    nye(e12, n[i], t[n[i]], r[n[i]]);
};
f2.supportsDescriptors = !!h2;
var ii = f2;
var d2 = { exports: {} };
var p2 = ir;
var r$ = u2;
var iye = A1();
var n$ = aN;
var i$ = p2("%TypeError%");
var oye = p2("%Math.floor%");
var aye = function(t, r) {
  if (typeof t != "function")
    throw new i$("`fn` is not a function");
  if (typeof r != "number" || r < 0 || r > 4294967295 || oye(r) !== r)
    throw new i$("`length` must be a positive 32-bit integer");
  var n = arguments.length > 2 && !!arguments[2], i = true, o = true;
  if ("length" in t && n$) {
    var a = n$(t, "length");
    a && !a.configurable && (i = false), a && !a.writable && (o = false);
  }
  return (i || o || !n) && (iye ? r$(t, "length", r, true, true) : r$(t, "length", r)), t;
};
(function(e12) {
  var t = oN, r = ir, n = aye, i = r("%TypeError%"), o = r("%Function.prototype.apply%"), a = r("%Function.prototype.call%"), s = r("%Reflect.apply%", true) || t.call(a, o), l = r("%Object.defineProperty%", true), u = r("%Math.max%");
  if (l)
    try {
      l({}, "a", {
        value: 1
      });
    } catch {
      l = null;
    }
  e12.exports = function(h) {
    if (typeof h != "function")
      throw new i("a function is required");
    var d = s(t, a, arguments);
    return n(d, 1 + u(0, h.length - (arguments.length - 1)), true);
  };
  var c = function() {
    return s(t, o, arguments);
  };
  l ? l(e12.exports, "apply", {
    value: c
  }) : e12.exports.apply = c;
})(d2);
var qs = d2.exports;
var m2 = ir;
var g2 = qs;
var sye = g2(m2("String.prototype.indexOf"));
var Ai = function(t, r) {
  var n = m2(t, !!r);
  return typeof n == "function" && sye(t, ".prototype.") > -1 ? g2(n) : n;
};
var lye = a2;
var v2 = iN();
var y2 = Ai;
var o$ = Object;
var cye = y2("Array.prototype.push");
var a$ = y2("Object.prototype.propertyIsEnumerable");
var uye = v2 ? Object.getOwnPropertySymbols : null;
var _2 = function(t, r) {
  if (t == null)
    throw new TypeError("target must be an object");
  var n = o$(t);
  if (arguments.length === 1)
    return n;
  for (var i = 1; i < arguments.length; ++i) {
    var o = o$(arguments[i]), a = lye(o), s = v2 && (Object.getOwnPropertySymbols || uye);
    if (s)
      for (var l = s(o), u = 0; u < l.length; ++u) {
        var c = l[u];
        a$(o, c) && cye(a, c);
      }
    for (var f = 0; f < a.length; ++f) {
      var h = a[f];
      if (a$(o, h)) {
        var d = o[h];
        n[h] = d;
      }
    }
  }
  return n;
};
var rA = _2;
var hye = function() {
  if (!Object.assign)
    return false;
  for (var e12 = "abcdefghijklmnopqrst", t = e12.split(""), r = {}, n = 0; n < t.length; ++n)
    r[t[n]] = t[n];
  var i = Object.assign({}, r), o = "";
  for (var a in i)
    o += a;
  return e12 !== o;
};
var fye = function() {
  if (!Object.assign || !Object.preventExtensions)
    return false;
  var e12 = Object.preventExtensions({
    1: 2
  });
  try {
    Object.assign(e12, "xy");
  } catch {
    return e12[1] === "y";
  }
  return false;
};
var b2 = function() {
  return !Object.assign || hye() || fye() ? rA : Object.assign;
};
var dye = ii;
var pye = b2;
var mye = function() {
  var t = pye();
  return dye(Object, {
    assign: t
  }, {
    assign: function() {
      return Object.assign !== t;
    }
  }), t;
};
var gye = ii;
var vye = qs;
var yye = _2;
var T2 = b2;
var _ye = mye;
var bye = vye.apply(T2());
var E2 = function(t, r) {
  return bye(Object, arguments);
};
gye(E2, {
  getPolyfill: T2,
  implementation: yye,
  shim: _ye
});
var op = E2;
var O1 = Number.isNaN || function(t) {
  return t !== t;
};
var Tye = O1;
var S2 = function(e12) {
  return (typeof e12 == "number" || typeof e12 == "bigint") && !Tye(e12) && e12 !== 1 / 0 && e12 !== -1 / 0;
};
var nA;
var s$;
function lN() {
  if (s$)
    return nA;
  s$ = 1;
  var e12 = ir, t = e12("%Math.abs%"), r = e12("%Math.floor%"), n = O1, i = S2;
  return nA = function(a) {
    if (typeof a != "number" || n(a) || !i(a))
      return false;
    var s = t(a);
    return r(s) === s;
  }, nA;
}
var iA;
var l$;
function Eye() {
  if (l$)
    return iA;
  l$ = 1;
  var e12 = ir, t = e12("%Array.prototype%"), r = e12("%RangeError%"), n = e12("%SyntaxError%"), i = e12("%TypeError%"), o = lN(), a = Math.pow(2, 32) - 1, s = l2(), l = e12("%Object.setPrototypeOf%", true) || (s ? function(u, c) {
    return u.__proto__ = c, u;
  } : null);
  return iA = function(c) {
    if (!o(c) || c < 0)
      throw new i("Assertion failed: `length` must be an integer Number >= 0");
    if (c > a)
      throw new r("length is greater than (2**32 - 1)");
    var f = arguments.length > 1 ? arguments[1] : t, h = [];
    if (f !== t) {
      if (!l)
        throw new n("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");
      l(h, f);
    }
    return c !== 0 && (h.length = c), h;
  }, iA;
}
var Sye = {};
var wye = Object.freeze(Object.defineProperty({
  __proto__: null,
  default: Sye
}, Symbol.toStringTag, { value: "Module" }));
var Aye = zs(wye);
var cN = typeof Map == "function" && Map.prototype;
var oA = Object.getOwnPropertyDescriptor && cN ? Object.getOwnPropertyDescriptor(Map.prototype, "size") : null;
var G0 = cN && oA && typeof oA.get == "function" ? oA.get : null;
var c$ = cN && Map.prototype.forEach;
var uN = typeof Set == "function" && Set.prototype;
var aA = Object.getOwnPropertyDescriptor && uN ? Object.getOwnPropertyDescriptor(Set.prototype, "size") : null;
var z0 = uN && aA && typeof aA.get == "function" ? aA.get : null;
var u$ = uN && Set.prototype.forEach;
var Oye = typeof WeakMap == "function" && WeakMap.prototype;
var tg = Oye ? WeakMap.prototype.has : null;
var Iye = typeof WeakSet == "function" && WeakSet.prototype;
var rg = Iye ? WeakSet.prototype.has : null;
var Pye = typeof WeakRef == "function" && WeakRef.prototype;
var h$ = Pye ? WeakRef.prototype.deref : null;
var Cye = Boolean.prototype.valueOf;
var xye = Object.prototype.toString;
var kye = Function.prototype.toString;
var Dye = String.prototype.match;
var hN = String.prototype.slice;
var Nl = String.prototype.replace;
var Rye = String.prototype.toUpperCase;
var f$ = String.prototype.toLowerCase;
var w2 = RegExp.prototype.test;
var d$ = Array.prototype.concat;
var ba = Array.prototype.join;
var Nye = Array.prototype.slice;
var p$ = Math.floor;
var NP = typeof BigInt == "function" ? BigInt.prototype.valueOf : null;
var sA = Object.getOwnPropertySymbols;
var MP = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? Symbol.prototype.toString : null;
var gd = typeof Symbol == "function" && typeof Symbol.iterator == "object";
var ri = typeof Symbol == "function" && Symbol.toStringTag && (typeof Symbol.toStringTag === gd || "symbol") ? Symbol.toStringTag : null;
var A2 = Object.prototype.propertyIsEnumerable;
var m$ = (typeof Reflect == "function" ? Reflect.getPrototypeOf : Object.getPrototypeOf) || ([].__proto__ === Array.prototype ? function(e12) {
  return e12.__proto__;
} : null);
function g$(e12, t) {
  if (e12 === 1 / 0 || e12 === -1 / 0 || e12 !== e12 || e12 && e12 > -1e3 && e12 < 1e3 || w2.call(/e/, t))
    return t;
  var r = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;
  if (typeof e12 == "number") {
    var n = e12 < 0 ? -p$(-e12) : p$(e12);
    if (n !== e12) {
      var i = String(n), o = hN.call(t, i.length + 1);
      return Nl.call(i, r, "$&_") + "." + Nl.call(Nl.call(o, /([0-9]{3})/g, "$&_"), /_$/, "");
    }
  }
  return Nl.call(t, r, "$&_");
}
var LP = Aye;
var v$ = LP.custom;
var y$ = P2(v$) ? v$ : null;
var O2 = function e4(t, r, n, i) {
  var o = r || {};
  if (Sl(o, "quoteStyle") && o.quoteStyle !== "single" && o.quoteStyle !== "double")
    throw new TypeError('option "quoteStyle" must be "single" or "double"');
  if (Sl(o, "maxStringLength") && (typeof o.maxStringLength == "number" ? o.maxStringLength < 0 && o.maxStringLength !== 1 / 0 : o.maxStringLength !== null))
    throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');
  var a = Sl(o, "customInspect") ? o.customInspect : true;
  if (typeof a != "boolean" && a !== "symbol")
    throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");
  if (Sl(o, "indent") && o.indent !== null && o.indent !== "	" && !(parseInt(o.indent, 10) === o.indent && o.indent > 0))
    throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');
  if (Sl(o, "numericSeparator") && typeof o.numericSeparator != "boolean")
    throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');
  var s = o.numericSeparator;
  if (typeof t > "u")
    return "undefined";
  if (t === null)
    return "null";
  if (typeof t == "boolean")
    return t ? "true" : "false";
  if (typeof t == "string")
    return x2(t, o);
  if (typeof t == "number") {
    if (t === 0)
      return 1 / 0 / t > 0 ? "0" : "-0";
    var l = String(t);
    return s ? g$(t, l) : l;
  }
  if (typeof t == "bigint") {
    var u = String(t) + "n";
    return s ? g$(t, u) : u;
  }
  var c = typeof o.depth > "u" ? 5 : o.depth;
  if (typeof n > "u" && (n = 0), n >= c && c > 0 && typeof t == "object")
    return BP(t) ? "[Array]" : "[Object]";
  var f = Qye(o, n);
  if (typeof i > "u")
    i = [];
  else if (C2(i, t) >= 0)
    return "[Circular]";
  function h(B, w, R) {
    if (w && (i = Nye.call(i), i.push(w)), R) {
      var F = {
        depth: o.depth
      };
      return Sl(o, "quoteStyle") && (F.quoteStyle = o.quoteStyle), e4(B, F, n + 1, i);
    }
    return e4(B, o, n + 1, i);
  }
  if (typeof t == "function" && !_$(t)) {
    var d = Gye(t), p = h_(t, h);
    return "[Function" + (d ? ": " + d : " (anonymous)") + "]" + (p.length > 0 ? " { " + ba.call(p, ", ") + " }" : "");
  }
  if (P2(t)) {
    var m = gd ? Nl.call(String(t), /^(Symbol\(.*\))_[^)]*$/, "$1") : MP.call(t);
    return typeof t == "object" && !gd ? Qp(m) : m;
  }
  if (qye(t)) {
    for (var g = "<" + f$.call(String(t.nodeName)), v = t.attributes || [], _ = 0; _ < v.length; _++)
      g += " " + v[_].name + "=" + I2(Mye(v[_].value), "double", o);
    return g += ">", t.childNodes && t.childNodes.length && (g += "..."), g += "</" + f$.call(String(t.nodeName)) + ">", g;
  }
  if (BP(t)) {
    if (t.length === 0)
      return "[]";
    var y = h_(t, h);
    return f && !Zye(y) ? "[" + FP(y, f) + "]" : "[ " + ba.call(y, ", ") + " ]";
  }
  if (Bye(t)) {
    var b = h_(t, h);
    return !("cause" in Error.prototype) && "cause" in t && !A2.call(t, "cause") ? "{ [" + String(t) + "] " + ba.call(d$.call("[cause]: " + h(t.cause), b), ", ") + " }" : b.length === 0 ? "[" + String(t) + "]" : "{ [" + String(t) + "] " + ba.call(b, ", ") + " }";
  }
  if (typeof t == "object" && a) {
    if (y$ && typeof t[y$] == "function" && LP)
      return LP(t, {
        depth: c - n
      });
    if (a !== "symbol" && typeof t.inspect == "function")
      return t.inspect();
  }
  if (zye(t)) {
    var T = [];
    return c$ && c$.call(t, function(B, w) {
      T.push(h(w, t, true) + " => " + h(B, t));
    }), b$("Map", G0.call(t), T, f);
  }
  if (Wye(t)) {
    var E = [];
    return u$ && u$.call(t, function(B) {
      E.push(h(B, t));
    }), b$("Set", z0.call(t), E, f);
  }
  if (Vye(t))
    return lA("WeakMap");
  if (Yye(t))
    return lA("WeakSet");
  if (Xye(t))
    return lA("WeakRef");
  if ($ye(t))
    return Qp(h(Number(t)));
  if (Uye(t))
    return Qp(h(NP.call(t)));
  if (Hye(t))
    return Qp(Cye.call(t));
  if (Fye(t))
    return Qp(h(String(t)));
  if (typeof window < "u" && t === window)
    return "{ [object Window] }";
  if (t === globalThis)
    return "{ [object globalThis] }";
  if (!Lye(t) && !_$(t)) {
    var P = h_(t, h), A = m$ ? m$(t) === Object.prototype : t instanceof Object || t.constructor === Object, I = t instanceof Object ? "" : "null prototype", x = !A && ri && Object(t) === t && ri in t ? hN.call(oc(t), 8, -1) : I ? "Object" : "", S = A || typeof t.constructor != "function" ? "" : t.constructor.name ? t.constructor.name + " " : "", N = S + (x || I ? "[" + ba.call(d$.call([], x || [], I || []), ": ") + "] " : "");
    return P.length === 0 ? N + "{}" : f ? N + "{" + FP(P, f) + "}" : N + "{ " + ba.call(P, ", ") + " }";
  }
  return String(t);
};
function I2(e12, t, r) {
  var n = (r.quoteStyle || t) === "double" ? '"' : "'";
  return n + e12 + n;
}
function Mye(e12) {
  return Nl.call(String(e12), /"/g, "&quot;");
}
function BP(e12) {
  return oc(e12) === "[object Array]" && (!ri || !(typeof e12 == "object" && ri in e12));
}
function Lye(e12) {
  return oc(e12) === "[object Date]" && (!ri || !(typeof e12 == "object" && ri in e12));
}
function _$(e12) {
  return oc(e12) === "[object RegExp]" && (!ri || !(typeof e12 == "object" && ri in e12));
}
function Bye(e12) {
  return oc(e12) === "[object Error]" && (!ri || !(typeof e12 == "object" && ri in e12));
}
function Fye(e12) {
  return oc(e12) === "[object String]" && (!ri || !(typeof e12 == "object" && ri in e12));
}
function $ye(e12) {
  return oc(e12) === "[object Number]" && (!ri || !(typeof e12 == "object" && ri in e12));
}
function Hye(e12) {
  return oc(e12) === "[object Boolean]" && (!ri || !(typeof e12 == "object" && ri in e12));
}
function P2(e12) {
  if (gd)
    return e12 && typeof e12 == "object" && e12 instanceof Symbol;
  if (typeof e12 == "symbol")
    return true;
  if (!e12 || typeof e12 != "object" || !MP)
    return false;
  try {
    return MP.call(e12), true;
  } catch {
  }
  return false;
}
function Uye(e12) {
  if (!e12 || typeof e12 != "object" || !NP)
    return false;
  try {
    return NP.call(e12), true;
  } catch {
  }
  return false;
}
var jye = Object.prototype.hasOwnProperty || function(e12) {
  return e12 in this;
};
function Sl(e12, t) {
  return jye.call(e12, t);
}
function oc(e12) {
  return xye.call(e12);
}
function Gye(e12) {
  if (e12.name)
    return e12.name;
  var t = Dye.call(kye.call(e12), /^function\s*([\w$]+)/);
  return t ? t[1] : null;
}
function C2(e12, t) {
  if (e12.indexOf)
    return e12.indexOf(t);
  for (var r = 0, n = e12.length; r < n; r++)
    if (e12[r] === t)
      return r;
  return -1;
}
function zye(e12) {
  if (!G0 || !e12 || typeof e12 != "object")
    return false;
  try {
    G0.call(e12);
    try {
      z0.call(e12);
    } catch {
      return true;
    }
    return e12 instanceof Map;
  } catch {
  }
  return false;
}
function Vye(e12) {
  if (!tg || !e12 || typeof e12 != "object")
    return false;
  try {
    tg.call(e12, tg);
    try {
      rg.call(e12, rg);
    } catch {
      return true;
    }
    return e12 instanceof WeakMap;
  } catch {
  }
  return false;
}
function Xye(e12) {
  if (!h$ || !e12 || typeof e12 != "object")
    return false;
  try {
    return h$.call(e12), true;
  } catch {
  }
  return false;
}
function Wye(e12) {
  if (!z0 || !e12 || typeof e12 != "object")
    return false;
  try {
    z0.call(e12);
    try {
      G0.call(e12);
    } catch {
      return true;
    }
    return e12 instanceof Set;
  } catch {
  }
  return false;
}
function Yye(e12) {
  if (!rg || !e12 || typeof e12 != "object")
    return false;
  try {
    rg.call(e12, rg);
    try {
      tg.call(e12, tg);
    } catch {
      return true;
    }
    return e12 instanceof WeakSet;
  } catch {
  }
  return false;
}
function qye(e12) {
  return !e12 || typeof e12 != "object" ? false : typeof HTMLElement < "u" && e12 instanceof HTMLElement ? true : typeof e12.nodeName == "string" && typeof e12.getAttribute == "function";
}
function x2(e12, t) {
  if (e12.length > t.maxStringLength) {
    var r = e12.length - t.maxStringLength, n = "... " + r + " more character" + (r > 1 ? "s" : "");
    return x2(hN.call(e12, 0, t.maxStringLength), t) + n;
  }
  var i = Nl.call(Nl.call(e12, /(['\\])/g, "\\$1"), /[\x00-\x1f]/g, Kye);
  return I2(i, "single", t);
}
function Kye(e12) {
  var t = e12.charCodeAt(0), r = {
    8: "b",
    9: "t",
    10: "n",
    12: "f",
    13: "r"
  }[t];
  return r ? "\\" + r : "\\x" + (t < 16 ? "0" : "") + Rye.call(t.toString(16));
}
function Qp(e12) {
  return "Object(" + e12 + ")";
}
function lA(e12) {
  return e12 + " { ? }";
}
function b$(e12, t, r, n) {
  var i = n ? FP(r, n) : ba.call(r, ", ");
  return e12 + " (" + t + ") {" + i + "}";
}
function Zye(e12) {
  for (var t = 0; t < e12.length; t++)
    if (C2(e12[t], `
`) >= 0)
      return false;
  return true;
}
function Qye(e12, t) {
  var r;
  if (e12.indent === "	")
    r = "	";
  else if (typeof e12.indent == "number" && e12.indent > 0)
    r = ba.call(Array(e12.indent + 1), " ");
  else
    return null;
  return {
    base: r,
    prev: ba.call(Array(t + 1), r)
  };
}
function FP(e12, t) {
  if (e12.length === 0)
    return "";
  var r = `
` + t.prev + t.base;
  return r + ba.call(e12, "," + r) + `
` + t.prev;
}
function h_(e12, t) {
  var r = BP(e12), n = [];
  if (r) {
    n.length = e12.length;
    for (var i = 0; i < e12.length; i++)
      n[i] = Sl(e12, i) ? t(e12[i], e12) : "";
  }
  var o = typeof sA == "function" ? sA(e12) : [], a;
  if (gd) {
    a = {};
    for (var s = 0; s < o.length; s++)
      a["$" + o[s]] = o[s];
  }
  for (var l in e12)
    Sl(e12, l) && (r && String(Number(l)) === l && l < e12.length || gd && a["$" + l] instanceof Symbol || (w2.call(/[^\w$]/, l) ? n.push(t(l, e12) + ": " + t(e12[l], e12)) : n.push(l + ": " + t(e12[l], e12))));
  if (typeof sA == "function")
    for (var u = 0; u < o.length; u++)
      A2.call(e12, o[u]) && n.push("[" + t(o[u]) + "]: " + t(e12[o[u]], e12));
  return n;
}
var cA;
var T$;
function ac() {
  return T$ || (T$ = 1, cA = function(t) {
    return typeof t == "string" || typeof t == "symbol";
  }), cA;
}
var uA;
var E$;
function Jye() {
  return E$ || (E$ = 1, uA = function(t) {
    if (t === null)
      return "Null";
    if (typeof t > "u")
      return "Undefined";
    if (typeof t == "function" || typeof t == "object")
      return "Object";
    if (typeof t == "number")
      return "Number";
    if (typeof t == "boolean")
      return "Boolean";
    if (typeof t == "string")
      return "String";
  }), uA;
}
var hA;
var S$;
function zn() {
  if (S$)
    return hA;
  S$ = 1;
  var e12 = Jye();
  return hA = function(r) {
    return typeof r == "symbol" ? "Symbol" : typeof r == "bigint" ? "BigInt" : e12(r);
  }, hA;
}
var e_e = ir;
var w$ = e_e("%TypeError%");
var t_e = O2;
var r_e = ac();
var n_e = zn();
var Zv = function(t, r) {
  if (n_e(t) !== "Object")
    throw new w$("Assertion failed: Type(O) is not Object");
  if (!r_e(r))
    throw new w$("Assertion failed: IsPropertyKey(P) is not true, got " + t_e(r));
  return t[r];
};
var fA;
var A$;
function k2() {
  if (A$)
    return fA;
  A$ = 1;
  var e12 = ir, t = e12("%Array%"), r = !t.isArray && Ai("Object.prototype.toString");
  return fA = t.isArray || function(i) {
    return r(i) === "[object Array]";
  }, fA;
}
var dA;
var O$;
function fN() {
  return O$ || (O$ = 1, dA = k2()), dA;
}
var f_ = { exports: {} };
var pA;
var I$;
function i_e() {
  return I$ || (I$ = 1, pA = ir), pA;
}
var mA;
var P$;
function dN() {
  if (P$)
    return mA;
  P$ = 1;
  var e12 = ir, t = Ys, r = e12("%TypeError%");
  return mA = function(i, o) {
    if (i.Type(o) !== "Object")
      return false;
    var a = {
      "[[Configurable]]": true,
      "[[Enumerable]]": true,
      "[[Get]]": true,
      "[[Set]]": true,
      "[[Value]]": true,
      "[[Writable]]": true
    };
    for (var s in o)
      if (t(o, s) && !a[s])
        return false;
    if (i.IsDataDescriptor(o) && i.IsAccessorDescriptor(o))
      throw new r("Property Descriptors may not be both accessor and data descriptors");
    return true;
  }, mA;
}
var gA;
var C$;
function D2() {
  if (C$)
    return gA;
  C$ = 1;
  var e12 = A1, t = ir, r = e12() && t("%Object.defineProperty%", true), n = e12.hasArrayLengthDefineBug(), i = n && k2(), o = Ai, a = o("Object.prototype.propertyIsEnumerable");
  return gA = function(l, u, c, f, h, d) {
    if (!r) {
      if (!l(d) || !d["[[Configurable]]"] || !d["[[Writable]]"] || h in f && a(f, h) !== !!d["[[Enumerable]]"])
        return false;
      var p = d["[[Value]]"];
      return f[h] = p, u(f[h], p);
    }
    return n && h === "length" && "[[Value]]" in d && i(f) && f.length !== d["[[Value]]"] ? (f.length = d["[[Value]]"], f.length === d["[[Value]]"]) : (r(f, h, c(d)), true);
  }, gA;
}
var vA;
var x$;
function o_e() {
  if (x$)
    return vA;
  x$ = 1;
  var e12 = Ys;
  return vA = function(r) {
    return e12(r, "[[StartIndex]]") && e12(r, "[[EndIndex]]") && r["[[StartIndex]]"] >= 0 && r["[[EndIndex]]"] >= r["[[StartIndex]]"] && String(parseInt(r["[[StartIndex]]"], 10)) === String(r["[[StartIndex]]"]) && String(parseInt(r["[[EndIndex]]"], 10)) === String(r["[[EndIndex]]"]);
  }, vA;
}
var yA;
var k$;
function I1() {
  if (k$)
    return yA;
  k$ = 1;
  var e12 = ir, t = e12("%TypeError%"), r = e12("%SyntaxError%"), n = Ys, i = lN(), o = o_e(), a = {
    // https://262.ecma-international.org/6.0/#sec-property-descriptor-specification-type
    "Property Descriptor": function(l) {
      var u = {
        "[[Configurable]]": true,
        "[[Enumerable]]": true,
        "[[Get]]": true,
        "[[Set]]": true,
        "[[Value]]": true,
        "[[Writable]]": true
      };
      if (!l)
        return false;
      for (var c in l)
        if (n(l, c) && !u[c])
          return false;
      var f = n(l, "[[Value]]"), h = n(l, "[[Get]]") || n(l, "[[Set]]");
      if (f && h)
        throw new t("Property Descriptors may not be both accessor and data descriptors");
      return true;
    },
    // https://262.ecma-international.org/13.0/#sec-match-records
    "Match Record": o,
    "Iterator Record": function(l) {
      return n(l, "[[Iterator]]") && n(l, "[[NextMethod]]") && n(l, "[[Done]]");
    },
    "PromiseCapability Record": function(l) {
      return !!l && n(l, "[[Resolve]]") && typeof l["[[Resolve]]"] == "function" && n(l, "[[Reject]]") && typeof l["[[Reject]]"] == "function" && n(l, "[[Promise]]") && l["[[Promise]]"] && typeof l["[[Promise]]"].then == "function";
    },
    "AsyncGeneratorRequest Record": function(l) {
      return !!l && n(l, "[[Completion]]") && n(l, "[[Capability]]") && a["PromiseCapability Record"](l["[[Capability]]"]);
    },
    "RegExp Record": function(l) {
      return l && n(l, "[[IgnoreCase]]") && typeof l["[[IgnoreCase]]"] == "boolean" && n(l, "[[Multiline]]") && typeof l["[[Multiline]]"] == "boolean" && n(l, "[[DotAll]]") && typeof l["[[DotAll]]"] == "boolean" && n(l, "[[Unicode]]") && typeof l["[[Unicode]]"] == "boolean" && n(l, "[[CapturingGroupsCount]]") && typeof l["[[CapturingGroupsCount]]"] == "number" && i(l["[[CapturingGroupsCount]]"]) && l["[[CapturingGroupsCount]]"] >= 0;
    }
  };
  return yA = function(l, u, c, f) {
    var h = a[u];
    if (typeof h != "function")
      throw new r("unknown record type: " + u);
    if (l(f) !== "Object" || !h(f))
      throw new t(c + " must be a " + u);
  }, yA;
}
var _A;
var D$;
function a_e() {
  return D$ || (D$ = 1, _A = function(t) {
    if (typeof t > "u")
      return t;
    var r = {};
    return "[[Value]]" in t && (r.value = t["[[Value]]"]), "[[Writable]]" in t && (r.writable = !!t["[[Writable]]"]), "[[Get]]" in t && (r.get = t["[[Get]]"]), "[[Set]]" in t && (r.set = t["[[Set]]"]), "[[Enumerable]]" in t && (r.enumerable = !!t["[[Enumerable]]"]), "[[Configurable]]" in t && (r.configurable = !!t["[[Configurable]]"]), r;
  }), _A;
}
var bA;
var R$;
function R2() {
  if (R$)
    return bA;
  R$ = 1;
  var e12 = I1(), t = a_e(), r = zn();
  return bA = function(i) {
    return typeof i < "u" && e12(r, "Property Descriptor", "Desc", i), t(i);
  }, bA;
}
var TA;
var N$;
function P1() {
  if (N$)
    return TA;
  N$ = 1;
  var e12 = Ys, t = zn(), r = I1();
  return TA = function(i) {
    return !(typeof i > "u" || (r(t, "Property Descriptor", "Desc", i), !e12(i, "[[Get]]") && !e12(i, "[[Set]]")));
  }, TA;
}
var EA;
var M$;
function C1() {
  if (M$)
    return EA;
  M$ = 1;
  var e12 = Ys, t = zn(), r = I1();
  return EA = function(i) {
    return !(typeof i > "u" || (r(t, "Property Descriptor", "Desc", i), !e12(i, "[[Value]]") && !e12(i, "[[Writable]]")));
  }, EA;
}
var SA;
var L$;
function pN() {
  if (L$)
    return SA;
  L$ = 1;
  var e12 = O1;
  return SA = function(r, n) {
    return r === n ? r === 0 ? 1 / r === 1 / n : true : e12(r) && e12(n);
  }, SA;
}
var N2 = function(t) {
  return !!t;
};
var M2 = Function.prototype.toString;
var pf = typeof Reflect == "object" && Reflect !== null && Reflect.apply;
var $P;
var pb;
if (typeof pf == "function" && typeof Object.defineProperty == "function")
  try {
    $P = Object.defineProperty({}, "length", {
      get: function() {
        throw pb;
      }
    }), pb = {}, pf(function() {
      throw 42;
    }, null, $P);
  } catch (e12) {
    e12 !== pb && (pf = null);
  }
else
  pf = null;
var s_e = /^\s*class\b/;
var HP = function(t) {
  try {
    var r = M2.call(t);
    return s_e.test(r);
  } catch {
    return false;
  }
};
var wA = function(t) {
  try {
    return HP(t) ? false : (M2.call(t), true);
  } catch {
    return false;
  }
};
var mb = Object.prototype.toString;
var l_e = "[object Object]";
var c_e = "[object Function]";
var u_e = "[object GeneratorFunction]";
var h_e = "[object HTMLAllCollection]";
var f_e = "[object HTML document.all class]";
var d_e = "[object HTMLCollection]";
var p_e = typeof Symbol == "function" && !!Symbol.toStringTag;
var m_e = !(0 in [,]);
var UP = function() {
  return false;
};
if (typeof document == "object") {
  g_e = document.all;
  mb.call(g_e) === mb.call(document.all) && (UP = function(t) {
    if ((m_e || !t) && (typeof t > "u" || typeof t == "object"))
      try {
        var r = mb.call(t);
        return (r === h_e || r === f_e || r === d_e || r === l_e) && t("") == null;
      } catch {
      }
    return false;
  });
}
var g_e;
var mN = pf ? function(t) {
  if (UP(t))
    return true;
  if (!t || typeof t != "function" && typeof t != "object")
    return false;
  try {
    pf(t, null, $P);
  } catch (r) {
    if (r !== pb)
      return false;
  }
  return !HP(t) && wA(t);
} : function(t) {
  if (UP(t))
    return true;
  if (!t || typeof t != "function" && typeof t != "object")
    return false;
  if (p_e)
    return wA(t);
  if (HP(t))
    return false;
  var r = mb.call(t);
  return r !== c_e && r !== u_e && !/^\[object HTML/.test(r) ? false : wA(t);
};
var gN = mN;
var AA;
var B$;
function L2() {
  if (B$)
    return AA;
  B$ = 1;
  var e12 = Ys, t = ir, r = t("%TypeError%"), n = zn(), i = N2, o = gN;
  return AA = function(s) {
    if (n(s) !== "Object")
      throw new r("ToPropertyDescriptor requires an object");
    var l = {};
    if (e12(s, "enumerable") && (l["[[Enumerable]]"] = i(s.enumerable)), e12(s, "configurable") && (l["[[Configurable]]"] = i(s.configurable)), e12(s, "value") && (l["[[Value]]"] = s.value), e12(s, "writable") && (l["[[Writable]]"] = i(s.writable)), e12(s, "get")) {
      var u = s.get;
      if (typeof u < "u" && !o(u))
        throw new r("getter must be a function");
      l["[[Get]]"] = u;
    }
    if (e12(s, "set")) {
      var c = s.set;
      if (typeof c < "u" && !o(c))
        throw new r("setter must be a function");
      l["[[Set]]"] = c;
    }
    if ((e12(l, "[[Get]]") || e12(l, "[[Set]]")) && (e12(l, "[[Value]]") || e12(l, "[[Writable]]")))
      throw new r("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");
    return l;
  }, AA;
}
var OA;
var F$;
function v_e() {
  if (F$)
    return OA;
  F$ = 1;
  var e12 = ir, t = e12("%TypeError%"), r = dN(), n = D2(), i = R2(), o = P1(), a = C1(), s = ac(), l = pN(), u = L2(), c = zn();
  return OA = function(h, d, p) {
    if (c(h) !== "Object")
      throw new t("Assertion failed: Type(O) is not Object");
    if (!s(d))
      throw new t("Assertion failed: IsPropertyKey(P) is not true");
    var m = r({
      Type: c,
      IsDataDescriptor: a,
      IsAccessorDescriptor: o
    }, p) ? p : u(p);
    if (!r({
      Type: c,
      IsDataDescriptor: a,
      IsAccessorDescriptor: o
    }, m))
      throw new t("Assertion failed: Desc is not a valid Property Descriptor");
    return n(a, l, i, h, d, m);
  }, OA;
}
var H$;
function y_e() {
  if (H$)
    return f_.exports;
  H$ = 1;
  var e12 = i_e(), t = e12("%Reflect.construct%", true), r = v_e();
  try {
    r({}, "", {
      "[[Get]]": function() {
      }
    });
  } catch {
    r = null;
  }
  if (r && t) {
    var n = {}, i = {};
    r(i, "length", {
      "[[Get]]": function() {
        throw n;
      },
      "[[Enumerable]]": true
    }), f_.exports = function(a) {
      try {
        t(a, i);
      } catch (s) {
        return s === n;
      }
    };
  } else
    f_.exports = function(a) {
      return typeof a == "function" && !!a.prototype;
    };
  return f_.exports;
}
var B2 = ir;
var U$ = B2("%Symbol.species%", true);
var j$ = B2("%TypeError%");
var G$ = Eye();
var z$ = Zv;
var __e = fN();
var b_e = y_e();
var T_e = zn();
var E_e = lN();
var F2 = function(t, r) {
  if (!E_e(r) || r < 0)
    throw new j$("Assertion failed: length must be an integer >= 0");
  var n = __e(t);
  if (!n)
    return G$(r);
  var i = z$(t, "constructor");
  if (U$ && T_e(i) === "Object" && (i = z$(i, U$), i === null && (i = void 0)), typeof i > "u")
    return G$(r);
  if (!b_e(i))
    throw new j$("C must be a constructor");
  return new i(r);
};
var $2 = Number.MAX_SAFE_INTEGER || 9007199254740991;
var IA;
var V$;
function H2() {
  if (V$)
    return IA;
  V$ = 1;
  var e12 = ir, t = Ai, r = e12("%TypeError%"), n = fN(), i = e12("%Reflect.apply%", true) || t("Function.prototype.apply");
  return IA = function(a, s) {
    var l = arguments.length > 2 ? arguments[2] : [];
    if (!n(l))
      throw new r("Assertion failed: optional `argumentsList`, if provided, must be a List");
    return i(a, s, l);
  }, IA;
}
var PA;
var X$;
function U2() {
  return X$ || (X$ = 1, PA = function(t) {
    return t === null || typeof t != "function" && typeof t != "object";
  }), PA;
}
var CA;
var W$;
function S_e() {
  if (W$)
    return CA;
  W$ = 1;
  var e12 = ir, t = e12("%Object.preventExtensions%", true), r = e12("%Object.isExtensible%", true), n = U2();
  return CA = t ? function(o) {
    return !n(o) && r(o);
  } : function(o) {
    return !n(o);
  }, CA;
}
var xA;
var Y$;
function w_e() {
  return Y$ || (Y$ = 1, xA = function(t, r) {
    return !!r && typeof r == "object" && "[[Enumerable]]" in r && "[[Configurable]]" in r && (t.IsAccessorDescriptor(r) || t.IsDataDescriptor(r));
  }), xA;
}
var kA;
var q$;
function A_e() {
  if (q$)
    return kA;
  q$ = 1;
  var e12 = I1(), t = P1(), r = C1(), n = zn();
  return kA = function(o) {
    return typeof o > "u" ? false : (e12(n, "Property Descriptor", "Desc", o), !t(o) && !r(o));
  }, kA;
}
var DA;
var K$;
function O_e() {
  if (K$)
    return DA;
  K$ = 1;
  var e12 = ir, t = e12("%TypeError%"), r = D2(), n = w_e(), i = dN(), o = R2(), a = P1(), s = C1(), l = A_e(), u = ac(), c = pN(), f = zn();
  return DA = function(d, p, m, g, v) {
    var _ = f(d);
    if (_ !== "Undefined" && _ !== "Object")
      throw new t("Assertion failed: O must be undefined or an Object");
    if (!u(p))
      throw new t("Assertion failed: P must be a Property Key");
    if (f(m) !== "Boolean")
      throw new t("Assertion failed: extensible must be a Boolean");
    if (!i({
      Type: f,
      IsDataDescriptor: s,
      IsAccessorDescriptor: a
    }, g))
      throw new t("Assertion failed: Desc must be a Property Descriptor");
    if (f(v) !== "Undefined" && !i({
      Type: f,
      IsDataDescriptor: s,
      IsAccessorDescriptor: a
    }, v))
      throw new t("Assertion failed: current must be a Property Descriptor, or undefined");
    if (f(v) === "Undefined")
      return m ? _ === "Undefined" ? true : a(g) ? r(s, c, o, d, p, g) : r(s, c, o, d, p, {
        "[[Configurable]]": !!g["[[Configurable]]"],
        "[[Enumerable]]": !!g["[[Enumerable]]"],
        "[[Value]]": g["[[Value]]"],
        "[[Writable]]": !!g["[[Writable]]"]
      }) : false;
    if (!n({
      IsAccessorDescriptor: a,
      IsDataDescriptor: s
    }, v))
      throw new t("`current`, when present, must be a fully populated and valid Property Descriptor");
    if (!v["[[Configurable]]"]) {
      if ("[[Configurable]]" in g && g["[[Configurable]]"] || "[[Enumerable]]" in g && !c(g["[[Enumerable]]"], v["[[Enumerable]]"]) || !l(g) && !c(a(g), a(v)))
        return false;
      if (a(v)) {
        if ("[[Get]]" in g && !c(g["[[Get]]"], v["[[Get]]"]) || "[[Set]]" in g && !c(g["[[Set]]"], v["[[Set]]"]))
          return false;
      } else if (!v["[[Writable]]"] && ("[[Writable]]" in g && g["[[Writable]]"] || "[[Value]]" in g && !c(g["[[Value]]"], v["[[Value]]"])))
        return false;
    }
    if (_ !== "Undefined") {
      var y, b;
      return s(v) && a(g) ? (y = ("[[Configurable]]" in g ? g : v)["[[Configurable]]"], b = ("[[Enumerable]]" in g ? g : v)["[[Enumerable]]"], r(s, c, o, d, p, {
        "[[Configurable]]": !!y,
        "[[Enumerable]]": !!b,
        "[[Get]]": ("[[Get]]" in g ? g : v)["[[Get]]"],
        "[[Set]]": ("[[Set]]" in g ? g : v)["[[Set]]"]
      })) : a(v) && s(g) ? (y = ("[[Configurable]]" in g ? g : v)["[[Configurable]]"], b = ("[[Enumerable]]" in g ? g : v)["[[Enumerable]]"], r(s, c, o, d, p, {
        "[[Configurable]]": !!y,
        "[[Enumerable]]": !!b,
        "[[Value]]": ("[[Value]]" in g ? g : v)["[[Value]]"],
        "[[Writable]]": !!("[[Writable]]" in g ? g : v)["[[Writable]]"]
      })) : r(s, c, o, d, p, g);
    }
    return true;
  }, DA;
}
var RA;
var Z$;
function I_e() {
  if (Z$)
    return RA;
  Z$ = 1;
  var e12 = ir, t = aN, r = e12("%SyntaxError%"), n = e12("%TypeError%"), i = dN(), o = P1(), a = C1(), s = S_e(), l = ac(), u = L2(), c = pN(), f = zn(), h = O_e();
  return RA = function(p, m, g) {
    if (f(p) !== "Object")
      throw new n("Assertion failed: O must be an Object");
    if (!l(m))
      throw new n("Assertion failed: P must be a Property Key");
    if (!i({
      Type: f,
      IsDataDescriptor: a,
      IsAccessorDescriptor: o
    }, g))
      throw new n("Assertion failed: Desc must be a Property Descriptor");
    if (!t) {
      if (o(g))
        throw new r("This environment does not support accessor property descriptors.");
      var v = !(m in p) && g["[[Writable]]"] && g["[[Enumerable]]"] && g["[[Configurable]]"] && "[[Value]]" in g, _ = m in p && (!("[[Configurable]]" in g) || g["[[Configurable]]"]) && (!("[[Enumerable]]" in g) || g["[[Enumerable]]"]) && (!("[[Writable]]" in g) || g["[[Writable]]"]) && "[[Value]]" in g;
      if (v || _)
        return p[m] = g["[[Value]]"], c(p[m], g["[[Value]]"]);
      throw new r("This environment does not support defining non-writable, non-enumerable, or non-configurable properties");
    }
    var y = t(p, m), b = y && u(y), T = s(p);
    return h(p, m, T, g, b);
  }, RA;
}
var NA;
var Q$;
function P_e() {
  if (Q$)
    return NA;
  Q$ = 1;
  var e12 = ir, t = e12("%TypeError%"), r = ac(), n = I_e(), i = zn();
  return NA = function(a, s, l) {
    if (i(a) !== "Object")
      throw new t("Assertion failed: Type(O) is not Object");
    if (!r(s))
      throw new t("Assertion failed: IsPropertyKey(P) is not true");
    var u = {
      "[[Configurable]]": true,
      "[[Enumerable]]": true,
      "[[Value]]": l,
      "[[Writable]]": true
    };
    return n(a, s, u);
  }, NA;
}
var MA;
var J$;
function j2() {
  if (J$)
    return MA;
  J$ = 1;
  var e12 = ir, t = e12("%TypeError%"), r = P_e(), n = ac(), i = zn();
  return MA = function(a, s, l) {
    if (i(a) !== "Object")
      throw new t("Assertion failed: Type(O) is not Object");
    if (!n(s))
      throw new t("Assertion failed: IsPropertyKey(P) is not true");
    var u = r(a, s, l);
    if (!u)
      throw new t("unable to create data property");
  }, MA;
}
var LA;
var eH;
function G2() {
  if (eH)
    return LA;
  eH = 1;
  var e12 = ir, t = e12("%TypeError%"), r = ac(), n = zn();
  return LA = function(o, a) {
    if (n(o) !== "Object")
      throw new t("Assertion failed: `O` must be an Object");
    if (!r(a))
      throw new t("Assertion failed: `P` must be a Property Key");
    return a in o;
  }, LA;
}
var BA;
var tH;
function C_e() {
  return tH || (tH = 1, BA = function(t) {
    return t === null || typeof t != "function" && typeof t != "object";
  }), BA;
}
var x_e = iN;
var Qv = function() {
  return x_e() && !!Symbol.toStringTag;
};
var FA;
var rH;
function k_e() {
  if (rH)
    return FA;
  rH = 1;
  var e12 = Date.prototype.getDay, t = function(a) {
    try {
      return e12.call(a), true;
    } catch {
      return false;
    }
  }, r = Object.prototype.toString, n = "[object Date]", i = Qv();
  return FA = function(a) {
    return typeof a != "object" || a === null ? false : i ? t(a) : r.call(a) === n;
  }, FA;
}
var d_ = { exports: {} };
var nH;
function D_e() {
  if (nH)
    return d_.exports;
  nH = 1;
  var e12 = Object.prototype.toString, t = s2();
  if (t) {
    var r = Symbol.prototype.toString, n = /^Symbol\(.*\)$/, i = function(a) {
      return typeof a.valueOf() != "symbol" ? false : n.test(r.call(a));
    };
    d_.exports = function(a) {
      if (typeof a == "symbol")
        return true;
      if (e12.call(a) !== "[object Symbol]")
        return false;
      try {
        return i(a);
      } catch {
        return false;
      }
    };
  } else
    d_.exports = function(a) {
      return false;
    };
  return d_.exports;
}
var $A;
var iH;
function R_e() {
  if (iH)
    return $A;
  iH = 1;
  var e12 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol", t = C_e(), r = mN, n = k_e(), i = D_e(), o = function(l, u) {
    if (typeof l > "u" || l === null)
      throw new TypeError("Cannot call method on " + l);
    if (typeof u != "string" || u !== "number" && u !== "string")
      throw new TypeError('hint must be "string" or "number"');
    var c = u === "string" ? ["toString", "valueOf"] : ["valueOf", "toString"], f, h, d;
    for (d = 0; d < c.length; ++d)
      if (f = l[c[d]], r(f) && (h = f.call(l), t(h)))
        return h;
    throw new TypeError("No default value");
  }, a = function(l, u) {
    var c = l[u];
    if (c !== null && typeof c < "u") {
      if (!r(c))
        throw new TypeError(c + " returned for property " + u + " of object " + l + " is not a function");
      return c;
    }
  };
  return $A = function(l) {
    if (t(l))
      return l;
    var u = "default";
    arguments.length > 1 && (arguments[1] === String ? u = "string" : arguments[1] === Number && (u = "number"));
    var c;
    if (e12 && (Symbol.toPrimitive ? c = a(l, Symbol.toPrimitive) : i(l) && (c = Symbol.prototype.valueOf)), typeof c < "u") {
      var f = c.call(l, u);
      if (t(f))
        return f;
      throw new TypeError("unable to convert exotic object to primitive");
    }
    return u === "default" && (n(l) || i(l)) && (u = "string"), o(l, u === "default" ? "number" : u);
  }, $A;
}
var HA;
var oH;
function N_e() {
  if (oH)
    return HA;
  oH = 1;
  var e12 = R_e();
  return HA = function(r) {
    return arguments.length > 1 ? e12(r, arguments[1]) : e12(r);
  }, HA;
}
var jP = Ai;
var z2 = Qv();
var V2;
var X2;
var GP;
var zP;
if (z2) {
  V2 = jP("Object.prototype.hasOwnProperty"), X2 = jP("RegExp.prototype.exec"), GP = {};
  UA = function() {
    throw GP;
  };
  zP = {
    toString: UA,
    valueOf: UA
  }, typeof Symbol.toPrimitive == "symbol" && (zP[Symbol.toPrimitive] = UA);
}
var UA;
var M_e = jP("Object.prototype.toString");
var L_e = Object.getOwnPropertyDescriptor;
var B_e = "[object RegExp]";
var W2 = z2 ? function(t) {
  if (!t || typeof t != "object")
    return false;
  var r = L_e(t, "lastIndex"), n = r && V2(r, "value");
  if (!n)
    return false;
  try {
    X2(t, zP);
  } catch (i) {
    return i === GP;
  }
} : function(t) {
  return !t || typeof t != "object" && typeof t != "function" ? false : M_e(t) === B_e;
};
var jA;
var aH;
function F_e() {
  if (aH)
    return jA;
  aH = 1;
  var e12 = Ai, t = ir, r = W2, n = e12("RegExp.prototype.exec"), i = t("%TypeError%");
  return jA = function(a) {
    if (!r(a))
      throw new i("`regex` must be a RegExp");
    return function(l) {
      return n(a, l) !== null;
    };
  }, jA;
}
var $_e = ir;
var H_e = $_e("%TypeError%");
var U_e = function(t, r) {
  if (t == null)
    throw new H_e(r || "Cannot call method on " + t);
  return t;
};
var ap = U_e;
var Y2 = ir;
var j_e = Y2("%String%");
var G_e = Y2("%TypeError%");
var vN = function(t) {
  if (typeof t == "symbol")
    throw new G_e("Cannot convert a Symbol value to a string");
  return j_e(t);
};
var z_e = ap;
var V_e = vN;
var X_e = Ai;
var sH = X_e("String.prototype.replace");
var q2 = /^\s$/.test("᠎");
var W_e = q2 ? /^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/ : /^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/;
var Y_e = q2 ? /[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/ : /[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;
var K2 = function() {
  var t = V_e(z_e(this));
  return sH(sH(t, W_e, ""), Y_e, "");
};
var q_e = K2;
var lH = "​";
var Ph = "᠎";
var Z2 = function() {
  return String.prototype.trim && lH.trim() === lH && Ph.trim() === Ph && ("_" + Ph).trim() === "_" + Ph && (Ph + "_").trim() === Ph + "_" ? String.prototype.trim : q_e;
};
var K_e = ii;
var Z_e = Z2;
var Q_e = function() {
  var t = Z_e();
  return K_e(String.prototype, {
    trim: t
  }, {
    trim: function() {
      return String.prototype.trim !== t;
    }
  }), t;
};
var J_e = qs;
var ebe = ii;
var tbe = ap;
var rbe = K2;
var Q2 = Z2;
var nbe = Q_e;
var ibe = J_e(Q2());
var J2 = function(t) {
  return tbe(t), ibe(t);
};
ebe(J2, {
  getPolyfill: Q2,
  implementation: rbe,
  shim: nbe
});
var eX = J2;
var GA;
var cH;
function obe() {
  if (cH)
    return GA;
  cH = 1;
  var e12 = ir, t = e12("%Number%"), r = e12("%RegExp%"), n = e12("%TypeError%"), i = e12("%parseInt%"), o = Ai, a = F_e(), s = o("String.prototype.slice"), l = a(/^0b[01]+$/i), u = a(/^0o[0-7]+$/i), c = a(/^[-+]0x[0-9a-f]+$/i), f = ["", "​", "￾"].join(""), h = new r("[" + f + "]", "g"), d = a(h), p = eX, m = zn();
  return GA = function g(v) {
    if (m(v) !== "String")
      throw new n("Assertion failed: `argument` is not a String");
    if (l(v))
      return t(i(s(v, 2), 2));
    if (u(v))
      return t(i(s(v, 2), 8));
    if (d(v) || c(v))
      return NaN;
    var _ = p(v);
    return _ !== v ? g(_) : t(v);
  }, GA;
}
var tX = ir;
var uH = tX("%TypeError%");
var hH = tX("%Number%");
var abe = U2();
var sbe = N_e();
var lbe = obe();
var cbe = function(t) {
  var r = abe(t) ? t : sbe(t, hH);
  if (typeof r == "symbol")
    throw new uH("Cannot convert a Symbol value to a number");
  if (typeof r == "bigint")
    throw new uH("Conversion from 'BigInt' to 'number' is not allowed.");
  return typeof r == "string" ? lbe(r) : hH(r);
};
var ube = zn();
var hbe = Math.floor;
var fbe = function(t) {
  return ube(t) === "BigInt" ? t : hbe(t);
};
var dbe = ir;
var fH = fbe;
var pbe = dbe("%TypeError%");
var mbe = function(t) {
  if (typeof t != "number" && typeof t != "bigint")
    throw new pbe("argument must be a Number or a BigInt");
  var r = t < 0 ? -fH(-t) : fH(t);
  return r === 0 ? 0 : r;
};
var gbe = cbe;
var vbe = mbe;
var ybe = O1;
var _be = S2;
var rX = function(t) {
  var r = gbe(t);
  return ybe(r) || r === 0 ? 0 : _be(r) ? vbe(r) : r;
};
var dH = $2;
var bbe = rX;
var nX = function(t) {
  var r = bbe(t);
  return r <= 0 ? 0 : r > dH ? dH : r;
};
var zA;
var pH;
function iX() {
  if (pH)
    return zA;
  pH = 1;
  var e12 = ir, t = e12("%TypeError%"), r = Zv, n = nX, i = zn();
  return zA = function(a) {
    if (i(a) !== "Object")
      throw new t("Assertion failed: `obj` must be an Object");
    return n(r(a, "length"));
  }, zA;
}
var Tbe = ir;
var mH = Tbe("%TypeError%");
var Ebe = $2;
var Sbe = H2();
var wbe = j2();
var Abe = Zv;
var Obe = G2();
var Ibe = fN();
var Pbe = iX();
var gH = vN;
var Cbe = function e6(t, r, n, i, o) {
  var a;
  arguments.length > 5 && (a = arguments[5]);
  for (var s = i, l = 0; l < n; ) {
    var u = gH(l), c = Obe(r, u);
    if (c === true) {
      var f = Abe(r, u);
      if (typeof a < "u") {
        if (arguments.length <= 6)
          throw new mH("Assertion failed: thisArg is required when mapperFunction is provided");
        f = Sbe(a, arguments[6], [f, l, r]);
      }
      var h = false;
      if (o > 0 && (h = Ibe(f)), h) {
        var d = Pbe(f);
        s = e6(t, f, d, s, o - 1);
      } else {
        if (s >= Ebe)
          throw new mH("index too large");
        wbe(t, gH(s), f), s += 1;
      }
    }
    l += 1;
  }
  return s;
};
var xbe = ir;
var kbe = xbe("%Object%");
var Dbe = ap;
var oX = function(t) {
  return Dbe(t), kbe(t);
};
var Rbe = F2;
var Nbe = Cbe;
var Mbe = Zv;
var Lbe = rX;
var Bbe = nX;
var Fbe = oX;
var aX = function() {
  var t = Fbe(this), r = Bbe(Mbe(t, "length")), n = 1;
  arguments.length > 0 && typeof arguments[0] < "u" && (n = Lbe(arguments[0]));
  var i = Rbe(t, 0);
  return Nbe(i, t, r, 0, n), i;
};
var $be = aX;
var sX = function() {
  return Array.prototype.flat || $be;
};
var VA;
var vH;
function Hbe() {
  if (vH)
    return VA;
  vH = 1;
  var e12 = Ys, t = typeof Symbol == "function" && typeof Symbol.unscopables == "symbol", r = t && Array.prototype[Symbol.unscopables], n = TypeError;
  return VA = function(o) {
    if (typeof o != "string" || !o)
      throw new n("method must be a non-empty string");
    if (!e12(Array.prototype, o))
      throw new n("method must be on Array.prototype");
    t && (r[o] = true);
  }, VA;
}
var XA;
var yH;
function Ube() {
  if (yH)
    return XA;
  yH = 1;
  var e12 = ii, t = Hbe(), r = sX;
  return XA = function() {
    var i = r();
    return e12(Array.prototype, {
      flat: i
    }, {
      flat: function() {
        return Array.prototype.flat !== i;
      }
    }), t("flat"), i;
  }, XA;
}
var jbe = ii;
var Gbe = qs;
var zbe = aX;
var lX = sX;
var Vbe = lX();
var Xbe = Ube();
var cX = Gbe(Vbe);
jbe(cX, {
  getPolyfill: lX,
  implementation: zbe,
  shim: Xbe
});
var Jv = cX;
var _H = {}.hasOwnProperty;
var WA = Function.prototype.call;
var sp = WA.bind ? WA.bind(_H) : function(e12, t) {
  return WA.call(_H, e12, t);
};
var ey = {};
var VP = { exports: {} };
var bH = function(e12) {
  return e12 !== e12;
};
var uX = function(t, r) {
  return t === 0 && r === 0 ? 1 / t === 1 / r : !!(t === r || bH(t) && bH(r));
};
var Wbe = uX;
var hX = function() {
  return typeof Object.is == "function" ? Object.is : Wbe;
};
var Ybe = hX;
var qbe = ii;
var Kbe = function() {
  var t = Ybe();
  return qbe(Object, {
    is: t
  }, {
    is: function() {
      return Object.is !== t;
    }
  }), t;
};
var Zbe = ii;
var Qbe = qs;
var Jbe = uX;
var fX = hX;
var e0e = Kbe;
var dX = Qbe(fX(), Object);
Zbe(dX, {
  getPolyfill: fX,
  implementation: Jbe,
  shim: e0e
});
var yN = dX;
(function(e12, t) {
  Object.defineProperty(t, "__esModule", {
    value: true
  }), t.default = a;
  var r = i(yN), n = i(sp);
  function i(s) {
    return s && s.__esModule ? s : {
      default: s
    };
  }
  function o(s) {
    "@babel/helpers - typeof";
    return o = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(l) {
      return typeof l;
    } : function(l) {
      return l && typeof Symbol == "function" && l.constructor === Symbol && l !== Symbol.prototype ? "symbol" : typeof l;
    }, o(s);
  }
  function a(s, l) {
    if ((0, r.default)(s, l))
      return true;
    if (!s || !l || o(s) !== "object" || o(l) !== "object")
      return false;
    var u = Object.keys(s), c = Object.keys(l);
    if (u.length !== c.length)
      return false;
    u.sort(), c.sort();
    for (var f = 0; f < u.length; f += 1)
      if (!(0, n.default)(l, u[f]) || !(0, r.default)(s[u[f]], l[u[f]]))
        return false;
    return true;
  }
  e12.exports = t.default;
})(VP, VP.exports);
var pX = VP.exports;
var t0e = ap;
var mX = Ai;
var r0e = mX("Object.prototype.propertyIsEnumerable");
var n0e = mX("Array.prototype.push");
var gX = function(t) {
  var r = t0e(t), n = [];
  for (var i in r)
    r0e(r, i) && n0e(n, [i, r[i]]);
  return n;
};
var i0e = gX;
var vX = function() {
  return typeof Object.entries == "function" ? Object.entries : i0e;
};
var o0e = vX;
var a0e = ii;
var s0e = function() {
  var t = o0e();
  return a0e(Object, {
    entries: t
  }, {
    entries: function() {
      return Object.entries !== t;
    }
  }), t;
};
var l0e = ii;
var c0e = qs;
var u0e = gX;
var yX = vX;
var h0e = s0e;
var _X = c0e(yX(), Object);
l0e(_X, {
  getPolyfill: yX,
  implementation: u0e,
  shim: h0e
});
var bX = _X;
var f0e = ir;
var TH = f0e("%TypeError%");
var d0e = Ys;
var p0e = ac();
var m0e = zn();
var g0e = function(t, r) {
  if (m0e(t) !== "Object")
    throw new TH("Assertion failed: `O` must be an Object");
  if (!p0e(r))
    throw new TH("Assertion failed: `P` must be a Property Key");
  return d0e(t, r);
};
var sv = function() {
  return typeof (function() {
  }).name == "string";
};
var ng = Object.getOwnPropertyDescriptor;
if (ng)
  try {
    ng([], "length");
  } catch {
    ng = null;
  }
sv.functionsHaveConfigurableNames = function() {
  if (!sv() || !ng)
    return false;
  var t = ng(function() {
  }, "name");
  return !!t && !!t.configurable;
};
var v0e = Function.prototype.bind;
sv.boundFunctionsHaveNames = function() {
  return sv() && typeof v0e == "function" && (function() {
  }).bind().name !== "";
};
var TX = sv;
var EX = gN;
var y0e = g0e;
var _0e = TX();
var _N = Ai;
var SX = _N("Function.prototype.toString");
var wX = _N("String.prototype.match");
var YA = _N("Object.prototype.toString");
var b0e = /^class /;
var T0e = function(t) {
  if (EX(t) || typeof t != "function")
    return false;
  try {
    var r = wX(SX(t), b0e);
    return !!r;
  } catch {
  }
  return false;
};
var E0e = /\s*function\s+([^(\s]*)\s*/;
var S0e = !(0 in [,]);
var w0e = "[object Object]";
var A0e = "[object HTMLAllCollection]";
var O0e = Function.prototype;
var AX = function() {
  return false;
};
if (typeof document == "object") {
  I0e = document.all;
  YA(I0e) === YA(document.all) && (AX = function(t) {
    if ((S0e || !t) && (typeof t > "u" || typeof t == "object"))
      try {
        var r = YA(t);
        return (r === A0e || r === w0e) && t("") == null;
      } catch {
      }
    return false;
  });
}
var I0e;
var OX = function() {
  if (AX(this) || !T0e(this) && !EX(this))
    throw new TypeError("Function.prototype.name sham getter called on non-function");
  if (_0e && y0e(this, "name"))
    return this.name;
  if (this === O0e)
    return "";
  var t = SX(this), r = wX(t, E0e), n = r && r[1];
  return n;
};
var P0e = OX;
var IX = function() {
  return P0e;
};
var C0e = ii.supportsDescriptors;
var x0e = TX();
var k0e = IX;
var EH = Object.defineProperty;
var D0e = TypeError;
var R0e = function() {
  var t = k0e();
  if (x0e)
    return t;
  if (!C0e)
    throw new D0e("Shimming Function.prototype.name support requires ES5 property descriptor support.");
  var r = Function.prototype;
  return EH(r, "name", {
    configurable: true,
    enumerable: false,
    get: function() {
      var n = t.call(this);
      return this !== r && EH(this, "name", {
        configurable: true,
        enumerable: false,
        value: n,
        writable: false
      }), n;
    }
  }), t;
};
var N0e = ii;
var M0e = qs;
var PX = OX;
var L0e = IX;
var B0e = R0e;
var CX = M0e(PX);
N0e(CX, {
  getPolyfill: L0e,
  implementation: PX,
  shim: B0e
});
var bN = CX;
var xX = {};
var kX = {};
Object.defineProperty(kX, "__esModule", {
  value: true
});
var x1 = {};
var lp = {};
var V0 = De && De.__assign || function() {
  return V0 = Object.assign || function(e12) {
    for (var t, r = 1, n = arguments.length; r < n; r++) {
      t = arguments[r];
      for (var i in t)
        Object.prototype.hasOwnProperty.call(t, i) && (e12[i] = t[i]);
    }
    return e12;
  }, V0.apply(this, arguments);
};
Object.defineProperty(lp, "__esModule", {
  value: true
});
lp.flatten = void 0;
var F0e = {
  xml: false,
  decodeEntities: true
};
lp.default = F0e;
var SH = {
  _useHtmlParser2: true,
  xmlMode: true
};
function $0e(e12) {
  return (e12 == null ? void 0 : e12.xml) ? typeof e12.xml == "boolean" ? SH : V0(V0({}, SH), e12.xml) : e12 ?? void 0;
}
lp.flatten = $0e;
var tn = {};
var Jo = {};
var eo = {};
var ni = {};
var cp = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.Doctype = e12.CDATA = e12.Tag = e12.Style = e12.Script = e12.Comment = e12.Directive = e12.Text = e12.Root = e12.isTag = e12.ElementType = void 0;
  var t;
  (function(n) {
    n.Root = "root", n.Text = "text", n.Directive = "directive", n.Comment = "comment", n.Script = "script", n.Style = "style", n.Tag = "tag", n.CDATA = "cdata", n.Doctype = "doctype";
  })(t = e12.ElementType || (e12.ElementType = {}));
  function r(n) {
    return n.type === t.Tag || n.type === t.Script || n.type === t.Style;
  }
  e12.isTag = r, e12.Root = t.Root, e12.Text = t.Text, e12.Directive = t.Directive, e12.Comment = t.Comment, e12.Script = t.Script, e12.Style = t.Style, e12.Tag = t.Tag, e12.CDATA = t.CDATA, e12.Doctype = t.Doctype;
})(cp);
var Xt = {};
var sc = De && De.__extends || /* @__PURE__ */ function() {
  var e12 = function(t, r) {
    return e12 = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i)
        Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, e12(t, r);
  };
  return function(t, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    e12(t, r);
    function n() {
      this.constructor = t;
    }
    t.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}();
var ig = De && De.__assign || function() {
  return ig = Object.assign || function(e12) {
    for (var t, r = 1, n = arguments.length; r < n; r++) {
      t = arguments[r];
      for (var i in t)
        Object.prototype.hasOwnProperty.call(t, i) && (e12[i] = t[i]);
    }
    return e12;
  }, ig.apply(this, arguments);
};
Object.defineProperty(Xt, "__esModule", {
  value: true
});
Xt.cloneNode = Xt.hasChildren = Xt.isDocument = Xt.isDirective = Xt.isComment = Xt.isText = Xt.isCDATA = Xt.isTag = Xt.Element = Xt.Document = Xt.CDATA = Xt.NodeWithChildren = Xt.ProcessingInstruction = Xt.Comment = Xt.Text = Xt.DataNode = Xt.Node = void 0;
var $i = cp;
var TN = (
  /** @class */
  function() {
    function e12() {
      this.parent = null, this.prev = null, this.next = null, this.startIndex = null, this.endIndex = null;
    }
    return Object.defineProperty(e12.prototype, "parentNode", {
      // Read-write aliases for properties
      /**
       * Same as {@link parent}.
       * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.
       */
      get: function() {
        return this.parent;
      },
      set: function(t) {
        this.parent = t;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "previousSibling", {
      /**
       * Same as {@link prev}.
       * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.
       */
      get: function() {
        return this.prev;
      },
      set: function(t) {
        this.prev = t;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(e12.prototype, "nextSibling", {
      /**
       * Same as {@link next}.
       * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.
       */
      get: function() {
        return this.next;
      },
      set: function(t) {
        this.next = t;
      },
      enumerable: false,
      configurable: true
    }), e12.prototype.cloneNode = function(t) {
      return t === void 0 && (t = false), EN(this, t);
    }, e12;
  }()
);
Xt.Node = TN;
var k1 = (
  /** @class */
  function(e12) {
    sc(t, e12);
    function t(r) {
      var n = e12.call(this) || this;
      return n.data = r, n;
    }
    return Object.defineProperty(t.prototype, "nodeValue", {
      /**
       * Same as {@link data}.
       * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.
       */
      get: function() {
        return this.data;
      },
      set: function(r) {
        this.data = r;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(TN)
);
Xt.DataNode = k1;
var DX = (
  /** @class */
  function(e12) {
    sc(t, e12);
    function t() {
      var r = e12 !== null && e12.apply(this, arguments) || this;
      return r.type = $i.ElementType.Text, r;
    }
    return Object.defineProperty(t.prototype, "nodeType", {
      get: function() {
        return 3;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(k1)
);
Xt.Text = DX;
var RX = (
  /** @class */
  function(e12) {
    sc(t, e12);
    function t() {
      var r = e12 !== null && e12.apply(this, arguments) || this;
      return r.type = $i.ElementType.Comment, r;
    }
    return Object.defineProperty(t.prototype, "nodeType", {
      get: function() {
        return 8;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(k1)
);
Xt.Comment = RX;
var NX = (
  /** @class */
  function(e12) {
    sc(t, e12);
    function t(r, n) {
      var i = e12.call(this, n) || this;
      return i.name = r, i.type = $i.ElementType.Directive, i;
    }
    return Object.defineProperty(t.prototype, "nodeType", {
      get: function() {
        return 1;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(k1)
);
Xt.ProcessingInstruction = NX;
var D1 = (
  /** @class */
  function(e12) {
    sc(t, e12);
    function t(r) {
      var n = e12.call(this) || this;
      return n.children = r, n;
    }
    return Object.defineProperty(t.prototype, "firstChild", {
      // Aliases
      /** First child of the node. */
      get: function() {
        var r;
        return (r = this.children[0]) !== null && r !== void 0 ? r : null;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "lastChild", {
      /** Last child of the node. */
      get: function() {
        return this.children.length > 0 ? this.children[this.children.length - 1] : null;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "childNodes", {
      /**
       * Same as {@link children}.
       * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.
       */
      get: function() {
        return this.children;
      },
      set: function(r) {
        this.children = r;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(TN)
);
Xt.NodeWithChildren = D1;
var MX = (
  /** @class */
  function(e12) {
    sc(t, e12);
    function t() {
      var r = e12 !== null && e12.apply(this, arguments) || this;
      return r.type = $i.ElementType.CDATA, r;
    }
    return Object.defineProperty(t.prototype, "nodeType", {
      get: function() {
        return 4;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(D1)
);
Xt.CDATA = MX;
var LX = (
  /** @class */
  function(e12) {
    sc(t, e12);
    function t() {
      var r = e12 !== null && e12.apply(this, arguments) || this;
      return r.type = $i.ElementType.Root, r;
    }
    return Object.defineProperty(t.prototype, "nodeType", {
      get: function() {
        return 9;
      },
      enumerable: false,
      configurable: true
    }), t;
  }(D1)
);
Xt.Document = LX;
var BX = (
  /** @class */
  function(e12) {
    sc(t, e12);
    function t(r, n, i, o) {
      i === void 0 && (i = []), o === void 0 && (o = r === "script" ? $i.ElementType.Script : r === "style" ? $i.ElementType.Style : $i.ElementType.Tag);
      var a = e12.call(this, i) || this;
      return a.name = r, a.attribs = n, a.type = o, a;
    }
    return Object.defineProperty(t.prototype, "nodeType", {
      get: function() {
        return 1;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "tagName", {
      // DOM Level 1 aliases
      /**
       * Same as {@link name}.
       * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.
       */
      get: function() {
        return this.name;
      },
      set: function(r) {
        this.name = r;
      },
      enumerable: false,
      configurable: true
    }), Object.defineProperty(t.prototype, "attributes", {
      get: function() {
        var r = this;
        return Object.keys(this.attribs).map(function(n) {
          var i, o;
          return {
            name: n,
            value: r.attribs[n],
            namespace: (i = r["x-attribsNamespace"]) === null || i === void 0 ? void 0 : i[n],
            prefix: (o = r["x-attribsPrefix"]) === null || o === void 0 ? void 0 : o[n]
          };
        });
      },
      enumerable: false,
      configurable: true
    }), t;
  }(D1)
);
Xt.Element = BX;
function FX(e12) {
  return (0, $i.isTag)(e12);
}
Xt.isTag = FX;
function $X(e12) {
  return e12.type === $i.ElementType.CDATA;
}
Xt.isCDATA = $X;
function HX(e12) {
  return e12.type === $i.ElementType.Text;
}
Xt.isText = HX;
function UX(e12) {
  return e12.type === $i.ElementType.Comment;
}
Xt.isComment = UX;
function jX(e12) {
  return e12.type === $i.ElementType.Directive;
}
Xt.isDirective = jX;
function GX(e12) {
  return e12.type === $i.ElementType.Root;
}
Xt.isDocument = GX;
function H0e(e12) {
  return Object.prototype.hasOwnProperty.call(e12, "children");
}
Xt.hasChildren = H0e;
function EN(e12, t) {
  t === void 0 && (t = false);
  var r;
  if (HX(e12))
    r = new DX(e12.data);
  else if (UX(e12))
    r = new RX(e12.data);
  else if (FX(e12)) {
    var n = t ? qA(e12.children) : [], i = new BX(e12.name, ig({}, e12.attribs), n);
    n.forEach(function(l) {
      return l.parent = i;
    }), e12.namespace != null && (i.namespace = e12.namespace), e12["x-attribsNamespace"] && (i["x-attribsNamespace"] = ig({}, e12["x-attribsNamespace"])), e12["x-attribsPrefix"] && (i["x-attribsPrefix"] = ig({}, e12["x-attribsPrefix"])), r = i;
  } else if ($X(e12)) {
    var n = t ? qA(e12.children) : [], o = new MX(n);
    n.forEach(function(u) {
      return u.parent = o;
    }), r = o;
  } else if (GX(e12)) {
    var n = t ? qA(e12.children) : [], a = new LX(n);
    n.forEach(function(u) {
      return u.parent = a;
    }), e12["x-mode"] && (a["x-mode"] = e12["x-mode"]), r = a;
  } else if (jX(e12)) {
    var s = new NX(e12.name, e12.data);
    e12["x-name"] != null && (s["x-name"] = e12["x-name"], s["x-publicId"] = e12["x-publicId"], s["x-systemId"] = e12["x-systemId"]), r = s;
  } else
    throw new Error("Not implemented yet: ".concat(e12.type));
  return r.startIndex = e12.startIndex, r.endIndex = e12.endIndex, e12.sourceCodeLocation != null && (r.sourceCodeLocation = e12.sourceCodeLocation), r;
}
Xt.cloneNode = EN;
function qA(e12) {
  for (var t = e12.map(function(n) {
    return EN(n, true);
  }), r = 1; r < t.length; r++)
    t[r].prev = t[r - 1], t[r - 1].next = t[r];
  return t;
}
(function(e12) {
  var t = De && De.__createBinding || (Object.create ? function(s, l, u, c) {
    c === void 0 && (c = u);
    var f = Object.getOwnPropertyDescriptor(l, u);
    (!f || ("get" in f ? !l.__esModule : f.writable || f.configurable)) && (f = {
      enumerable: true,
      get: function() {
        return l[u];
      }
    }), Object.defineProperty(s, c, f);
  } : function(s, l, u, c) {
    c === void 0 && (c = u), s[c] = l[u];
  }), r = De && De.__exportStar || function(s, l) {
    for (var u in s)
      u !== "default" && !Object.prototype.hasOwnProperty.call(l, u) && t(l, s, u);
  };
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.DomHandler = void 0;
  var n = cp, i = Xt;
  r(Xt, e12);
  var o = {
    withStartIndices: false,
    withEndIndices: false,
    xmlMode: false
  }, a = (
    /** @class */
    function() {
      function s(l, u, c) {
        this.dom = [], this.root = new i.Document(this.dom), this.done = false, this.tagStack = [this.root], this.lastNode = null, this.parser = null, typeof u == "function" && (c = u, u = o), typeof l == "object" && (u = l, l = void 0), this.callback = l ?? null, this.options = u ?? o, this.elementCB = c ?? null;
      }
      return s.prototype.onparserinit = function(l) {
        this.parser = l;
      }, s.prototype.onreset = function() {
        this.dom = [], this.root = new i.Document(this.dom), this.done = false, this.tagStack = [this.root], this.lastNode = null, this.parser = null;
      }, s.prototype.onend = function() {
        this.done || (this.done = true, this.parser = null, this.handleCallback(null));
      }, s.prototype.onerror = function(l) {
        this.handleCallback(l);
      }, s.prototype.onclosetag = function() {
        this.lastNode = null;
        var l = this.tagStack.pop();
        this.options.withEndIndices && (l.endIndex = this.parser.endIndex), this.elementCB && this.elementCB(l);
      }, s.prototype.onopentag = function(l, u) {
        var c = this.options.xmlMode ? n.ElementType.Tag : void 0, f = new i.Element(l, u, void 0, c);
        this.addNode(f), this.tagStack.push(f);
      }, s.prototype.ontext = function(l) {
        var u = this.lastNode;
        if (u && u.type === n.ElementType.Text)
          u.data += l, this.options.withEndIndices && (u.endIndex = this.parser.endIndex);
        else {
          var c = new i.Text(l);
          this.addNode(c), this.lastNode = c;
        }
      }, s.prototype.oncomment = function(l) {
        if (this.lastNode && this.lastNode.type === n.ElementType.Comment) {
          this.lastNode.data += l;
          return;
        }
        var u = new i.Comment(l);
        this.addNode(u), this.lastNode = u;
      }, s.prototype.oncommentend = function() {
        this.lastNode = null;
      }, s.prototype.oncdatastart = function() {
        var l = new i.Text(""), u = new i.CDATA([l]);
        this.addNode(u), l.parent = u, this.lastNode = l;
      }, s.prototype.oncdataend = function() {
        this.lastNode = null;
      }, s.prototype.onprocessinginstruction = function(l, u) {
        var c = new i.ProcessingInstruction(l, u);
        this.addNode(c);
      }, s.prototype.handleCallback = function(l) {
        if (typeof this.callback == "function")
          this.callback(l, this.dom);
        else if (l)
          throw l;
      }, s.prototype.addNode = function(l) {
        var u = this.tagStack[this.tagStack.length - 1], c = u.children[u.children.length - 1];
        this.options.withStartIndices && (l.startIndex = this.parser.startIndex), this.options.withEndIndices && (l.endIndex = this.parser.endIndex), u.children.push(l), c && (l.prev = c, c.next = l), l.parent = u, this.lastNode = null;
      }, s;
    }()
  );
  e12.DomHandler = a, e12.default = a;
})(ni);
var up = {};
var zX = {};
var bu = {};
var SN = {};
Object.defineProperty(SN, "__esModule", {
  value: true
});
SN.default = new Uint16Array(
  // prettier-ignore
  'ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(function(e12) {
    return e12.charCodeAt(0);
  })
);
var wN = {};
Object.defineProperty(wN, "__esModule", {
  value: true
});
wN.default = new Uint16Array(
  // prettier-ignore
  "Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(function(e12) {
    return e12.charCodeAt(0);
  })
);
var XP = {};
(function(e12) {
  var t;
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.replaceCodePoint = e12.fromCodePoint = void 0;
  var r = /* @__PURE__ */ new Map([
    [0, 65533],
    // C1 Unicode control character reference replacements
    [128, 8364],
    [130, 8218],
    [131, 402],
    [132, 8222],
    [133, 8230],
    [134, 8224],
    [135, 8225],
    [136, 710],
    [137, 8240],
    [138, 352],
    [139, 8249],
    [140, 338],
    [142, 381],
    [145, 8216],
    [146, 8217],
    [147, 8220],
    [148, 8221],
    [149, 8226],
    [150, 8211],
    [151, 8212],
    [152, 732],
    [153, 8482],
    [154, 353],
    [155, 8250],
    [156, 339],
    [158, 382],
    [159, 376]
  ]);
  e12.fromCodePoint = // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition, node/no-unsupported-features/es-builtins
  (t = String.fromCodePoint) !== null && t !== void 0 ? t : function(o) {
    var a = "";
    return o > 65535 && (o -= 65536, a += String.fromCharCode(o >>> 10 & 1023 | 55296), o = 56320 | o & 1023), a += String.fromCharCode(o), a;
  };
  function n(o) {
    var a;
    return o >= 55296 && o <= 57343 || o > 1114111 ? 65533 : (a = r.get(o)) !== null && a !== void 0 ? a : o;
  }
  e12.replaceCodePoint = n;
  function i(o) {
    return (0, e12.fromCodePoint)(n(o));
  }
  e12.default = i;
})(XP);
(function(e12) {
  var t = De && De.__createBinding || (Object.create ? function(S, N, B, w) {
    w === void 0 && (w = B);
    var R = Object.getOwnPropertyDescriptor(N, B);
    (!R || ("get" in R ? !N.__esModule : R.writable || R.configurable)) && (R = {
      enumerable: true,
      get: function() {
        return N[B];
      }
    }), Object.defineProperty(S, w, R);
  } : function(S, N, B, w) {
    w === void 0 && (w = B), S[w] = N[B];
  }), r = De && De.__setModuleDefault || (Object.create ? function(S, N) {
    Object.defineProperty(S, "default", {
      enumerable: true,
      value: N
    });
  } : function(S, N) {
    S.default = N;
  }), n = De && De.__importStar || function(S) {
    if (S && S.__esModule)
      return S;
    var N = {};
    if (S != null)
      for (var B in S)
        B !== "default" && Object.prototype.hasOwnProperty.call(S, B) && t(N, S, B);
    return r(N, S), N;
  }, i = De && De.__importDefault || function(S) {
    return S && S.__esModule ? S : {
      default: S
    };
  };
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.decodeXML = e12.decodeHTMLStrict = e12.decodeHTMLAttribute = e12.decodeHTML = e12.determineBranch = e12.EntityDecoder = e12.DecodingMode = e12.BinTrieFlags = e12.fromCodePoint = e12.replaceCodePoint = e12.decodeCodePoint = e12.xmlDecodeTree = e12.htmlDecodeTree = void 0;
  var o = i(SN);
  e12.htmlDecodeTree = o.default;
  var a = i(wN);
  e12.xmlDecodeTree = a.default;
  var s = n(XP);
  e12.decodeCodePoint = s.default;
  var l = XP;
  Object.defineProperty(e12, "replaceCodePoint", {
    enumerable: true,
    get: function() {
      return l.replaceCodePoint;
    }
  }), Object.defineProperty(e12, "fromCodePoint", {
    enumerable: true,
    get: function() {
      return l.fromCodePoint;
    }
  });
  var u;
  (function(S) {
    S[S.NUM = 35] = "NUM", S[S.SEMI = 59] = "SEMI", S[S.EQUALS = 61] = "EQUALS", S[S.ZERO = 48] = "ZERO", S[S.NINE = 57] = "NINE", S[S.LOWER_A = 97] = "LOWER_A", S[S.LOWER_F = 102] = "LOWER_F", S[S.LOWER_X = 120] = "LOWER_X", S[S.LOWER_Z = 122] = "LOWER_Z", S[S.UPPER_A = 65] = "UPPER_A", S[S.UPPER_F = 70] = "UPPER_F", S[S.UPPER_Z = 90] = "UPPER_Z";
  })(u || (u = {}));
  var c = 32, f;
  (function(S) {
    S[S.VALUE_LENGTH = 49152] = "VALUE_LENGTH", S[S.BRANCH_LENGTH = 16256] = "BRANCH_LENGTH", S[S.JUMP_TABLE = 127] = "JUMP_TABLE";
  })(f = e12.BinTrieFlags || (e12.BinTrieFlags = {}));
  function h(S) {
    return S >= u.ZERO && S <= u.NINE;
  }
  function d(S) {
    return S >= u.UPPER_A && S <= u.UPPER_F || S >= u.LOWER_A && S <= u.LOWER_F;
  }
  function p(S) {
    return S >= u.UPPER_A && S <= u.UPPER_Z || S >= u.LOWER_A && S <= u.LOWER_Z || h(S);
  }
  function m(S) {
    return S === u.EQUALS || p(S);
  }
  var g;
  (function(S) {
    S[S.EntityStart = 0] = "EntityStart", S[S.NumericStart = 1] = "NumericStart", S[S.NumericDecimal = 2] = "NumericDecimal", S[S.NumericHex = 3] = "NumericHex", S[S.NamedEntity = 4] = "NamedEntity";
  })(g || (g = {}));
  var v;
  (function(S) {
    S[S.Legacy = 0] = "Legacy", S[S.Strict = 1] = "Strict", S[S.Attribute = 2] = "Attribute";
  })(v = e12.DecodingMode || (e12.DecodingMode = {}));
  var _ = (
    /** @class */
    function() {
      function S(N, B, w) {
        this.decodeTree = N, this.emitCodePoint = B, this.errors = w, this.state = g.EntityStart, this.consumed = 1, this.result = 0, this.treeIndex = 0, this.excess = 1, this.decodeMode = v.Strict;
      }
      return S.prototype.startEntity = function(N) {
        this.decodeMode = N, this.state = g.EntityStart, this.result = 0, this.treeIndex = 0, this.excess = 1, this.consumed = 1;
      }, S.prototype.write = function(N, B) {
        switch (this.state) {
          case g.EntityStart:
            return N.charCodeAt(B) === u.NUM ? (this.state = g.NumericStart, this.consumed += 1, this.stateNumericStart(N, B + 1)) : (this.state = g.NamedEntity, this.stateNamedEntity(N, B));
          case g.NumericStart:
            return this.stateNumericStart(N, B);
          case g.NumericDecimal:
            return this.stateNumericDecimal(N, B);
          case g.NumericHex:
            return this.stateNumericHex(N, B);
          case g.NamedEntity:
            return this.stateNamedEntity(N, B);
        }
      }, S.prototype.stateNumericStart = function(N, B) {
        return B >= N.length ? -1 : (N.charCodeAt(B) | c) === u.LOWER_X ? (this.state = g.NumericHex, this.consumed += 1, this.stateNumericHex(N, B + 1)) : (this.state = g.NumericDecimal, this.stateNumericDecimal(N, B));
      }, S.prototype.addToNumericResult = function(N, B, w, R) {
        if (B !== w) {
          var F = w - B;
          this.result = this.result * Math.pow(R, F) + parseInt(N.substr(B, F), R), this.consumed += F;
        }
      }, S.prototype.stateNumericHex = function(N, B) {
        for (var w = B; B < N.length; ) {
          var R = N.charCodeAt(B);
          if (h(R) || d(R))
            B += 1;
          else
            return this.addToNumericResult(N, w, B, 16), this.emitNumericEntity(R, 3);
        }
        return this.addToNumericResult(N, w, B, 16), -1;
      }, S.prototype.stateNumericDecimal = function(N, B) {
        for (var w = B; B < N.length; ) {
          var R = N.charCodeAt(B);
          if (h(R))
            B += 1;
          else
            return this.addToNumericResult(N, w, B, 10), this.emitNumericEntity(R, 2);
        }
        return this.addToNumericResult(N, w, B, 10), -1;
      }, S.prototype.emitNumericEntity = function(N, B) {
        var w;
        if (this.consumed <= B)
          return (w = this.errors) === null || w === void 0 || w.absenceOfDigitsInNumericCharacterReference(this.consumed), 0;
        if (N === u.SEMI)
          this.consumed += 1;
        else if (this.decodeMode === v.Strict)
          return 0;
        return this.emitCodePoint((0, s.replaceCodePoint)(this.result), this.consumed), this.errors && (N !== u.SEMI && this.errors.missingSemicolonAfterCharacterReference(), this.errors.validateNumericCharacterReference(this.result)), this.consumed;
      }, S.prototype.stateNamedEntity = function(N, B) {
        for (var w = this.decodeTree, R = w[this.treeIndex], F = (R & f.VALUE_LENGTH) >> 14; B < N.length; B++, this.excess++) {
          var $ = N.charCodeAt(B);
          if (this.treeIndex = b(w, R, this.treeIndex + Math.max(1, F), $), this.treeIndex < 0)
            return this.result === 0 || // If we are parsing an attribute
            this.decodeMode === v.Attribute && // We shouldn't have consumed any characters after the entity,
            (F === 0 || // And there should be no invalid characters.
            m($)) ? 0 : this.emitNotTerminatedNamedEntity();
          if (R = w[this.treeIndex], F = (R & f.VALUE_LENGTH) >> 14, F !== 0) {
            if ($ === u.SEMI)
              return this.emitNamedEntityData(this.treeIndex, F, this.consumed + this.excess);
            this.decodeMode !== v.Strict && (this.result = this.treeIndex, this.consumed += this.excess, this.excess = 0);
          }
        }
        return -1;
      }, S.prototype.emitNotTerminatedNamedEntity = function() {
        var N, B = this, w = B.result, R = B.decodeTree, F = (R[w] & f.VALUE_LENGTH) >> 14;
        return this.emitNamedEntityData(w, F, this.consumed), (N = this.errors) === null || N === void 0 || N.missingSemicolonAfterCharacterReference(), this.consumed;
      }, S.prototype.emitNamedEntityData = function(N, B, w) {
        var R = this.decodeTree;
        return this.emitCodePoint(B === 1 ? R[N] & ~f.VALUE_LENGTH : R[N + 1], w), B === 3 && this.emitCodePoint(R[N + 2], w), w;
      }, S.prototype.end = function() {
        var N;
        switch (this.state) {
          case g.NamedEntity:
            return this.result !== 0 && (this.decodeMode !== v.Attribute || this.result === this.treeIndex) ? this.emitNotTerminatedNamedEntity() : 0;
          case g.NumericDecimal:
            return this.emitNumericEntity(0, 2);
          case g.NumericHex:
            return this.emitNumericEntity(0, 3);
          case g.NumericStart:
            return (N = this.errors) === null || N === void 0 || N.absenceOfDigitsInNumericCharacterReference(this.consumed), 0;
          case g.EntityStart:
            return 0;
        }
      }, S;
    }()
  );
  e12.EntityDecoder = _;
  function y(S) {
    var N = "", B = new _(S, function(w) {
      return N += (0, s.fromCodePoint)(w);
    });
    return function(R, F) {
      for (var $ = 0, K = 0; (K = R.indexOf("&", K)) >= 0; ) {
        N += R.slice($, K), B.startEntity(F);
        var se = B.write(
          R,
          // Skip the "&"
          K + 1
        );
        if (se < 0) {
          $ = K + B.end();
          break;
        }
        $ = K + se, K = se === 0 ? $ + 1 : $;
      }
      var J = N + R.slice($);
      return N = "", J;
    };
  }
  function b(S, N, B, w) {
    var R = (N & f.BRANCH_LENGTH) >> 7, F = N & f.JUMP_TABLE;
    if (R === 0)
      return F !== 0 && w === F ? B : -1;
    if (F) {
      var $ = w - F;
      return $ < 0 || $ >= R ? -1 : S[B + $] - 1;
    }
    for (var K = B, se = K + R - 1; K <= se; ) {
      var J = K + se >>> 1, me = S[J];
      if (me < w)
        K = J + 1;
      else if (me > w)
        se = J - 1;
      else
        return S[J + R];
    }
    return -1;
  }
  e12.determineBranch = b;
  var T = y(o.default), E = y(a.default);
  function P(S, N) {
    return N === void 0 && (N = v.Legacy), T(S, N);
  }
  e12.decodeHTML = P;
  function A(S) {
    return T(S, v.Attribute);
  }
  e12.decodeHTMLAttribute = A;
  function I(S) {
    return T(S, v.Strict);
  }
  e12.decodeHTMLStrict = I;
  function x(S) {
    return E(S, v.Strict);
  }
  e12.decodeXML = x;
})(bu);
var Tu = {};
var AN = {};
Object.defineProperty(AN, "__esModule", {
  value: true
});
function p_(e12) {
  for (var t = 1; t < e12.length; t++)
    e12[t][0] += e12[t - 1][0] + 1;
  return e12;
}
AN.default = new Map(p_([[9, "&Tab;"], [0, "&NewLine;"], [22, "&excl;"], [0, "&quot;"], [0, "&num;"], [0, "&dollar;"], [0, "&percnt;"], [0, "&amp;"], [0, "&apos;"], [0, "&lpar;"], [0, "&rpar;"], [0, "&ast;"], [0, "&plus;"], [0, "&comma;"], [1, "&period;"], [0, "&sol;"], [10, "&colon;"], [0, "&semi;"], [0, {
  v: "&lt;",
  n: 8402,
  o: "&nvlt;"
}], [0, {
  v: "&equals;",
  n: 8421,
  o: "&bne;"
}], [0, {
  v: "&gt;",
  n: 8402,
  o: "&nvgt;"
}], [0, "&quest;"], [0, "&commat;"], [26, "&lbrack;"], [0, "&bsol;"], [0, "&rbrack;"], [0, "&Hat;"], [0, "&lowbar;"], [0, "&DiacriticalGrave;"], [5, {
  n: 106,
  o: "&fjlig;"
}], [20, "&lbrace;"], [0, "&verbar;"], [0, "&rbrace;"], [34, "&nbsp;"], [0, "&iexcl;"], [0, "&cent;"], [0, "&pound;"], [0, "&curren;"], [0, "&yen;"], [0, "&brvbar;"], [0, "&sect;"], [0, "&die;"], [0, "&copy;"], [0, "&ordf;"], [0, "&laquo;"], [0, "&not;"], [0, "&shy;"], [0, "&circledR;"], [0, "&macr;"], [0, "&deg;"], [0, "&PlusMinus;"], [0, "&sup2;"], [0, "&sup3;"], [0, "&acute;"], [0, "&micro;"], [0, "&para;"], [0, "&centerdot;"], [0, "&cedil;"], [0, "&sup1;"], [0, "&ordm;"], [0, "&raquo;"], [0, "&frac14;"], [0, "&frac12;"], [0, "&frac34;"], [0, "&iquest;"], [0, "&Agrave;"], [0, "&Aacute;"], [0, "&Acirc;"], [0, "&Atilde;"], [0, "&Auml;"], [0, "&angst;"], [0, "&AElig;"], [0, "&Ccedil;"], [0, "&Egrave;"], [0, "&Eacute;"], [0, "&Ecirc;"], [0, "&Euml;"], [0, "&Igrave;"], [0, "&Iacute;"], [0, "&Icirc;"], [0, "&Iuml;"], [0, "&ETH;"], [0, "&Ntilde;"], [0, "&Ograve;"], [0, "&Oacute;"], [0, "&Ocirc;"], [0, "&Otilde;"], [0, "&Ouml;"], [0, "&times;"], [0, "&Oslash;"], [0, "&Ugrave;"], [0, "&Uacute;"], [0, "&Ucirc;"], [0, "&Uuml;"], [0, "&Yacute;"], [0, "&THORN;"], [0, "&szlig;"], [0, "&agrave;"], [0, "&aacute;"], [0, "&acirc;"], [0, "&atilde;"], [0, "&auml;"], [0, "&aring;"], [0, "&aelig;"], [0, "&ccedil;"], [0, "&egrave;"], [0, "&eacute;"], [0, "&ecirc;"], [0, "&euml;"], [0, "&igrave;"], [0, "&iacute;"], [0, "&icirc;"], [0, "&iuml;"], [0, "&eth;"], [0, "&ntilde;"], [0, "&ograve;"], [0, "&oacute;"], [0, "&ocirc;"], [0, "&otilde;"], [0, "&ouml;"], [0, "&div;"], [0, "&oslash;"], [0, "&ugrave;"], [0, "&uacute;"], [0, "&ucirc;"], [0, "&uuml;"], [0, "&yacute;"], [0, "&thorn;"], [0, "&yuml;"], [0, "&Amacr;"], [0, "&amacr;"], [0, "&Abreve;"], [0, "&abreve;"], [0, "&Aogon;"], [0, "&aogon;"], [0, "&Cacute;"], [0, "&cacute;"], [0, "&Ccirc;"], [0, "&ccirc;"], [0, "&Cdot;"], [0, "&cdot;"], [0, "&Ccaron;"], [0, "&ccaron;"], [0, "&Dcaron;"], [0, "&dcaron;"], [0, "&Dstrok;"], [0, "&dstrok;"], [0, "&Emacr;"], [0, "&emacr;"], [2, "&Edot;"], [0, "&edot;"], [0, "&Eogon;"], [0, "&eogon;"], [0, "&Ecaron;"], [0, "&ecaron;"], [0, "&Gcirc;"], [0, "&gcirc;"], [0, "&Gbreve;"], [0, "&gbreve;"], [0, "&Gdot;"], [0, "&gdot;"], [0, "&Gcedil;"], [1, "&Hcirc;"], [0, "&hcirc;"], [0, "&Hstrok;"], [0, "&hstrok;"], [0, "&Itilde;"], [0, "&itilde;"], [0, "&Imacr;"], [0, "&imacr;"], [2, "&Iogon;"], [0, "&iogon;"], [0, "&Idot;"], [0, "&imath;"], [0, "&IJlig;"], [0, "&ijlig;"], [0, "&Jcirc;"], [0, "&jcirc;"], [0, "&Kcedil;"], [0, "&kcedil;"], [0, "&kgreen;"], [0, "&Lacute;"], [0, "&lacute;"], [0, "&Lcedil;"], [0, "&lcedil;"], [0, "&Lcaron;"], [0, "&lcaron;"], [0, "&Lmidot;"], [0, "&lmidot;"], [0, "&Lstrok;"], [0, "&lstrok;"], [0, "&Nacute;"], [0, "&nacute;"], [0, "&Ncedil;"], [0, "&ncedil;"], [0, "&Ncaron;"], [0, "&ncaron;"], [0, "&napos;"], [0, "&ENG;"], [0, "&eng;"], [0, "&Omacr;"], [0, "&omacr;"], [2, "&Odblac;"], [0, "&odblac;"], [0, "&OElig;"], [0, "&oelig;"], [0, "&Racute;"], [0, "&racute;"], [0, "&Rcedil;"], [0, "&rcedil;"], [0, "&Rcaron;"], [0, "&rcaron;"], [0, "&Sacute;"], [0, "&sacute;"], [0, "&Scirc;"], [0, "&scirc;"], [0, "&Scedil;"], [0, "&scedil;"], [0, "&Scaron;"], [0, "&scaron;"], [0, "&Tcedil;"], [0, "&tcedil;"], [0, "&Tcaron;"], [0, "&tcaron;"], [0, "&Tstrok;"], [0, "&tstrok;"], [0, "&Utilde;"], [0, "&utilde;"], [0, "&Umacr;"], [0, "&umacr;"], [0, "&Ubreve;"], [0, "&ubreve;"], [0, "&Uring;"], [0, "&uring;"], [0, "&Udblac;"], [0, "&udblac;"], [0, "&Uogon;"], [0, "&uogon;"], [0, "&Wcirc;"], [0, "&wcirc;"], [0, "&Ycirc;"], [0, "&ycirc;"], [0, "&Yuml;"], [0, "&Zacute;"], [0, "&zacute;"], [0, "&Zdot;"], [0, "&zdot;"], [0, "&Zcaron;"], [0, "&zcaron;"], [19, "&fnof;"], [34, "&imped;"], [63, "&gacute;"], [65, "&jmath;"], [142, "&circ;"], [0, "&caron;"], [16, "&breve;"], [0, "&DiacriticalDot;"], [0, "&ring;"], [0, "&ogon;"], [0, "&DiacriticalTilde;"], [0, "&dblac;"], [51, "&DownBreve;"], [127, "&Alpha;"], [0, "&Beta;"], [0, "&Gamma;"], [0, "&Delta;"], [0, "&Epsilon;"], [0, "&Zeta;"], [0, "&Eta;"], [0, "&Theta;"], [0, "&Iota;"], [0, "&Kappa;"], [0, "&Lambda;"], [0, "&Mu;"], [0, "&Nu;"], [0, "&Xi;"], [0, "&Omicron;"], [0, "&Pi;"], [0, "&Rho;"], [1, "&Sigma;"], [0, "&Tau;"], [0, "&Upsilon;"], [0, "&Phi;"], [0, "&Chi;"], [0, "&Psi;"], [0, "&ohm;"], [7, "&alpha;"], [0, "&beta;"], [0, "&gamma;"], [0, "&delta;"], [0, "&epsi;"], [0, "&zeta;"], [0, "&eta;"], [0, "&theta;"], [0, "&iota;"], [0, "&kappa;"], [0, "&lambda;"], [0, "&mu;"], [0, "&nu;"], [0, "&xi;"], [0, "&omicron;"], [0, "&pi;"], [0, "&rho;"], [0, "&sigmaf;"], [0, "&sigma;"], [0, "&tau;"], [0, "&upsi;"], [0, "&phi;"], [0, "&chi;"], [0, "&psi;"], [0, "&omega;"], [7, "&thetasym;"], [0, "&Upsi;"], [2, "&phiv;"], [0, "&piv;"], [5, "&Gammad;"], [0, "&digamma;"], [18, "&kappav;"], [0, "&rhov;"], [3, "&epsiv;"], [0, "&backepsilon;"], [10, "&IOcy;"], [0, "&DJcy;"], [0, "&GJcy;"], [0, "&Jukcy;"], [0, "&DScy;"], [0, "&Iukcy;"], [0, "&YIcy;"], [0, "&Jsercy;"], [0, "&LJcy;"], [0, "&NJcy;"], [0, "&TSHcy;"], [0, "&KJcy;"], [1, "&Ubrcy;"], [0, "&DZcy;"], [0, "&Acy;"], [0, "&Bcy;"], [0, "&Vcy;"], [0, "&Gcy;"], [0, "&Dcy;"], [0, "&IEcy;"], [0, "&ZHcy;"], [0, "&Zcy;"], [0, "&Icy;"], [0, "&Jcy;"], [0, "&Kcy;"], [0, "&Lcy;"], [0, "&Mcy;"], [0, "&Ncy;"], [0, "&Ocy;"], [0, "&Pcy;"], [0, "&Rcy;"], [0, "&Scy;"], [0, "&Tcy;"], [0, "&Ucy;"], [0, "&Fcy;"], [0, "&KHcy;"], [0, "&TScy;"], [0, "&CHcy;"], [0, "&SHcy;"], [0, "&SHCHcy;"], [0, "&HARDcy;"], [0, "&Ycy;"], [0, "&SOFTcy;"], [0, "&Ecy;"], [0, "&YUcy;"], [0, "&YAcy;"], [0, "&acy;"], [0, "&bcy;"], [0, "&vcy;"], [0, "&gcy;"], [0, "&dcy;"], [0, "&iecy;"], [0, "&zhcy;"], [0, "&zcy;"], [0, "&icy;"], [0, "&jcy;"], [0, "&kcy;"], [0, "&lcy;"], [0, "&mcy;"], [0, "&ncy;"], [0, "&ocy;"], [0, "&pcy;"], [0, "&rcy;"], [0, "&scy;"], [0, "&tcy;"], [0, "&ucy;"], [0, "&fcy;"], [0, "&khcy;"], [0, "&tscy;"], [0, "&chcy;"], [0, "&shcy;"], [0, "&shchcy;"], [0, "&hardcy;"], [0, "&ycy;"], [0, "&softcy;"], [0, "&ecy;"], [0, "&yucy;"], [0, "&yacy;"], [1, "&iocy;"], [0, "&djcy;"], [0, "&gjcy;"], [0, "&jukcy;"], [0, "&dscy;"], [0, "&iukcy;"], [0, "&yicy;"], [0, "&jsercy;"], [0, "&ljcy;"], [0, "&njcy;"], [0, "&tshcy;"], [0, "&kjcy;"], [1, "&ubrcy;"], [0, "&dzcy;"], [7074, "&ensp;"], [0, "&emsp;"], [0, "&emsp13;"], [0, "&emsp14;"], [1, "&numsp;"], [0, "&puncsp;"], [0, "&ThinSpace;"], [0, "&hairsp;"], [0, "&NegativeMediumSpace;"], [0, "&zwnj;"], [0, "&zwj;"], [0, "&lrm;"], [0, "&rlm;"], [0, "&dash;"], [2, "&ndash;"], [0, "&mdash;"], [0, "&horbar;"], [0, "&Verbar;"], [1, "&lsquo;"], [0, "&CloseCurlyQuote;"], [0, "&lsquor;"], [1, "&ldquo;"], [0, "&CloseCurlyDoubleQuote;"], [0, "&bdquo;"], [1, "&dagger;"], [0, "&Dagger;"], [0, "&bull;"], [2, "&nldr;"], [0, "&hellip;"], [9, "&permil;"], [0, "&pertenk;"], [0, "&prime;"], [0, "&Prime;"], [0, "&tprime;"], [0, "&backprime;"], [3, "&lsaquo;"], [0, "&rsaquo;"], [3, "&oline;"], [2, "&caret;"], [1, "&hybull;"], [0, "&frasl;"], [10, "&bsemi;"], [7, "&qprime;"], [7, {
  v: "&MediumSpace;",
  n: 8202,
  o: "&ThickSpace;"
}], [0, "&NoBreak;"], [0, "&af;"], [0, "&InvisibleTimes;"], [0, "&ic;"], [72, "&euro;"], [46, "&tdot;"], [0, "&DotDot;"], [37, "&complexes;"], [2, "&incare;"], [4, "&gscr;"], [0, "&hamilt;"], [0, "&Hfr;"], [0, "&Hopf;"], [0, "&planckh;"], [0, "&hbar;"], [0, "&imagline;"], [0, "&Ifr;"], [0, "&lagran;"], [0, "&ell;"], [1, "&naturals;"], [0, "&numero;"], [0, "&copysr;"], [0, "&weierp;"], [0, "&Popf;"], [0, "&Qopf;"], [0, "&realine;"], [0, "&real;"], [0, "&reals;"], [0, "&rx;"], [3, "&trade;"], [1, "&integers;"], [2, "&mho;"], [0, "&zeetrf;"], [0, "&iiota;"], [2, "&bernou;"], [0, "&Cayleys;"], [1, "&escr;"], [0, "&Escr;"], [0, "&Fouriertrf;"], [1, "&Mellintrf;"], [0, "&order;"], [0, "&alefsym;"], [0, "&beth;"], [0, "&gimel;"], [0, "&daleth;"], [12, "&CapitalDifferentialD;"], [0, "&dd;"], [0, "&ee;"], [0, "&ii;"], [10, "&frac13;"], [0, "&frac23;"], [0, "&frac15;"], [0, "&frac25;"], [0, "&frac35;"], [0, "&frac45;"], [0, "&frac16;"], [0, "&frac56;"], [0, "&frac18;"], [0, "&frac38;"], [0, "&frac58;"], [0, "&frac78;"], [49, "&larr;"], [0, "&ShortUpArrow;"], [0, "&rarr;"], [0, "&darr;"], [0, "&harr;"], [0, "&updownarrow;"], [0, "&nwarr;"], [0, "&nearr;"], [0, "&LowerRightArrow;"], [0, "&LowerLeftArrow;"], [0, "&nlarr;"], [0, "&nrarr;"], [1, {
  v: "&rarrw;",
  n: 824,
  o: "&nrarrw;"
}], [0, "&Larr;"], [0, "&Uarr;"], [0, "&Rarr;"], [0, "&Darr;"], [0, "&larrtl;"], [0, "&rarrtl;"], [0, "&LeftTeeArrow;"], [0, "&mapstoup;"], [0, "&map;"], [0, "&DownTeeArrow;"], [1, "&hookleftarrow;"], [0, "&hookrightarrow;"], [0, "&larrlp;"], [0, "&looparrowright;"], [0, "&harrw;"], [0, "&nharr;"], [1, "&lsh;"], [0, "&rsh;"], [0, "&ldsh;"], [0, "&rdsh;"], [1, "&crarr;"], [0, "&cularr;"], [0, "&curarr;"], [2, "&circlearrowleft;"], [0, "&circlearrowright;"], [0, "&leftharpoonup;"], [0, "&DownLeftVector;"], [0, "&RightUpVector;"], [0, "&LeftUpVector;"], [0, "&rharu;"], [0, "&DownRightVector;"], [0, "&dharr;"], [0, "&dharl;"], [0, "&RightArrowLeftArrow;"], [0, "&udarr;"], [0, "&LeftArrowRightArrow;"], [0, "&leftleftarrows;"], [0, "&upuparrows;"], [0, "&rightrightarrows;"], [0, "&ddarr;"], [0, "&leftrightharpoons;"], [0, "&Equilibrium;"], [0, "&nlArr;"], [0, "&nhArr;"], [0, "&nrArr;"], [0, "&DoubleLeftArrow;"], [0, "&DoubleUpArrow;"], [0, "&DoubleRightArrow;"], [0, "&dArr;"], [0, "&DoubleLeftRightArrow;"], [0, "&DoubleUpDownArrow;"], [0, "&nwArr;"], [0, "&neArr;"], [0, "&seArr;"], [0, "&swArr;"], [0, "&lAarr;"], [0, "&rAarr;"], [1, "&zigrarr;"], [6, "&larrb;"], [0, "&rarrb;"], [15, "&DownArrowUpArrow;"], [7, "&loarr;"], [0, "&roarr;"], [0, "&hoarr;"], [0, "&forall;"], [0, "&comp;"], [0, {
  v: "&part;",
  n: 824,
  o: "&npart;"
}], [0, "&exist;"], [0, "&nexist;"], [0, "&empty;"], [1, "&Del;"], [0, "&Element;"], [0, "&NotElement;"], [1, "&ni;"], [0, "&notni;"], [2, "&prod;"], [0, "&coprod;"], [0, "&sum;"], [0, "&minus;"], [0, "&MinusPlus;"], [0, "&dotplus;"], [1, "&Backslash;"], [0, "&lowast;"], [0, "&compfn;"], [1, "&radic;"], [2, "&prop;"], [0, "&infin;"], [0, "&angrt;"], [0, {
  v: "&ang;",
  n: 8402,
  o: "&nang;"
}], [0, "&angmsd;"], [0, "&angsph;"], [0, "&mid;"], [0, "&nmid;"], [0, "&DoubleVerticalBar;"], [0, "&NotDoubleVerticalBar;"], [0, "&and;"], [0, "&or;"], [0, {
  v: "&cap;",
  n: 65024,
  o: "&caps;"
}], [0, {
  v: "&cup;",
  n: 65024,
  o: "&cups;"
}], [0, "&int;"], [0, "&Int;"], [0, "&iiint;"], [0, "&conint;"], [0, "&Conint;"], [0, "&Cconint;"], [0, "&cwint;"], [0, "&ClockwiseContourIntegral;"], [0, "&awconint;"], [0, "&there4;"], [0, "&becaus;"], [0, "&ratio;"], [0, "&Colon;"], [0, "&dotminus;"], [1, "&mDDot;"], [0, "&homtht;"], [0, {
  v: "&sim;",
  n: 8402,
  o: "&nvsim;"
}], [0, {
  v: "&backsim;",
  n: 817,
  o: "&race;"
}], [0, {
  v: "&ac;",
  n: 819,
  o: "&acE;"
}], [0, "&acd;"], [0, "&VerticalTilde;"], [0, "&NotTilde;"], [0, {
  v: "&eqsim;",
  n: 824,
  o: "&nesim;"
}], [0, "&sime;"], [0, "&NotTildeEqual;"], [0, "&cong;"], [0, "&simne;"], [0, "&ncong;"], [0, "&ap;"], [0, "&nap;"], [0, "&ape;"], [0, {
  v: "&apid;",
  n: 824,
  o: "&napid;"
}], [0, "&backcong;"], [0, {
  v: "&asympeq;",
  n: 8402,
  o: "&nvap;"
}], [0, {
  v: "&bump;",
  n: 824,
  o: "&nbump;"
}], [0, {
  v: "&bumpe;",
  n: 824,
  o: "&nbumpe;"
}], [0, {
  v: "&doteq;",
  n: 824,
  o: "&nedot;"
}], [0, "&doteqdot;"], [0, "&efDot;"], [0, "&erDot;"], [0, "&Assign;"], [0, "&ecolon;"], [0, "&ecir;"], [0, "&circeq;"], [1, "&wedgeq;"], [0, "&veeeq;"], [1, "&triangleq;"], [2, "&equest;"], [0, "&ne;"], [0, {
  v: "&Congruent;",
  n: 8421,
  o: "&bnequiv;"
}], [0, "&nequiv;"], [1, {
  v: "&le;",
  n: 8402,
  o: "&nvle;"
}], [0, {
  v: "&ge;",
  n: 8402,
  o: "&nvge;"
}], [0, {
  v: "&lE;",
  n: 824,
  o: "&nlE;"
}], [0, {
  v: "&gE;",
  n: 824,
  o: "&ngE;"
}], [0, {
  v: "&lnE;",
  n: 65024,
  o: "&lvertneqq;"
}], [0, {
  v: "&gnE;",
  n: 65024,
  o: "&gvertneqq;"
}], [0, {
  v: "&ll;",
  n: new Map(p_([[824, "&nLtv;"], [7577, "&nLt;"]]))
}], [0, {
  v: "&gg;",
  n: new Map(p_([[824, "&nGtv;"], [7577, "&nGt;"]]))
}], [0, "&between;"], [0, "&NotCupCap;"], [0, "&nless;"], [0, "&ngt;"], [0, "&nle;"], [0, "&nge;"], [0, "&lesssim;"], [0, "&GreaterTilde;"], [0, "&nlsim;"], [0, "&ngsim;"], [0, "&LessGreater;"], [0, "&gl;"], [0, "&NotLessGreater;"], [0, "&NotGreaterLess;"], [0, "&pr;"], [0, "&sc;"], [0, "&prcue;"], [0, "&sccue;"], [0, "&PrecedesTilde;"], [0, {
  v: "&scsim;",
  n: 824,
  o: "&NotSucceedsTilde;"
}], [0, "&NotPrecedes;"], [0, "&NotSucceeds;"], [0, {
  v: "&sub;",
  n: 8402,
  o: "&NotSubset;"
}], [0, {
  v: "&sup;",
  n: 8402,
  o: "&NotSuperset;"
}], [0, "&nsub;"], [0, "&nsup;"], [0, "&sube;"], [0, "&supe;"], [0, "&NotSubsetEqual;"], [0, "&NotSupersetEqual;"], [0, {
  v: "&subne;",
  n: 65024,
  o: "&varsubsetneq;"
}], [0, {
  v: "&supne;",
  n: 65024,
  o: "&varsupsetneq;"
}], [1, "&cupdot;"], [0, "&UnionPlus;"], [0, {
  v: "&sqsub;",
  n: 824,
  o: "&NotSquareSubset;"
}], [0, {
  v: "&sqsup;",
  n: 824,
  o: "&NotSquareSuperset;"
}], [0, "&sqsube;"], [0, "&sqsupe;"], [0, {
  v: "&sqcap;",
  n: 65024,
  o: "&sqcaps;"
}], [0, {
  v: "&sqcup;",
  n: 65024,
  o: "&sqcups;"
}], [0, "&CirclePlus;"], [0, "&CircleMinus;"], [0, "&CircleTimes;"], [0, "&osol;"], [0, "&CircleDot;"], [0, "&circledcirc;"], [0, "&circledast;"], [1, "&circleddash;"], [0, "&boxplus;"], [0, "&boxminus;"], [0, "&boxtimes;"], [0, "&dotsquare;"], [0, "&RightTee;"], [0, "&dashv;"], [0, "&DownTee;"], [0, "&bot;"], [1, "&models;"], [0, "&DoubleRightTee;"], [0, "&Vdash;"], [0, "&Vvdash;"], [0, "&VDash;"], [0, "&nvdash;"], [0, "&nvDash;"], [0, "&nVdash;"], [0, "&nVDash;"], [0, "&prurel;"], [1, "&LeftTriangle;"], [0, "&RightTriangle;"], [0, {
  v: "&LeftTriangleEqual;",
  n: 8402,
  o: "&nvltrie;"
}], [0, {
  v: "&RightTriangleEqual;",
  n: 8402,
  o: "&nvrtrie;"
}], [0, "&origof;"], [0, "&imof;"], [0, "&multimap;"], [0, "&hercon;"], [0, "&intcal;"], [0, "&veebar;"], [1, "&barvee;"], [0, "&angrtvb;"], [0, "&lrtri;"], [0, "&bigwedge;"], [0, "&bigvee;"], [0, "&bigcap;"], [0, "&bigcup;"], [0, "&diam;"], [0, "&sdot;"], [0, "&sstarf;"], [0, "&divideontimes;"], [0, "&bowtie;"], [0, "&ltimes;"], [0, "&rtimes;"], [0, "&leftthreetimes;"], [0, "&rightthreetimes;"], [0, "&backsimeq;"], [0, "&curlyvee;"], [0, "&curlywedge;"], [0, "&Sub;"], [0, "&Sup;"], [0, "&Cap;"], [0, "&Cup;"], [0, "&fork;"], [0, "&epar;"], [0, "&lessdot;"], [0, "&gtdot;"], [0, {
  v: "&Ll;",
  n: 824,
  o: "&nLl;"
}], [0, {
  v: "&Gg;",
  n: 824,
  o: "&nGg;"
}], [0, {
  v: "&leg;",
  n: 65024,
  o: "&lesg;"
}], [0, {
  v: "&gel;",
  n: 65024,
  o: "&gesl;"
}], [2, "&cuepr;"], [0, "&cuesc;"], [0, "&NotPrecedesSlantEqual;"], [0, "&NotSucceedsSlantEqual;"], [0, "&NotSquareSubsetEqual;"], [0, "&NotSquareSupersetEqual;"], [2, "&lnsim;"], [0, "&gnsim;"], [0, "&precnsim;"], [0, "&scnsim;"], [0, "&nltri;"], [0, "&NotRightTriangle;"], [0, "&nltrie;"], [0, "&NotRightTriangleEqual;"], [0, "&vellip;"], [0, "&ctdot;"], [0, "&utdot;"], [0, "&dtdot;"], [0, "&disin;"], [0, "&isinsv;"], [0, "&isins;"], [0, {
  v: "&isindot;",
  n: 824,
  o: "&notindot;"
}], [0, "&notinvc;"], [0, "&notinvb;"], [1, {
  v: "&isinE;",
  n: 824,
  o: "&notinE;"
}], [0, "&nisd;"], [0, "&xnis;"], [0, "&nis;"], [0, "&notnivc;"], [0, "&notnivb;"], [6, "&barwed;"], [0, "&Barwed;"], [1, "&lceil;"], [0, "&rceil;"], [0, "&LeftFloor;"], [0, "&rfloor;"], [0, "&drcrop;"], [0, "&dlcrop;"], [0, "&urcrop;"], [0, "&ulcrop;"], [0, "&bnot;"], [1, "&profline;"], [0, "&profsurf;"], [1, "&telrec;"], [0, "&target;"], [5, "&ulcorn;"], [0, "&urcorn;"], [0, "&dlcorn;"], [0, "&drcorn;"], [2, "&frown;"], [0, "&smile;"], [9, "&cylcty;"], [0, "&profalar;"], [7, "&topbot;"], [6, "&ovbar;"], [1, "&solbar;"], [60, "&angzarr;"], [51, "&lmoustache;"], [0, "&rmoustache;"], [2, "&OverBracket;"], [0, "&bbrk;"], [0, "&bbrktbrk;"], [37, "&OverParenthesis;"], [0, "&UnderParenthesis;"], [0, "&OverBrace;"], [0, "&UnderBrace;"], [2, "&trpezium;"], [4, "&elinters;"], [59, "&blank;"], [164, "&circledS;"], [55, "&boxh;"], [1, "&boxv;"], [9, "&boxdr;"], [3, "&boxdl;"], [3, "&boxur;"], [3, "&boxul;"], [3, "&boxvr;"], [7, "&boxvl;"], [7, "&boxhd;"], [7, "&boxhu;"], [7, "&boxvh;"], [19, "&boxH;"], [0, "&boxV;"], [0, "&boxdR;"], [0, "&boxDr;"], [0, "&boxDR;"], [0, "&boxdL;"], [0, "&boxDl;"], [0, "&boxDL;"], [0, "&boxuR;"], [0, "&boxUr;"], [0, "&boxUR;"], [0, "&boxuL;"], [0, "&boxUl;"], [0, "&boxUL;"], [0, "&boxvR;"], [0, "&boxVr;"], [0, "&boxVR;"], [0, "&boxvL;"], [0, "&boxVl;"], [0, "&boxVL;"], [0, "&boxHd;"], [0, "&boxhD;"], [0, "&boxHD;"], [0, "&boxHu;"], [0, "&boxhU;"], [0, "&boxHU;"], [0, "&boxvH;"], [0, "&boxVh;"], [0, "&boxVH;"], [19, "&uhblk;"], [3, "&lhblk;"], [3, "&block;"], [8, "&blk14;"], [0, "&blk12;"], [0, "&blk34;"], [13, "&square;"], [8, "&blacksquare;"], [0, "&EmptyVerySmallSquare;"], [1, "&rect;"], [0, "&marker;"], [2, "&fltns;"], [1, "&bigtriangleup;"], [0, "&blacktriangle;"], [0, "&triangle;"], [2, "&blacktriangleright;"], [0, "&rtri;"], [3, "&bigtriangledown;"], [0, "&blacktriangledown;"], [0, "&dtri;"], [2, "&blacktriangleleft;"], [0, "&ltri;"], [6, "&loz;"], [0, "&cir;"], [32, "&tridot;"], [2, "&bigcirc;"], [8, "&ultri;"], [0, "&urtri;"], [0, "&lltri;"], [0, "&EmptySmallSquare;"], [0, "&FilledSmallSquare;"], [8, "&bigstar;"], [0, "&star;"], [7, "&phone;"], [49, "&female;"], [1, "&male;"], [29, "&spades;"], [2, "&clubs;"], [1, "&hearts;"], [0, "&diamondsuit;"], [3, "&sung;"], [2, "&flat;"], [0, "&natural;"], [0, "&sharp;"], [163, "&check;"], [3, "&cross;"], [8, "&malt;"], [21, "&sext;"], [33, "&VerticalSeparator;"], [25, "&lbbrk;"], [0, "&rbbrk;"], [84, "&bsolhsub;"], [0, "&suphsol;"], [28, "&LeftDoubleBracket;"], [0, "&RightDoubleBracket;"], [0, "&lang;"], [0, "&rang;"], [0, "&Lang;"], [0, "&Rang;"], [0, "&loang;"], [0, "&roang;"], [7, "&longleftarrow;"], [0, "&longrightarrow;"], [0, "&longleftrightarrow;"], [0, "&DoubleLongLeftArrow;"], [0, "&DoubleLongRightArrow;"], [0, "&DoubleLongLeftRightArrow;"], [1, "&longmapsto;"], [2, "&dzigrarr;"], [258, "&nvlArr;"], [0, "&nvrArr;"], [0, "&nvHarr;"], [0, "&Map;"], [6, "&lbarr;"], [0, "&bkarow;"], [0, "&lBarr;"], [0, "&dbkarow;"], [0, "&drbkarow;"], [0, "&DDotrahd;"], [0, "&UpArrowBar;"], [0, "&DownArrowBar;"], [2, "&Rarrtl;"], [2, "&latail;"], [0, "&ratail;"], [0, "&lAtail;"], [0, "&rAtail;"], [0, "&larrfs;"], [0, "&rarrfs;"], [0, "&larrbfs;"], [0, "&rarrbfs;"], [2, "&nwarhk;"], [0, "&nearhk;"], [0, "&hksearow;"], [0, "&hkswarow;"], [0, "&nwnear;"], [0, "&nesear;"], [0, "&seswar;"], [0, "&swnwar;"], [8, {
  v: "&rarrc;",
  n: 824,
  o: "&nrarrc;"
}], [1, "&cudarrr;"], [0, "&ldca;"], [0, "&rdca;"], [0, "&cudarrl;"], [0, "&larrpl;"], [2, "&curarrm;"], [0, "&cularrp;"], [7, "&rarrpl;"], [2, "&harrcir;"], [0, "&Uarrocir;"], [0, "&lurdshar;"], [0, "&ldrushar;"], [2, "&LeftRightVector;"], [0, "&RightUpDownVector;"], [0, "&DownLeftRightVector;"], [0, "&LeftUpDownVector;"], [0, "&LeftVectorBar;"], [0, "&RightVectorBar;"], [0, "&RightUpVectorBar;"], [0, "&RightDownVectorBar;"], [0, "&DownLeftVectorBar;"], [0, "&DownRightVectorBar;"], [0, "&LeftUpVectorBar;"], [0, "&LeftDownVectorBar;"], [0, "&LeftTeeVector;"], [0, "&RightTeeVector;"], [0, "&RightUpTeeVector;"], [0, "&RightDownTeeVector;"], [0, "&DownLeftTeeVector;"], [0, "&DownRightTeeVector;"], [0, "&LeftUpTeeVector;"], [0, "&LeftDownTeeVector;"], [0, "&lHar;"], [0, "&uHar;"], [0, "&rHar;"], [0, "&dHar;"], [0, "&luruhar;"], [0, "&ldrdhar;"], [0, "&ruluhar;"], [0, "&rdldhar;"], [0, "&lharul;"], [0, "&llhard;"], [0, "&rharul;"], [0, "&lrhard;"], [0, "&udhar;"], [0, "&duhar;"], [0, "&RoundImplies;"], [0, "&erarr;"], [0, "&simrarr;"], [0, "&larrsim;"], [0, "&rarrsim;"], [0, "&rarrap;"], [0, "&ltlarr;"], [1, "&gtrarr;"], [0, "&subrarr;"], [1, "&suplarr;"], [0, "&lfisht;"], [0, "&rfisht;"], [0, "&ufisht;"], [0, "&dfisht;"], [5, "&lopar;"], [0, "&ropar;"], [4, "&lbrke;"], [0, "&rbrke;"], [0, "&lbrkslu;"], [0, "&rbrksld;"], [0, "&lbrksld;"], [0, "&rbrkslu;"], [0, "&langd;"], [0, "&rangd;"], [0, "&lparlt;"], [0, "&rpargt;"], [0, "&gtlPar;"], [0, "&ltrPar;"], [3, "&vzigzag;"], [1, "&vangrt;"], [0, "&angrtvbd;"], [6, "&ange;"], [0, "&range;"], [0, "&dwangle;"], [0, "&uwangle;"], [0, "&angmsdaa;"], [0, "&angmsdab;"], [0, "&angmsdac;"], [0, "&angmsdad;"], [0, "&angmsdae;"], [0, "&angmsdaf;"], [0, "&angmsdag;"], [0, "&angmsdah;"], [0, "&bemptyv;"], [0, "&demptyv;"], [0, "&cemptyv;"], [0, "&raemptyv;"], [0, "&laemptyv;"], [0, "&ohbar;"], [0, "&omid;"], [0, "&opar;"], [1, "&operp;"], [1, "&olcross;"], [0, "&odsold;"], [1, "&olcir;"], [0, "&ofcir;"], [0, "&olt;"], [0, "&ogt;"], [0, "&cirscir;"], [0, "&cirE;"], [0, "&solb;"], [0, "&bsolb;"], [3, "&boxbox;"], [3, "&trisb;"], [0, "&rtriltri;"], [0, {
  v: "&LeftTriangleBar;",
  n: 824,
  o: "&NotLeftTriangleBar;"
}], [0, {
  v: "&RightTriangleBar;",
  n: 824,
  o: "&NotRightTriangleBar;"
}], [11, "&iinfin;"], [0, "&infintie;"], [0, "&nvinfin;"], [4, "&eparsl;"], [0, "&smeparsl;"], [0, "&eqvparsl;"], [5, "&blacklozenge;"], [8, "&RuleDelayed;"], [1, "&dsol;"], [9, "&bigodot;"], [0, "&bigoplus;"], [0, "&bigotimes;"], [1, "&biguplus;"], [1, "&bigsqcup;"], [5, "&iiiint;"], [0, "&fpartint;"], [2, "&cirfnint;"], [0, "&awint;"], [0, "&rppolint;"], [0, "&scpolint;"], [0, "&npolint;"], [0, "&pointint;"], [0, "&quatint;"], [0, "&intlarhk;"], [10, "&pluscir;"], [0, "&plusacir;"], [0, "&simplus;"], [0, "&plusdu;"], [0, "&plussim;"], [0, "&plustwo;"], [1, "&mcomma;"], [0, "&minusdu;"], [2, "&loplus;"], [0, "&roplus;"], [0, "&Cross;"], [0, "&timesd;"], [0, "&timesbar;"], [1, "&smashp;"], [0, "&lotimes;"], [0, "&rotimes;"], [0, "&otimesas;"], [0, "&Otimes;"], [0, "&odiv;"], [0, "&triplus;"], [0, "&triminus;"], [0, "&tritime;"], [0, "&intprod;"], [2, "&amalg;"], [0, "&capdot;"], [1, "&ncup;"], [0, "&ncap;"], [0, "&capand;"], [0, "&cupor;"], [0, "&cupcap;"], [0, "&capcup;"], [0, "&cupbrcap;"], [0, "&capbrcup;"], [0, "&cupcup;"], [0, "&capcap;"], [0, "&ccups;"], [0, "&ccaps;"], [2, "&ccupssm;"], [2, "&And;"], [0, "&Or;"], [0, "&andand;"], [0, "&oror;"], [0, "&orslope;"], [0, "&andslope;"], [1, "&andv;"], [0, "&orv;"], [0, "&andd;"], [0, "&ord;"], [1, "&wedbar;"], [6, "&sdote;"], [3, "&simdot;"], [2, {
  v: "&congdot;",
  n: 824,
  o: "&ncongdot;"
}], [0, "&easter;"], [0, "&apacir;"], [0, {
  v: "&apE;",
  n: 824,
  o: "&napE;"
}], [0, "&eplus;"], [0, "&pluse;"], [0, "&Esim;"], [0, "&Colone;"], [0, "&Equal;"], [1, "&ddotseq;"], [0, "&equivDD;"], [0, "&ltcir;"], [0, "&gtcir;"], [0, "&ltquest;"], [0, "&gtquest;"], [0, {
  v: "&leqslant;",
  n: 824,
  o: "&nleqslant;"
}], [0, {
  v: "&geqslant;",
  n: 824,
  o: "&ngeqslant;"
}], [0, "&lesdot;"], [0, "&gesdot;"], [0, "&lesdoto;"], [0, "&gesdoto;"], [0, "&lesdotor;"], [0, "&gesdotol;"], [0, "&lap;"], [0, "&gap;"], [0, "&lne;"], [0, "&gne;"], [0, "&lnap;"], [0, "&gnap;"], [0, "&lEg;"], [0, "&gEl;"], [0, "&lsime;"], [0, "&gsime;"], [0, "&lsimg;"], [0, "&gsiml;"], [0, "&lgE;"], [0, "&glE;"], [0, "&lesges;"], [0, "&gesles;"], [0, "&els;"], [0, "&egs;"], [0, "&elsdot;"], [0, "&egsdot;"], [0, "&el;"], [0, "&eg;"], [2, "&siml;"], [0, "&simg;"], [0, "&simlE;"], [0, "&simgE;"], [0, {
  v: "&LessLess;",
  n: 824,
  o: "&NotNestedLessLess;"
}], [0, {
  v: "&GreaterGreater;",
  n: 824,
  o: "&NotNestedGreaterGreater;"
}], [1, "&glj;"], [0, "&gla;"], [0, "&ltcc;"], [0, "&gtcc;"], [0, "&lescc;"], [0, "&gescc;"], [0, "&smt;"], [0, "&lat;"], [0, {
  v: "&smte;",
  n: 65024,
  o: "&smtes;"
}], [0, {
  v: "&late;",
  n: 65024,
  o: "&lates;"
}], [0, "&bumpE;"], [0, {
  v: "&PrecedesEqual;",
  n: 824,
  o: "&NotPrecedesEqual;"
}], [0, {
  v: "&sce;",
  n: 824,
  o: "&NotSucceedsEqual;"
}], [2, "&prE;"], [0, "&scE;"], [0, "&precneqq;"], [0, "&scnE;"], [0, "&prap;"], [0, "&scap;"], [0, "&precnapprox;"], [0, "&scnap;"], [0, "&Pr;"], [0, "&Sc;"], [0, "&subdot;"], [0, "&supdot;"], [0, "&subplus;"], [0, "&supplus;"], [0, "&submult;"], [0, "&supmult;"], [0, "&subedot;"], [0, "&supedot;"], [0, {
  v: "&subE;",
  n: 824,
  o: "&nsubE;"
}], [0, {
  v: "&supE;",
  n: 824,
  o: "&nsupE;"
}], [0, "&subsim;"], [0, "&supsim;"], [2, {
  v: "&subnE;",
  n: 65024,
  o: "&varsubsetneqq;"
}], [0, {
  v: "&supnE;",
  n: 65024,
  o: "&varsupsetneqq;"
}], [2, "&csub;"], [0, "&csup;"], [0, "&csube;"], [0, "&csupe;"], [0, "&subsup;"], [0, "&supsub;"], [0, "&subsub;"], [0, "&supsup;"], [0, "&suphsub;"], [0, "&supdsub;"], [0, "&forkv;"], [0, "&topfork;"], [0, "&mlcp;"], [8, "&Dashv;"], [1, "&Vdashl;"], [0, "&Barv;"], [0, "&vBar;"], [0, "&vBarv;"], [1, "&Vbar;"], [0, "&Not;"], [0, "&bNot;"], [0, "&rnmid;"], [0, "&cirmid;"], [0, "&midcir;"], [0, "&topcir;"], [0, "&nhpar;"], [0, "&parsim;"], [9, {
  v: "&parsl;",
  n: 8421,
  o: "&nparsl;"
}], [44343, {
  n: new Map(p_([[56476, "&Ascr;"], [1, "&Cscr;"], [0, "&Dscr;"], [2, "&Gscr;"], [2, "&Jscr;"], [0, "&Kscr;"], [2, "&Nscr;"], [0, "&Oscr;"], [0, "&Pscr;"], [0, "&Qscr;"], [1, "&Sscr;"], [0, "&Tscr;"], [0, "&Uscr;"], [0, "&Vscr;"], [0, "&Wscr;"], [0, "&Xscr;"], [0, "&Yscr;"], [0, "&Zscr;"], [0, "&ascr;"], [0, "&bscr;"], [0, "&cscr;"], [0, "&dscr;"], [1, "&fscr;"], [1, "&hscr;"], [0, "&iscr;"], [0, "&jscr;"], [0, "&kscr;"], [0, "&lscr;"], [0, "&mscr;"], [0, "&nscr;"], [1, "&pscr;"], [0, "&qscr;"], [0, "&rscr;"], [0, "&sscr;"], [0, "&tscr;"], [0, "&uscr;"], [0, "&vscr;"], [0, "&wscr;"], [0, "&xscr;"], [0, "&yscr;"], [0, "&zscr;"], [52, "&Afr;"], [0, "&Bfr;"], [1, "&Dfr;"], [0, "&Efr;"], [0, "&Ffr;"], [0, "&Gfr;"], [2, "&Jfr;"], [0, "&Kfr;"], [0, "&Lfr;"], [0, "&Mfr;"], [0, "&Nfr;"], [0, "&Ofr;"], [0, "&Pfr;"], [0, "&Qfr;"], [1, "&Sfr;"], [0, "&Tfr;"], [0, "&Ufr;"], [0, "&Vfr;"], [0, "&Wfr;"], [0, "&Xfr;"], [0, "&Yfr;"], [1, "&afr;"], [0, "&bfr;"], [0, "&cfr;"], [0, "&dfr;"], [0, "&efr;"], [0, "&ffr;"], [0, "&gfr;"], [0, "&hfr;"], [0, "&ifr;"], [0, "&jfr;"], [0, "&kfr;"], [0, "&lfr;"], [0, "&mfr;"], [0, "&nfr;"], [0, "&ofr;"], [0, "&pfr;"], [0, "&qfr;"], [0, "&rfr;"], [0, "&sfr;"], [0, "&tfr;"], [0, "&ufr;"], [0, "&vfr;"], [0, "&wfr;"], [0, "&xfr;"], [0, "&yfr;"], [0, "&zfr;"], [0, "&Aopf;"], [0, "&Bopf;"], [1, "&Dopf;"], [0, "&Eopf;"], [0, "&Fopf;"], [0, "&Gopf;"], [1, "&Iopf;"], [0, "&Jopf;"], [0, "&Kopf;"], [0, "&Lopf;"], [0, "&Mopf;"], [1, "&Oopf;"], [3, "&Sopf;"], [0, "&Topf;"], [0, "&Uopf;"], [0, "&Vopf;"], [0, "&Wopf;"], [0, "&Xopf;"], [0, "&Yopf;"], [1, "&aopf;"], [0, "&bopf;"], [0, "&copf;"], [0, "&dopf;"], [0, "&eopf;"], [0, "&fopf;"], [0, "&gopf;"], [0, "&hopf;"], [0, "&iopf;"], [0, "&jopf;"], [0, "&kopf;"], [0, "&lopf;"], [0, "&mopf;"], [0, "&nopf;"], [0, "&oopf;"], [0, "&popf;"], [0, "&qopf;"], [0, "&ropf;"], [0, "&sopf;"], [0, "&topf;"], [0, "&uopf;"], [0, "&vopf;"], [0, "&wopf;"], [0, "&xopf;"], [0, "&yopf;"], [0, "&zopf;"]]))
}], [8906, "&fflig;"], [0, "&filig;"], [0, "&fllig;"], [0, "&ffilig;"], [0, "&ffllig;"]]));
var vd = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.escapeText = e12.escapeAttribute = e12.escapeUTF8 = e12.escape = e12.encodeXML = e12.getCodePoint = e12.xmlReplacer = void 0, e12.xmlReplacer = /["&'<>$\x80-\uFFFF]/g;
  var t = /* @__PURE__ */ new Map([[34, "&quot;"], [38, "&amp;"], [39, "&apos;"], [60, "&lt;"], [62, "&gt;"]]);
  e12.getCodePoint = // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
  String.prototype.codePointAt != null ? function(i, o) {
    return i.codePointAt(o);
  } : (
    // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae
    function(i, o) {
      return (i.charCodeAt(o) & 64512) === 55296 ? (i.charCodeAt(o) - 55296) * 1024 + i.charCodeAt(o + 1) - 56320 + 65536 : i.charCodeAt(o);
    }
  );
  function r(i) {
    for (var o = "", a = 0, s; (s = e12.xmlReplacer.exec(i)) !== null; ) {
      var l = s.index, u = i.charCodeAt(l), c = t.get(u);
      c !== void 0 ? (o += i.substring(a, l) + c, a = l + 1) : (o += "".concat(i.substring(a, l), "&#x").concat((0, e12.getCodePoint)(i, l).toString(16), ";"), a = e12.xmlReplacer.lastIndex += +((u & 64512) === 55296));
    }
    return o + i.substr(a);
  }
  e12.encodeXML = r, e12.escape = r;
  function n(i, o) {
    return function(s) {
      for (var l, u = 0, c = ""; l = i.exec(s); )
        u !== l.index && (c += s.substring(u, l.index)), c += o.get(l[0].charCodeAt(0)), u = l.index + 1;
      return c + s.substring(u);
    };
  }
  e12.escapeUTF8 = n(/[&<>'"]/g, t), e12.escapeAttribute = n(/["&\u00A0]/g, /* @__PURE__ */ new Map([[34, "&quot;"], [38, "&amp;"], [160, "&nbsp;"]])), e12.escapeText = n(/[&<>\u00A0]/g, /* @__PURE__ */ new Map([[38, "&amp;"], [60, "&lt;"], [62, "&gt;"], [160, "&nbsp;"]]));
})(vd);
var U0e = De && De.__importDefault || function(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
};
Object.defineProperty(Tu, "__esModule", {
  value: true
});
Tu.encodeNonAsciiHTML = Tu.encodeHTML = void 0;
var j0e = U0e(AN);
var VX = vd;
var G0e = /[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;
function z0e(e12) {
  return XX(G0e, e12);
}
Tu.encodeHTML = z0e;
function V0e(e12) {
  return XX(VX.xmlReplacer, e12);
}
Tu.encodeNonAsciiHTML = V0e;
function XX(e12, t) {
  for (var r = "", n = 0, i; (i = e12.exec(t)) !== null; ) {
    var o = i.index;
    r += t.substring(n, o);
    var a = t.charCodeAt(o), s = j0e.default.get(a);
    if (typeof s == "object") {
      if (o + 1 < t.length) {
        var l = t.charCodeAt(o + 1), u = typeof s.n == "number" ? s.n === l ? s.o : void 0 : s.n.get(l);
        if (u !== void 0) {
          r += u, n = e12.lastIndex += 1;
          continue;
        }
      }
      s = s.v;
    }
    if (s !== void 0)
      r += s, n = o + 1;
    else {
      var c = (0, VX.getCodePoint)(t, o);
      r += "&#x".concat(c.toString(16), ";"), n = e12.lastIndex += +(c !== a);
    }
  }
  return r + t.substr(n);
}
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.decodeXMLStrict = e12.decodeHTML5Strict = e12.decodeHTML4Strict = e12.decodeHTML5 = e12.decodeHTML4 = e12.decodeHTMLAttribute = e12.decodeHTMLStrict = e12.decodeHTML = e12.decodeXML = e12.DecodingMode = e12.EntityDecoder = e12.encodeHTML5 = e12.encodeHTML4 = e12.encodeNonAsciiHTML = e12.encodeHTML = e12.escapeText = e12.escapeAttribute = e12.escapeUTF8 = e12.escape = e12.encodeXML = e12.encode = e12.decodeStrict = e12.decode = e12.EncodingMode = e12.EntityLevel = void 0;
  var t = bu, r = Tu, n = vd, i;
  (function(h) {
    h[h.XML = 0] = "XML", h[h.HTML = 1] = "HTML";
  })(i = e12.EntityLevel || (e12.EntityLevel = {}));
  var o;
  (function(h) {
    h[h.UTF8 = 0] = "UTF8", h[h.ASCII = 1] = "ASCII", h[h.Extensive = 2] = "Extensive", h[h.Attribute = 3] = "Attribute", h[h.Text = 4] = "Text";
  })(o = e12.EncodingMode || (e12.EncodingMode = {}));
  function a(h, d) {
    d === void 0 && (d = i.XML);
    var p = typeof d == "number" ? d : d.level;
    if (p === i.HTML) {
      var m = typeof d == "object" ? d.mode : void 0;
      return (0, t.decodeHTML)(h, m);
    }
    return (0, t.decodeXML)(h);
  }
  e12.decode = a;
  function s(h, d) {
    var p;
    d === void 0 && (d = i.XML);
    var m = typeof d == "number" ? {
      level: d
    } : d;
    return (p = m.mode) !== null && p !== void 0 || (m.mode = t.DecodingMode.Strict), a(h, m);
  }
  e12.decodeStrict = s;
  function l(h, d) {
    d === void 0 && (d = i.XML);
    var p = typeof d == "number" ? {
      level: d
    } : d;
    return p.mode === o.UTF8 ? (0, n.escapeUTF8)(h) : p.mode === o.Attribute ? (0, n.escapeAttribute)(h) : p.mode === o.Text ? (0, n.escapeText)(h) : p.level === i.HTML ? p.mode === o.ASCII ? (0, r.encodeNonAsciiHTML)(h) : (0, r.encodeHTML)(h) : (0, n.encodeXML)(h);
  }
  e12.encode = l;
  var u = vd;
  Object.defineProperty(e12, "encodeXML", {
    enumerable: true,
    get: function() {
      return u.encodeXML;
    }
  }), Object.defineProperty(e12, "escape", {
    enumerable: true,
    get: function() {
      return u.escape;
    }
  }), Object.defineProperty(e12, "escapeUTF8", {
    enumerable: true,
    get: function() {
      return u.escapeUTF8;
    }
  }), Object.defineProperty(e12, "escapeAttribute", {
    enumerable: true,
    get: function() {
      return u.escapeAttribute;
    }
  }), Object.defineProperty(e12, "escapeText", {
    enumerable: true,
    get: function() {
      return u.escapeText;
    }
  });
  var c = Tu;
  Object.defineProperty(e12, "encodeHTML", {
    enumerable: true,
    get: function() {
      return c.encodeHTML;
    }
  }), Object.defineProperty(e12, "encodeNonAsciiHTML", {
    enumerable: true,
    get: function() {
      return c.encodeNonAsciiHTML;
    }
  }), Object.defineProperty(e12, "encodeHTML4", {
    enumerable: true,
    get: function() {
      return c.encodeHTML;
    }
  }), Object.defineProperty(e12, "encodeHTML5", {
    enumerable: true,
    get: function() {
      return c.encodeHTML;
    }
  });
  var f = bu;
  Object.defineProperty(e12, "EntityDecoder", {
    enumerable: true,
    get: function() {
      return f.EntityDecoder;
    }
  }), Object.defineProperty(e12, "DecodingMode", {
    enumerable: true,
    get: function() {
      return f.DecodingMode;
    }
  }), Object.defineProperty(e12, "decodeXML", {
    enumerable: true,
    get: function() {
      return f.decodeXML;
    }
  }), Object.defineProperty(e12, "decodeHTML", {
    enumerable: true,
    get: function() {
      return f.decodeHTML;
    }
  }), Object.defineProperty(e12, "decodeHTMLStrict", {
    enumerable: true,
    get: function() {
      return f.decodeHTMLStrict;
    }
  }), Object.defineProperty(e12, "decodeHTMLAttribute", {
    enumerable: true,
    get: function() {
      return f.decodeHTMLAttribute;
    }
  }), Object.defineProperty(e12, "decodeHTML4", {
    enumerable: true,
    get: function() {
      return f.decodeHTML;
    }
  }), Object.defineProperty(e12, "decodeHTML5", {
    enumerable: true,
    get: function() {
      return f.decodeHTML;
    }
  }), Object.defineProperty(e12, "decodeHTML4Strict", {
    enumerable: true,
    get: function() {
      return f.decodeHTMLStrict;
    }
  }), Object.defineProperty(e12, "decodeHTML5Strict", {
    enumerable: true,
    get: function() {
      return f.decodeHTMLStrict;
    }
  }), Object.defineProperty(e12, "decodeXMLStrict", {
    enumerable: true,
    get: function() {
      return f.decodeXML;
    }
  });
})(zX);
var yd = {};
Object.defineProperty(yd, "__esModule", {
  value: true
});
yd.attributeNames = yd.elementNames = void 0;
yd.elementNames = new Map(["altGlyph", "altGlyphDef", "altGlyphItem", "animateColor", "animateMotion", "animateTransform", "clipPath", "feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feDistantLight", "feDropShadow", "feFlood", "feFuncA", "feFuncB", "feFuncG", "feFuncR", "feGaussianBlur", "feImage", "feMerge", "feMergeNode", "feMorphology", "feOffset", "fePointLight", "feSpecularLighting", "feSpotLight", "feTile", "feTurbulence", "foreignObject", "glyphRef", "linearGradient", "radialGradient", "textPath"].map(function(e12) {
  return [e12.toLowerCase(), e12];
}));
yd.attributeNames = new Map(["definitionURL", "attributeName", "attributeType", "baseFrequency", "baseProfile", "calcMode", "clipPathUnits", "diffuseConstant", "edgeMode", "filterUnits", "glyphRef", "gradientTransform", "gradientUnits", "kernelMatrix", "kernelUnitLength", "keyPoints", "keySplines", "keyTimes", "lengthAdjust", "limitingConeAngle", "markerHeight", "markerUnits", "markerWidth", "maskContentUnits", "maskUnits", "numOctaves", "pathLength", "patternContentUnits", "patternTransform", "patternUnits", "pointsAtX", "pointsAtY", "pointsAtZ", "preserveAlpha", "preserveAspectRatio", "primitiveUnits", "refX", "refY", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "specularConstant", "specularExponent", "spreadMethod", "startOffset", "stdDeviation", "stitchTiles", "surfaceScale", "systemLanguage", "tableValues", "targetX", "targetY", "textLength", "viewBox", "viewTarget", "xChannelSelector", "yChannelSelector", "zoomAndPan"].map(function(e12) {
  return [e12.toLowerCase(), e12];
}));
var mf = De && De.__assign || function() {
  return mf = Object.assign || function(e12) {
    for (var t, r = 1, n = arguments.length; r < n; r++) {
      t = arguments[r];
      for (var i in t)
        Object.prototype.hasOwnProperty.call(t, i) && (e12[i] = t[i]);
    }
    return e12;
  }, mf.apply(this, arguments);
};
var X0e = De && De.__createBinding || (Object.create ? function(e12, t, r, n) {
  n === void 0 && (n = r);
  var i = Object.getOwnPropertyDescriptor(t, r);
  (!i || ("get" in i ? !t.__esModule : i.writable || i.configurable)) && (i = {
    enumerable: true,
    get: function() {
      return t[r];
    }
  }), Object.defineProperty(e12, n, i);
} : function(e12, t, r, n) {
  n === void 0 && (n = r), e12[n] = t[r];
});
var W0e = De && De.__setModuleDefault || (Object.create ? function(e12, t) {
  Object.defineProperty(e12, "default", {
    enumerable: true,
    value: t
  });
} : function(e12, t) {
  e12.default = t;
});
var Y0e = De && De.__importStar || function(e12) {
  if (e12 && e12.__esModule)
    return e12;
  var t = {};
  if (e12 != null)
    for (var r in e12)
      r !== "default" && Object.prototype.hasOwnProperty.call(e12, r) && X0e(t, e12, r);
  return W0e(t, e12), t;
};
Object.defineProperty(up, "__esModule", {
  value: true
});
up.render = void 0;
var is = Y0e(cp);
var X0 = zX;
var WX = yd;
var q0e = /* @__PURE__ */ new Set(["style", "script", "xmp", "iframe", "noembed", "noframes", "plaintext", "noscript"]);
function K0e(e12) {
  return e12.replace(/"/g, "&quot;");
}
function Z0e(e12, t) {
  var r;
  if (e12) {
    var n = ((r = t.encodeEntities) !== null && r !== void 0 ? r : t.decodeEntities) === false ? K0e : t.xmlMode || t.encodeEntities !== "utf8" ? X0.encodeXML : X0.escapeAttribute;
    return Object.keys(e12).map(function(i) {
      var o, a, s = (o = e12[i]) !== null && o !== void 0 ? o : "";
      return t.xmlMode === "foreign" && (i = (a = WX.attributeNames.get(i)) !== null && a !== void 0 ? a : i), !t.emptyAttrs && !t.xmlMode && s === "" ? i : "".concat(i, '="').concat(n(s), '"');
    }).join(" ");
  }
}
var wH = /* @__PURE__ */ new Set(["area", "base", "basefont", "br", "col", "command", "embed", "frame", "hr", "img", "input", "isindex", "keygen", "link", "meta", "param", "source", "track", "wbr"]);
function R1(e12, t) {
  t === void 0 && (t = {});
  for (var r = ("length" in e12) ? e12 : [e12], n = "", i = 0; i < r.length; i++)
    n += Q0e(r[i], t);
  return n;
}
up.render = R1;
up.default = R1;
function Q0e(e12, t) {
  switch (e12.type) {
    case is.Root:
      return R1(e12.children, t);
    case is.Doctype:
    case is.Directive:
      return rTe(e12);
    case is.Comment:
      return oTe(e12);
    case is.CDATA:
      return iTe(e12);
    case is.Script:
    case is.Style:
    case is.Tag:
      return tTe(e12, t);
    case is.Text:
      return nTe(e12, t);
  }
}
var J0e = /* @__PURE__ */ new Set(["mi", "mo", "mn", "ms", "mtext", "annotation-xml", "foreignObject", "desc", "title"]);
var eTe = /* @__PURE__ */ new Set(["svg", "math"]);
function tTe(e12, t) {
  var r;
  t.xmlMode === "foreign" && (e12.name = (r = WX.elementNames.get(e12.name)) !== null && r !== void 0 ? r : e12.name, e12.parent && J0e.has(e12.parent.name) && (t = mf(mf({}, t), {
    xmlMode: false
  }))), !t.xmlMode && eTe.has(e12.name) && (t = mf(mf({}, t), {
    xmlMode: "foreign"
  }));
  var n = "<".concat(e12.name), i = Z0e(e12.attribs, t);
  return i && (n += " ".concat(i)), e12.children.length === 0 && (t.xmlMode ? (
    // In XML mode or foreign mode, and user hasn't explicitly turned off self-closing tags
    t.selfClosingTags !== false
  ) : (
    // User explicitly asked for self-closing tags, even in HTML mode
    t.selfClosingTags && wH.has(e12.name)
  )) ? (t.xmlMode || (n += " "), n += "/>") : (n += ">", e12.children.length > 0 && (n += R1(e12.children, t)), (t.xmlMode || !wH.has(e12.name)) && (n += "</".concat(e12.name, ">"))), n;
}
function rTe(e12) {
  return "<".concat(e12.data, ">");
}
function nTe(e12, t) {
  var r, n = e12.data || "";
  return ((r = t.encodeEntities) !== null && r !== void 0 ? r : t.decodeEntities) !== false && !(!t.xmlMode && e12.parent && q0e.has(e12.parent.name)) && (n = t.xmlMode || t.encodeEntities !== "utf8" ? (0, X0.encodeXML)(n) : (0, X0.escapeText)(n)), n;
}
function iTe(e12) {
  return "<![CDATA[".concat(e12.children[0].data, "]]>");
}
function oTe(e12) {
  return "<!--".concat(e12.data, "-->");
}
var aTe = De && De.__importDefault || function(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
};
Object.defineProperty(eo, "__esModule", {
  value: true
});
eo.innerText = eo.textContent = eo.getText = eo.getInnerHTML = eo.getOuterHTML = void 0;
var Ha = ni;
var sTe = aTe(up);
var lTe = cp;
function YX(e12, t) {
  return (0, sTe.default)(e12, t);
}
eo.getOuterHTML = YX;
function cTe(e12, t) {
  return (0, Ha.hasChildren)(e12) ? e12.children.map(function(r) {
    return YX(r, t);
  }).join("") : "";
}
eo.getInnerHTML = cTe;
function gb(e12) {
  return Array.isArray(e12) ? e12.map(gb).join("") : (0, Ha.isTag)(e12) ? e12.name === "br" ? `
` : gb(e12.children) : (0, Ha.isCDATA)(e12) ? gb(e12.children) : (0, Ha.isText)(e12) ? e12.data : "";
}
eo.getText = gb;
function WP(e12) {
  return Array.isArray(e12) ? e12.map(WP).join("") : (0, Ha.hasChildren)(e12) && !(0, Ha.isComment)(e12) ? WP(e12.children) : (0, Ha.isText)(e12) ? e12.data : "";
}
eo.textContent = WP;
function YP(e12) {
  return Array.isArray(e12) ? e12.map(YP).join("") : (0, Ha.hasChildren)(e12) && (e12.type === lTe.ElementType.Tag || (0, Ha.isCDATA)(e12)) ? YP(e12.children) : (0, Ha.isText)(e12) ? e12.data : "";
}
eo.innerText = YP;
var wn = {};
Object.defineProperty(wn, "__esModule", {
  value: true
});
wn.prevElementSibling = wn.nextElementSibling = wn.getName = wn.hasAttrib = wn.getAttributeValue = wn.getSiblings = wn.getParent = wn.getChildren = void 0;
var ON = ni;
function qX(e12) {
  return (0, ON.hasChildren)(e12) ? e12.children : [];
}
wn.getChildren = qX;
function KX(e12) {
  return e12.parent || null;
}
wn.getParent = KX;
function uTe(e12) {
  var t, r, n = KX(e12);
  if (n != null)
    return qX(n);
  for (var i = [e12], o = e12.prev, a = e12.next; o != null; )
    i.unshift(o), t = o, o = t.prev;
  for (; a != null; )
    i.push(a), r = a, a = r.next;
  return i;
}
wn.getSiblings = uTe;
function hTe(e12, t) {
  var r;
  return (r = e12.attribs) === null || r === void 0 ? void 0 : r[t];
}
wn.getAttributeValue = hTe;
function fTe(e12, t) {
  return e12.attribs != null && Object.prototype.hasOwnProperty.call(e12.attribs, t) && e12.attribs[t] != null;
}
wn.hasAttrib = fTe;
function dTe(e12) {
  return e12.name;
}
wn.getName = dTe;
function pTe(e12) {
  for (var t, r = e12.next; r !== null && !(0, ON.isTag)(r); )
    t = r, r = t.next;
  return r;
}
wn.nextElementSibling = pTe;
function mTe(e12) {
  for (var t, r = e12.prev; r !== null && !(0, ON.isTag)(r); )
    t = r, r = t.prev;
  return r;
}
wn.prevElementSibling = mTe;
var Li = {};
Object.defineProperty(Li, "__esModule", {
  value: true
});
Li.prepend = Li.prependChild = Li.append = Li.appendChild = Li.replaceElement = Li.removeElement = void 0;
function ty(e12) {
  if (e12.prev && (e12.prev.next = e12.next), e12.next && (e12.next.prev = e12.prev), e12.parent) {
    var t = e12.parent.children, r = t.lastIndexOf(e12);
    r >= 0 && t.splice(r, 1);
  }
  e12.next = null, e12.prev = null, e12.parent = null;
}
Li.removeElement = ty;
function gTe(e12, t) {
  var r = t.prev = e12.prev;
  r && (r.next = t);
  var n = t.next = e12.next;
  n && (n.prev = t);
  var i = t.parent = e12.parent;
  if (i) {
    var o = i.children;
    o[o.lastIndexOf(e12)] = t, e12.parent = null;
  }
}
Li.replaceElement = gTe;
function vTe(e12, t) {
  if (ty(t), t.next = null, t.parent = e12, e12.children.push(t) > 1) {
    var r = e12.children[e12.children.length - 2];
    r.next = t, t.prev = r;
  } else
    t.prev = null;
}
Li.appendChild = vTe;
function yTe(e12, t) {
  ty(t);
  var r = e12.parent, n = e12.next;
  if (t.next = n, t.prev = e12, e12.next = t, t.parent = r, n) {
    if (n.prev = t, r) {
      var i = r.children;
      i.splice(i.lastIndexOf(n), 0, t);
    }
  } else
    r && r.children.push(t);
}
Li.append = yTe;
function _Te(e12, t) {
  if (ty(t), t.parent = e12, t.prev = null, e12.children.unshift(t) !== 1) {
    var r = e12.children[1];
    r.prev = t, t.next = r;
  } else
    t.next = null;
}
Li.prependChild = _Te;
function bTe(e12, t) {
  ty(t);
  var r = e12.parent;
  if (r) {
    var n = r.children;
    n.splice(n.indexOf(e12), 0, t);
  }
  e12.prev && (e12.prev.next = t), t.parent = r, t.prev = e12.prev, t.next = e12, e12.prev = t;
}
Li.prepend = bTe;
var ui = {};
Object.defineProperty(ui, "__esModule", {
  value: true
});
ui.findAll = ui.existsOne = ui.findOne = ui.findOneChild = ui.find = ui.filter = void 0;
var N1 = ni;
function TTe(e12, t, r, n) {
  return r === void 0 && (r = true), n === void 0 && (n = 1 / 0), ZX(e12, Array.isArray(t) ? t : [t], r, n);
}
ui.filter = TTe;
function ZX(e12, t, r, n) {
  for (var i = [], o = [t], a = [0]; ; ) {
    if (a[0] >= o[0].length) {
      if (a.length === 1)
        return i;
      o.shift(), a.shift();
      continue;
    }
    var s = o[0][a[0]++];
    if (e12(s) && (i.push(s), --n <= 0))
      return i;
    r && (0, N1.hasChildren)(s) && s.children.length > 0 && (a.unshift(0), o.unshift(s.children));
  }
}
ui.find = ZX;
function ETe(e12, t) {
  return t.find(e12);
}
ui.findOneChild = ETe;
function QX(e12, t, r) {
  r === void 0 && (r = true);
  for (var n = null, i = 0; i < t.length && !n; i++) {
    var o = t[i];
    if ((0, N1.isTag)(o))
      e12(o) ? n = o : r && o.children.length > 0 && (n = QX(e12, o.children, true));
    else
      continue;
  }
  return n;
}
ui.findOne = QX;
function JX(e12, t) {
  return t.some(function(r) {
    return (0, N1.isTag)(r) && (e12(r) || JX(e12, r.children));
  });
}
ui.existsOne = JX;
function STe(e12, t) {
  for (var r = [], n = [t], i = [0]; ; ) {
    if (i[0] >= n[0].length) {
      if (n.length === 1)
        return r;
      n.shift(), i.shift();
      continue;
    }
    var o = n[0][i[0]++];
    (0, N1.isTag)(o) && (e12(o) && r.push(o), o.children.length > 0 && (i.unshift(0), n.unshift(o.children)));
  }
}
ui.findAll = STe;
var to = {};
Object.defineProperty(to, "__esModule", {
  value: true
});
to.getElementsByTagType = to.getElementsByTagName = to.getElementById = to.getElements = to.testElement = void 0;
var Uc = ni;
var M1 = ui;
var W0 = {
  tag_name: function(e12) {
    return typeof e12 == "function" ? function(t) {
      return (0, Uc.isTag)(t) && e12(t.name);
    } : e12 === "*" ? Uc.isTag : function(t) {
      return (0, Uc.isTag)(t) && t.name === e12;
    };
  },
  tag_type: function(e12) {
    return typeof e12 == "function" ? function(t) {
      return e12(t.type);
    } : function(t) {
      return t.type === e12;
    };
  },
  tag_contains: function(e12) {
    return typeof e12 == "function" ? function(t) {
      return (0, Uc.isText)(t) && e12(t.data);
    } : function(t) {
      return (0, Uc.isText)(t) && t.data === e12;
    };
  }
};
function eW(e12, t) {
  return typeof t == "function" ? function(r) {
    return (0, Uc.isTag)(r) && t(r.attribs[e12]);
  } : function(r) {
    return (0, Uc.isTag)(r) && r.attribs[e12] === t;
  };
}
function wTe(e12, t) {
  return function(r) {
    return e12(r) || t(r);
  };
}
function tW(e12) {
  var t = Object.keys(e12).map(function(r) {
    var n = e12[r];
    return Object.prototype.hasOwnProperty.call(W0, r) ? W0[r](n) : eW(r, n);
  });
  return t.length === 0 ? null : t.reduce(wTe);
}
function ATe(e12, t) {
  var r = tW(e12);
  return r ? r(t) : true;
}
to.testElement = ATe;
function OTe(e12, t, r, n) {
  n === void 0 && (n = 1 / 0);
  var i = tW(e12);
  return i ? (0, M1.filter)(i, t, r, n) : [];
}
to.getElements = OTe;
function ITe(e12, t, r) {
  return r === void 0 && (r = true), Array.isArray(t) || (t = [t]), (0, M1.findOne)(eW("id", e12), t, r);
}
to.getElementById = ITe;
function PTe(e12, t, r, n) {
  return r === void 0 && (r = true), n === void 0 && (n = 1 / 0), (0, M1.filter)(W0.tag_name(e12), t, r, n);
}
to.getElementsByTagName = PTe;
function CTe(e12, t, r, n) {
  return r === void 0 && (r = true), n === void 0 && (n = 1 / 0), (0, M1.filter)(W0.tag_type(e12), t, r, n);
}
to.getElementsByTagType = CTe;
var rW = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.uniqueSort = e12.compareDocumentPosition = e12.DocumentPosition = e12.removeSubsets = void 0;
  var t = ni;
  function r(a) {
    for (var s = a.length; --s >= 0; ) {
      var l = a[s];
      if (s > 0 && a.lastIndexOf(l, s - 1) >= 0) {
        a.splice(s, 1);
        continue;
      }
      for (var u = l.parent; u; u = u.parent)
        if (a.includes(u)) {
          a.splice(s, 1);
          break;
        }
    }
    return a;
  }
  e12.removeSubsets = r;
  var n;
  (function(a) {
    a[a.DISCONNECTED = 1] = "DISCONNECTED", a[a.PRECEDING = 2] = "PRECEDING", a[a.FOLLOWING = 4] = "FOLLOWING", a[a.CONTAINS = 8] = "CONTAINS", a[a.CONTAINED_BY = 16] = "CONTAINED_BY";
  })(n = e12.DocumentPosition || (e12.DocumentPosition = {}));
  function i(a, s) {
    var l = [], u = [];
    if (a === s)
      return 0;
    for (var c = (0, t.hasChildren)(a) ? a : a.parent; c; )
      l.unshift(c), c = c.parent;
    for (c = (0, t.hasChildren)(s) ? s : s.parent; c; )
      u.unshift(c), c = c.parent;
    for (var f = Math.min(l.length, u.length), h = 0; h < f && l[h] === u[h]; )
      h++;
    if (h === 0)
      return n.DISCONNECTED;
    var d = l[h - 1], p = d.children, m = l[h], g = u[h];
    return p.indexOf(m) > p.indexOf(g) ? d === s ? n.FOLLOWING | n.CONTAINED_BY : n.FOLLOWING : d === a ? n.PRECEDING | n.CONTAINS : n.PRECEDING;
  }
  e12.compareDocumentPosition = i;
  function o(a) {
    return a = a.filter(function(s, l, u) {
      return !u.includes(s, l + 1);
    }), a.sort(function(s, l) {
      var u = i(s, l);
      return u & n.PRECEDING ? -1 : u & n.FOLLOWING ? 1 : 0;
    }), a;
  }
  e12.uniqueSort = o;
})(rW);
var L1 = {};
Object.defineProperty(L1, "__esModule", {
  value: true
});
L1.getFeed = void 0;
var xTe = eo;
var ry = to;
function kTe(e12) {
  var t = Y0(LTe, e12);
  return t ? t.name === "feed" ? DTe(t) : RTe(t) : null;
}
L1.getFeed = kTe;
function DTe(e12) {
  var t, r = e12.children, n = {
    type: "atom",
    items: (0, ry.getElementsByTagName)("entry", r).map(function(a) {
      var s, l = a.children, u = {
        media: nW(l)
      };
      Mi(u, "id", "id", l), Mi(u, "title", "title", l);
      var c = (s = Y0("link", l)) === null || s === void 0 ? void 0 : s.attribs.href;
      c && (u.link = c);
      var f = Ml("summary", l) || Ml("content", l);
      f && (u.description = f);
      var h = Ml("updated", l);
      return h && (u.pubDate = new Date(h)), u;
    })
  };
  Mi(n, "id", "id", r), Mi(n, "title", "title", r);
  var i = (t = Y0("link", r)) === null || t === void 0 ? void 0 : t.attribs.href;
  i && (n.link = i), Mi(n, "description", "subtitle", r);
  var o = Ml("updated", r);
  return o && (n.updated = new Date(o)), Mi(n, "author", "email", r, true), n;
}
function RTe(e12) {
  var t, r, n = (r = (t = Y0("channel", e12.children)) === null || t === void 0 ? void 0 : t.children) !== null && r !== void 0 ? r : [], i = {
    type: e12.name.substr(0, 3),
    id: "",
    items: (0, ry.getElementsByTagName)("item", e12.children).map(function(a) {
      var s = a.children, l = {
        media: nW(s)
      };
      Mi(l, "id", "guid", s), Mi(l, "title", "title", s), Mi(l, "link", "link", s), Mi(l, "description", "description", s);
      var u = Ml("pubDate", s) || Ml("dc:date", s);
      return u && (l.pubDate = new Date(u)), l;
    })
  };
  Mi(i, "title", "title", n), Mi(i, "link", "link", n), Mi(i, "description", "description", n);
  var o = Ml("lastBuildDate", n);
  return o && (i.updated = new Date(o)), Mi(i, "author", "managingEditor", n, true), i;
}
var NTe = ["url", "type", "lang"];
var MTe = ["fileSize", "bitrate", "framerate", "samplingrate", "channels", "duration", "height", "width"];
function nW(e12) {
  return (0, ry.getElementsByTagName)("media:content", e12).map(function(t) {
    for (var r = t.attribs, n = {
      medium: r.medium,
      isDefault: !!r.isDefault
    }, i = 0, o = NTe; i < o.length; i++) {
      var a = o[i];
      r[a] && (n[a] = r[a]);
    }
    for (var s = 0, l = MTe; s < l.length; s++) {
      var a = l[s];
      r[a] && (n[a] = parseInt(r[a], 10));
    }
    return r.expression && (n.expression = r.expression), n;
  });
}
function Y0(e12, t) {
  return (0, ry.getElementsByTagName)(e12, t, true, 1)[0];
}
function Ml(e12, t, r) {
  return r === void 0 && (r = false), (0, xTe.textContent)((0, ry.getElementsByTagName)(e12, t, r, 1)).trim();
}
function Mi(e12, t, r, n, i) {
  i === void 0 && (i = false);
  var o = Ml(r, n, i);
  o && (e12[t] = o);
}
function LTe(e12) {
  return e12 === "rss" || e12 === "feed" || e12 === "rdf:RDF";
}
(function(e12) {
  var t = De && De.__createBinding || (Object.create ? function(i, o, a, s) {
    s === void 0 && (s = a);
    var l = Object.getOwnPropertyDescriptor(o, a);
    (!l || ("get" in l ? !o.__esModule : l.writable || l.configurable)) && (l = {
      enumerable: true,
      get: function() {
        return o[a];
      }
    }), Object.defineProperty(i, s, l);
  } : function(i, o, a, s) {
    s === void 0 && (s = a), i[s] = o[a];
  }), r = De && De.__exportStar || function(i, o) {
    for (var a in i)
      a !== "default" && !Object.prototype.hasOwnProperty.call(o, a) && t(o, i, a);
  };
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.hasChildren = e12.isDocument = e12.isComment = e12.isText = e12.isCDATA = e12.isTag = void 0, r(eo, e12), r(wn, e12), r(Li, e12), r(ui, e12), r(to, e12), r(rW, e12), r(L1, e12);
  var n = ni;
  Object.defineProperty(e12, "isTag", {
    enumerable: true,
    get: function() {
      return n.isTag;
    }
  }), Object.defineProperty(e12, "isCDATA", {
    enumerable: true,
    get: function() {
      return n.isCDATA;
    }
  }), Object.defineProperty(e12, "isText", {
    enumerable: true,
    get: function() {
      return n.isText;
    }
  }), Object.defineProperty(e12, "isComment", {
    enumerable: true,
    get: function() {
      return n.isComment;
    }
  }), Object.defineProperty(e12, "isDocument", {
    enumerable: true,
    get: function() {
      return n.isDocument;
    }
  }), Object.defineProperty(e12, "hasChildren", {
    enumerable: true,
    get: function() {
      return n.hasChildren;
    }
  });
})(Jo);
var nu = De && De.__assign || function() {
  return nu = Object.assign || function(e12) {
    for (var t, r = 1, n = arguments.length; r < n; r++) {
      t = arguments[r];
      for (var i in t)
        Object.prototype.hasOwnProperty.call(t, i) && (e12[i] = t[i]);
    }
    return e12;
  }, nu.apply(this, arguments);
};
var BTe = De && De.__createBinding || (Object.create ? function(e12, t, r, n) {
  n === void 0 && (n = r);
  var i = Object.getOwnPropertyDescriptor(t, r);
  (!i || ("get" in i ? !t.__esModule : i.writable || i.configurable)) && (i = {
    enumerable: true,
    get: function() {
      return t[r];
    }
  }), Object.defineProperty(e12, n, i);
} : function(e12, t, r, n) {
  n === void 0 && (n = r), e12[n] = t[r];
});
var FTe = De && De.__setModuleDefault || (Object.create ? function(e12, t) {
  Object.defineProperty(e12, "default", {
    enumerable: true,
    value: t
  });
} : function(e12, t) {
  e12.default = t;
});
var $Te = De && De.__importStar || function(e12) {
  if (e12 && e12.__esModule)
    return e12;
  var t = {};
  if (e12 != null)
    for (var r in e12)
      r !== "default" && Object.prototype.hasOwnProperty.call(e12, r) && BTe(t, e12, r);
  return FTe(t, e12), t;
};
Object.defineProperty(tn, "__esModule", {
  value: true
});
tn.merge = tn.contains = tn.root = tn.parseHTML = tn.text = tn.xml = tn.html = void 0;
var HTe = Jo;
var qP = $Te(lp);
function iW(e12, t, r) {
  return e12 ? e12(t ?? e12._root.children, null, void 0, r).toString() : "";
}
function UTe(e12, t) {
  return !t && typeof e12 == "object" && e12 != null && !("length" in e12) && !("type" in e12);
}
function jTe(e12, t) {
  var r = UTe(e12) ? (t = e12, void 0) : e12, n = nu(nu(nu({}, qP.default), this === null || this === void 0 ? void 0 : this._options), (0, qP.flatten)(t ?? {}));
  return iW(this, r, n);
}
tn.html = jTe;
function GTe(e12) {
  var t = nu(nu({}, this._options), {
    xmlMode: true
  });
  return iW(this, e12, t);
}
tn.xml = GTe;
function zTe(e12) {
  for (var t = e12 || (this ? this.root() : []), r = "", n = 0; n < t.length; n++)
    r += (0, HTe.textContent)(t[n]);
  return r;
}
tn.text = zTe;
function VTe(e12, t, r) {
  if (r === void 0 && (r = typeof t == "boolean" ? t : false), !e12 || typeof e12 != "string")
    return null;
  typeof t == "boolean" && (r = t);
  var n = this.load(e12, qP.default, false);
  return r || n("script").remove(), n.root()[0].children.slice();
}
tn.parseHTML = VTe;
function XTe() {
  return this(this._root);
}
tn.root = XTe;
function WTe(e12, t) {
  if (t === e12)
    return false;
  for (var r = t; r && r !== r.parent; )
    if (r = r.parent, r === e12)
      return true;
  return false;
}
tn.contains = WTe;
function YTe(e12, t) {
  if (!(!AH(e12) || !AH(t))) {
    for (var r = e12.length, n = +t.length, i = 0; i < n; i++)
      e12[r++] = t[i];
    return e12.length = r, e12;
  }
}
tn.merge = YTe;
function AH(e12) {
  if (Array.isArray(e12))
    return true;
  if (typeof e12 != "object" || !Object.prototype.hasOwnProperty.call(e12, "length") || typeof e12.length != "number" || e12.length < 0)
    return false;
  for (var t = 0; t < e12.length; t++)
    if (!(t in e12))
      return false;
  return true;
}
var B1 = {};
var nn = {};
var lc = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.isHtml = e12.cloneDom = e12.domEach = e12.cssCase = e12.camelCase = e12.isCheerio = e12.isTag = void 0;
  var t = ni, r = ni;
  Object.defineProperty(e12, "isTag", {
    enumerable: true,
    get: function() {
      return r.isTag;
    }
  });
  function n(c) {
    return c.cheerio != null;
  }
  e12.isCheerio = n;
  function i(c) {
    return c.replace(/[_.-](\w|$)/g, function(f, h) {
      return h.toUpperCase();
    });
  }
  e12.camelCase = i;
  function o(c) {
    return c.replace(/[A-Z]/g, "-$&").toLowerCase();
  }
  e12.cssCase = o;
  function a(c, f) {
    for (var h = c.length, d = 0; d < h; d++)
      f(c[d], d);
    return c;
  }
  e12.domEach = a;
  function s(c) {
    var f = "length" in c ? Array.prototype.map.call(c, function(d) {
      return (0, t.cloneNode)(d, true);
    }) : [(0, t.cloneNode)(c, true)], h = new t.Document(f);
    return f.forEach(function(d) {
      d.parent = h;
    }), f;
  }
  e12.cloneDom = s;
  var l;
  (function(c) {
    c[c.LowerA = 97] = "LowerA", c[c.LowerZ = 122] = "LowerZ", c[c.UpperA = 65] = "UpperA", c[c.UpperZ = 90] = "UpperZ", c[c.Exclamation = 33] = "Exclamation";
  })(l || (l = {}));
  function u(c) {
    var f = c.indexOf("<");
    if (f < 0 || f > c.length - 3)
      return false;
    var h = c.charCodeAt(f + 1);
    return (h >= l.LowerA && h <= l.LowerZ || h >= l.UpperA && h <= l.UpperZ || h === l.Exclamation) && c.includes(">", f + 2);
  }
  e12.isHtml = u;
})(lc);
Object.defineProperty(nn, "__esModule", {
  value: true
});
nn.toggleClass = nn.removeClass = nn.addClass = nn.hasClass = nn.removeAttr = nn.val = nn.data = nn.prop = nn.attr = void 0;
var oW = tn;
var yr = lc;
var OH = Jo;
var Nf = Object.prototype.hasOwnProperty;
var lv = /\s+/;
var KA = "data-";
var IH = {
  null: null,
  true: true,
  false: false
};
var IN = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i;
var qTe = /^{[^]*}$|^\[[^]*]$/;
function q0(e12, t, r) {
  var n;
  if (!(!e12 || !(0, yr.isTag)(e12))) {
    if ((n = e12.attribs) !== null && n !== void 0 || (e12.attribs = {}), !t)
      return e12.attribs;
    if (Nf.call(e12.attribs, t))
      return !r && IN.test(t) ? t : e12.attribs[t];
    if (e12.name === "option" && t === "value")
      return (0, oW.text)(e12.children);
    if (e12.name === "input" && (e12.attribs.type === "radio" || e12.attribs.type === "checkbox") && t === "value")
      return "on";
  }
}
function Mf(e12, t, r) {
  r === null ? aW(e12, t) : e12.attribs[t] = "".concat(r);
}
function KTe(e12, t) {
  if (typeof e12 == "object" || t !== void 0) {
    if (typeof t == "function") {
      if (typeof e12 != "string")
        throw new Error("Bad combination of arguments.");
      return (0, yr.domEach)(this, function(r, n) {
        (0, yr.isTag)(r) && Mf(r, e12, t.call(r, n, r.attribs[e12]));
      });
    }
    return (0, yr.domEach)(this, function(r) {
      (0, yr.isTag)(r) && (typeof e12 == "object" ? Object.keys(e12).forEach(function(n) {
        var i = e12[n];
        Mf(r, n, i);
      }) : Mf(r, e12, t));
    });
  }
  return arguments.length > 1 ? this : q0(this[0], e12, this.options.xmlMode);
}
nn.attr = KTe;
function PH(e12, t, r) {
  return t in e12 ? (
    // @ts-expect-error TS doesn't like us accessing the value directly here.
    e12[t]
  ) : !r && IN.test(t) ? q0(e12, t, false) !== void 0 : q0(e12, t, r);
}
function ZA(e12, t, r, n) {
  t in e12 ? e12[t] = r : Mf(e12, t, !n && IN.test(t) ? r ? "" : null : "".concat(r));
}
function ZTe(e12, t) {
  var r = this, n;
  if (typeof e12 == "string" && t === void 0) {
    var i = this[0];
    if (!i || !(0, yr.isTag)(i))
      return;
    switch (e12) {
      case "style": {
        var o = this.css(), a = Object.keys(o);
        return a.forEach(function(l, u) {
          o[u] = l;
        }), o.length = a.length, o;
      }
      case "tagName":
      case "nodeName":
        return i.name.toUpperCase();
      case "href":
      case "src": {
        var s = (n = i.attribs) === null || n === void 0 ? void 0 : n[e12];
        return typeof URL < "u" && (e12 === "href" && (i.tagName === "a" || i.name === "link") || e12 === "src" && (i.tagName === "img" || i.tagName === "iframe" || i.tagName === "audio" || i.tagName === "video" || i.tagName === "source")) && s !== void 0 && this.options.baseURI ? new URL(s, this.options.baseURI).href : s;
      }
      case "innerText":
        return (0, OH.innerText)(i);
      case "textContent":
        return (0, OH.textContent)(i);
      case "outerHTML":
        return this.clone().wrap("<container />").parent().html();
      case "innerHTML":
        return this.html();
      default:
        return PH(i, e12, this.options.xmlMode);
    }
  }
  if (typeof e12 == "object" || t !== void 0) {
    if (typeof t == "function") {
      if (typeof e12 == "object")
        throw new Error("Bad combination of arguments.");
      return (0, yr.domEach)(this, function(l, u) {
        (0, yr.isTag)(l) && ZA(l, e12, t.call(l, u, PH(l, e12, r.options.xmlMode)), r.options.xmlMode);
      });
    }
    return (0, yr.domEach)(this, function(l) {
      (0, yr.isTag)(l) && (typeof e12 == "object" ? Object.keys(e12).forEach(function(u) {
        var c = e12[u];
        ZA(l, u, c, r.options.xmlMode);
      }) : ZA(l, e12, t, r.options.xmlMode));
    });
  }
}
nn.prop = ZTe;
function CH(e12, t, r) {
  var n, i = e12;
  (n = i.data) !== null && n !== void 0 || (i.data = {}), typeof t == "object" ? Object.assign(i.data, t) : typeof t == "string" && r !== void 0 && (i.data[t] = r);
}
function xH(e12, t) {
  var r, n, i;
  t == null ? (r = Object.keys(e12.attribs).filter(function(l) {
    return l.startsWith(KA);
  }), n = r.map(function(l) {
    return (0, yr.camelCase)(l.slice(KA.length));
  })) : (r = [KA + (0, yr.cssCase)(t)], n = [t]);
  for (var o = 0; o < r.length; ++o) {
    var a = r[o], s = n[o];
    if (Nf.call(e12.attribs, a) && !Nf.call(e12.data, s)) {
      if (i = e12.attribs[a], Nf.call(IH, i))
        i = IH[i];
      else if (i === String(Number(i)))
        i = Number(i);
      else if (qTe.test(i))
        try {
          i = JSON.parse(i);
        } catch {
        }
      e12.data[s] = i;
    }
  }
  return t == null ? e12.data : i;
}
function QTe(e12, t) {
  var r, n = this[0];
  if (!(!n || !(0, yr.isTag)(n))) {
    var i = n;
    return (r = i.data) !== null && r !== void 0 || (i.data = {}), e12 ? typeof e12 == "object" || t !== void 0 ? ((0, yr.domEach)(this, function(o) {
      (0, yr.isTag)(o) && (typeof e12 == "object" ? CH(o, e12) : CH(o, e12, t));
    }), this) : Nf.call(i.data, e12) ? i.data[e12] : xH(i, e12) : xH(i);
  }
}
nn.data = QTe;
function JTe(e12) {
  var t = arguments.length === 0, r = this[0];
  if (!r || !(0, yr.isTag)(r))
    return t ? void 0 : this;
  switch (r.name) {
    case "textarea":
      return this.text(e12);
    case "select": {
      var n = this.find("option:selected");
      if (!t) {
        if (this.attr("multiple") == null && typeof e12 == "object")
          return this;
        this.find("option").removeAttr("selected");
        for (var i = typeof e12 != "object" ? [e12] : e12, o = 0; o < i.length; o++)
          this.find('option[value="'.concat(i[o], '"]')).attr("selected", "");
        return this;
      }
      return this.attr("multiple") ? n.toArray().map(function(a) {
        return (0, oW.text)(a.children);
      }) : n.attr("value");
    }
    case "input":
    case "option":
      return t ? this.attr("value") : this.attr("value", e12);
  }
}
nn.val = JTe;
function aW(e12, t) {
  !e12.attribs || !Nf.call(e12.attribs, t) || delete e12.attribs[t];
}
function K0(e12) {
  return e12 ? e12.trim().split(lv) : [];
}
function eEe(e12) {
  for (var t = K0(e12), r = function(o) {
    (0, yr.domEach)(n, function(a) {
      (0, yr.isTag)(a) && aW(a, t[o]);
    });
  }, n = this, i = 0; i < t.length; i++)
    r(i);
  return this;
}
nn.removeAttr = eEe;
function tEe(e12) {
  return this.toArray().some(function(t) {
    var r = (0, yr.isTag)(t) && t.attribs.class, n = -1;
    if (r && e12.length)
      for (; (n = r.indexOf(e12, n + 1)) > -1; ) {
        var i = n + e12.length;
        if ((n === 0 || lv.test(r[n - 1])) && (i === r.length || lv.test(r[i])))
          return true;
      }
    return false;
  });
}
nn.hasClass = tEe;
function sW(e12) {
  if (typeof e12 == "function")
    return (0, yr.domEach)(this, function(u, c) {
      if ((0, yr.isTag)(u)) {
        var f = u.attribs.class || "";
        sW.call([u], e12.call(u, c, f));
      }
    });
  if (!e12 || typeof e12 != "string")
    return this;
  for (var t = e12.split(lv), r = this.length, n = 0; n < r; n++) {
    var i = this[n];
    if ((0, yr.isTag)(i)) {
      var o = q0(i, "class", false);
      if (!o)
        Mf(i, "class", t.join(" ").trim());
      else {
        for (var a = " ".concat(o, " "), s = 0; s < t.length; s++) {
          var l = "".concat(t[s], " ");
          a.includes(" ".concat(l)) || (a += l);
        }
        Mf(i, "class", a.trim());
      }
    }
  }
  return this;
}
nn.addClass = sW;
function lW(e12) {
  if (typeof e12 == "function")
    return (0, yr.domEach)(this, function(i, o) {
      (0, yr.isTag)(i) && lW.call([i], e12.call(i, o, i.attribs.class || ""));
    });
  var t = K0(e12), r = t.length, n = arguments.length === 0;
  return (0, yr.domEach)(this, function(i) {
    if ((0, yr.isTag)(i))
      if (n)
        i.attribs.class = "";
      else {
        for (var o = K0(i.attribs.class), a = false, s = 0; s < r; s++) {
          var l = o.indexOf(t[s]);
          l >= 0 && (o.splice(l, 1), a = true, s--);
        }
        a && (i.attribs.class = o.join(" "));
      }
  });
}
nn.removeClass = lW;
function cW(e12, t) {
  if (typeof e12 == "function")
    return (0, yr.domEach)(this, function(f, h) {
      (0, yr.isTag)(f) && cW.call([f], e12.call(f, h, f.attribs.class || "", t), t);
    });
  if (!e12 || typeof e12 != "string")
    return this;
  for (var r = e12.split(lv), n = r.length, i = typeof t == "boolean" ? t ? 1 : -1 : 0, o = this.length, a = 0; a < o; a++) {
    var s = this[a];
    if ((0, yr.isTag)(s)) {
      for (var l = K0(s.attribs.class), u = 0; u < n; u++) {
        var c = l.indexOf(r[u]);
        i >= 0 && c < 0 ? l.push(r[u]) : i <= 0 && c >= 0 && l.splice(c, 1);
      }
      s.attribs.class = l.join(" ");
    }
  }
  return this;
}
nn.toggleClass = cW;
var it = {};
var uW = {};
var Jt;
(function(e12) {
  e12.Attribute = "attribute", e12.Pseudo = "pseudo", e12.PseudoElement = "pseudo-element", e12.Tag = "tag", e12.Universal = "universal", e12.Adjacent = "adjacent", e12.Child = "child", e12.Descendant = "descendant", e12.Parent = "parent", e12.Sibling = "sibling", e12.ColumnCombinator = "column-combinator";
})(Jt || (Jt = {}));
var rEe = {
  Unknown: null,
  QuirksMode: "quirks",
  IgnoreCase: true,
  CaseSensitive: false
};
var Fr;
(function(e12) {
  e12.Any = "any", e12.Element = "element", e12.End = "end", e12.Equals = "equals", e12.Exists = "exists", e12.Hyphen = "hyphen", e12.Not = "not", e12.Start = "start";
})(Fr || (Fr = {}));
var kH = /^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/;
var nEe = /\\([\da-f]{1,6}\s?|(\s)|.)/gi;
var iEe = /* @__PURE__ */ new Map([[126, Fr.Element], [94, Fr.Start], [36, Fr.End], [42, Fr.Any], [33, Fr.Not], [124, Fr.Hyphen]]);
var oEe = /* @__PURE__ */ new Set(["has", "not", "matches", "is", "where", "host", "host-context"]);
function hW(e12) {
  switch (e12.type) {
    case Jt.Adjacent:
    case Jt.Child:
    case Jt.Descendant:
    case Jt.Parent:
    case Jt.Sibling:
    case Jt.ColumnCombinator:
      return true;
    default:
      return false;
  }
}
var aEe = /* @__PURE__ */ new Set(["contains", "icontains"]);
function sEe(e12, t, r) {
  const n = parseInt(t, 16) - 65536;
  return n !== n || r ? t : n < 0 ? (
    // BMP codepoint
    String.fromCharCode(n + 65536)
  ) : (
    // Supplemental Plane codepoint (surrogate pair)
    String.fromCharCode(n >> 10 | 55296, n & 1023 | 56320)
  );
}
function Jp(e12) {
  return e12.replace(nEe, sEe);
}
function QA(e12) {
  return e12 === 39 || e12 === 34;
}
function DH(e12) {
  return e12 === 32 || e12 === 9 || e12 === 10 || e12 === 12 || e12 === 13;
}
function lEe(e12) {
  const t = [], r = fW(t, `${e12}`, 0);
  if (r < e12.length)
    throw new Error(`Unmatched selector: ${e12.slice(r)}`);
  return t;
}
function fW(e12, t, r) {
  let n = [];
  function i(h) {
    const d = t.slice(r + h).match(kH);
    if (!d)
      throw new Error(`Expected name, found ${t.slice(r)}`);
    const [p] = d;
    return r += h + p.length, Jp(p);
  }
  function o(h) {
    for (r += h; r < t.length && DH(t.charCodeAt(r)); )
      r++;
  }
  function a() {
    r += 1;
    const h = r;
    let d = 1;
    for (; d > 0 && r < t.length; r++)
      t.charCodeAt(r) === 40 && !s(r) ? d++ : t.charCodeAt(r) === 41 && !s(r) && d--;
    if (d)
      throw new Error("Parenthesis not matched");
    return Jp(t.slice(h, r - 1));
  }
  function s(h) {
    let d = 0;
    for (; t.charCodeAt(--h) === 92; )
      d++;
    return (d & 1) === 1;
  }
  function l() {
    if (n.length > 0 && hW(n[n.length - 1]))
      throw new Error("Did not expect successive traversals.");
  }
  function u(h) {
    if (n.length > 0 && n[n.length - 1].type === Jt.Descendant) {
      n[n.length - 1].type = h;
      return;
    }
    l(), n.push({
      type: h
    });
  }
  function c(h, d) {
    n.push({
      type: Jt.Attribute,
      name: h,
      action: d,
      value: i(1),
      namespace: null,
      ignoreCase: "quirks"
    });
  }
  function f() {
    if (n.length && n[n.length - 1].type === Jt.Descendant && n.pop(), n.length === 0)
      throw new Error("Empty sub-selector");
    e12.push(n);
  }
  if (o(0), t.length === r)
    return r;
  e:
    for (; r < t.length; ) {
      const h = t.charCodeAt(r);
      switch (h) {
        case 32:
        case 9:
        case 10:
        case 12:
        case 13: {
          (n.length === 0 || n[0].type !== Jt.Descendant) && (l(), n.push({
            type: Jt.Descendant
          })), o(1);
          break;
        }
        case 62: {
          u(Jt.Child), o(1);
          break;
        }
        case 60: {
          u(Jt.Parent), o(1);
          break;
        }
        case 126: {
          u(Jt.Sibling), o(1);
          break;
        }
        case 43: {
          u(Jt.Adjacent), o(1);
          break;
        }
        case 46: {
          c("class", Fr.Element);
          break;
        }
        case 35: {
          c("id", Fr.Equals);
          break;
        }
        case 91: {
          o(1);
          let d, p = null;
          t.charCodeAt(r) === 124 ? d = i(1) : t.startsWith("*|", r) ? (p = "*", d = i(2)) : (d = i(0), t.charCodeAt(r) === 124 && t.charCodeAt(r + 1) !== 61 && (p = d, d = i(1))), o(0);
          let m = Fr.Exists;
          const g = iEe.get(t.charCodeAt(r));
          if (g) {
            if (m = g, t.charCodeAt(r + 1) !== 61)
              throw new Error("Expected `=`");
            o(2);
          } else
            t.charCodeAt(r) === 61 && (m = Fr.Equals, o(1));
          let v = "", _ = null;
          if (m !== "exists") {
            if (QA(t.charCodeAt(r))) {
              const T = t.charCodeAt(r);
              let E = r + 1;
              for (; E < t.length && (t.charCodeAt(E) !== T || s(E)); )
                E += 1;
              if (t.charCodeAt(E) !== T)
                throw new Error("Attribute value didn't end");
              v = Jp(t.slice(r + 1, E)), r = E + 1;
            } else {
              const T = r;
              for (; r < t.length && (!DH(t.charCodeAt(r)) && t.charCodeAt(r) !== 93 || s(r)); )
                r += 1;
              v = Jp(t.slice(T, r));
            }
            o(0);
            const b = t.charCodeAt(r) | 32;
            b === 115 ? (_ = false, o(1)) : b === 105 && (_ = true, o(1));
          }
          if (t.charCodeAt(r) !== 93)
            throw new Error("Attribute selector didn't terminate");
          r += 1;
          const y = {
            type: Jt.Attribute,
            name: d,
            action: m,
            value: v,
            namespace: p,
            ignoreCase: _
          };
          n.push(y);
          break;
        }
        case 58: {
          if (t.charCodeAt(r + 1) === 58) {
            n.push({
              type: Jt.PseudoElement,
              name: i(2).toLowerCase(),
              data: t.charCodeAt(r) === 40 ? a() : null
            });
            continue;
          }
          const d = i(1).toLowerCase();
          let p = null;
          if (t.charCodeAt(r) === 40)
            if (oEe.has(d)) {
              if (QA(t.charCodeAt(r + 1)))
                throw new Error(`Pseudo-selector ${d} cannot be quoted`);
              if (p = [], r = fW(p, t, r + 1), t.charCodeAt(r) !== 41)
                throw new Error(`Missing closing parenthesis in :${d} (${t})`);
              r += 1;
            } else {
              if (p = a(), aEe.has(d)) {
                const m = p.charCodeAt(0);
                m === p.charCodeAt(p.length - 1) && QA(m) && (p = p.slice(1, -1));
              }
              p = Jp(p);
            }
          n.push({
            type: Jt.Pseudo,
            name: d,
            data: p
          });
          break;
        }
        case 44: {
          f(), n = [], o(1);
          break;
        }
        default: {
          if (t.startsWith("/*", r)) {
            const m = t.indexOf("*/", r + 2);
            if (m < 0)
              throw new Error("Comment was not terminated");
            r = m + 2, n.length === 0 && o(0);
            break;
          }
          let d = null, p;
          if (h === 42)
            r += 1, p = "*";
          else if (h === 124) {
            if (p = "", t.charCodeAt(r + 1) === 124) {
              u(Jt.ColumnCombinator), o(2);
              break;
            }
          } else if (kH.test(t.slice(r)))
            p = i(0);
          else
            break e;
          t.charCodeAt(r) === 124 && t.charCodeAt(r + 1) !== 124 && (d = p, t.charCodeAt(r + 1) === 42 ? (p = "*", r += 2) : p = i(1)), n.push(p === "*" ? {
            type: Jt.Universal,
            namespace: d
          } : {
            type: Jt.Tag,
            name: p,
            namespace: d
          });
        }
      }
    }
  return f(), r;
}
var dW = ["\\", '"'];
var pW = [...dW, "(", ")"];
var cEe = new Set(dW.map((e12) => e12.charCodeAt(0)));
var RH = new Set(pW.map((e12) => e12.charCodeAt(0)));
var gf = new Set([...pW, "~", "^", "$", "*", "+", "!", "|", ":", "[", "]", " ", "."].map((e12) => e12.charCodeAt(0)));
function mW(e12) {
  return e12.map((t) => t.map(uEe).join("")).join(", ");
}
function uEe(e12, t, r) {
  switch (e12.type) {
    case Jt.Child:
      return t === 0 ? "> " : " > ";
    case Jt.Parent:
      return t === 0 ? "< " : " < ";
    case Jt.Sibling:
      return t === 0 ? "~ " : " ~ ";
    case Jt.Adjacent:
      return t === 0 ? "+ " : " + ";
    case Jt.Descendant:
      return " ";
    case Jt.ColumnCombinator:
      return t === 0 ? "|| " : " || ";
    case Jt.Universal:
      return e12.namespace === "*" && t + 1 < r.length && "name" in r[t + 1] ? "" : `${gW(e12.namespace)}*`;
    case Jt.Tag:
      return NH(e12);
    case Jt.PseudoElement:
      return `::${us(e12.name, gf)}${e12.data === null ? "" : `(${us(e12.data, RH)})`}`;
    case Jt.Pseudo:
      return `:${us(e12.name, gf)}${e12.data === null ? "" : `(${typeof e12.data == "string" ? us(e12.data, RH) : mW(e12.data)})`}`;
    case Jt.Attribute: {
      if (e12.name === "id" && e12.action === Fr.Equals && e12.ignoreCase === "quirks" && !e12.namespace)
        return `#${us(e12.value, gf)}`;
      if (e12.name === "class" && e12.action === Fr.Element && e12.ignoreCase === "quirks" && !e12.namespace)
        return `.${us(e12.value, gf)}`;
      const n = NH(e12);
      return e12.action === Fr.Exists ? `[${n}]` : `[${n}${hEe(e12.action)}="${us(e12.value, cEe)}"${e12.ignoreCase === null ? "" : e12.ignoreCase ? " i" : " s"}]`;
    }
  }
}
function hEe(e12) {
  switch (e12) {
    case Fr.Equals:
      return "";
    case Fr.Element:
      return "~";
    case Fr.Start:
      return "^";
    case Fr.End:
      return "$";
    case Fr.Any:
      return "*";
    case Fr.Not:
      return "!";
    case Fr.Hyphen:
      return "|";
    case Fr.Exists:
      throw new Error("Shouldn't be here");
  }
}
function NH(e12) {
  return `${gW(e12.namespace)}${us(e12.name, gf)}`;
}
function gW(e12) {
  return e12 !== null ? `${e12 === "*" ? "*" : us(e12, gf)}|` : "";
}
function us(e12, t) {
  let r = 0, n = "";
  for (let i = 0; i < e12.length; i++)
    t.has(e12.charCodeAt(i)) && (n += `${e12.slice(r, i)}\\${e12.charAt(i)}`, r = i + 1);
  return n.length > 0 ? n + e12.slice(r) : e12;
}
var fEe = Object.freeze(Object.defineProperty({
  __proto__: null,
  get AttributeAction() {
    return Fr;
  },
  IgnoreCaseMode: rEe,
  get SelectorType() {
    return Jt;
  },
  isTraversal: hW,
  parse: lEe,
  stringify: mW
}, Symbol.toStringTag, { value: "Module" }));
var ny = zs(fEe);
var KP = {};
var nh = {
  trueFunc: function() {
    return true;
  },
  falseFunc: function() {
    return false;
  }
};
var jl = {};
var hp = {};
Object.defineProperty(hp, "__esModule", {
  value: true
});
hp.isTraversal = void 0;
var Qi = ny;
var vW = /* @__PURE__ */ new Map([[Qi.SelectorType.Universal, 50], [Qi.SelectorType.Tag, 30], [Qi.SelectorType.Attribute, 1], [Qi.SelectorType.Pseudo, 0]]);
function dEe(e12) {
  return !vW.has(e12.type);
}
hp.isTraversal = dEe;
var pEe = /* @__PURE__ */ new Map([[Qi.AttributeAction.Exists, 10], [Qi.AttributeAction.Equals, 8], [Qi.AttributeAction.Not, 7], [Qi.AttributeAction.Start, 6], [Qi.AttributeAction.End, 6], [Qi.AttributeAction.Any, 5]]);
function mEe(e12) {
  for (var t = e12.map(yW), r = 1; r < e12.length; r++) {
    var n = t[r];
    if (!(n < 0))
      for (var i = r - 1; i >= 0 && n < t[i]; i--) {
        var o = e12[i + 1];
        e12[i + 1] = e12[i], e12[i] = o, t[i + 1] = t[i], t[i] = n;
      }
  }
}
hp.default = mEe;
function yW(e12) {
  var t, r, n = (t = vW.get(e12.type)) !== null && t !== void 0 ? t : -1;
  return e12.type === Qi.SelectorType.Attribute ? (n = (r = pEe.get(e12.action)) !== null && r !== void 0 ? r : 4, e12.action === Qi.AttributeAction.Equals && e12.name === "id" && (n = 9), e12.ignoreCase && (n >>= 1)) : e12.type === Qi.SelectorType.Pseudo && (e12.data ? e12.name === "has" || e12.name === "contains" ? n = 0 : Array.isArray(e12.data) ? (n = Math.min.apply(Math, e12.data.map(function(i) {
    return Math.min.apply(Math, i.map(yW));
  })), n < 0 && (n = 0)) : n = 2 : n = 3), n;
}
var F1 = {};
var $1 = {};
var gEe = De && De.__importDefault || function(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
};
Object.defineProperty($1, "__esModule", {
  value: true
});
$1.attributeRules = void 0;
var m_ = gEe(nh);
var vEe = /[-[\]{}()*+?.,\\^$|#\s]/g;
function MH(e12) {
  return e12.replace(vEe, "\\$&");
}
var yEe = /* @__PURE__ */ new Set(["accept", "accept-charset", "align", "alink", "axis", "bgcolor", "charset", "checked", "clear", "codetype", "color", "compact", "declare", "defer", "dir", "direction", "disabled", "enctype", "face", "frame", "hreflang", "http-equiv", "lang", "language", "link", "media", "method", "multiple", "nohref", "noresize", "noshade", "nowrap", "readonly", "rel", "rev", "rules", "scope", "scrolling", "selected", "shape", "target", "text", "type", "valign", "valuetype", "vlink"]);
function Oc(e12, t) {
  return typeof e12.ignoreCase == "boolean" ? e12.ignoreCase : e12.ignoreCase === "quirks" ? !!t.quirksMode : !t.xmlMode && yEe.has(e12.name);
}
$1.attributeRules = {
  equals: function(e12, t, r) {
    var n = r.adapter, i = t.name, o = t.value;
    return Oc(t, r) ? (o = o.toLowerCase(), function(a) {
      var s = n.getAttributeValue(a, i);
      return s != null && s.length === o.length && s.toLowerCase() === o && e12(a);
    }) : function(a) {
      return n.getAttributeValue(a, i) === o && e12(a);
    };
  },
  hyphen: function(e12, t, r) {
    var n = r.adapter, i = t.name, o = t.value, a = o.length;
    return Oc(t, r) ? (o = o.toLowerCase(), function(l) {
      var u = n.getAttributeValue(l, i);
      return u != null && (u.length === a || u.charAt(a) === "-") && u.substr(0, a).toLowerCase() === o && e12(l);
    }) : function(l) {
      var u = n.getAttributeValue(l, i);
      return u != null && (u.length === a || u.charAt(a) === "-") && u.substr(0, a) === o && e12(l);
    };
  },
  element: function(e12, t, r) {
    var n = r.adapter, i = t.name, o = t.value;
    if (/\s/.test(o))
      return m_.default.falseFunc;
    var a = new RegExp("(?:^|\\s)".concat(MH(o), "(?:$|\\s)"), Oc(t, r) ? "i" : "");
    return function(l) {
      var u = n.getAttributeValue(l, i);
      return u != null && u.length >= o.length && a.test(u) && e12(l);
    };
  },
  exists: function(e12, t, r) {
    var n = t.name, i = r.adapter;
    return function(o) {
      return i.hasAttrib(o, n) && e12(o);
    };
  },
  start: function(e12, t, r) {
    var n = r.adapter, i = t.name, o = t.value, a = o.length;
    return a === 0 ? m_.default.falseFunc : Oc(t, r) ? (o = o.toLowerCase(), function(s) {
      var l = n.getAttributeValue(s, i);
      return l != null && l.length >= a && l.substr(0, a).toLowerCase() === o && e12(s);
    }) : function(s) {
      var l;
      return !!(!((l = n.getAttributeValue(s, i)) === null || l === void 0) && l.startsWith(o)) && e12(s);
    };
  },
  end: function(e12, t, r) {
    var n = r.adapter, i = t.name, o = t.value, a = -o.length;
    return a === 0 ? m_.default.falseFunc : Oc(t, r) ? (o = o.toLowerCase(), function(s) {
      var l;
      return ((l = n.getAttributeValue(s, i)) === null || l === void 0 ? void 0 : l.substr(a).toLowerCase()) === o && e12(s);
    }) : function(s) {
      var l;
      return !!(!((l = n.getAttributeValue(s, i)) === null || l === void 0) && l.endsWith(o)) && e12(s);
    };
  },
  any: function(e12, t, r) {
    var n = r.adapter, i = t.name, o = t.value;
    if (o === "")
      return m_.default.falseFunc;
    if (Oc(t, r)) {
      var a = new RegExp(MH(o), "i");
      return function(l) {
        var u = n.getAttributeValue(l, i);
        return u != null && u.length >= o.length && a.test(u) && e12(l);
      };
    }
    return function(s) {
      var l;
      return !!(!((l = n.getAttributeValue(s, i)) === null || l === void 0) && l.includes(o)) && e12(s);
    };
  },
  not: function(e12, t, r) {
    var n = r.adapter, i = t.name, o = t.value;
    return o === "" ? function(a) {
      return !!n.getAttributeValue(a, i) && e12(a);
    } : Oc(t, r) ? (o = o.toLowerCase(), function(a) {
      var s = n.getAttributeValue(a, i);
      return (s == null || s.length !== o.length || s.toLowerCase() !== o) && e12(a);
    }) : function(a) {
      return n.getAttributeValue(a, i) !== o && e12(a);
    };
  }
};
var PN = {};
var _W = {};
var bW = {};
var H1 = {};
Object.defineProperty(H1, "__esModule", {
  value: true
});
H1.parse = void 0;
var _Ee = /* @__PURE__ */ new Set([9, 10, 12, 13, 32]);
var LH = "0".charCodeAt(0);
var bEe = "9".charCodeAt(0);
function TEe(e12) {
  if (e12 = e12.trim().toLowerCase(), e12 === "even")
    return [2, 0];
  if (e12 === "odd")
    return [2, 1];
  var t = 0, r = 0, n = o(), i = a();
  if (t < e12.length && e12.charAt(t) === "n" && (t++, r = n * (i ?? 1), s(), t < e12.length ? (n = o(), s(), i = a()) : n = i = 0), i === null || t < e12.length)
    throw new Error("n-th rule couldn't be parsed ('".concat(e12, "')"));
  return [r, n * i];
  function o() {
    return e12.charAt(t) === "-" ? (t++, -1) : (e12.charAt(t) === "+" && t++, 1);
  }
  function a() {
    for (var l = t, u = 0; t < e12.length && e12.charCodeAt(t) >= LH && e12.charCodeAt(t) <= bEe; )
      u = u * 10 + (e12.charCodeAt(t) - LH), t++;
    return t === l ? null : u;
  }
  function s() {
    for (; t < e12.length && _Ee.has(e12.charCodeAt(t)); )
      t++;
  }
}
H1.parse = TEe;
var _d = {};
var EEe = De && De.__importDefault || function(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
};
Object.defineProperty(_d, "__esModule", {
  value: true
});
_d.generate = _d.compile = void 0;
var BH = EEe(nh);
function SEe(e12) {
  var t = e12[0], r = e12[1] - 1;
  if (r < 0 && t <= 0)
    return BH.default.falseFunc;
  if (t === -1)
    return function(o) {
      return o <= r;
    };
  if (t === 0)
    return function(o) {
      return o === r;
    };
  if (t === 1)
    return r < 0 ? BH.default.trueFunc : function(o) {
      return o >= r;
    };
  var n = Math.abs(t), i = (r % n + n) % n;
  return t > 1 ? function(o) {
    return o >= r && o % n === i;
  } : function(o) {
    return o <= r && o % n === i;
  };
}
_d.compile = SEe;
function wEe(e12) {
  var t = e12[0], r = e12[1] - 1, n = 0;
  if (t < 0) {
    var i = -t, o = (r % i + i) % i;
    return function() {
      var a = o + i * n++;
      return a > r ? null : a;
    };
  }
  return t === 0 ? r < 0 ? (
    // There are no result — always return `null`
    function() {
      return null;
    }
  ) : (
    // Return `b` exactly once
    function() {
      return n++ === 0 ? r : null;
    }
  ) : (r < 0 && (r += t * Math.ceil(-r / t)), function() {
    return t * n++ + r;
  });
}
_d.generate = wEe;
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.sequence = e12.generate = e12.compile = e12.parse = void 0;
  var t = H1;
  Object.defineProperty(e12, "parse", {
    enumerable: true,
    get: function() {
      return t.parse;
    }
  });
  var r = _d;
  Object.defineProperty(e12, "compile", {
    enumerable: true,
    get: function() {
      return r.compile;
    }
  }), Object.defineProperty(e12, "generate", {
    enumerable: true,
    get: function() {
      return r.generate;
    }
  });
  function n(o) {
    return (0, r.compile)((0, t.parse)(o));
  }
  e12.default = n;
  function i(o) {
    return (0, r.generate)((0, t.parse)(o));
  }
  e12.sequence = i;
})(bW);
(function(e12) {
  var t = De && De.__importDefault || function(a) {
    return a && a.__esModule ? a : {
      default: a
    };
  };
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.filters = void 0;
  var r = t(bW), n = t(nh);
  function i(a, s) {
    return function(l) {
      var u = s.getParent(l);
      return u != null && s.isTag(u) && a(l);
    };
  }
  e12.filters = {
    contains: function(a, s, l) {
      var u = l.adapter;
      return function(f) {
        return a(f) && u.getText(f).includes(s);
      };
    },
    icontains: function(a, s, l) {
      var u = l.adapter, c = s.toLowerCase();
      return function(h) {
        return a(h) && u.getText(h).toLowerCase().includes(c);
      };
    },
    // Location specific methods
    "nth-child": function(a, s, l) {
      var u = l.adapter, c = l.equals, f = (0, r.default)(s);
      return f === n.default.falseFunc ? n.default.falseFunc : f === n.default.trueFunc ? i(a, u) : function(d) {
        for (var p = u.getSiblings(d), m = 0, g = 0; g < p.length && !c(d, p[g]); g++)
          u.isTag(p[g]) && m++;
        return f(m) && a(d);
      };
    },
    "nth-last-child": function(a, s, l) {
      var u = l.adapter, c = l.equals, f = (0, r.default)(s);
      return f === n.default.falseFunc ? n.default.falseFunc : f === n.default.trueFunc ? i(a, u) : function(d) {
        for (var p = u.getSiblings(d), m = 0, g = p.length - 1; g >= 0 && !c(d, p[g]); g--)
          u.isTag(p[g]) && m++;
        return f(m) && a(d);
      };
    },
    "nth-of-type": function(a, s, l) {
      var u = l.adapter, c = l.equals, f = (0, r.default)(s);
      return f === n.default.falseFunc ? n.default.falseFunc : f === n.default.trueFunc ? i(a, u) : function(d) {
        for (var p = u.getSiblings(d), m = 0, g = 0; g < p.length; g++) {
          var v = p[g];
          if (c(d, v))
            break;
          u.isTag(v) && u.getName(v) === u.getName(d) && m++;
        }
        return f(m) && a(d);
      };
    },
    "nth-last-of-type": function(a, s, l) {
      var u = l.adapter, c = l.equals, f = (0, r.default)(s);
      return f === n.default.falseFunc ? n.default.falseFunc : f === n.default.trueFunc ? i(a, u) : function(d) {
        for (var p = u.getSiblings(d), m = 0, g = p.length - 1; g >= 0; g--) {
          var v = p[g];
          if (c(d, v))
            break;
          u.isTag(v) && u.getName(v) === u.getName(d) && m++;
        }
        return f(m) && a(d);
      };
    },
    // TODO determine the actual root element
    root: function(a, s, l) {
      var u = l.adapter;
      return function(c) {
        var f = u.getParent(c);
        return (f == null || !u.isTag(f)) && a(c);
      };
    },
    scope: function(a, s, l, u) {
      var c = l.equals;
      return !u || u.length === 0 ? e12.filters.root(a, s, l) : u.length === 1 ? function(f) {
        return c(u[0], f) && a(f);
      } : function(f) {
        return u.includes(f) && a(f);
      };
    },
    hover: o("isHovered"),
    visited: o("isVisited"),
    active: o("isActive")
  };
  function o(a) {
    return function(l, u, c) {
      var f = c.adapter, h = f[a];
      return typeof h != "function" ? n.default.falseFunc : function(p) {
        return h(p) && l(p);
      };
    };
  }
})(_W);
var bd = {};
Object.defineProperty(bd, "__esModule", {
  value: true
});
bd.verifyPseudoArgs = bd.pseudos = void 0;
bd.pseudos = {
  empty: function(e12, t) {
    var r = t.adapter;
    return !r.getChildren(e12).some(function(n) {
      return r.isTag(n) || r.getText(n) !== "";
    });
  },
  "first-child": function(e12, t) {
    var r = t.adapter, n = t.equals;
    if (r.prevElementSibling)
      return r.prevElementSibling(e12) == null;
    var i = r.getSiblings(e12).find(function(o) {
      return r.isTag(o);
    });
    return i != null && n(e12, i);
  },
  "last-child": function(e12, t) {
    for (var r = t.adapter, n = t.equals, i = r.getSiblings(e12), o = i.length - 1; o >= 0; o--) {
      if (n(e12, i[o]))
        return true;
      if (r.isTag(i[o]))
        break;
    }
    return false;
  },
  "first-of-type": function(e12, t) {
    for (var r = t.adapter, n = t.equals, i = r.getSiblings(e12), o = r.getName(e12), a = 0; a < i.length; a++) {
      var s = i[a];
      if (n(e12, s))
        return true;
      if (r.isTag(s) && r.getName(s) === o)
        break;
    }
    return false;
  },
  "last-of-type": function(e12, t) {
    for (var r = t.adapter, n = t.equals, i = r.getSiblings(e12), o = r.getName(e12), a = i.length - 1; a >= 0; a--) {
      var s = i[a];
      if (n(e12, s))
        return true;
      if (r.isTag(s) && r.getName(s) === o)
        break;
    }
    return false;
  },
  "only-of-type": function(e12, t) {
    var r = t.adapter, n = t.equals, i = r.getName(e12);
    return r.getSiblings(e12).every(function(o) {
      return n(e12, o) || !r.isTag(o) || r.getName(o) !== i;
    });
  },
  "only-child": function(e12, t) {
    var r = t.adapter, n = t.equals;
    return r.getSiblings(e12).every(function(i) {
      return n(e12, i) || !r.isTag(i);
    });
  }
};
function AEe(e12, t, r, n) {
  if (r === null) {
    if (e12.length > n)
      throw new Error("Pseudo-class :".concat(t, " requires an argument"));
  } else if (e12.length === n)
    throw new Error("Pseudo-class :".concat(t, " doesn't have any arguments"));
}
bd.verifyPseudoArgs = AEe;
var U1 = {};
Object.defineProperty(U1, "__esModule", {
  value: true
});
U1.aliases = void 0;
U1.aliases = {
  // Links
  "any-link": ":is(a, area, link)[href]",
  link: ":any-link:not(:visited)",
  // Forms
  // https://html.spec.whatwg.org/multipage/scripting.html#disabled-elements
  disabled: `:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,
  enabled: ":not(:disabled)",
  checked: ":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",
  required: ":is(input, select, textarea)[required]",
  optional: ":is(input, select, textarea):not([required])",
  // JQuery extensions
  // https://html.spec.whatwg.org/multipage/form-elements.html#concept-option-selectedness
  selected: "option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",
  checkbox: "[type=checkbox]",
  file: "[type=file]",
  password: "[type=password]",
  radio: "[type=radio]",
  reset: "[type=reset]",
  image: "[type=image]",
  submit: "[type=submit]",
  parent: ":not(:empty)",
  header: ":is(h1, h2, h3, h4, h5, h6)",
  button: ":is(button, input[type=button])",
  input: ":is(input, textarea, select, button)",
  text: "input:is(:not([type!='']), [type=text])"
};
var j1 = {};
(function(e12) {
  var t = De && De.__spreadArray || function(u, c, f) {
    if (f || arguments.length === 2)
      for (var h = 0, d = c.length, p; h < d; h++)
        (p || !(h in c)) && (p || (p = Array.prototype.slice.call(c, 0, h)), p[h] = c[h]);
    return u.concat(p || Array.prototype.slice.call(c));
  }, r = De && De.__importDefault || function(u) {
    return u && u.__esModule ? u : {
      default: u
    };
  };
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.subselects = e12.getNextSiblings = e12.ensureIsTag = e12.PLACEHOLDER_ELEMENT = void 0;
  var n = r(nh), i = hp;
  e12.PLACEHOLDER_ELEMENT = {};
  function o(u, c) {
    return u === n.default.falseFunc ? n.default.falseFunc : function(f) {
      return c.isTag(f) && u(f);
    };
  }
  e12.ensureIsTag = o;
  function a(u, c) {
    var f = c.getSiblings(u);
    if (f.length <= 1)
      return [];
    var h = f.indexOf(u);
    return h < 0 || h === f.length - 1 ? [] : f.slice(h + 1).filter(c.isTag);
  }
  e12.getNextSiblings = a;
  function s(u) {
    return {
      xmlMode: !!u.xmlMode,
      lowerCaseAttributeNames: !!u.lowerCaseAttributeNames,
      lowerCaseTags: !!u.lowerCaseTags,
      quirksMode: !!u.quirksMode,
      cacheResults: !!u.cacheResults,
      pseudos: u.pseudos,
      adapter: u.adapter,
      equals: u.equals
    };
  }
  var l = function(u, c, f, h, d) {
    var p = d(c, s(f), h);
    return p === n.default.trueFunc ? u : p === n.default.falseFunc ? n.default.falseFunc : function(m) {
      return p(m) && u(m);
    };
  };
  e12.subselects = {
    is: l,
    /**
     * `:matches` and `:where` are aliases for `:is`.
     */
    matches: l,
    where: l,
    not: function(u, c, f, h, d) {
      var p = d(c, s(f), h);
      return p === n.default.falseFunc ? u : p === n.default.trueFunc ? n.default.falseFunc : function(m) {
        return !p(m) && u(m);
      };
    },
    has: function(u, c, f, h, d) {
      var p = f.adapter, m = s(f);
      m.relativeSelector = true;
      var g = c.some(function(T) {
        return T.some(i.isTraversal);
      }) ? (
        // Used as a placeholder. Will be replaced with the actual element.
        [e12.PLACEHOLDER_ELEMENT]
      ) : void 0, v = d(c, m, g);
      if (v === n.default.falseFunc)
        return n.default.falseFunc;
      var _ = o(v, p);
      if (g && v !== n.default.trueFunc) {
        var y = v.shouldTestNextSiblings, b = y === void 0 ? false : y;
        return function(T) {
          if (!u(T))
            return false;
          g[0] = T;
          var E = p.getChildren(T), P = b ? t(t([], E, true), a(T, p), true) : E;
          return p.existsOne(_, P);
        };
      }
      return function(T) {
        return u(T) && p.existsOne(_, p.getChildren(T));
      };
    }
  };
})(j1);
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.compilePseudoSelector = e12.aliases = e12.pseudos = e12.filters = void 0;
  var t = ny, r = _W;
  Object.defineProperty(e12, "filters", {
    enumerable: true,
    get: function() {
      return r.filters;
    }
  });
  var n = bd;
  Object.defineProperty(e12, "pseudos", {
    enumerable: true,
    get: function() {
      return n.pseudos;
    }
  });
  var i = U1;
  Object.defineProperty(e12, "aliases", {
    enumerable: true,
    get: function() {
      return i.aliases;
    }
  });
  var o = j1;
  function a(s, l, u, c, f) {
    var h, d = l.name, p = l.data;
    if (Array.isArray(p)) {
      if (!(d in o.subselects))
        throw new Error("Unknown pseudo-class :".concat(d, "(").concat(p, ")"));
      return o.subselects[d](s, p, u, c, f);
    }
    var m = (h = u.pseudos) === null || h === void 0 ? void 0 : h[d], g = typeof m == "string" ? m : i.aliases[d];
    if (typeof g == "string") {
      if (p != null)
        throw new Error("Pseudo ".concat(d, " doesn't have any arguments"));
      var v = (0, t.parse)(g);
      return o.subselects.is(s, v, u, c, f);
    }
    if (typeof m == "function")
      return (0, n.verifyPseudoArgs)(m, d, p, 1), function(y) {
        return m(y, p) && s(y);
      };
    if (d in r.filters)
      return r.filters[d](s, p, u, c);
    if (d in n.pseudos) {
      var _ = n.pseudos[d];
      return (0, n.verifyPseudoArgs)(_, d, p, 2), function(y) {
        return _(y, u, p) && s(y);
      };
    }
    throw new Error("Unknown pseudo-class :".concat(d));
  }
  e12.compilePseudoSelector = a;
})(PN);
Object.defineProperty(F1, "__esModule", {
  value: true
});
F1.compileGeneralSelector = void 0;
var OEe = $1;
var IEe = PN;
var Mo = ny;
function JA(e12, t) {
  var r = t.getParent(e12);
  return r && t.isTag(r) ? r : null;
}
function PEe(e12, t, r, n, i) {
  var o = r.adapter, a = r.equals;
  switch (t.type) {
    case Mo.SelectorType.PseudoElement:
      throw new Error("Pseudo-elements are not supported by css-select");
    case Mo.SelectorType.ColumnCombinator:
      throw new Error("Column combinators are not yet supported by css-select");
    case Mo.SelectorType.Attribute: {
      if (t.namespace != null)
        throw new Error("Namespaced attributes are not yet supported by css-select");
      return (!r.xmlMode || r.lowerCaseAttributeNames) && (t.name = t.name.toLowerCase()), OEe.attributeRules[t.action](e12, t, r);
    }
    case Mo.SelectorType.Pseudo:
      return (0, IEe.compilePseudoSelector)(e12, t, r, n, i);
    case Mo.SelectorType.Tag: {
      if (t.namespace != null)
        throw new Error("Namespaced tag names are not yet supported by css-select");
      var s = t.name;
      return (!r.xmlMode || r.lowerCaseTags) && (s = s.toLowerCase()), function(c) {
        return o.getName(c) === s && e12(c);
      };
    }
    case Mo.SelectorType.Descendant: {
      if (r.cacheResults === false || typeof WeakSet > "u")
        return function(c) {
          for (var f = c; f = JA(f, o); )
            if (e12(f))
              return true;
          return false;
        };
      var l = /* @__PURE__ */ new WeakSet();
      return function(c) {
        for (var f = c; f = JA(f, o); )
          if (!l.has(f)) {
            if (o.isTag(f) && e12(f))
              return true;
            l.add(f);
          }
        return false;
      };
    }
    case "_flexibleDescendant":
      return function(c) {
        var f = c;
        do
          if (e12(f))
            return true;
        while (f = JA(f, o));
        return false;
      };
    case Mo.SelectorType.Parent:
      return function(c) {
        return o.getChildren(c).some(function(f) {
          return o.isTag(f) && e12(f);
        });
      };
    case Mo.SelectorType.Child:
      return function(c) {
        var f = o.getParent(c);
        return f != null && o.isTag(f) && e12(f);
      };
    case Mo.SelectorType.Sibling:
      return function(c) {
        for (var f = o.getSiblings(c), h = 0; h < f.length; h++) {
          var d = f[h];
          if (a(c, d))
            break;
          if (o.isTag(d) && e12(d))
            return true;
        }
        return false;
      };
    case Mo.SelectorType.Adjacent:
      return o.prevElementSibling ? function(c) {
        var f = o.prevElementSibling(c);
        return f != null && e12(f);
      } : function(c) {
        for (var f = o.getSiblings(c), h, d = 0; d < f.length; d++) {
          var p = f[d];
          if (a(c, p))
            break;
          o.isTag(p) && (h = p);
        }
        return !!h && e12(h);
      };
    case Mo.SelectorType.Universal: {
      if (t.namespace != null && t.namespace !== "*")
        throw new Error("Namespaced universal selectors are not yet supported by css-select");
      return e12;
    }
  }
}
F1.compileGeneralSelector = PEe;
var CEe = De && De.__createBinding || (Object.create ? function(e12, t, r, n) {
  n === void 0 && (n = r);
  var i = Object.getOwnPropertyDescriptor(t, r);
  (!i || ("get" in i ? !t.__esModule : i.writable || i.configurable)) && (i = {
    enumerable: true,
    get: function() {
      return t[r];
    }
  }), Object.defineProperty(e12, n, i);
} : function(e12, t, r, n) {
  n === void 0 && (n = r), e12[n] = t[r];
});
var xEe = De && De.__setModuleDefault || (Object.create ? function(e12, t) {
  Object.defineProperty(e12, "default", {
    enumerable: true,
    value: t
  });
} : function(e12, t) {
  e12.default = t;
});
var kEe = De && De.__importStar || function(e12) {
  if (e12 && e12.__esModule)
    return e12;
  var t = {};
  if (e12 != null)
    for (var r in e12)
      r !== "default" && Object.prototype.hasOwnProperty.call(e12, r) && CEe(t, e12, r);
  return xEe(t, e12), t;
};
var DEe = De && De.__importDefault || function(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
};
Object.defineProperty(jl, "__esModule", {
  value: true
});
jl.compileToken = jl.compileUnsafe = jl.compile = void 0;
var Ts = ny;
var Ll = DEe(nh);
var ZP = kEe(hp);
var REe = F1;
var TW = j1;
function NEe(e12, t, r) {
  var n = EW(e12, t, r);
  return (0, TW.ensureIsTag)(n, t.adapter);
}
jl.compile = NEe;
function EW(e12, t, r) {
  var n = typeof e12 == "string" ? (0, Ts.parse)(e12) : e12;
  return CN(n, t, r);
}
jl.compileUnsafe = EW;
function SW(e12) {
  return e12.type === Ts.SelectorType.Pseudo && (e12.name === "scope" || Array.isArray(e12.data) && e12.data.some(function(t) {
    return t.some(SW);
  }));
}
var MEe = {
  type: Ts.SelectorType.Descendant
};
var LEe = {
  type: "_flexibleDescendant"
};
var BEe = {
  type: Ts.SelectorType.Pseudo,
  name: "scope",
  data: null
};
function FEe(e12, t, r) {
  for (var n = t.adapter, i = !!(r == null ? void 0 : r.every(function(l) {
    var u = n.isTag(l) && n.getParent(l);
    return l === TW.PLACEHOLDER_ELEMENT || u && n.isTag(u);
  })), o = 0, a = e12; o < a.length; o++) {
    var s = a[o];
    if (!(s.length > 0 && (0, ZP.isTraversal)(s[0]) && s[0].type !== Ts.SelectorType.Descendant))
      if (i && !s.some(SW))
        s.unshift(MEe);
      else
        continue;
    s.unshift(BEe);
  }
}
function CN(e12, t, r) {
  var n;
  e12.forEach(ZP.default), r = (n = t.context) !== null && n !== void 0 ? n : r;
  var i = Array.isArray(r), o = r && (Array.isArray(r) ? r : [r]);
  if (t.relativeSelector !== false)
    FEe(e12, t, o);
  else if (e12.some(function(l) {
    return l.length > 0 && (0, ZP.isTraversal)(l[0]);
  }))
    throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");
  var a = false, s = e12.map(function(l) {
    if (l.length >= 2) {
      var u = l[0], c = l[1];
      u.type !== Ts.SelectorType.Pseudo || u.name !== "scope" || (i && c.type === Ts.SelectorType.Descendant ? l[1] = LEe : (c.type === Ts.SelectorType.Adjacent || c.type === Ts.SelectorType.Sibling) && (a = true));
    }
    return $Ee(l, t, o);
  }).reduce(HEe, Ll.default.falseFunc);
  return s.shouldTestNextSiblings = a, s;
}
jl.compileToken = CN;
function $Ee(e12, t, r) {
  var n;
  return e12.reduce(function(i, o) {
    return i === Ll.default.falseFunc ? Ll.default.falseFunc : (0, REe.compileGeneralSelector)(i, o, t, r, CN);
  }, (n = t.rootFunc) !== null && n !== void 0 ? n : Ll.default.trueFunc);
}
function HEe(e12, t) {
  return t === Ll.default.falseFunc || e12 === Ll.default.trueFunc ? e12 : e12 === Ll.default.falseFunc || t === Ll.default.trueFunc ? t : function(n) {
    return e12(n) || t(n);
  };
}
(function(e12) {
  var t = De && De.__createBinding || (Object.create ? function(_, y, b, T) {
    T === void 0 && (T = b);
    var E = Object.getOwnPropertyDescriptor(y, b);
    (!E || ("get" in E ? !y.__esModule : E.writable || E.configurable)) && (E = {
      enumerable: true,
      get: function() {
        return y[b];
      }
    }), Object.defineProperty(_, T, E);
  } : function(_, y, b, T) {
    T === void 0 && (T = b), _[T] = y[b];
  }), r = De && De.__setModuleDefault || (Object.create ? function(_, y) {
    Object.defineProperty(_, "default", {
      enumerable: true,
      value: y
    });
  } : function(_, y) {
    _.default = y;
  }), n = De && De.__importStar || function(_) {
    if (_ && _.__esModule)
      return _;
    var y = {};
    if (_ != null)
      for (var b in _)
        b !== "default" && Object.prototype.hasOwnProperty.call(_, b) && t(y, _, b);
    return r(y, _), y;
  }, i = De && De.__importDefault || function(_) {
    return _ && _.__esModule ? _ : {
      default: _
    };
  };
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.aliases = e12.pseudos = e12.filters = e12.is = e12.selectOne = e12.selectAll = e12.prepareContext = e12._compileToken = e12._compileUnsafe = e12.compile = void 0;
  var o = n(Jo), a = i(nh), s = jl, l = j1, u = function(_, y) {
    return _ === y;
  }, c = {
    adapter: o,
    equals: u
  };
  function f(_) {
    var y, b, T, E, P = _ ?? c;
    return (y = P.adapter) !== null && y !== void 0 || (P.adapter = o), (b = P.equals) !== null && b !== void 0 || (P.equals = (E = (T = P.adapter) === null || T === void 0 ? void 0 : T.equals) !== null && E !== void 0 ? E : u), P;
  }
  function h(_) {
    return function(b, T, E) {
      var P = f(T);
      return _(b, P, E);
    };
  }
  e12.compile = h(s.compile), e12._compileUnsafe = h(s.compileUnsafe), e12._compileToken = h(s.compileToken);
  function d(_) {
    return function(b, T, E) {
      var P = f(E);
      typeof b != "function" && (b = (0, s.compileUnsafe)(b, P, T));
      var A = p(T, P.adapter, b.shouldTestNextSiblings);
      return _(b, A, P);
    };
  }
  function p(_, y, b) {
    return b === void 0 && (b = false), b && (_ = m(_, y)), Array.isArray(_) ? y.removeSubsets(_) : y.getChildren(_);
  }
  e12.prepareContext = p;
  function m(_, y) {
    for (var b = Array.isArray(_) ? _.slice(0) : [_], T = b.length, E = 0; E < T; E++) {
      var P = (0, l.getNextSiblings)(b[E], y);
      b.push.apply(b, P);
    }
    return b;
  }
  e12.selectAll = d(function(_, y, b) {
    return _ === a.default.falseFunc || !y || y.length === 0 ? [] : b.adapter.findAll(_, y);
  }), e12.selectOne = d(function(_, y, b) {
    return _ === a.default.falseFunc || !y || y.length === 0 ? null : b.adapter.findOne(_, y);
  });
  function g(_, y, b) {
    var T = f(b);
    return (typeof y == "function" ? y : (0, s.compile)(y, T))(_);
  }
  e12.is = g, e12.default = e12.selectAll;
  var v = PN;
  Object.defineProperty(e12, "filters", {
    enumerable: true,
    get: function() {
      return v.filters;
    }
  }), Object.defineProperty(e12, "pseudos", {
    enumerable: true,
    get: function() {
      return v.pseudos;
    }
  }), Object.defineProperty(e12, "aliases", {
    enumerable: true,
    get: function() {
      return v.aliases;
    }
  });
})(KP);
var Td = {};
var xN = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.getLimit = e12.isFilter = e12.filterNames = void 0, e12.filterNames = /* @__PURE__ */ new Set(["first", "last", "eq", "gt", "nth", "lt", "even", "odd"]);
  function t(n) {
    return n.type !== "pseudo" ? false : e12.filterNames.has(n.name) ? true : n.name === "not" && Array.isArray(n.data) ? n.data.some(function(i) {
      return i.some(t);
    }) : false;
  }
  e12.isFilter = t;
  function r(n, i, o) {
    var a = i != null ? parseInt(i, 10) : NaN;
    switch (n) {
      case "first":
        return 1;
      case "nth":
      case "eq":
        return isFinite(a) ? a >= 0 ? a + 1 : 1 / 0 : 0;
      case "lt":
        return isFinite(a) ? a >= 0 ? Math.min(a, o) : 1 / 0 : 0;
      case "gt":
        return isFinite(a) ? 1 / 0 : 0;
      case "odd":
        return 2 * o;
      case "even":
        return 2 * o - 1;
      case "last":
      case "not":
        return 1 / 0;
    }
  }
  e12.getLimit = r;
})(xN);
Object.defineProperty(Td, "__esModule", {
  value: true
});
Td.groupSelectors = Td.getDocumentRoot = void 0;
var UEe = xN;
function jEe(e12) {
  for (; e12.parent; )
    e12 = e12.parent;
  return e12;
}
Td.getDocumentRoot = jEe;
function GEe(e12) {
  for (var t = [], r = [], n = 0, i = e12; n < i.length; n++) {
    var o = i[n];
    o.some(UEe.isFilter) ? t.push(o) : r.push(o);
  }
  return [r, t];
}
Td.groupSelectors = GEe;
(function(e12) {
  var t = De && De.__assign || function() {
    return t = Object.assign || function(x) {
      for (var S, N = 1, B = arguments.length; N < B; N++) {
        S = arguments[N];
        for (var w in S)
          Object.prototype.hasOwnProperty.call(S, w) && (x[w] = S[w]);
      }
      return x;
    }, t.apply(this, arguments);
  }, r = De && De.__createBinding || (Object.create ? function(x, S, N, B) {
    B === void 0 && (B = N);
    var w = Object.getOwnPropertyDescriptor(S, N);
    (!w || ("get" in w ? !S.__esModule : w.writable || w.configurable)) && (w = {
      enumerable: true,
      get: function() {
        return S[N];
      }
    }), Object.defineProperty(x, B, w);
  } : function(x, S, N, B) {
    B === void 0 && (B = N), x[B] = S[N];
  }), n = De && De.__setModuleDefault || (Object.create ? function(x, S) {
    Object.defineProperty(x, "default", {
      enumerable: true,
      value: S
    });
  } : function(x, S) {
    x.default = S;
  }), i = De && De.__importStar || function(x) {
    if (x && x.__esModule)
      return x;
    var S = {};
    if (x != null)
      for (var N in x)
        N !== "default" && Object.prototype.hasOwnProperty.call(x, N) && r(S, x, N);
    return n(S, x), S;
  }, o = De && De.__spreadArray || function(x, S, N) {
    if (N || arguments.length === 2)
      for (var B = 0, w = S.length, R; B < w; B++)
        (R || !(B in S)) && (R || (R = Array.prototype.slice.call(S, 0, B)), R[B] = S[B]);
    return x.concat(R || Array.prototype.slice.call(S));
  };
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.select = e12.filter = e12.some = e12.is = e12.aliases = e12.pseudos = e12.filters = void 0;
  var a = ny, s = KP, l = i(Jo), u = i(nh), c = Td, f = xN, h = KP;
  Object.defineProperty(e12, "filters", {
    enumerable: true,
    get: function() {
      return h.filters;
    }
  }), Object.defineProperty(e12, "pseudos", {
    enumerable: true,
    get: function() {
      return h.pseudos;
    }
  }), Object.defineProperty(e12, "aliases", {
    enumerable: true,
    get: function() {
      return h.aliases;
    }
  });
  var d = {
    type: a.SelectorType.Universal,
    namespace: null
  }, p = {
    type: a.SelectorType.Pseudo,
    name: "scope",
    data: null
  };
  function m(x, S, N) {
    return N === void 0 && (N = {}), g([x], S, N);
  }
  e12.is = m;
  function g(x, S, N) {
    if (N === void 0 && (N = {}), typeof S == "function")
      return x.some(S);
    var B = (0, c.groupSelectors)((0, a.parse)(S)), w = B[0], R = B[1];
    return w.length > 0 && x.some((0, s._compileToken)(w, N)) || R.some(function(F) {
      return b(F, x, N).length > 0;
    });
  }
  e12.some = g;
  function v(x, S, N, B) {
    var w = typeof N == "string" ? parseInt(N, 10) : NaN;
    switch (x) {
      case "first":
      case "lt":
        return S;
      case "last":
        return S.length > 0 ? [S[S.length - 1]] : S;
      case "nth":
      case "eq":
        return isFinite(w) && Math.abs(w) < S.length ? [w < 0 ? S[S.length + w] : S[w]] : [];
      case "gt":
        return isFinite(w) ? S.slice(w + 1) : [];
      case "even":
        return S.filter(function(F, $) {
          return $ % 2 === 0;
        });
      case "odd":
        return S.filter(function(F, $) {
          return $ % 2 === 1;
        });
      case "not": {
        var R = new Set(y(N, S, B));
        return S.filter(function(F) {
          return !R.has(F);
        });
      }
    }
  }
  function _(x, S, N) {
    return N === void 0 && (N = {}), y((0, a.parse)(x), S, N);
  }
  e12.filter = _;
  function y(x, S, N) {
    if (S.length === 0)
      return [];
    var B = (0, c.groupSelectors)(x), w = B[0], R = B[1], F;
    if (w.length) {
      var $ = I(S, w, N);
      if (R.length === 0)
        return $;
      $.length && (F = new Set($));
    }
    for (var K = 0; K < R.length && (F == null ? void 0 : F.size) !== S.length; K++) {
      var se = R[K], J = F ? S.filter(function(ae) {
        return l.isTag(ae) && !F.has(ae);
      }) : S;
      if (J.length === 0)
        break;
      var $ = b(se, S, N);
      if ($.length)
        if (F)
          $.forEach(function(ae) {
            return F.add(ae);
          });
        else {
          if (K === R.length - 1)
            return $;
          F = new Set($);
        }
    }
    return typeof F < "u" ? F.size === S.length ? S : (
      // Filter elements to preserve order
      S.filter(function(me) {
        return F.has(me);
      })
    ) : [];
  }
  function b(x, S, N) {
    var B;
    if (x.some(a.isTraversal)) {
      var w = (B = N.root) !== null && B !== void 0 ? B : (0, c.getDocumentRoot)(S[0]), R = t(t({}, N), {
        context: S,
        relativeSelector: false
      });
      return x.push(p), E(w, x, R, true, S.length);
    }
    return E(S, x, N, false, S.length);
  }
  function T(x, S, N, B) {
    if (N === void 0 && (N = {}), B === void 0 && (B = 1 / 0), typeof x == "function")
      return A(S, x);
    var w = (0, c.groupSelectors)((0, a.parse)(x)), R = w[0], F = w[1], $ = F.map(function(K) {
      return E(S, K, N, true, B);
    });
    return R.length && $.push(P(S, R, N, B)), $.length === 0 ? [] : $.length === 1 ? $[0] : l.uniqueSort($.reduce(function(K, se) {
      return o(o([], K, true), se, true);
    }));
  }
  e12.select = T;
  function E(x, S, N, B, w) {
    var R = S.findIndex(f.isFilter), F = S.slice(0, R), $ = S[R], K = S.length - 1 === R ? w : 1 / 0, se = (0, f.getLimit)($.name, $.data, K);
    if (se === 0)
      return [];
    var J = F.length === 0 && !Array.isArray(x) ? l.getChildren(x).filter(l.isTag) : F.length === 0 ? (Array.isArray(x) ? x : [x]).filter(l.isTag) : B || F.some(a.isTraversal) ? P(x, [F], N, se) : I(x, [F], N), me = J.slice(0, se), ae = v($.name, me, $.data, N);
    if (ae.length === 0 || S.length === R + 1)
      return ae;
    var Y = S.slice(R + 1), Q = Y.some(a.isTraversal);
    if (Q) {
      if ((0, a.isTraversal)(Y[0])) {
        var le = Y[0].type;
        (le === a.SelectorType.Sibling || le === a.SelectorType.Adjacent) && (ae = (0, s.prepareContext)(ae, l, true)), Y.unshift(d);
      }
      N = t(t({}, N), {
        // Avoid absolutizing the selector
        relativeSelector: false,
        /*
         * Add a custom root func, to make sure traversals don't match elements
         * that aren't a part of the considered tree.
         */
        rootFunc: function(Se) {
          return ae.includes(Se);
        }
      });
    } else
      N.rootFunc && N.rootFunc !== u.trueFunc && (N = t(t({}, N), {
        rootFunc: u.trueFunc
      }));
    return Y.some(f.isFilter) ? E(ae, Y, N, false, w) : Q ? (
      // Query existing elements to resolve traversal.
      P(ae, [Y], N, w)
    ) : (
      // If we don't have any more traversals, simply filter elements.
      I(ae, [Y], N)
    );
  }
  function P(x, S, N, B) {
    var w = (0, s._compileToken)(S, N, x);
    return A(x, w, B);
  }
  function A(x, S, N) {
    N === void 0 && (N = 1 / 0);
    var B = (0, s.prepareContext)(x, l, S.shouldTestNextSiblings);
    return l.find(function(w) {
      return l.isTag(w) && S(w);
    }, B, true, N);
  }
  function I(x, S, N) {
    var B = (Array.isArray(x) ? x : [x]).filter(l.isTag);
    if (B.length === 0)
      return B;
    var w = (0, s._compileToken)(S, N);
    return w === u.trueFunc ? B : B.filter(w);
  }
})(uW);
var zEe = De && De.__createBinding || (Object.create ? function(e12, t, r, n) {
  n === void 0 && (n = r);
  var i = Object.getOwnPropertyDescriptor(t, r);
  (!i || ("get" in i ? !t.__esModule : i.writable || i.configurable)) && (i = {
    enumerable: true,
    get: function() {
      return t[r];
    }
  }), Object.defineProperty(e12, n, i);
} : function(e12, t, r, n) {
  n === void 0 && (n = r), e12[n] = t[r];
});
var VEe = De && De.__setModuleDefault || (Object.create ? function(e12, t) {
  Object.defineProperty(e12, "default", {
    enumerable: true,
    value: t
  });
} : function(e12, t) {
  e12.default = t;
});
var XEe = De && De.__importStar || function(e12) {
  if (e12 && e12.__esModule)
    return e12;
  var t = {};
  if (e12 != null)
    for (var r in e12)
      r !== "default" && Object.prototype.hasOwnProperty.call(e12, r) && zEe(t, e12, r);
  return VEe(t, e12), t;
};
var QP = De && De.__spreadArray || function(e12, t, r) {
  if (r || arguments.length === 2)
    for (var n = 0, i = t.length, o; n < i; n++)
      (o || !(n in t)) && (o || (o = Array.prototype.slice.call(t, 0, n)), o[n] = t[n]);
  return e12.concat(o || Array.prototype.slice.call(t));
};
Object.defineProperty(it, "__esModule", {
  value: true
});
it.addBack = it.add = it.end = it.slice = it.index = it.toArray = it.get = it.eq = it.last = it.first = it.has = it.not = it.is = it.filterArray = it.filter = it.map = it.each = it.contents = it.children = it.siblings = it.prevUntil = it.prevAll = it.prev = it.nextUntil = it.nextAll = it.next = it.closest = it.parentsUntil = it.parents = it.parent = it.find = void 0;
var G1 = ni;
var fp = XEe(uW);
var na = lc;
var WEe = tn;
var za = Jo;
var YEe = /^\s*[~+]/;
function qEe(e12) {
  var t;
  if (!e12)
    return this._make([]);
  var r = this.toArray();
  if (typeof e12 != "string") {
    var n = (0, na.isCheerio)(e12) ? e12.toArray() : [e12];
    return this._make(n.filter(function(a) {
      return r.some(function(s) {
        return (0, WEe.contains)(s, a);
      });
    }));
  }
  var i = YEe.test(e12) ? r : this.children().toArray(), o = {
    context: r,
    root: (t = this._root) === null || t === void 0 ? void 0 : t[0],
    // Pass options that are recognized by `cheerio-select`
    xmlMode: this.options.xmlMode,
    lowerCaseTags: this.options.lowerCaseTags,
    lowerCaseAttributeNames: this.options.lowerCaseAttributeNames,
    pseudos: this.options.pseudos,
    quirksMode: this.options.quirksMode
  };
  return this._make(fp.select(e12, i, o));
}
it.find = qEe;
function kN(e12) {
  return function(t) {
    for (var r = [], n = 1; n < arguments.length; n++)
      r[n - 1] = arguments[n];
    return function(i) {
      var o, a = e12(t, this);
      return i && (a = NN(a, i, this.options.xmlMode, (o = this._root) === null || o === void 0 ? void 0 : o[0])), this._make(
        // Post processing is only necessary if there is more than one element.
        this.length > 1 && a.length > 1 ? r.reduce(function(s, l) {
          return l(s);
        }, a) : a
      );
    };
  };
}
var iy = kN(function(e12, t) {
  for (var r, n = [], i = 0; i < t.length; i++) {
    var o = e12(t[i]);
    n.push(o);
  }
  return (r = new Array()).concat.apply(r, n);
});
var DN = kN(function(e12, t) {
  for (var r = [], n = 0; n < t.length; n++) {
    var i = e12(t[n]);
    i !== null && r.push(i);
  }
  return r;
});
function RN(e12) {
  for (var t = [], r = 1; r < arguments.length; r++)
    t[r - 1] = arguments[r];
  var n = null, i = kN(function(o, a) {
    var s = [];
    return (0, na.domEach)(a, function(l) {
      for (var u; (u = o(l)) && !(n == null ? void 0 : n(u, s.length)); l = u)
        s.push(u);
    }), s;
  }).apply(void 0, QP([e12], t, false));
  return function(o, a) {
    var s = this;
    n = typeof o == "string" ? function(u) {
      return fp.is(u, o, s.options);
    } : o ? oy(o) : null;
    var l = i.call(this, a);
    return n = null, l;
  };
}
function dp(e12) {
  return Array.from(new Set(e12));
}
it.parent = DN(function(e12) {
  var t = e12.parent;
  return t && !(0, G1.isDocument)(t) ? t : null;
}, dp);
it.parents = iy(function(e12) {
  for (var t = []; e12.parent && !(0, G1.isDocument)(e12.parent); )
    t.push(e12.parent), e12 = e12.parent;
  return t;
}, za.uniqueSort, function(e12) {
  return e12.reverse();
});
it.parentsUntil = RN(function(e12) {
  var t = e12.parent;
  return t && !(0, G1.isDocument)(t) ? t : null;
}, za.uniqueSort, function(e12) {
  return e12.reverse();
});
function KEe(e12) {
  var t, r = [];
  if (!e12)
    return this._make(r);
  var n = {
    xmlMode: this.options.xmlMode,
    root: (t = this._root) === null || t === void 0 ? void 0 : t[0]
  }, i = typeof e12 == "string" ? function(o) {
    return fp.is(o, e12, n);
  } : oy(e12);
  return (0, na.domEach)(this, function(o) {
    for (; o && (0, na.isTag)(o); ) {
      if (i(o, 0)) {
        r.includes(o) || r.push(o);
        break;
      }
      o = o.parent;
    }
  }), this._make(r);
}
it.closest = KEe;
it.next = DN(function(e12) {
  return (0, za.nextElementSibling)(e12);
});
it.nextAll = iy(function(e12) {
  for (var t = []; e12.next; )
    e12 = e12.next, (0, na.isTag)(e12) && t.push(e12);
  return t;
}, dp);
it.nextUntil = RN(function(e12) {
  return (0, za.nextElementSibling)(e12);
}, dp);
it.prev = DN(function(e12) {
  return (0, za.prevElementSibling)(e12);
});
it.prevAll = iy(function(e12) {
  for (var t = []; e12.prev; )
    e12 = e12.prev, (0, na.isTag)(e12) && t.push(e12);
  return t;
}, dp);
it.prevUntil = RN(function(e12) {
  return (0, za.prevElementSibling)(e12);
}, dp);
it.siblings = iy(function(e12) {
  return (0, za.getSiblings)(e12).filter(function(t) {
    return (0, na.isTag)(t) && t !== e12;
  });
}, za.uniqueSort);
it.children = iy(function(e12) {
  return (0, za.getChildren)(e12).filter(na.isTag);
}, dp);
function ZEe() {
  var e12 = this.toArray().reduce(function(t, r) {
    return (0, G1.hasChildren)(r) ? t.concat(r.children) : t;
  }, []);
  return this._make(e12);
}
it.contents = ZEe;
function QEe(e12) {
  for (var t = 0, r = this.length; t < r && e12.call(this[t], t, this[t]) !== false; )
    ++t;
  return this;
}
it.each = QEe;
function JEe(e12) {
  for (var t = [], r = 0; r < this.length; r++) {
    var n = this[r], i = e12.call(n, r, n);
    i != null && (t = t.concat(i));
  }
  return this._make(t);
}
it.map = JEe;
function oy(e12) {
  return typeof e12 == "function" ? function(t, r) {
    return e12.call(t, r, t);
  } : (0, na.isCheerio)(e12) ? function(t) {
    return Array.prototype.includes.call(e12, t);
  } : function(t) {
    return e12 === t;
  };
}
function e1e(e12) {
  var t;
  return this._make(NN(this.toArray(), e12, this.options.xmlMode, (t = this._root) === null || t === void 0 ? void 0 : t[0]));
}
it.filter = e1e;
function NN(e12, t, r, n) {
  return typeof t == "string" ? fp.filter(t, e12, {
    xmlMode: r,
    root: n
  }) : e12.filter(oy(t));
}
it.filterArray = NN;
function t1e(e12) {
  var t = this.toArray();
  return typeof e12 == "string" ? fp.some(t.filter(na.isTag), e12, this.options) : e12 ? t.some(oy(e12)) : false;
}
it.is = t1e;
function r1e(e12) {
  var t = this.toArray();
  if (typeof e12 == "string") {
    var r = new Set(fp.filter(e12, t, this.options));
    t = t.filter(function(i) {
      return !r.has(i);
    });
  } else {
    var n = oy(e12);
    t = t.filter(function(i, o) {
      return !n(i, o);
    });
  }
  return this._make(t);
}
it.not = r1e;
function n1e(e12) {
  var t = this;
  return this.filter(typeof e12 == "string" ? (
    // Using the `:has` selector here short-circuits searches.
    ":has(".concat(e12, ")")
  ) : function(r, n) {
    return t._make(n).find(e12).length > 0;
  });
}
it.has = n1e;
function i1e() {
  return this.length > 1 ? this._make(this[0]) : this;
}
it.first = i1e;
function o1e() {
  return this.length > 0 ? this._make(this[this.length - 1]) : this;
}
it.last = o1e;
function a1e(e12) {
  var t;
  return e12 = +e12, e12 === 0 && this.length <= 1 ? this : (e12 < 0 && (e12 = this.length + e12), this._make((t = this[e12]) !== null && t !== void 0 ? t : []));
}
it.eq = a1e;
function s1e(e12) {
  return e12 == null ? this.toArray() : this[e12 < 0 ? this.length + e12 : e12];
}
it.get = s1e;
function l1e() {
  return Array.prototype.slice.call(this);
}
it.toArray = l1e;
function c1e(e12) {
  var t, r;
  return e12 == null ? (t = this.parent().children(), r = this[0]) : typeof e12 == "string" ? (t = this._make(e12), r = this[0]) : (t = this, r = (0, na.isCheerio)(e12) ? e12[0] : e12), Array.prototype.indexOf.call(t, r);
}
it.index = c1e;
function u1e(e12, t) {
  return this._make(Array.prototype.slice.call(this, e12, t));
}
it.slice = u1e;
function h1e() {
  var e12;
  return (e12 = this.prevObject) !== null && e12 !== void 0 ? e12 : this._make([]);
}
it.end = h1e;
function f1e(e12, t) {
  var r = this._make(e12, t), n = (0, za.uniqueSort)(QP(QP([], this.get(), true), r.get(), true));
  return this._make(n);
}
it.add = f1e;
function d1e(e12) {
  return this.prevObject ? this.add(e12 ? this.prevObject.filter(e12) : this.prevObject) : this;
}
it.addBack = d1e;
var kt = {};
var Eu = {};
Object.defineProperty(Eu, "__esModule", {
  value: true
});
Eu.update = Eu.getParse = void 0;
var p1e = Jo;
var FH = ni;
function m1e(e12) {
  return function(r, n, i, o) {
    if (typeof Buffer < "u" && Buffer.isBuffer(r) && (r = r.toString()), typeof r == "string")
      return e12(r, n, i, o);
    var a = r;
    if (!Array.isArray(a) && (0, FH.isDocument)(a))
      return a;
    var s = new FH.Document([]);
    return wW(a, s), s;
  };
}
Eu.getParse = m1e;
function wW(e12, t) {
  var r = Array.isArray(e12) ? e12 : [e12];
  t ? t.children = r : t = null;
  for (var n = 0; n < r.length; n++) {
    var i = r[n];
    i.parent && i.parent.children !== r && (0, p1e.removeElement)(i), t ? (i.prev = r[n - 1] || null, i.next = r[n + 1] || null) : i.prev = i.next = null, i.parent = t;
  }
  return t;
}
Eu.update = wW;
var g1e = De && De.__spreadArray || function(e12, t, r) {
  if (r || arguments.length === 2)
    for (var n = 0, i = t.length, o; n < i; n++)
      (o || !(n in t)) && (o || (o = Array.prototype.slice.call(t, 0, n)), o[n] = t[n]);
  return e12.concat(o || Array.prototype.slice.call(t));
};
Object.defineProperty(kt, "__esModule", {
  value: true
});
kt.clone = kt.text = kt.toString = kt.html = kt.empty = kt.replaceWith = kt.remove = kt.insertBefore = kt.before = kt.insertAfter = kt.after = kt.wrapAll = kt.unwrap = kt.wrapInner = kt.wrap = kt.prepend = kt.append = kt.prependTo = kt.appendTo = kt._makeDomArray = void 0;
var Va = ni;
var Ed = Eu;
var $H = tn;
var vn = lc;
var v1e = Jo;
function y1e(e12, t) {
  var r = this;
  return e12 == null ? [] : (0, vn.isCheerio)(e12) ? t ? (0, vn.cloneDom)(e12.get()) : e12.get() : Array.isArray(e12) ? e12.reduce(function(n, i) {
    return n.concat(r._makeDomArray(i, t));
  }, []) : typeof e12 == "string" ? this._parse(e12, this.options, false, null).children : t ? (0, vn.cloneDom)([e12]) : [e12];
}
kt._makeDomArray = y1e;
function AW(e12) {
  return function() {
    for (var t = this, r = [], n = 0; n < arguments.length; n++)
      r[n] = arguments[n];
    var i = this.length - 1;
    return (0, vn.domEach)(this, function(o, a) {
      if ((0, Va.hasChildren)(o)) {
        var s = typeof r[0] == "function" ? r[0].call(o, a, t._render(o.children)) : r, l = t._makeDomArray(s, a < i);
        e12(l, o.children, o);
      }
    });
  };
}
function cc(e12, t, r, n, i) {
  for (var o, a, s = g1e([t, r], n, true), l = t === 0 ? null : e12[t - 1], u = t + r >= e12.length ? null : e12[t + r], c = 0; c < n.length; ++c) {
    var f = n[c], h = f.parent;
    if (h) {
      var d = h.children, p = d.indexOf(f);
      p > -1 && (h.children.splice(p, 1), i === h && t > p && s[0]--);
    }
    f.parent = i, f.prev && (f.prev.next = (o = f.next) !== null && o !== void 0 ? o : null), f.next && (f.next.prev = (a = f.prev) !== null && a !== void 0 ? a : null), f.prev = c === 0 ? l : n[c - 1], f.next = c === n.length - 1 ? u : n[c + 1];
  }
  return l && (l.next = n[0]), u && (u.prev = n[n.length - 1]), e12.splice.apply(e12, s);
}
function _1e(e12) {
  var t = (0, vn.isCheerio)(e12) ? e12 : this._make(e12);
  return t.append(this), this;
}
kt.appendTo = _1e;
function b1e(e12) {
  var t = (0, vn.isCheerio)(e12) ? e12 : this._make(e12);
  return t.prepend(this), this;
}
kt.prependTo = b1e;
kt.append = AW(function(e12, t, r) {
  cc(t, t.length, 0, e12, r);
});
kt.prepend = AW(function(e12, t, r) {
  cc(t, 0, 0, e12, r);
});
function OW(e12) {
  return function(t) {
    for (var r = this.length - 1, n = this.parents().last(), i = 0; i < this.length; i++) {
      var o = this[i], a = typeof t == "function" ? t.call(o, i, o) : typeof t == "string" && !(0, vn.isHtml)(t) ? n.find(t).clone() : t, s = this._makeDomArray(a, i < r)[0];
      if (!(!s || !(0, Va.hasChildren)(s))) {
        for (var l = s, u = 0; u < l.children.length; ) {
          var c = l.children[u];
          (0, vn.isTag)(c) ? (l = c, u = 0) : u++;
        }
        e12(o, l, [s]);
      }
    }
    return this;
  };
}
kt.wrap = OW(function(e12, t, r) {
  var n = e12.parent;
  if (n) {
    var i = n.children, o = i.indexOf(e12);
    (0, Ed.update)([e12], t), cc(i, o, 0, r, n);
  }
});
kt.wrapInner = OW(function(e12, t, r) {
  (0, Va.hasChildren)(e12) && ((0, Ed.update)(e12.children, t), (0, Ed.update)(r, e12));
});
function T1e(e12) {
  var t = this;
  return this.parent(e12).not("body").each(function(r, n) {
    t._make(n).replaceWith(n.children);
  }), this;
}
kt.unwrap = T1e;
function E1e(e12) {
  var t = this[0];
  if (t) {
    for (var r = this._make(typeof e12 == "function" ? e12.call(t, 0, t) : e12).insertBefore(t), n = void 0, i = 0; i < r.length; i++)
      r[i].type === "tag" && (n = r[i]);
    for (var o = 0; n && o < n.children.length; ) {
      var a = n.children[o];
      a.type === "tag" ? (n = a, o = 0) : o++;
    }
    n && this._make(n).append(this);
  }
  return this;
}
kt.wrapAll = E1e;
function S1e() {
  for (var e12 = this, t = [], r = 0; r < arguments.length; r++)
    t[r] = arguments[r];
  var n = this.length - 1;
  return (0, vn.domEach)(this, function(i, o) {
    var a = i.parent;
    if (!(!(0, Va.hasChildren)(i) || !a)) {
      var s = a.children, l = s.indexOf(i);
      if (!(l < 0)) {
        var u = typeof t[0] == "function" ? t[0].call(i, o, e12._render(i.children)) : t, c = e12._makeDomArray(u, o < n);
        cc(s, l + 1, 0, c, a);
      }
    }
  });
}
kt.after = S1e;
function w1e(e12) {
  var t = this;
  typeof e12 == "string" && (e12 = this._make(e12)), this.remove();
  var r = [];
  return this._makeDomArray(e12).forEach(function(n) {
    var i = t.clone().toArray(), o = n.parent;
    if (o) {
      var a = o.children, s = a.indexOf(n);
      s < 0 || (cc(a, s + 1, 0, i, o), r.push.apply(r, i));
    }
  }), this._make(r);
}
kt.insertAfter = w1e;
function A1e() {
  for (var e12 = this, t = [], r = 0; r < arguments.length; r++)
    t[r] = arguments[r];
  var n = this.length - 1;
  return (0, vn.domEach)(this, function(i, o) {
    var a = i.parent;
    if (!(!(0, Va.hasChildren)(i) || !a)) {
      var s = a.children, l = s.indexOf(i);
      if (!(l < 0)) {
        var u = typeof t[0] == "function" ? t[0].call(i, o, e12._render(i.children)) : t, c = e12._makeDomArray(u, o < n);
        cc(s, l, 0, c, a);
      }
    }
  });
}
kt.before = A1e;
function O1e(e12) {
  var t = this, r = this._make(e12);
  this.remove();
  var n = [];
  return (0, vn.domEach)(r, function(i) {
    var o = t.clone().toArray(), a = i.parent;
    if (a) {
      var s = a.children, l = s.indexOf(i);
      l < 0 || (cc(s, l, 0, o, a), n.push.apply(n, o));
    }
  }), this._make(n);
}
kt.insertBefore = O1e;
function I1e(e12) {
  var t = e12 ? this.filter(e12) : this;
  return (0, vn.domEach)(t, function(r) {
    (0, v1e.removeElement)(r), r.prev = r.next = r.parent = null;
  }), this;
}
kt.remove = I1e;
function P1e(e12) {
  var t = this;
  return (0, vn.domEach)(this, function(r, n) {
    var i = r.parent;
    if (i) {
      var o = i.children, a = typeof e12 == "function" ? e12.call(r, n, r) : e12, s = t._makeDomArray(a);
      (0, Ed.update)(s, null);
      var l = o.indexOf(r);
      cc(o, l, 1, s, i), s.includes(r) || (r.parent = r.prev = r.next = null);
    }
  });
}
kt.replaceWith = P1e;
function C1e() {
  return (0, vn.domEach)(this, function(e12) {
    (0, Va.hasChildren)(e12) && (e12.children.forEach(function(t) {
      t.next = t.prev = t.parent = null;
    }), e12.children.length = 0);
  });
}
kt.empty = C1e;
function x1e(e12) {
  var t = this;
  if (e12 === void 0) {
    var r = this[0];
    return !r || !(0, Va.hasChildren)(r) ? null : this._render(r.children);
  }
  return (0, vn.domEach)(this, function(n) {
    if ((0, Va.hasChildren)(n)) {
      n.children.forEach(function(o) {
        o.next = o.prev = o.parent = null;
      });
      var i = (0, vn.isCheerio)(e12) ? e12.toArray() : t._parse("".concat(e12), t.options, false, n).children;
      (0, Ed.update)(i, n);
    }
  });
}
kt.html = x1e;
function k1e() {
  return this._render(this);
}
kt.toString = k1e;
function D1e(e12) {
  var t = this;
  return e12 === void 0 ? (0, $H.text)(this) : typeof e12 == "function" ? (0, vn.domEach)(this, function(r, n) {
    return t._make(r).text(e12.call(r, n, (0, $H.text)([r])));
  }) : (0, vn.domEach)(this, function(r) {
    if ((0, Va.hasChildren)(r)) {
      r.children.forEach(function(i) {
        i.next = i.prev = i.parent = null;
      });
      var n = new Va.Text("".concat(e12));
      (0, Ed.update)(n, r);
    }
  });
}
kt.text = D1e;
function R1e() {
  return this._make((0, vn.cloneDom)(this.get()));
}
kt.clone = R1e;
var z1 = {};
Object.defineProperty(z1, "__esModule", {
  value: true
});
z1.css = void 0;
var JP = lc;
function N1e(e12, t) {
  if (e12 != null && t != null || // When `prop` is a "plain" object
  typeof e12 == "object" && !Array.isArray(e12))
    return (0, JP.domEach)(this, function(r, n) {
      (0, JP.isTag)(r) && IW(r, e12, t, n);
    });
  if (this.length !== 0)
    return PW(this[0], e12);
}
z1.css = N1e;
function IW(e12, t, r, n) {
  if (typeof t == "string") {
    var i = PW(e12), o = typeof r == "function" ? r.call(e12, n, i[t]) : r;
    o === "" ? delete i[t] : o != null && (i[t] = o), e12.attribs.style = M1e(i);
  } else
    typeof t == "object" && Object.keys(t).forEach(function(a, s) {
      IW(e12, a, t[a], s);
    });
}
function PW(e12, t) {
  if (!(!e12 || !(0, JP.isTag)(e12))) {
    var r = L1e(e12.attribs.style);
    if (typeof t == "string")
      return r[t];
    if (Array.isArray(t)) {
      var n = {};
      return t.forEach(function(i) {
        r[i] != null && (n[i] = r[i]);
      }), n;
    }
    return r;
  }
}
function M1e(e12) {
  return Object.keys(e12).reduce(function(t, r) {
    return "".concat(t).concat(t ? " " : "").concat(r, ": ").concat(e12[r], ";");
  }, "");
}
function L1e(e12) {
  if (e12 = (e12 || "").trim(), !e12)
    return {};
  for (var t = {}, r, n = 0, i = e12.split(";"); n < i.length; n++) {
    var o = i[n], a = o.indexOf(":");
    if (a < 1 || a === o.length - 1) {
      var s = o.trimEnd();
      s.length > 0 && r !== void 0 && (t[r] += ";".concat(s));
    } else
      r = o.slice(0, a).trim(), t[r] = o.slice(a + 1).trim();
  }
  return t;
}
var Sd = {};
Object.defineProperty(Sd, "__esModule", {
  value: true
});
Sd.serializeArray = Sd.serialize = void 0;
var B1e = lc;
var HH = "input,select,textarea,keygen";
var F1e = /%20/g;
var UH = /\r?\n/g;
function $1e() {
  var e12 = this.serializeArray(), t = e12.map(function(r) {
    return "".concat(encodeURIComponent(r.name), "=").concat(encodeURIComponent(r.value));
  });
  return t.join("&").replace(F1e, "+");
}
Sd.serialize = $1e;
function H1e() {
  var e12 = this;
  return this.map(function(t, r) {
    var n = e12._make(r);
    return (0, B1e.isTag)(r) && r.name === "form" ? n.find(HH).toArray() : n.filter(HH).toArray();
  }).filter(
    // Verify elements have a name (`attr.name`) and are not disabled (`:enabled`)
    '[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))'
    // Convert each of the elements to its value(s)
  ).map(function(t, r) {
    var n, i = e12._make(r), o = i.attr("name"), a = (n = i.val()) !== null && n !== void 0 ? n : "";
    return Array.isArray(a) ? a.map(function(s) {
      return {
        name: o,
        value: s.replace(UH, `\r
`)
      };
    }) : {
      name: o,
      value: a.replace(UH, `\r
`)
    };
  }).toArray();
}
Sd.serializeArray = H1e;
var U1e = De && De.__createBinding || (Object.create ? function(e12, t, r, n) {
  n === void 0 && (n = r);
  var i = Object.getOwnPropertyDescriptor(t, r);
  (!i || ("get" in i ? !t.__esModule : i.writable || i.configurable)) && (i = {
    enumerable: true,
    get: function() {
      return t[r];
    }
  }), Object.defineProperty(e12, n, i);
} : function(e12, t, r, n) {
  n === void 0 && (n = r), e12[n] = t[r];
});
var j1e = De && De.__setModuleDefault || (Object.create ? function(e12, t) {
  Object.defineProperty(e12, "default", {
    enumerable: true,
    value: t
  });
} : function(e12, t) {
  e12.default = t;
});
var ay = De && De.__importStar || function(e12) {
  if (e12 && e12.__esModule)
    return e12;
  var t = {};
  if (e12 != null)
    for (var r in e12)
      r !== "default" && Object.prototype.hasOwnProperty.call(e12, r) && U1e(t, e12, r);
  return j1e(t, e12), t;
};
Object.defineProperty(B1, "__esModule", {
  value: true
});
B1.Cheerio = void 0;
var G1e = ay(nn);
var z1e = ay(it);
var V1e = ay(kt);
var X1e = ay(z1);
var W1e = ay(Sd);
var sy = (
  /** @class */
  /* @__PURE__ */ function() {
    function e12(t, r, n) {
      if (this.length = 0, this.options = n, this._root = r, t) {
        for (var i = 0; i < t.length; i++)
          this[i] = t[i];
        this.length = t.length;
      }
    }
    return e12;
  }()
);
B1.Cheerio = sy;
sy.prototype.cheerio = "[cheerio object]";
sy.prototype.splice = Array.prototype.splice;
sy.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];
Object.assign(sy.prototype, G1e, z1e, V1e, X1e, W1e);
var Y1e = De && De.__extends || /* @__PURE__ */ function() {
  var e12 = function(t, r) {
    return e12 = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i)
        Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, e12(t, r);
  };
  return function(t, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    e12(t, r);
    function n() {
      this.constructor = t;
    }
    t.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}();
var vf = De && De.__assign || function() {
  return vf = Object.assign || function(e12) {
    for (var t, r = 1, n = arguments.length; r < n; r++) {
      t = arguments[r];
      for (var i in t)
        Object.prototype.hasOwnProperty.call(t, i) && (e12[i] = t[i]);
    }
    return e12;
  }, vf.apply(this, arguments);
};
var q1e = De && De.__createBinding || (Object.create ? function(e12, t, r, n) {
  n === void 0 && (n = r);
  var i = Object.getOwnPropertyDescriptor(t, r);
  (!i || ("get" in i ? !t.__esModule : i.writable || i.configurable)) && (i = {
    enumerable: true,
    get: function() {
      return t[r];
    }
  }), Object.defineProperty(e12, n, i);
} : function(e12, t, r, n) {
  n === void 0 && (n = r), e12[n] = t[r];
});
var K1e = De && De.__setModuleDefault || (Object.create ? function(e12, t) {
  Object.defineProperty(e12, "default", {
    enumerable: true,
    value: t
  });
} : function(e12, t) {
  e12.default = t;
});
var CW = De && De.__importStar || function(e12) {
  if (e12 && e12.__esModule)
    return e12;
  var t = {};
  if (e12 != null)
    for (var r in e12)
      r !== "default" && Object.prototype.hasOwnProperty.call(e12, r) && q1e(t, e12, r);
  return K1e(t, e12), t;
};
Object.defineProperty(x1, "__esModule", {
  value: true
});
x1.getLoad = void 0;
var eO = CW(lp);
var Z1e = CW(tn);
var Q1e = B1;
var em = lc;
function J1e(e12, t) {
  return function r(n, i, o) {
    if (o === void 0 && (o = true), n == null)
      throw new Error("cheerio.load() expects a string");
    var a = vf(vf({}, eO.default), (0, eO.flatten)(i)), s = e12(n, a, o, null), l = (
      /** @class */
      function(c) {
        Y1e(f, c);
        function f() {
          return c !== null && c.apply(this, arguments) || this;
        }
        return f.prototype._make = function(h, d) {
          var p = u(h, d);
          return p.prevObject = this, p;
        }, f.prototype._parse = function(h, d, p, m) {
          return e12(h, d, p, m);
        }, f.prototype._render = function(h) {
          return t(h, this.options);
        }, f;
      }(Q1e.Cheerio)
    );
    function u(c, f, h, d) {
      if (h === void 0 && (h = s), c && (0, em.isCheerio)(c))
        return c;
      var p = vf(vf({}, a), (0, eO.flatten)(d)), m = typeof h == "string" ? [e12(h, p, false, null)] : "length" in h ? h : [h], g = (0, em.isCheerio)(m) ? m : new l(m, null, p);
      if (g._root = g, !c)
        return new l(void 0, g, p);
      var v = typeof c == "string" && (0, em.isHtml)(c) ? (
        // $(<html>)
        e12(c, p, false, null).children
      ) : eSe(c) ? (
        // $(dom)
        [c]
      ) : Array.isArray(c) ? (
        // $([dom])
        c
      ) : void 0, _ = new l(v, g, p);
      if (v)
        return _;
      if (typeof c != "string")
        throw new Error("Unexpected type of selector");
      var y = c, b = f ? typeof f == "string" ? (0, em.isHtml)(f) ? (
        // $('li', '<ul>...</ul>')
        new l([e12(f, p, false, null)], g, p)
      ) : (
        // $('li', 'ul')
        (y = "".concat(f, " ").concat(y), g)
      ) : (0, em.isCheerio)(f) ? (
        // $('li', $)
        f
      ) : (
        // $('li', node), $('li', [nodes])
        new l(Array.isArray(f) ? f : [f], g, p)
      ) : (
        // If we don't have a context, maybe we have a root, from loading
        g
      );
      return b ? b.find(y) : _;
    }
    return Object.assign(u, Z1e, {
      load: r,
      // `_root` and `_options` are used in static methods.
      _root: s,
      _options: a,
      // Add `fn` for plugins
      fn: l.prototype,
      // Add the prototype here to maintain `instanceof` behavior.
      prototype: l.prototype
    }), u;
  };
}
x1.getLoad = J1e;
function eSe(e12) {
  return !!e12.name || e12.type === "root" || e12.type === "text" || e12.type === "comment";
}
var wd = {};
var xW = {};
var cv = {};
var Su = {};
var V1 = {};
var X1 = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.isUndefinedCodePoint = e12.isControlCodePoint = e12.getSurrogatePairCodePoint = e12.isSurrogatePair = e12.isSurrogate = e12.SEQUENCES = e12.CODE_POINTS = e12.REPLACEMENT_CHARACTER = void 0;
  const t = /* @__PURE__ */ new Set([65534, 65535, 131070, 131071, 196606, 196607, 262142, 262143, 327678, 327679, 393214, 393215, 458750, 458751, 524286, 524287, 589822, 589823, 655358, 655359, 720894, 720895, 786430, 786431, 851966, 851967, 917502, 917503, 983038, 983039, 1048574, 1048575, 1114110, 1114111]);
  e12.REPLACEMENT_CHARACTER = "�", function(s) {
    s[s.EOF = -1] = "EOF", s[s.NULL = 0] = "NULL", s[s.TABULATION = 9] = "TABULATION", s[s.CARRIAGE_RETURN = 13] = "CARRIAGE_RETURN", s[s.LINE_FEED = 10] = "LINE_FEED", s[s.FORM_FEED = 12] = "FORM_FEED", s[s.SPACE = 32] = "SPACE", s[s.EXCLAMATION_MARK = 33] = "EXCLAMATION_MARK", s[s.QUOTATION_MARK = 34] = "QUOTATION_MARK", s[s.NUMBER_SIGN = 35] = "NUMBER_SIGN", s[s.AMPERSAND = 38] = "AMPERSAND", s[s.APOSTROPHE = 39] = "APOSTROPHE", s[s.HYPHEN_MINUS = 45] = "HYPHEN_MINUS", s[s.SOLIDUS = 47] = "SOLIDUS", s[s.DIGIT_0 = 48] = "DIGIT_0", s[s.DIGIT_9 = 57] = "DIGIT_9", s[s.SEMICOLON = 59] = "SEMICOLON", s[s.LESS_THAN_SIGN = 60] = "LESS_THAN_SIGN", s[s.EQUALS_SIGN = 61] = "EQUALS_SIGN", s[s.GREATER_THAN_SIGN = 62] = "GREATER_THAN_SIGN", s[s.QUESTION_MARK = 63] = "QUESTION_MARK", s[s.LATIN_CAPITAL_A = 65] = "LATIN_CAPITAL_A", s[s.LATIN_CAPITAL_F = 70] = "LATIN_CAPITAL_F", s[s.LATIN_CAPITAL_X = 88] = "LATIN_CAPITAL_X", s[s.LATIN_CAPITAL_Z = 90] = "LATIN_CAPITAL_Z", s[s.RIGHT_SQUARE_BRACKET = 93] = "RIGHT_SQUARE_BRACKET", s[s.GRAVE_ACCENT = 96] = "GRAVE_ACCENT", s[s.LATIN_SMALL_A = 97] = "LATIN_SMALL_A", s[s.LATIN_SMALL_F = 102] = "LATIN_SMALL_F", s[s.LATIN_SMALL_X = 120] = "LATIN_SMALL_X", s[s.LATIN_SMALL_Z = 122] = "LATIN_SMALL_Z", s[s.REPLACEMENT_CHARACTER = 65533] = "REPLACEMENT_CHARACTER";
  }(e12.CODE_POINTS || (e12.CODE_POINTS = {})), e12.SEQUENCES = {
    DASH_DASH: "--",
    CDATA_START: "[CDATA[",
    DOCTYPE: "doctype",
    SCRIPT: "script",
    PUBLIC: "public",
    SYSTEM: "system"
  };
  function r(s) {
    return s >= 55296 && s <= 57343;
  }
  e12.isSurrogate = r;
  function n(s) {
    return s >= 56320 && s <= 57343;
  }
  e12.isSurrogatePair = n;
  function i(s, l) {
    return (s - 55296) * 1024 + 9216 + l;
  }
  e12.getSurrogatePairCodePoint = i;
  function o(s) {
    return s !== 32 && s !== 10 && s !== 13 && s !== 9 && s !== 12 && s >= 1 && s <= 31 || s >= 127 && s <= 159;
  }
  e12.isControlCodePoint = o;
  function a(s) {
    return s >= 64976 && s <= 65007 || t.has(s);
  }
  e12.isUndefinedCodePoint = a;
})(X1);
var ly = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.ERR = void 0, function(t) {
    t.controlCharacterInInputStream = "control-character-in-input-stream", t.noncharacterInInputStream = "noncharacter-in-input-stream", t.surrogateInInputStream = "surrogate-in-input-stream", t.nonVoidHtmlElementStartTagWithTrailingSolidus = "non-void-html-element-start-tag-with-trailing-solidus", t.endTagWithAttributes = "end-tag-with-attributes", t.endTagWithTrailingSolidus = "end-tag-with-trailing-solidus", t.unexpectedSolidusInTag = "unexpected-solidus-in-tag", t.unexpectedNullCharacter = "unexpected-null-character", t.unexpectedQuestionMarkInsteadOfTagName = "unexpected-question-mark-instead-of-tag-name", t.invalidFirstCharacterOfTagName = "invalid-first-character-of-tag-name", t.unexpectedEqualsSignBeforeAttributeName = "unexpected-equals-sign-before-attribute-name", t.missingEndTagName = "missing-end-tag-name", t.unexpectedCharacterInAttributeName = "unexpected-character-in-attribute-name", t.unknownNamedCharacterReference = "unknown-named-character-reference", t.missingSemicolonAfterCharacterReference = "missing-semicolon-after-character-reference", t.unexpectedCharacterAfterDoctypeSystemIdentifier = "unexpected-character-after-doctype-system-identifier", t.unexpectedCharacterInUnquotedAttributeValue = "unexpected-character-in-unquoted-attribute-value", t.eofBeforeTagName = "eof-before-tag-name", t.eofInTag = "eof-in-tag", t.missingAttributeValue = "missing-attribute-value", t.missingWhitespaceBetweenAttributes = "missing-whitespace-between-attributes", t.missingWhitespaceAfterDoctypePublicKeyword = "missing-whitespace-after-doctype-public-keyword", t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers = "missing-whitespace-between-doctype-public-and-system-identifiers", t.missingWhitespaceAfterDoctypeSystemKeyword = "missing-whitespace-after-doctype-system-keyword", t.missingQuoteBeforeDoctypePublicIdentifier = "missing-quote-before-doctype-public-identifier", t.missingQuoteBeforeDoctypeSystemIdentifier = "missing-quote-before-doctype-system-identifier", t.missingDoctypePublicIdentifier = "missing-doctype-public-identifier", t.missingDoctypeSystemIdentifier = "missing-doctype-system-identifier", t.abruptDoctypePublicIdentifier = "abrupt-doctype-public-identifier", t.abruptDoctypeSystemIdentifier = "abrupt-doctype-system-identifier", t.cdataInHtmlContent = "cdata-in-html-content", t.incorrectlyOpenedComment = "incorrectly-opened-comment", t.eofInScriptHtmlCommentLikeText = "eof-in-script-html-comment-like-text", t.eofInDoctype = "eof-in-doctype", t.nestedComment = "nested-comment", t.abruptClosingOfEmptyComment = "abrupt-closing-of-empty-comment", t.eofInComment = "eof-in-comment", t.incorrectlyClosedComment = "incorrectly-closed-comment", t.eofInCdata = "eof-in-cdata", t.absenceOfDigitsInNumericCharacterReference = "absence-of-digits-in-numeric-character-reference", t.nullCharacterReference = "null-character-reference", t.surrogateCharacterReference = "surrogate-character-reference", t.characterReferenceOutsideUnicodeRange = "character-reference-outside-unicode-range", t.controlCharacterReference = "control-character-reference", t.noncharacterCharacterReference = "noncharacter-character-reference", t.missingWhitespaceBeforeDoctypeName = "missing-whitespace-before-doctype-name", t.missingDoctypeName = "missing-doctype-name", t.invalidCharacterSequenceAfterDoctypeName = "invalid-character-sequence-after-doctype-name", t.duplicateAttribute = "duplicate-attribute", t.nonConformingDoctype = "non-conforming-doctype", t.missingDoctype = "missing-doctype", t.misplacedDoctype = "misplaced-doctype", t.endTagWithoutMatchingOpenElement = "end-tag-without-matching-open-element", t.closingOfElementWithOpenChildElements = "closing-of-element-with-open-child-elements", t.disallowedContentInNoscriptInHead = "disallowed-content-in-noscript-in-head", t.openElementsLeftAfterEof = "open-elements-left-after-eof", t.abandonedHeadElementChild = "abandoned-head-element-child", t.misplacedStartTagForHeadElement = "misplaced-start-tag-for-head-element", t.nestedNoscriptInHead = "nested-noscript-in-head", t.eofInElementThatCanContainOnlyText = "eof-in-element-that-can-contain-only-text";
  }(e12.ERR || (e12.ERR = {}));
})(ly);
function tSe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function jH(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, nSe(n.key), n);
  }
}
function rSe(e12, t, r) {
  return t && jH(e12.prototype, t), r && jH(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function nSe(e12) {
  var t = iSe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function iSe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
Object.defineProperty(V1, "__esModule", {
  value: true
});
V1.Preprocessor = void 0;
var si = X1;
var tO = ly;
var oSe = 65536;
var aSe = function() {
  function e12(t) {
    tSe(this, e12), this.handler = t, this.html = "", this.pos = -1, this.lastGapPos = -2, this.gapStack = [], this.skipNextNewLine = false, this.lastChunkWritten = false, this.endOfChunkHit = false, this.bufferWaterline = oSe, this.isEol = false, this.lineStartPos = 0, this.droppedBufferSize = 0, this.line = 1, this.lastErrOffset = -1;
  }
  return rSe(e12, [{
    key: "col",
    get: function() {
      return this.pos - this.lineStartPos + +(this.lastGapPos !== this.pos);
    }
  }, {
    key: "offset",
    get: function() {
      return this.droppedBufferSize + this.pos;
    }
  }, {
    key: "getError",
    value: function(r) {
      const {
        line: n,
        col: i,
        offset: o
      } = this;
      return {
        code: r,
        startLine: n,
        endLine: n,
        startCol: i,
        endCol: i,
        startOffset: o,
        endOffset: o
      };
    }
  }, {
    key: "_err",
    value: function(r) {
      this.handler.onParseError && this.lastErrOffset !== this.offset && (this.lastErrOffset = this.offset, this.handler.onParseError(this.getError(r)));
    }
  }, {
    key: "_addGap",
    value: function() {
      this.gapStack.push(this.lastGapPos), this.lastGapPos = this.pos;
    }
  }, {
    key: "_processSurrogate",
    value: function(r) {
      if (this.pos !== this.html.length - 1) {
        const n = this.html.charCodeAt(this.pos + 1);
        if ((0, si.isSurrogatePair)(n))
          return this.pos++, this._addGap(), (0, si.getSurrogatePairCodePoint)(r, n);
      } else if (!this.lastChunkWritten)
        return this.endOfChunkHit = true, si.CODE_POINTS.EOF;
      return this._err(tO.ERR.surrogateInInputStream), r;
    }
  }, {
    key: "willDropParsedChunk",
    value: function() {
      return this.pos > this.bufferWaterline;
    }
  }, {
    key: "dropParsedChunk",
    value: function() {
      this.willDropParsedChunk() && (this.html = this.html.substring(this.pos), this.lineStartPos -= this.pos, this.droppedBufferSize += this.pos, this.pos = 0, this.lastGapPos = -2, this.gapStack.length = 0);
    }
  }, {
    key: "write",
    value: function(r, n) {
      this.html.length > 0 ? this.html += r : this.html = r, this.endOfChunkHit = false, this.lastChunkWritten = n;
    }
  }, {
    key: "insertHtmlAtCurrentPos",
    value: function(r) {
      this.html = this.html.substring(0, this.pos + 1) + r + this.html.substring(this.pos + 1), this.endOfChunkHit = false;
    }
  }, {
    key: "startsWith",
    value: function(r, n) {
      if (this.pos + r.length > this.html.length)
        return this.endOfChunkHit = !this.lastChunkWritten, false;
      if (n)
        return this.html.startsWith(r, this.pos);
      for (let i = 0; i < r.length; i++)
        if ((this.html.charCodeAt(this.pos + i) | 32) !== r.charCodeAt(i))
          return false;
      return true;
    }
  }, {
    key: "peek",
    value: function(r) {
      const n = this.pos + r;
      if (n >= this.html.length)
        return this.endOfChunkHit = !this.lastChunkWritten, si.CODE_POINTS.EOF;
      const i = this.html.charCodeAt(n);
      return i === si.CODE_POINTS.CARRIAGE_RETURN ? si.CODE_POINTS.LINE_FEED : i;
    }
  }, {
    key: "advance",
    value: function() {
      if (this.pos++, this.isEol && (this.isEol = false, this.line++, this.lineStartPos = this.pos), this.pos >= this.html.length)
        return this.endOfChunkHit = !this.lastChunkWritten, si.CODE_POINTS.EOF;
      let r = this.html.charCodeAt(this.pos);
      return r === si.CODE_POINTS.CARRIAGE_RETURN ? (this.isEol = true, this.skipNextNewLine = true, si.CODE_POINTS.LINE_FEED) : r === si.CODE_POINTS.LINE_FEED && (this.isEol = true, this.skipNextNewLine) ? (this.line--, this.skipNextNewLine = false, this._addGap(), this.advance()) : (this.skipNextNewLine = false, (0, si.isSurrogate)(r) && (r = this._processSurrogate(r)), this.handler.onParseError === null || r > 31 && r < 127 || r === si.CODE_POINTS.LINE_FEED || r === si.CODE_POINTS.CARRIAGE_RETURN || r > 159 && r < 64976 || this._checkForProblematicCharacters(r), r);
    }
  }, {
    key: "_checkForProblematicCharacters",
    value: function(r) {
      (0, si.isControlCodePoint)(r) ? this._err(tO.ERR.controlCharacterInInputStream) : (0, si.isUndefinedCodePoint)(r) && this._err(tO.ERR.noncharacterInInputStream);
    }
  }, {
    key: "retreat",
    value: function(r) {
      for (this.pos -= r; this.pos < this.lastGapPos; )
        this.lastGapPos = this.gapStack.pop(), this.pos--;
      this.isEol = false;
    }
  }]), e12;
}();
V1.Preprocessor = aSe;
var W1 = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.getTokenAttr = e12.TokenType = void 0, function(r) {
    r[r.CHARACTER = 0] = "CHARACTER", r[r.NULL_CHARACTER = 1] = "NULL_CHARACTER", r[r.WHITESPACE_CHARACTER = 2] = "WHITESPACE_CHARACTER", r[r.START_TAG = 3] = "START_TAG", r[r.END_TAG = 4] = "END_TAG", r[r.COMMENT = 5] = "COMMENT", r[r.DOCTYPE = 6] = "DOCTYPE", r[r.EOF = 7] = "EOF", r[r.HIBERNATION = 8] = "HIBERNATION";
  }(e12.TokenType || (e12.TokenType = {}));
  function t(r, n) {
    for (let i = r.attrs.length - 1; i >= 0; i--)
      if (r.attrs[i].name === n)
        return r.attrs[i].value;
    return null;
  }
  e12.getTokenAttr = t;
})(W1);
var Ks = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.hasUnescapedText = e12.isNumberedHeader = e12.SPECIAL_ELEMENTS = e12.getTagID = e12.TAG_ID = e12.TAG_NAMES = e12.DOCUMENT_MODE = e12.ATTRS = e12.NS = void 0;
  var t;
  (function(c) {
    c.HTML = "http://www.w3.org/1999/xhtml", c.MATHML = "http://www.w3.org/1998/Math/MathML", c.SVG = "http://www.w3.org/2000/svg", c.XLINK = "http://www.w3.org/1999/xlink", c.XML = "http://www.w3.org/XML/1998/namespace", c.XMLNS = "http://www.w3.org/2000/xmlns/";
  })(t = e12.NS || (e12.NS = {})), function(c) {
    c.TYPE = "type", c.ACTION = "action", c.ENCODING = "encoding", c.PROMPT = "prompt", c.NAME = "name", c.COLOR = "color", c.FACE = "face", c.SIZE = "size";
  }(e12.ATTRS || (e12.ATTRS = {})), function(c) {
    c.NO_QUIRKS = "no-quirks", c.QUIRKS = "quirks", c.LIMITED_QUIRKS = "limited-quirks";
  }(e12.DOCUMENT_MODE || (e12.DOCUMENT_MODE = {}));
  var r;
  (function(c) {
    c.A = "a", c.ADDRESS = "address", c.ANNOTATION_XML = "annotation-xml", c.APPLET = "applet", c.AREA = "area", c.ARTICLE = "article", c.ASIDE = "aside", c.B = "b", c.BASE = "base", c.BASEFONT = "basefont", c.BGSOUND = "bgsound", c.BIG = "big", c.BLOCKQUOTE = "blockquote", c.BODY = "body", c.BR = "br", c.BUTTON = "button", c.CAPTION = "caption", c.CENTER = "center", c.CODE = "code", c.COL = "col", c.COLGROUP = "colgroup", c.DD = "dd", c.DESC = "desc", c.DETAILS = "details", c.DIALOG = "dialog", c.DIR = "dir", c.DIV = "div", c.DL = "dl", c.DT = "dt", c.EM = "em", c.EMBED = "embed", c.FIELDSET = "fieldset", c.FIGCAPTION = "figcaption", c.FIGURE = "figure", c.FONT = "font", c.FOOTER = "footer", c.FOREIGN_OBJECT = "foreignObject", c.FORM = "form", c.FRAME = "frame", c.FRAMESET = "frameset", c.H1 = "h1", c.H2 = "h2", c.H3 = "h3", c.H4 = "h4", c.H5 = "h5", c.H6 = "h6", c.HEAD = "head", c.HEADER = "header", c.HGROUP = "hgroup", c.HR = "hr", c.HTML = "html", c.I = "i", c.IMG = "img", c.IMAGE = "image", c.INPUT = "input", c.IFRAME = "iframe", c.KEYGEN = "keygen", c.LABEL = "label", c.LI = "li", c.LINK = "link", c.LISTING = "listing", c.MAIN = "main", c.MALIGNMARK = "malignmark", c.MARQUEE = "marquee", c.MATH = "math", c.MENU = "menu", c.META = "meta", c.MGLYPH = "mglyph", c.MI = "mi", c.MO = "mo", c.MN = "mn", c.MS = "ms", c.MTEXT = "mtext", c.NAV = "nav", c.NOBR = "nobr", c.NOFRAMES = "noframes", c.NOEMBED = "noembed", c.NOSCRIPT = "noscript", c.OBJECT = "object", c.OL = "ol", c.OPTGROUP = "optgroup", c.OPTION = "option", c.P = "p", c.PARAM = "param", c.PLAINTEXT = "plaintext", c.PRE = "pre", c.RB = "rb", c.RP = "rp", c.RT = "rt", c.RTC = "rtc", c.RUBY = "ruby", c.S = "s", c.SCRIPT = "script", c.SECTION = "section", c.SELECT = "select", c.SOURCE = "source", c.SMALL = "small", c.SPAN = "span", c.STRIKE = "strike", c.STRONG = "strong", c.STYLE = "style", c.SUB = "sub", c.SUMMARY = "summary", c.SUP = "sup", c.TABLE = "table", c.TBODY = "tbody", c.TEMPLATE = "template", c.TEXTAREA = "textarea", c.TFOOT = "tfoot", c.TD = "td", c.TH = "th", c.THEAD = "thead", c.TITLE = "title", c.TR = "tr", c.TRACK = "track", c.TT = "tt", c.U = "u", c.UL = "ul", c.SVG = "svg", c.VAR = "var", c.WBR = "wbr", c.XMP = "xmp";
  })(r = e12.TAG_NAMES || (e12.TAG_NAMES = {}));
  var n;
  (function(c) {
    c[c.UNKNOWN = 0] = "UNKNOWN", c[c.A = 1] = "A", c[c.ADDRESS = 2] = "ADDRESS", c[c.ANNOTATION_XML = 3] = "ANNOTATION_XML", c[c.APPLET = 4] = "APPLET", c[c.AREA = 5] = "AREA", c[c.ARTICLE = 6] = "ARTICLE", c[c.ASIDE = 7] = "ASIDE", c[c.B = 8] = "B", c[c.BASE = 9] = "BASE", c[c.BASEFONT = 10] = "BASEFONT", c[c.BGSOUND = 11] = "BGSOUND", c[c.BIG = 12] = "BIG", c[c.BLOCKQUOTE = 13] = "BLOCKQUOTE", c[c.BODY = 14] = "BODY", c[c.BR = 15] = "BR", c[c.BUTTON = 16] = "BUTTON", c[c.CAPTION = 17] = "CAPTION", c[c.CENTER = 18] = "CENTER", c[c.CODE = 19] = "CODE", c[c.COL = 20] = "COL", c[c.COLGROUP = 21] = "COLGROUP", c[c.DD = 22] = "DD", c[c.DESC = 23] = "DESC", c[c.DETAILS = 24] = "DETAILS", c[c.DIALOG = 25] = "DIALOG", c[c.DIR = 26] = "DIR", c[c.DIV = 27] = "DIV", c[c.DL = 28] = "DL", c[c.DT = 29] = "DT", c[c.EM = 30] = "EM", c[c.EMBED = 31] = "EMBED", c[c.FIELDSET = 32] = "FIELDSET", c[c.FIGCAPTION = 33] = "FIGCAPTION", c[c.FIGURE = 34] = "FIGURE", c[c.FONT = 35] = "FONT", c[c.FOOTER = 36] = "FOOTER", c[c.FOREIGN_OBJECT = 37] = "FOREIGN_OBJECT", c[c.FORM = 38] = "FORM", c[c.FRAME = 39] = "FRAME", c[c.FRAMESET = 40] = "FRAMESET", c[c.H1 = 41] = "H1", c[c.H2 = 42] = "H2", c[c.H3 = 43] = "H3", c[c.H4 = 44] = "H4", c[c.H5 = 45] = "H5", c[c.H6 = 46] = "H6", c[c.HEAD = 47] = "HEAD", c[c.HEADER = 48] = "HEADER", c[c.HGROUP = 49] = "HGROUP", c[c.HR = 50] = "HR", c[c.HTML = 51] = "HTML", c[c.I = 52] = "I", c[c.IMG = 53] = "IMG", c[c.IMAGE = 54] = "IMAGE", c[c.INPUT = 55] = "INPUT", c[c.IFRAME = 56] = "IFRAME", c[c.KEYGEN = 57] = "KEYGEN", c[c.LABEL = 58] = "LABEL", c[c.LI = 59] = "LI", c[c.LINK = 60] = "LINK", c[c.LISTING = 61] = "LISTING", c[c.MAIN = 62] = "MAIN", c[c.MALIGNMARK = 63] = "MALIGNMARK", c[c.MARQUEE = 64] = "MARQUEE", c[c.MATH = 65] = "MATH", c[c.MENU = 66] = "MENU", c[c.META = 67] = "META", c[c.MGLYPH = 68] = "MGLYPH", c[c.MI = 69] = "MI", c[c.MO = 70] = "MO", c[c.MN = 71] = "MN", c[c.MS = 72] = "MS", c[c.MTEXT = 73] = "MTEXT", c[c.NAV = 74] = "NAV", c[c.NOBR = 75] = "NOBR", c[c.NOFRAMES = 76] = "NOFRAMES", c[c.NOEMBED = 77] = "NOEMBED", c[c.NOSCRIPT = 78] = "NOSCRIPT", c[c.OBJECT = 79] = "OBJECT", c[c.OL = 80] = "OL", c[c.OPTGROUP = 81] = "OPTGROUP", c[c.OPTION = 82] = "OPTION", c[c.P = 83] = "P", c[c.PARAM = 84] = "PARAM", c[c.PLAINTEXT = 85] = "PLAINTEXT", c[c.PRE = 86] = "PRE", c[c.RB = 87] = "RB", c[c.RP = 88] = "RP", c[c.RT = 89] = "RT", c[c.RTC = 90] = "RTC", c[c.RUBY = 91] = "RUBY", c[c.S = 92] = "S", c[c.SCRIPT = 93] = "SCRIPT", c[c.SECTION = 94] = "SECTION", c[c.SELECT = 95] = "SELECT", c[c.SOURCE = 96] = "SOURCE", c[c.SMALL = 97] = "SMALL", c[c.SPAN = 98] = "SPAN", c[c.STRIKE = 99] = "STRIKE", c[c.STRONG = 100] = "STRONG", c[c.STYLE = 101] = "STYLE", c[c.SUB = 102] = "SUB", c[c.SUMMARY = 103] = "SUMMARY", c[c.SUP = 104] = "SUP", c[c.TABLE = 105] = "TABLE", c[c.TBODY = 106] = "TBODY", c[c.TEMPLATE = 107] = "TEMPLATE", c[c.TEXTAREA = 108] = "TEXTAREA", c[c.TFOOT = 109] = "TFOOT", c[c.TD = 110] = "TD", c[c.TH = 111] = "TH", c[c.THEAD = 112] = "THEAD", c[c.TITLE = 113] = "TITLE", c[c.TR = 114] = "TR", c[c.TRACK = 115] = "TRACK", c[c.TT = 116] = "TT", c[c.U = 117] = "U", c[c.UL = 118] = "UL", c[c.SVG = 119] = "SVG", c[c.VAR = 120] = "VAR", c[c.WBR = 121] = "WBR", c[c.XMP = 122] = "XMP";
  })(n = e12.TAG_ID || (e12.TAG_ID = {}));
  const i = /* @__PURE__ */ new Map([[r.A, n.A], [r.ADDRESS, n.ADDRESS], [r.ANNOTATION_XML, n.ANNOTATION_XML], [r.APPLET, n.APPLET], [r.AREA, n.AREA], [r.ARTICLE, n.ARTICLE], [r.ASIDE, n.ASIDE], [r.B, n.B], [r.BASE, n.BASE], [r.BASEFONT, n.BASEFONT], [r.BGSOUND, n.BGSOUND], [r.BIG, n.BIG], [r.BLOCKQUOTE, n.BLOCKQUOTE], [r.BODY, n.BODY], [r.BR, n.BR], [r.BUTTON, n.BUTTON], [r.CAPTION, n.CAPTION], [r.CENTER, n.CENTER], [r.CODE, n.CODE], [r.COL, n.COL], [r.COLGROUP, n.COLGROUP], [r.DD, n.DD], [r.DESC, n.DESC], [r.DETAILS, n.DETAILS], [r.DIALOG, n.DIALOG], [r.DIR, n.DIR], [r.DIV, n.DIV], [r.DL, n.DL], [r.DT, n.DT], [r.EM, n.EM], [r.EMBED, n.EMBED], [r.FIELDSET, n.FIELDSET], [r.FIGCAPTION, n.FIGCAPTION], [r.FIGURE, n.FIGURE], [r.FONT, n.FONT], [r.FOOTER, n.FOOTER], [r.FOREIGN_OBJECT, n.FOREIGN_OBJECT], [r.FORM, n.FORM], [r.FRAME, n.FRAME], [r.FRAMESET, n.FRAMESET], [r.H1, n.H1], [r.H2, n.H2], [r.H3, n.H3], [r.H4, n.H4], [r.H5, n.H5], [r.H6, n.H6], [r.HEAD, n.HEAD], [r.HEADER, n.HEADER], [r.HGROUP, n.HGROUP], [r.HR, n.HR], [r.HTML, n.HTML], [r.I, n.I], [r.IMG, n.IMG], [r.IMAGE, n.IMAGE], [r.INPUT, n.INPUT], [r.IFRAME, n.IFRAME], [r.KEYGEN, n.KEYGEN], [r.LABEL, n.LABEL], [r.LI, n.LI], [r.LINK, n.LINK], [r.LISTING, n.LISTING], [r.MAIN, n.MAIN], [r.MALIGNMARK, n.MALIGNMARK], [r.MARQUEE, n.MARQUEE], [r.MATH, n.MATH], [r.MENU, n.MENU], [r.META, n.META], [r.MGLYPH, n.MGLYPH], [r.MI, n.MI], [r.MO, n.MO], [r.MN, n.MN], [r.MS, n.MS], [r.MTEXT, n.MTEXT], [r.NAV, n.NAV], [r.NOBR, n.NOBR], [r.NOFRAMES, n.NOFRAMES], [r.NOEMBED, n.NOEMBED], [r.NOSCRIPT, n.NOSCRIPT], [r.OBJECT, n.OBJECT], [r.OL, n.OL], [r.OPTGROUP, n.OPTGROUP], [r.OPTION, n.OPTION], [r.P, n.P], [r.PARAM, n.PARAM], [r.PLAINTEXT, n.PLAINTEXT], [r.PRE, n.PRE], [r.RB, n.RB], [r.RP, n.RP], [r.RT, n.RT], [r.RTC, n.RTC], [r.RUBY, n.RUBY], [r.S, n.S], [r.SCRIPT, n.SCRIPT], [r.SECTION, n.SECTION], [r.SELECT, n.SELECT], [r.SOURCE, n.SOURCE], [r.SMALL, n.SMALL], [r.SPAN, n.SPAN], [r.STRIKE, n.STRIKE], [r.STRONG, n.STRONG], [r.STYLE, n.STYLE], [r.SUB, n.SUB], [r.SUMMARY, n.SUMMARY], [r.SUP, n.SUP], [r.TABLE, n.TABLE], [r.TBODY, n.TBODY], [r.TEMPLATE, n.TEMPLATE], [r.TEXTAREA, n.TEXTAREA], [r.TFOOT, n.TFOOT], [r.TD, n.TD], [r.TH, n.TH], [r.THEAD, n.THEAD], [r.TITLE, n.TITLE], [r.TR, n.TR], [r.TRACK, n.TRACK], [r.TT, n.TT], [r.U, n.U], [r.UL, n.UL], [r.SVG, n.SVG], [r.VAR, n.VAR], [r.WBR, n.WBR], [r.XMP, n.XMP]]);
  function o(c) {
    var f;
    return (f = i.get(c)) !== null && f !== void 0 ? f : n.UNKNOWN;
  }
  e12.getTagID = o;
  const a = n;
  e12.SPECIAL_ELEMENTS = {
    [t.HTML]: /* @__PURE__ */ new Set([a.ADDRESS, a.APPLET, a.AREA, a.ARTICLE, a.ASIDE, a.BASE, a.BASEFONT, a.BGSOUND, a.BLOCKQUOTE, a.BODY, a.BR, a.BUTTON, a.CAPTION, a.CENTER, a.COL, a.COLGROUP, a.DD, a.DETAILS, a.DIR, a.DIV, a.DL, a.DT, a.EMBED, a.FIELDSET, a.FIGCAPTION, a.FIGURE, a.FOOTER, a.FORM, a.FRAME, a.FRAMESET, a.H1, a.H2, a.H3, a.H4, a.H5, a.H6, a.HEAD, a.HEADER, a.HGROUP, a.HR, a.HTML, a.IFRAME, a.IMG, a.INPUT, a.LI, a.LINK, a.LISTING, a.MAIN, a.MARQUEE, a.MENU, a.META, a.NAV, a.NOEMBED, a.NOFRAMES, a.NOSCRIPT, a.OBJECT, a.OL, a.P, a.PARAM, a.PLAINTEXT, a.PRE, a.SCRIPT, a.SECTION, a.SELECT, a.SOURCE, a.STYLE, a.SUMMARY, a.TABLE, a.TBODY, a.TD, a.TEMPLATE, a.TEXTAREA, a.TFOOT, a.TH, a.THEAD, a.TITLE, a.TR, a.TRACK, a.UL, a.WBR, a.XMP]),
    [t.MATHML]: /* @__PURE__ */ new Set([a.MI, a.MO, a.MN, a.MS, a.MTEXT, a.ANNOTATION_XML]),
    [t.SVG]: /* @__PURE__ */ new Set([a.TITLE, a.FOREIGN_OBJECT, a.DESC]),
    [t.XLINK]: /* @__PURE__ */ new Set(),
    [t.XML]: /* @__PURE__ */ new Set(),
    [t.XMLNS]: /* @__PURE__ */ new Set()
  };
  function s(c) {
    return c === a.H1 || c === a.H2 || c === a.H3 || c === a.H4 || c === a.H5 || c === a.H6;
  }
  e12.isNumberedHeader = s;
  const l = /* @__PURE__ */ new Set([r.STYLE, r.SCRIPT, r.XMP, r.IFRAME, r.NOEMBED, r.NOFRAMES, r.PLAINTEXT]);
  function u(c, f) {
    return l.has(c) || f && c === r.NOSCRIPT;
  }
  e12.hasUnescapedText = u;
})(Ks);
function sSe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function GH(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, cSe(n.key), n);
  }
}
function lSe(e12, t, r) {
  return t && GH(e12.prototype, t), r && GH(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function cSe(e12) {
  var t = uSe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function uSe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
Object.defineProperty(Su, "__esModule", {
  value: true
});
Su.Tokenizer = Su.TokenizerMode = void 0;
var hSe = V1;
var V = X1;
var Pi = W1;
var da = bu;
var Le = ly;
var rO = Ks;
var fSe = /* @__PURE__ */ new Map([[128, 8364], [130, 8218], [131, 402], [132, 8222], [133, 8230], [134, 8224], [135, 8225], [136, 710], [137, 8240], [138, 352], [139, 8249], [140, 338], [142, 381], [145, 8216], [146, 8217], [147, 8220], [148, 8221], [149, 8226], [150, 8211], [151, 8212], [152, 732], [153, 8482], [154, 353], [155, 8250], [156, 339], [158, 382], [159, 376]]);
var te;
(function(e12) {
  e12[e12.DATA = 0] = "DATA", e12[e12.RCDATA = 1] = "RCDATA", e12[e12.RAWTEXT = 2] = "RAWTEXT", e12[e12.SCRIPT_DATA = 3] = "SCRIPT_DATA", e12[e12.PLAINTEXT = 4] = "PLAINTEXT", e12[e12.TAG_OPEN = 5] = "TAG_OPEN", e12[e12.END_TAG_OPEN = 6] = "END_TAG_OPEN", e12[e12.TAG_NAME = 7] = "TAG_NAME", e12[e12.RCDATA_LESS_THAN_SIGN = 8] = "RCDATA_LESS_THAN_SIGN", e12[e12.RCDATA_END_TAG_OPEN = 9] = "RCDATA_END_TAG_OPEN", e12[e12.RCDATA_END_TAG_NAME = 10] = "RCDATA_END_TAG_NAME", e12[e12.RAWTEXT_LESS_THAN_SIGN = 11] = "RAWTEXT_LESS_THAN_SIGN", e12[e12.RAWTEXT_END_TAG_OPEN = 12] = "RAWTEXT_END_TAG_OPEN", e12[e12.RAWTEXT_END_TAG_NAME = 13] = "RAWTEXT_END_TAG_NAME", e12[e12.SCRIPT_DATA_LESS_THAN_SIGN = 14] = "SCRIPT_DATA_LESS_THAN_SIGN", e12[e12.SCRIPT_DATA_END_TAG_OPEN = 15] = "SCRIPT_DATA_END_TAG_OPEN", e12[e12.SCRIPT_DATA_END_TAG_NAME = 16] = "SCRIPT_DATA_END_TAG_NAME", e12[e12.SCRIPT_DATA_ESCAPE_START = 17] = "SCRIPT_DATA_ESCAPE_START", e12[e12.SCRIPT_DATA_ESCAPE_START_DASH = 18] = "SCRIPT_DATA_ESCAPE_START_DASH", e12[e12.SCRIPT_DATA_ESCAPED = 19] = "SCRIPT_DATA_ESCAPED", e12[e12.SCRIPT_DATA_ESCAPED_DASH = 20] = "SCRIPT_DATA_ESCAPED_DASH", e12[e12.SCRIPT_DATA_ESCAPED_DASH_DASH = 21] = "SCRIPT_DATA_ESCAPED_DASH_DASH", e12[e12.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN = 22] = "SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN", e12[e12.SCRIPT_DATA_ESCAPED_END_TAG_OPEN = 23] = "SCRIPT_DATA_ESCAPED_END_TAG_OPEN", e12[e12.SCRIPT_DATA_ESCAPED_END_TAG_NAME = 24] = "SCRIPT_DATA_ESCAPED_END_TAG_NAME", e12[e12.SCRIPT_DATA_DOUBLE_ESCAPE_START = 25] = "SCRIPT_DATA_DOUBLE_ESCAPE_START", e12[e12.SCRIPT_DATA_DOUBLE_ESCAPED = 26] = "SCRIPT_DATA_DOUBLE_ESCAPED", e12[e12.SCRIPT_DATA_DOUBLE_ESCAPED_DASH = 27] = "SCRIPT_DATA_DOUBLE_ESCAPED_DASH", e12[e12.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH = 28] = "SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH", e12[e12.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN = 29] = "SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN", e12[e12.SCRIPT_DATA_DOUBLE_ESCAPE_END = 30] = "SCRIPT_DATA_DOUBLE_ESCAPE_END", e12[e12.BEFORE_ATTRIBUTE_NAME = 31] = "BEFORE_ATTRIBUTE_NAME", e12[e12.ATTRIBUTE_NAME = 32] = "ATTRIBUTE_NAME", e12[e12.AFTER_ATTRIBUTE_NAME = 33] = "AFTER_ATTRIBUTE_NAME", e12[e12.BEFORE_ATTRIBUTE_VALUE = 34] = "BEFORE_ATTRIBUTE_VALUE", e12[e12.ATTRIBUTE_VALUE_DOUBLE_QUOTED = 35] = "ATTRIBUTE_VALUE_DOUBLE_QUOTED", e12[e12.ATTRIBUTE_VALUE_SINGLE_QUOTED = 36] = "ATTRIBUTE_VALUE_SINGLE_QUOTED", e12[e12.ATTRIBUTE_VALUE_UNQUOTED = 37] = "ATTRIBUTE_VALUE_UNQUOTED", e12[e12.AFTER_ATTRIBUTE_VALUE_QUOTED = 38] = "AFTER_ATTRIBUTE_VALUE_QUOTED", e12[e12.SELF_CLOSING_START_TAG = 39] = "SELF_CLOSING_START_TAG", e12[e12.BOGUS_COMMENT = 40] = "BOGUS_COMMENT", e12[e12.MARKUP_DECLARATION_OPEN = 41] = "MARKUP_DECLARATION_OPEN", e12[e12.COMMENT_START = 42] = "COMMENT_START", e12[e12.COMMENT_START_DASH = 43] = "COMMENT_START_DASH", e12[e12.COMMENT = 44] = "COMMENT", e12[e12.COMMENT_LESS_THAN_SIGN = 45] = "COMMENT_LESS_THAN_SIGN", e12[e12.COMMENT_LESS_THAN_SIGN_BANG = 46] = "COMMENT_LESS_THAN_SIGN_BANG", e12[e12.COMMENT_LESS_THAN_SIGN_BANG_DASH = 47] = "COMMENT_LESS_THAN_SIGN_BANG_DASH", e12[e12.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH = 48] = "COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH", e12[e12.COMMENT_END_DASH = 49] = "COMMENT_END_DASH", e12[e12.COMMENT_END = 50] = "COMMENT_END", e12[e12.COMMENT_END_BANG = 51] = "COMMENT_END_BANG", e12[e12.DOCTYPE = 52] = "DOCTYPE", e12[e12.BEFORE_DOCTYPE_NAME = 53] = "BEFORE_DOCTYPE_NAME", e12[e12.DOCTYPE_NAME = 54] = "DOCTYPE_NAME", e12[e12.AFTER_DOCTYPE_NAME = 55] = "AFTER_DOCTYPE_NAME", e12[e12.AFTER_DOCTYPE_PUBLIC_KEYWORD = 56] = "AFTER_DOCTYPE_PUBLIC_KEYWORD", e12[e12.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER = 57] = "BEFORE_DOCTYPE_PUBLIC_IDENTIFIER", e12[e12.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED = 58] = "DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED", e12[e12.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED = 59] = "DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED", e12[e12.AFTER_DOCTYPE_PUBLIC_IDENTIFIER = 60] = "AFTER_DOCTYPE_PUBLIC_IDENTIFIER", e12[e12.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS = 61] = "BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS", e12[e12.AFTER_DOCTYPE_SYSTEM_KEYWORD = 62] = "AFTER_DOCTYPE_SYSTEM_KEYWORD", e12[e12.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER = 63] = "BEFORE_DOCTYPE_SYSTEM_IDENTIFIER", e12[e12.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED = 64] = "DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED", e12[e12.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED = 65] = "DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED", e12[e12.AFTER_DOCTYPE_SYSTEM_IDENTIFIER = 66] = "AFTER_DOCTYPE_SYSTEM_IDENTIFIER", e12[e12.BOGUS_DOCTYPE = 67] = "BOGUS_DOCTYPE", e12[e12.CDATA_SECTION = 68] = "CDATA_SECTION", e12[e12.CDATA_SECTION_BRACKET = 69] = "CDATA_SECTION_BRACKET", e12[e12.CDATA_SECTION_END = 70] = "CDATA_SECTION_END", e12[e12.CHARACTER_REFERENCE = 71] = "CHARACTER_REFERENCE", e12[e12.NAMED_CHARACTER_REFERENCE = 72] = "NAMED_CHARACTER_REFERENCE", e12[e12.AMBIGUOUS_AMPERSAND = 73] = "AMBIGUOUS_AMPERSAND", e12[e12.NUMERIC_CHARACTER_REFERENCE = 74] = "NUMERIC_CHARACTER_REFERENCE", e12[e12.HEXADEMICAL_CHARACTER_REFERENCE_START = 75] = "HEXADEMICAL_CHARACTER_REFERENCE_START", e12[e12.HEXADEMICAL_CHARACTER_REFERENCE = 76] = "HEXADEMICAL_CHARACTER_REFERENCE", e12[e12.DECIMAL_CHARACTER_REFERENCE = 77] = "DECIMAL_CHARACTER_REFERENCE", e12[e12.NUMERIC_CHARACTER_REFERENCE_END = 78] = "NUMERIC_CHARACTER_REFERENCE_END";
})(te || (te = {}));
Su.TokenizerMode = {
  DATA: te.DATA,
  RCDATA: te.RCDATA,
  RAWTEXT: te.RAWTEXT,
  SCRIPT_DATA: te.SCRIPT_DATA,
  PLAINTEXT: te.PLAINTEXT,
  CDATA_SECTION: te.CDATA_SECTION
};
function og(e12) {
  return e12 >= V.CODE_POINTS.DIGIT_0 && e12 <= V.CODE_POINTS.DIGIT_9;
}
function Im(e12) {
  return e12 >= V.CODE_POINTS.LATIN_CAPITAL_A && e12 <= V.CODE_POINTS.LATIN_CAPITAL_Z;
}
function dSe(e12) {
  return e12 >= V.CODE_POINTS.LATIN_SMALL_A && e12 <= V.CODE_POINTS.LATIN_SMALL_Z;
}
function dl(e12) {
  return dSe(e12) || Im(e12);
}
function eC(e12) {
  return dl(e12) || og(e12);
}
function kW(e12) {
  return e12 >= V.CODE_POINTS.LATIN_CAPITAL_A && e12 <= V.CODE_POINTS.LATIN_CAPITAL_F;
}
function DW(e12) {
  return e12 >= V.CODE_POINTS.LATIN_SMALL_A && e12 <= V.CODE_POINTS.LATIN_SMALL_F;
}
function pSe(e12) {
  return og(e12) || kW(e12) || DW(e12);
}
function g_(e12) {
  return e12 + 32;
}
function RW(e12) {
  return e12 === V.CODE_POINTS.SPACE || e12 === V.CODE_POINTS.LINE_FEED || e12 === V.CODE_POINTS.TABULATION || e12 === V.CODE_POINTS.FORM_FEED;
}
function mSe(e12) {
  return e12 === V.CODE_POINTS.EQUALS_SIGN || eC(e12);
}
function zH(e12) {
  return RW(e12) || e12 === V.CODE_POINTS.SOLIDUS || e12 === V.CODE_POINTS.GREATER_THAN_SIGN;
}
var gSe = function() {
  function e12(t, r) {
    sSe(this, e12), this.options = t, this.handler = r, this.paused = false, this.inLoop = false, this.inForeignNode = false, this.lastStartTagName = "", this.active = false, this.state = te.DATA, this.returnState = te.DATA, this.charRefCode = -1, this.consumedAfterSnapshot = -1, this.currentCharacterToken = null, this.currentToken = null, this.currentAttr = {
      name: "",
      value: ""
    }, this.preprocessor = new hSe.Preprocessor(r), this.currentLocation = this.getCurrentLocation(-1);
  }
  return lSe(e12, [{
    key: "_err",
    value: function(r) {
      var n, i;
      (i = (n = this.handler).onParseError) === null || i === void 0 || i.call(n, this.preprocessor.getError(r));
    }
    // NOTE: `offset` may never run across line boundaries.
  }, {
    key: "getCurrentLocation",
    value: function(r) {
      return this.options.sourceCodeLocationInfo ? {
        startLine: this.preprocessor.line,
        startCol: this.preprocessor.col - r,
        startOffset: this.preprocessor.offset - r,
        endLine: -1,
        endCol: -1,
        endOffset: -1
      } : null;
    }
  }, {
    key: "_runParsingLoop",
    value: function() {
      if (!this.inLoop) {
        for (this.inLoop = true; this.active && !this.paused; ) {
          this.consumedAfterSnapshot = 0;
          const r = this._consume();
          this._ensureHibernation() || this._callState(r);
        }
        this.inLoop = false;
      }
    }
    //API
  }, {
    key: "pause",
    value: function() {
      this.paused = true;
    }
  }, {
    key: "resume",
    value: function(r) {
      if (!this.paused)
        throw new Error("Parser was already resumed");
      this.paused = false, !this.inLoop && (this._runParsingLoop(), this.paused || (r == null ? void 0 : r()));
    }
  }, {
    key: "write",
    value: function(r, n, i) {
      this.active = true, this.preprocessor.write(r, n), this._runParsingLoop(), this.paused || (i == null ? void 0 : i());
    }
  }, {
    key: "insertHtmlAtCurrentPos",
    value: function(r) {
      this.active = true, this.preprocessor.insertHtmlAtCurrentPos(r), this._runParsingLoop();
    }
    //Hibernation
  }, {
    key: "_ensureHibernation",
    value: function() {
      return this.preprocessor.endOfChunkHit ? (this._unconsume(this.consumedAfterSnapshot), this.active = false, true) : false;
    }
    //Consumption
  }, {
    key: "_consume",
    value: function() {
      return this.consumedAfterSnapshot++, this.preprocessor.advance();
    }
  }, {
    key: "_unconsume",
    value: function(r) {
      this.consumedAfterSnapshot -= r, this.preprocessor.retreat(r);
    }
  }, {
    key: "_reconsumeInState",
    value: function(r, n) {
      this.state = r, this._callState(n);
    }
  }, {
    key: "_advanceBy",
    value: function(r) {
      this.consumedAfterSnapshot += r;
      for (let n = 0; n < r; n++)
        this.preprocessor.advance();
    }
  }, {
    key: "_consumeSequenceIfMatch",
    value: function(r, n) {
      return this.preprocessor.startsWith(r, n) ? (this._advanceBy(r.length - 1), true) : false;
    }
    //Token creation
  }, {
    key: "_createStartTagToken",
    value: function() {
      this.currentToken = {
        type: Pi.TokenType.START_TAG,
        tagName: "",
        tagID: rO.TAG_ID.UNKNOWN,
        selfClosing: false,
        ackSelfClosing: false,
        attrs: [],
        location: this.getCurrentLocation(1)
      };
    }
  }, {
    key: "_createEndTagToken",
    value: function() {
      this.currentToken = {
        type: Pi.TokenType.END_TAG,
        tagName: "",
        tagID: rO.TAG_ID.UNKNOWN,
        selfClosing: false,
        ackSelfClosing: false,
        attrs: [],
        location: this.getCurrentLocation(2)
      };
    }
  }, {
    key: "_createCommentToken",
    value: function(r) {
      this.currentToken = {
        type: Pi.TokenType.COMMENT,
        data: "",
        location: this.getCurrentLocation(r)
      };
    }
  }, {
    key: "_createDoctypeToken",
    value: function(r) {
      this.currentToken = {
        type: Pi.TokenType.DOCTYPE,
        name: r,
        forceQuirks: false,
        publicId: null,
        systemId: null,
        location: this.currentLocation
      };
    }
  }, {
    key: "_createCharacterToken",
    value: function(r, n) {
      this.currentCharacterToken = {
        type: r,
        chars: n,
        location: this.currentLocation
      };
    }
    //Tag attributes
  }, {
    key: "_createAttr",
    value: function(r) {
      this.currentAttr = {
        name: r,
        value: ""
      }, this.currentLocation = this.getCurrentLocation(0);
    }
  }, {
    key: "_leaveAttrName",
    value: function() {
      var r, n;
      const i = this.currentToken;
      if ((0, Pi.getTokenAttr)(i, this.currentAttr.name) === null) {
        if (i.attrs.push(this.currentAttr), i.location && this.currentLocation) {
          const o = (r = (n = i.location).attrs) !== null && r !== void 0 ? r : n.attrs = /* @__PURE__ */ Object.create(null);
          o[this.currentAttr.name] = this.currentLocation, this._leaveAttrValue();
        }
      } else
        this._err(Le.ERR.duplicateAttribute);
    }
  }, {
    key: "_leaveAttrValue",
    value: function() {
      this.currentLocation && (this.currentLocation.endLine = this.preprocessor.line, this.currentLocation.endCol = this.preprocessor.col, this.currentLocation.endOffset = this.preprocessor.offset);
    }
    //Token emission
  }, {
    key: "prepareToken",
    value: function(r) {
      this._emitCurrentCharacterToken(r.location), this.currentToken = null, r.location && (r.location.endLine = this.preprocessor.line, r.location.endCol = this.preprocessor.col + 1, r.location.endOffset = this.preprocessor.offset + 1), this.currentLocation = this.getCurrentLocation(-1);
    }
  }, {
    key: "emitCurrentTagToken",
    value: function() {
      const r = this.currentToken;
      this.prepareToken(r), r.tagID = (0, rO.getTagID)(r.tagName), r.type === Pi.TokenType.START_TAG ? (this.lastStartTagName = r.tagName, this.handler.onStartTag(r)) : (r.attrs.length > 0 && this._err(Le.ERR.endTagWithAttributes), r.selfClosing && this._err(Le.ERR.endTagWithTrailingSolidus), this.handler.onEndTag(r)), this.preprocessor.dropParsedChunk();
    }
  }, {
    key: "emitCurrentComment",
    value: function(r) {
      this.prepareToken(r), this.handler.onComment(r), this.preprocessor.dropParsedChunk();
    }
  }, {
    key: "emitCurrentDoctype",
    value: function(r) {
      this.prepareToken(r), this.handler.onDoctype(r), this.preprocessor.dropParsedChunk();
    }
  }, {
    key: "_emitCurrentCharacterToken",
    value: function(r) {
      if (this.currentCharacterToken) {
        switch (r && this.currentCharacterToken.location && (this.currentCharacterToken.location.endLine = r.startLine, this.currentCharacterToken.location.endCol = r.startCol, this.currentCharacterToken.location.endOffset = r.startOffset), this.currentCharacterToken.type) {
          case Pi.TokenType.CHARACTER: {
            this.handler.onCharacter(this.currentCharacterToken);
            break;
          }
          case Pi.TokenType.NULL_CHARACTER: {
            this.handler.onNullCharacter(this.currentCharacterToken);
            break;
          }
          case Pi.TokenType.WHITESPACE_CHARACTER: {
            this.handler.onWhitespaceCharacter(this.currentCharacterToken);
            break;
          }
        }
        this.currentCharacterToken = null;
      }
    }
  }, {
    key: "_emitEOFToken",
    value: function() {
      const r = this.getCurrentLocation(0);
      r && (r.endLine = r.startLine, r.endCol = r.startCol, r.endOffset = r.startOffset), this._emitCurrentCharacterToken(r), this.handler.onEof({
        type: Pi.TokenType.EOF,
        location: r
      }), this.active = false;
    }
    //Characters emission
    //OPTIMIZATION: specification uses only one type of character tokens (one token per character).
    //This causes a huge memory overhead and a lot of unnecessary parser loops. parse5 uses 3 groups of characters.
    //If we have a sequence of characters that belong to the same group, the parser can process it
    //as a single solid character token.
    //So, there are 3 types of character tokens in parse5:
    //1)TokenType.NULL_CHARACTER - \u0000-character sequences (e.g. '\u0000\u0000\u0000')
    //2)TokenType.WHITESPACE_CHARACTER - any whitespace/new-line character sequences (e.g. '\n  \r\t   \f')
    //3)TokenType.CHARACTER - any character sequence which don't belong to groups 1 and 2 (e.g. 'abcdef1234@@#$%^')
  }, {
    key: "_appendCharToCurrentCharacterToken",
    value: function(r, n) {
      if (this.currentCharacterToken)
        if (this.currentCharacterToken.type !== r)
          this.currentLocation = this.getCurrentLocation(0), this._emitCurrentCharacterToken(this.currentLocation), this.preprocessor.dropParsedChunk();
        else {
          this.currentCharacterToken.chars += n;
          return;
        }
      this._createCharacterToken(r, n);
    }
  }, {
    key: "_emitCodePoint",
    value: function(r) {
      const n = RW(r) ? Pi.TokenType.WHITESPACE_CHARACTER : r === V.CODE_POINTS.NULL ? Pi.TokenType.NULL_CHARACTER : Pi.TokenType.CHARACTER;
      this._appendCharToCurrentCharacterToken(n, String.fromCodePoint(r));
    }
    //NOTE: used when we emit characters explicitly.
    //This is always for non-whitespace and non-null characters, which allows us to avoid additional checks.
  }, {
    key: "_emitChars",
    value: function(r) {
      this._appendCharToCurrentCharacterToken(Pi.TokenType.CHARACTER, r);
    }
    // Character reference helpers
  }, {
    key: "_matchNamedCharacterReference",
    value: function(r) {
      let n = null, i = 0, o = false;
      for (let a = 0, s = da.htmlDecodeTree[0]; a >= 0 && (a = (0, da.determineBranch)(da.htmlDecodeTree, s, a + 1, r), !(a < 0)); r = this._consume()) {
        i += 1, s = da.htmlDecodeTree[a];
        const l = s & da.BinTrieFlags.VALUE_LENGTH;
        if (l) {
          const u = (l >> 14) - 1;
          if (r !== V.CODE_POINTS.SEMICOLON && this._isCharacterReferenceInAttribute() && mSe(this.preprocessor.peek(1)) ? (n = [V.CODE_POINTS.AMPERSAND], a += u) : (n = u === 0 ? [da.htmlDecodeTree[a] & ~da.BinTrieFlags.VALUE_LENGTH] : u === 1 ? [da.htmlDecodeTree[++a]] : [da.htmlDecodeTree[++a], da.htmlDecodeTree[++a]], i = 0, o = r !== V.CODE_POINTS.SEMICOLON), u === 0) {
            this._consume();
            break;
          }
        }
      }
      return this._unconsume(i), o && !this.preprocessor.endOfChunkHit && this._err(Le.ERR.missingSemicolonAfterCharacterReference), this._unconsume(1), n;
    }
  }, {
    key: "_isCharacterReferenceInAttribute",
    value: function() {
      return this.returnState === te.ATTRIBUTE_VALUE_DOUBLE_QUOTED || this.returnState === te.ATTRIBUTE_VALUE_SINGLE_QUOTED || this.returnState === te.ATTRIBUTE_VALUE_UNQUOTED;
    }
  }, {
    key: "_flushCodePointConsumedAsCharacterReference",
    value: function(r) {
      this._isCharacterReferenceInAttribute() ? this.currentAttr.value += String.fromCodePoint(r) : this._emitCodePoint(r);
    }
    // Calling states this way turns out to be much faster than any other approach.
  }, {
    key: "_callState",
    value: function(r) {
      switch (this.state) {
        case te.DATA: {
          this._stateData(r);
          break;
        }
        case te.RCDATA: {
          this._stateRcdata(r);
          break;
        }
        case te.RAWTEXT: {
          this._stateRawtext(r);
          break;
        }
        case te.SCRIPT_DATA: {
          this._stateScriptData(r);
          break;
        }
        case te.PLAINTEXT: {
          this._statePlaintext(r);
          break;
        }
        case te.TAG_OPEN: {
          this._stateTagOpen(r);
          break;
        }
        case te.END_TAG_OPEN: {
          this._stateEndTagOpen(r);
          break;
        }
        case te.TAG_NAME: {
          this._stateTagName(r);
          break;
        }
        case te.RCDATA_LESS_THAN_SIGN: {
          this._stateRcdataLessThanSign(r);
          break;
        }
        case te.RCDATA_END_TAG_OPEN: {
          this._stateRcdataEndTagOpen(r);
          break;
        }
        case te.RCDATA_END_TAG_NAME: {
          this._stateRcdataEndTagName(r);
          break;
        }
        case te.RAWTEXT_LESS_THAN_SIGN: {
          this._stateRawtextLessThanSign(r);
          break;
        }
        case te.RAWTEXT_END_TAG_OPEN: {
          this._stateRawtextEndTagOpen(r);
          break;
        }
        case te.RAWTEXT_END_TAG_NAME: {
          this._stateRawtextEndTagName(r);
          break;
        }
        case te.SCRIPT_DATA_LESS_THAN_SIGN: {
          this._stateScriptDataLessThanSign(r);
          break;
        }
        case te.SCRIPT_DATA_END_TAG_OPEN: {
          this._stateScriptDataEndTagOpen(r);
          break;
        }
        case te.SCRIPT_DATA_END_TAG_NAME: {
          this._stateScriptDataEndTagName(r);
          break;
        }
        case te.SCRIPT_DATA_ESCAPE_START: {
          this._stateScriptDataEscapeStart(r);
          break;
        }
        case te.SCRIPT_DATA_ESCAPE_START_DASH: {
          this._stateScriptDataEscapeStartDash(r);
          break;
        }
        case te.SCRIPT_DATA_ESCAPED: {
          this._stateScriptDataEscaped(r);
          break;
        }
        case te.SCRIPT_DATA_ESCAPED_DASH: {
          this._stateScriptDataEscapedDash(r);
          break;
        }
        case te.SCRIPT_DATA_ESCAPED_DASH_DASH: {
          this._stateScriptDataEscapedDashDash(r);
          break;
        }
        case te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN: {
          this._stateScriptDataEscapedLessThanSign(r);
          break;
        }
        case te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN: {
          this._stateScriptDataEscapedEndTagOpen(r);
          break;
        }
        case te.SCRIPT_DATA_ESCAPED_END_TAG_NAME: {
          this._stateScriptDataEscapedEndTagName(r);
          break;
        }
        case te.SCRIPT_DATA_DOUBLE_ESCAPE_START: {
          this._stateScriptDataDoubleEscapeStart(r);
          break;
        }
        case te.SCRIPT_DATA_DOUBLE_ESCAPED: {
          this._stateScriptDataDoubleEscaped(r);
          break;
        }
        case te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH: {
          this._stateScriptDataDoubleEscapedDash(r);
          break;
        }
        case te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH: {
          this._stateScriptDataDoubleEscapedDashDash(r);
          break;
        }
        case te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN: {
          this._stateScriptDataDoubleEscapedLessThanSign(r);
          break;
        }
        case te.SCRIPT_DATA_DOUBLE_ESCAPE_END: {
          this._stateScriptDataDoubleEscapeEnd(r);
          break;
        }
        case te.BEFORE_ATTRIBUTE_NAME: {
          this._stateBeforeAttributeName(r);
          break;
        }
        case te.ATTRIBUTE_NAME: {
          this._stateAttributeName(r);
          break;
        }
        case te.AFTER_ATTRIBUTE_NAME: {
          this._stateAfterAttributeName(r);
          break;
        }
        case te.BEFORE_ATTRIBUTE_VALUE: {
          this._stateBeforeAttributeValue(r);
          break;
        }
        case te.ATTRIBUTE_VALUE_DOUBLE_QUOTED: {
          this._stateAttributeValueDoubleQuoted(r);
          break;
        }
        case te.ATTRIBUTE_VALUE_SINGLE_QUOTED: {
          this._stateAttributeValueSingleQuoted(r);
          break;
        }
        case te.ATTRIBUTE_VALUE_UNQUOTED: {
          this._stateAttributeValueUnquoted(r);
          break;
        }
        case te.AFTER_ATTRIBUTE_VALUE_QUOTED: {
          this._stateAfterAttributeValueQuoted(r);
          break;
        }
        case te.SELF_CLOSING_START_TAG: {
          this._stateSelfClosingStartTag(r);
          break;
        }
        case te.BOGUS_COMMENT: {
          this._stateBogusComment(r);
          break;
        }
        case te.MARKUP_DECLARATION_OPEN: {
          this._stateMarkupDeclarationOpen(r);
          break;
        }
        case te.COMMENT_START: {
          this._stateCommentStart(r);
          break;
        }
        case te.COMMENT_START_DASH: {
          this._stateCommentStartDash(r);
          break;
        }
        case te.COMMENT: {
          this._stateComment(r);
          break;
        }
        case te.COMMENT_LESS_THAN_SIGN: {
          this._stateCommentLessThanSign(r);
          break;
        }
        case te.COMMENT_LESS_THAN_SIGN_BANG: {
          this._stateCommentLessThanSignBang(r);
          break;
        }
        case te.COMMENT_LESS_THAN_SIGN_BANG_DASH: {
          this._stateCommentLessThanSignBangDash(r);
          break;
        }
        case te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH: {
          this._stateCommentLessThanSignBangDashDash(r);
          break;
        }
        case te.COMMENT_END_DASH: {
          this._stateCommentEndDash(r);
          break;
        }
        case te.COMMENT_END: {
          this._stateCommentEnd(r);
          break;
        }
        case te.COMMENT_END_BANG: {
          this._stateCommentEndBang(r);
          break;
        }
        case te.DOCTYPE: {
          this._stateDoctype(r);
          break;
        }
        case te.BEFORE_DOCTYPE_NAME: {
          this._stateBeforeDoctypeName(r);
          break;
        }
        case te.DOCTYPE_NAME: {
          this._stateDoctypeName(r);
          break;
        }
        case te.AFTER_DOCTYPE_NAME: {
          this._stateAfterDoctypeName(r);
          break;
        }
        case te.AFTER_DOCTYPE_PUBLIC_KEYWORD: {
          this._stateAfterDoctypePublicKeyword(r);
          break;
        }
        case te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER: {
          this._stateBeforeDoctypePublicIdentifier(r);
          break;
        }
        case te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED: {
          this._stateDoctypePublicIdentifierDoubleQuoted(r);
          break;
        }
        case te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED: {
          this._stateDoctypePublicIdentifierSingleQuoted(r);
          break;
        }
        case te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER: {
          this._stateAfterDoctypePublicIdentifier(r);
          break;
        }
        case te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS: {
          this._stateBetweenDoctypePublicAndSystemIdentifiers(r);
          break;
        }
        case te.AFTER_DOCTYPE_SYSTEM_KEYWORD: {
          this._stateAfterDoctypeSystemKeyword(r);
          break;
        }
        case te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER: {
          this._stateBeforeDoctypeSystemIdentifier(r);
          break;
        }
        case te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED: {
          this._stateDoctypeSystemIdentifierDoubleQuoted(r);
          break;
        }
        case te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED: {
          this._stateDoctypeSystemIdentifierSingleQuoted(r);
          break;
        }
        case te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER: {
          this._stateAfterDoctypeSystemIdentifier(r);
          break;
        }
        case te.BOGUS_DOCTYPE: {
          this._stateBogusDoctype(r);
          break;
        }
        case te.CDATA_SECTION: {
          this._stateCdataSection(r);
          break;
        }
        case te.CDATA_SECTION_BRACKET: {
          this._stateCdataSectionBracket(r);
          break;
        }
        case te.CDATA_SECTION_END: {
          this._stateCdataSectionEnd(r);
          break;
        }
        case te.CHARACTER_REFERENCE: {
          this._stateCharacterReference(r);
          break;
        }
        case te.NAMED_CHARACTER_REFERENCE: {
          this._stateNamedCharacterReference(r);
          break;
        }
        case te.AMBIGUOUS_AMPERSAND: {
          this._stateAmbiguousAmpersand(r);
          break;
        }
        case te.NUMERIC_CHARACTER_REFERENCE: {
          this._stateNumericCharacterReference(r);
          break;
        }
        case te.HEXADEMICAL_CHARACTER_REFERENCE_START: {
          this._stateHexademicalCharacterReferenceStart(r);
          break;
        }
        case te.HEXADEMICAL_CHARACTER_REFERENCE: {
          this._stateHexademicalCharacterReference(r);
          break;
        }
        case te.DECIMAL_CHARACTER_REFERENCE: {
          this._stateDecimalCharacterReference(r);
          break;
        }
        case te.NUMERIC_CHARACTER_REFERENCE_END: {
          this._stateNumericCharacterReferenceEnd(r);
          break;
        }
        default:
          throw new Error("Unknown state");
      }
    }
    // State machine
    // Data state
    //------------------------------------------------------------------
  }, {
    key: "_stateData",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = te.TAG_OPEN;
          break;
        }
        case V.CODE_POINTS.AMPERSAND: {
          this.returnState = te.DATA, this.state = te.CHARACTER_REFERENCE;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this._emitCodePoint(r);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    //  RCDATA state
    //------------------------------------------------------------------
  }, {
    key: "_stateRcdata",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.AMPERSAND: {
          this.returnState = te.RCDATA, this.state = te.CHARACTER_REFERENCE;
          break;
        }
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = te.RCDATA_LESS_THAN_SIGN;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this._emitChars(V.REPLACEMENT_CHARACTER);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // RAWTEXT state
    //------------------------------------------------------------------
  }, {
    key: "_stateRawtext",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = te.RAWTEXT_LESS_THAN_SIGN;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this._emitChars(V.REPLACEMENT_CHARACTER);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // Script data state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptData",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = te.SCRIPT_DATA_LESS_THAN_SIGN;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this._emitChars(V.REPLACEMENT_CHARACTER);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // PLAINTEXT state
    //------------------------------------------------------------------
  }, {
    key: "_statePlaintext",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this._emitChars(V.REPLACEMENT_CHARACTER);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // Tag open state
    //------------------------------------------------------------------
  }, {
    key: "_stateTagOpen",
    value: function(r) {
      if (dl(r))
        this._createStartTagToken(), this.state = te.TAG_NAME, this._stateTagName(r);
      else
        switch (r) {
          case V.CODE_POINTS.EXCLAMATION_MARK: {
            this.state = te.MARKUP_DECLARATION_OPEN;
            break;
          }
          case V.CODE_POINTS.SOLIDUS: {
            this.state = te.END_TAG_OPEN;
            break;
          }
          case V.CODE_POINTS.QUESTION_MARK: {
            this._err(Le.ERR.unexpectedQuestionMarkInsteadOfTagName), this._createCommentToken(1), this.state = te.BOGUS_COMMENT, this._stateBogusComment(r);
            break;
          }
          case V.CODE_POINTS.EOF: {
            this._err(Le.ERR.eofBeforeTagName), this._emitChars("<"), this._emitEOFToken();
            break;
          }
          default:
            this._err(Le.ERR.invalidFirstCharacterOfTagName), this._emitChars("<"), this.state = te.DATA, this._stateData(r);
        }
    }
    // End tag open state
    //------------------------------------------------------------------
  }, {
    key: "_stateEndTagOpen",
    value: function(r) {
      if (dl(r))
        this._createEndTagToken(), this.state = te.TAG_NAME, this._stateTagName(r);
      else
        switch (r) {
          case V.CODE_POINTS.GREATER_THAN_SIGN: {
            this._err(Le.ERR.missingEndTagName), this.state = te.DATA;
            break;
          }
          case V.CODE_POINTS.EOF: {
            this._err(Le.ERR.eofBeforeTagName), this._emitChars("</"), this._emitEOFToken();
            break;
          }
          default:
            this._err(Le.ERR.invalidFirstCharacterOfTagName), this._createCommentToken(2), this.state = te.BOGUS_COMMENT, this._stateBogusComment(r);
        }
    }
    // Tag name state
    //------------------------------------------------------------------
  }, {
    key: "_stateTagName",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED: {
          this.state = te.BEFORE_ATTRIBUTE_NAME;
          break;
        }
        case V.CODE_POINTS.SOLIDUS: {
          this.state = te.SELF_CLOSING_START_TAG;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = te.DATA, this.emitCurrentTagToken();
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), n.tagName += V.REPLACEMENT_CHARACTER;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          n.tagName += String.fromCodePoint(Im(r) ? g_(r) : r);
      }
    }
    // RCDATA less-than sign state
    //------------------------------------------------------------------
  }, {
    key: "_stateRcdataLessThanSign",
    value: function(r) {
      r === V.CODE_POINTS.SOLIDUS ? this.state = te.RCDATA_END_TAG_OPEN : (this._emitChars("<"), this.state = te.RCDATA, this._stateRcdata(r));
    }
    // RCDATA end tag open state
    //------------------------------------------------------------------
  }, {
    key: "_stateRcdataEndTagOpen",
    value: function(r) {
      dl(r) ? (this.state = te.RCDATA_END_TAG_NAME, this._stateRcdataEndTagName(r)) : (this._emitChars("</"), this.state = te.RCDATA, this._stateRcdata(r));
    }
  }, {
    key: "handleSpecialEndTag",
    value: function(r) {
      if (!this.preprocessor.startsWith(this.lastStartTagName, false))
        return !this._ensureHibernation();
      this._createEndTagToken();
      const n = this.currentToken;
      switch (n.tagName = this.lastStartTagName, this.preprocessor.peek(this.lastStartTagName.length)) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED:
          return this._advanceBy(this.lastStartTagName.length), this.state = te.BEFORE_ATTRIBUTE_NAME, false;
        case V.CODE_POINTS.SOLIDUS:
          return this._advanceBy(this.lastStartTagName.length), this.state = te.SELF_CLOSING_START_TAG, false;
        case V.CODE_POINTS.GREATER_THAN_SIGN:
          return this._advanceBy(this.lastStartTagName.length), this.emitCurrentTagToken(), this.state = te.DATA, false;
        default:
          return !this._ensureHibernation();
      }
    }
    // RCDATA end tag name state
    //------------------------------------------------------------------
  }, {
    key: "_stateRcdataEndTagName",
    value: function(r) {
      this.handleSpecialEndTag(r) && (this._emitChars("</"), this.state = te.RCDATA, this._stateRcdata(r));
    }
    // RAWTEXT less-than sign state
    //------------------------------------------------------------------
  }, {
    key: "_stateRawtextLessThanSign",
    value: function(r) {
      r === V.CODE_POINTS.SOLIDUS ? this.state = te.RAWTEXT_END_TAG_OPEN : (this._emitChars("<"), this.state = te.RAWTEXT, this._stateRawtext(r));
    }
    // RAWTEXT end tag open state
    //------------------------------------------------------------------
  }, {
    key: "_stateRawtextEndTagOpen",
    value: function(r) {
      dl(r) ? (this.state = te.RAWTEXT_END_TAG_NAME, this._stateRawtextEndTagName(r)) : (this._emitChars("</"), this.state = te.RAWTEXT, this._stateRawtext(r));
    }
    // RAWTEXT end tag name state
    //------------------------------------------------------------------
  }, {
    key: "_stateRawtextEndTagName",
    value: function(r) {
      this.handleSpecialEndTag(r) && (this._emitChars("</"), this.state = te.RAWTEXT, this._stateRawtext(r));
    }
    // Script data less-than sign state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataLessThanSign",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.SOLIDUS: {
          this.state = te.SCRIPT_DATA_END_TAG_OPEN;
          break;
        }
        case V.CODE_POINTS.EXCLAMATION_MARK: {
          this.state = te.SCRIPT_DATA_ESCAPE_START, this._emitChars("<!");
          break;
        }
        default:
          this._emitChars("<"), this.state = te.SCRIPT_DATA, this._stateScriptData(r);
      }
    }
    // Script data end tag open state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEndTagOpen",
    value: function(r) {
      dl(r) ? (this.state = te.SCRIPT_DATA_END_TAG_NAME, this._stateScriptDataEndTagName(r)) : (this._emitChars("</"), this.state = te.SCRIPT_DATA, this._stateScriptData(r));
    }
    // Script data end tag name state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEndTagName",
    value: function(r) {
      this.handleSpecialEndTag(r) && (this._emitChars("</"), this.state = te.SCRIPT_DATA, this._stateScriptData(r));
    }
    // Script data escape start state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapeStart",
    value: function(r) {
      r === V.CODE_POINTS.HYPHEN_MINUS ? (this.state = te.SCRIPT_DATA_ESCAPE_START_DASH, this._emitChars("-")) : (this.state = te.SCRIPT_DATA, this._stateScriptData(r));
    }
    // Script data escape start dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapeStartDash",
    value: function(r) {
      r === V.CODE_POINTS.HYPHEN_MINUS ? (this.state = te.SCRIPT_DATA_ESCAPED_DASH_DASH, this._emitChars("-")) : (this.state = te.SCRIPT_DATA, this._stateScriptData(r));
    }
    // Script data escaped state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscaped",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.HYPHEN_MINUS: {
          this.state = te.SCRIPT_DATA_ESCAPED_DASH, this._emitChars("-");
          break;
        }
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this._emitChars(V.REPLACEMENT_CHARACTER);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInScriptHtmlCommentLikeText), this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // Script data escaped dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapedDash",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.HYPHEN_MINUS: {
          this.state = te.SCRIPT_DATA_ESCAPED_DASH_DASH, this._emitChars("-");
          break;
        }
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this.state = te.SCRIPT_DATA_ESCAPED, this._emitChars(V.REPLACEMENT_CHARACTER);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInScriptHtmlCommentLikeText), this._emitEOFToken();
          break;
        }
        default:
          this.state = te.SCRIPT_DATA_ESCAPED, this._emitCodePoint(r);
      }
    }
    // Script data escaped dash dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapedDashDash",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.HYPHEN_MINUS: {
          this._emitChars("-");
          break;
        }
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = te.SCRIPT_DATA, this._emitChars(">");
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this.state = te.SCRIPT_DATA_ESCAPED, this._emitChars(V.REPLACEMENT_CHARACTER);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInScriptHtmlCommentLikeText), this._emitEOFToken();
          break;
        }
        default:
          this.state = te.SCRIPT_DATA_ESCAPED, this._emitCodePoint(r);
      }
    }
    // Script data escaped less-than sign state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapedLessThanSign",
    value: function(r) {
      r === V.CODE_POINTS.SOLIDUS ? this.state = te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN : dl(r) ? (this._emitChars("<"), this.state = te.SCRIPT_DATA_DOUBLE_ESCAPE_START, this._stateScriptDataDoubleEscapeStart(r)) : (this._emitChars("<"), this.state = te.SCRIPT_DATA_ESCAPED, this._stateScriptDataEscaped(r));
    }
    // Script data escaped end tag open state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapedEndTagOpen",
    value: function(r) {
      dl(r) ? (this.state = te.SCRIPT_DATA_ESCAPED_END_TAG_NAME, this._stateScriptDataEscapedEndTagName(r)) : (this._emitChars("</"), this.state = te.SCRIPT_DATA_ESCAPED, this._stateScriptDataEscaped(r));
    }
    // Script data escaped end tag name state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapedEndTagName",
    value: function(r) {
      this.handleSpecialEndTag(r) && (this._emitChars("</"), this.state = te.SCRIPT_DATA_ESCAPED, this._stateScriptDataEscaped(r));
    }
    // Script data double escape start state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataDoubleEscapeStart",
    value: function(r) {
      if (this.preprocessor.startsWith(V.SEQUENCES.SCRIPT, false) && zH(this.preprocessor.peek(V.SEQUENCES.SCRIPT.length))) {
        this._emitCodePoint(r);
        for (let n = 0; n < V.SEQUENCES.SCRIPT.length; n++)
          this._emitCodePoint(this._consume());
        this.state = te.SCRIPT_DATA_DOUBLE_ESCAPED;
      } else
        this._ensureHibernation() || (this.state = te.SCRIPT_DATA_ESCAPED, this._stateScriptDataEscaped(r));
    }
    // Script data double escaped state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataDoubleEscaped",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.HYPHEN_MINUS: {
          this.state = te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH, this._emitChars("-");
          break;
        }
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN, this._emitChars("<");
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this._emitChars(V.REPLACEMENT_CHARACTER);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInScriptHtmlCommentLikeText), this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // Script data double escaped dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataDoubleEscapedDash",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.HYPHEN_MINUS: {
          this.state = te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH, this._emitChars("-");
          break;
        }
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN, this._emitChars("<");
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this.state = te.SCRIPT_DATA_DOUBLE_ESCAPED, this._emitChars(V.REPLACEMENT_CHARACTER);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInScriptHtmlCommentLikeText), this._emitEOFToken();
          break;
        }
        default:
          this.state = te.SCRIPT_DATA_DOUBLE_ESCAPED, this._emitCodePoint(r);
      }
    }
    // Script data double escaped dash dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataDoubleEscapedDashDash",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.HYPHEN_MINUS: {
          this._emitChars("-");
          break;
        }
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN, this._emitChars("<");
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = te.SCRIPT_DATA, this._emitChars(">");
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this.state = te.SCRIPT_DATA_DOUBLE_ESCAPED, this._emitChars(V.REPLACEMENT_CHARACTER);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInScriptHtmlCommentLikeText), this._emitEOFToken();
          break;
        }
        default:
          this.state = te.SCRIPT_DATA_DOUBLE_ESCAPED, this._emitCodePoint(r);
      }
    }
    // Script data double escaped less-than sign state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataDoubleEscapedLessThanSign",
    value: function(r) {
      r === V.CODE_POINTS.SOLIDUS ? (this.state = te.SCRIPT_DATA_DOUBLE_ESCAPE_END, this._emitChars("/")) : (this.state = te.SCRIPT_DATA_DOUBLE_ESCAPED, this._stateScriptDataDoubleEscaped(r));
    }
    // Script data double escape end state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataDoubleEscapeEnd",
    value: function(r) {
      if (this.preprocessor.startsWith(V.SEQUENCES.SCRIPT, false) && zH(this.preprocessor.peek(V.SEQUENCES.SCRIPT.length))) {
        this._emitCodePoint(r);
        for (let n = 0; n < V.SEQUENCES.SCRIPT.length; n++)
          this._emitCodePoint(this._consume());
        this.state = te.SCRIPT_DATA_ESCAPED;
      } else
        this._ensureHibernation() || (this.state = te.SCRIPT_DATA_DOUBLE_ESCAPED, this._stateScriptDataDoubleEscaped(r));
    }
    // Before attribute name state
    //------------------------------------------------------------------
  }, {
    key: "_stateBeforeAttributeName",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED:
          break;
        case V.CODE_POINTS.SOLIDUS:
        case V.CODE_POINTS.GREATER_THAN_SIGN:
        case V.CODE_POINTS.EOF: {
          this.state = te.AFTER_ATTRIBUTE_NAME, this._stateAfterAttributeName(r);
          break;
        }
        case V.CODE_POINTS.EQUALS_SIGN: {
          this._err(Le.ERR.unexpectedEqualsSignBeforeAttributeName), this._createAttr("="), this.state = te.ATTRIBUTE_NAME;
          break;
        }
        default:
          this._createAttr(""), this.state = te.ATTRIBUTE_NAME, this._stateAttributeName(r);
      }
    }
    // Attribute name state
    //------------------------------------------------------------------
  }, {
    key: "_stateAttributeName",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED:
        case V.CODE_POINTS.SOLIDUS:
        case V.CODE_POINTS.GREATER_THAN_SIGN:
        case V.CODE_POINTS.EOF: {
          this._leaveAttrName(), this.state = te.AFTER_ATTRIBUTE_NAME, this._stateAfterAttributeName(r);
          break;
        }
        case V.CODE_POINTS.EQUALS_SIGN: {
          this._leaveAttrName(), this.state = te.BEFORE_ATTRIBUTE_VALUE;
          break;
        }
        case V.CODE_POINTS.QUOTATION_MARK:
        case V.CODE_POINTS.APOSTROPHE:
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          this._err(Le.ERR.unexpectedCharacterInAttributeName), this.currentAttr.name += String.fromCodePoint(r);
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this.currentAttr.name += V.REPLACEMENT_CHARACTER;
          break;
        }
        default:
          this.currentAttr.name += String.fromCodePoint(Im(r) ? g_(r) : r);
      }
    }
    // After attribute name state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterAttributeName",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED:
          break;
        case V.CODE_POINTS.SOLIDUS: {
          this.state = te.SELF_CLOSING_START_TAG;
          break;
        }
        case V.CODE_POINTS.EQUALS_SIGN: {
          this.state = te.BEFORE_ATTRIBUTE_VALUE;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = te.DATA, this.emitCurrentTagToken();
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          this._createAttr(""), this.state = te.ATTRIBUTE_NAME, this._stateAttributeName(r);
      }
    }
    // Before attribute value state
    //------------------------------------------------------------------
  }, {
    key: "_stateBeforeAttributeValue",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED:
          break;
        case V.CODE_POINTS.QUOTATION_MARK: {
          this.state = te.ATTRIBUTE_VALUE_DOUBLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.APOSTROPHE: {
          this.state = te.ATTRIBUTE_VALUE_SINGLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Le.ERR.missingAttributeValue), this.state = te.DATA, this.emitCurrentTagToken();
          break;
        }
        default:
          this.state = te.ATTRIBUTE_VALUE_UNQUOTED, this._stateAttributeValueUnquoted(r);
      }
    }
    // Attribute value (double-quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateAttributeValueDoubleQuoted",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.QUOTATION_MARK: {
          this.state = te.AFTER_ATTRIBUTE_VALUE_QUOTED;
          break;
        }
        case V.CODE_POINTS.AMPERSAND: {
          this.returnState = te.ATTRIBUTE_VALUE_DOUBLE_QUOTED, this.state = te.CHARACTER_REFERENCE;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this.currentAttr.value += V.REPLACEMENT_CHARACTER;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          this.currentAttr.value += String.fromCodePoint(r);
      }
    }
    // Attribute value (single-quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateAttributeValueSingleQuoted",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.APOSTROPHE: {
          this.state = te.AFTER_ATTRIBUTE_VALUE_QUOTED;
          break;
        }
        case V.CODE_POINTS.AMPERSAND: {
          this.returnState = te.ATTRIBUTE_VALUE_SINGLE_QUOTED, this.state = te.CHARACTER_REFERENCE;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this.currentAttr.value += V.REPLACEMENT_CHARACTER;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          this.currentAttr.value += String.fromCodePoint(r);
      }
    }
    // Attribute value (unquoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateAttributeValueUnquoted",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED: {
          this._leaveAttrValue(), this.state = te.BEFORE_ATTRIBUTE_NAME;
          break;
        }
        case V.CODE_POINTS.AMPERSAND: {
          this.returnState = te.ATTRIBUTE_VALUE_UNQUOTED, this.state = te.CHARACTER_REFERENCE;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._leaveAttrValue(), this.state = te.DATA, this.emitCurrentTagToken();
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), this.currentAttr.value += V.REPLACEMENT_CHARACTER;
          break;
        }
        case V.CODE_POINTS.QUOTATION_MARK:
        case V.CODE_POINTS.APOSTROPHE:
        case V.CODE_POINTS.LESS_THAN_SIGN:
        case V.CODE_POINTS.EQUALS_SIGN:
        case V.CODE_POINTS.GRAVE_ACCENT: {
          this._err(Le.ERR.unexpectedCharacterInUnquotedAttributeValue), this.currentAttr.value += String.fromCodePoint(r);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          this.currentAttr.value += String.fromCodePoint(r);
      }
    }
    // After attribute value (quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterAttributeValueQuoted",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED: {
          this._leaveAttrValue(), this.state = te.BEFORE_ATTRIBUTE_NAME;
          break;
        }
        case V.CODE_POINTS.SOLIDUS: {
          this._leaveAttrValue(), this.state = te.SELF_CLOSING_START_TAG;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._leaveAttrValue(), this.state = te.DATA, this.emitCurrentTagToken();
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          this._err(Le.ERR.missingWhitespaceBetweenAttributes), this.state = te.BEFORE_ATTRIBUTE_NAME, this._stateBeforeAttributeName(r);
      }
    }
    // Self-closing start tag state
    //------------------------------------------------------------------
  }, {
    key: "_stateSelfClosingStartTag",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          const n = this.currentToken;
          n.selfClosing = true, this.state = te.DATA, this.emitCurrentTagToken();
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          this._err(Le.ERR.unexpectedSolidusInTag), this.state = te.BEFORE_ATTRIBUTE_NAME, this._stateBeforeAttributeName(r);
      }
    }
    // Bogus comment state
    //------------------------------------------------------------------
  }, {
    key: "_stateBogusComment",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = te.DATA, this.emitCurrentComment(n);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this.emitCurrentComment(n), this._emitEOFToken();
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), n.data += V.REPLACEMENT_CHARACTER;
          break;
        }
        default:
          n.data += String.fromCodePoint(r);
      }
    }
    // Markup declaration open state
    //------------------------------------------------------------------
  }, {
    key: "_stateMarkupDeclarationOpen",
    value: function(r) {
      this._consumeSequenceIfMatch(V.SEQUENCES.DASH_DASH, true) ? (this._createCommentToken(V.SEQUENCES.DASH_DASH.length + 1), this.state = te.COMMENT_START) : this._consumeSequenceIfMatch(V.SEQUENCES.DOCTYPE, false) ? (this.currentLocation = this.getCurrentLocation(V.SEQUENCES.DOCTYPE.length + 1), this.state = te.DOCTYPE) : this._consumeSequenceIfMatch(V.SEQUENCES.CDATA_START, true) ? this.inForeignNode ? this.state = te.CDATA_SECTION : (this._err(Le.ERR.cdataInHtmlContent), this._createCommentToken(V.SEQUENCES.CDATA_START.length + 1), this.currentToken.data = "[CDATA[", this.state = te.BOGUS_COMMENT) : this._ensureHibernation() || (this._err(Le.ERR.incorrectlyOpenedComment), this._createCommentToken(2), this.state = te.BOGUS_COMMENT, this._stateBogusComment(r));
    }
    // Comment start state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentStart",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.HYPHEN_MINUS: {
          this.state = te.COMMENT_START_DASH;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Le.ERR.abruptClosingOfEmptyComment), this.state = te.DATA;
          const n = this.currentToken;
          this.emitCurrentComment(n);
          break;
        }
        default:
          this.state = te.COMMENT, this._stateComment(r);
      }
    }
    // Comment start dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentStartDash",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.HYPHEN_MINUS: {
          this.state = te.COMMENT_END;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Le.ERR.abruptClosingOfEmptyComment), this.state = te.DATA, this.emitCurrentComment(n);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInComment), this.emitCurrentComment(n), this._emitEOFToken();
          break;
        }
        default:
          n.data += "-", this.state = te.COMMENT, this._stateComment(r);
      }
    }
    // Comment state
    //------------------------------------------------------------------
  }, {
    key: "_stateComment",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.HYPHEN_MINUS: {
          this.state = te.COMMENT_END_DASH;
          break;
        }
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          n.data += "<", this.state = te.COMMENT_LESS_THAN_SIGN;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), n.data += V.REPLACEMENT_CHARACTER;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInComment), this.emitCurrentComment(n), this._emitEOFToken();
          break;
        }
        default:
          n.data += String.fromCodePoint(r);
      }
    }
    // Comment less-than sign state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentLessThanSign",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.EXCLAMATION_MARK: {
          n.data += "!", this.state = te.COMMENT_LESS_THAN_SIGN_BANG;
          break;
        }
        case V.CODE_POINTS.LESS_THAN_SIGN: {
          n.data += "<";
          break;
        }
        default:
          this.state = te.COMMENT, this._stateComment(r);
      }
    }
    // Comment less-than sign bang state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentLessThanSignBang",
    value: function(r) {
      r === V.CODE_POINTS.HYPHEN_MINUS ? this.state = te.COMMENT_LESS_THAN_SIGN_BANG_DASH : (this.state = te.COMMENT, this._stateComment(r));
    }
    // Comment less-than sign bang dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentLessThanSignBangDash",
    value: function(r) {
      r === V.CODE_POINTS.HYPHEN_MINUS ? this.state = te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH : (this.state = te.COMMENT_END_DASH, this._stateCommentEndDash(r));
    }
    // Comment less-than sign bang dash dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentLessThanSignBangDashDash",
    value: function(r) {
      r !== V.CODE_POINTS.GREATER_THAN_SIGN && r !== V.CODE_POINTS.EOF && this._err(Le.ERR.nestedComment), this.state = te.COMMENT_END, this._stateCommentEnd(r);
    }
    // Comment end dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentEndDash",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.HYPHEN_MINUS: {
          this.state = te.COMMENT_END;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInComment), this.emitCurrentComment(n), this._emitEOFToken();
          break;
        }
        default:
          n.data += "-", this.state = te.COMMENT, this._stateComment(r);
      }
    }
    // Comment end state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentEnd",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = te.DATA, this.emitCurrentComment(n);
          break;
        }
        case V.CODE_POINTS.EXCLAMATION_MARK: {
          this.state = te.COMMENT_END_BANG;
          break;
        }
        case V.CODE_POINTS.HYPHEN_MINUS: {
          n.data += "-";
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInComment), this.emitCurrentComment(n), this._emitEOFToken();
          break;
        }
        default:
          n.data += "--", this.state = te.COMMENT, this._stateComment(r);
      }
    }
    // Comment end bang state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentEndBang",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.HYPHEN_MINUS: {
          n.data += "--!", this.state = te.COMMENT_END_DASH;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Le.ERR.incorrectlyClosedComment), this.state = te.DATA, this.emitCurrentComment(n);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInComment), this.emitCurrentComment(n), this._emitEOFToken();
          break;
        }
        default:
          n.data += "--!", this.state = te.COMMENT, this._stateComment(r);
      }
    }
    // DOCTYPE state
    //------------------------------------------------------------------
  }, {
    key: "_stateDoctype",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED: {
          this.state = te.BEFORE_DOCTYPE_NAME;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = te.BEFORE_DOCTYPE_NAME, this._stateBeforeDoctypeName(r);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), this._createDoctypeToken(null);
          const n = this.currentToken;
          n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Le.ERR.missingWhitespaceBeforeDoctypeName), this.state = te.BEFORE_DOCTYPE_NAME, this._stateBeforeDoctypeName(r);
      }
    }
    // Before DOCTYPE name state
    //------------------------------------------------------------------
  }, {
    key: "_stateBeforeDoctypeName",
    value: function(r) {
      if (Im(r))
        this._createDoctypeToken(String.fromCharCode(g_(r))), this.state = te.DOCTYPE_NAME;
      else
        switch (r) {
          case V.CODE_POINTS.SPACE:
          case V.CODE_POINTS.LINE_FEED:
          case V.CODE_POINTS.TABULATION:
          case V.CODE_POINTS.FORM_FEED:
            break;
          case V.CODE_POINTS.NULL: {
            this._err(Le.ERR.unexpectedNullCharacter), this._createDoctypeToken(V.REPLACEMENT_CHARACTER), this.state = te.DOCTYPE_NAME;
            break;
          }
          case V.CODE_POINTS.GREATER_THAN_SIGN: {
            this._err(Le.ERR.missingDoctypeName), this._createDoctypeToken(null);
            const n = this.currentToken;
            n.forceQuirks = true, this.emitCurrentDoctype(n), this.state = te.DATA;
            break;
          }
          case V.CODE_POINTS.EOF: {
            this._err(Le.ERR.eofInDoctype), this._createDoctypeToken(null);
            const n = this.currentToken;
            n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
            break;
          }
          default:
            this._createDoctypeToken(String.fromCodePoint(r)), this.state = te.DOCTYPE_NAME;
        }
    }
    // DOCTYPE name state
    //------------------------------------------------------------------
  }, {
    key: "_stateDoctypeName",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED: {
          this.state = te.AFTER_DOCTYPE_NAME;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = te.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), n.name += V.REPLACEMENT_CHARACTER;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          n.name += String.fromCodePoint(Im(r) ? g_(r) : r);
      }
    }
    // After DOCTYPE name state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterDoctypeName",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED:
          break;
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = te.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._consumeSequenceIfMatch(V.SEQUENCES.PUBLIC, false) ? this.state = te.AFTER_DOCTYPE_PUBLIC_KEYWORD : this._consumeSequenceIfMatch(V.SEQUENCES.SYSTEM, false) ? this.state = te.AFTER_DOCTYPE_SYSTEM_KEYWORD : this._ensureHibernation() || (this._err(Le.ERR.invalidCharacterSequenceAfterDoctypeName), n.forceQuirks = true, this.state = te.BOGUS_DOCTYPE, this._stateBogusDoctype(r));
      }
    }
    // After DOCTYPE public keyword state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterDoctypePublicKeyword",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED: {
          this.state = te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;
          break;
        }
        case V.CODE_POINTS.QUOTATION_MARK: {
          this._err(Le.ERR.missingWhitespaceAfterDoctypePublicKeyword), n.publicId = "", this.state = te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.APOSTROPHE: {
          this._err(Le.ERR.missingWhitespaceAfterDoctypePublicKeyword), n.publicId = "", this.state = te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Le.ERR.missingDoctypePublicIdentifier), n.forceQuirks = true, this.state = te.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Le.ERR.missingQuoteBeforeDoctypePublicIdentifier), n.forceQuirks = true, this.state = te.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // Before DOCTYPE public identifier state
    //------------------------------------------------------------------
  }, {
    key: "_stateBeforeDoctypePublicIdentifier",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED:
          break;
        case V.CODE_POINTS.QUOTATION_MARK: {
          n.publicId = "", this.state = te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.APOSTROPHE: {
          n.publicId = "", this.state = te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Le.ERR.missingDoctypePublicIdentifier), n.forceQuirks = true, this.state = te.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Le.ERR.missingQuoteBeforeDoctypePublicIdentifier), n.forceQuirks = true, this.state = te.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // DOCTYPE public identifier (double-quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateDoctypePublicIdentifierDoubleQuoted",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.QUOTATION_MARK: {
          this.state = te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), n.publicId += V.REPLACEMENT_CHARACTER;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Le.ERR.abruptDoctypePublicIdentifier), n.forceQuirks = true, this.emitCurrentDoctype(n), this.state = te.DATA;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          n.publicId += String.fromCodePoint(r);
      }
    }
    // DOCTYPE public identifier (single-quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateDoctypePublicIdentifierSingleQuoted",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.APOSTROPHE: {
          this.state = te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), n.publicId += V.REPLACEMENT_CHARACTER;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Le.ERR.abruptDoctypePublicIdentifier), n.forceQuirks = true, this.emitCurrentDoctype(n), this.state = te.DATA;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          n.publicId += String.fromCodePoint(r);
      }
    }
    // After DOCTYPE public identifier state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterDoctypePublicIdentifier",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED: {
          this.state = te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = te.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case V.CODE_POINTS.QUOTATION_MARK: {
          this._err(Le.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers), n.systemId = "", this.state = te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.APOSTROPHE: {
          this._err(Le.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers), n.systemId = "", this.state = te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Le.ERR.missingQuoteBeforeDoctypeSystemIdentifier), n.forceQuirks = true, this.state = te.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // Between DOCTYPE public and system identifiers state
    //------------------------------------------------------------------
  }, {
    key: "_stateBetweenDoctypePublicAndSystemIdentifiers",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED:
          break;
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.emitCurrentDoctype(n), this.state = te.DATA;
          break;
        }
        case V.CODE_POINTS.QUOTATION_MARK: {
          n.systemId = "", this.state = te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.APOSTROPHE: {
          n.systemId = "", this.state = te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Le.ERR.missingQuoteBeforeDoctypeSystemIdentifier), n.forceQuirks = true, this.state = te.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // After DOCTYPE system keyword state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterDoctypeSystemKeyword",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED: {
          this.state = te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;
          break;
        }
        case V.CODE_POINTS.QUOTATION_MARK: {
          this._err(Le.ERR.missingWhitespaceAfterDoctypeSystemKeyword), n.systemId = "", this.state = te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.APOSTROPHE: {
          this._err(Le.ERR.missingWhitespaceAfterDoctypeSystemKeyword), n.systemId = "", this.state = te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Le.ERR.missingDoctypeSystemIdentifier), n.forceQuirks = true, this.state = te.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Le.ERR.missingQuoteBeforeDoctypeSystemIdentifier), n.forceQuirks = true, this.state = te.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // Before DOCTYPE system identifier state
    //------------------------------------------------------------------
  }, {
    key: "_stateBeforeDoctypeSystemIdentifier",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED:
          break;
        case V.CODE_POINTS.QUOTATION_MARK: {
          n.systemId = "", this.state = te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.APOSTROPHE: {
          n.systemId = "", this.state = te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Le.ERR.missingDoctypeSystemIdentifier), n.forceQuirks = true, this.state = te.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Le.ERR.missingQuoteBeforeDoctypeSystemIdentifier), n.forceQuirks = true, this.state = te.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // DOCTYPE system identifier (double-quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateDoctypeSystemIdentifierDoubleQuoted",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.QUOTATION_MARK: {
          this.state = te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), n.systemId += V.REPLACEMENT_CHARACTER;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Le.ERR.abruptDoctypeSystemIdentifier), n.forceQuirks = true, this.emitCurrentDoctype(n), this.state = te.DATA;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          n.systemId += String.fromCodePoint(r);
      }
    }
    // DOCTYPE system identifier (single-quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateDoctypeSystemIdentifierSingleQuoted",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.APOSTROPHE: {
          this.state = te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter), n.systemId += V.REPLACEMENT_CHARACTER;
          break;
        }
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Le.ERR.abruptDoctypeSystemIdentifier), n.forceQuirks = true, this.emitCurrentDoctype(n), this.state = te.DATA;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          n.systemId += String.fromCodePoint(r);
      }
    }
    // After DOCTYPE system identifier state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterDoctypeSystemIdentifier",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.SPACE:
        case V.CODE_POINTS.LINE_FEED:
        case V.CODE_POINTS.TABULATION:
        case V.CODE_POINTS.FORM_FEED:
          break;
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.emitCurrentDoctype(n), this.state = te.DATA;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Le.ERR.unexpectedCharacterAfterDoctypeSystemIdentifier), this.state = te.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // Bogus DOCTYPE state
    //------------------------------------------------------------------
  }, {
    key: "_stateBogusDoctype",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.emitCurrentDoctype(n), this.state = te.DATA;
          break;
        }
        case V.CODE_POINTS.NULL: {
          this._err(Le.ERR.unexpectedNullCharacter);
          break;
        }
        case V.CODE_POINTS.EOF: {
          this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
      }
    }
    // CDATA section state
    //------------------------------------------------------------------
  }, {
    key: "_stateCdataSection",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.RIGHT_SQUARE_BRACKET: {
          this.state = te.CDATA_SECTION_BRACKET;
          break;
        }
        case V.CODE_POINTS.EOF: {
          this._err(Le.ERR.eofInCdata), this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // CDATA section bracket state
    //------------------------------------------------------------------
  }, {
    key: "_stateCdataSectionBracket",
    value: function(r) {
      r === V.CODE_POINTS.RIGHT_SQUARE_BRACKET ? this.state = te.CDATA_SECTION_END : (this._emitChars("]"), this.state = te.CDATA_SECTION, this._stateCdataSection(r));
    }
    // CDATA section end state
    //------------------------------------------------------------------
  }, {
    key: "_stateCdataSectionEnd",
    value: function(r) {
      switch (r) {
        case V.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = te.DATA;
          break;
        }
        case V.CODE_POINTS.RIGHT_SQUARE_BRACKET: {
          this._emitChars("]");
          break;
        }
        default:
          this._emitChars("]]"), this.state = te.CDATA_SECTION, this._stateCdataSection(r);
      }
    }
    // Character reference state
    //------------------------------------------------------------------
  }, {
    key: "_stateCharacterReference",
    value: function(r) {
      r === V.CODE_POINTS.NUMBER_SIGN ? this.state = te.NUMERIC_CHARACTER_REFERENCE : eC(r) ? (this.state = te.NAMED_CHARACTER_REFERENCE, this._stateNamedCharacterReference(r)) : (this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND), this._reconsumeInState(this.returnState, r));
    }
    // Named character reference state
    //------------------------------------------------------------------
  }, {
    key: "_stateNamedCharacterReference",
    value: function(r) {
      const n = this._matchNamedCharacterReference(r);
      if (!this._ensureHibernation())
        if (n) {
          for (let i = 0; i < n.length; i++)
            this._flushCodePointConsumedAsCharacterReference(n[i]);
          this.state = this.returnState;
        } else
          this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND), this.state = te.AMBIGUOUS_AMPERSAND;
    }
    // Ambiguos ampersand state
    //------------------------------------------------------------------
  }, {
    key: "_stateAmbiguousAmpersand",
    value: function(r) {
      eC(r) ? this._flushCodePointConsumedAsCharacterReference(r) : (r === V.CODE_POINTS.SEMICOLON && this._err(Le.ERR.unknownNamedCharacterReference), this._reconsumeInState(this.returnState, r));
    }
    // Numeric character reference state
    //------------------------------------------------------------------
  }, {
    key: "_stateNumericCharacterReference",
    value: function(r) {
      this.charRefCode = 0, r === V.CODE_POINTS.LATIN_SMALL_X || r === V.CODE_POINTS.LATIN_CAPITAL_X ? this.state = te.HEXADEMICAL_CHARACTER_REFERENCE_START : og(r) ? (this.state = te.DECIMAL_CHARACTER_REFERENCE, this._stateDecimalCharacterReference(r)) : (this._err(Le.ERR.absenceOfDigitsInNumericCharacterReference), this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND), this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.NUMBER_SIGN), this._reconsumeInState(this.returnState, r));
    }
    // Hexademical character reference start state
    //------------------------------------------------------------------
  }, {
    key: "_stateHexademicalCharacterReferenceStart",
    value: function(r) {
      pSe(r) ? (this.state = te.HEXADEMICAL_CHARACTER_REFERENCE, this._stateHexademicalCharacterReference(r)) : (this._err(Le.ERR.absenceOfDigitsInNumericCharacterReference), this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND), this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.NUMBER_SIGN), this._unconsume(2), this.state = this.returnState);
    }
    // Hexademical character reference state
    //------------------------------------------------------------------
  }, {
    key: "_stateHexademicalCharacterReference",
    value: function(r) {
      kW(r) ? this.charRefCode = this.charRefCode * 16 + r - 55 : DW(r) ? this.charRefCode = this.charRefCode * 16 + r - 87 : og(r) ? this.charRefCode = this.charRefCode * 16 + r - 48 : r === V.CODE_POINTS.SEMICOLON ? this.state = te.NUMERIC_CHARACTER_REFERENCE_END : (this._err(Le.ERR.missingSemicolonAfterCharacterReference), this.state = te.NUMERIC_CHARACTER_REFERENCE_END, this._stateNumericCharacterReferenceEnd(r));
    }
    // Decimal character reference state
    //------------------------------------------------------------------
  }, {
    key: "_stateDecimalCharacterReference",
    value: function(r) {
      og(r) ? this.charRefCode = this.charRefCode * 10 + r - 48 : r === V.CODE_POINTS.SEMICOLON ? this.state = te.NUMERIC_CHARACTER_REFERENCE_END : (this._err(Le.ERR.missingSemicolonAfterCharacterReference), this.state = te.NUMERIC_CHARACTER_REFERENCE_END, this._stateNumericCharacterReferenceEnd(r));
    }
    // Numeric character reference end state
    //------------------------------------------------------------------
  }, {
    key: "_stateNumericCharacterReferenceEnd",
    value: function(r) {
      if (this.charRefCode === V.CODE_POINTS.NULL)
        this._err(Le.ERR.nullCharacterReference), this.charRefCode = V.CODE_POINTS.REPLACEMENT_CHARACTER;
      else if (this.charRefCode > 1114111)
        this._err(Le.ERR.characterReferenceOutsideUnicodeRange), this.charRefCode = V.CODE_POINTS.REPLACEMENT_CHARACTER;
      else if ((0, V.isSurrogate)(this.charRefCode))
        this._err(Le.ERR.surrogateCharacterReference), this.charRefCode = V.CODE_POINTS.REPLACEMENT_CHARACTER;
      else if ((0, V.isUndefinedCodePoint)(this.charRefCode))
        this._err(Le.ERR.noncharacterCharacterReference);
      else if ((0, V.isControlCodePoint)(this.charRefCode) || this.charRefCode === V.CODE_POINTS.CARRIAGE_RETURN) {
        this._err(Le.ERR.controlCharacterReference);
        const n = fSe.get(this.charRefCode);
        n !== void 0 && (this.charRefCode = n);
      }
      this._flushCodePointConsumedAsCharacterReference(this.charRefCode), this._reconsumeInState(this.returnState, r);
    }
  }]), e12;
}();
Su.Tokenizer = gSe;
var Y1 = {};
function vSe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function VH(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, _Se(n.key), n);
  }
}
function ySe(e12, t, r) {
  return t && VH(e12.prototype, t), r && VH(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function _Se(e12) {
  var t = bSe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function bSe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
Object.defineProperty(Y1, "__esModule", {
  value: true
});
Y1.OpenElementStack = void 0;
var Fe = Ks;
var NW = /* @__PURE__ */ new Set([Fe.TAG_ID.DD, Fe.TAG_ID.DT, Fe.TAG_ID.LI, Fe.TAG_ID.OPTGROUP, Fe.TAG_ID.OPTION, Fe.TAG_ID.P, Fe.TAG_ID.RB, Fe.TAG_ID.RP, Fe.TAG_ID.RT, Fe.TAG_ID.RTC]);
var XH = /* @__PURE__ */ new Set([...NW, Fe.TAG_ID.CAPTION, Fe.TAG_ID.COLGROUP, Fe.TAG_ID.TBODY, Fe.TAG_ID.TD, Fe.TAG_ID.TFOOT, Fe.TAG_ID.TH, Fe.TAG_ID.THEAD, Fe.TAG_ID.TR]);
var v_ = /* @__PURE__ */ new Map([[Fe.TAG_ID.APPLET, Fe.NS.HTML], [Fe.TAG_ID.CAPTION, Fe.NS.HTML], [Fe.TAG_ID.HTML, Fe.NS.HTML], [Fe.TAG_ID.MARQUEE, Fe.NS.HTML], [Fe.TAG_ID.OBJECT, Fe.NS.HTML], [Fe.TAG_ID.TABLE, Fe.NS.HTML], [Fe.TAG_ID.TD, Fe.NS.HTML], [Fe.TAG_ID.TEMPLATE, Fe.NS.HTML], [Fe.TAG_ID.TH, Fe.NS.HTML], [Fe.TAG_ID.ANNOTATION_XML, Fe.NS.MATHML], [Fe.TAG_ID.MI, Fe.NS.MATHML], [Fe.TAG_ID.MN, Fe.NS.MATHML], [Fe.TAG_ID.MO, Fe.NS.MATHML], [Fe.TAG_ID.MS, Fe.NS.MATHML], [Fe.TAG_ID.MTEXT, Fe.NS.MATHML], [Fe.TAG_ID.DESC, Fe.NS.SVG], [Fe.TAG_ID.FOREIGN_OBJECT, Fe.NS.SVG], [Fe.TAG_ID.TITLE, Fe.NS.SVG]]);
var TSe = [Fe.TAG_ID.H1, Fe.TAG_ID.H2, Fe.TAG_ID.H3, Fe.TAG_ID.H4, Fe.TAG_ID.H5, Fe.TAG_ID.H6];
var ESe = [Fe.TAG_ID.TR, Fe.TAG_ID.TEMPLATE, Fe.TAG_ID.HTML];
var SSe = [Fe.TAG_ID.TBODY, Fe.TAG_ID.TFOOT, Fe.TAG_ID.THEAD, Fe.TAG_ID.TEMPLATE, Fe.TAG_ID.HTML];
var wSe = [Fe.TAG_ID.TABLE, Fe.TAG_ID.TEMPLATE, Fe.TAG_ID.HTML];
var ASe = [Fe.TAG_ID.TD, Fe.TAG_ID.TH];
var OSe = function() {
  function e12(t, r, n) {
    vSe(this, e12), this.treeAdapter = r, this.handler = n, this.items = [], this.tagIDs = [], this.stackTop = -1, this.tmplCount = 0, this.currentTagId = Fe.TAG_ID.UNKNOWN, this.current = t;
  }
  return ySe(e12, [{
    key: "currentTmplContentOrNode",
    get: function() {
      return this._isInTemplate() ? this.treeAdapter.getTemplateContent(this.current) : this.current;
    }
  }, {
    key: "_indexOf",
    value: function(r) {
      return this.items.lastIndexOf(r, this.stackTop);
    }
    //Update current element
  }, {
    key: "_isInTemplate",
    value: function() {
      return this.currentTagId === Fe.TAG_ID.TEMPLATE && this.treeAdapter.getNamespaceURI(this.current) === Fe.NS.HTML;
    }
  }, {
    key: "_updateCurrentElement",
    value: function() {
      this.current = this.items[this.stackTop], this.currentTagId = this.tagIDs[this.stackTop];
    }
    //Mutations
  }, {
    key: "push",
    value: function(r, n) {
      this.stackTop++, this.items[this.stackTop] = r, this.current = r, this.tagIDs[this.stackTop] = n, this.currentTagId = n, this._isInTemplate() && this.tmplCount++, this.handler.onItemPush(r, n, true);
    }
  }, {
    key: "pop",
    value: function() {
      const r = this.current;
      this.tmplCount > 0 && this._isInTemplate() && this.tmplCount--, this.stackTop--, this._updateCurrentElement(), this.handler.onItemPop(r, true);
    }
  }, {
    key: "replace",
    value: function(r, n) {
      const i = this._indexOf(r);
      this.items[i] = n, i === this.stackTop && (this.current = n);
    }
  }, {
    key: "insertAfter",
    value: function(r, n, i) {
      const o = this._indexOf(r) + 1;
      this.items.splice(o, 0, n), this.tagIDs.splice(o, 0, i), this.stackTop++, o === this.stackTop && this._updateCurrentElement(), this.handler.onItemPush(this.current, this.currentTagId, o === this.stackTop);
    }
  }, {
    key: "popUntilTagNamePopped",
    value: function(r) {
      let n = this.stackTop + 1;
      do
        n = this.tagIDs.lastIndexOf(r, n - 1);
      while (n > 0 && this.treeAdapter.getNamespaceURI(this.items[n]) !== Fe.NS.HTML);
      this.shortenToLength(n < 0 ? 0 : n);
    }
  }, {
    key: "shortenToLength",
    value: function(r) {
      for (; this.stackTop >= r; ) {
        const n = this.current;
        this.tmplCount > 0 && this._isInTemplate() && (this.tmplCount -= 1), this.stackTop--, this._updateCurrentElement(), this.handler.onItemPop(n, this.stackTop < r);
      }
    }
  }, {
    key: "popUntilElementPopped",
    value: function(r) {
      const n = this._indexOf(r);
      this.shortenToLength(n < 0 ? 0 : n);
    }
  }, {
    key: "popUntilPopped",
    value: function(r, n) {
      const i = this._indexOfTagNames(r, n);
      this.shortenToLength(i < 0 ? 0 : i);
    }
  }, {
    key: "popUntilNumberedHeaderPopped",
    value: function() {
      this.popUntilPopped(TSe, Fe.NS.HTML);
    }
  }, {
    key: "popUntilTableCellPopped",
    value: function() {
      this.popUntilPopped(ASe, Fe.NS.HTML);
    }
  }, {
    key: "popAllUpToHtmlElement",
    value: function() {
      this.tmplCount = 0, this.shortenToLength(1);
    }
  }, {
    key: "_indexOfTagNames",
    value: function(r, n) {
      for (let i = this.stackTop; i >= 0; i--)
        if (r.includes(this.tagIDs[i]) && this.treeAdapter.getNamespaceURI(this.items[i]) === n)
          return i;
      return -1;
    }
  }, {
    key: "clearBackTo",
    value: function(r, n) {
      const i = this._indexOfTagNames(r, n);
      this.shortenToLength(i + 1);
    }
  }, {
    key: "clearBackToTableContext",
    value: function() {
      this.clearBackTo(wSe, Fe.NS.HTML);
    }
  }, {
    key: "clearBackToTableBodyContext",
    value: function() {
      this.clearBackTo(SSe, Fe.NS.HTML);
    }
  }, {
    key: "clearBackToTableRowContext",
    value: function() {
      this.clearBackTo(ESe, Fe.NS.HTML);
    }
  }, {
    key: "remove",
    value: function(r) {
      const n = this._indexOf(r);
      n >= 0 && (n === this.stackTop ? this.pop() : (this.items.splice(n, 1), this.tagIDs.splice(n, 1), this.stackTop--, this._updateCurrentElement(), this.handler.onItemPop(r, false)));
    }
    //Search
  }, {
    key: "tryPeekProperlyNestedBodyElement",
    value: function() {
      return this.stackTop >= 1 && this.tagIDs[1] === Fe.TAG_ID.BODY ? this.items[1] : null;
    }
  }, {
    key: "contains",
    value: function(r) {
      return this._indexOf(r) > -1;
    }
  }, {
    key: "getCommonAncestor",
    value: function(r) {
      const n = this._indexOf(r) - 1;
      return n >= 0 ? this.items[n] : null;
    }
  }, {
    key: "isRootHtmlElementCurrent",
    value: function() {
      return this.stackTop === 0 && this.tagIDs[0] === Fe.TAG_ID.HTML;
    }
    //Element in scope
  }, {
    key: "hasInScope",
    value: function(r) {
      for (let n = this.stackTop; n >= 0; n--) {
        const i = this.tagIDs[n], o = this.treeAdapter.getNamespaceURI(this.items[n]);
        if (i === r && o === Fe.NS.HTML)
          return true;
        if (v_.get(i) === o)
          return false;
      }
      return true;
    }
  }, {
    key: "hasNumberedHeaderInScope",
    value: function() {
      for (let r = this.stackTop; r >= 0; r--) {
        const n = this.tagIDs[r], i = this.treeAdapter.getNamespaceURI(this.items[r]);
        if ((0, Fe.isNumberedHeader)(n) && i === Fe.NS.HTML)
          return true;
        if (v_.get(n) === i)
          return false;
      }
      return true;
    }
  }, {
    key: "hasInListItemScope",
    value: function(r) {
      for (let n = this.stackTop; n >= 0; n--) {
        const i = this.tagIDs[n], o = this.treeAdapter.getNamespaceURI(this.items[n]);
        if (i === r && o === Fe.NS.HTML)
          return true;
        if ((i === Fe.TAG_ID.UL || i === Fe.TAG_ID.OL) && o === Fe.NS.HTML || v_.get(i) === o)
          return false;
      }
      return true;
    }
  }, {
    key: "hasInButtonScope",
    value: function(r) {
      for (let n = this.stackTop; n >= 0; n--) {
        const i = this.tagIDs[n], o = this.treeAdapter.getNamespaceURI(this.items[n]);
        if (i === r && o === Fe.NS.HTML)
          return true;
        if (i === Fe.TAG_ID.BUTTON && o === Fe.NS.HTML || v_.get(i) === o)
          return false;
      }
      return true;
    }
  }, {
    key: "hasInTableScope",
    value: function(r) {
      for (let n = this.stackTop; n >= 0; n--) {
        const i = this.tagIDs[n];
        if (this.treeAdapter.getNamespaceURI(this.items[n]) === Fe.NS.HTML) {
          if (i === r)
            return true;
          if (i === Fe.TAG_ID.TABLE || i === Fe.TAG_ID.TEMPLATE || i === Fe.TAG_ID.HTML)
            return false;
        }
      }
      return true;
    }
  }, {
    key: "hasTableBodyContextInTableScope",
    value: function() {
      for (let r = this.stackTop; r >= 0; r--) {
        const n = this.tagIDs[r];
        if (this.treeAdapter.getNamespaceURI(this.items[r]) === Fe.NS.HTML) {
          if (n === Fe.TAG_ID.TBODY || n === Fe.TAG_ID.THEAD || n === Fe.TAG_ID.TFOOT)
            return true;
          if (n === Fe.TAG_ID.TABLE || n === Fe.TAG_ID.HTML)
            return false;
        }
      }
      return true;
    }
  }, {
    key: "hasInSelectScope",
    value: function(r) {
      for (let n = this.stackTop; n >= 0; n--) {
        const i = this.tagIDs[n];
        if (this.treeAdapter.getNamespaceURI(this.items[n]) === Fe.NS.HTML) {
          if (i === r)
            return true;
          if (i !== Fe.TAG_ID.OPTION && i !== Fe.TAG_ID.OPTGROUP)
            return false;
        }
      }
      return true;
    }
    //Implied end tags
  }, {
    key: "generateImpliedEndTags",
    value: function() {
      for (; NW.has(this.currentTagId); )
        this.pop();
    }
  }, {
    key: "generateImpliedEndTagsThoroughly",
    value: function() {
      for (; XH.has(this.currentTagId); )
        this.pop();
    }
  }, {
    key: "generateImpliedEndTagsWithExclusion",
    value: function(r) {
      for (; this.currentTagId !== r && XH.has(this.currentTagId); )
        this.pop();
    }
  }]), e12;
}();
Y1.OpenElementStack = OSe;
var MW = {};
(function(e12) {
  function t(c, f) {
    if (!(c instanceof f))
      throw new TypeError("Cannot call a class as a function");
  }
  function r(c, f) {
    for (var h = 0; h < f.length; h++) {
      var d = f[h];
      d.enumerable = d.enumerable || false, d.configurable = true, "value" in d && (d.writable = true), Object.defineProperty(c, i(d.key), d);
    }
  }
  function n(c, f, h) {
    return f && r(c.prototype, f), h && r(c, h), Object.defineProperty(c, "prototype", { writable: false }), c;
  }
  function i(c) {
    var f = o(c, "string");
    return typeof f == "symbol" ? f : String(f);
  }
  function o(c, f) {
    if (typeof c != "object" || c === null)
      return c;
    var h = c[Symbol.toPrimitive];
    if (h !== void 0) {
      var d = h.call(c, f || "default");
      if (typeof d != "object")
        return d;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return (f === "string" ? String : Number)(c);
  }
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.FormattingElementList = e12.EntryType = void 0;
  const a = 3;
  var s;
  (function(c) {
    c[c.Marker = 0] = "Marker", c[c.Element = 1] = "Element";
  })(s = e12.EntryType || (e12.EntryType = {}));
  const l = {
    type: s.Marker
  };
  let u = function() {
    function c(f) {
      t(this, c), this.treeAdapter = f, this.entries = [], this.bookmark = null;
    }
    return n(c, [{
      key: "_getNoahArkConditionCandidates",
      value: function(h, d) {
        const p = [], m = d.length, g = this.treeAdapter.getTagName(h), v = this.treeAdapter.getNamespaceURI(h);
        for (let _ = 0; _ < this.entries.length; _++) {
          const y = this.entries[_];
          if (y.type === s.Marker)
            break;
          const {
            element: b
          } = y;
          if (this.treeAdapter.getTagName(b) === g && this.treeAdapter.getNamespaceURI(b) === v) {
            const T = this.treeAdapter.getAttrList(b);
            T.length === m && p.push({
              idx: _,
              attrs: T
            });
          }
        }
        return p;
      }
    }, {
      key: "_ensureNoahArkCondition",
      value: function(h) {
        if (this.entries.length < a)
          return;
        const d = this.treeAdapter.getAttrList(h), p = this._getNoahArkConditionCandidates(h, d);
        if (p.length < a)
          return;
        const m = new Map(d.map((v) => [v.name, v.value]));
        let g = 0;
        for (let v = 0; v < p.length; v++) {
          const _ = p[v];
          _.attrs.every((y) => m.get(y.name) === y.value) && (g += 1, g >= a && this.entries.splice(_.idx, 1));
        }
      }
      //Mutations
    }, {
      key: "insertMarker",
      value: function() {
        this.entries.unshift(l);
      }
    }, {
      key: "pushElement",
      value: function(h, d) {
        this._ensureNoahArkCondition(h), this.entries.unshift({
          type: s.Element,
          element: h,
          token: d
        });
      }
    }, {
      key: "insertElementAfterBookmark",
      value: function(h, d) {
        const p = this.entries.indexOf(this.bookmark);
        this.entries.splice(p, 0, {
          type: s.Element,
          element: h,
          token: d
        });
      }
    }, {
      key: "removeEntry",
      value: function(h) {
        const d = this.entries.indexOf(h);
        d >= 0 && this.entries.splice(d, 1);
      }
      /**
       * Clears the list of formatting elements up to the last marker.
       *
       * @see https://html.spec.whatwg.org/multipage/parsing.html#clear-the-list-of-active-formatting-elements-up-to-the-last-marker
       */
    }, {
      key: "clearToLastMarker",
      value: function() {
        const h = this.entries.indexOf(l);
        h >= 0 ? this.entries.splice(0, h + 1) : this.entries.length = 0;
      }
      //Search
    }, {
      key: "getElementEntryInScopeWithTagName",
      value: function(h) {
        const d = this.entries.find((p) => p.type === s.Marker || this.treeAdapter.getTagName(p.element) === h);
        return d && d.type === s.Element ? d : null;
      }
    }, {
      key: "getElementEntry",
      value: function(h) {
        return this.entries.find((d) => d.type === s.Element && d.element === h);
      }
    }]), c;
  }();
  e12.FormattingElementList = u;
})(MW);
var q1 = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.defaultTreeAdapter = void 0;
  const t = Ks;
  function r(n) {
    return {
      nodeName: "#text",
      value: n,
      parentNode: null
    };
  }
  e12.defaultTreeAdapter = {
    //Node construction
    createDocument() {
      return {
        nodeName: "#document",
        mode: t.DOCUMENT_MODE.NO_QUIRKS,
        childNodes: []
      };
    },
    createDocumentFragment() {
      return {
        nodeName: "#document-fragment",
        childNodes: []
      };
    },
    createElement(n, i, o) {
      return {
        nodeName: n,
        tagName: n,
        attrs: o,
        namespaceURI: i,
        childNodes: [],
        parentNode: null
      };
    },
    createCommentNode(n) {
      return {
        nodeName: "#comment",
        data: n,
        parentNode: null
      };
    },
    //Tree mutation
    appendChild(n, i) {
      n.childNodes.push(i), i.parentNode = n;
    },
    insertBefore(n, i, o) {
      const a = n.childNodes.indexOf(o);
      n.childNodes.splice(a, 0, i), i.parentNode = n;
    },
    setTemplateContent(n, i) {
      n.content = i;
    },
    getTemplateContent(n) {
      return n.content;
    },
    setDocumentType(n, i, o, a) {
      const s = n.childNodes.find((l) => l.nodeName === "#documentType");
      if (s)
        s.name = i, s.publicId = o, s.systemId = a;
      else {
        const l = {
          nodeName: "#documentType",
          name: i,
          publicId: o,
          systemId: a,
          parentNode: null
        };
        e12.defaultTreeAdapter.appendChild(n, l);
      }
    },
    setDocumentMode(n, i) {
      n.mode = i;
    },
    getDocumentMode(n) {
      return n.mode;
    },
    detachNode(n) {
      if (n.parentNode) {
        const i = n.parentNode.childNodes.indexOf(n);
        n.parentNode.childNodes.splice(i, 1), n.parentNode = null;
      }
    },
    insertText(n, i) {
      if (n.childNodes.length > 0) {
        const o = n.childNodes[n.childNodes.length - 1];
        if (e12.defaultTreeAdapter.isTextNode(o)) {
          o.value += i;
          return;
        }
      }
      e12.defaultTreeAdapter.appendChild(n, r(i));
    },
    insertTextBefore(n, i, o) {
      const a = n.childNodes[n.childNodes.indexOf(o) - 1];
      a && e12.defaultTreeAdapter.isTextNode(a) ? a.value += i : e12.defaultTreeAdapter.insertBefore(n, r(i), o);
    },
    adoptAttributes(n, i) {
      const o = new Set(n.attrs.map((a) => a.name));
      for (let a = 0; a < i.length; a++)
        o.has(i[a].name) || n.attrs.push(i[a]);
    },
    //Tree traversing
    getFirstChild(n) {
      return n.childNodes[0];
    },
    getChildNodes(n) {
      return n.childNodes;
    },
    getParentNode(n) {
      return n.parentNode;
    },
    getAttrList(n) {
      return n.attrs;
    },
    //Node data
    getTagName(n) {
      return n.tagName;
    },
    getNamespaceURI(n) {
      return n.namespaceURI;
    },
    getTextNodeContent(n) {
      return n.value;
    },
    getCommentNodeContent(n) {
      return n.data;
    },
    getDocumentTypeNodeName(n) {
      return n.name;
    },
    getDocumentTypeNodePublicId(n) {
      return n.publicId;
    },
    getDocumentTypeNodeSystemId(n) {
      return n.systemId;
    },
    //Node types
    isTextNode(n) {
      return n.nodeName === "#text";
    },
    isCommentNode(n) {
      return n.nodeName === "#comment";
    },
    isDocumentTypeNode(n) {
      return n.nodeName === "#documentType";
    },
    isElementNode(n) {
      return Object.prototype.hasOwnProperty.call(n, "tagName");
    },
    // Source code location
    setNodeSourceCodeLocation(n, i) {
      n.sourceCodeLocation = i;
    },
    getNodeSourceCodeLocation(n) {
      return n.sourceCodeLocation;
    },
    updateNodeSourceCodeLocation(n, i) {
      n.sourceCodeLocation = Object.assign(Object.assign({}, n.sourceCodeLocation), i);
    }
  };
})(q1);
var Ad = {};
Object.defineProperty(Ad, "__esModule", {
  value: true
});
Ad.getDocumentMode = Ad.isConforming = void 0;
var Ch = Ks;
var LW = "html";
var ISe = "about:legacy-compat";
var PSe = "http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd";
var BW = ["+//silmaril//dtd html pro v0r11 19970101//", "-//as//dtd html 3.0 aswedit + extensions//", "-//advasoft ltd//dtd html 3.0 aswedit + extensions//", "-//ietf//dtd html 2.0 level 1//", "-//ietf//dtd html 2.0 level 2//", "-//ietf//dtd html 2.0 strict level 1//", "-//ietf//dtd html 2.0 strict level 2//", "-//ietf//dtd html 2.0 strict//", "-//ietf//dtd html 2.0//", "-//ietf//dtd html 2.1e//", "-//ietf//dtd html 3.0//", "-//ietf//dtd html 3.2 final//", "-//ietf//dtd html 3.2//", "-//ietf//dtd html 3//", "-//ietf//dtd html level 0//", "-//ietf//dtd html level 1//", "-//ietf//dtd html level 2//", "-//ietf//dtd html level 3//", "-//ietf//dtd html strict level 0//", "-//ietf//dtd html strict level 1//", "-//ietf//dtd html strict level 2//", "-//ietf//dtd html strict level 3//", "-//ietf//dtd html strict//", "-//ietf//dtd html//", "-//metrius//dtd metrius presentational//", "-//microsoft//dtd internet explorer 2.0 html strict//", "-//microsoft//dtd internet explorer 2.0 html//", "-//microsoft//dtd internet explorer 2.0 tables//", "-//microsoft//dtd internet explorer 3.0 html strict//", "-//microsoft//dtd internet explorer 3.0 html//", "-//microsoft//dtd internet explorer 3.0 tables//", "-//netscape comm. corp.//dtd html//", "-//netscape comm. corp.//dtd strict html//", "-//o'reilly and associates//dtd html 2.0//", "-//o'reilly and associates//dtd html extended 1.0//", "-//o'reilly and associates//dtd html extended relaxed 1.0//", "-//sq//dtd html 2.0 hotmetal + extensions//", "-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//", "-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//", "-//spyglass//dtd html 2.0 extended//", "-//sun microsystems corp.//dtd hotjava html//", "-//sun microsystems corp.//dtd hotjava strict html//", "-//w3c//dtd html 3 1995-03-24//", "-//w3c//dtd html 3.2 draft//", "-//w3c//dtd html 3.2 final//", "-//w3c//dtd html 3.2//", "-//w3c//dtd html 3.2s draft//", "-//w3c//dtd html 4.0 frameset//", "-//w3c//dtd html 4.0 transitional//", "-//w3c//dtd html experimental 19960712//", "-//w3c//dtd html experimental 970421//", "-//w3c//dtd w3 html//", "-//w3o//dtd w3 html 3.0//", "-//webtechs//dtd mozilla html 2.0//", "-//webtechs//dtd mozilla html//"];
var CSe = [...BW, "-//w3c//dtd html 4.01 frameset//", "-//w3c//dtd html 4.01 transitional//"];
var xSe = /* @__PURE__ */ new Set(["-//w3o//dtd w3 html strict 3.0//en//", "-/w3c/dtd html 4.0 transitional/en", "html"]);
var FW = ["-//w3c//dtd xhtml 1.0 frameset//", "-//w3c//dtd xhtml 1.0 transitional//"];
var kSe = [...FW, "-//w3c//dtd html 4.01 frameset//", "-//w3c//dtd html 4.01 transitional//"];
function WH(e12, t) {
  return t.some((r) => e12.startsWith(r));
}
function DSe(e12) {
  return e12.name === LW && e12.publicId === null && (e12.systemId === null || e12.systemId === ISe);
}
Ad.isConforming = DSe;
function RSe(e12) {
  if (e12.name !== LW)
    return Ch.DOCUMENT_MODE.QUIRKS;
  const {
    systemId: t
  } = e12;
  if (t && t.toLowerCase() === PSe)
    return Ch.DOCUMENT_MODE.QUIRKS;
  let {
    publicId: r
  } = e12;
  if (r !== null) {
    if (r = r.toLowerCase(), xSe.has(r))
      return Ch.DOCUMENT_MODE.QUIRKS;
    let n = t === null ? CSe : BW;
    if (WH(r, n))
      return Ch.DOCUMENT_MODE.QUIRKS;
    if (n = t === null ? FW : kSe, WH(r, n))
      return Ch.DOCUMENT_MODE.LIMITED_QUIRKS;
  }
  return Ch.DOCUMENT_MODE.NO_QUIRKS;
}
Ad.getDocumentMode = RSe;
var MN = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.isIntegrationPoint = e12.adjustTokenSVGTagName = e12.adjustTokenXMLAttrs = e12.adjustTokenSVGAttrs = e12.adjustTokenMathMLAttrs = e12.causesExit = e12.SVG_TAG_NAMES_ADJUSTMENT_MAP = void 0;
  const t = Ks, r = {
    TEXT_HTML: "text/html",
    APPLICATION_XML: "application/xhtml+xml"
  }, n = "definitionurl", i = "definitionURL", o = new Map(["attributeName", "attributeType", "baseFrequency", "baseProfile", "calcMode", "clipPathUnits", "diffuseConstant", "edgeMode", "filterUnits", "glyphRef", "gradientTransform", "gradientUnits", "kernelMatrix", "kernelUnitLength", "keyPoints", "keySplines", "keyTimes", "lengthAdjust", "limitingConeAngle", "markerHeight", "markerUnits", "markerWidth", "maskContentUnits", "maskUnits", "numOctaves", "pathLength", "patternContentUnits", "patternTransform", "patternUnits", "pointsAtX", "pointsAtY", "pointsAtZ", "preserveAlpha", "preserveAspectRatio", "primitiveUnits", "refX", "refY", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "specularConstant", "specularExponent", "spreadMethod", "startOffset", "stdDeviation", "stitchTiles", "surfaceScale", "systemLanguage", "tableValues", "targetX", "targetY", "textLength", "viewBox", "viewTarget", "xChannelSelector", "yChannelSelector", "zoomAndPan"].map((g) => [g.toLowerCase(), g])), a = /* @__PURE__ */ new Map([["xlink:actuate", {
    prefix: "xlink",
    name: "actuate",
    namespace: t.NS.XLINK
  }], ["xlink:arcrole", {
    prefix: "xlink",
    name: "arcrole",
    namespace: t.NS.XLINK
  }], ["xlink:href", {
    prefix: "xlink",
    name: "href",
    namespace: t.NS.XLINK
  }], ["xlink:role", {
    prefix: "xlink",
    name: "role",
    namespace: t.NS.XLINK
  }], ["xlink:show", {
    prefix: "xlink",
    name: "show",
    namespace: t.NS.XLINK
  }], ["xlink:title", {
    prefix: "xlink",
    name: "title",
    namespace: t.NS.XLINK
  }], ["xlink:type", {
    prefix: "xlink",
    name: "type",
    namespace: t.NS.XLINK
  }], ["xml:base", {
    prefix: "xml",
    name: "base",
    namespace: t.NS.XML
  }], ["xml:lang", {
    prefix: "xml",
    name: "lang",
    namespace: t.NS.XML
  }], ["xml:space", {
    prefix: "xml",
    name: "space",
    namespace: t.NS.XML
  }], ["xmlns", {
    prefix: "",
    name: "xmlns",
    namespace: t.NS.XMLNS
  }], ["xmlns:xlink", {
    prefix: "xmlns",
    name: "xlink",
    namespace: t.NS.XMLNS
  }]]);
  e12.SVG_TAG_NAMES_ADJUSTMENT_MAP = new Map(["altGlyph", "altGlyphDef", "altGlyphItem", "animateColor", "animateMotion", "animateTransform", "clipPath", "feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feDistantLight", "feFlood", "feFuncA", "feFuncB", "feFuncG", "feFuncR", "feGaussianBlur", "feImage", "feMerge", "feMergeNode", "feMorphology", "feOffset", "fePointLight", "feSpecularLighting", "feSpotLight", "feTile", "feTurbulence", "foreignObject", "glyphRef", "linearGradient", "radialGradient", "textPath"].map((g) => [g.toLowerCase(), g]));
  const s = /* @__PURE__ */ new Set([t.TAG_ID.B, t.TAG_ID.BIG, t.TAG_ID.BLOCKQUOTE, t.TAG_ID.BODY, t.TAG_ID.BR, t.TAG_ID.CENTER, t.TAG_ID.CODE, t.TAG_ID.DD, t.TAG_ID.DIV, t.TAG_ID.DL, t.TAG_ID.DT, t.TAG_ID.EM, t.TAG_ID.EMBED, t.TAG_ID.H1, t.TAG_ID.H2, t.TAG_ID.H3, t.TAG_ID.H4, t.TAG_ID.H5, t.TAG_ID.H6, t.TAG_ID.HEAD, t.TAG_ID.HR, t.TAG_ID.I, t.TAG_ID.IMG, t.TAG_ID.LI, t.TAG_ID.LISTING, t.TAG_ID.MENU, t.TAG_ID.META, t.TAG_ID.NOBR, t.TAG_ID.OL, t.TAG_ID.P, t.TAG_ID.PRE, t.TAG_ID.RUBY, t.TAG_ID.S, t.TAG_ID.SMALL, t.TAG_ID.SPAN, t.TAG_ID.STRONG, t.TAG_ID.STRIKE, t.TAG_ID.SUB, t.TAG_ID.SUP, t.TAG_ID.TABLE, t.TAG_ID.TT, t.TAG_ID.U, t.TAG_ID.UL, t.TAG_ID.VAR]);
  function l(g) {
    const v = g.tagID;
    return v === t.TAG_ID.FONT && g.attrs.some(({
      name: y
    }) => y === t.ATTRS.COLOR || y === t.ATTRS.SIZE || y === t.ATTRS.FACE) || s.has(v);
  }
  e12.causesExit = l;
  function u(g) {
    for (let v = 0; v < g.attrs.length; v++)
      if (g.attrs[v].name === n) {
        g.attrs[v].name = i;
        break;
      }
  }
  e12.adjustTokenMathMLAttrs = u;
  function c(g) {
    for (let v = 0; v < g.attrs.length; v++) {
      const _ = o.get(g.attrs[v].name);
      _ != null && (g.attrs[v].name = _);
    }
  }
  e12.adjustTokenSVGAttrs = c;
  function f(g) {
    for (let v = 0; v < g.attrs.length; v++) {
      const _ = a.get(g.attrs[v].name);
      _ && (g.attrs[v].prefix = _.prefix, g.attrs[v].name = _.name, g.attrs[v].namespace = _.namespace);
    }
  }
  e12.adjustTokenXMLAttrs = f;
  function h(g) {
    const v = e12.SVG_TAG_NAMES_ADJUSTMENT_MAP.get(g.tagName);
    v != null && (g.tagName = v, g.tagID = (0, t.getTagID)(g.tagName));
  }
  e12.adjustTokenSVGTagName = h;
  function d(g, v) {
    return v === t.NS.MATHML && (g === t.TAG_ID.MI || g === t.TAG_ID.MO || g === t.TAG_ID.MN || g === t.TAG_ID.MS || g === t.TAG_ID.MTEXT);
  }
  function p(g, v, _) {
    if (v === t.NS.MATHML && g === t.TAG_ID.ANNOTATION_XML) {
      for (let y = 0; y < _.length; y++)
        if (_[y].name === t.ATTRS.ENCODING) {
          const b = _[y].value.toLowerCase();
          return b === r.TEXT_HTML || b === r.APPLICATION_XML;
        }
    }
    return v === t.NS.SVG && (g === t.TAG_ID.FOREIGN_OBJECT || g === t.TAG_ID.DESC || g === t.TAG_ID.TITLE);
  }
  function m(g, v, _, y) {
    return (!y || y === t.NS.HTML) && p(g, v, _) || (!y || y === t.NS.MATHML) && d(g, v);
  }
  e12.isIntegrationPoint = m;
})(MN);
function NSe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function YH(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, LSe(n.key), n);
  }
}
function MSe(e12, t, r) {
  return t && YH(e12.prototype, t), r && YH(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function LSe(e12) {
  var t = BSe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function BSe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
Object.defineProperty(cv, "__esModule", {
  value: true
});
cv.Parser = void 0;
var hi = Su;
var FSe = Y1;
var qH = MW;
var $Se = q1;
var KH = Ad;
var Ea = MN;
var jn = ly;
var $W = X1;
var k = Ks;
var hn = W1;
var HSe = "hidden";
var USe = 8;
var jSe = 3;
var he;
(function(e12) {
  e12[e12.INITIAL = 0] = "INITIAL", e12[e12.BEFORE_HTML = 1] = "BEFORE_HTML", e12[e12.BEFORE_HEAD = 2] = "BEFORE_HEAD", e12[e12.IN_HEAD = 3] = "IN_HEAD", e12[e12.IN_HEAD_NO_SCRIPT = 4] = "IN_HEAD_NO_SCRIPT", e12[e12.AFTER_HEAD = 5] = "AFTER_HEAD", e12[e12.IN_BODY = 6] = "IN_BODY", e12[e12.TEXT = 7] = "TEXT", e12[e12.IN_TABLE = 8] = "IN_TABLE", e12[e12.IN_TABLE_TEXT = 9] = "IN_TABLE_TEXT", e12[e12.IN_CAPTION = 10] = "IN_CAPTION", e12[e12.IN_COLUMN_GROUP = 11] = "IN_COLUMN_GROUP", e12[e12.IN_TABLE_BODY = 12] = "IN_TABLE_BODY", e12[e12.IN_ROW = 13] = "IN_ROW", e12[e12.IN_CELL = 14] = "IN_CELL", e12[e12.IN_SELECT = 15] = "IN_SELECT", e12[e12.IN_SELECT_IN_TABLE = 16] = "IN_SELECT_IN_TABLE", e12[e12.IN_TEMPLATE = 17] = "IN_TEMPLATE", e12[e12.AFTER_BODY = 18] = "AFTER_BODY", e12[e12.IN_FRAMESET = 19] = "IN_FRAMESET", e12[e12.AFTER_FRAMESET = 20] = "AFTER_FRAMESET", e12[e12.AFTER_AFTER_BODY = 21] = "AFTER_AFTER_BODY", e12[e12.AFTER_AFTER_FRAMESET = 22] = "AFTER_AFTER_FRAMESET";
})(he || (he = {}));
var GSe = {
  startLine: -1,
  startCol: -1,
  startOffset: -1,
  endLine: -1,
  endCol: -1,
  endOffset: -1
};
var HW = /* @__PURE__ */ new Set([k.TAG_ID.TABLE, k.TAG_ID.TBODY, k.TAG_ID.TFOOT, k.TAG_ID.THEAD, k.TAG_ID.TR]);
var ZH = {
  scriptingEnabled: true,
  sourceCodeLocationInfo: false,
  treeAdapter: $Se.defaultTreeAdapter,
  onParseError: null
};
var zSe = function() {
  function e12(t, r, n = null, i = null) {
    NSe(this, e12), this.fragmentContext = n, this.scriptHandler = i, this.currentToken = null, this.stopped = false, this.insertionMode = he.INITIAL, this.originalInsertionMode = he.INITIAL, this.headElement = null, this.formElement = null, this.currentNotInHTML = false, this.tmplInsertionModeStack = [], this.pendingCharacterTokens = [], this.hasNonWhitespacePendingCharacterToken = false, this.framesetOk = true, this.skipNextNewLine = false, this.fosterParentingEnabled = false, this.options = Object.assign(Object.assign({}, ZH), t), this.treeAdapter = this.options.treeAdapter, this.onParseError = this.options.onParseError, this.onParseError && (this.options.sourceCodeLocationInfo = true), this.document = r ?? this.treeAdapter.createDocument(), this.tokenizer = new hi.Tokenizer(this.options, this), this.activeFormattingElements = new qH.FormattingElementList(this.treeAdapter), this.fragmentContextID = n ? (0, k.getTagID)(this.treeAdapter.getTagName(n)) : k.TAG_ID.UNKNOWN, this._setContextModes(n ?? this.document, this.fragmentContextID), this.openElements = new FSe.OpenElementStack(this.document, this.treeAdapter, this);
  }
  return MSe(e12, [{
    key: "getFragment",
    value: function() {
      const r = this.treeAdapter.getFirstChild(this.document), n = this.treeAdapter.createDocumentFragment();
      return this._adoptNodes(r, n), n;
    }
    //Errors
  }, {
    key: "_err",
    value: function(r, n, i) {
      var o;
      if (!this.onParseError)
        return;
      const a = (o = r.location) !== null && o !== void 0 ? o : GSe, s = {
        code: n,
        startLine: a.startLine,
        startCol: a.startCol,
        startOffset: a.startOffset,
        endLine: i ? a.startLine : a.endLine,
        endCol: i ? a.startCol : a.endCol,
        endOffset: i ? a.startOffset : a.endOffset
      };
      this.onParseError(s);
    }
    //Stack events
  }, {
    key: "onItemPush",
    value: function(r, n, i) {
      var o, a;
      (a = (o = this.treeAdapter).onItemPush) === null || a === void 0 || a.call(o, r), i && this.openElements.stackTop > 0 && this._setContextModes(r, n);
    }
  }, {
    key: "onItemPop",
    value: function(r, n) {
      var i, o;
      if (this.options.sourceCodeLocationInfo && this._setEndLocation(r, this.currentToken), (o = (i = this.treeAdapter).onItemPop) === null || o === void 0 || o.call(i, r, this.openElements.current), n) {
        let a, s;
        this.openElements.stackTop === 0 && this.fragmentContext ? (a = this.fragmentContext, s = this.fragmentContextID) : {
          current: a,
          currentTagId: s
        } = this.openElements, this._setContextModes(a, s);
      }
    }
  }, {
    key: "_setContextModes",
    value: function(r, n) {
      const i = r === this.document || this.treeAdapter.getNamespaceURI(r) === k.NS.HTML;
      this.currentNotInHTML = !i, this.tokenizer.inForeignNode = !i && !this._isIntegrationPoint(n, r);
    }
  }, {
    key: "_switchToTextParsing",
    value: function(r, n) {
      this._insertElement(r, k.NS.HTML), this.tokenizer.state = n, this.originalInsertionMode = this.insertionMode, this.insertionMode = he.TEXT;
    }
  }, {
    key: "switchToPlaintextParsing",
    value: function() {
      this.insertionMode = he.TEXT, this.originalInsertionMode = he.IN_BODY, this.tokenizer.state = hi.TokenizerMode.PLAINTEXT;
    }
    //Fragment parsing
  }, {
    key: "_getAdjustedCurrentElement",
    value: function() {
      return this.openElements.stackTop === 0 && this.fragmentContext ? this.fragmentContext : this.openElements.current;
    }
  }, {
    key: "_findFormInFragmentContext",
    value: function() {
      let r = this.fragmentContext;
      for (; r; ) {
        if (this.treeAdapter.getTagName(r) === k.TAG_NAMES.FORM) {
          this.formElement = r;
          break;
        }
        r = this.treeAdapter.getParentNode(r);
      }
    }
  }, {
    key: "_initTokenizerForFragmentParsing",
    value: function() {
      if (!(!this.fragmentContext || this.treeAdapter.getNamespaceURI(this.fragmentContext) !== k.NS.HTML))
        switch (this.fragmentContextID) {
          case k.TAG_ID.TITLE:
          case k.TAG_ID.TEXTAREA: {
            this.tokenizer.state = hi.TokenizerMode.RCDATA;
            break;
          }
          case k.TAG_ID.STYLE:
          case k.TAG_ID.XMP:
          case k.TAG_ID.IFRAME:
          case k.TAG_ID.NOEMBED:
          case k.TAG_ID.NOFRAMES:
          case k.TAG_ID.NOSCRIPT: {
            this.tokenizer.state = hi.TokenizerMode.RAWTEXT;
            break;
          }
          case k.TAG_ID.SCRIPT: {
            this.tokenizer.state = hi.TokenizerMode.SCRIPT_DATA;
            break;
          }
          case k.TAG_ID.PLAINTEXT: {
            this.tokenizer.state = hi.TokenizerMode.PLAINTEXT;
            break;
          }
        }
    }
    //Tree mutation
  }, {
    key: "_setDocumentType",
    value: function(r) {
      const n = r.name || "", i = r.publicId || "", o = r.systemId || "";
      if (this.treeAdapter.setDocumentType(this.document, n, i, o), r.location) {
        const s = this.treeAdapter.getChildNodes(this.document).find((l) => this.treeAdapter.isDocumentTypeNode(l));
        s && this.treeAdapter.setNodeSourceCodeLocation(s, r.location);
      }
    }
  }, {
    key: "_attachElementToTree",
    value: function(r, n) {
      if (this.options.sourceCodeLocationInfo) {
        const i = n && Object.assign(Object.assign({}, n), {
          startTag: n
        });
        this.treeAdapter.setNodeSourceCodeLocation(r, i);
      }
      if (this._shouldFosterParentOnInsertion())
        this._fosterParentElement(r);
      else {
        const i = this.openElements.currentTmplContentOrNode;
        this.treeAdapter.appendChild(i, r);
      }
    }
  }, {
    key: "_appendElement",
    value: function(r, n) {
      const i = this.treeAdapter.createElement(r.tagName, n, r.attrs);
      this._attachElementToTree(i, r.location);
    }
  }, {
    key: "_insertElement",
    value: function(r, n) {
      const i = this.treeAdapter.createElement(r.tagName, n, r.attrs);
      this._attachElementToTree(i, r.location), this.openElements.push(i, r.tagID);
    }
  }, {
    key: "_insertFakeElement",
    value: function(r, n) {
      const i = this.treeAdapter.createElement(r, k.NS.HTML, []);
      this._attachElementToTree(i, null), this.openElements.push(i, n);
    }
  }, {
    key: "_insertTemplate",
    value: function(r) {
      const n = this.treeAdapter.createElement(r.tagName, k.NS.HTML, r.attrs), i = this.treeAdapter.createDocumentFragment();
      this.treeAdapter.setTemplateContent(n, i), this._attachElementToTree(n, r.location), this.openElements.push(n, r.tagID), this.options.sourceCodeLocationInfo && this.treeAdapter.setNodeSourceCodeLocation(i, null);
    }
  }, {
    key: "_insertFakeRootElement",
    value: function() {
      const r = this.treeAdapter.createElement(k.TAG_NAMES.HTML, k.NS.HTML, []);
      this.options.sourceCodeLocationInfo && this.treeAdapter.setNodeSourceCodeLocation(r, null), this.treeAdapter.appendChild(this.openElements.current, r), this.openElements.push(r, k.TAG_ID.HTML);
    }
  }, {
    key: "_appendCommentNode",
    value: function(r, n) {
      const i = this.treeAdapter.createCommentNode(r.data);
      this.treeAdapter.appendChild(n, i), this.options.sourceCodeLocationInfo && this.treeAdapter.setNodeSourceCodeLocation(i, r.location);
    }
  }, {
    key: "_insertCharacters",
    value: function(r) {
      let n, i;
      if (this._shouldFosterParentOnInsertion() ? ({
        parent: n,
        beforeElement: i
      } = this._findFosterParentingLocation(), i ? this.treeAdapter.insertTextBefore(n, r.chars, i) : this.treeAdapter.insertText(n, r.chars)) : (n = this.openElements.currentTmplContentOrNode, this.treeAdapter.insertText(n, r.chars)), !r.location)
        return;
      const o = this.treeAdapter.getChildNodes(n), a = i ? o.lastIndexOf(i) : o.length, s = o[a - 1];
      if (this.treeAdapter.getNodeSourceCodeLocation(s)) {
        const {
          endLine: u,
          endCol: c,
          endOffset: f
        } = r.location;
        this.treeAdapter.updateNodeSourceCodeLocation(s, {
          endLine: u,
          endCol: c,
          endOffset: f
        });
      } else
        this.options.sourceCodeLocationInfo && this.treeAdapter.setNodeSourceCodeLocation(s, r.location);
    }
  }, {
    key: "_adoptNodes",
    value: function(r, n) {
      for (let i = this.treeAdapter.getFirstChild(r); i; i = this.treeAdapter.getFirstChild(r))
        this.treeAdapter.detachNode(i), this.treeAdapter.appendChild(n, i);
    }
  }, {
    key: "_setEndLocation",
    value: function(r, n) {
      if (this.treeAdapter.getNodeSourceCodeLocation(r) && n.location) {
        const i = n.location, o = this.treeAdapter.getTagName(r), a = (
          // NOTE: For cases like <p> <p> </p> - First 'p' closes without a closing
          // tag and for cases like <td> <p> </td> - 'p' closes without a closing tag.
          n.type === hn.TokenType.END_TAG && o === n.tagName ? {
            endTag: Object.assign({}, i),
            endLine: i.endLine,
            endCol: i.endCol,
            endOffset: i.endOffset
          } : {
            endLine: i.startLine,
            endCol: i.startCol,
            endOffset: i.startOffset
          }
        );
        this.treeAdapter.updateNodeSourceCodeLocation(r, a);
      }
    }
    //Token processing
  }, {
    key: "shouldProcessStartTagTokenInForeignContent",
    value: function(r) {
      if (!this.currentNotInHTML)
        return false;
      let n, i;
      return this.openElements.stackTop === 0 && this.fragmentContext ? (n = this.fragmentContext, i = this.fragmentContextID) : {
        current: n,
        currentTagId: i
      } = this.openElements, r.tagID === k.TAG_ID.SVG && this.treeAdapter.getTagName(n) === k.TAG_NAMES.ANNOTATION_XML && this.treeAdapter.getNamespaceURI(n) === k.NS.MATHML ? false : (
        // Check that `current` is not an integration point for HTML or MathML elements.
        this.tokenizer.inForeignNode || // If it _is_ an integration point, then we might have to check that it is not an HTML
        // integration point.
        (r.tagID === k.TAG_ID.MGLYPH || r.tagID === k.TAG_ID.MALIGNMARK) && !this._isIntegrationPoint(i, n, k.NS.HTML)
      );
    }
  }, {
    key: "_processToken",
    value: function(r) {
      switch (r.type) {
        case hn.TokenType.CHARACTER: {
          this.onCharacter(r);
          break;
        }
        case hn.TokenType.NULL_CHARACTER: {
          this.onNullCharacter(r);
          break;
        }
        case hn.TokenType.COMMENT: {
          this.onComment(r);
          break;
        }
        case hn.TokenType.DOCTYPE: {
          this.onDoctype(r);
          break;
        }
        case hn.TokenType.START_TAG: {
          this._processStartTag(r);
          break;
        }
        case hn.TokenType.END_TAG: {
          this.onEndTag(r);
          break;
        }
        case hn.TokenType.EOF: {
          this.onEof(r);
          break;
        }
        case hn.TokenType.WHITESPACE_CHARACTER: {
          this.onWhitespaceCharacter(r);
          break;
        }
      }
    }
    //Integration points
  }, {
    key: "_isIntegrationPoint",
    value: function(r, n, i) {
      const o = this.treeAdapter.getNamespaceURI(n), a = this.treeAdapter.getAttrList(n);
      return Ea.isIntegrationPoint(r, o, a, i);
    }
    //Active formatting elements reconstruction
  }, {
    key: "_reconstructActiveFormattingElements",
    value: function() {
      const r = this.activeFormattingElements.entries.length;
      if (r) {
        const n = this.activeFormattingElements.entries.findIndex((o) => o.type === qH.EntryType.Marker || this.openElements.contains(o.element)), i = n < 0 ? r - 1 : n - 1;
        for (let o = i; o >= 0; o--) {
          const a = this.activeFormattingElements.entries[o];
          this._insertElement(a.token, this.treeAdapter.getNamespaceURI(a.element)), a.element = this.openElements.current;
        }
      }
    }
    //Close elements
  }, {
    key: "_closeTableCell",
    value: function() {
      this.openElements.generateImpliedEndTags(), this.openElements.popUntilTableCellPopped(), this.activeFormattingElements.clearToLastMarker(), this.insertionMode = he.IN_ROW;
    }
  }, {
    key: "_closePElement",
    value: function() {
      this.openElements.generateImpliedEndTagsWithExclusion(k.TAG_ID.P), this.openElements.popUntilTagNamePopped(k.TAG_ID.P);
    }
    //Insertion modes
  }, {
    key: "_resetInsertionMode",
    value: function() {
      for (let r = this.openElements.stackTop; r >= 0; r--)
        switch (r === 0 && this.fragmentContext ? this.fragmentContextID : this.openElements.tagIDs[r]) {
          case k.TAG_ID.TR: {
            this.insertionMode = he.IN_ROW;
            return;
          }
          case k.TAG_ID.TBODY:
          case k.TAG_ID.THEAD:
          case k.TAG_ID.TFOOT: {
            this.insertionMode = he.IN_TABLE_BODY;
            return;
          }
          case k.TAG_ID.CAPTION: {
            this.insertionMode = he.IN_CAPTION;
            return;
          }
          case k.TAG_ID.COLGROUP: {
            this.insertionMode = he.IN_COLUMN_GROUP;
            return;
          }
          case k.TAG_ID.TABLE: {
            this.insertionMode = he.IN_TABLE;
            return;
          }
          case k.TAG_ID.BODY: {
            this.insertionMode = he.IN_BODY;
            return;
          }
          case k.TAG_ID.FRAMESET: {
            this.insertionMode = he.IN_FRAMESET;
            return;
          }
          case k.TAG_ID.SELECT: {
            this._resetInsertionModeForSelect(r);
            return;
          }
          case k.TAG_ID.TEMPLATE: {
            this.insertionMode = this.tmplInsertionModeStack[0];
            return;
          }
          case k.TAG_ID.HTML: {
            this.insertionMode = this.headElement ? he.AFTER_HEAD : he.BEFORE_HEAD;
            return;
          }
          case k.TAG_ID.TD:
          case k.TAG_ID.TH: {
            if (r > 0) {
              this.insertionMode = he.IN_CELL;
              return;
            }
            break;
          }
          case k.TAG_ID.HEAD: {
            if (r > 0) {
              this.insertionMode = he.IN_HEAD;
              return;
            }
            break;
          }
        }
      this.insertionMode = he.IN_BODY;
    }
  }, {
    key: "_resetInsertionModeForSelect",
    value: function(r) {
      if (r > 0)
        for (let n = r - 1; n > 0; n--) {
          const i = this.openElements.tagIDs[n];
          if (i === k.TAG_ID.TEMPLATE)
            break;
          if (i === k.TAG_ID.TABLE) {
            this.insertionMode = he.IN_SELECT_IN_TABLE;
            return;
          }
        }
      this.insertionMode = he.IN_SELECT;
    }
    //Foster parenting
  }, {
    key: "_isElementCausesFosterParenting",
    value: function(r) {
      return HW.has(r);
    }
  }, {
    key: "_shouldFosterParentOnInsertion",
    value: function() {
      return this.fosterParentingEnabled && this._isElementCausesFosterParenting(this.openElements.currentTagId);
    }
  }, {
    key: "_findFosterParentingLocation",
    value: function() {
      for (let r = this.openElements.stackTop; r >= 0; r--) {
        const n = this.openElements.items[r];
        switch (this.openElements.tagIDs[r]) {
          case k.TAG_ID.TEMPLATE: {
            if (this.treeAdapter.getNamespaceURI(n) === k.NS.HTML)
              return {
                parent: this.treeAdapter.getTemplateContent(n),
                beforeElement: null
              };
            break;
          }
          case k.TAG_ID.TABLE: {
            const i = this.treeAdapter.getParentNode(n);
            return i ? {
              parent: i,
              beforeElement: n
            } : {
              parent: this.openElements.items[r - 1],
              beforeElement: null
            };
          }
        }
      }
      return {
        parent: this.openElements.items[0],
        beforeElement: null
      };
    }
  }, {
    key: "_fosterParentElement",
    value: function(r) {
      const n = this._findFosterParentingLocation();
      n.beforeElement ? this.treeAdapter.insertBefore(n.parent, r, n.beforeElement) : this.treeAdapter.appendChild(n.parent, r);
    }
    //Special elements
  }, {
    key: "_isSpecialElement",
    value: function(r, n) {
      const i = this.treeAdapter.getNamespaceURI(r);
      return k.SPECIAL_ELEMENTS[i].has(n);
    }
  }, {
    key: "onCharacter",
    value: function(r) {
      if (this.skipNextNewLine = false, this.tokenizer.inForeignNode) {
        bAe(this, r);
        return;
      }
      switch (this.insertionMode) {
        case he.INITIAL: {
          tm(this, r);
          break;
        }
        case he.BEFORE_HTML: {
          ag(this, r);
          break;
        }
        case he.BEFORE_HEAD: {
          sg(this, r);
          break;
        }
        case he.IN_HEAD: {
          lg(this, r);
          break;
        }
        case he.IN_HEAD_NO_SCRIPT: {
          cg(this, r);
          break;
        }
        case he.AFTER_HEAD: {
          ug(this, r);
          break;
        }
        case he.IN_BODY:
        case he.IN_CAPTION:
        case he.IN_CELL:
        case he.IN_TEMPLATE: {
          jW(this, r);
          break;
        }
        case he.TEXT:
        case he.IN_SELECT:
        case he.IN_SELECT_IN_TABLE: {
          this._insertCharacters(r);
          break;
        }
        case he.IN_TABLE:
        case he.IN_TABLE_BODY:
        case he.IN_ROW: {
          nO(this, r);
          break;
        }
        case he.IN_TABLE_TEXT: {
          YW(this, r);
          break;
        }
        case he.IN_COLUMN_GROUP: {
          Z0(this, r);
          break;
        }
        case he.AFTER_BODY: {
          Q0(this, r);
          break;
        }
        case he.AFTER_AFTER_BODY: {
          vb(this, r);
          break;
        }
      }
    }
  }, {
    key: "onNullCharacter",
    value: function(r) {
      if (this.skipNextNewLine = false, this.tokenizer.inForeignNode) {
        _Ae(this, r);
        return;
      }
      switch (this.insertionMode) {
        case he.INITIAL: {
          tm(this, r);
          break;
        }
        case he.BEFORE_HTML: {
          ag(this, r);
          break;
        }
        case he.BEFORE_HEAD: {
          sg(this, r);
          break;
        }
        case he.IN_HEAD: {
          lg(this, r);
          break;
        }
        case he.IN_HEAD_NO_SCRIPT: {
          cg(this, r);
          break;
        }
        case he.AFTER_HEAD: {
          ug(this, r);
          break;
        }
        case he.TEXT: {
          this._insertCharacters(r);
          break;
        }
        case he.IN_TABLE:
        case he.IN_TABLE_BODY:
        case he.IN_ROW: {
          nO(this, r);
          break;
        }
        case he.IN_COLUMN_GROUP: {
          Z0(this, r);
          break;
        }
        case he.AFTER_BODY: {
          Q0(this, r);
          break;
        }
        case he.AFTER_AFTER_BODY: {
          vb(this, r);
          break;
        }
      }
    }
  }, {
    key: "onComment",
    value: function(r) {
      if (this.skipNextNewLine = false, this.currentNotInHTML) {
        tC(this, r);
        return;
      }
      switch (this.insertionMode) {
        case he.INITIAL:
        case he.BEFORE_HTML:
        case he.BEFORE_HEAD:
        case he.IN_HEAD:
        case he.IN_HEAD_NO_SCRIPT:
        case he.AFTER_HEAD:
        case he.IN_BODY:
        case he.IN_TABLE:
        case he.IN_CAPTION:
        case he.IN_COLUMN_GROUP:
        case he.IN_TABLE_BODY:
        case he.IN_ROW:
        case he.IN_CELL:
        case he.IN_SELECT:
        case he.IN_SELECT_IN_TABLE:
        case he.IN_TEMPLATE:
        case he.IN_FRAMESET:
        case he.AFTER_FRAMESET: {
          tC(this, r);
          break;
        }
        case he.IN_TABLE_TEXT: {
          rm(this, r);
          break;
        }
        case he.AFTER_BODY: {
          ZSe(this, r);
          break;
        }
        case he.AFTER_AFTER_BODY:
        case he.AFTER_AFTER_FRAMESET: {
          QSe(this, r);
          break;
        }
      }
    }
  }, {
    key: "onDoctype",
    value: function(r) {
      switch (this.skipNextNewLine = false, this.insertionMode) {
        case he.INITIAL: {
          JSe(this, r);
          break;
        }
        case he.BEFORE_HEAD:
        case he.IN_HEAD:
        case he.IN_HEAD_NO_SCRIPT:
        case he.AFTER_HEAD: {
          this._err(r, jn.ERR.misplacedDoctype);
          break;
        }
        case he.IN_TABLE_TEXT: {
          rm(this, r);
          break;
        }
      }
    }
  }, {
    key: "onStartTag",
    value: function(r) {
      this.skipNextNewLine = false, this.currentToken = r, this._processStartTag(r), r.selfClosing && !r.ackSelfClosing && this._err(r, jn.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus);
    }
    /**
     * Processes a given start tag.
     *
     * `onStartTag` checks if a self-closing tag was recognized. When a token
     * is moved inbetween multiple insertion modes, this check for self-closing
     * could lead to false positives. To avoid this, `_processStartTag` is used
     * for nested calls.
     *
     * @param token The token to process.
     */
  }, {
    key: "_processStartTag",
    value: function(r) {
      this.shouldProcessStartTagTokenInForeignContent(r) ? TAe(this, r) : this._startTagOutsideForeignContent(r);
    }
  }, {
    key: "_startTagOutsideForeignContent",
    value: function(r) {
      switch (this.insertionMode) {
        case he.INITIAL: {
          tm(this, r);
          break;
        }
        case he.BEFORE_HTML: {
          ewe(this, r);
          break;
        }
        case he.BEFORE_HEAD: {
          rwe(this, r);
          break;
        }
        case he.IN_HEAD: {
          la(this, r);
          break;
        }
        case he.IN_HEAD_NO_SCRIPT: {
          owe(this, r);
          break;
        }
        case he.AFTER_HEAD: {
          swe(this, r);
          break;
        }
        case he.IN_BODY: {
          oi(this, r);
          break;
        }
        case he.IN_TABLE: {
          Od(this, r);
          break;
        }
        case he.IN_TABLE_TEXT: {
          rm(this, r);
          break;
        }
        case he.IN_CAPTION: {
          nAe(this, r);
          break;
        }
        case he.IN_COLUMN_GROUP: {
          FN(this, r);
          break;
        }
        case he.IN_TABLE_BODY: {
          Q1(this, r);
          break;
        }
        case he.IN_ROW: {
          J1(this, r);
          break;
        }
        case he.IN_CELL: {
          aAe(this, r);
          break;
        }
        case he.IN_SELECT: {
          ZW(this, r);
          break;
        }
        case he.IN_SELECT_IN_TABLE: {
          lAe(this, r);
          break;
        }
        case he.IN_TEMPLATE: {
          uAe(this, r);
          break;
        }
        case he.AFTER_BODY: {
          fAe(this, r);
          break;
        }
        case he.IN_FRAMESET: {
          dAe(this, r);
          break;
        }
        case he.AFTER_FRAMESET: {
          mAe(this, r);
          break;
        }
        case he.AFTER_AFTER_BODY: {
          vAe(this, r);
          break;
        }
        case he.AFTER_AFTER_FRAMESET: {
          yAe(this, r);
          break;
        }
      }
    }
  }, {
    key: "onEndTag",
    value: function(r) {
      this.skipNextNewLine = false, this.currentToken = r, this.currentNotInHTML ? EAe(this, r) : this._endTagOutsideForeignContent(r);
    }
  }, {
    key: "_endTagOutsideForeignContent",
    value: function(r) {
      switch (this.insertionMode) {
        case he.INITIAL: {
          tm(this, r);
          break;
        }
        case he.BEFORE_HTML: {
          twe(this, r);
          break;
        }
        case he.BEFORE_HEAD: {
          nwe(this, r);
          break;
        }
        case he.IN_HEAD: {
          iwe(this, r);
          break;
        }
        case he.IN_HEAD_NO_SCRIPT: {
          awe(this, r);
          break;
        }
        case he.AFTER_HEAD: {
          lwe(this, r);
          break;
        }
        case he.IN_BODY: {
          Z1(this, r);
          break;
        }
        case he.TEXT: {
          Wwe(this, r);
          break;
        }
        case he.IN_TABLE: {
          uv(this, r);
          break;
        }
        case he.IN_TABLE_TEXT: {
          rm(this, r);
          break;
        }
        case he.IN_CAPTION: {
          iAe(this, r);
          break;
        }
        case he.IN_COLUMN_GROUP: {
          oAe(this, r);
          break;
        }
        case he.IN_TABLE_BODY: {
          rC(this, r);
          break;
        }
        case he.IN_ROW: {
          KW(this, r);
          break;
        }
        case he.IN_CELL: {
          sAe(this, r);
          break;
        }
        case he.IN_SELECT: {
          QW(this, r);
          break;
        }
        case he.IN_SELECT_IN_TABLE: {
          cAe(this, r);
          break;
        }
        case he.IN_TEMPLATE: {
          hAe(this, r);
          break;
        }
        case he.AFTER_BODY: {
          eY(this, r);
          break;
        }
        case he.IN_FRAMESET: {
          pAe(this, r);
          break;
        }
        case he.AFTER_FRAMESET: {
          gAe(this, r);
          break;
        }
        case he.AFTER_AFTER_BODY: {
          vb(this, r);
          break;
        }
      }
    }
  }, {
    key: "onEof",
    value: function(r) {
      switch (this.insertionMode) {
        case he.INITIAL: {
          tm(this, r);
          break;
        }
        case he.BEFORE_HTML: {
          ag(this, r);
          break;
        }
        case he.BEFORE_HEAD: {
          sg(this, r);
          break;
        }
        case he.IN_HEAD: {
          lg(this, r);
          break;
        }
        case he.IN_HEAD_NO_SCRIPT: {
          cg(this, r);
          break;
        }
        case he.AFTER_HEAD: {
          ug(this, r);
          break;
        }
        case he.IN_BODY:
        case he.IN_TABLE:
        case he.IN_CAPTION:
        case he.IN_COLUMN_GROUP:
        case he.IN_TABLE_BODY:
        case he.IN_ROW:
        case he.IN_CELL:
        case he.IN_SELECT:
        case he.IN_SELECT_IN_TABLE: {
          XW(this, r);
          break;
        }
        case he.TEXT: {
          Ywe(this, r);
          break;
        }
        case he.IN_TABLE_TEXT: {
          rm(this, r);
          break;
        }
        case he.IN_TEMPLATE: {
          JW(this, r);
          break;
        }
        case he.AFTER_BODY:
        case he.IN_FRAMESET:
        case he.AFTER_FRAMESET:
        case he.AFTER_AFTER_BODY:
        case he.AFTER_AFTER_FRAMESET: {
          BN(this, r);
          break;
        }
      }
    }
  }, {
    key: "onWhitespaceCharacter",
    value: function(r) {
      if (this.skipNextNewLine && (this.skipNextNewLine = false, r.chars.charCodeAt(0) === $W.CODE_POINTS.LINE_FEED)) {
        if (r.chars.length === 1)
          return;
        r.chars = r.chars.substr(1);
      }
      if (this.tokenizer.inForeignNode) {
        this._insertCharacters(r);
        return;
      }
      switch (this.insertionMode) {
        case he.IN_HEAD:
        case he.IN_HEAD_NO_SCRIPT:
        case he.AFTER_HEAD:
        case he.TEXT:
        case he.IN_COLUMN_GROUP:
        case he.IN_SELECT:
        case he.IN_SELECT_IN_TABLE:
        case he.IN_FRAMESET:
        case he.AFTER_FRAMESET: {
          this._insertCharacters(r);
          break;
        }
        case he.IN_BODY:
        case he.IN_CAPTION:
        case he.IN_CELL:
        case he.IN_TEMPLATE:
        case he.AFTER_BODY:
        case he.AFTER_AFTER_BODY:
        case he.AFTER_AFTER_FRAMESET: {
          UW(this, r);
          break;
        }
        case he.IN_TABLE:
        case he.IN_TABLE_BODY:
        case he.IN_ROW: {
          nO(this, r);
          break;
        }
        case he.IN_TABLE_TEXT: {
          WW(this, r);
          break;
        }
      }
    }
  }], [{
    key: "parse",
    value: function(r, n) {
      const i = new this(n);
      return i.tokenizer.write(r, true), i.document;
    }
  }, {
    key: "getFragmentParser",
    value: function(r, n) {
      const i = Object.assign(Object.assign({}, ZH), n);
      r ?? (r = i.treeAdapter.createElement(k.TAG_NAMES.TEMPLATE, k.NS.HTML, []));
      const o = i.treeAdapter.createElement("documentmock", k.NS.HTML, []), a = new this(i, o, r);
      return a.fragmentContextID === k.TAG_ID.TEMPLATE && a.tmplInsertionModeStack.unshift(he.IN_TEMPLATE), a._initTokenizerForFragmentParsing(), a._insertFakeRootElement(), a._resetInsertionMode(), a._findFormInFragmentContext(), a;
    }
  }]), e12;
}();
cv.Parser = zSe;
function VSe(e12, t) {
  let r = e12.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);
  return r ? e12.openElements.contains(r.element) ? e12.openElements.hasInScope(t.tagID) || (r = null) : (e12.activeFormattingElements.removeEntry(r), r = null) : VW(e12, t), r;
}
function XSe(e12, t) {
  let r = null, n = e12.openElements.stackTop;
  for (; n >= 0; n--) {
    const i = e12.openElements.items[n];
    if (i === t.element)
      break;
    e12._isSpecialElement(i, e12.openElements.tagIDs[n]) && (r = i);
  }
  return r || (e12.openElements.shortenToLength(n < 0 ? 0 : n), e12.activeFormattingElements.removeEntry(t)), r;
}
function WSe(e12, t, r) {
  let n = t, i = e12.openElements.getCommonAncestor(t);
  for (let o = 0, a = i; a !== r; o++, a = i) {
    i = e12.openElements.getCommonAncestor(a);
    const s = e12.activeFormattingElements.getElementEntry(a), l = s && o >= jSe;
    !s || l ? (l && e12.activeFormattingElements.removeEntry(s), e12.openElements.remove(a)) : (a = YSe(e12, s), n === t && (e12.activeFormattingElements.bookmark = s), e12.treeAdapter.detachNode(n), e12.treeAdapter.appendChild(a, n), n = a);
  }
  return n;
}
function YSe(e12, t) {
  const r = e12.treeAdapter.getNamespaceURI(t.element), n = e12.treeAdapter.createElement(t.token.tagName, r, t.token.attrs);
  return e12.openElements.replace(t.element, n), t.element = n, n;
}
function qSe(e12, t, r) {
  const n = e12.treeAdapter.getTagName(t), i = (0, k.getTagID)(n);
  if (e12._isElementCausesFosterParenting(i))
    e12._fosterParentElement(r);
  else {
    const o = e12.treeAdapter.getNamespaceURI(t);
    i === k.TAG_ID.TEMPLATE && o === k.NS.HTML && (t = e12.treeAdapter.getTemplateContent(t)), e12.treeAdapter.appendChild(t, r);
  }
}
function KSe(e12, t, r) {
  const n = e12.treeAdapter.getNamespaceURI(r.element), {
    token: i
  } = r, o = e12.treeAdapter.createElement(i.tagName, n, i.attrs);
  e12._adoptNodes(t, o), e12.treeAdapter.appendChild(t, o), e12.activeFormattingElements.insertElementAfterBookmark(o, i), e12.activeFormattingElements.removeEntry(r), e12.openElements.remove(r.element), e12.openElements.insertAfter(t, o, i.tagID);
}
function LN(e12, t) {
  for (let r = 0; r < USe; r++) {
    const n = VSe(e12, t);
    if (!n)
      break;
    const i = XSe(e12, n);
    if (!i)
      break;
    e12.activeFormattingElements.bookmark = n;
    const o = WSe(e12, i, n.element), a = e12.openElements.getCommonAncestor(n.element);
    e12.treeAdapter.detachNode(o), a && qSe(e12, a, o), KSe(e12, i, n);
  }
}
function tC(e12, t) {
  e12._appendCommentNode(t, e12.openElements.currentTmplContentOrNode);
}
function ZSe(e12, t) {
  e12._appendCommentNode(t, e12.openElements.items[0]);
}
function QSe(e12, t) {
  e12._appendCommentNode(t, e12.document);
}
function BN(e12, t) {
  if (e12.stopped = true, t.location) {
    const r = e12.fragmentContext ? 0 : 2;
    for (let n = e12.openElements.stackTop; n >= r; n--)
      e12._setEndLocation(e12.openElements.items[n], t);
    if (!e12.fragmentContext && e12.openElements.stackTop >= 0) {
      const n = e12.openElements.items[0], i = e12.treeAdapter.getNodeSourceCodeLocation(n);
      if (i && !i.endTag && (e12._setEndLocation(n, t), e12.openElements.stackTop >= 1)) {
        const o = e12.openElements.items[1], a = e12.treeAdapter.getNodeSourceCodeLocation(o);
        a && !a.endTag && e12._setEndLocation(o, t);
      }
    }
  }
}
function JSe(e12, t) {
  e12._setDocumentType(t);
  const r = t.forceQuirks ? k.DOCUMENT_MODE.QUIRKS : KH.getDocumentMode(t);
  KH.isConforming(t) || e12._err(t, jn.ERR.nonConformingDoctype), e12.treeAdapter.setDocumentMode(e12.document, r), e12.insertionMode = he.BEFORE_HTML;
}
function tm(e12, t) {
  e12._err(t, jn.ERR.missingDoctype, true), e12.treeAdapter.setDocumentMode(e12.document, k.DOCUMENT_MODE.QUIRKS), e12.insertionMode = he.BEFORE_HTML, e12._processToken(t);
}
function ewe(e12, t) {
  t.tagID === k.TAG_ID.HTML ? (e12._insertElement(t, k.NS.HTML), e12.insertionMode = he.BEFORE_HEAD) : ag(e12, t);
}
function twe(e12, t) {
  const r = t.tagID;
  (r === k.TAG_ID.HTML || r === k.TAG_ID.HEAD || r === k.TAG_ID.BODY || r === k.TAG_ID.BR) && ag(e12, t);
}
function ag(e12, t) {
  e12._insertFakeRootElement(), e12.insertionMode = he.BEFORE_HEAD, e12._processToken(t);
}
function rwe(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.HTML: {
      oi(e12, t);
      break;
    }
    case k.TAG_ID.HEAD: {
      e12._insertElement(t, k.NS.HTML), e12.headElement = e12.openElements.current, e12.insertionMode = he.IN_HEAD;
      break;
    }
    default:
      sg(e12, t);
  }
}
function nwe(e12, t) {
  const r = t.tagID;
  r === k.TAG_ID.HEAD || r === k.TAG_ID.BODY || r === k.TAG_ID.HTML || r === k.TAG_ID.BR ? sg(e12, t) : e12._err(t, jn.ERR.endTagWithoutMatchingOpenElement);
}
function sg(e12, t) {
  e12._insertFakeElement(k.TAG_NAMES.HEAD, k.TAG_ID.HEAD), e12.headElement = e12.openElements.current, e12.insertionMode = he.IN_HEAD, e12._processToken(t);
}
function la(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.HTML: {
      oi(e12, t);
      break;
    }
    case k.TAG_ID.BASE:
    case k.TAG_ID.BASEFONT:
    case k.TAG_ID.BGSOUND:
    case k.TAG_ID.LINK:
    case k.TAG_ID.META: {
      e12._appendElement(t, k.NS.HTML), t.ackSelfClosing = true;
      break;
    }
    case k.TAG_ID.TITLE: {
      e12._switchToTextParsing(t, hi.TokenizerMode.RCDATA);
      break;
    }
    case k.TAG_ID.NOSCRIPT: {
      e12.options.scriptingEnabled ? e12._switchToTextParsing(t, hi.TokenizerMode.RAWTEXT) : (e12._insertElement(t, k.NS.HTML), e12.insertionMode = he.IN_HEAD_NO_SCRIPT);
      break;
    }
    case k.TAG_ID.NOFRAMES:
    case k.TAG_ID.STYLE: {
      e12._switchToTextParsing(t, hi.TokenizerMode.RAWTEXT);
      break;
    }
    case k.TAG_ID.SCRIPT: {
      e12._switchToTextParsing(t, hi.TokenizerMode.SCRIPT_DATA);
      break;
    }
    case k.TAG_ID.TEMPLATE: {
      e12._insertTemplate(t), e12.activeFormattingElements.insertMarker(), e12.framesetOk = false, e12.insertionMode = he.IN_TEMPLATE, e12.tmplInsertionModeStack.unshift(he.IN_TEMPLATE);
      break;
    }
    case k.TAG_ID.HEAD: {
      e12._err(t, jn.ERR.misplacedStartTagForHeadElement);
      break;
    }
    default:
      lg(e12, t);
  }
}
function iwe(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.HEAD: {
      e12.openElements.pop(), e12.insertionMode = he.AFTER_HEAD;
      break;
    }
    case k.TAG_ID.BODY:
    case k.TAG_ID.BR:
    case k.TAG_ID.HTML: {
      lg(e12, t);
      break;
    }
    case k.TAG_ID.TEMPLATE: {
      ih(e12, t);
      break;
    }
    default:
      e12._err(t, jn.ERR.endTagWithoutMatchingOpenElement);
  }
}
function ih(e12, t) {
  e12.openElements.tmplCount > 0 ? (e12.openElements.generateImpliedEndTagsThoroughly(), e12.openElements.currentTagId !== k.TAG_ID.TEMPLATE && e12._err(t, jn.ERR.closingOfElementWithOpenChildElements), e12.openElements.popUntilTagNamePopped(k.TAG_ID.TEMPLATE), e12.activeFormattingElements.clearToLastMarker(), e12.tmplInsertionModeStack.shift(), e12._resetInsertionMode()) : e12._err(t, jn.ERR.endTagWithoutMatchingOpenElement);
}
function lg(e12, t) {
  e12.openElements.pop(), e12.insertionMode = he.AFTER_HEAD, e12._processToken(t);
}
function owe(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.HTML: {
      oi(e12, t);
      break;
    }
    case k.TAG_ID.BASEFONT:
    case k.TAG_ID.BGSOUND:
    case k.TAG_ID.HEAD:
    case k.TAG_ID.LINK:
    case k.TAG_ID.META:
    case k.TAG_ID.NOFRAMES:
    case k.TAG_ID.STYLE: {
      la(e12, t);
      break;
    }
    case k.TAG_ID.NOSCRIPT: {
      e12._err(t, jn.ERR.nestedNoscriptInHead);
      break;
    }
    default:
      cg(e12, t);
  }
}
function awe(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.NOSCRIPT: {
      e12.openElements.pop(), e12.insertionMode = he.IN_HEAD;
      break;
    }
    case k.TAG_ID.BR: {
      cg(e12, t);
      break;
    }
    default:
      e12._err(t, jn.ERR.endTagWithoutMatchingOpenElement);
  }
}
function cg(e12, t) {
  const r = t.type === hn.TokenType.EOF ? jn.ERR.openElementsLeftAfterEof : jn.ERR.disallowedContentInNoscriptInHead;
  e12._err(t, r), e12.openElements.pop(), e12.insertionMode = he.IN_HEAD, e12._processToken(t);
}
function swe(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.HTML: {
      oi(e12, t);
      break;
    }
    case k.TAG_ID.BODY: {
      e12._insertElement(t, k.NS.HTML), e12.framesetOk = false, e12.insertionMode = he.IN_BODY;
      break;
    }
    case k.TAG_ID.FRAMESET: {
      e12._insertElement(t, k.NS.HTML), e12.insertionMode = he.IN_FRAMESET;
      break;
    }
    case k.TAG_ID.BASE:
    case k.TAG_ID.BASEFONT:
    case k.TAG_ID.BGSOUND:
    case k.TAG_ID.LINK:
    case k.TAG_ID.META:
    case k.TAG_ID.NOFRAMES:
    case k.TAG_ID.SCRIPT:
    case k.TAG_ID.STYLE:
    case k.TAG_ID.TEMPLATE:
    case k.TAG_ID.TITLE: {
      e12._err(t, jn.ERR.abandonedHeadElementChild), e12.openElements.push(e12.headElement, k.TAG_ID.HEAD), la(e12, t), e12.openElements.remove(e12.headElement);
      break;
    }
    case k.TAG_ID.HEAD: {
      e12._err(t, jn.ERR.misplacedStartTagForHeadElement);
      break;
    }
    default:
      ug(e12, t);
  }
}
function lwe(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.BODY:
    case k.TAG_ID.HTML:
    case k.TAG_ID.BR: {
      ug(e12, t);
      break;
    }
    case k.TAG_ID.TEMPLATE: {
      ih(e12, t);
      break;
    }
    default:
      e12._err(t, jn.ERR.endTagWithoutMatchingOpenElement);
  }
}
function ug(e12, t) {
  e12._insertFakeElement(k.TAG_NAMES.BODY, k.TAG_ID.BODY), e12.insertionMode = he.IN_BODY, K1(e12, t);
}
function K1(e12, t) {
  switch (t.type) {
    case hn.TokenType.CHARACTER: {
      jW(e12, t);
      break;
    }
    case hn.TokenType.WHITESPACE_CHARACTER: {
      UW(e12, t);
      break;
    }
    case hn.TokenType.COMMENT: {
      tC(e12, t);
      break;
    }
    case hn.TokenType.START_TAG: {
      oi(e12, t);
      break;
    }
    case hn.TokenType.END_TAG: {
      Z1(e12, t);
      break;
    }
    case hn.TokenType.EOF: {
      XW(e12, t);
      break;
    }
  }
}
function UW(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._insertCharacters(t);
}
function jW(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._insertCharacters(t), e12.framesetOk = false;
}
function cwe(e12, t) {
  e12.openElements.tmplCount === 0 && e12.treeAdapter.adoptAttributes(e12.openElements.items[0], t.attrs);
}
function uwe(e12, t) {
  const r = e12.openElements.tryPeekProperlyNestedBodyElement();
  r && e12.openElements.tmplCount === 0 && (e12.framesetOk = false, e12.treeAdapter.adoptAttributes(r, t.attrs));
}
function hwe(e12, t) {
  const r = e12.openElements.tryPeekProperlyNestedBodyElement();
  e12.framesetOk && r && (e12.treeAdapter.detachNode(r), e12.openElements.popAllUpToHtmlElement(), e12._insertElement(t, k.NS.HTML), e12.insertionMode = he.IN_FRAMESET);
}
function fwe(e12, t) {
  e12.openElements.hasInButtonScope(k.TAG_ID.P) && e12._closePElement(), e12._insertElement(t, k.NS.HTML);
}
function dwe(e12, t) {
  e12.openElements.hasInButtonScope(k.TAG_ID.P) && e12._closePElement(), (0, k.isNumberedHeader)(e12.openElements.currentTagId) && e12.openElements.pop(), e12._insertElement(t, k.NS.HTML);
}
function pwe(e12, t) {
  e12.openElements.hasInButtonScope(k.TAG_ID.P) && e12._closePElement(), e12._insertElement(t, k.NS.HTML), e12.skipNextNewLine = true, e12.framesetOk = false;
}
function mwe(e12, t) {
  const r = e12.openElements.tmplCount > 0;
  (!e12.formElement || r) && (e12.openElements.hasInButtonScope(k.TAG_ID.P) && e12._closePElement(), e12._insertElement(t, k.NS.HTML), r || (e12.formElement = e12.openElements.current));
}
function gwe(e12, t) {
  e12.framesetOk = false;
  const r = t.tagID;
  for (let n = e12.openElements.stackTop; n >= 0; n--) {
    const i = e12.openElements.tagIDs[n];
    if (r === k.TAG_ID.LI && i === k.TAG_ID.LI || (r === k.TAG_ID.DD || r === k.TAG_ID.DT) && (i === k.TAG_ID.DD || i === k.TAG_ID.DT)) {
      e12.openElements.generateImpliedEndTagsWithExclusion(i), e12.openElements.popUntilTagNamePopped(i);
      break;
    }
    if (i !== k.TAG_ID.ADDRESS && i !== k.TAG_ID.DIV && i !== k.TAG_ID.P && e12._isSpecialElement(e12.openElements.items[n], i))
      break;
  }
  e12.openElements.hasInButtonScope(k.TAG_ID.P) && e12._closePElement(), e12._insertElement(t, k.NS.HTML);
}
function vwe(e12, t) {
  e12.openElements.hasInButtonScope(k.TAG_ID.P) && e12._closePElement(), e12._insertElement(t, k.NS.HTML), e12.tokenizer.state = hi.TokenizerMode.PLAINTEXT;
}
function ywe(e12, t) {
  e12.openElements.hasInScope(k.TAG_ID.BUTTON) && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilTagNamePopped(k.TAG_ID.BUTTON)), e12._reconstructActiveFormattingElements(), e12._insertElement(t, k.NS.HTML), e12.framesetOk = false;
}
function _we(e12, t) {
  const r = e12.activeFormattingElements.getElementEntryInScopeWithTagName(k.TAG_NAMES.A);
  r && (LN(e12, t), e12.openElements.remove(r.element), e12.activeFormattingElements.removeEntry(r)), e12._reconstructActiveFormattingElements(), e12._insertElement(t, k.NS.HTML), e12.activeFormattingElements.pushElement(e12.openElements.current, t);
}
function bwe(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._insertElement(t, k.NS.HTML), e12.activeFormattingElements.pushElement(e12.openElements.current, t);
}
function Twe(e12, t) {
  e12._reconstructActiveFormattingElements(), e12.openElements.hasInScope(k.TAG_ID.NOBR) && (LN(e12, t), e12._reconstructActiveFormattingElements()), e12._insertElement(t, k.NS.HTML), e12.activeFormattingElements.pushElement(e12.openElements.current, t);
}
function Ewe(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._insertElement(t, k.NS.HTML), e12.activeFormattingElements.insertMarker(), e12.framesetOk = false;
}
function Swe(e12, t) {
  e12.treeAdapter.getDocumentMode(e12.document) !== k.DOCUMENT_MODE.QUIRKS && e12.openElements.hasInButtonScope(k.TAG_ID.P) && e12._closePElement(), e12._insertElement(t, k.NS.HTML), e12.framesetOk = false, e12.insertionMode = he.IN_TABLE;
}
function GW(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._appendElement(t, k.NS.HTML), e12.framesetOk = false, t.ackSelfClosing = true;
}
function zW(e12) {
  const t = (0, hn.getTokenAttr)(e12, k.ATTRS.TYPE);
  return t != null && t.toLowerCase() === HSe;
}
function wwe(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._appendElement(t, k.NS.HTML), zW(t) || (e12.framesetOk = false), t.ackSelfClosing = true;
}
function Awe(e12, t) {
  e12._appendElement(t, k.NS.HTML), t.ackSelfClosing = true;
}
function Owe(e12, t) {
  e12.openElements.hasInButtonScope(k.TAG_ID.P) && e12._closePElement(), e12._appendElement(t, k.NS.HTML), e12.framesetOk = false, t.ackSelfClosing = true;
}
function Iwe(e12, t) {
  t.tagName = k.TAG_NAMES.IMG, t.tagID = k.TAG_ID.IMG, GW(e12, t);
}
function Pwe(e12, t) {
  e12._insertElement(t, k.NS.HTML), e12.skipNextNewLine = true, e12.tokenizer.state = hi.TokenizerMode.RCDATA, e12.originalInsertionMode = e12.insertionMode, e12.framesetOk = false, e12.insertionMode = he.TEXT;
}
function Cwe(e12, t) {
  e12.openElements.hasInButtonScope(k.TAG_ID.P) && e12._closePElement(), e12._reconstructActiveFormattingElements(), e12.framesetOk = false, e12._switchToTextParsing(t, hi.TokenizerMode.RAWTEXT);
}
function xwe(e12, t) {
  e12.framesetOk = false, e12._switchToTextParsing(t, hi.TokenizerMode.RAWTEXT);
}
function QH(e12, t) {
  e12._switchToTextParsing(t, hi.TokenizerMode.RAWTEXT);
}
function kwe(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._insertElement(t, k.NS.HTML), e12.framesetOk = false, e12.insertionMode = e12.insertionMode === he.IN_TABLE || e12.insertionMode === he.IN_CAPTION || e12.insertionMode === he.IN_TABLE_BODY || e12.insertionMode === he.IN_ROW || e12.insertionMode === he.IN_CELL ? he.IN_SELECT_IN_TABLE : he.IN_SELECT;
}
function Dwe(e12, t) {
  e12.openElements.currentTagId === k.TAG_ID.OPTION && e12.openElements.pop(), e12._reconstructActiveFormattingElements(), e12._insertElement(t, k.NS.HTML);
}
function Rwe(e12, t) {
  e12.openElements.hasInScope(k.TAG_ID.RUBY) && e12.openElements.generateImpliedEndTags(), e12._insertElement(t, k.NS.HTML);
}
function Nwe(e12, t) {
  e12.openElements.hasInScope(k.TAG_ID.RUBY) && e12.openElements.generateImpliedEndTagsWithExclusion(k.TAG_ID.RTC), e12._insertElement(t, k.NS.HTML);
}
function Mwe(e12, t) {
  e12._reconstructActiveFormattingElements(), Ea.adjustTokenMathMLAttrs(t), Ea.adjustTokenXMLAttrs(t), t.selfClosing ? e12._appendElement(t, k.NS.MATHML) : e12._insertElement(t, k.NS.MATHML), t.ackSelfClosing = true;
}
function Lwe(e12, t) {
  e12._reconstructActiveFormattingElements(), Ea.adjustTokenSVGAttrs(t), Ea.adjustTokenXMLAttrs(t), t.selfClosing ? e12._appendElement(t, k.NS.SVG) : e12._insertElement(t, k.NS.SVG), t.ackSelfClosing = true;
}
function JH(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._insertElement(t, k.NS.HTML);
}
function oi(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.I:
    case k.TAG_ID.S:
    case k.TAG_ID.B:
    case k.TAG_ID.U:
    case k.TAG_ID.EM:
    case k.TAG_ID.TT:
    case k.TAG_ID.BIG:
    case k.TAG_ID.CODE:
    case k.TAG_ID.FONT:
    case k.TAG_ID.SMALL:
    case k.TAG_ID.STRIKE:
    case k.TAG_ID.STRONG: {
      bwe(e12, t);
      break;
    }
    case k.TAG_ID.A: {
      _we(e12, t);
      break;
    }
    case k.TAG_ID.H1:
    case k.TAG_ID.H2:
    case k.TAG_ID.H3:
    case k.TAG_ID.H4:
    case k.TAG_ID.H5:
    case k.TAG_ID.H6: {
      dwe(e12, t);
      break;
    }
    case k.TAG_ID.P:
    case k.TAG_ID.DL:
    case k.TAG_ID.OL:
    case k.TAG_ID.UL:
    case k.TAG_ID.DIV:
    case k.TAG_ID.DIR:
    case k.TAG_ID.NAV:
    case k.TAG_ID.MAIN:
    case k.TAG_ID.MENU:
    case k.TAG_ID.ASIDE:
    case k.TAG_ID.CENTER:
    case k.TAG_ID.FIGURE:
    case k.TAG_ID.FOOTER:
    case k.TAG_ID.HEADER:
    case k.TAG_ID.HGROUP:
    case k.TAG_ID.DIALOG:
    case k.TAG_ID.DETAILS:
    case k.TAG_ID.ADDRESS:
    case k.TAG_ID.ARTICLE:
    case k.TAG_ID.SECTION:
    case k.TAG_ID.SUMMARY:
    case k.TAG_ID.FIELDSET:
    case k.TAG_ID.BLOCKQUOTE:
    case k.TAG_ID.FIGCAPTION: {
      fwe(e12, t);
      break;
    }
    case k.TAG_ID.LI:
    case k.TAG_ID.DD:
    case k.TAG_ID.DT: {
      gwe(e12, t);
      break;
    }
    case k.TAG_ID.BR:
    case k.TAG_ID.IMG:
    case k.TAG_ID.WBR:
    case k.TAG_ID.AREA:
    case k.TAG_ID.EMBED:
    case k.TAG_ID.KEYGEN: {
      GW(e12, t);
      break;
    }
    case k.TAG_ID.HR: {
      Owe(e12, t);
      break;
    }
    case k.TAG_ID.RB:
    case k.TAG_ID.RTC: {
      Rwe(e12, t);
      break;
    }
    case k.TAG_ID.RT:
    case k.TAG_ID.RP: {
      Nwe(e12, t);
      break;
    }
    case k.TAG_ID.PRE:
    case k.TAG_ID.LISTING: {
      pwe(e12, t);
      break;
    }
    case k.TAG_ID.XMP: {
      Cwe(e12, t);
      break;
    }
    case k.TAG_ID.SVG: {
      Lwe(e12, t);
      break;
    }
    case k.TAG_ID.HTML: {
      cwe(e12, t);
      break;
    }
    case k.TAG_ID.BASE:
    case k.TAG_ID.LINK:
    case k.TAG_ID.META:
    case k.TAG_ID.STYLE:
    case k.TAG_ID.TITLE:
    case k.TAG_ID.SCRIPT:
    case k.TAG_ID.BGSOUND:
    case k.TAG_ID.BASEFONT:
    case k.TAG_ID.TEMPLATE: {
      la(e12, t);
      break;
    }
    case k.TAG_ID.BODY: {
      uwe(e12, t);
      break;
    }
    case k.TAG_ID.FORM: {
      mwe(e12, t);
      break;
    }
    case k.TAG_ID.NOBR: {
      Twe(e12, t);
      break;
    }
    case k.TAG_ID.MATH: {
      Mwe(e12, t);
      break;
    }
    case k.TAG_ID.TABLE: {
      Swe(e12, t);
      break;
    }
    case k.TAG_ID.INPUT: {
      wwe(e12, t);
      break;
    }
    case k.TAG_ID.PARAM:
    case k.TAG_ID.TRACK:
    case k.TAG_ID.SOURCE: {
      Awe(e12, t);
      break;
    }
    case k.TAG_ID.IMAGE: {
      Iwe(e12, t);
      break;
    }
    case k.TAG_ID.BUTTON: {
      ywe(e12, t);
      break;
    }
    case k.TAG_ID.APPLET:
    case k.TAG_ID.OBJECT:
    case k.TAG_ID.MARQUEE: {
      Ewe(e12, t);
      break;
    }
    case k.TAG_ID.IFRAME: {
      xwe(e12, t);
      break;
    }
    case k.TAG_ID.SELECT: {
      kwe(e12, t);
      break;
    }
    case k.TAG_ID.OPTION:
    case k.TAG_ID.OPTGROUP: {
      Dwe(e12, t);
      break;
    }
    case k.TAG_ID.NOEMBED: {
      QH(e12, t);
      break;
    }
    case k.TAG_ID.FRAMESET: {
      hwe(e12, t);
      break;
    }
    case k.TAG_ID.TEXTAREA: {
      Pwe(e12, t);
      break;
    }
    case k.TAG_ID.NOSCRIPT: {
      e12.options.scriptingEnabled ? QH(e12, t) : JH(e12, t);
      break;
    }
    case k.TAG_ID.PLAINTEXT: {
      vwe(e12, t);
      break;
    }
    case k.TAG_ID.COL:
    case k.TAG_ID.TH:
    case k.TAG_ID.TD:
    case k.TAG_ID.TR:
    case k.TAG_ID.HEAD:
    case k.TAG_ID.FRAME:
    case k.TAG_ID.TBODY:
    case k.TAG_ID.TFOOT:
    case k.TAG_ID.THEAD:
    case k.TAG_ID.CAPTION:
    case k.TAG_ID.COLGROUP:
      break;
    default:
      JH(e12, t);
  }
}
function Bwe(e12, t) {
  if (e12.openElements.hasInScope(k.TAG_ID.BODY) && (e12.insertionMode = he.AFTER_BODY, e12.options.sourceCodeLocationInfo)) {
    const r = e12.openElements.tryPeekProperlyNestedBodyElement();
    r && e12._setEndLocation(r, t);
  }
}
function Fwe(e12, t) {
  e12.openElements.hasInScope(k.TAG_ID.BODY) && (e12.insertionMode = he.AFTER_BODY, eY(e12, t));
}
function $we(e12, t) {
  const r = t.tagID;
  e12.openElements.hasInScope(r) && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilTagNamePopped(r));
}
function Hwe(e12) {
  const t = e12.openElements.tmplCount > 0, {
    formElement: r
  } = e12;
  t || (e12.formElement = null), (r || t) && e12.openElements.hasInScope(k.TAG_ID.FORM) && (e12.openElements.generateImpliedEndTags(), t ? e12.openElements.popUntilTagNamePopped(k.TAG_ID.FORM) : r && e12.openElements.remove(r));
}
function Uwe(e12) {
  e12.openElements.hasInButtonScope(k.TAG_ID.P) || e12._insertFakeElement(k.TAG_NAMES.P, k.TAG_ID.P), e12._closePElement();
}
function jwe(e12) {
  e12.openElements.hasInListItemScope(k.TAG_ID.LI) && (e12.openElements.generateImpliedEndTagsWithExclusion(k.TAG_ID.LI), e12.openElements.popUntilTagNamePopped(k.TAG_ID.LI));
}
function Gwe(e12, t) {
  const r = t.tagID;
  e12.openElements.hasInScope(r) && (e12.openElements.generateImpliedEndTagsWithExclusion(r), e12.openElements.popUntilTagNamePopped(r));
}
function zwe(e12) {
  e12.openElements.hasNumberedHeaderInScope() && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilNumberedHeaderPopped());
}
function Vwe(e12, t) {
  const r = t.tagID;
  e12.openElements.hasInScope(r) && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilTagNamePopped(r), e12.activeFormattingElements.clearToLastMarker());
}
function Xwe(e12) {
  e12._reconstructActiveFormattingElements(), e12._insertFakeElement(k.TAG_NAMES.BR, k.TAG_ID.BR), e12.openElements.pop(), e12.framesetOk = false;
}
function VW(e12, t) {
  const r = t.tagName, n = t.tagID;
  for (let i = e12.openElements.stackTop; i > 0; i--) {
    const o = e12.openElements.items[i], a = e12.openElements.tagIDs[i];
    if (n === a && (n !== k.TAG_ID.UNKNOWN || e12.treeAdapter.getTagName(o) === r)) {
      e12.openElements.generateImpliedEndTagsWithExclusion(n), e12.openElements.stackTop >= i && e12.openElements.shortenToLength(i);
      break;
    }
    if (e12._isSpecialElement(o, a))
      break;
  }
}
function Z1(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.A:
    case k.TAG_ID.B:
    case k.TAG_ID.I:
    case k.TAG_ID.S:
    case k.TAG_ID.U:
    case k.TAG_ID.EM:
    case k.TAG_ID.TT:
    case k.TAG_ID.BIG:
    case k.TAG_ID.CODE:
    case k.TAG_ID.FONT:
    case k.TAG_ID.NOBR:
    case k.TAG_ID.SMALL:
    case k.TAG_ID.STRIKE:
    case k.TAG_ID.STRONG: {
      LN(e12, t);
      break;
    }
    case k.TAG_ID.P: {
      Uwe(e12);
      break;
    }
    case k.TAG_ID.DL:
    case k.TAG_ID.UL:
    case k.TAG_ID.OL:
    case k.TAG_ID.DIR:
    case k.TAG_ID.DIV:
    case k.TAG_ID.NAV:
    case k.TAG_ID.PRE:
    case k.TAG_ID.MAIN:
    case k.TAG_ID.MENU:
    case k.TAG_ID.ASIDE:
    case k.TAG_ID.BUTTON:
    case k.TAG_ID.CENTER:
    case k.TAG_ID.FIGURE:
    case k.TAG_ID.FOOTER:
    case k.TAG_ID.HEADER:
    case k.TAG_ID.HGROUP:
    case k.TAG_ID.DIALOG:
    case k.TAG_ID.ADDRESS:
    case k.TAG_ID.ARTICLE:
    case k.TAG_ID.DETAILS:
    case k.TAG_ID.SECTION:
    case k.TAG_ID.SUMMARY:
    case k.TAG_ID.LISTING:
    case k.TAG_ID.FIELDSET:
    case k.TAG_ID.BLOCKQUOTE:
    case k.TAG_ID.FIGCAPTION: {
      $we(e12, t);
      break;
    }
    case k.TAG_ID.LI: {
      jwe(e12);
      break;
    }
    case k.TAG_ID.DD:
    case k.TAG_ID.DT: {
      Gwe(e12, t);
      break;
    }
    case k.TAG_ID.H1:
    case k.TAG_ID.H2:
    case k.TAG_ID.H3:
    case k.TAG_ID.H4:
    case k.TAG_ID.H5:
    case k.TAG_ID.H6: {
      zwe(e12);
      break;
    }
    case k.TAG_ID.BR: {
      Xwe(e12);
      break;
    }
    case k.TAG_ID.BODY: {
      Bwe(e12, t);
      break;
    }
    case k.TAG_ID.HTML: {
      Fwe(e12, t);
      break;
    }
    case k.TAG_ID.FORM: {
      Hwe(e12);
      break;
    }
    case k.TAG_ID.APPLET:
    case k.TAG_ID.OBJECT:
    case k.TAG_ID.MARQUEE: {
      Vwe(e12, t);
      break;
    }
    case k.TAG_ID.TEMPLATE: {
      ih(e12, t);
      break;
    }
    default:
      VW(e12, t);
  }
}
function XW(e12, t) {
  e12.tmplInsertionModeStack.length > 0 ? JW(e12, t) : BN(e12, t);
}
function Wwe(e12, t) {
  var r;
  t.tagID === k.TAG_ID.SCRIPT && ((r = e12.scriptHandler) === null || r === void 0 || r.call(e12, e12.openElements.current)), e12.openElements.pop(), e12.insertionMode = e12.originalInsertionMode;
}
function Ywe(e12, t) {
  e12._err(t, jn.ERR.eofInElementThatCanContainOnlyText), e12.openElements.pop(), e12.insertionMode = e12.originalInsertionMode, e12.onEof(t);
}
function nO(e12, t) {
  if (HW.has(e12.openElements.currentTagId))
    switch (e12.pendingCharacterTokens.length = 0, e12.hasNonWhitespacePendingCharacterToken = false, e12.originalInsertionMode = e12.insertionMode, e12.insertionMode = he.IN_TABLE_TEXT, t.type) {
      case hn.TokenType.CHARACTER: {
        YW(e12, t);
        break;
      }
      case hn.TokenType.WHITESPACE_CHARACTER: {
        WW(e12, t);
        break;
      }
    }
  else
    cy(e12, t);
}
function qwe(e12, t) {
  e12.openElements.clearBackToTableContext(), e12.activeFormattingElements.insertMarker(), e12._insertElement(t, k.NS.HTML), e12.insertionMode = he.IN_CAPTION;
}
function Kwe(e12, t) {
  e12.openElements.clearBackToTableContext(), e12._insertElement(t, k.NS.HTML), e12.insertionMode = he.IN_COLUMN_GROUP;
}
function Zwe(e12, t) {
  e12.openElements.clearBackToTableContext(), e12._insertFakeElement(k.TAG_NAMES.COLGROUP, k.TAG_ID.COLGROUP), e12.insertionMode = he.IN_COLUMN_GROUP, FN(e12, t);
}
function Qwe(e12, t) {
  e12.openElements.clearBackToTableContext(), e12._insertElement(t, k.NS.HTML), e12.insertionMode = he.IN_TABLE_BODY;
}
function Jwe(e12, t) {
  e12.openElements.clearBackToTableContext(), e12._insertFakeElement(k.TAG_NAMES.TBODY, k.TAG_ID.TBODY), e12.insertionMode = he.IN_TABLE_BODY, Q1(e12, t);
}
function eAe(e12, t) {
  e12.openElements.hasInTableScope(k.TAG_ID.TABLE) && (e12.openElements.popUntilTagNamePopped(k.TAG_ID.TABLE), e12._resetInsertionMode(), e12._processStartTag(t));
}
function tAe(e12, t) {
  zW(t) ? e12._appendElement(t, k.NS.HTML) : cy(e12, t), t.ackSelfClosing = true;
}
function rAe(e12, t) {
  !e12.formElement && e12.openElements.tmplCount === 0 && (e12._insertElement(t, k.NS.HTML), e12.formElement = e12.openElements.current, e12.openElements.pop());
}
function Od(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.TD:
    case k.TAG_ID.TH:
    case k.TAG_ID.TR: {
      Jwe(e12, t);
      break;
    }
    case k.TAG_ID.STYLE:
    case k.TAG_ID.SCRIPT:
    case k.TAG_ID.TEMPLATE: {
      la(e12, t);
      break;
    }
    case k.TAG_ID.COL: {
      Zwe(e12, t);
      break;
    }
    case k.TAG_ID.FORM: {
      rAe(e12, t);
      break;
    }
    case k.TAG_ID.TABLE: {
      eAe(e12, t);
      break;
    }
    case k.TAG_ID.TBODY:
    case k.TAG_ID.TFOOT:
    case k.TAG_ID.THEAD: {
      Qwe(e12, t);
      break;
    }
    case k.TAG_ID.INPUT: {
      tAe(e12, t);
      break;
    }
    case k.TAG_ID.CAPTION: {
      qwe(e12, t);
      break;
    }
    case k.TAG_ID.COLGROUP: {
      Kwe(e12, t);
      break;
    }
    default:
      cy(e12, t);
  }
}
function uv(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.TABLE: {
      e12.openElements.hasInTableScope(k.TAG_ID.TABLE) && (e12.openElements.popUntilTagNamePopped(k.TAG_ID.TABLE), e12._resetInsertionMode());
      break;
    }
    case k.TAG_ID.TEMPLATE: {
      ih(e12, t);
      break;
    }
    case k.TAG_ID.BODY:
    case k.TAG_ID.CAPTION:
    case k.TAG_ID.COL:
    case k.TAG_ID.COLGROUP:
    case k.TAG_ID.HTML:
    case k.TAG_ID.TBODY:
    case k.TAG_ID.TD:
    case k.TAG_ID.TFOOT:
    case k.TAG_ID.TH:
    case k.TAG_ID.THEAD:
    case k.TAG_ID.TR:
      break;
    default:
      cy(e12, t);
  }
}
function cy(e12, t) {
  const r = e12.fosterParentingEnabled;
  e12.fosterParentingEnabled = true, K1(e12, t), e12.fosterParentingEnabled = r;
}
function WW(e12, t) {
  e12.pendingCharacterTokens.push(t);
}
function YW(e12, t) {
  e12.pendingCharacterTokens.push(t), e12.hasNonWhitespacePendingCharacterToken = true;
}
function rm(e12, t) {
  let r = 0;
  if (e12.hasNonWhitespacePendingCharacterToken)
    for (; r < e12.pendingCharacterTokens.length; r++)
      cy(e12, e12.pendingCharacterTokens[r]);
  else
    for (; r < e12.pendingCharacterTokens.length; r++)
      e12._insertCharacters(e12.pendingCharacterTokens[r]);
  e12.insertionMode = e12.originalInsertionMode, e12._processToken(t);
}
var qW = /* @__PURE__ */ new Set([k.TAG_ID.CAPTION, k.TAG_ID.COL, k.TAG_ID.COLGROUP, k.TAG_ID.TBODY, k.TAG_ID.TD, k.TAG_ID.TFOOT, k.TAG_ID.TH, k.TAG_ID.THEAD, k.TAG_ID.TR]);
function nAe(e12, t) {
  const r = t.tagID;
  qW.has(r) ? e12.openElements.hasInTableScope(k.TAG_ID.CAPTION) && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilTagNamePopped(k.TAG_ID.CAPTION), e12.activeFormattingElements.clearToLastMarker(), e12.insertionMode = he.IN_TABLE, Od(e12, t)) : oi(e12, t);
}
function iAe(e12, t) {
  const r = t.tagID;
  switch (r) {
    case k.TAG_ID.CAPTION:
    case k.TAG_ID.TABLE: {
      e12.openElements.hasInTableScope(k.TAG_ID.CAPTION) && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilTagNamePopped(k.TAG_ID.CAPTION), e12.activeFormattingElements.clearToLastMarker(), e12.insertionMode = he.IN_TABLE, r === k.TAG_ID.TABLE && uv(e12, t));
      break;
    }
    case k.TAG_ID.BODY:
    case k.TAG_ID.COL:
    case k.TAG_ID.COLGROUP:
    case k.TAG_ID.HTML:
    case k.TAG_ID.TBODY:
    case k.TAG_ID.TD:
    case k.TAG_ID.TFOOT:
    case k.TAG_ID.TH:
    case k.TAG_ID.THEAD:
    case k.TAG_ID.TR:
      break;
    default:
      Z1(e12, t);
  }
}
function FN(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.HTML: {
      oi(e12, t);
      break;
    }
    case k.TAG_ID.COL: {
      e12._appendElement(t, k.NS.HTML), t.ackSelfClosing = true;
      break;
    }
    case k.TAG_ID.TEMPLATE: {
      la(e12, t);
      break;
    }
    default:
      Z0(e12, t);
  }
}
function oAe(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.COLGROUP: {
      e12.openElements.currentTagId === k.TAG_ID.COLGROUP && (e12.openElements.pop(), e12.insertionMode = he.IN_TABLE);
      break;
    }
    case k.TAG_ID.TEMPLATE: {
      ih(e12, t);
      break;
    }
    case k.TAG_ID.COL:
      break;
    default:
      Z0(e12, t);
  }
}
function Z0(e12, t) {
  e12.openElements.currentTagId === k.TAG_ID.COLGROUP && (e12.openElements.pop(), e12.insertionMode = he.IN_TABLE, e12._processToken(t));
}
function Q1(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.TR: {
      e12.openElements.clearBackToTableBodyContext(), e12._insertElement(t, k.NS.HTML), e12.insertionMode = he.IN_ROW;
      break;
    }
    case k.TAG_ID.TH:
    case k.TAG_ID.TD: {
      e12.openElements.clearBackToTableBodyContext(), e12._insertFakeElement(k.TAG_NAMES.TR, k.TAG_ID.TR), e12.insertionMode = he.IN_ROW, J1(e12, t);
      break;
    }
    case k.TAG_ID.CAPTION:
    case k.TAG_ID.COL:
    case k.TAG_ID.COLGROUP:
    case k.TAG_ID.TBODY:
    case k.TAG_ID.TFOOT:
    case k.TAG_ID.THEAD: {
      e12.openElements.hasTableBodyContextInTableScope() && (e12.openElements.clearBackToTableBodyContext(), e12.openElements.pop(), e12.insertionMode = he.IN_TABLE, Od(e12, t));
      break;
    }
    default:
      Od(e12, t);
  }
}
function rC(e12, t) {
  const r = t.tagID;
  switch (t.tagID) {
    case k.TAG_ID.TBODY:
    case k.TAG_ID.TFOOT:
    case k.TAG_ID.THEAD: {
      e12.openElements.hasInTableScope(r) && (e12.openElements.clearBackToTableBodyContext(), e12.openElements.pop(), e12.insertionMode = he.IN_TABLE);
      break;
    }
    case k.TAG_ID.TABLE: {
      e12.openElements.hasTableBodyContextInTableScope() && (e12.openElements.clearBackToTableBodyContext(), e12.openElements.pop(), e12.insertionMode = he.IN_TABLE, uv(e12, t));
      break;
    }
    case k.TAG_ID.BODY:
    case k.TAG_ID.CAPTION:
    case k.TAG_ID.COL:
    case k.TAG_ID.COLGROUP:
    case k.TAG_ID.HTML:
    case k.TAG_ID.TD:
    case k.TAG_ID.TH:
    case k.TAG_ID.TR:
      break;
    default:
      uv(e12, t);
  }
}
function J1(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.TH:
    case k.TAG_ID.TD: {
      e12.openElements.clearBackToTableRowContext(), e12._insertElement(t, k.NS.HTML), e12.insertionMode = he.IN_CELL, e12.activeFormattingElements.insertMarker();
      break;
    }
    case k.TAG_ID.CAPTION:
    case k.TAG_ID.COL:
    case k.TAG_ID.COLGROUP:
    case k.TAG_ID.TBODY:
    case k.TAG_ID.TFOOT:
    case k.TAG_ID.THEAD:
    case k.TAG_ID.TR: {
      e12.openElements.hasInTableScope(k.TAG_ID.TR) && (e12.openElements.clearBackToTableRowContext(), e12.openElements.pop(), e12.insertionMode = he.IN_TABLE_BODY, Q1(e12, t));
      break;
    }
    default:
      Od(e12, t);
  }
}
function KW(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.TR: {
      e12.openElements.hasInTableScope(k.TAG_ID.TR) && (e12.openElements.clearBackToTableRowContext(), e12.openElements.pop(), e12.insertionMode = he.IN_TABLE_BODY);
      break;
    }
    case k.TAG_ID.TABLE: {
      e12.openElements.hasInTableScope(k.TAG_ID.TR) && (e12.openElements.clearBackToTableRowContext(), e12.openElements.pop(), e12.insertionMode = he.IN_TABLE_BODY, rC(e12, t));
      break;
    }
    case k.TAG_ID.TBODY:
    case k.TAG_ID.TFOOT:
    case k.TAG_ID.THEAD: {
      (e12.openElements.hasInTableScope(t.tagID) || e12.openElements.hasInTableScope(k.TAG_ID.TR)) && (e12.openElements.clearBackToTableRowContext(), e12.openElements.pop(), e12.insertionMode = he.IN_TABLE_BODY, rC(e12, t));
      break;
    }
    case k.TAG_ID.BODY:
    case k.TAG_ID.CAPTION:
    case k.TAG_ID.COL:
    case k.TAG_ID.COLGROUP:
    case k.TAG_ID.HTML:
    case k.TAG_ID.TD:
    case k.TAG_ID.TH:
      break;
    default:
      uv(e12, t);
  }
}
function aAe(e12, t) {
  const r = t.tagID;
  qW.has(r) ? (e12.openElements.hasInTableScope(k.TAG_ID.TD) || e12.openElements.hasInTableScope(k.TAG_ID.TH)) && (e12._closeTableCell(), J1(e12, t)) : oi(e12, t);
}
function sAe(e12, t) {
  const r = t.tagID;
  switch (r) {
    case k.TAG_ID.TD:
    case k.TAG_ID.TH: {
      e12.openElements.hasInTableScope(r) && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilTagNamePopped(r), e12.activeFormattingElements.clearToLastMarker(), e12.insertionMode = he.IN_ROW);
      break;
    }
    case k.TAG_ID.TABLE:
    case k.TAG_ID.TBODY:
    case k.TAG_ID.TFOOT:
    case k.TAG_ID.THEAD:
    case k.TAG_ID.TR: {
      e12.openElements.hasInTableScope(r) && (e12._closeTableCell(), KW(e12, t));
      break;
    }
    case k.TAG_ID.BODY:
    case k.TAG_ID.CAPTION:
    case k.TAG_ID.COL:
    case k.TAG_ID.COLGROUP:
    case k.TAG_ID.HTML:
      break;
    default:
      Z1(e12, t);
  }
}
function ZW(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.HTML: {
      oi(e12, t);
      break;
    }
    case k.TAG_ID.OPTION: {
      e12.openElements.currentTagId === k.TAG_ID.OPTION && e12.openElements.pop(), e12._insertElement(t, k.NS.HTML);
      break;
    }
    case k.TAG_ID.OPTGROUP: {
      e12.openElements.currentTagId === k.TAG_ID.OPTION && e12.openElements.pop(), e12.openElements.currentTagId === k.TAG_ID.OPTGROUP && e12.openElements.pop(), e12._insertElement(t, k.NS.HTML);
      break;
    }
    case k.TAG_ID.INPUT:
    case k.TAG_ID.KEYGEN:
    case k.TAG_ID.TEXTAREA:
    case k.TAG_ID.SELECT: {
      e12.openElements.hasInSelectScope(k.TAG_ID.SELECT) && (e12.openElements.popUntilTagNamePopped(k.TAG_ID.SELECT), e12._resetInsertionMode(), t.tagID !== k.TAG_ID.SELECT && e12._processStartTag(t));
      break;
    }
    case k.TAG_ID.SCRIPT:
    case k.TAG_ID.TEMPLATE: {
      la(e12, t);
      break;
    }
  }
}
function QW(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.OPTGROUP: {
      e12.openElements.stackTop > 0 && e12.openElements.currentTagId === k.TAG_ID.OPTION && e12.openElements.tagIDs[e12.openElements.stackTop - 1] === k.TAG_ID.OPTGROUP && e12.openElements.pop(), e12.openElements.currentTagId === k.TAG_ID.OPTGROUP && e12.openElements.pop();
      break;
    }
    case k.TAG_ID.OPTION: {
      e12.openElements.currentTagId === k.TAG_ID.OPTION && e12.openElements.pop();
      break;
    }
    case k.TAG_ID.SELECT: {
      e12.openElements.hasInSelectScope(k.TAG_ID.SELECT) && (e12.openElements.popUntilTagNamePopped(k.TAG_ID.SELECT), e12._resetInsertionMode());
      break;
    }
    case k.TAG_ID.TEMPLATE: {
      ih(e12, t);
      break;
    }
  }
}
function lAe(e12, t) {
  const r = t.tagID;
  r === k.TAG_ID.CAPTION || r === k.TAG_ID.TABLE || r === k.TAG_ID.TBODY || r === k.TAG_ID.TFOOT || r === k.TAG_ID.THEAD || r === k.TAG_ID.TR || r === k.TAG_ID.TD || r === k.TAG_ID.TH ? (e12.openElements.popUntilTagNamePopped(k.TAG_ID.SELECT), e12._resetInsertionMode(), e12._processStartTag(t)) : ZW(e12, t);
}
function cAe(e12, t) {
  const r = t.tagID;
  r === k.TAG_ID.CAPTION || r === k.TAG_ID.TABLE || r === k.TAG_ID.TBODY || r === k.TAG_ID.TFOOT || r === k.TAG_ID.THEAD || r === k.TAG_ID.TR || r === k.TAG_ID.TD || r === k.TAG_ID.TH ? e12.openElements.hasInTableScope(r) && (e12.openElements.popUntilTagNamePopped(k.TAG_ID.SELECT), e12._resetInsertionMode(), e12.onEndTag(t)) : QW(e12, t);
}
function uAe(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.BASE:
    case k.TAG_ID.BASEFONT:
    case k.TAG_ID.BGSOUND:
    case k.TAG_ID.LINK:
    case k.TAG_ID.META:
    case k.TAG_ID.NOFRAMES:
    case k.TAG_ID.SCRIPT:
    case k.TAG_ID.STYLE:
    case k.TAG_ID.TEMPLATE:
    case k.TAG_ID.TITLE: {
      la(e12, t);
      break;
    }
    case k.TAG_ID.CAPTION:
    case k.TAG_ID.COLGROUP:
    case k.TAG_ID.TBODY:
    case k.TAG_ID.TFOOT:
    case k.TAG_ID.THEAD: {
      e12.tmplInsertionModeStack[0] = he.IN_TABLE, e12.insertionMode = he.IN_TABLE, Od(e12, t);
      break;
    }
    case k.TAG_ID.COL: {
      e12.tmplInsertionModeStack[0] = he.IN_COLUMN_GROUP, e12.insertionMode = he.IN_COLUMN_GROUP, FN(e12, t);
      break;
    }
    case k.TAG_ID.TR: {
      e12.tmplInsertionModeStack[0] = he.IN_TABLE_BODY, e12.insertionMode = he.IN_TABLE_BODY, Q1(e12, t);
      break;
    }
    case k.TAG_ID.TD:
    case k.TAG_ID.TH: {
      e12.tmplInsertionModeStack[0] = he.IN_ROW, e12.insertionMode = he.IN_ROW, J1(e12, t);
      break;
    }
    default:
      e12.tmplInsertionModeStack[0] = he.IN_BODY, e12.insertionMode = he.IN_BODY, oi(e12, t);
  }
}
function hAe(e12, t) {
  t.tagID === k.TAG_ID.TEMPLATE && ih(e12, t);
}
function JW(e12, t) {
  e12.openElements.tmplCount > 0 ? (e12.openElements.popUntilTagNamePopped(k.TAG_ID.TEMPLATE), e12.activeFormattingElements.clearToLastMarker(), e12.tmplInsertionModeStack.shift(), e12._resetInsertionMode(), e12.onEof(t)) : BN(e12, t);
}
function fAe(e12, t) {
  t.tagID === k.TAG_ID.HTML ? oi(e12, t) : Q0(e12, t);
}
function eY(e12, t) {
  var r;
  if (t.tagID === k.TAG_ID.HTML) {
    if (e12.fragmentContext || (e12.insertionMode = he.AFTER_AFTER_BODY), e12.options.sourceCodeLocationInfo && e12.openElements.tagIDs[0] === k.TAG_ID.HTML) {
      e12._setEndLocation(e12.openElements.items[0], t);
      const n = e12.openElements.items[1];
      n && !(!((r = e12.treeAdapter.getNodeSourceCodeLocation(n)) === null || r === void 0) && r.endTag) && e12._setEndLocation(n, t);
    }
  } else
    Q0(e12, t);
}
function Q0(e12, t) {
  e12.insertionMode = he.IN_BODY, K1(e12, t);
}
function dAe(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.HTML: {
      oi(e12, t);
      break;
    }
    case k.TAG_ID.FRAMESET: {
      e12._insertElement(t, k.NS.HTML);
      break;
    }
    case k.TAG_ID.FRAME: {
      e12._appendElement(t, k.NS.HTML), t.ackSelfClosing = true;
      break;
    }
    case k.TAG_ID.NOFRAMES: {
      la(e12, t);
      break;
    }
  }
}
function pAe(e12, t) {
  t.tagID === k.TAG_ID.FRAMESET && !e12.openElements.isRootHtmlElementCurrent() && (e12.openElements.pop(), !e12.fragmentContext && e12.openElements.currentTagId !== k.TAG_ID.FRAMESET && (e12.insertionMode = he.AFTER_FRAMESET));
}
function mAe(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.HTML: {
      oi(e12, t);
      break;
    }
    case k.TAG_ID.NOFRAMES: {
      la(e12, t);
      break;
    }
  }
}
function gAe(e12, t) {
  t.tagID === k.TAG_ID.HTML && (e12.insertionMode = he.AFTER_AFTER_FRAMESET);
}
function vAe(e12, t) {
  t.tagID === k.TAG_ID.HTML ? oi(e12, t) : vb(e12, t);
}
function vb(e12, t) {
  e12.insertionMode = he.IN_BODY, K1(e12, t);
}
function yAe(e12, t) {
  switch (t.tagID) {
    case k.TAG_ID.HTML: {
      oi(e12, t);
      break;
    }
    case k.TAG_ID.NOFRAMES: {
      la(e12, t);
      break;
    }
  }
}
function _Ae(e12, t) {
  t.chars = $W.REPLACEMENT_CHARACTER, e12._insertCharacters(t);
}
function bAe(e12, t) {
  e12._insertCharacters(t), e12.framesetOk = false;
}
function tY(e12) {
  for (; e12.treeAdapter.getNamespaceURI(e12.openElements.current) !== k.NS.HTML && !e12._isIntegrationPoint(e12.openElements.currentTagId, e12.openElements.current); )
    e12.openElements.pop();
}
function TAe(e12, t) {
  if (Ea.causesExit(t))
    tY(e12), e12._startTagOutsideForeignContent(t);
  else {
    const r = e12._getAdjustedCurrentElement(), n = e12.treeAdapter.getNamespaceURI(r);
    n === k.NS.MATHML ? Ea.adjustTokenMathMLAttrs(t) : n === k.NS.SVG && (Ea.adjustTokenSVGTagName(t), Ea.adjustTokenSVGAttrs(t)), Ea.adjustTokenXMLAttrs(t), t.selfClosing ? e12._appendElement(t, n) : e12._insertElement(t, n), t.ackSelfClosing = true;
  }
}
function EAe(e12, t) {
  if (t.tagID === k.TAG_ID.P || t.tagID === k.TAG_ID.BR) {
    tY(e12), e12._endTagOutsideForeignContent(t);
    return;
  }
  for (let r = e12.openElements.stackTop; r > 0; r--) {
    const n = e12.openElements.items[r];
    if (e12.treeAdapter.getNamespaceURI(n) === k.NS.HTML) {
      e12._endTagOutsideForeignContent(t);
      break;
    }
    const i = e12.treeAdapter.getTagName(n);
    if (i.toLowerCase() === t.tagName) {
      t.tagName = i, e12.openElements.shortenToLength(r);
      break;
    }
  }
}
var Id = {};
Object.defineProperty(Id, "__esModule", {
  value: true
});
Id.serializeOuter = Id.serialize = void 0;
var Ir = Ks;
var rY = vd;
var SAe = q1;
var wAe = /* @__PURE__ */ new Set([Ir.TAG_NAMES.AREA, Ir.TAG_NAMES.BASE, Ir.TAG_NAMES.BASEFONT, Ir.TAG_NAMES.BGSOUND, Ir.TAG_NAMES.BR, Ir.TAG_NAMES.COL, Ir.TAG_NAMES.EMBED, Ir.TAG_NAMES.FRAME, Ir.TAG_NAMES.HR, Ir.TAG_NAMES.IMG, Ir.TAG_NAMES.INPUT, Ir.TAG_NAMES.KEYGEN, Ir.TAG_NAMES.LINK, Ir.TAG_NAMES.META, Ir.TAG_NAMES.PARAM, Ir.TAG_NAMES.SOURCE, Ir.TAG_NAMES.TRACK, Ir.TAG_NAMES.WBR]);
function nY(e12, t) {
  return t.treeAdapter.isElementNode(e12) && t.treeAdapter.getNamespaceURI(e12) === Ir.NS.HTML && wAe.has(t.treeAdapter.getTagName(e12));
}
var iY = {
  treeAdapter: SAe.defaultTreeAdapter,
  scriptingEnabled: true
};
function AAe(e12, t) {
  const r = Object.assign(Object.assign({}, iY), t);
  return nY(e12, r) ? "" : oY(e12, r);
}
Id.serialize = AAe;
function OAe(e12, t) {
  const r = Object.assign(Object.assign({}, iY), t);
  return aY(e12, r);
}
Id.serializeOuter = OAe;
function oY(e12, t) {
  let r = "";
  const n = t.treeAdapter.isElementNode(e12) && t.treeAdapter.getTagName(e12) === Ir.TAG_NAMES.TEMPLATE && t.treeAdapter.getNamespaceURI(e12) === Ir.NS.HTML ? t.treeAdapter.getTemplateContent(e12) : e12, i = t.treeAdapter.getChildNodes(n);
  if (i)
    for (const o of i)
      r += aY(o, t);
  return r;
}
function aY(e12, t) {
  return t.treeAdapter.isElementNode(e12) ? IAe(e12, t) : t.treeAdapter.isTextNode(e12) ? CAe(e12, t) : t.treeAdapter.isCommentNode(e12) ? xAe(e12, t) : t.treeAdapter.isDocumentTypeNode(e12) ? kAe(e12, t) : "";
}
function IAe(e12, t) {
  const r = t.treeAdapter.getTagName(e12);
  return `<${r}${PAe(e12, t)}>${nY(e12, t) ? "" : `${oY(e12, t)}</${r}>`}`;
}
function PAe(e12, {
  treeAdapter: t
}) {
  let r = "";
  for (const n of t.getAttrList(e12)) {
    if (r += " ", !n.namespace)
      r += n.name;
    else
      switch (n.namespace) {
        case Ir.NS.XML: {
          r += `xml:${n.name}`;
          break;
        }
        case Ir.NS.XMLNS: {
          n.name !== "xmlns" && (r += "xmlns:"), r += n.name;
          break;
        }
        case Ir.NS.XLINK: {
          r += `xlink:${n.name}`;
          break;
        }
        default:
          r += `${n.prefix}:${n.name}`;
      }
    r += `="${(0, rY.escapeAttribute)(n.value)}"`;
  }
  return r;
}
function CAe(e12, t) {
  const {
    treeAdapter: r
  } = t, n = r.getTextNodeContent(e12), i = r.getParentNode(e12), o = i && r.isElementNode(i) && r.getTagName(i);
  return o && r.getNamespaceURI(i) === Ir.NS.HTML && (0, Ir.hasUnescapedText)(o, t.scriptingEnabled) ? n : (0, rY.escapeText)(n);
}
function xAe(e12, {
  treeAdapter: t
}) {
  return `<!--${t.getCommentNodeContent(e12)}-->`;
}
function kAe(e12, {
  treeAdapter: t
}) {
  return `<!DOCTYPE ${t.getDocumentTypeNodeName(e12)}>`;
}
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.parseFragment = e12.parse = e12.TokenizerMode = e12.Tokenizer = e12.Token = e12.html = e12.foreignContent = e12.ErrorCodes = e12.serializeOuter = e12.serialize = e12.Parser = e12.defaultTreeAdapter = void 0;
  const t = cv;
  var r = q1;
  Object.defineProperty(e12, "defaultTreeAdapter", {
    enumerable: true,
    get: function() {
      return r.defaultTreeAdapter;
    }
  });
  var n = cv;
  Object.defineProperty(e12, "Parser", {
    enumerable: true,
    get: function() {
      return n.Parser;
    }
  });
  var i = Id;
  Object.defineProperty(e12, "serialize", {
    enumerable: true,
    get: function() {
      return i.serialize;
    }
  }), Object.defineProperty(e12, "serializeOuter", {
    enumerable: true,
    get: function() {
      return i.serializeOuter;
    }
  });
  var o = ly;
  Object.defineProperty(e12, "ErrorCodes", {
    enumerable: true,
    get: function() {
      return o.ERR;
    }
  }), e12.foreignContent = MN, e12.html = Ks, e12.Token = W1;
  var a = Su;
  Object.defineProperty(e12, "Tokenizer", {
    enumerable: true,
    get: function() {
      return a.Tokenizer;
    }
  }), Object.defineProperty(e12, "TokenizerMode", {
    enumerable: true,
    get: function() {
      return a.TokenizerMode;
    }
  });
  function s(u, c) {
    return t.Parser.parse(u, c);
  }
  e12.parse = s;
  function l(u, c, f) {
    typeof u == "string" && (f = c, c = u, u = null);
    const h = t.Parser.getFragmentParser(u, f);
    return h.tokenizer.write(c, true), h.getFragment();
  }
  e12.parseFragment = l;
})(xW);
var sY = {};
var lY = {};
var hv = {};
var wu = {};
var eS = {};
var tS = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.isUndefinedCodePoint = e12.isControlCodePoint = e12.getSurrogatePairCodePoint = e12.isSurrogatePair = e12.isSurrogate = e12.SEQUENCES = e12.CODE_POINTS = e12.REPLACEMENT_CHARACTER = void 0;
  const t = /* @__PURE__ */ new Set([65534, 65535, 131070, 131071, 196606, 196607, 262142, 262143, 327678, 327679, 393214, 393215, 458750, 458751, 524286, 524287, 589822, 589823, 655358, 655359, 720894, 720895, 786430, 786431, 851966, 851967, 917502, 917503, 983038, 983039, 1048574, 1048575, 1114110, 1114111]);
  e12.REPLACEMENT_CHARACTER = "�", function(s) {
    s[s.EOF = -1] = "EOF", s[s.NULL = 0] = "NULL", s[s.TABULATION = 9] = "TABULATION", s[s.CARRIAGE_RETURN = 13] = "CARRIAGE_RETURN", s[s.LINE_FEED = 10] = "LINE_FEED", s[s.FORM_FEED = 12] = "FORM_FEED", s[s.SPACE = 32] = "SPACE", s[s.EXCLAMATION_MARK = 33] = "EXCLAMATION_MARK", s[s.QUOTATION_MARK = 34] = "QUOTATION_MARK", s[s.NUMBER_SIGN = 35] = "NUMBER_SIGN", s[s.AMPERSAND = 38] = "AMPERSAND", s[s.APOSTROPHE = 39] = "APOSTROPHE", s[s.HYPHEN_MINUS = 45] = "HYPHEN_MINUS", s[s.SOLIDUS = 47] = "SOLIDUS", s[s.DIGIT_0 = 48] = "DIGIT_0", s[s.DIGIT_9 = 57] = "DIGIT_9", s[s.SEMICOLON = 59] = "SEMICOLON", s[s.LESS_THAN_SIGN = 60] = "LESS_THAN_SIGN", s[s.EQUALS_SIGN = 61] = "EQUALS_SIGN", s[s.GREATER_THAN_SIGN = 62] = "GREATER_THAN_SIGN", s[s.QUESTION_MARK = 63] = "QUESTION_MARK", s[s.LATIN_CAPITAL_A = 65] = "LATIN_CAPITAL_A", s[s.LATIN_CAPITAL_F = 70] = "LATIN_CAPITAL_F", s[s.LATIN_CAPITAL_X = 88] = "LATIN_CAPITAL_X", s[s.LATIN_CAPITAL_Z = 90] = "LATIN_CAPITAL_Z", s[s.RIGHT_SQUARE_BRACKET = 93] = "RIGHT_SQUARE_BRACKET", s[s.GRAVE_ACCENT = 96] = "GRAVE_ACCENT", s[s.LATIN_SMALL_A = 97] = "LATIN_SMALL_A", s[s.LATIN_SMALL_F = 102] = "LATIN_SMALL_F", s[s.LATIN_SMALL_X = 120] = "LATIN_SMALL_X", s[s.LATIN_SMALL_Z = 122] = "LATIN_SMALL_Z", s[s.REPLACEMENT_CHARACTER = 65533] = "REPLACEMENT_CHARACTER";
  }(e12.CODE_POINTS || (e12.CODE_POINTS = {})), e12.SEQUENCES = {
    DASH_DASH: "--",
    CDATA_START: "[CDATA[",
    DOCTYPE: "doctype",
    SCRIPT: "script",
    PUBLIC: "public",
    SYSTEM: "system"
  };
  function r(s) {
    return s >= 55296 && s <= 57343;
  }
  e12.isSurrogate = r;
  function n(s) {
    return s >= 56320 && s <= 57343;
  }
  e12.isSurrogatePair = n;
  function i(s, l) {
    return (s - 55296) * 1024 + 9216 + l;
  }
  e12.getSurrogatePairCodePoint = i;
  function o(s) {
    return s !== 32 && s !== 10 && s !== 13 && s !== 9 && s !== 12 && s >= 1 && s <= 31 || s >= 127 && s <= 159;
  }
  e12.isControlCodePoint = o;
  function a(s) {
    return s >= 64976 && s <= 65007 || t.has(s);
  }
  e12.isUndefinedCodePoint = a;
})(tS);
var uy = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.ERR = void 0, function(t) {
    t.controlCharacterInInputStream = "control-character-in-input-stream", t.noncharacterInInputStream = "noncharacter-in-input-stream", t.surrogateInInputStream = "surrogate-in-input-stream", t.nonVoidHtmlElementStartTagWithTrailingSolidus = "non-void-html-element-start-tag-with-trailing-solidus", t.endTagWithAttributes = "end-tag-with-attributes", t.endTagWithTrailingSolidus = "end-tag-with-trailing-solidus", t.unexpectedSolidusInTag = "unexpected-solidus-in-tag", t.unexpectedNullCharacter = "unexpected-null-character", t.unexpectedQuestionMarkInsteadOfTagName = "unexpected-question-mark-instead-of-tag-name", t.invalidFirstCharacterOfTagName = "invalid-first-character-of-tag-name", t.unexpectedEqualsSignBeforeAttributeName = "unexpected-equals-sign-before-attribute-name", t.missingEndTagName = "missing-end-tag-name", t.unexpectedCharacterInAttributeName = "unexpected-character-in-attribute-name", t.unknownNamedCharacterReference = "unknown-named-character-reference", t.missingSemicolonAfterCharacterReference = "missing-semicolon-after-character-reference", t.unexpectedCharacterAfterDoctypeSystemIdentifier = "unexpected-character-after-doctype-system-identifier", t.unexpectedCharacterInUnquotedAttributeValue = "unexpected-character-in-unquoted-attribute-value", t.eofBeforeTagName = "eof-before-tag-name", t.eofInTag = "eof-in-tag", t.missingAttributeValue = "missing-attribute-value", t.missingWhitespaceBetweenAttributes = "missing-whitespace-between-attributes", t.missingWhitespaceAfterDoctypePublicKeyword = "missing-whitespace-after-doctype-public-keyword", t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers = "missing-whitespace-between-doctype-public-and-system-identifiers", t.missingWhitespaceAfterDoctypeSystemKeyword = "missing-whitespace-after-doctype-system-keyword", t.missingQuoteBeforeDoctypePublicIdentifier = "missing-quote-before-doctype-public-identifier", t.missingQuoteBeforeDoctypeSystemIdentifier = "missing-quote-before-doctype-system-identifier", t.missingDoctypePublicIdentifier = "missing-doctype-public-identifier", t.missingDoctypeSystemIdentifier = "missing-doctype-system-identifier", t.abruptDoctypePublicIdentifier = "abrupt-doctype-public-identifier", t.abruptDoctypeSystemIdentifier = "abrupt-doctype-system-identifier", t.cdataInHtmlContent = "cdata-in-html-content", t.incorrectlyOpenedComment = "incorrectly-opened-comment", t.eofInScriptHtmlCommentLikeText = "eof-in-script-html-comment-like-text", t.eofInDoctype = "eof-in-doctype", t.nestedComment = "nested-comment", t.abruptClosingOfEmptyComment = "abrupt-closing-of-empty-comment", t.eofInComment = "eof-in-comment", t.incorrectlyClosedComment = "incorrectly-closed-comment", t.eofInCdata = "eof-in-cdata", t.absenceOfDigitsInNumericCharacterReference = "absence-of-digits-in-numeric-character-reference", t.nullCharacterReference = "null-character-reference", t.surrogateCharacterReference = "surrogate-character-reference", t.characterReferenceOutsideUnicodeRange = "character-reference-outside-unicode-range", t.controlCharacterReference = "control-character-reference", t.noncharacterCharacterReference = "noncharacter-character-reference", t.missingWhitespaceBeforeDoctypeName = "missing-whitespace-before-doctype-name", t.missingDoctypeName = "missing-doctype-name", t.invalidCharacterSequenceAfterDoctypeName = "invalid-character-sequence-after-doctype-name", t.duplicateAttribute = "duplicate-attribute", t.nonConformingDoctype = "non-conforming-doctype", t.missingDoctype = "missing-doctype", t.misplacedDoctype = "misplaced-doctype", t.endTagWithoutMatchingOpenElement = "end-tag-without-matching-open-element", t.closingOfElementWithOpenChildElements = "closing-of-element-with-open-child-elements", t.disallowedContentInNoscriptInHead = "disallowed-content-in-noscript-in-head", t.openElementsLeftAfterEof = "open-elements-left-after-eof", t.abandonedHeadElementChild = "abandoned-head-element-child", t.misplacedStartTagForHeadElement = "misplaced-start-tag-for-head-element", t.nestedNoscriptInHead = "nested-noscript-in-head", t.eofInElementThatCanContainOnlyText = "eof-in-element-that-can-contain-only-text";
  }(e12.ERR || (e12.ERR = {}));
})(uy);
function DAe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function e32(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, NAe(n.key), n);
  }
}
function RAe(e12, t, r) {
  return t && e32(e12.prototype, t), r && e32(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function NAe(e12) {
  var t = MAe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function MAe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
Object.defineProperty(eS, "__esModule", {
  value: true
});
eS.Preprocessor = void 0;
var li = tS;
var iO = uy;
var LAe = 65536;
var BAe = function() {
  function e12(t) {
    DAe(this, e12), this.handler = t, this.html = "", this.pos = -1, this.lastGapPos = -2, this.gapStack = [], this.skipNextNewLine = false, this.lastChunkWritten = false, this.endOfChunkHit = false, this.bufferWaterline = LAe, this.isEol = false, this.lineStartPos = 0, this.droppedBufferSize = 0, this.line = 1, this.lastErrOffset = -1;
  }
  return RAe(e12, [{
    key: "col",
    get: function() {
      return this.pos - this.lineStartPos + +(this.lastGapPos !== this.pos);
    }
  }, {
    key: "offset",
    get: function() {
      return this.droppedBufferSize + this.pos;
    }
  }, {
    key: "getError",
    value: function(r) {
      const {
        line: n,
        col: i,
        offset: o
      } = this;
      return {
        code: r,
        startLine: n,
        endLine: n,
        startCol: i,
        endCol: i,
        startOffset: o,
        endOffset: o
      };
    }
  }, {
    key: "_err",
    value: function(r) {
      this.handler.onParseError && this.lastErrOffset !== this.offset && (this.lastErrOffset = this.offset, this.handler.onParseError(this.getError(r)));
    }
  }, {
    key: "_addGap",
    value: function() {
      this.gapStack.push(this.lastGapPos), this.lastGapPos = this.pos;
    }
  }, {
    key: "_processSurrogate",
    value: function(r) {
      if (this.pos !== this.html.length - 1) {
        const n = this.html.charCodeAt(this.pos + 1);
        if ((0, li.isSurrogatePair)(n))
          return this.pos++, this._addGap(), (0, li.getSurrogatePairCodePoint)(r, n);
      } else if (!this.lastChunkWritten)
        return this.endOfChunkHit = true, li.CODE_POINTS.EOF;
      return this._err(iO.ERR.surrogateInInputStream), r;
    }
  }, {
    key: "willDropParsedChunk",
    value: function() {
      return this.pos > this.bufferWaterline;
    }
  }, {
    key: "dropParsedChunk",
    value: function() {
      this.willDropParsedChunk() && (this.html = this.html.substring(this.pos), this.lineStartPos -= this.pos, this.droppedBufferSize += this.pos, this.pos = 0, this.lastGapPos = -2, this.gapStack.length = 0);
    }
  }, {
    key: "write",
    value: function(r, n) {
      this.html.length > 0 ? this.html += r : this.html = r, this.endOfChunkHit = false, this.lastChunkWritten = n;
    }
  }, {
    key: "insertHtmlAtCurrentPos",
    value: function(r) {
      this.html = this.html.substring(0, this.pos + 1) + r + this.html.substring(this.pos + 1), this.endOfChunkHit = false;
    }
  }, {
    key: "startsWith",
    value: function(r, n) {
      if (this.pos + r.length > this.html.length)
        return this.endOfChunkHit = !this.lastChunkWritten, false;
      if (n)
        return this.html.startsWith(r, this.pos);
      for (let i = 0; i < r.length; i++)
        if ((this.html.charCodeAt(this.pos + i) | 32) !== r.charCodeAt(i))
          return false;
      return true;
    }
  }, {
    key: "peek",
    value: function(r) {
      const n = this.pos + r;
      if (n >= this.html.length)
        return this.endOfChunkHit = !this.lastChunkWritten, li.CODE_POINTS.EOF;
      const i = this.html.charCodeAt(n);
      return i === li.CODE_POINTS.CARRIAGE_RETURN ? li.CODE_POINTS.LINE_FEED : i;
    }
  }, {
    key: "advance",
    value: function() {
      if (this.pos++, this.isEol && (this.isEol = false, this.line++, this.lineStartPos = this.pos), this.pos >= this.html.length)
        return this.endOfChunkHit = !this.lastChunkWritten, li.CODE_POINTS.EOF;
      let r = this.html.charCodeAt(this.pos);
      return r === li.CODE_POINTS.CARRIAGE_RETURN ? (this.isEol = true, this.skipNextNewLine = true, li.CODE_POINTS.LINE_FEED) : r === li.CODE_POINTS.LINE_FEED && (this.isEol = true, this.skipNextNewLine) ? (this.line--, this.skipNextNewLine = false, this._addGap(), this.advance()) : (this.skipNextNewLine = false, (0, li.isSurrogate)(r) && (r = this._processSurrogate(r)), this.handler.onParseError === null || r > 31 && r < 127 || r === li.CODE_POINTS.LINE_FEED || r === li.CODE_POINTS.CARRIAGE_RETURN || r > 159 && r < 64976 || this._checkForProblematicCharacters(r), r);
    }
  }, {
    key: "_checkForProblematicCharacters",
    value: function(r) {
      (0, li.isControlCodePoint)(r) ? this._err(iO.ERR.controlCharacterInInputStream) : (0, li.isUndefinedCodePoint)(r) && this._err(iO.ERR.noncharacterInInputStream);
    }
  }, {
    key: "retreat",
    value: function(r) {
      for (this.pos -= r; this.pos < this.lastGapPos; )
        this.lastGapPos = this.gapStack.pop(), this.pos--;
      this.isEol = false;
    }
  }]), e12;
}();
eS.Preprocessor = BAe;
var rS = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.getTokenAttr = e12.TokenType = void 0, function(r) {
    r[r.CHARACTER = 0] = "CHARACTER", r[r.NULL_CHARACTER = 1] = "NULL_CHARACTER", r[r.WHITESPACE_CHARACTER = 2] = "WHITESPACE_CHARACTER", r[r.START_TAG = 3] = "START_TAG", r[r.END_TAG = 4] = "END_TAG", r[r.COMMENT = 5] = "COMMENT", r[r.DOCTYPE = 6] = "DOCTYPE", r[r.EOF = 7] = "EOF", r[r.HIBERNATION = 8] = "HIBERNATION";
  }(e12.TokenType || (e12.TokenType = {}));
  function t(r, n) {
    for (let i = r.attrs.length - 1; i >= 0; i--)
      if (r.attrs[i].name === n)
        return r.attrs[i].value;
    return null;
  }
  e12.getTokenAttr = t;
})(rS);
var Zs = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.hasUnescapedText = e12.isNumberedHeader = e12.SPECIAL_ELEMENTS = e12.getTagID = e12.TAG_ID = e12.TAG_NAMES = e12.DOCUMENT_MODE = e12.ATTRS = e12.NS = void 0;
  var t;
  (function(c) {
    c.HTML = "http://www.w3.org/1999/xhtml", c.MATHML = "http://www.w3.org/1998/Math/MathML", c.SVG = "http://www.w3.org/2000/svg", c.XLINK = "http://www.w3.org/1999/xlink", c.XML = "http://www.w3.org/XML/1998/namespace", c.XMLNS = "http://www.w3.org/2000/xmlns/";
  })(t = e12.NS || (e12.NS = {})), function(c) {
    c.TYPE = "type", c.ACTION = "action", c.ENCODING = "encoding", c.PROMPT = "prompt", c.NAME = "name", c.COLOR = "color", c.FACE = "face", c.SIZE = "size";
  }(e12.ATTRS || (e12.ATTRS = {})), function(c) {
    c.NO_QUIRKS = "no-quirks", c.QUIRKS = "quirks", c.LIMITED_QUIRKS = "limited-quirks";
  }(e12.DOCUMENT_MODE || (e12.DOCUMENT_MODE = {}));
  var r;
  (function(c) {
    c.A = "a", c.ADDRESS = "address", c.ANNOTATION_XML = "annotation-xml", c.APPLET = "applet", c.AREA = "area", c.ARTICLE = "article", c.ASIDE = "aside", c.B = "b", c.BASE = "base", c.BASEFONT = "basefont", c.BGSOUND = "bgsound", c.BIG = "big", c.BLOCKQUOTE = "blockquote", c.BODY = "body", c.BR = "br", c.BUTTON = "button", c.CAPTION = "caption", c.CENTER = "center", c.CODE = "code", c.COL = "col", c.COLGROUP = "colgroup", c.DD = "dd", c.DESC = "desc", c.DETAILS = "details", c.DIALOG = "dialog", c.DIR = "dir", c.DIV = "div", c.DL = "dl", c.DT = "dt", c.EM = "em", c.EMBED = "embed", c.FIELDSET = "fieldset", c.FIGCAPTION = "figcaption", c.FIGURE = "figure", c.FONT = "font", c.FOOTER = "footer", c.FOREIGN_OBJECT = "foreignObject", c.FORM = "form", c.FRAME = "frame", c.FRAMESET = "frameset", c.H1 = "h1", c.H2 = "h2", c.H3 = "h3", c.H4 = "h4", c.H5 = "h5", c.H6 = "h6", c.HEAD = "head", c.HEADER = "header", c.HGROUP = "hgroup", c.HR = "hr", c.HTML = "html", c.I = "i", c.IMG = "img", c.IMAGE = "image", c.INPUT = "input", c.IFRAME = "iframe", c.KEYGEN = "keygen", c.LABEL = "label", c.LI = "li", c.LINK = "link", c.LISTING = "listing", c.MAIN = "main", c.MALIGNMARK = "malignmark", c.MARQUEE = "marquee", c.MATH = "math", c.MENU = "menu", c.META = "meta", c.MGLYPH = "mglyph", c.MI = "mi", c.MO = "mo", c.MN = "mn", c.MS = "ms", c.MTEXT = "mtext", c.NAV = "nav", c.NOBR = "nobr", c.NOFRAMES = "noframes", c.NOEMBED = "noembed", c.NOSCRIPT = "noscript", c.OBJECT = "object", c.OL = "ol", c.OPTGROUP = "optgroup", c.OPTION = "option", c.P = "p", c.PARAM = "param", c.PLAINTEXT = "plaintext", c.PRE = "pre", c.RB = "rb", c.RP = "rp", c.RT = "rt", c.RTC = "rtc", c.RUBY = "ruby", c.S = "s", c.SCRIPT = "script", c.SECTION = "section", c.SELECT = "select", c.SOURCE = "source", c.SMALL = "small", c.SPAN = "span", c.STRIKE = "strike", c.STRONG = "strong", c.STYLE = "style", c.SUB = "sub", c.SUMMARY = "summary", c.SUP = "sup", c.TABLE = "table", c.TBODY = "tbody", c.TEMPLATE = "template", c.TEXTAREA = "textarea", c.TFOOT = "tfoot", c.TD = "td", c.TH = "th", c.THEAD = "thead", c.TITLE = "title", c.TR = "tr", c.TRACK = "track", c.TT = "tt", c.U = "u", c.UL = "ul", c.SVG = "svg", c.VAR = "var", c.WBR = "wbr", c.XMP = "xmp";
  })(r = e12.TAG_NAMES || (e12.TAG_NAMES = {}));
  var n;
  (function(c) {
    c[c.UNKNOWN = 0] = "UNKNOWN", c[c.A = 1] = "A", c[c.ADDRESS = 2] = "ADDRESS", c[c.ANNOTATION_XML = 3] = "ANNOTATION_XML", c[c.APPLET = 4] = "APPLET", c[c.AREA = 5] = "AREA", c[c.ARTICLE = 6] = "ARTICLE", c[c.ASIDE = 7] = "ASIDE", c[c.B = 8] = "B", c[c.BASE = 9] = "BASE", c[c.BASEFONT = 10] = "BASEFONT", c[c.BGSOUND = 11] = "BGSOUND", c[c.BIG = 12] = "BIG", c[c.BLOCKQUOTE = 13] = "BLOCKQUOTE", c[c.BODY = 14] = "BODY", c[c.BR = 15] = "BR", c[c.BUTTON = 16] = "BUTTON", c[c.CAPTION = 17] = "CAPTION", c[c.CENTER = 18] = "CENTER", c[c.CODE = 19] = "CODE", c[c.COL = 20] = "COL", c[c.COLGROUP = 21] = "COLGROUP", c[c.DD = 22] = "DD", c[c.DESC = 23] = "DESC", c[c.DETAILS = 24] = "DETAILS", c[c.DIALOG = 25] = "DIALOG", c[c.DIR = 26] = "DIR", c[c.DIV = 27] = "DIV", c[c.DL = 28] = "DL", c[c.DT = 29] = "DT", c[c.EM = 30] = "EM", c[c.EMBED = 31] = "EMBED", c[c.FIELDSET = 32] = "FIELDSET", c[c.FIGCAPTION = 33] = "FIGCAPTION", c[c.FIGURE = 34] = "FIGURE", c[c.FONT = 35] = "FONT", c[c.FOOTER = 36] = "FOOTER", c[c.FOREIGN_OBJECT = 37] = "FOREIGN_OBJECT", c[c.FORM = 38] = "FORM", c[c.FRAME = 39] = "FRAME", c[c.FRAMESET = 40] = "FRAMESET", c[c.H1 = 41] = "H1", c[c.H2 = 42] = "H2", c[c.H3 = 43] = "H3", c[c.H4 = 44] = "H4", c[c.H5 = 45] = "H5", c[c.H6 = 46] = "H6", c[c.HEAD = 47] = "HEAD", c[c.HEADER = 48] = "HEADER", c[c.HGROUP = 49] = "HGROUP", c[c.HR = 50] = "HR", c[c.HTML = 51] = "HTML", c[c.I = 52] = "I", c[c.IMG = 53] = "IMG", c[c.IMAGE = 54] = "IMAGE", c[c.INPUT = 55] = "INPUT", c[c.IFRAME = 56] = "IFRAME", c[c.KEYGEN = 57] = "KEYGEN", c[c.LABEL = 58] = "LABEL", c[c.LI = 59] = "LI", c[c.LINK = 60] = "LINK", c[c.LISTING = 61] = "LISTING", c[c.MAIN = 62] = "MAIN", c[c.MALIGNMARK = 63] = "MALIGNMARK", c[c.MARQUEE = 64] = "MARQUEE", c[c.MATH = 65] = "MATH", c[c.MENU = 66] = "MENU", c[c.META = 67] = "META", c[c.MGLYPH = 68] = "MGLYPH", c[c.MI = 69] = "MI", c[c.MO = 70] = "MO", c[c.MN = 71] = "MN", c[c.MS = 72] = "MS", c[c.MTEXT = 73] = "MTEXT", c[c.NAV = 74] = "NAV", c[c.NOBR = 75] = "NOBR", c[c.NOFRAMES = 76] = "NOFRAMES", c[c.NOEMBED = 77] = "NOEMBED", c[c.NOSCRIPT = 78] = "NOSCRIPT", c[c.OBJECT = 79] = "OBJECT", c[c.OL = 80] = "OL", c[c.OPTGROUP = 81] = "OPTGROUP", c[c.OPTION = 82] = "OPTION", c[c.P = 83] = "P", c[c.PARAM = 84] = "PARAM", c[c.PLAINTEXT = 85] = "PLAINTEXT", c[c.PRE = 86] = "PRE", c[c.RB = 87] = "RB", c[c.RP = 88] = "RP", c[c.RT = 89] = "RT", c[c.RTC = 90] = "RTC", c[c.RUBY = 91] = "RUBY", c[c.S = 92] = "S", c[c.SCRIPT = 93] = "SCRIPT", c[c.SECTION = 94] = "SECTION", c[c.SELECT = 95] = "SELECT", c[c.SOURCE = 96] = "SOURCE", c[c.SMALL = 97] = "SMALL", c[c.SPAN = 98] = "SPAN", c[c.STRIKE = 99] = "STRIKE", c[c.STRONG = 100] = "STRONG", c[c.STYLE = 101] = "STYLE", c[c.SUB = 102] = "SUB", c[c.SUMMARY = 103] = "SUMMARY", c[c.SUP = 104] = "SUP", c[c.TABLE = 105] = "TABLE", c[c.TBODY = 106] = "TBODY", c[c.TEMPLATE = 107] = "TEMPLATE", c[c.TEXTAREA = 108] = "TEXTAREA", c[c.TFOOT = 109] = "TFOOT", c[c.TD = 110] = "TD", c[c.TH = 111] = "TH", c[c.THEAD = 112] = "THEAD", c[c.TITLE = 113] = "TITLE", c[c.TR = 114] = "TR", c[c.TRACK = 115] = "TRACK", c[c.TT = 116] = "TT", c[c.U = 117] = "U", c[c.UL = 118] = "UL", c[c.SVG = 119] = "SVG", c[c.VAR = 120] = "VAR", c[c.WBR = 121] = "WBR", c[c.XMP = 122] = "XMP";
  })(n = e12.TAG_ID || (e12.TAG_ID = {}));
  const i = /* @__PURE__ */ new Map([[r.A, n.A], [r.ADDRESS, n.ADDRESS], [r.ANNOTATION_XML, n.ANNOTATION_XML], [r.APPLET, n.APPLET], [r.AREA, n.AREA], [r.ARTICLE, n.ARTICLE], [r.ASIDE, n.ASIDE], [r.B, n.B], [r.BASE, n.BASE], [r.BASEFONT, n.BASEFONT], [r.BGSOUND, n.BGSOUND], [r.BIG, n.BIG], [r.BLOCKQUOTE, n.BLOCKQUOTE], [r.BODY, n.BODY], [r.BR, n.BR], [r.BUTTON, n.BUTTON], [r.CAPTION, n.CAPTION], [r.CENTER, n.CENTER], [r.CODE, n.CODE], [r.COL, n.COL], [r.COLGROUP, n.COLGROUP], [r.DD, n.DD], [r.DESC, n.DESC], [r.DETAILS, n.DETAILS], [r.DIALOG, n.DIALOG], [r.DIR, n.DIR], [r.DIV, n.DIV], [r.DL, n.DL], [r.DT, n.DT], [r.EM, n.EM], [r.EMBED, n.EMBED], [r.FIELDSET, n.FIELDSET], [r.FIGCAPTION, n.FIGCAPTION], [r.FIGURE, n.FIGURE], [r.FONT, n.FONT], [r.FOOTER, n.FOOTER], [r.FOREIGN_OBJECT, n.FOREIGN_OBJECT], [r.FORM, n.FORM], [r.FRAME, n.FRAME], [r.FRAMESET, n.FRAMESET], [r.H1, n.H1], [r.H2, n.H2], [r.H3, n.H3], [r.H4, n.H4], [r.H5, n.H5], [r.H6, n.H6], [r.HEAD, n.HEAD], [r.HEADER, n.HEADER], [r.HGROUP, n.HGROUP], [r.HR, n.HR], [r.HTML, n.HTML], [r.I, n.I], [r.IMG, n.IMG], [r.IMAGE, n.IMAGE], [r.INPUT, n.INPUT], [r.IFRAME, n.IFRAME], [r.KEYGEN, n.KEYGEN], [r.LABEL, n.LABEL], [r.LI, n.LI], [r.LINK, n.LINK], [r.LISTING, n.LISTING], [r.MAIN, n.MAIN], [r.MALIGNMARK, n.MALIGNMARK], [r.MARQUEE, n.MARQUEE], [r.MATH, n.MATH], [r.MENU, n.MENU], [r.META, n.META], [r.MGLYPH, n.MGLYPH], [r.MI, n.MI], [r.MO, n.MO], [r.MN, n.MN], [r.MS, n.MS], [r.MTEXT, n.MTEXT], [r.NAV, n.NAV], [r.NOBR, n.NOBR], [r.NOFRAMES, n.NOFRAMES], [r.NOEMBED, n.NOEMBED], [r.NOSCRIPT, n.NOSCRIPT], [r.OBJECT, n.OBJECT], [r.OL, n.OL], [r.OPTGROUP, n.OPTGROUP], [r.OPTION, n.OPTION], [r.P, n.P], [r.PARAM, n.PARAM], [r.PLAINTEXT, n.PLAINTEXT], [r.PRE, n.PRE], [r.RB, n.RB], [r.RP, n.RP], [r.RT, n.RT], [r.RTC, n.RTC], [r.RUBY, n.RUBY], [r.S, n.S], [r.SCRIPT, n.SCRIPT], [r.SECTION, n.SECTION], [r.SELECT, n.SELECT], [r.SOURCE, n.SOURCE], [r.SMALL, n.SMALL], [r.SPAN, n.SPAN], [r.STRIKE, n.STRIKE], [r.STRONG, n.STRONG], [r.STYLE, n.STYLE], [r.SUB, n.SUB], [r.SUMMARY, n.SUMMARY], [r.SUP, n.SUP], [r.TABLE, n.TABLE], [r.TBODY, n.TBODY], [r.TEMPLATE, n.TEMPLATE], [r.TEXTAREA, n.TEXTAREA], [r.TFOOT, n.TFOOT], [r.TD, n.TD], [r.TH, n.TH], [r.THEAD, n.THEAD], [r.TITLE, n.TITLE], [r.TR, n.TR], [r.TRACK, n.TRACK], [r.TT, n.TT], [r.U, n.U], [r.UL, n.UL], [r.SVG, n.SVG], [r.VAR, n.VAR], [r.WBR, n.WBR], [r.XMP, n.XMP]]);
  function o(c) {
    var f;
    return (f = i.get(c)) !== null && f !== void 0 ? f : n.UNKNOWN;
  }
  e12.getTagID = o;
  const a = n;
  e12.SPECIAL_ELEMENTS = {
    [t.HTML]: /* @__PURE__ */ new Set([a.ADDRESS, a.APPLET, a.AREA, a.ARTICLE, a.ASIDE, a.BASE, a.BASEFONT, a.BGSOUND, a.BLOCKQUOTE, a.BODY, a.BR, a.BUTTON, a.CAPTION, a.CENTER, a.COL, a.COLGROUP, a.DD, a.DETAILS, a.DIR, a.DIV, a.DL, a.DT, a.EMBED, a.FIELDSET, a.FIGCAPTION, a.FIGURE, a.FOOTER, a.FORM, a.FRAME, a.FRAMESET, a.H1, a.H2, a.H3, a.H4, a.H5, a.H6, a.HEAD, a.HEADER, a.HGROUP, a.HR, a.HTML, a.IFRAME, a.IMG, a.INPUT, a.LI, a.LINK, a.LISTING, a.MAIN, a.MARQUEE, a.MENU, a.META, a.NAV, a.NOEMBED, a.NOFRAMES, a.NOSCRIPT, a.OBJECT, a.OL, a.P, a.PARAM, a.PLAINTEXT, a.PRE, a.SCRIPT, a.SECTION, a.SELECT, a.SOURCE, a.STYLE, a.SUMMARY, a.TABLE, a.TBODY, a.TD, a.TEMPLATE, a.TEXTAREA, a.TFOOT, a.TH, a.THEAD, a.TITLE, a.TR, a.TRACK, a.UL, a.WBR, a.XMP]),
    [t.MATHML]: /* @__PURE__ */ new Set([a.MI, a.MO, a.MN, a.MS, a.MTEXT, a.ANNOTATION_XML]),
    [t.SVG]: /* @__PURE__ */ new Set([a.TITLE, a.FOREIGN_OBJECT, a.DESC]),
    [t.XLINK]: /* @__PURE__ */ new Set(),
    [t.XML]: /* @__PURE__ */ new Set(),
    [t.XMLNS]: /* @__PURE__ */ new Set()
  };
  function s(c) {
    return c === a.H1 || c === a.H2 || c === a.H3 || c === a.H4 || c === a.H5 || c === a.H6;
  }
  e12.isNumberedHeader = s;
  const l = /* @__PURE__ */ new Set([r.STYLE, r.SCRIPT, r.XMP, r.IFRAME, r.NOEMBED, r.NOFRAMES, r.PLAINTEXT]);
  function u(c, f) {
    return l.has(c) || f && c === r.NOSCRIPT;
  }
  e12.hasUnescapedText = u;
})(Zs);
function FAe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function t3(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, HAe(n.key), n);
  }
}
function $Ae(e12, t, r) {
  return t && t3(e12.prototype, t), r && t3(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function HAe(e12) {
  var t = UAe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function UAe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
Object.defineProperty(wu, "__esModule", {
  value: true
});
wu.Tokenizer = wu.TokenizerMode = void 0;
var jAe = eS;
var X = tS;
var Ci = rS;
var pa = bu;
var Be = uy;
var oO = Zs;
var GAe = /* @__PURE__ */ new Map([[128, 8364], [130, 8218], [131, 402], [132, 8222], [133, 8230], [134, 8224], [135, 8225], [136, 710], [137, 8240], [138, 352], [139, 8249], [140, 338], [142, 381], [145, 8216], [146, 8217], [147, 8220], [148, 8221], [149, 8226], [150, 8211], [151, 8212], [152, 732], [153, 8482], [154, 353], [155, 8250], [156, 339], [158, 382], [159, 376]]);
var re;
(function(e12) {
  e12[e12.DATA = 0] = "DATA", e12[e12.RCDATA = 1] = "RCDATA", e12[e12.RAWTEXT = 2] = "RAWTEXT", e12[e12.SCRIPT_DATA = 3] = "SCRIPT_DATA", e12[e12.PLAINTEXT = 4] = "PLAINTEXT", e12[e12.TAG_OPEN = 5] = "TAG_OPEN", e12[e12.END_TAG_OPEN = 6] = "END_TAG_OPEN", e12[e12.TAG_NAME = 7] = "TAG_NAME", e12[e12.RCDATA_LESS_THAN_SIGN = 8] = "RCDATA_LESS_THAN_SIGN", e12[e12.RCDATA_END_TAG_OPEN = 9] = "RCDATA_END_TAG_OPEN", e12[e12.RCDATA_END_TAG_NAME = 10] = "RCDATA_END_TAG_NAME", e12[e12.RAWTEXT_LESS_THAN_SIGN = 11] = "RAWTEXT_LESS_THAN_SIGN", e12[e12.RAWTEXT_END_TAG_OPEN = 12] = "RAWTEXT_END_TAG_OPEN", e12[e12.RAWTEXT_END_TAG_NAME = 13] = "RAWTEXT_END_TAG_NAME", e12[e12.SCRIPT_DATA_LESS_THAN_SIGN = 14] = "SCRIPT_DATA_LESS_THAN_SIGN", e12[e12.SCRIPT_DATA_END_TAG_OPEN = 15] = "SCRIPT_DATA_END_TAG_OPEN", e12[e12.SCRIPT_DATA_END_TAG_NAME = 16] = "SCRIPT_DATA_END_TAG_NAME", e12[e12.SCRIPT_DATA_ESCAPE_START = 17] = "SCRIPT_DATA_ESCAPE_START", e12[e12.SCRIPT_DATA_ESCAPE_START_DASH = 18] = "SCRIPT_DATA_ESCAPE_START_DASH", e12[e12.SCRIPT_DATA_ESCAPED = 19] = "SCRIPT_DATA_ESCAPED", e12[e12.SCRIPT_DATA_ESCAPED_DASH = 20] = "SCRIPT_DATA_ESCAPED_DASH", e12[e12.SCRIPT_DATA_ESCAPED_DASH_DASH = 21] = "SCRIPT_DATA_ESCAPED_DASH_DASH", e12[e12.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN = 22] = "SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN", e12[e12.SCRIPT_DATA_ESCAPED_END_TAG_OPEN = 23] = "SCRIPT_DATA_ESCAPED_END_TAG_OPEN", e12[e12.SCRIPT_DATA_ESCAPED_END_TAG_NAME = 24] = "SCRIPT_DATA_ESCAPED_END_TAG_NAME", e12[e12.SCRIPT_DATA_DOUBLE_ESCAPE_START = 25] = "SCRIPT_DATA_DOUBLE_ESCAPE_START", e12[e12.SCRIPT_DATA_DOUBLE_ESCAPED = 26] = "SCRIPT_DATA_DOUBLE_ESCAPED", e12[e12.SCRIPT_DATA_DOUBLE_ESCAPED_DASH = 27] = "SCRIPT_DATA_DOUBLE_ESCAPED_DASH", e12[e12.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH = 28] = "SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH", e12[e12.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN = 29] = "SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN", e12[e12.SCRIPT_DATA_DOUBLE_ESCAPE_END = 30] = "SCRIPT_DATA_DOUBLE_ESCAPE_END", e12[e12.BEFORE_ATTRIBUTE_NAME = 31] = "BEFORE_ATTRIBUTE_NAME", e12[e12.ATTRIBUTE_NAME = 32] = "ATTRIBUTE_NAME", e12[e12.AFTER_ATTRIBUTE_NAME = 33] = "AFTER_ATTRIBUTE_NAME", e12[e12.BEFORE_ATTRIBUTE_VALUE = 34] = "BEFORE_ATTRIBUTE_VALUE", e12[e12.ATTRIBUTE_VALUE_DOUBLE_QUOTED = 35] = "ATTRIBUTE_VALUE_DOUBLE_QUOTED", e12[e12.ATTRIBUTE_VALUE_SINGLE_QUOTED = 36] = "ATTRIBUTE_VALUE_SINGLE_QUOTED", e12[e12.ATTRIBUTE_VALUE_UNQUOTED = 37] = "ATTRIBUTE_VALUE_UNQUOTED", e12[e12.AFTER_ATTRIBUTE_VALUE_QUOTED = 38] = "AFTER_ATTRIBUTE_VALUE_QUOTED", e12[e12.SELF_CLOSING_START_TAG = 39] = "SELF_CLOSING_START_TAG", e12[e12.BOGUS_COMMENT = 40] = "BOGUS_COMMENT", e12[e12.MARKUP_DECLARATION_OPEN = 41] = "MARKUP_DECLARATION_OPEN", e12[e12.COMMENT_START = 42] = "COMMENT_START", e12[e12.COMMENT_START_DASH = 43] = "COMMENT_START_DASH", e12[e12.COMMENT = 44] = "COMMENT", e12[e12.COMMENT_LESS_THAN_SIGN = 45] = "COMMENT_LESS_THAN_SIGN", e12[e12.COMMENT_LESS_THAN_SIGN_BANG = 46] = "COMMENT_LESS_THAN_SIGN_BANG", e12[e12.COMMENT_LESS_THAN_SIGN_BANG_DASH = 47] = "COMMENT_LESS_THAN_SIGN_BANG_DASH", e12[e12.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH = 48] = "COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH", e12[e12.COMMENT_END_DASH = 49] = "COMMENT_END_DASH", e12[e12.COMMENT_END = 50] = "COMMENT_END", e12[e12.COMMENT_END_BANG = 51] = "COMMENT_END_BANG", e12[e12.DOCTYPE = 52] = "DOCTYPE", e12[e12.BEFORE_DOCTYPE_NAME = 53] = "BEFORE_DOCTYPE_NAME", e12[e12.DOCTYPE_NAME = 54] = "DOCTYPE_NAME", e12[e12.AFTER_DOCTYPE_NAME = 55] = "AFTER_DOCTYPE_NAME", e12[e12.AFTER_DOCTYPE_PUBLIC_KEYWORD = 56] = "AFTER_DOCTYPE_PUBLIC_KEYWORD", e12[e12.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER = 57] = "BEFORE_DOCTYPE_PUBLIC_IDENTIFIER", e12[e12.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED = 58] = "DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED", e12[e12.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED = 59] = "DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED", e12[e12.AFTER_DOCTYPE_PUBLIC_IDENTIFIER = 60] = "AFTER_DOCTYPE_PUBLIC_IDENTIFIER", e12[e12.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS = 61] = "BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS", e12[e12.AFTER_DOCTYPE_SYSTEM_KEYWORD = 62] = "AFTER_DOCTYPE_SYSTEM_KEYWORD", e12[e12.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER = 63] = "BEFORE_DOCTYPE_SYSTEM_IDENTIFIER", e12[e12.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED = 64] = "DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED", e12[e12.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED = 65] = "DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED", e12[e12.AFTER_DOCTYPE_SYSTEM_IDENTIFIER = 66] = "AFTER_DOCTYPE_SYSTEM_IDENTIFIER", e12[e12.BOGUS_DOCTYPE = 67] = "BOGUS_DOCTYPE", e12[e12.CDATA_SECTION = 68] = "CDATA_SECTION", e12[e12.CDATA_SECTION_BRACKET = 69] = "CDATA_SECTION_BRACKET", e12[e12.CDATA_SECTION_END = 70] = "CDATA_SECTION_END", e12[e12.CHARACTER_REFERENCE = 71] = "CHARACTER_REFERENCE", e12[e12.NAMED_CHARACTER_REFERENCE = 72] = "NAMED_CHARACTER_REFERENCE", e12[e12.AMBIGUOUS_AMPERSAND = 73] = "AMBIGUOUS_AMPERSAND", e12[e12.NUMERIC_CHARACTER_REFERENCE = 74] = "NUMERIC_CHARACTER_REFERENCE", e12[e12.HEXADEMICAL_CHARACTER_REFERENCE_START = 75] = "HEXADEMICAL_CHARACTER_REFERENCE_START", e12[e12.HEXADEMICAL_CHARACTER_REFERENCE = 76] = "HEXADEMICAL_CHARACTER_REFERENCE", e12[e12.DECIMAL_CHARACTER_REFERENCE = 77] = "DECIMAL_CHARACTER_REFERENCE", e12[e12.NUMERIC_CHARACTER_REFERENCE_END = 78] = "NUMERIC_CHARACTER_REFERENCE_END";
})(re || (re = {}));
wu.TokenizerMode = {
  DATA: re.DATA,
  RCDATA: re.RCDATA,
  RAWTEXT: re.RAWTEXT,
  SCRIPT_DATA: re.SCRIPT_DATA,
  PLAINTEXT: re.PLAINTEXT,
  CDATA_SECTION: re.CDATA_SECTION
};
function hg(e12) {
  return e12 >= X.CODE_POINTS.DIGIT_0 && e12 <= X.CODE_POINTS.DIGIT_9;
}
function Pm(e12) {
  return e12 >= X.CODE_POINTS.LATIN_CAPITAL_A && e12 <= X.CODE_POINTS.LATIN_CAPITAL_Z;
}
function zAe(e12) {
  return e12 >= X.CODE_POINTS.LATIN_SMALL_A && e12 <= X.CODE_POINTS.LATIN_SMALL_Z;
}
function pl(e12) {
  return zAe(e12) || Pm(e12);
}
function nC(e12) {
  return pl(e12) || hg(e12);
}
function cY(e12) {
  return e12 >= X.CODE_POINTS.LATIN_CAPITAL_A && e12 <= X.CODE_POINTS.LATIN_CAPITAL_F;
}
function uY(e12) {
  return e12 >= X.CODE_POINTS.LATIN_SMALL_A && e12 <= X.CODE_POINTS.LATIN_SMALL_F;
}
function VAe(e12) {
  return hg(e12) || cY(e12) || uY(e12);
}
function y_(e12) {
  return e12 + 32;
}
function hY(e12) {
  return e12 === X.CODE_POINTS.SPACE || e12 === X.CODE_POINTS.LINE_FEED || e12 === X.CODE_POINTS.TABULATION || e12 === X.CODE_POINTS.FORM_FEED;
}
function XAe(e12) {
  return e12 === X.CODE_POINTS.EQUALS_SIGN || nC(e12);
}
function r3(e12) {
  return hY(e12) || e12 === X.CODE_POINTS.SOLIDUS || e12 === X.CODE_POINTS.GREATER_THAN_SIGN;
}
var WAe = function() {
  function e12(t, r) {
    FAe(this, e12), this.options = t, this.handler = r, this.paused = false, this.inLoop = false, this.inForeignNode = false, this.lastStartTagName = "", this.active = false, this.state = re.DATA, this.returnState = re.DATA, this.charRefCode = -1, this.consumedAfterSnapshot = -1, this.currentCharacterToken = null, this.currentToken = null, this.currentAttr = {
      name: "",
      value: ""
    }, this.preprocessor = new jAe.Preprocessor(r), this.currentLocation = this.getCurrentLocation(-1);
  }
  return $Ae(e12, [{
    key: "_err",
    value: function(r) {
      var n, i;
      (i = (n = this.handler).onParseError) === null || i === void 0 || i.call(n, this.preprocessor.getError(r));
    }
    // NOTE: `offset` may never run across line boundaries.
  }, {
    key: "getCurrentLocation",
    value: function(r) {
      return this.options.sourceCodeLocationInfo ? {
        startLine: this.preprocessor.line,
        startCol: this.preprocessor.col - r,
        startOffset: this.preprocessor.offset - r,
        endLine: -1,
        endCol: -1,
        endOffset: -1
      } : null;
    }
  }, {
    key: "_runParsingLoop",
    value: function() {
      if (!this.inLoop) {
        for (this.inLoop = true; this.active && !this.paused; ) {
          this.consumedAfterSnapshot = 0;
          const r = this._consume();
          this._ensureHibernation() || this._callState(r);
        }
        this.inLoop = false;
      }
    }
    //API
  }, {
    key: "pause",
    value: function() {
      this.paused = true;
    }
  }, {
    key: "resume",
    value: function(r) {
      if (!this.paused)
        throw new Error("Parser was already resumed");
      this.paused = false, !this.inLoop && (this._runParsingLoop(), this.paused || (r == null ? void 0 : r()));
    }
  }, {
    key: "write",
    value: function(r, n, i) {
      this.active = true, this.preprocessor.write(r, n), this._runParsingLoop(), this.paused || (i == null ? void 0 : i());
    }
  }, {
    key: "insertHtmlAtCurrentPos",
    value: function(r) {
      this.active = true, this.preprocessor.insertHtmlAtCurrentPos(r), this._runParsingLoop();
    }
    //Hibernation
  }, {
    key: "_ensureHibernation",
    value: function() {
      return this.preprocessor.endOfChunkHit ? (this._unconsume(this.consumedAfterSnapshot), this.active = false, true) : false;
    }
    //Consumption
  }, {
    key: "_consume",
    value: function() {
      return this.consumedAfterSnapshot++, this.preprocessor.advance();
    }
  }, {
    key: "_unconsume",
    value: function(r) {
      this.consumedAfterSnapshot -= r, this.preprocessor.retreat(r);
    }
  }, {
    key: "_reconsumeInState",
    value: function(r, n) {
      this.state = r, this._callState(n);
    }
  }, {
    key: "_advanceBy",
    value: function(r) {
      this.consumedAfterSnapshot += r;
      for (let n = 0; n < r; n++)
        this.preprocessor.advance();
    }
  }, {
    key: "_consumeSequenceIfMatch",
    value: function(r, n) {
      return this.preprocessor.startsWith(r, n) ? (this._advanceBy(r.length - 1), true) : false;
    }
    //Token creation
  }, {
    key: "_createStartTagToken",
    value: function() {
      this.currentToken = {
        type: Ci.TokenType.START_TAG,
        tagName: "",
        tagID: oO.TAG_ID.UNKNOWN,
        selfClosing: false,
        ackSelfClosing: false,
        attrs: [],
        location: this.getCurrentLocation(1)
      };
    }
  }, {
    key: "_createEndTagToken",
    value: function() {
      this.currentToken = {
        type: Ci.TokenType.END_TAG,
        tagName: "",
        tagID: oO.TAG_ID.UNKNOWN,
        selfClosing: false,
        ackSelfClosing: false,
        attrs: [],
        location: this.getCurrentLocation(2)
      };
    }
  }, {
    key: "_createCommentToken",
    value: function(r) {
      this.currentToken = {
        type: Ci.TokenType.COMMENT,
        data: "",
        location: this.getCurrentLocation(r)
      };
    }
  }, {
    key: "_createDoctypeToken",
    value: function(r) {
      this.currentToken = {
        type: Ci.TokenType.DOCTYPE,
        name: r,
        forceQuirks: false,
        publicId: null,
        systemId: null,
        location: this.currentLocation
      };
    }
  }, {
    key: "_createCharacterToken",
    value: function(r, n) {
      this.currentCharacterToken = {
        type: r,
        chars: n,
        location: this.currentLocation
      };
    }
    //Tag attributes
  }, {
    key: "_createAttr",
    value: function(r) {
      this.currentAttr = {
        name: r,
        value: ""
      }, this.currentLocation = this.getCurrentLocation(0);
    }
  }, {
    key: "_leaveAttrName",
    value: function() {
      var r, n;
      const i = this.currentToken;
      if ((0, Ci.getTokenAttr)(i, this.currentAttr.name) === null) {
        if (i.attrs.push(this.currentAttr), i.location && this.currentLocation) {
          const o = (r = (n = i.location).attrs) !== null && r !== void 0 ? r : n.attrs = /* @__PURE__ */ Object.create(null);
          o[this.currentAttr.name] = this.currentLocation, this._leaveAttrValue();
        }
      } else
        this._err(Be.ERR.duplicateAttribute);
    }
  }, {
    key: "_leaveAttrValue",
    value: function() {
      this.currentLocation && (this.currentLocation.endLine = this.preprocessor.line, this.currentLocation.endCol = this.preprocessor.col, this.currentLocation.endOffset = this.preprocessor.offset);
    }
    //Token emission
  }, {
    key: "prepareToken",
    value: function(r) {
      this._emitCurrentCharacterToken(r.location), this.currentToken = null, r.location && (r.location.endLine = this.preprocessor.line, r.location.endCol = this.preprocessor.col + 1, r.location.endOffset = this.preprocessor.offset + 1), this.currentLocation = this.getCurrentLocation(-1);
    }
  }, {
    key: "emitCurrentTagToken",
    value: function() {
      const r = this.currentToken;
      this.prepareToken(r), r.tagID = (0, oO.getTagID)(r.tagName), r.type === Ci.TokenType.START_TAG ? (this.lastStartTagName = r.tagName, this.handler.onStartTag(r)) : (r.attrs.length > 0 && this._err(Be.ERR.endTagWithAttributes), r.selfClosing && this._err(Be.ERR.endTagWithTrailingSolidus), this.handler.onEndTag(r)), this.preprocessor.dropParsedChunk();
    }
  }, {
    key: "emitCurrentComment",
    value: function(r) {
      this.prepareToken(r), this.handler.onComment(r), this.preprocessor.dropParsedChunk();
    }
  }, {
    key: "emitCurrentDoctype",
    value: function(r) {
      this.prepareToken(r), this.handler.onDoctype(r), this.preprocessor.dropParsedChunk();
    }
  }, {
    key: "_emitCurrentCharacterToken",
    value: function(r) {
      if (this.currentCharacterToken) {
        switch (r && this.currentCharacterToken.location && (this.currentCharacterToken.location.endLine = r.startLine, this.currentCharacterToken.location.endCol = r.startCol, this.currentCharacterToken.location.endOffset = r.startOffset), this.currentCharacterToken.type) {
          case Ci.TokenType.CHARACTER: {
            this.handler.onCharacter(this.currentCharacterToken);
            break;
          }
          case Ci.TokenType.NULL_CHARACTER: {
            this.handler.onNullCharacter(this.currentCharacterToken);
            break;
          }
          case Ci.TokenType.WHITESPACE_CHARACTER: {
            this.handler.onWhitespaceCharacter(this.currentCharacterToken);
            break;
          }
        }
        this.currentCharacterToken = null;
      }
    }
  }, {
    key: "_emitEOFToken",
    value: function() {
      const r = this.getCurrentLocation(0);
      r && (r.endLine = r.startLine, r.endCol = r.startCol, r.endOffset = r.startOffset), this._emitCurrentCharacterToken(r), this.handler.onEof({
        type: Ci.TokenType.EOF,
        location: r
      }), this.active = false;
    }
    //Characters emission
    //OPTIMIZATION: specification uses only one type of character tokens (one token per character).
    //This causes a huge memory overhead and a lot of unnecessary parser loops. parse5 uses 3 groups of characters.
    //If we have a sequence of characters that belong to the same group, the parser can process it
    //as a single solid character token.
    //So, there are 3 types of character tokens in parse5:
    //1)TokenType.NULL_CHARACTER - \u0000-character sequences (e.g. '\u0000\u0000\u0000')
    //2)TokenType.WHITESPACE_CHARACTER - any whitespace/new-line character sequences (e.g. '\n  \r\t   \f')
    //3)TokenType.CHARACTER - any character sequence which don't belong to groups 1 and 2 (e.g. 'abcdef1234@@#$%^')
  }, {
    key: "_appendCharToCurrentCharacterToken",
    value: function(r, n) {
      if (this.currentCharacterToken)
        if (this.currentCharacterToken.type !== r)
          this.currentLocation = this.getCurrentLocation(0), this._emitCurrentCharacterToken(this.currentLocation), this.preprocessor.dropParsedChunk();
        else {
          this.currentCharacterToken.chars += n;
          return;
        }
      this._createCharacterToken(r, n);
    }
  }, {
    key: "_emitCodePoint",
    value: function(r) {
      const n = hY(r) ? Ci.TokenType.WHITESPACE_CHARACTER : r === X.CODE_POINTS.NULL ? Ci.TokenType.NULL_CHARACTER : Ci.TokenType.CHARACTER;
      this._appendCharToCurrentCharacterToken(n, String.fromCodePoint(r));
    }
    //NOTE: used when we emit characters explicitly.
    //This is always for non-whitespace and non-null characters, which allows us to avoid additional checks.
  }, {
    key: "_emitChars",
    value: function(r) {
      this._appendCharToCurrentCharacterToken(Ci.TokenType.CHARACTER, r);
    }
    // Character reference helpers
  }, {
    key: "_matchNamedCharacterReference",
    value: function(r) {
      let n = null, i = 0, o = false;
      for (let a = 0, s = pa.htmlDecodeTree[0]; a >= 0 && (a = (0, pa.determineBranch)(pa.htmlDecodeTree, s, a + 1, r), !(a < 0)); r = this._consume()) {
        i += 1, s = pa.htmlDecodeTree[a];
        const l = s & pa.BinTrieFlags.VALUE_LENGTH;
        if (l) {
          const u = (l >> 14) - 1;
          if (r !== X.CODE_POINTS.SEMICOLON && this._isCharacterReferenceInAttribute() && XAe(this.preprocessor.peek(1)) ? (n = [X.CODE_POINTS.AMPERSAND], a += u) : (n = u === 0 ? [pa.htmlDecodeTree[a] & ~pa.BinTrieFlags.VALUE_LENGTH] : u === 1 ? [pa.htmlDecodeTree[++a]] : [pa.htmlDecodeTree[++a], pa.htmlDecodeTree[++a]], i = 0, o = r !== X.CODE_POINTS.SEMICOLON), u === 0) {
            this._consume();
            break;
          }
        }
      }
      return this._unconsume(i), o && !this.preprocessor.endOfChunkHit && this._err(Be.ERR.missingSemicolonAfterCharacterReference), this._unconsume(1), n;
    }
  }, {
    key: "_isCharacterReferenceInAttribute",
    value: function() {
      return this.returnState === re.ATTRIBUTE_VALUE_DOUBLE_QUOTED || this.returnState === re.ATTRIBUTE_VALUE_SINGLE_QUOTED || this.returnState === re.ATTRIBUTE_VALUE_UNQUOTED;
    }
  }, {
    key: "_flushCodePointConsumedAsCharacterReference",
    value: function(r) {
      this._isCharacterReferenceInAttribute() ? this.currentAttr.value += String.fromCodePoint(r) : this._emitCodePoint(r);
    }
    // Calling states this way turns out to be much faster than any other approach.
  }, {
    key: "_callState",
    value: function(r) {
      switch (this.state) {
        case re.DATA: {
          this._stateData(r);
          break;
        }
        case re.RCDATA: {
          this._stateRcdata(r);
          break;
        }
        case re.RAWTEXT: {
          this._stateRawtext(r);
          break;
        }
        case re.SCRIPT_DATA: {
          this._stateScriptData(r);
          break;
        }
        case re.PLAINTEXT: {
          this._statePlaintext(r);
          break;
        }
        case re.TAG_OPEN: {
          this._stateTagOpen(r);
          break;
        }
        case re.END_TAG_OPEN: {
          this._stateEndTagOpen(r);
          break;
        }
        case re.TAG_NAME: {
          this._stateTagName(r);
          break;
        }
        case re.RCDATA_LESS_THAN_SIGN: {
          this._stateRcdataLessThanSign(r);
          break;
        }
        case re.RCDATA_END_TAG_OPEN: {
          this._stateRcdataEndTagOpen(r);
          break;
        }
        case re.RCDATA_END_TAG_NAME: {
          this._stateRcdataEndTagName(r);
          break;
        }
        case re.RAWTEXT_LESS_THAN_SIGN: {
          this._stateRawtextLessThanSign(r);
          break;
        }
        case re.RAWTEXT_END_TAG_OPEN: {
          this._stateRawtextEndTagOpen(r);
          break;
        }
        case re.RAWTEXT_END_TAG_NAME: {
          this._stateRawtextEndTagName(r);
          break;
        }
        case re.SCRIPT_DATA_LESS_THAN_SIGN: {
          this._stateScriptDataLessThanSign(r);
          break;
        }
        case re.SCRIPT_DATA_END_TAG_OPEN: {
          this._stateScriptDataEndTagOpen(r);
          break;
        }
        case re.SCRIPT_DATA_END_TAG_NAME: {
          this._stateScriptDataEndTagName(r);
          break;
        }
        case re.SCRIPT_DATA_ESCAPE_START: {
          this._stateScriptDataEscapeStart(r);
          break;
        }
        case re.SCRIPT_DATA_ESCAPE_START_DASH: {
          this._stateScriptDataEscapeStartDash(r);
          break;
        }
        case re.SCRIPT_DATA_ESCAPED: {
          this._stateScriptDataEscaped(r);
          break;
        }
        case re.SCRIPT_DATA_ESCAPED_DASH: {
          this._stateScriptDataEscapedDash(r);
          break;
        }
        case re.SCRIPT_DATA_ESCAPED_DASH_DASH: {
          this._stateScriptDataEscapedDashDash(r);
          break;
        }
        case re.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN: {
          this._stateScriptDataEscapedLessThanSign(r);
          break;
        }
        case re.SCRIPT_DATA_ESCAPED_END_TAG_OPEN: {
          this._stateScriptDataEscapedEndTagOpen(r);
          break;
        }
        case re.SCRIPT_DATA_ESCAPED_END_TAG_NAME: {
          this._stateScriptDataEscapedEndTagName(r);
          break;
        }
        case re.SCRIPT_DATA_DOUBLE_ESCAPE_START: {
          this._stateScriptDataDoubleEscapeStart(r);
          break;
        }
        case re.SCRIPT_DATA_DOUBLE_ESCAPED: {
          this._stateScriptDataDoubleEscaped(r);
          break;
        }
        case re.SCRIPT_DATA_DOUBLE_ESCAPED_DASH: {
          this._stateScriptDataDoubleEscapedDash(r);
          break;
        }
        case re.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH: {
          this._stateScriptDataDoubleEscapedDashDash(r);
          break;
        }
        case re.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN: {
          this._stateScriptDataDoubleEscapedLessThanSign(r);
          break;
        }
        case re.SCRIPT_DATA_DOUBLE_ESCAPE_END: {
          this._stateScriptDataDoubleEscapeEnd(r);
          break;
        }
        case re.BEFORE_ATTRIBUTE_NAME: {
          this._stateBeforeAttributeName(r);
          break;
        }
        case re.ATTRIBUTE_NAME: {
          this._stateAttributeName(r);
          break;
        }
        case re.AFTER_ATTRIBUTE_NAME: {
          this._stateAfterAttributeName(r);
          break;
        }
        case re.BEFORE_ATTRIBUTE_VALUE: {
          this._stateBeforeAttributeValue(r);
          break;
        }
        case re.ATTRIBUTE_VALUE_DOUBLE_QUOTED: {
          this._stateAttributeValueDoubleQuoted(r);
          break;
        }
        case re.ATTRIBUTE_VALUE_SINGLE_QUOTED: {
          this._stateAttributeValueSingleQuoted(r);
          break;
        }
        case re.ATTRIBUTE_VALUE_UNQUOTED: {
          this._stateAttributeValueUnquoted(r);
          break;
        }
        case re.AFTER_ATTRIBUTE_VALUE_QUOTED: {
          this._stateAfterAttributeValueQuoted(r);
          break;
        }
        case re.SELF_CLOSING_START_TAG: {
          this._stateSelfClosingStartTag(r);
          break;
        }
        case re.BOGUS_COMMENT: {
          this._stateBogusComment(r);
          break;
        }
        case re.MARKUP_DECLARATION_OPEN: {
          this._stateMarkupDeclarationOpen(r);
          break;
        }
        case re.COMMENT_START: {
          this._stateCommentStart(r);
          break;
        }
        case re.COMMENT_START_DASH: {
          this._stateCommentStartDash(r);
          break;
        }
        case re.COMMENT: {
          this._stateComment(r);
          break;
        }
        case re.COMMENT_LESS_THAN_SIGN: {
          this._stateCommentLessThanSign(r);
          break;
        }
        case re.COMMENT_LESS_THAN_SIGN_BANG: {
          this._stateCommentLessThanSignBang(r);
          break;
        }
        case re.COMMENT_LESS_THAN_SIGN_BANG_DASH: {
          this._stateCommentLessThanSignBangDash(r);
          break;
        }
        case re.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH: {
          this._stateCommentLessThanSignBangDashDash(r);
          break;
        }
        case re.COMMENT_END_DASH: {
          this._stateCommentEndDash(r);
          break;
        }
        case re.COMMENT_END: {
          this._stateCommentEnd(r);
          break;
        }
        case re.COMMENT_END_BANG: {
          this._stateCommentEndBang(r);
          break;
        }
        case re.DOCTYPE: {
          this._stateDoctype(r);
          break;
        }
        case re.BEFORE_DOCTYPE_NAME: {
          this._stateBeforeDoctypeName(r);
          break;
        }
        case re.DOCTYPE_NAME: {
          this._stateDoctypeName(r);
          break;
        }
        case re.AFTER_DOCTYPE_NAME: {
          this._stateAfterDoctypeName(r);
          break;
        }
        case re.AFTER_DOCTYPE_PUBLIC_KEYWORD: {
          this._stateAfterDoctypePublicKeyword(r);
          break;
        }
        case re.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER: {
          this._stateBeforeDoctypePublicIdentifier(r);
          break;
        }
        case re.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED: {
          this._stateDoctypePublicIdentifierDoubleQuoted(r);
          break;
        }
        case re.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED: {
          this._stateDoctypePublicIdentifierSingleQuoted(r);
          break;
        }
        case re.AFTER_DOCTYPE_PUBLIC_IDENTIFIER: {
          this._stateAfterDoctypePublicIdentifier(r);
          break;
        }
        case re.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS: {
          this._stateBetweenDoctypePublicAndSystemIdentifiers(r);
          break;
        }
        case re.AFTER_DOCTYPE_SYSTEM_KEYWORD: {
          this._stateAfterDoctypeSystemKeyword(r);
          break;
        }
        case re.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER: {
          this._stateBeforeDoctypeSystemIdentifier(r);
          break;
        }
        case re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED: {
          this._stateDoctypeSystemIdentifierDoubleQuoted(r);
          break;
        }
        case re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED: {
          this._stateDoctypeSystemIdentifierSingleQuoted(r);
          break;
        }
        case re.AFTER_DOCTYPE_SYSTEM_IDENTIFIER: {
          this._stateAfterDoctypeSystemIdentifier(r);
          break;
        }
        case re.BOGUS_DOCTYPE: {
          this._stateBogusDoctype(r);
          break;
        }
        case re.CDATA_SECTION: {
          this._stateCdataSection(r);
          break;
        }
        case re.CDATA_SECTION_BRACKET: {
          this._stateCdataSectionBracket(r);
          break;
        }
        case re.CDATA_SECTION_END: {
          this._stateCdataSectionEnd(r);
          break;
        }
        case re.CHARACTER_REFERENCE: {
          this._stateCharacterReference(r);
          break;
        }
        case re.NAMED_CHARACTER_REFERENCE: {
          this._stateNamedCharacterReference(r);
          break;
        }
        case re.AMBIGUOUS_AMPERSAND: {
          this._stateAmbiguousAmpersand(r);
          break;
        }
        case re.NUMERIC_CHARACTER_REFERENCE: {
          this._stateNumericCharacterReference(r);
          break;
        }
        case re.HEXADEMICAL_CHARACTER_REFERENCE_START: {
          this._stateHexademicalCharacterReferenceStart(r);
          break;
        }
        case re.HEXADEMICAL_CHARACTER_REFERENCE: {
          this._stateHexademicalCharacterReference(r);
          break;
        }
        case re.DECIMAL_CHARACTER_REFERENCE: {
          this._stateDecimalCharacterReference(r);
          break;
        }
        case re.NUMERIC_CHARACTER_REFERENCE_END: {
          this._stateNumericCharacterReferenceEnd(r);
          break;
        }
        default:
          throw new Error("Unknown state");
      }
    }
    // State machine
    // Data state
    //------------------------------------------------------------------
  }, {
    key: "_stateData",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = re.TAG_OPEN;
          break;
        }
        case X.CODE_POINTS.AMPERSAND: {
          this.returnState = re.DATA, this.state = re.CHARACTER_REFERENCE;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this._emitCodePoint(r);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    //  RCDATA state
    //------------------------------------------------------------------
  }, {
    key: "_stateRcdata",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.AMPERSAND: {
          this.returnState = re.RCDATA, this.state = re.CHARACTER_REFERENCE;
          break;
        }
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = re.RCDATA_LESS_THAN_SIGN;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this._emitChars(X.REPLACEMENT_CHARACTER);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // RAWTEXT state
    //------------------------------------------------------------------
  }, {
    key: "_stateRawtext",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = re.RAWTEXT_LESS_THAN_SIGN;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this._emitChars(X.REPLACEMENT_CHARACTER);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // Script data state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptData",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = re.SCRIPT_DATA_LESS_THAN_SIGN;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this._emitChars(X.REPLACEMENT_CHARACTER);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // PLAINTEXT state
    //------------------------------------------------------------------
  }, {
    key: "_statePlaintext",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this._emitChars(X.REPLACEMENT_CHARACTER);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // Tag open state
    //------------------------------------------------------------------
  }, {
    key: "_stateTagOpen",
    value: function(r) {
      if (pl(r))
        this._createStartTagToken(), this.state = re.TAG_NAME, this._stateTagName(r);
      else
        switch (r) {
          case X.CODE_POINTS.EXCLAMATION_MARK: {
            this.state = re.MARKUP_DECLARATION_OPEN;
            break;
          }
          case X.CODE_POINTS.SOLIDUS: {
            this.state = re.END_TAG_OPEN;
            break;
          }
          case X.CODE_POINTS.QUESTION_MARK: {
            this._err(Be.ERR.unexpectedQuestionMarkInsteadOfTagName), this._createCommentToken(1), this.state = re.BOGUS_COMMENT, this._stateBogusComment(r);
            break;
          }
          case X.CODE_POINTS.EOF: {
            this._err(Be.ERR.eofBeforeTagName), this._emitChars("<"), this._emitEOFToken();
            break;
          }
          default:
            this._err(Be.ERR.invalidFirstCharacterOfTagName), this._emitChars("<"), this.state = re.DATA, this._stateData(r);
        }
    }
    // End tag open state
    //------------------------------------------------------------------
  }, {
    key: "_stateEndTagOpen",
    value: function(r) {
      if (pl(r))
        this._createEndTagToken(), this.state = re.TAG_NAME, this._stateTagName(r);
      else
        switch (r) {
          case X.CODE_POINTS.GREATER_THAN_SIGN: {
            this._err(Be.ERR.missingEndTagName), this.state = re.DATA;
            break;
          }
          case X.CODE_POINTS.EOF: {
            this._err(Be.ERR.eofBeforeTagName), this._emitChars("</"), this._emitEOFToken();
            break;
          }
          default:
            this._err(Be.ERR.invalidFirstCharacterOfTagName), this._createCommentToken(2), this.state = re.BOGUS_COMMENT, this._stateBogusComment(r);
        }
    }
    // Tag name state
    //------------------------------------------------------------------
  }, {
    key: "_stateTagName",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED: {
          this.state = re.BEFORE_ATTRIBUTE_NAME;
          break;
        }
        case X.CODE_POINTS.SOLIDUS: {
          this.state = re.SELF_CLOSING_START_TAG;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = re.DATA, this.emitCurrentTagToken();
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), n.tagName += X.REPLACEMENT_CHARACTER;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          n.tagName += String.fromCodePoint(Pm(r) ? y_(r) : r);
      }
    }
    // RCDATA less-than sign state
    //------------------------------------------------------------------
  }, {
    key: "_stateRcdataLessThanSign",
    value: function(r) {
      r === X.CODE_POINTS.SOLIDUS ? this.state = re.RCDATA_END_TAG_OPEN : (this._emitChars("<"), this.state = re.RCDATA, this._stateRcdata(r));
    }
    // RCDATA end tag open state
    //------------------------------------------------------------------
  }, {
    key: "_stateRcdataEndTagOpen",
    value: function(r) {
      pl(r) ? (this.state = re.RCDATA_END_TAG_NAME, this._stateRcdataEndTagName(r)) : (this._emitChars("</"), this.state = re.RCDATA, this._stateRcdata(r));
    }
  }, {
    key: "handleSpecialEndTag",
    value: function(r) {
      if (!this.preprocessor.startsWith(this.lastStartTagName, false))
        return !this._ensureHibernation();
      this._createEndTagToken();
      const n = this.currentToken;
      switch (n.tagName = this.lastStartTagName, this.preprocessor.peek(this.lastStartTagName.length)) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED:
          return this._advanceBy(this.lastStartTagName.length), this.state = re.BEFORE_ATTRIBUTE_NAME, false;
        case X.CODE_POINTS.SOLIDUS:
          return this._advanceBy(this.lastStartTagName.length), this.state = re.SELF_CLOSING_START_TAG, false;
        case X.CODE_POINTS.GREATER_THAN_SIGN:
          return this._advanceBy(this.lastStartTagName.length), this.emitCurrentTagToken(), this.state = re.DATA, false;
        default:
          return !this._ensureHibernation();
      }
    }
    // RCDATA end tag name state
    //------------------------------------------------------------------
  }, {
    key: "_stateRcdataEndTagName",
    value: function(r) {
      this.handleSpecialEndTag(r) && (this._emitChars("</"), this.state = re.RCDATA, this._stateRcdata(r));
    }
    // RAWTEXT less-than sign state
    //------------------------------------------------------------------
  }, {
    key: "_stateRawtextLessThanSign",
    value: function(r) {
      r === X.CODE_POINTS.SOLIDUS ? this.state = re.RAWTEXT_END_TAG_OPEN : (this._emitChars("<"), this.state = re.RAWTEXT, this._stateRawtext(r));
    }
    // RAWTEXT end tag open state
    //------------------------------------------------------------------
  }, {
    key: "_stateRawtextEndTagOpen",
    value: function(r) {
      pl(r) ? (this.state = re.RAWTEXT_END_TAG_NAME, this._stateRawtextEndTagName(r)) : (this._emitChars("</"), this.state = re.RAWTEXT, this._stateRawtext(r));
    }
    // RAWTEXT end tag name state
    //------------------------------------------------------------------
  }, {
    key: "_stateRawtextEndTagName",
    value: function(r) {
      this.handleSpecialEndTag(r) && (this._emitChars("</"), this.state = re.RAWTEXT, this._stateRawtext(r));
    }
    // Script data less-than sign state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataLessThanSign",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.SOLIDUS: {
          this.state = re.SCRIPT_DATA_END_TAG_OPEN;
          break;
        }
        case X.CODE_POINTS.EXCLAMATION_MARK: {
          this.state = re.SCRIPT_DATA_ESCAPE_START, this._emitChars("<!");
          break;
        }
        default:
          this._emitChars("<"), this.state = re.SCRIPT_DATA, this._stateScriptData(r);
      }
    }
    // Script data end tag open state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEndTagOpen",
    value: function(r) {
      pl(r) ? (this.state = re.SCRIPT_DATA_END_TAG_NAME, this._stateScriptDataEndTagName(r)) : (this._emitChars("</"), this.state = re.SCRIPT_DATA, this._stateScriptData(r));
    }
    // Script data end tag name state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEndTagName",
    value: function(r) {
      this.handleSpecialEndTag(r) && (this._emitChars("</"), this.state = re.SCRIPT_DATA, this._stateScriptData(r));
    }
    // Script data escape start state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapeStart",
    value: function(r) {
      r === X.CODE_POINTS.HYPHEN_MINUS ? (this.state = re.SCRIPT_DATA_ESCAPE_START_DASH, this._emitChars("-")) : (this.state = re.SCRIPT_DATA, this._stateScriptData(r));
    }
    // Script data escape start dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapeStartDash",
    value: function(r) {
      r === X.CODE_POINTS.HYPHEN_MINUS ? (this.state = re.SCRIPT_DATA_ESCAPED_DASH_DASH, this._emitChars("-")) : (this.state = re.SCRIPT_DATA, this._stateScriptData(r));
    }
    // Script data escaped state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscaped",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.HYPHEN_MINUS: {
          this.state = re.SCRIPT_DATA_ESCAPED_DASH, this._emitChars("-");
          break;
        }
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = re.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this._emitChars(X.REPLACEMENT_CHARACTER);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInScriptHtmlCommentLikeText), this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // Script data escaped dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapedDash",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.HYPHEN_MINUS: {
          this.state = re.SCRIPT_DATA_ESCAPED_DASH_DASH, this._emitChars("-");
          break;
        }
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = re.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this.state = re.SCRIPT_DATA_ESCAPED, this._emitChars(X.REPLACEMENT_CHARACTER);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInScriptHtmlCommentLikeText), this._emitEOFToken();
          break;
        }
        default:
          this.state = re.SCRIPT_DATA_ESCAPED, this._emitCodePoint(r);
      }
    }
    // Script data escaped dash dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapedDashDash",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.HYPHEN_MINUS: {
          this._emitChars("-");
          break;
        }
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = re.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = re.SCRIPT_DATA, this._emitChars(">");
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this.state = re.SCRIPT_DATA_ESCAPED, this._emitChars(X.REPLACEMENT_CHARACTER);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInScriptHtmlCommentLikeText), this._emitEOFToken();
          break;
        }
        default:
          this.state = re.SCRIPT_DATA_ESCAPED, this._emitCodePoint(r);
      }
    }
    // Script data escaped less-than sign state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapedLessThanSign",
    value: function(r) {
      r === X.CODE_POINTS.SOLIDUS ? this.state = re.SCRIPT_DATA_ESCAPED_END_TAG_OPEN : pl(r) ? (this._emitChars("<"), this.state = re.SCRIPT_DATA_DOUBLE_ESCAPE_START, this._stateScriptDataDoubleEscapeStart(r)) : (this._emitChars("<"), this.state = re.SCRIPT_DATA_ESCAPED, this._stateScriptDataEscaped(r));
    }
    // Script data escaped end tag open state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapedEndTagOpen",
    value: function(r) {
      pl(r) ? (this.state = re.SCRIPT_DATA_ESCAPED_END_TAG_NAME, this._stateScriptDataEscapedEndTagName(r)) : (this._emitChars("</"), this.state = re.SCRIPT_DATA_ESCAPED, this._stateScriptDataEscaped(r));
    }
    // Script data escaped end tag name state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataEscapedEndTagName",
    value: function(r) {
      this.handleSpecialEndTag(r) && (this._emitChars("</"), this.state = re.SCRIPT_DATA_ESCAPED, this._stateScriptDataEscaped(r));
    }
    // Script data double escape start state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataDoubleEscapeStart",
    value: function(r) {
      if (this.preprocessor.startsWith(X.SEQUENCES.SCRIPT, false) && r3(this.preprocessor.peek(X.SEQUENCES.SCRIPT.length))) {
        this._emitCodePoint(r);
        for (let n = 0; n < X.SEQUENCES.SCRIPT.length; n++)
          this._emitCodePoint(this._consume());
        this.state = re.SCRIPT_DATA_DOUBLE_ESCAPED;
      } else
        this._ensureHibernation() || (this.state = re.SCRIPT_DATA_ESCAPED, this._stateScriptDataEscaped(r));
    }
    // Script data double escaped state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataDoubleEscaped",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.HYPHEN_MINUS: {
          this.state = re.SCRIPT_DATA_DOUBLE_ESCAPED_DASH, this._emitChars("-");
          break;
        }
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = re.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN, this._emitChars("<");
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this._emitChars(X.REPLACEMENT_CHARACTER);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInScriptHtmlCommentLikeText), this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // Script data double escaped dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataDoubleEscapedDash",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.HYPHEN_MINUS: {
          this.state = re.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH, this._emitChars("-");
          break;
        }
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = re.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN, this._emitChars("<");
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this.state = re.SCRIPT_DATA_DOUBLE_ESCAPED, this._emitChars(X.REPLACEMENT_CHARACTER);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInScriptHtmlCommentLikeText), this._emitEOFToken();
          break;
        }
        default:
          this.state = re.SCRIPT_DATA_DOUBLE_ESCAPED, this._emitCodePoint(r);
      }
    }
    // Script data double escaped dash dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataDoubleEscapedDashDash",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.HYPHEN_MINUS: {
          this._emitChars("-");
          break;
        }
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          this.state = re.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN, this._emitChars("<");
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = re.SCRIPT_DATA, this._emitChars(">");
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this.state = re.SCRIPT_DATA_DOUBLE_ESCAPED, this._emitChars(X.REPLACEMENT_CHARACTER);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInScriptHtmlCommentLikeText), this._emitEOFToken();
          break;
        }
        default:
          this.state = re.SCRIPT_DATA_DOUBLE_ESCAPED, this._emitCodePoint(r);
      }
    }
    // Script data double escaped less-than sign state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataDoubleEscapedLessThanSign",
    value: function(r) {
      r === X.CODE_POINTS.SOLIDUS ? (this.state = re.SCRIPT_DATA_DOUBLE_ESCAPE_END, this._emitChars("/")) : (this.state = re.SCRIPT_DATA_DOUBLE_ESCAPED, this._stateScriptDataDoubleEscaped(r));
    }
    // Script data double escape end state
    //------------------------------------------------------------------
  }, {
    key: "_stateScriptDataDoubleEscapeEnd",
    value: function(r) {
      if (this.preprocessor.startsWith(X.SEQUENCES.SCRIPT, false) && r3(this.preprocessor.peek(X.SEQUENCES.SCRIPT.length))) {
        this._emitCodePoint(r);
        for (let n = 0; n < X.SEQUENCES.SCRIPT.length; n++)
          this._emitCodePoint(this._consume());
        this.state = re.SCRIPT_DATA_ESCAPED;
      } else
        this._ensureHibernation() || (this.state = re.SCRIPT_DATA_DOUBLE_ESCAPED, this._stateScriptDataDoubleEscaped(r));
    }
    // Before attribute name state
    //------------------------------------------------------------------
  }, {
    key: "_stateBeforeAttributeName",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED:
          break;
        case X.CODE_POINTS.SOLIDUS:
        case X.CODE_POINTS.GREATER_THAN_SIGN:
        case X.CODE_POINTS.EOF: {
          this.state = re.AFTER_ATTRIBUTE_NAME, this._stateAfterAttributeName(r);
          break;
        }
        case X.CODE_POINTS.EQUALS_SIGN: {
          this._err(Be.ERR.unexpectedEqualsSignBeforeAttributeName), this._createAttr("="), this.state = re.ATTRIBUTE_NAME;
          break;
        }
        default:
          this._createAttr(""), this.state = re.ATTRIBUTE_NAME, this._stateAttributeName(r);
      }
    }
    // Attribute name state
    //------------------------------------------------------------------
  }, {
    key: "_stateAttributeName",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED:
        case X.CODE_POINTS.SOLIDUS:
        case X.CODE_POINTS.GREATER_THAN_SIGN:
        case X.CODE_POINTS.EOF: {
          this._leaveAttrName(), this.state = re.AFTER_ATTRIBUTE_NAME, this._stateAfterAttributeName(r);
          break;
        }
        case X.CODE_POINTS.EQUALS_SIGN: {
          this._leaveAttrName(), this.state = re.BEFORE_ATTRIBUTE_VALUE;
          break;
        }
        case X.CODE_POINTS.QUOTATION_MARK:
        case X.CODE_POINTS.APOSTROPHE:
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          this._err(Be.ERR.unexpectedCharacterInAttributeName), this.currentAttr.name += String.fromCodePoint(r);
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this.currentAttr.name += X.REPLACEMENT_CHARACTER;
          break;
        }
        default:
          this.currentAttr.name += String.fromCodePoint(Pm(r) ? y_(r) : r);
      }
    }
    // After attribute name state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterAttributeName",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED:
          break;
        case X.CODE_POINTS.SOLIDUS: {
          this.state = re.SELF_CLOSING_START_TAG;
          break;
        }
        case X.CODE_POINTS.EQUALS_SIGN: {
          this.state = re.BEFORE_ATTRIBUTE_VALUE;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = re.DATA, this.emitCurrentTagToken();
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          this._createAttr(""), this.state = re.ATTRIBUTE_NAME, this._stateAttributeName(r);
      }
    }
    // Before attribute value state
    //------------------------------------------------------------------
  }, {
    key: "_stateBeforeAttributeValue",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED:
          break;
        case X.CODE_POINTS.QUOTATION_MARK: {
          this.state = re.ATTRIBUTE_VALUE_DOUBLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.APOSTROPHE: {
          this.state = re.ATTRIBUTE_VALUE_SINGLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Be.ERR.missingAttributeValue), this.state = re.DATA, this.emitCurrentTagToken();
          break;
        }
        default:
          this.state = re.ATTRIBUTE_VALUE_UNQUOTED, this._stateAttributeValueUnquoted(r);
      }
    }
    // Attribute value (double-quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateAttributeValueDoubleQuoted",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.QUOTATION_MARK: {
          this.state = re.AFTER_ATTRIBUTE_VALUE_QUOTED;
          break;
        }
        case X.CODE_POINTS.AMPERSAND: {
          this.returnState = re.ATTRIBUTE_VALUE_DOUBLE_QUOTED, this.state = re.CHARACTER_REFERENCE;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this.currentAttr.value += X.REPLACEMENT_CHARACTER;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          this.currentAttr.value += String.fromCodePoint(r);
      }
    }
    // Attribute value (single-quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateAttributeValueSingleQuoted",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.APOSTROPHE: {
          this.state = re.AFTER_ATTRIBUTE_VALUE_QUOTED;
          break;
        }
        case X.CODE_POINTS.AMPERSAND: {
          this.returnState = re.ATTRIBUTE_VALUE_SINGLE_QUOTED, this.state = re.CHARACTER_REFERENCE;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this.currentAttr.value += X.REPLACEMENT_CHARACTER;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          this.currentAttr.value += String.fromCodePoint(r);
      }
    }
    // Attribute value (unquoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateAttributeValueUnquoted",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED: {
          this._leaveAttrValue(), this.state = re.BEFORE_ATTRIBUTE_NAME;
          break;
        }
        case X.CODE_POINTS.AMPERSAND: {
          this.returnState = re.ATTRIBUTE_VALUE_UNQUOTED, this.state = re.CHARACTER_REFERENCE;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._leaveAttrValue(), this.state = re.DATA, this.emitCurrentTagToken();
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), this.currentAttr.value += X.REPLACEMENT_CHARACTER;
          break;
        }
        case X.CODE_POINTS.QUOTATION_MARK:
        case X.CODE_POINTS.APOSTROPHE:
        case X.CODE_POINTS.LESS_THAN_SIGN:
        case X.CODE_POINTS.EQUALS_SIGN:
        case X.CODE_POINTS.GRAVE_ACCENT: {
          this._err(Be.ERR.unexpectedCharacterInUnquotedAttributeValue), this.currentAttr.value += String.fromCodePoint(r);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          this.currentAttr.value += String.fromCodePoint(r);
      }
    }
    // After attribute value (quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterAttributeValueQuoted",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED: {
          this._leaveAttrValue(), this.state = re.BEFORE_ATTRIBUTE_NAME;
          break;
        }
        case X.CODE_POINTS.SOLIDUS: {
          this._leaveAttrValue(), this.state = re.SELF_CLOSING_START_TAG;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._leaveAttrValue(), this.state = re.DATA, this.emitCurrentTagToken();
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          this._err(Be.ERR.missingWhitespaceBetweenAttributes), this.state = re.BEFORE_ATTRIBUTE_NAME, this._stateBeforeAttributeName(r);
      }
    }
    // Self-closing start tag state
    //------------------------------------------------------------------
  }, {
    key: "_stateSelfClosingStartTag",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          const n = this.currentToken;
          n.selfClosing = true, this.state = re.DATA, this.emitCurrentTagToken();
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInTag), this._emitEOFToken();
          break;
        }
        default:
          this._err(Be.ERR.unexpectedSolidusInTag), this.state = re.BEFORE_ATTRIBUTE_NAME, this._stateBeforeAttributeName(r);
      }
    }
    // Bogus comment state
    //------------------------------------------------------------------
  }, {
    key: "_stateBogusComment",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = re.DATA, this.emitCurrentComment(n);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this.emitCurrentComment(n), this._emitEOFToken();
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), n.data += X.REPLACEMENT_CHARACTER;
          break;
        }
        default:
          n.data += String.fromCodePoint(r);
      }
    }
    // Markup declaration open state
    //------------------------------------------------------------------
  }, {
    key: "_stateMarkupDeclarationOpen",
    value: function(r) {
      this._consumeSequenceIfMatch(X.SEQUENCES.DASH_DASH, true) ? (this._createCommentToken(X.SEQUENCES.DASH_DASH.length + 1), this.state = re.COMMENT_START) : this._consumeSequenceIfMatch(X.SEQUENCES.DOCTYPE, false) ? (this.currentLocation = this.getCurrentLocation(X.SEQUENCES.DOCTYPE.length + 1), this.state = re.DOCTYPE) : this._consumeSequenceIfMatch(X.SEQUENCES.CDATA_START, true) ? this.inForeignNode ? this.state = re.CDATA_SECTION : (this._err(Be.ERR.cdataInHtmlContent), this._createCommentToken(X.SEQUENCES.CDATA_START.length + 1), this.currentToken.data = "[CDATA[", this.state = re.BOGUS_COMMENT) : this._ensureHibernation() || (this._err(Be.ERR.incorrectlyOpenedComment), this._createCommentToken(2), this.state = re.BOGUS_COMMENT, this._stateBogusComment(r));
    }
    // Comment start state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentStart",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.HYPHEN_MINUS: {
          this.state = re.COMMENT_START_DASH;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Be.ERR.abruptClosingOfEmptyComment), this.state = re.DATA;
          const n = this.currentToken;
          this.emitCurrentComment(n);
          break;
        }
        default:
          this.state = re.COMMENT, this._stateComment(r);
      }
    }
    // Comment start dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentStartDash",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.HYPHEN_MINUS: {
          this.state = re.COMMENT_END;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Be.ERR.abruptClosingOfEmptyComment), this.state = re.DATA, this.emitCurrentComment(n);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInComment), this.emitCurrentComment(n), this._emitEOFToken();
          break;
        }
        default:
          n.data += "-", this.state = re.COMMENT, this._stateComment(r);
      }
    }
    // Comment state
    //------------------------------------------------------------------
  }, {
    key: "_stateComment",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.HYPHEN_MINUS: {
          this.state = re.COMMENT_END_DASH;
          break;
        }
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          n.data += "<", this.state = re.COMMENT_LESS_THAN_SIGN;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), n.data += X.REPLACEMENT_CHARACTER;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInComment), this.emitCurrentComment(n), this._emitEOFToken();
          break;
        }
        default:
          n.data += String.fromCodePoint(r);
      }
    }
    // Comment less-than sign state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentLessThanSign",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.EXCLAMATION_MARK: {
          n.data += "!", this.state = re.COMMENT_LESS_THAN_SIGN_BANG;
          break;
        }
        case X.CODE_POINTS.LESS_THAN_SIGN: {
          n.data += "<";
          break;
        }
        default:
          this.state = re.COMMENT, this._stateComment(r);
      }
    }
    // Comment less-than sign bang state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentLessThanSignBang",
    value: function(r) {
      r === X.CODE_POINTS.HYPHEN_MINUS ? this.state = re.COMMENT_LESS_THAN_SIGN_BANG_DASH : (this.state = re.COMMENT, this._stateComment(r));
    }
    // Comment less-than sign bang dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentLessThanSignBangDash",
    value: function(r) {
      r === X.CODE_POINTS.HYPHEN_MINUS ? this.state = re.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH : (this.state = re.COMMENT_END_DASH, this._stateCommentEndDash(r));
    }
    // Comment less-than sign bang dash dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentLessThanSignBangDashDash",
    value: function(r) {
      r !== X.CODE_POINTS.GREATER_THAN_SIGN && r !== X.CODE_POINTS.EOF && this._err(Be.ERR.nestedComment), this.state = re.COMMENT_END, this._stateCommentEnd(r);
    }
    // Comment end dash state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentEndDash",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.HYPHEN_MINUS: {
          this.state = re.COMMENT_END;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInComment), this.emitCurrentComment(n), this._emitEOFToken();
          break;
        }
        default:
          n.data += "-", this.state = re.COMMENT, this._stateComment(r);
      }
    }
    // Comment end state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentEnd",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = re.DATA, this.emitCurrentComment(n);
          break;
        }
        case X.CODE_POINTS.EXCLAMATION_MARK: {
          this.state = re.COMMENT_END_BANG;
          break;
        }
        case X.CODE_POINTS.HYPHEN_MINUS: {
          n.data += "-";
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInComment), this.emitCurrentComment(n), this._emitEOFToken();
          break;
        }
        default:
          n.data += "--", this.state = re.COMMENT, this._stateComment(r);
      }
    }
    // Comment end bang state
    //------------------------------------------------------------------
  }, {
    key: "_stateCommentEndBang",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.HYPHEN_MINUS: {
          n.data += "--!", this.state = re.COMMENT_END_DASH;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Be.ERR.incorrectlyClosedComment), this.state = re.DATA, this.emitCurrentComment(n);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInComment), this.emitCurrentComment(n), this._emitEOFToken();
          break;
        }
        default:
          n.data += "--!", this.state = re.COMMENT, this._stateComment(r);
      }
    }
    // DOCTYPE state
    //------------------------------------------------------------------
  }, {
    key: "_stateDoctype",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED: {
          this.state = re.BEFORE_DOCTYPE_NAME;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = re.BEFORE_DOCTYPE_NAME, this._stateBeforeDoctypeName(r);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), this._createDoctypeToken(null);
          const n = this.currentToken;
          n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Be.ERR.missingWhitespaceBeforeDoctypeName), this.state = re.BEFORE_DOCTYPE_NAME, this._stateBeforeDoctypeName(r);
      }
    }
    // Before DOCTYPE name state
    //------------------------------------------------------------------
  }, {
    key: "_stateBeforeDoctypeName",
    value: function(r) {
      if (Pm(r))
        this._createDoctypeToken(String.fromCharCode(y_(r))), this.state = re.DOCTYPE_NAME;
      else
        switch (r) {
          case X.CODE_POINTS.SPACE:
          case X.CODE_POINTS.LINE_FEED:
          case X.CODE_POINTS.TABULATION:
          case X.CODE_POINTS.FORM_FEED:
            break;
          case X.CODE_POINTS.NULL: {
            this._err(Be.ERR.unexpectedNullCharacter), this._createDoctypeToken(X.REPLACEMENT_CHARACTER), this.state = re.DOCTYPE_NAME;
            break;
          }
          case X.CODE_POINTS.GREATER_THAN_SIGN: {
            this._err(Be.ERR.missingDoctypeName), this._createDoctypeToken(null);
            const n = this.currentToken;
            n.forceQuirks = true, this.emitCurrentDoctype(n), this.state = re.DATA;
            break;
          }
          case X.CODE_POINTS.EOF: {
            this._err(Be.ERR.eofInDoctype), this._createDoctypeToken(null);
            const n = this.currentToken;
            n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
            break;
          }
          default:
            this._createDoctypeToken(String.fromCodePoint(r)), this.state = re.DOCTYPE_NAME;
        }
    }
    // DOCTYPE name state
    //------------------------------------------------------------------
  }, {
    key: "_stateDoctypeName",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED: {
          this.state = re.AFTER_DOCTYPE_NAME;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = re.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), n.name += X.REPLACEMENT_CHARACTER;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          n.name += String.fromCodePoint(Pm(r) ? y_(r) : r);
      }
    }
    // After DOCTYPE name state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterDoctypeName",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED:
          break;
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = re.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._consumeSequenceIfMatch(X.SEQUENCES.PUBLIC, false) ? this.state = re.AFTER_DOCTYPE_PUBLIC_KEYWORD : this._consumeSequenceIfMatch(X.SEQUENCES.SYSTEM, false) ? this.state = re.AFTER_DOCTYPE_SYSTEM_KEYWORD : this._ensureHibernation() || (this._err(Be.ERR.invalidCharacterSequenceAfterDoctypeName), n.forceQuirks = true, this.state = re.BOGUS_DOCTYPE, this._stateBogusDoctype(r));
      }
    }
    // After DOCTYPE public keyword state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterDoctypePublicKeyword",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED: {
          this.state = re.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;
          break;
        }
        case X.CODE_POINTS.QUOTATION_MARK: {
          this._err(Be.ERR.missingWhitespaceAfterDoctypePublicKeyword), n.publicId = "", this.state = re.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.APOSTROPHE: {
          this._err(Be.ERR.missingWhitespaceAfterDoctypePublicKeyword), n.publicId = "", this.state = re.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Be.ERR.missingDoctypePublicIdentifier), n.forceQuirks = true, this.state = re.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Be.ERR.missingQuoteBeforeDoctypePublicIdentifier), n.forceQuirks = true, this.state = re.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // Before DOCTYPE public identifier state
    //------------------------------------------------------------------
  }, {
    key: "_stateBeforeDoctypePublicIdentifier",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED:
          break;
        case X.CODE_POINTS.QUOTATION_MARK: {
          n.publicId = "", this.state = re.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.APOSTROPHE: {
          n.publicId = "", this.state = re.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Be.ERR.missingDoctypePublicIdentifier), n.forceQuirks = true, this.state = re.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Be.ERR.missingQuoteBeforeDoctypePublicIdentifier), n.forceQuirks = true, this.state = re.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // DOCTYPE public identifier (double-quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateDoctypePublicIdentifierDoubleQuoted",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.QUOTATION_MARK: {
          this.state = re.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), n.publicId += X.REPLACEMENT_CHARACTER;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Be.ERR.abruptDoctypePublicIdentifier), n.forceQuirks = true, this.emitCurrentDoctype(n), this.state = re.DATA;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          n.publicId += String.fromCodePoint(r);
      }
    }
    // DOCTYPE public identifier (single-quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateDoctypePublicIdentifierSingleQuoted",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.APOSTROPHE: {
          this.state = re.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), n.publicId += X.REPLACEMENT_CHARACTER;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Be.ERR.abruptDoctypePublicIdentifier), n.forceQuirks = true, this.emitCurrentDoctype(n), this.state = re.DATA;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          n.publicId += String.fromCodePoint(r);
      }
    }
    // After DOCTYPE public identifier state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterDoctypePublicIdentifier",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED: {
          this.state = re.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = re.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case X.CODE_POINTS.QUOTATION_MARK: {
          this._err(Be.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers), n.systemId = "", this.state = re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.APOSTROPHE: {
          this._err(Be.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers), n.systemId = "", this.state = re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Be.ERR.missingQuoteBeforeDoctypeSystemIdentifier), n.forceQuirks = true, this.state = re.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // Between DOCTYPE public and system identifiers state
    //------------------------------------------------------------------
  }, {
    key: "_stateBetweenDoctypePublicAndSystemIdentifiers",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED:
          break;
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.emitCurrentDoctype(n), this.state = re.DATA;
          break;
        }
        case X.CODE_POINTS.QUOTATION_MARK: {
          n.systemId = "", this.state = re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.APOSTROPHE: {
          n.systemId = "", this.state = re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Be.ERR.missingQuoteBeforeDoctypeSystemIdentifier), n.forceQuirks = true, this.state = re.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // After DOCTYPE system keyword state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterDoctypeSystemKeyword",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED: {
          this.state = re.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;
          break;
        }
        case X.CODE_POINTS.QUOTATION_MARK: {
          this._err(Be.ERR.missingWhitespaceAfterDoctypeSystemKeyword), n.systemId = "", this.state = re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.APOSTROPHE: {
          this._err(Be.ERR.missingWhitespaceAfterDoctypeSystemKeyword), n.systemId = "", this.state = re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Be.ERR.missingDoctypeSystemIdentifier), n.forceQuirks = true, this.state = re.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Be.ERR.missingQuoteBeforeDoctypeSystemIdentifier), n.forceQuirks = true, this.state = re.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // Before DOCTYPE system identifier state
    //------------------------------------------------------------------
  }, {
    key: "_stateBeforeDoctypeSystemIdentifier",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED:
          break;
        case X.CODE_POINTS.QUOTATION_MARK: {
          n.systemId = "", this.state = re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.APOSTROPHE: {
          n.systemId = "", this.state = re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Be.ERR.missingDoctypeSystemIdentifier), n.forceQuirks = true, this.state = re.DATA, this.emitCurrentDoctype(n);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Be.ERR.missingQuoteBeforeDoctypeSystemIdentifier), n.forceQuirks = true, this.state = re.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // DOCTYPE system identifier (double-quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateDoctypeSystemIdentifierDoubleQuoted",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.QUOTATION_MARK: {
          this.state = re.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), n.systemId += X.REPLACEMENT_CHARACTER;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Be.ERR.abruptDoctypeSystemIdentifier), n.forceQuirks = true, this.emitCurrentDoctype(n), this.state = re.DATA;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          n.systemId += String.fromCodePoint(r);
      }
    }
    // DOCTYPE system identifier (single-quoted) state
    //------------------------------------------------------------------
  }, {
    key: "_stateDoctypeSystemIdentifierSingleQuoted",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.APOSTROPHE: {
          this.state = re.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter), n.systemId += X.REPLACEMENT_CHARACTER;
          break;
        }
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this._err(Be.ERR.abruptDoctypeSystemIdentifier), n.forceQuirks = true, this.emitCurrentDoctype(n), this.state = re.DATA;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          n.systemId += String.fromCodePoint(r);
      }
    }
    // After DOCTYPE system identifier state
    //------------------------------------------------------------------
  }, {
    key: "_stateAfterDoctypeSystemIdentifier",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.SPACE:
        case X.CODE_POINTS.LINE_FEED:
        case X.CODE_POINTS.TABULATION:
        case X.CODE_POINTS.FORM_FEED:
          break;
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.emitCurrentDoctype(n), this.state = re.DATA;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInDoctype), n.forceQuirks = true, this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
        default:
          this._err(Be.ERR.unexpectedCharacterAfterDoctypeSystemIdentifier), this.state = re.BOGUS_DOCTYPE, this._stateBogusDoctype(r);
      }
    }
    // Bogus DOCTYPE state
    //------------------------------------------------------------------
  }, {
    key: "_stateBogusDoctype",
    value: function(r) {
      const n = this.currentToken;
      switch (r) {
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.emitCurrentDoctype(n), this.state = re.DATA;
          break;
        }
        case X.CODE_POINTS.NULL: {
          this._err(Be.ERR.unexpectedNullCharacter);
          break;
        }
        case X.CODE_POINTS.EOF: {
          this.emitCurrentDoctype(n), this._emitEOFToken();
          break;
        }
      }
    }
    // CDATA section state
    //------------------------------------------------------------------
  }, {
    key: "_stateCdataSection",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.RIGHT_SQUARE_BRACKET: {
          this.state = re.CDATA_SECTION_BRACKET;
          break;
        }
        case X.CODE_POINTS.EOF: {
          this._err(Be.ERR.eofInCdata), this._emitEOFToken();
          break;
        }
        default:
          this._emitCodePoint(r);
      }
    }
    // CDATA section bracket state
    //------------------------------------------------------------------
  }, {
    key: "_stateCdataSectionBracket",
    value: function(r) {
      r === X.CODE_POINTS.RIGHT_SQUARE_BRACKET ? this.state = re.CDATA_SECTION_END : (this._emitChars("]"), this.state = re.CDATA_SECTION, this._stateCdataSection(r));
    }
    // CDATA section end state
    //------------------------------------------------------------------
  }, {
    key: "_stateCdataSectionEnd",
    value: function(r) {
      switch (r) {
        case X.CODE_POINTS.GREATER_THAN_SIGN: {
          this.state = re.DATA;
          break;
        }
        case X.CODE_POINTS.RIGHT_SQUARE_BRACKET: {
          this._emitChars("]");
          break;
        }
        default:
          this._emitChars("]]"), this.state = re.CDATA_SECTION, this._stateCdataSection(r);
      }
    }
    // Character reference state
    //------------------------------------------------------------------
  }, {
    key: "_stateCharacterReference",
    value: function(r) {
      r === X.CODE_POINTS.NUMBER_SIGN ? this.state = re.NUMERIC_CHARACTER_REFERENCE : nC(r) ? (this.state = re.NAMED_CHARACTER_REFERENCE, this._stateNamedCharacterReference(r)) : (this._flushCodePointConsumedAsCharacterReference(X.CODE_POINTS.AMPERSAND), this._reconsumeInState(this.returnState, r));
    }
    // Named character reference state
    //------------------------------------------------------------------
  }, {
    key: "_stateNamedCharacterReference",
    value: function(r) {
      const n = this._matchNamedCharacterReference(r);
      if (!this._ensureHibernation())
        if (n) {
          for (let i = 0; i < n.length; i++)
            this._flushCodePointConsumedAsCharacterReference(n[i]);
          this.state = this.returnState;
        } else
          this._flushCodePointConsumedAsCharacterReference(X.CODE_POINTS.AMPERSAND), this.state = re.AMBIGUOUS_AMPERSAND;
    }
    // Ambiguos ampersand state
    //------------------------------------------------------------------
  }, {
    key: "_stateAmbiguousAmpersand",
    value: function(r) {
      nC(r) ? this._flushCodePointConsumedAsCharacterReference(r) : (r === X.CODE_POINTS.SEMICOLON && this._err(Be.ERR.unknownNamedCharacterReference), this._reconsumeInState(this.returnState, r));
    }
    // Numeric character reference state
    //------------------------------------------------------------------
  }, {
    key: "_stateNumericCharacterReference",
    value: function(r) {
      this.charRefCode = 0, r === X.CODE_POINTS.LATIN_SMALL_X || r === X.CODE_POINTS.LATIN_CAPITAL_X ? this.state = re.HEXADEMICAL_CHARACTER_REFERENCE_START : hg(r) ? (this.state = re.DECIMAL_CHARACTER_REFERENCE, this._stateDecimalCharacterReference(r)) : (this._err(Be.ERR.absenceOfDigitsInNumericCharacterReference), this._flushCodePointConsumedAsCharacterReference(X.CODE_POINTS.AMPERSAND), this._flushCodePointConsumedAsCharacterReference(X.CODE_POINTS.NUMBER_SIGN), this._reconsumeInState(this.returnState, r));
    }
    // Hexademical character reference start state
    //------------------------------------------------------------------
  }, {
    key: "_stateHexademicalCharacterReferenceStart",
    value: function(r) {
      VAe(r) ? (this.state = re.HEXADEMICAL_CHARACTER_REFERENCE, this._stateHexademicalCharacterReference(r)) : (this._err(Be.ERR.absenceOfDigitsInNumericCharacterReference), this._flushCodePointConsumedAsCharacterReference(X.CODE_POINTS.AMPERSAND), this._flushCodePointConsumedAsCharacterReference(X.CODE_POINTS.NUMBER_SIGN), this._unconsume(2), this.state = this.returnState);
    }
    // Hexademical character reference state
    //------------------------------------------------------------------
  }, {
    key: "_stateHexademicalCharacterReference",
    value: function(r) {
      cY(r) ? this.charRefCode = this.charRefCode * 16 + r - 55 : uY(r) ? this.charRefCode = this.charRefCode * 16 + r - 87 : hg(r) ? this.charRefCode = this.charRefCode * 16 + r - 48 : r === X.CODE_POINTS.SEMICOLON ? this.state = re.NUMERIC_CHARACTER_REFERENCE_END : (this._err(Be.ERR.missingSemicolonAfterCharacterReference), this.state = re.NUMERIC_CHARACTER_REFERENCE_END, this._stateNumericCharacterReferenceEnd(r));
    }
    // Decimal character reference state
    //------------------------------------------------------------------
  }, {
    key: "_stateDecimalCharacterReference",
    value: function(r) {
      hg(r) ? this.charRefCode = this.charRefCode * 10 + r - 48 : r === X.CODE_POINTS.SEMICOLON ? this.state = re.NUMERIC_CHARACTER_REFERENCE_END : (this._err(Be.ERR.missingSemicolonAfterCharacterReference), this.state = re.NUMERIC_CHARACTER_REFERENCE_END, this._stateNumericCharacterReferenceEnd(r));
    }
    // Numeric character reference end state
    //------------------------------------------------------------------
  }, {
    key: "_stateNumericCharacterReferenceEnd",
    value: function(r) {
      if (this.charRefCode === X.CODE_POINTS.NULL)
        this._err(Be.ERR.nullCharacterReference), this.charRefCode = X.CODE_POINTS.REPLACEMENT_CHARACTER;
      else if (this.charRefCode > 1114111)
        this._err(Be.ERR.characterReferenceOutsideUnicodeRange), this.charRefCode = X.CODE_POINTS.REPLACEMENT_CHARACTER;
      else if ((0, X.isSurrogate)(this.charRefCode))
        this._err(Be.ERR.surrogateCharacterReference), this.charRefCode = X.CODE_POINTS.REPLACEMENT_CHARACTER;
      else if ((0, X.isUndefinedCodePoint)(this.charRefCode))
        this._err(Be.ERR.noncharacterCharacterReference);
      else if ((0, X.isControlCodePoint)(this.charRefCode) || this.charRefCode === X.CODE_POINTS.CARRIAGE_RETURN) {
        this._err(Be.ERR.controlCharacterReference);
        const n = GAe.get(this.charRefCode);
        n !== void 0 && (this.charRefCode = n);
      }
      this._flushCodePointConsumedAsCharacterReference(this.charRefCode), this._reconsumeInState(this.returnState, r);
    }
  }]), e12;
}();
wu.Tokenizer = WAe;
var nS = {};
function YAe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function n3(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, KAe(n.key), n);
  }
}
function qAe(e12, t, r) {
  return t && n3(e12.prototype, t), r && n3(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function KAe(e12) {
  var t = ZAe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function ZAe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
Object.defineProperty(nS, "__esModule", {
  value: true
});
nS.OpenElementStack = void 0;
var $e = Zs;
var fY = /* @__PURE__ */ new Set([$e.TAG_ID.DD, $e.TAG_ID.DT, $e.TAG_ID.LI, $e.TAG_ID.OPTGROUP, $e.TAG_ID.OPTION, $e.TAG_ID.P, $e.TAG_ID.RB, $e.TAG_ID.RP, $e.TAG_ID.RT, $e.TAG_ID.RTC]);
var i3 = /* @__PURE__ */ new Set([...fY, $e.TAG_ID.CAPTION, $e.TAG_ID.COLGROUP, $e.TAG_ID.TBODY, $e.TAG_ID.TD, $e.TAG_ID.TFOOT, $e.TAG_ID.TH, $e.TAG_ID.THEAD, $e.TAG_ID.TR]);
var __ = /* @__PURE__ */ new Map([[$e.TAG_ID.APPLET, $e.NS.HTML], [$e.TAG_ID.CAPTION, $e.NS.HTML], [$e.TAG_ID.HTML, $e.NS.HTML], [$e.TAG_ID.MARQUEE, $e.NS.HTML], [$e.TAG_ID.OBJECT, $e.NS.HTML], [$e.TAG_ID.TABLE, $e.NS.HTML], [$e.TAG_ID.TD, $e.NS.HTML], [$e.TAG_ID.TEMPLATE, $e.NS.HTML], [$e.TAG_ID.TH, $e.NS.HTML], [$e.TAG_ID.ANNOTATION_XML, $e.NS.MATHML], [$e.TAG_ID.MI, $e.NS.MATHML], [$e.TAG_ID.MN, $e.NS.MATHML], [$e.TAG_ID.MO, $e.NS.MATHML], [$e.TAG_ID.MS, $e.NS.MATHML], [$e.TAG_ID.MTEXT, $e.NS.MATHML], [$e.TAG_ID.DESC, $e.NS.SVG], [$e.TAG_ID.FOREIGN_OBJECT, $e.NS.SVG], [$e.TAG_ID.TITLE, $e.NS.SVG]]);
var QAe = [$e.TAG_ID.H1, $e.TAG_ID.H2, $e.TAG_ID.H3, $e.TAG_ID.H4, $e.TAG_ID.H5, $e.TAG_ID.H6];
var JAe = [$e.TAG_ID.TR, $e.TAG_ID.TEMPLATE, $e.TAG_ID.HTML];
var eOe = [$e.TAG_ID.TBODY, $e.TAG_ID.TFOOT, $e.TAG_ID.THEAD, $e.TAG_ID.TEMPLATE, $e.TAG_ID.HTML];
var tOe = [$e.TAG_ID.TABLE, $e.TAG_ID.TEMPLATE, $e.TAG_ID.HTML];
var rOe = [$e.TAG_ID.TD, $e.TAG_ID.TH];
var nOe = function() {
  function e12(t, r, n) {
    YAe(this, e12), this.treeAdapter = r, this.handler = n, this.items = [], this.tagIDs = [], this.stackTop = -1, this.tmplCount = 0, this.currentTagId = $e.TAG_ID.UNKNOWN, this.current = t;
  }
  return qAe(e12, [{
    key: "currentTmplContentOrNode",
    get: function() {
      return this._isInTemplate() ? this.treeAdapter.getTemplateContent(this.current) : this.current;
    }
  }, {
    key: "_indexOf",
    value: function(r) {
      return this.items.lastIndexOf(r, this.stackTop);
    }
    //Update current element
  }, {
    key: "_isInTemplate",
    value: function() {
      return this.currentTagId === $e.TAG_ID.TEMPLATE && this.treeAdapter.getNamespaceURI(this.current) === $e.NS.HTML;
    }
  }, {
    key: "_updateCurrentElement",
    value: function() {
      this.current = this.items[this.stackTop], this.currentTagId = this.tagIDs[this.stackTop];
    }
    //Mutations
  }, {
    key: "push",
    value: function(r, n) {
      this.stackTop++, this.items[this.stackTop] = r, this.current = r, this.tagIDs[this.stackTop] = n, this.currentTagId = n, this._isInTemplate() && this.tmplCount++, this.handler.onItemPush(r, n, true);
    }
  }, {
    key: "pop",
    value: function() {
      const r = this.current;
      this.tmplCount > 0 && this._isInTemplate() && this.tmplCount--, this.stackTop--, this._updateCurrentElement(), this.handler.onItemPop(r, true);
    }
  }, {
    key: "replace",
    value: function(r, n) {
      const i = this._indexOf(r);
      this.items[i] = n, i === this.stackTop && (this.current = n);
    }
  }, {
    key: "insertAfter",
    value: function(r, n, i) {
      const o = this._indexOf(r) + 1;
      this.items.splice(o, 0, n), this.tagIDs.splice(o, 0, i), this.stackTop++, o === this.stackTop && this._updateCurrentElement(), this.handler.onItemPush(this.current, this.currentTagId, o === this.stackTop);
    }
  }, {
    key: "popUntilTagNamePopped",
    value: function(r) {
      let n = this.stackTop + 1;
      do
        n = this.tagIDs.lastIndexOf(r, n - 1);
      while (n > 0 && this.treeAdapter.getNamespaceURI(this.items[n]) !== $e.NS.HTML);
      this.shortenToLength(n < 0 ? 0 : n);
    }
  }, {
    key: "shortenToLength",
    value: function(r) {
      for (; this.stackTop >= r; ) {
        const n = this.current;
        this.tmplCount > 0 && this._isInTemplate() && (this.tmplCount -= 1), this.stackTop--, this._updateCurrentElement(), this.handler.onItemPop(n, this.stackTop < r);
      }
    }
  }, {
    key: "popUntilElementPopped",
    value: function(r) {
      const n = this._indexOf(r);
      this.shortenToLength(n < 0 ? 0 : n);
    }
  }, {
    key: "popUntilPopped",
    value: function(r, n) {
      const i = this._indexOfTagNames(r, n);
      this.shortenToLength(i < 0 ? 0 : i);
    }
  }, {
    key: "popUntilNumberedHeaderPopped",
    value: function() {
      this.popUntilPopped(QAe, $e.NS.HTML);
    }
  }, {
    key: "popUntilTableCellPopped",
    value: function() {
      this.popUntilPopped(rOe, $e.NS.HTML);
    }
  }, {
    key: "popAllUpToHtmlElement",
    value: function() {
      this.tmplCount = 0, this.shortenToLength(1);
    }
  }, {
    key: "_indexOfTagNames",
    value: function(r, n) {
      for (let i = this.stackTop; i >= 0; i--)
        if (r.includes(this.tagIDs[i]) && this.treeAdapter.getNamespaceURI(this.items[i]) === n)
          return i;
      return -1;
    }
  }, {
    key: "clearBackTo",
    value: function(r, n) {
      const i = this._indexOfTagNames(r, n);
      this.shortenToLength(i + 1);
    }
  }, {
    key: "clearBackToTableContext",
    value: function() {
      this.clearBackTo(tOe, $e.NS.HTML);
    }
  }, {
    key: "clearBackToTableBodyContext",
    value: function() {
      this.clearBackTo(eOe, $e.NS.HTML);
    }
  }, {
    key: "clearBackToTableRowContext",
    value: function() {
      this.clearBackTo(JAe, $e.NS.HTML);
    }
  }, {
    key: "remove",
    value: function(r) {
      const n = this._indexOf(r);
      n >= 0 && (n === this.stackTop ? this.pop() : (this.items.splice(n, 1), this.tagIDs.splice(n, 1), this.stackTop--, this._updateCurrentElement(), this.handler.onItemPop(r, false)));
    }
    //Search
  }, {
    key: "tryPeekProperlyNestedBodyElement",
    value: function() {
      return this.stackTop >= 1 && this.tagIDs[1] === $e.TAG_ID.BODY ? this.items[1] : null;
    }
  }, {
    key: "contains",
    value: function(r) {
      return this._indexOf(r) > -1;
    }
  }, {
    key: "getCommonAncestor",
    value: function(r) {
      const n = this._indexOf(r) - 1;
      return n >= 0 ? this.items[n] : null;
    }
  }, {
    key: "isRootHtmlElementCurrent",
    value: function() {
      return this.stackTop === 0 && this.tagIDs[0] === $e.TAG_ID.HTML;
    }
    //Element in scope
  }, {
    key: "hasInScope",
    value: function(r) {
      for (let n = this.stackTop; n >= 0; n--) {
        const i = this.tagIDs[n], o = this.treeAdapter.getNamespaceURI(this.items[n]);
        if (i === r && o === $e.NS.HTML)
          return true;
        if (__.get(i) === o)
          return false;
      }
      return true;
    }
  }, {
    key: "hasNumberedHeaderInScope",
    value: function() {
      for (let r = this.stackTop; r >= 0; r--) {
        const n = this.tagIDs[r], i = this.treeAdapter.getNamespaceURI(this.items[r]);
        if ((0, $e.isNumberedHeader)(n) && i === $e.NS.HTML)
          return true;
        if (__.get(n) === i)
          return false;
      }
      return true;
    }
  }, {
    key: "hasInListItemScope",
    value: function(r) {
      for (let n = this.stackTop; n >= 0; n--) {
        const i = this.tagIDs[n], o = this.treeAdapter.getNamespaceURI(this.items[n]);
        if (i === r && o === $e.NS.HTML)
          return true;
        if ((i === $e.TAG_ID.UL || i === $e.TAG_ID.OL) && o === $e.NS.HTML || __.get(i) === o)
          return false;
      }
      return true;
    }
  }, {
    key: "hasInButtonScope",
    value: function(r) {
      for (let n = this.stackTop; n >= 0; n--) {
        const i = this.tagIDs[n], o = this.treeAdapter.getNamespaceURI(this.items[n]);
        if (i === r && o === $e.NS.HTML)
          return true;
        if (i === $e.TAG_ID.BUTTON && o === $e.NS.HTML || __.get(i) === o)
          return false;
      }
      return true;
    }
  }, {
    key: "hasInTableScope",
    value: function(r) {
      for (let n = this.stackTop; n >= 0; n--) {
        const i = this.tagIDs[n];
        if (this.treeAdapter.getNamespaceURI(this.items[n]) === $e.NS.HTML) {
          if (i === r)
            return true;
          if (i === $e.TAG_ID.TABLE || i === $e.TAG_ID.TEMPLATE || i === $e.TAG_ID.HTML)
            return false;
        }
      }
      return true;
    }
  }, {
    key: "hasTableBodyContextInTableScope",
    value: function() {
      for (let r = this.stackTop; r >= 0; r--) {
        const n = this.tagIDs[r];
        if (this.treeAdapter.getNamespaceURI(this.items[r]) === $e.NS.HTML) {
          if (n === $e.TAG_ID.TBODY || n === $e.TAG_ID.THEAD || n === $e.TAG_ID.TFOOT)
            return true;
          if (n === $e.TAG_ID.TABLE || n === $e.TAG_ID.HTML)
            return false;
        }
      }
      return true;
    }
  }, {
    key: "hasInSelectScope",
    value: function(r) {
      for (let n = this.stackTop; n >= 0; n--) {
        const i = this.tagIDs[n];
        if (this.treeAdapter.getNamespaceURI(this.items[n]) === $e.NS.HTML) {
          if (i === r)
            return true;
          if (i !== $e.TAG_ID.OPTION && i !== $e.TAG_ID.OPTGROUP)
            return false;
        }
      }
      return true;
    }
    //Implied end tags
  }, {
    key: "generateImpliedEndTags",
    value: function() {
      for (; fY.has(this.currentTagId); )
        this.pop();
    }
  }, {
    key: "generateImpliedEndTagsThoroughly",
    value: function() {
      for (; i3.has(this.currentTagId); )
        this.pop();
    }
  }, {
    key: "generateImpliedEndTagsWithExclusion",
    value: function(r) {
      for (; this.currentTagId !== r && i3.has(this.currentTagId); )
        this.pop();
    }
  }]), e12;
}();
nS.OpenElementStack = nOe;
var dY = {};
(function(e12) {
  function t(c, f) {
    if (!(c instanceof f))
      throw new TypeError("Cannot call a class as a function");
  }
  function r(c, f) {
    for (var h = 0; h < f.length; h++) {
      var d = f[h];
      d.enumerable = d.enumerable || false, d.configurable = true, "value" in d && (d.writable = true), Object.defineProperty(c, i(d.key), d);
    }
  }
  function n(c, f, h) {
    return f && r(c.prototype, f), h && r(c, h), Object.defineProperty(c, "prototype", { writable: false }), c;
  }
  function i(c) {
    var f = o(c, "string");
    return typeof f == "symbol" ? f : String(f);
  }
  function o(c, f) {
    if (typeof c != "object" || c === null)
      return c;
    var h = c[Symbol.toPrimitive];
    if (h !== void 0) {
      var d = h.call(c, f || "default");
      if (typeof d != "object")
        return d;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return (f === "string" ? String : Number)(c);
  }
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.FormattingElementList = e12.EntryType = void 0;
  const a = 3;
  var s;
  (function(c) {
    c[c.Marker = 0] = "Marker", c[c.Element = 1] = "Element";
  })(s = e12.EntryType || (e12.EntryType = {}));
  const l = {
    type: s.Marker
  };
  let u = function() {
    function c(f) {
      t(this, c), this.treeAdapter = f, this.entries = [], this.bookmark = null;
    }
    return n(c, [{
      key: "_getNoahArkConditionCandidates",
      value: function(h, d) {
        const p = [], m = d.length, g = this.treeAdapter.getTagName(h), v = this.treeAdapter.getNamespaceURI(h);
        for (let _ = 0; _ < this.entries.length; _++) {
          const y = this.entries[_];
          if (y.type === s.Marker)
            break;
          const {
            element: b
          } = y;
          if (this.treeAdapter.getTagName(b) === g && this.treeAdapter.getNamespaceURI(b) === v) {
            const T = this.treeAdapter.getAttrList(b);
            T.length === m && p.push({
              idx: _,
              attrs: T
            });
          }
        }
        return p;
      }
    }, {
      key: "_ensureNoahArkCondition",
      value: function(h) {
        if (this.entries.length < a)
          return;
        const d = this.treeAdapter.getAttrList(h), p = this._getNoahArkConditionCandidates(h, d);
        if (p.length < a)
          return;
        const m = new Map(d.map((v) => [v.name, v.value]));
        let g = 0;
        for (let v = 0; v < p.length; v++) {
          const _ = p[v];
          _.attrs.every((y) => m.get(y.name) === y.value) && (g += 1, g >= a && this.entries.splice(_.idx, 1));
        }
      }
      //Mutations
    }, {
      key: "insertMarker",
      value: function() {
        this.entries.unshift(l);
      }
    }, {
      key: "pushElement",
      value: function(h, d) {
        this._ensureNoahArkCondition(h), this.entries.unshift({
          type: s.Element,
          element: h,
          token: d
        });
      }
    }, {
      key: "insertElementAfterBookmark",
      value: function(h, d) {
        const p = this.entries.indexOf(this.bookmark);
        this.entries.splice(p, 0, {
          type: s.Element,
          element: h,
          token: d
        });
      }
    }, {
      key: "removeEntry",
      value: function(h) {
        const d = this.entries.indexOf(h);
        d >= 0 && this.entries.splice(d, 1);
      }
      /**
       * Clears the list of formatting elements up to the last marker.
       *
       * @see https://html.spec.whatwg.org/multipage/parsing.html#clear-the-list-of-active-formatting-elements-up-to-the-last-marker
       */
    }, {
      key: "clearToLastMarker",
      value: function() {
        const h = this.entries.indexOf(l);
        h >= 0 ? this.entries.splice(0, h + 1) : this.entries.length = 0;
      }
      //Search
    }, {
      key: "getElementEntryInScopeWithTagName",
      value: function(h) {
        const d = this.entries.find((p) => p.type === s.Marker || this.treeAdapter.getTagName(p.element) === h);
        return d && d.type === s.Element ? d : null;
      }
    }, {
      key: "getElementEntry",
      value: function(h) {
        return this.entries.find((d) => d.type === s.Element && d.element === h);
      }
    }]), c;
  }();
  e12.FormattingElementList = u;
})(dY);
var iS = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.defaultTreeAdapter = void 0;
  const t = Zs;
  function r(n) {
    return {
      nodeName: "#text",
      value: n,
      parentNode: null
    };
  }
  e12.defaultTreeAdapter = {
    //Node construction
    createDocument() {
      return {
        nodeName: "#document",
        mode: t.DOCUMENT_MODE.NO_QUIRKS,
        childNodes: []
      };
    },
    createDocumentFragment() {
      return {
        nodeName: "#document-fragment",
        childNodes: []
      };
    },
    createElement(n, i, o) {
      return {
        nodeName: n,
        tagName: n,
        attrs: o,
        namespaceURI: i,
        childNodes: [],
        parentNode: null
      };
    },
    createCommentNode(n) {
      return {
        nodeName: "#comment",
        data: n,
        parentNode: null
      };
    },
    //Tree mutation
    appendChild(n, i) {
      n.childNodes.push(i), i.parentNode = n;
    },
    insertBefore(n, i, o) {
      const a = n.childNodes.indexOf(o);
      n.childNodes.splice(a, 0, i), i.parentNode = n;
    },
    setTemplateContent(n, i) {
      n.content = i;
    },
    getTemplateContent(n) {
      return n.content;
    },
    setDocumentType(n, i, o, a) {
      const s = n.childNodes.find((l) => l.nodeName === "#documentType");
      if (s)
        s.name = i, s.publicId = o, s.systemId = a;
      else {
        const l = {
          nodeName: "#documentType",
          name: i,
          publicId: o,
          systemId: a,
          parentNode: null
        };
        e12.defaultTreeAdapter.appendChild(n, l);
      }
    },
    setDocumentMode(n, i) {
      n.mode = i;
    },
    getDocumentMode(n) {
      return n.mode;
    },
    detachNode(n) {
      if (n.parentNode) {
        const i = n.parentNode.childNodes.indexOf(n);
        n.parentNode.childNodes.splice(i, 1), n.parentNode = null;
      }
    },
    insertText(n, i) {
      if (n.childNodes.length > 0) {
        const o = n.childNodes[n.childNodes.length - 1];
        if (e12.defaultTreeAdapter.isTextNode(o)) {
          o.value += i;
          return;
        }
      }
      e12.defaultTreeAdapter.appendChild(n, r(i));
    },
    insertTextBefore(n, i, o) {
      const a = n.childNodes[n.childNodes.indexOf(o) - 1];
      a && e12.defaultTreeAdapter.isTextNode(a) ? a.value += i : e12.defaultTreeAdapter.insertBefore(n, r(i), o);
    },
    adoptAttributes(n, i) {
      const o = new Set(n.attrs.map((a) => a.name));
      for (let a = 0; a < i.length; a++)
        o.has(i[a].name) || n.attrs.push(i[a]);
    },
    //Tree traversing
    getFirstChild(n) {
      return n.childNodes[0];
    },
    getChildNodes(n) {
      return n.childNodes;
    },
    getParentNode(n) {
      return n.parentNode;
    },
    getAttrList(n) {
      return n.attrs;
    },
    //Node data
    getTagName(n) {
      return n.tagName;
    },
    getNamespaceURI(n) {
      return n.namespaceURI;
    },
    getTextNodeContent(n) {
      return n.value;
    },
    getCommentNodeContent(n) {
      return n.data;
    },
    getDocumentTypeNodeName(n) {
      return n.name;
    },
    getDocumentTypeNodePublicId(n) {
      return n.publicId;
    },
    getDocumentTypeNodeSystemId(n) {
      return n.systemId;
    },
    //Node types
    isTextNode(n) {
      return n.nodeName === "#text";
    },
    isCommentNode(n) {
      return n.nodeName === "#comment";
    },
    isDocumentTypeNode(n) {
      return n.nodeName === "#documentType";
    },
    isElementNode(n) {
      return Object.prototype.hasOwnProperty.call(n, "tagName");
    },
    // Source code location
    setNodeSourceCodeLocation(n, i) {
      n.sourceCodeLocation = i;
    },
    getNodeSourceCodeLocation(n) {
      return n.sourceCodeLocation;
    },
    updateNodeSourceCodeLocation(n, i) {
      n.sourceCodeLocation = Object.assign(Object.assign({}, n.sourceCodeLocation), i);
    }
  };
})(iS);
var Pd = {};
Object.defineProperty(Pd, "__esModule", {
  value: true
});
Pd.getDocumentMode = Pd.isConforming = void 0;
var xh = Zs;
var pY = "html";
var iOe = "about:legacy-compat";
var oOe = "http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd";
var mY = ["+//silmaril//dtd html pro v0r11 19970101//", "-//as//dtd html 3.0 aswedit + extensions//", "-//advasoft ltd//dtd html 3.0 aswedit + extensions//", "-//ietf//dtd html 2.0 level 1//", "-//ietf//dtd html 2.0 level 2//", "-//ietf//dtd html 2.0 strict level 1//", "-//ietf//dtd html 2.0 strict level 2//", "-//ietf//dtd html 2.0 strict//", "-//ietf//dtd html 2.0//", "-//ietf//dtd html 2.1e//", "-//ietf//dtd html 3.0//", "-//ietf//dtd html 3.2 final//", "-//ietf//dtd html 3.2//", "-//ietf//dtd html 3//", "-//ietf//dtd html level 0//", "-//ietf//dtd html level 1//", "-//ietf//dtd html level 2//", "-//ietf//dtd html level 3//", "-//ietf//dtd html strict level 0//", "-//ietf//dtd html strict level 1//", "-//ietf//dtd html strict level 2//", "-//ietf//dtd html strict level 3//", "-//ietf//dtd html strict//", "-//ietf//dtd html//", "-//metrius//dtd metrius presentational//", "-//microsoft//dtd internet explorer 2.0 html strict//", "-//microsoft//dtd internet explorer 2.0 html//", "-//microsoft//dtd internet explorer 2.0 tables//", "-//microsoft//dtd internet explorer 3.0 html strict//", "-//microsoft//dtd internet explorer 3.0 html//", "-//microsoft//dtd internet explorer 3.0 tables//", "-//netscape comm. corp.//dtd html//", "-//netscape comm. corp.//dtd strict html//", "-//o'reilly and associates//dtd html 2.0//", "-//o'reilly and associates//dtd html extended 1.0//", "-//o'reilly and associates//dtd html extended relaxed 1.0//", "-//sq//dtd html 2.0 hotmetal + extensions//", "-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//", "-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//", "-//spyglass//dtd html 2.0 extended//", "-//sun microsystems corp.//dtd hotjava html//", "-//sun microsystems corp.//dtd hotjava strict html//", "-//w3c//dtd html 3 1995-03-24//", "-//w3c//dtd html 3.2 draft//", "-//w3c//dtd html 3.2 final//", "-//w3c//dtd html 3.2//", "-//w3c//dtd html 3.2s draft//", "-//w3c//dtd html 4.0 frameset//", "-//w3c//dtd html 4.0 transitional//", "-//w3c//dtd html experimental 19960712//", "-//w3c//dtd html experimental 970421//", "-//w3c//dtd w3 html//", "-//w3o//dtd w3 html 3.0//", "-//webtechs//dtd mozilla html 2.0//", "-//webtechs//dtd mozilla html//"];
var aOe = [...mY, "-//w3c//dtd html 4.01 frameset//", "-//w3c//dtd html 4.01 transitional//"];
var sOe = /* @__PURE__ */ new Set(["-//w3o//dtd w3 html strict 3.0//en//", "-/w3c/dtd html 4.0 transitional/en", "html"]);
var gY = ["-//w3c//dtd xhtml 1.0 frameset//", "-//w3c//dtd xhtml 1.0 transitional//"];
var lOe = [...gY, "-//w3c//dtd html 4.01 frameset//", "-//w3c//dtd html 4.01 transitional//"];
function o3(e12, t) {
  return t.some((r) => e12.startsWith(r));
}
function cOe(e12) {
  return e12.name === pY && e12.publicId === null && (e12.systemId === null || e12.systemId === iOe);
}
Pd.isConforming = cOe;
function uOe(e12) {
  if (e12.name !== pY)
    return xh.DOCUMENT_MODE.QUIRKS;
  const {
    systemId: t
  } = e12;
  if (t && t.toLowerCase() === oOe)
    return xh.DOCUMENT_MODE.QUIRKS;
  let {
    publicId: r
  } = e12;
  if (r !== null) {
    if (r = r.toLowerCase(), sOe.has(r))
      return xh.DOCUMENT_MODE.QUIRKS;
    let n = t === null ? aOe : mY;
    if (o3(r, n))
      return xh.DOCUMENT_MODE.QUIRKS;
    if (n = t === null ? gY : lOe, o3(r, n))
      return xh.DOCUMENT_MODE.LIMITED_QUIRKS;
  }
  return xh.DOCUMENT_MODE.NO_QUIRKS;
}
Pd.getDocumentMode = uOe;
var $N = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.isIntegrationPoint = e12.adjustTokenSVGTagName = e12.adjustTokenXMLAttrs = e12.adjustTokenSVGAttrs = e12.adjustTokenMathMLAttrs = e12.causesExit = e12.SVG_TAG_NAMES_ADJUSTMENT_MAP = void 0;
  const t = Zs, r = {
    TEXT_HTML: "text/html",
    APPLICATION_XML: "application/xhtml+xml"
  }, n = "definitionurl", i = "definitionURL", o = new Map(["attributeName", "attributeType", "baseFrequency", "baseProfile", "calcMode", "clipPathUnits", "diffuseConstant", "edgeMode", "filterUnits", "glyphRef", "gradientTransform", "gradientUnits", "kernelMatrix", "kernelUnitLength", "keyPoints", "keySplines", "keyTimes", "lengthAdjust", "limitingConeAngle", "markerHeight", "markerUnits", "markerWidth", "maskContentUnits", "maskUnits", "numOctaves", "pathLength", "patternContentUnits", "patternTransform", "patternUnits", "pointsAtX", "pointsAtY", "pointsAtZ", "preserveAlpha", "preserveAspectRatio", "primitiveUnits", "refX", "refY", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "specularConstant", "specularExponent", "spreadMethod", "startOffset", "stdDeviation", "stitchTiles", "surfaceScale", "systemLanguage", "tableValues", "targetX", "targetY", "textLength", "viewBox", "viewTarget", "xChannelSelector", "yChannelSelector", "zoomAndPan"].map((g) => [g.toLowerCase(), g])), a = /* @__PURE__ */ new Map([["xlink:actuate", {
    prefix: "xlink",
    name: "actuate",
    namespace: t.NS.XLINK
  }], ["xlink:arcrole", {
    prefix: "xlink",
    name: "arcrole",
    namespace: t.NS.XLINK
  }], ["xlink:href", {
    prefix: "xlink",
    name: "href",
    namespace: t.NS.XLINK
  }], ["xlink:role", {
    prefix: "xlink",
    name: "role",
    namespace: t.NS.XLINK
  }], ["xlink:show", {
    prefix: "xlink",
    name: "show",
    namespace: t.NS.XLINK
  }], ["xlink:title", {
    prefix: "xlink",
    name: "title",
    namespace: t.NS.XLINK
  }], ["xlink:type", {
    prefix: "xlink",
    name: "type",
    namespace: t.NS.XLINK
  }], ["xml:base", {
    prefix: "xml",
    name: "base",
    namespace: t.NS.XML
  }], ["xml:lang", {
    prefix: "xml",
    name: "lang",
    namespace: t.NS.XML
  }], ["xml:space", {
    prefix: "xml",
    name: "space",
    namespace: t.NS.XML
  }], ["xmlns", {
    prefix: "",
    name: "xmlns",
    namespace: t.NS.XMLNS
  }], ["xmlns:xlink", {
    prefix: "xmlns",
    name: "xlink",
    namespace: t.NS.XMLNS
  }]]);
  e12.SVG_TAG_NAMES_ADJUSTMENT_MAP = new Map(["altGlyph", "altGlyphDef", "altGlyphItem", "animateColor", "animateMotion", "animateTransform", "clipPath", "feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feDistantLight", "feFlood", "feFuncA", "feFuncB", "feFuncG", "feFuncR", "feGaussianBlur", "feImage", "feMerge", "feMergeNode", "feMorphology", "feOffset", "fePointLight", "feSpecularLighting", "feSpotLight", "feTile", "feTurbulence", "foreignObject", "glyphRef", "linearGradient", "radialGradient", "textPath"].map((g) => [g.toLowerCase(), g]));
  const s = /* @__PURE__ */ new Set([t.TAG_ID.B, t.TAG_ID.BIG, t.TAG_ID.BLOCKQUOTE, t.TAG_ID.BODY, t.TAG_ID.BR, t.TAG_ID.CENTER, t.TAG_ID.CODE, t.TAG_ID.DD, t.TAG_ID.DIV, t.TAG_ID.DL, t.TAG_ID.DT, t.TAG_ID.EM, t.TAG_ID.EMBED, t.TAG_ID.H1, t.TAG_ID.H2, t.TAG_ID.H3, t.TAG_ID.H4, t.TAG_ID.H5, t.TAG_ID.H6, t.TAG_ID.HEAD, t.TAG_ID.HR, t.TAG_ID.I, t.TAG_ID.IMG, t.TAG_ID.LI, t.TAG_ID.LISTING, t.TAG_ID.MENU, t.TAG_ID.META, t.TAG_ID.NOBR, t.TAG_ID.OL, t.TAG_ID.P, t.TAG_ID.PRE, t.TAG_ID.RUBY, t.TAG_ID.S, t.TAG_ID.SMALL, t.TAG_ID.SPAN, t.TAG_ID.STRONG, t.TAG_ID.STRIKE, t.TAG_ID.SUB, t.TAG_ID.SUP, t.TAG_ID.TABLE, t.TAG_ID.TT, t.TAG_ID.U, t.TAG_ID.UL, t.TAG_ID.VAR]);
  function l(g) {
    const v = g.tagID;
    return v === t.TAG_ID.FONT && g.attrs.some(({
      name: y
    }) => y === t.ATTRS.COLOR || y === t.ATTRS.SIZE || y === t.ATTRS.FACE) || s.has(v);
  }
  e12.causesExit = l;
  function u(g) {
    for (let v = 0; v < g.attrs.length; v++)
      if (g.attrs[v].name === n) {
        g.attrs[v].name = i;
        break;
      }
  }
  e12.adjustTokenMathMLAttrs = u;
  function c(g) {
    for (let v = 0; v < g.attrs.length; v++) {
      const _ = o.get(g.attrs[v].name);
      _ != null && (g.attrs[v].name = _);
    }
  }
  e12.adjustTokenSVGAttrs = c;
  function f(g) {
    for (let v = 0; v < g.attrs.length; v++) {
      const _ = a.get(g.attrs[v].name);
      _ && (g.attrs[v].prefix = _.prefix, g.attrs[v].name = _.name, g.attrs[v].namespace = _.namespace);
    }
  }
  e12.adjustTokenXMLAttrs = f;
  function h(g) {
    const v = e12.SVG_TAG_NAMES_ADJUSTMENT_MAP.get(g.tagName);
    v != null && (g.tagName = v, g.tagID = (0, t.getTagID)(g.tagName));
  }
  e12.adjustTokenSVGTagName = h;
  function d(g, v) {
    return v === t.NS.MATHML && (g === t.TAG_ID.MI || g === t.TAG_ID.MO || g === t.TAG_ID.MN || g === t.TAG_ID.MS || g === t.TAG_ID.MTEXT);
  }
  function p(g, v, _) {
    if (v === t.NS.MATHML && g === t.TAG_ID.ANNOTATION_XML) {
      for (let y = 0; y < _.length; y++)
        if (_[y].name === t.ATTRS.ENCODING) {
          const b = _[y].value.toLowerCase();
          return b === r.TEXT_HTML || b === r.APPLICATION_XML;
        }
    }
    return v === t.NS.SVG && (g === t.TAG_ID.FOREIGN_OBJECT || g === t.TAG_ID.DESC || g === t.TAG_ID.TITLE);
  }
  function m(g, v, _, y) {
    return (!y || y === t.NS.HTML) && p(g, v, _) || (!y || y === t.NS.MATHML) && d(g, v);
  }
  e12.isIntegrationPoint = m;
})($N);
function hOe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function a3(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, dOe(n.key), n);
  }
}
function fOe(e12, t, r) {
  return t && a3(e12.prototype, t), r && a3(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function dOe(e12) {
  var t = pOe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function pOe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
Object.defineProperty(hv, "__esModule", {
  value: true
});
hv.Parser = void 0;
var fi = wu;
var mOe = nS;
var s3 = dY;
var gOe = iS;
var l3 = Pd;
var Sa = $N;
var Gn = uy;
var vY = tS;
var D = Zs;
var fn = rS;
var vOe = "hidden";
var yOe = 8;
var _Oe = 3;
var fe;
(function(e12) {
  e12[e12.INITIAL = 0] = "INITIAL", e12[e12.BEFORE_HTML = 1] = "BEFORE_HTML", e12[e12.BEFORE_HEAD = 2] = "BEFORE_HEAD", e12[e12.IN_HEAD = 3] = "IN_HEAD", e12[e12.IN_HEAD_NO_SCRIPT = 4] = "IN_HEAD_NO_SCRIPT", e12[e12.AFTER_HEAD = 5] = "AFTER_HEAD", e12[e12.IN_BODY = 6] = "IN_BODY", e12[e12.TEXT = 7] = "TEXT", e12[e12.IN_TABLE = 8] = "IN_TABLE", e12[e12.IN_TABLE_TEXT = 9] = "IN_TABLE_TEXT", e12[e12.IN_CAPTION = 10] = "IN_CAPTION", e12[e12.IN_COLUMN_GROUP = 11] = "IN_COLUMN_GROUP", e12[e12.IN_TABLE_BODY = 12] = "IN_TABLE_BODY", e12[e12.IN_ROW = 13] = "IN_ROW", e12[e12.IN_CELL = 14] = "IN_CELL", e12[e12.IN_SELECT = 15] = "IN_SELECT", e12[e12.IN_SELECT_IN_TABLE = 16] = "IN_SELECT_IN_TABLE", e12[e12.IN_TEMPLATE = 17] = "IN_TEMPLATE", e12[e12.AFTER_BODY = 18] = "AFTER_BODY", e12[e12.IN_FRAMESET = 19] = "IN_FRAMESET", e12[e12.AFTER_FRAMESET = 20] = "AFTER_FRAMESET", e12[e12.AFTER_AFTER_BODY = 21] = "AFTER_AFTER_BODY", e12[e12.AFTER_AFTER_FRAMESET = 22] = "AFTER_AFTER_FRAMESET";
})(fe || (fe = {}));
var bOe = {
  startLine: -1,
  startCol: -1,
  startOffset: -1,
  endLine: -1,
  endCol: -1,
  endOffset: -1
};
var yY = /* @__PURE__ */ new Set([D.TAG_ID.TABLE, D.TAG_ID.TBODY, D.TAG_ID.TFOOT, D.TAG_ID.THEAD, D.TAG_ID.TR]);
var c3 = {
  scriptingEnabled: true,
  sourceCodeLocationInfo: false,
  treeAdapter: gOe.defaultTreeAdapter,
  onParseError: null
};
var TOe = function() {
  function e12(t, r, n = null, i = null) {
    hOe(this, e12), this.fragmentContext = n, this.scriptHandler = i, this.currentToken = null, this.stopped = false, this.insertionMode = fe.INITIAL, this.originalInsertionMode = fe.INITIAL, this.headElement = null, this.formElement = null, this.currentNotInHTML = false, this.tmplInsertionModeStack = [], this.pendingCharacterTokens = [], this.hasNonWhitespacePendingCharacterToken = false, this.framesetOk = true, this.skipNextNewLine = false, this.fosterParentingEnabled = false, this.options = Object.assign(Object.assign({}, c3), t), this.treeAdapter = this.options.treeAdapter, this.onParseError = this.options.onParseError, this.onParseError && (this.options.sourceCodeLocationInfo = true), this.document = r ?? this.treeAdapter.createDocument(), this.tokenizer = new fi.Tokenizer(this.options, this), this.activeFormattingElements = new s3.FormattingElementList(this.treeAdapter), this.fragmentContextID = n ? (0, D.getTagID)(this.treeAdapter.getTagName(n)) : D.TAG_ID.UNKNOWN, this._setContextModes(n ?? this.document, this.fragmentContextID), this.openElements = new mOe.OpenElementStack(this.document, this.treeAdapter, this);
  }
  return fOe(e12, [{
    key: "getFragment",
    value: function() {
      const r = this.treeAdapter.getFirstChild(this.document), n = this.treeAdapter.createDocumentFragment();
      return this._adoptNodes(r, n), n;
    }
    //Errors
  }, {
    key: "_err",
    value: function(r, n, i) {
      var o;
      if (!this.onParseError)
        return;
      const a = (o = r.location) !== null && o !== void 0 ? o : bOe, s = {
        code: n,
        startLine: a.startLine,
        startCol: a.startCol,
        startOffset: a.startOffset,
        endLine: i ? a.startLine : a.endLine,
        endCol: i ? a.startCol : a.endCol,
        endOffset: i ? a.startOffset : a.endOffset
      };
      this.onParseError(s);
    }
    //Stack events
  }, {
    key: "onItemPush",
    value: function(r, n, i) {
      var o, a;
      (a = (o = this.treeAdapter).onItemPush) === null || a === void 0 || a.call(o, r), i && this.openElements.stackTop > 0 && this._setContextModes(r, n);
    }
  }, {
    key: "onItemPop",
    value: function(r, n) {
      var i, o;
      if (this.options.sourceCodeLocationInfo && this._setEndLocation(r, this.currentToken), (o = (i = this.treeAdapter).onItemPop) === null || o === void 0 || o.call(i, r, this.openElements.current), n) {
        let a, s;
        this.openElements.stackTop === 0 && this.fragmentContext ? (a = this.fragmentContext, s = this.fragmentContextID) : {
          current: a,
          currentTagId: s
        } = this.openElements, this._setContextModes(a, s);
      }
    }
  }, {
    key: "_setContextModes",
    value: function(r, n) {
      const i = r === this.document || this.treeAdapter.getNamespaceURI(r) === D.NS.HTML;
      this.currentNotInHTML = !i, this.tokenizer.inForeignNode = !i && !this._isIntegrationPoint(n, r);
    }
  }, {
    key: "_switchToTextParsing",
    value: function(r, n) {
      this._insertElement(r, D.NS.HTML), this.tokenizer.state = n, this.originalInsertionMode = this.insertionMode, this.insertionMode = fe.TEXT;
    }
  }, {
    key: "switchToPlaintextParsing",
    value: function() {
      this.insertionMode = fe.TEXT, this.originalInsertionMode = fe.IN_BODY, this.tokenizer.state = fi.TokenizerMode.PLAINTEXT;
    }
    //Fragment parsing
  }, {
    key: "_getAdjustedCurrentElement",
    value: function() {
      return this.openElements.stackTop === 0 && this.fragmentContext ? this.fragmentContext : this.openElements.current;
    }
  }, {
    key: "_findFormInFragmentContext",
    value: function() {
      let r = this.fragmentContext;
      for (; r; ) {
        if (this.treeAdapter.getTagName(r) === D.TAG_NAMES.FORM) {
          this.formElement = r;
          break;
        }
        r = this.treeAdapter.getParentNode(r);
      }
    }
  }, {
    key: "_initTokenizerForFragmentParsing",
    value: function() {
      if (!(!this.fragmentContext || this.treeAdapter.getNamespaceURI(this.fragmentContext) !== D.NS.HTML))
        switch (this.fragmentContextID) {
          case D.TAG_ID.TITLE:
          case D.TAG_ID.TEXTAREA: {
            this.tokenizer.state = fi.TokenizerMode.RCDATA;
            break;
          }
          case D.TAG_ID.STYLE:
          case D.TAG_ID.XMP:
          case D.TAG_ID.IFRAME:
          case D.TAG_ID.NOEMBED:
          case D.TAG_ID.NOFRAMES:
          case D.TAG_ID.NOSCRIPT: {
            this.tokenizer.state = fi.TokenizerMode.RAWTEXT;
            break;
          }
          case D.TAG_ID.SCRIPT: {
            this.tokenizer.state = fi.TokenizerMode.SCRIPT_DATA;
            break;
          }
          case D.TAG_ID.PLAINTEXT: {
            this.tokenizer.state = fi.TokenizerMode.PLAINTEXT;
            break;
          }
        }
    }
    //Tree mutation
  }, {
    key: "_setDocumentType",
    value: function(r) {
      const n = r.name || "", i = r.publicId || "", o = r.systemId || "";
      if (this.treeAdapter.setDocumentType(this.document, n, i, o), r.location) {
        const s = this.treeAdapter.getChildNodes(this.document).find((l) => this.treeAdapter.isDocumentTypeNode(l));
        s && this.treeAdapter.setNodeSourceCodeLocation(s, r.location);
      }
    }
  }, {
    key: "_attachElementToTree",
    value: function(r, n) {
      if (this.options.sourceCodeLocationInfo) {
        const i = n && Object.assign(Object.assign({}, n), {
          startTag: n
        });
        this.treeAdapter.setNodeSourceCodeLocation(r, i);
      }
      if (this._shouldFosterParentOnInsertion())
        this._fosterParentElement(r);
      else {
        const i = this.openElements.currentTmplContentOrNode;
        this.treeAdapter.appendChild(i, r);
      }
    }
  }, {
    key: "_appendElement",
    value: function(r, n) {
      const i = this.treeAdapter.createElement(r.tagName, n, r.attrs);
      this._attachElementToTree(i, r.location);
    }
  }, {
    key: "_insertElement",
    value: function(r, n) {
      const i = this.treeAdapter.createElement(r.tagName, n, r.attrs);
      this._attachElementToTree(i, r.location), this.openElements.push(i, r.tagID);
    }
  }, {
    key: "_insertFakeElement",
    value: function(r, n) {
      const i = this.treeAdapter.createElement(r, D.NS.HTML, []);
      this._attachElementToTree(i, null), this.openElements.push(i, n);
    }
  }, {
    key: "_insertTemplate",
    value: function(r) {
      const n = this.treeAdapter.createElement(r.tagName, D.NS.HTML, r.attrs), i = this.treeAdapter.createDocumentFragment();
      this.treeAdapter.setTemplateContent(n, i), this._attachElementToTree(n, r.location), this.openElements.push(n, r.tagID), this.options.sourceCodeLocationInfo && this.treeAdapter.setNodeSourceCodeLocation(i, null);
    }
  }, {
    key: "_insertFakeRootElement",
    value: function() {
      const r = this.treeAdapter.createElement(D.TAG_NAMES.HTML, D.NS.HTML, []);
      this.options.sourceCodeLocationInfo && this.treeAdapter.setNodeSourceCodeLocation(r, null), this.treeAdapter.appendChild(this.openElements.current, r), this.openElements.push(r, D.TAG_ID.HTML);
    }
  }, {
    key: "_appendCommentNode",
    value: function(r, n) {
      const i = this.treeAdapter.createCommentNode(r.data);
      this.treeAdapter.appendChild(n, i), this.options.sourceCodeLocationInfo && this.treeAdapter.setNodeSourceCodeLocation(i, r.location);
    }
  }, {
    key: "_insertCharacters",
    value: function(r) {
      let n, i;
      if (this._shouldFosterParentOnInsertion() ? ({
        parent: n,
        beforeElement: i
      } = this._findFosterParentingLocation(), i ? this.treeAdapter.insertTextBefore(n, r.chars, i) : this.treeAdapter.insertText(n, r.chars)) : (n = this.openElements.currentTmplContentOrNode, this.treeAdapter.insertText(n, r.chars)), !r.location)
        return;
      const o = this.treeAdapter.getChildNodes(n), a = i ? o.lastIndexOf(i) : o.length, s = o[a - 1];
      if (this.treeAdapter.getNodeSourceCodeLocation(s)) {
        const {
          endLine: u,
          endCol: c,
          endOffset: f
        } = r.location;
        this.treeAdapter.updateNodeSourceCodeLocation(s, {
          endLine: u,
          endCol: c,
          endOffset: f
        });
      } else
        this.options.sourceCodeLocationInfo && this.treeAdapter.setNodeSourceCodeLocation(s, r.location);
    }
  }, {
    key: "_adoptNodes",
    value: function(r, n) {
      for (let i = this.treeAdapter.getFirstChild(r); i; i = this.treeAdapter.getFirstChild(r))
        this.treeAdapter.detachNode(i), this.treeAdapter.appendChild(n, i);
    }
  }, {
    key: "_setEndLocation",
    value: function(r, n) {
      if (this.treeAdapter.getNodeSourceCodeLocation(r) && n.location) {
        const i = n.location, o = this.treeAdapter.getTagName(r), a = (
          // NOTE: For cases like <p> <p> </p> - First 'p' closes without a closing
          // tag and for cases like <td> <p> </td> - 'p' closes without a closing tag.
          n.type === fn.TokenType.END_TAG && o === n.tagName ? {
            endTag: Object.assign({}, i),
            endLine: i.endLine,
            endCol: i.endCol,
            endOffset: i.endOffset
          } : {
            endLine: i.startLine,
            endCol: i.startCol,
            endOffset: i.startOffset
          }
        );
        this.treeAdapter.updateNodeSourceCodeLocation(r, a);
      }
    }
    //Token processing
  }, {
    key: "shouldProcessStartTagTokenInForeignContent",
    value: function(r) {
      if (!this.currentNotInHTML)
        return false;
      let n, i;
      return this.openElements.stackTop === 0 && this.fragmentContext ? (n = this.fragmentContext, i = this.fragmentContextID) : {
        current: n,
        currentTagId: i
      } = this.openElements, r.tagID === D.TAG_ID.SVG && this.treeAdapter.getTagName(n) === D.TAG_NAMES.ANNOTATION_XML && this.treeAdapter.getNamespaceURI(n) === D.NS.MATHML ? false : (
        // Check that `current` is not an integration point for HTML or MathML elements.
        this.tokenizer.inForeignNode || // If it _is_ an integration point, then we might have to check that it is not an HTML
        // integration point.
        (r.tagID === D.TAG_ID.MGLYPH || r.tagID === D.TAG_ID.MALIGNMARK) && !this._isIntegrationPoint(i, n, D.NS.HTML)
      );
    }
  }, {
    key: "_processToken",
    value: function(r) {
      switch (r.type) {
        case fn.TokenType.CHARACTER: {
          this.onCharacter(r);
          break;
        }
        case fn.TokenType.NULL_CHARACTER: {
          this.onNullCharacter(r);
          break;
        }
        case fn.TokenType.COMMENT: {
          this.onComment(r);
          break;
        }
        case fn.TokenType.DOCTYPE: {
          this.onDoctype(r);
          break;
        }
        case fn.TokenType.START_TAG: {
          this._processStartTag(r);
          break;
        }
        case fn.TokenType.END_TAG: {
          this.onEndTag(r);
          break;
        }
        case fn.TokenType.EOF: {
          this.onEof(r);
          break;
        }
        case fn.TokenType.WHITESPACE_CHARACTER: {
          this.onWhitespaceCharacter(r);
          break;
        }
      }
    }
    //Integration points
  }, {
    key: "_isIntegrationPoint",
    value: function(r, n, i) {
      const o = this.treeAdapter.getNamespaceURI(n), a = this.treeAdapter.getAttrList(n);
      return Sa.isIntegrationPoint(r, o, a, i);
    }
    //Active formatting elements reconstruction
  }, {
    key: "_reconstructActiveFormattingElements",
    value: function() {
      const r = this.activeFormattingElements.entries.length;
      if (r) {
        const n = this.activeFormattingElements.entries.findIndex((o) => o.type === s3.EntryType.Marker || this.openElements.contains(o.element)), i = n < 0 ? r - 1 : n - 1;
        for (let o = i; o >= 0; o--) {
          const a = this.activeFormattingElements.entries[o];
          this._insertElement(a.token, this.treeAdapter.getNamespaceURI(a.element)), a.element = this.openElements.current;
        }
      }
    }
    //Close elements
  }, {
    key: "_closeTableCell",
    value: function() {
      this.openElements.generateImpliedEndTags(), this.openElements.popUntilTableCellPopped(), this.activeFormattingElements.clearToLastMarker(), this.insertionMode = fe.IN_ROW;
    }
  }, {
    key: "_closePElement",
    value: function() {
      this.openElements.generateImpliedEndTagsWithExclusion(D.TAG_ID.P), this.openElements.popUntilTagNamePopped(D.TAG_ID.P);
    }
    //Insertion modes
  }, {
    key: "_resetInsertionMode",
    value: function() {
      for (let r = this.openElements.stackTop; r >= 0; r--)
        switch (r === 0 && this.fragmentContext ? this.fragmentContextID : this.openElements.tagIDs[r]) {
          case D.TAG_ID.TR: {
            this.insertionMode = fe.IN_ROW;
            return;
          }
          case D.TAG_ID.TBODY:
          case D.TAG_ID.THEAD:
          case D.TAG_ID.TFOOT: {
            this.insertionMode = fe.IN_TABLE_BODY;
            return;
          }
          case D.TAG_ID.CAPTION: {
            this.insertionMode = fe.IN_CAPTION;
            return;
          }
          case D.TAG_ID.COLGROUP: {
            this.insertionMode = fe.IN_COLUMN_GROUP;
            return;
          }
          case D.TAG_ID.TABLE: {
            this.insertionMode = fe.IN_TABLE;
            return;
          }
          case D.TAG_ID.BODY: {
            this.insertionMode = fe.IN_BODY;
            return;
          }
          case D.TAG_ID.FRAMESET: {
            this.insertionMode = fe.IN_FRAMESET;
            return;
          }
          case D.TAG_ID.SELECT: {
            this._resetInsertionModeForSelect(r);
            return;
          }
          case D.TAG_ID.TEMPLATE: {
            this.insertionMode = this.tmplInsertionModeStack[0];
            return;
          }
          case D.TAG_ID.HTML: {
            this.insertionMode = this.headElement ? fe.AFTER_HEAD : fe.BEFORE_HEAD;
            return;
          }
          case D.TAG_ID.TD:
          case D.TAG_ID.TH: {
            if (r > 0) {
              this.insertionMode = fe.IN_CELL;
              return;
            }
            break;
          }
          case D.TAG_ID.HEAD: {
            if (r > 0) {
              this.insertionMode = fe.IN_HEAD;
              return;
            }
            break;
          }
        }
      this.insertionMode = fe.IN_BODY;
    }
  }, {
    key: "_resetInsertionModeForSelect",
    value: function(r) {
      if (r > 0)
        for (let n = r - 1; n > 0; n--) {
          const i = this.openElements.tagIDs[n];
          if (i === D.TAG_ID.TEMPLATE)
            break;
          if (i === D.TAG_ID.TABLE) {
            this.insertionMode = fe.IN_SELECT_IN_TABLE;
            return;
          }
        }
      this.insertionMode = fe.IN_SELECT;
    }
    //Foster parenting
  }, {
    key: "_isElementCausesFosterParenting",
    value: function(r) {
      return yY.has(r);
    }
  }, {
    key: "_shouldFosterParentOnInsertion",
    value: function() {
      return this.fosterParentingEnabled && this._isElementCausesFosterParenting(this.openElements.currentTagId);
    }
  }, {
    key: "_findFosterParentingLocation",
    value: function() {
      for (let r = this.openElements.stackTop; r >= 0; r--) {
        const n = this.openElements.items[r];
        switch (this.openElements.tagIDs[r]) {
          case D.TAG_ID.TEMPLATE: {
            if (this.treeAdapter.getNamespaceURI(n) === D.NS.HTML)
              return {
                parent: this.treeAdapter.getTemplateContent(n),
                beforeElement: null
              };
            break;
          }
          case D.TAG_ID.TABLE: {
            const i = this.treeAdapter.getParentNode(n);
            return i ? {
              parent: i,
              beforeElement: n
            } : {
              parent: this.openElements.items[r - 1],
              beforeElement: null
            };
          }
        }
      }
      return {
        parent: this.openElements.items[0],
        beforeElement: null
      };
    }
  }, {
    key: "_fosterParentElement",
    value: function(r) {
      const n = this._findFosterParentingLocation();
      n.beforeElement ? this.treeAdapter.insertBefore(n.parent, r, n.beforeElement) : this.treeAdapter.appendChild(n.parent, r);
    }
    //Special elements
  }, {
    key: "_isSpecialElement",
    value: function(r, n) {
      const i = this.treeAdapter.getNamespaceURI(r);
      return D.SPECIAL_ELEMENTS[i].has(n);
    }
  }, {
    key: "onCharacter",
    value: function(r) {
      if (this.skipNextNewLine = false, this.tokenizer.inForeignNode) {
        ZIe(this, r);
        return;
      }
      switch (this.insertionMode) {
        case fe.INITIAL: {
          nm(this, r);
          break;
        }
        case fe.BEFORE_HTML: {
          fg(this, r);
          break;
        }
        case fe.BEFORE_HEAD: {
          dg(this, r);
          break;
        }
        case fe.IN_HEAD: {
          pg(this, r);
          break;
        }
        case fe.IN_HEAD_NO_SCRIPT: {
          mg(this, r);
          break;
        }
        case fe.AFTER_HEAD: {
          gg(this, r);
          break;
        }
        case fe.IN_BODY:
        case fe.IN_CAPTION:
        case fe.IN_CELL:
        case fe.IN_TEMPLATE: {
          bY(this, r);
          break;
        }
        case fe.TEXT:
        case fe.IN_SELECT:
        case fe.IN_SELECT_IN_TABLE: {
          this._insertCharacters(r);
          break;
        }
        case fe.IN_TABLE:
        case fe.IN_TABLE_BODY:
        case fe.IN_ROW: {
          aO(this, r);
          break;
        }
        case fe.IN_TABLE_TEXT: {
          OY(this, r);
          break;
        }
        case fe.IN_COLUMN_GROUP: {
          J0(this, r);
          break;
        }
        case fe.AFTER_BODY: {
          eT(this, r);
          break;
        }
        case fe.AFTER_AFTER_BODY: {
          yb(this, r);
          break;
        }
      }
    }
  }, {
    key: "onNullCharacter",
    value: function(r) {
      if (this.skipNextNewLine = false, this.tokenizer.inForeignNode) {
        KIe(this, r);
        return;
      }
      switch (this.insertionMode) {
        case fe.INITIAL: {
          nm(this, r);
          break;
        }
        case fe.BEFORE_HTML: {
          fg(this, r);
          break;
        }
        case fe.BEFORE_HEAD: {
          dg(this, r);
          break;
        }
        case fe.IN_HEAD: {
          pg(this, r);
          break;
        }
        case fe.IN_HEAD_NO_SCRIPT: {
          mg(this, r);
          break;
        }
        case fe.AFTER_HEAD: {
          gg(this, r);
          break;
        }
        case fe.TEXT: {
          this._insertCharacters(r);
          break;
        }
        case fe.IN_TABLE:
        case fe.IN_TABLE_BODY:
        case fe.IN_ROW: {
          aO(this, r);
          break;
        }
        case fe.IN_COLUMN_GROUP: {
          J0(this, r);
          break;
        }
        case fe.AFTER_BODY: {
          eT(this, r);
          break;
        }
        case fe.AFTER_AFTER_BODY: {
          yb(this, r);
          break;
        }
      }
    }
  }, {
    key: "onComment",
    value: function(r) {
      if (this.skipNextNewLine = false, this.currentNotInHTML) {
        iC(this, r);
        return;
      }
      switch (this.insertionMode) {
        case fe.INITIAL:
        case fe.BEFORE_HTML:
        case fe.BEFORE_HEAD:
        case fe.IN_HEAD:
        case fe.IN_HEAD_NO_SCRIPT:
        case fe.AFTER_HEAD:
        case fe.IN_BODY:
        case fe.IN_TABLE:
        case fe.IN_CAPTION:
        case fe.IN_COLUMN_GROUP:
        case fe.IN_TABLE_BODY:
        case fe.IN_ROW:
        case fe.IN_CELL:
        case fe.IN_SELECT:
        case fe.IN_SELECT_IN_TABLE:
        case fe.IN_TEMPLATE:
        case fe.IN_FRAMESET:
        case fe.AFTER_FRAMESET: {
          iC(this, r);
          break;
        }
        case fe.IN_TABLE_TEXT: {
          im(this, r);
          break;
        }
        case fe.AFTER_BODY: {
          POe(this, r);
          break;
        }
        case fe.AFTER_AFTER_BODY:
        case fe.AFTER_AFTER_FRAMESET: {
          COe(this, r);
          break;
        }
      }
    }
  }, {
    key: "onDoctype",
    value: function(r) {
      switch (this.skipNextNewLine = false, this.insertionMode) {
        case fe.INITIAL: {
          xOe(this, r);
          break;
        }
        case fe.BEFORE_HEAD:
        case fe.IN_HEAD:
        case fe.IN_HEAD_NO_SCRIPT:
        case fe.AFTER_HEAD: {
          this._err(r, Gn.ERR.misplacedDoctype);
          break;
        }
        case fe.IN_TABLE_TEXT: {
          im(this, r);
          break;
        }
      }
    }
  }, {
    key: "onStartTag",
    value: function(r) {
      this.skipNextNewLine = false, this.currentToken = r, this._processStartTag(r), r.selfClosing && !r.ackSelfClosing && this._err(r, Gn.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus);
    }
    /**
     * Processes a given start tag.
     *
     * `onStartTag` checks if a self-closing tag was recognized. When a token
     * is moved inbetween multiple insertion modes, this check for self-closing
     * could lead to false positives. To avoid this, `_processStartTag` is used
     * for nested calls.
     *
     * @param token The token to process.
     */
  }, {
    key: "_processStartTag",
    value: function(r) {
      this.shouldProcessStartTagTokenInForeignContent(r) ? QIe(this, r) : this._startTagOutsideForeignContent(r);
    }
  }, {
    key: "_startTagOutsideForeignContent",
    value: function(r) {
      switch (this.insertionMode) {
        case fe.INITIAL: {
          nm(this, r);
          break;
        }
        case fe.BEFORE_HTML: {
          kOe(this, r);
          break;
        }
        case fe.BEFORE_HEAD: {
          ROe(this, r);
          break;
        }
        case fe.IN_HEAD: {
          ca(this, r);
          break;
        }
        case fe.IN_HEAD_NO_SCRIPT: {
          LOe(this, r);
          break;
        }
        case fe.AFTER_HEAD: {
          FOe(this, r);
          break;
        }
        case fe.IN_BODY: {
          ai(this, r);
          break;
        }
        case fe.IN_TABLE: {
          Cd(this, r);
          break;
        }
        case fe.IN_TABLE_TEXT: {
          im(this, r);
          break;
        }
        case fe.IN_CAPTION: {
          NIe(this, r);
          break;
        }
        case fe.IN_COLUMN_GROUP: {
          jN(this, r);
          break;
        }
        case fe.IN_TABLE_BODY: {
          sS(this, r);
          break;
        }
        case fe.IN_ROW: {
          lS(this, r);
          break;
        }
        case fe.IN_CELL: {
          BIe(this, r);
          break;
        }
        case fe.IN_SELECT: {
          CY(this, r);
          break;
        }
        case fe.IN_SELECT_IN_TABLE: {
          $Ie(this, r);
          break;
        }
        case fe.IN_TEMPLATE: {
          UIe(this, r);
          break;
        }
        case fe.AFTER_BODY: {
          GIe(this, r);
          break;
        }
        case fe.IN_FRAMESET: {
          zIe(this, r);
          break;
        }
        case fe.AFTER_FRAMESET: {
          XIe(this, r);
          break;
        }
        case fe.AFTER_AFTER_BODY: {
          YIe(this, r);
          break;
        }
        case fe.AFTER_AFTER_FRAMESET: {
          qIe(this, r);
          break;
        }
      }
    }
  }, {
    key: "onEndTag",
    value: function(r) {
      this.skipNextNewLine = false, this.currentToken = r, this.currentNotInHTML ? JIe(this, r) : this._endTagOutsideForeignContent(r);
    }
  }, {
    key: "_endTagOutsideForeignContent",
    value: function(r) {
      switch (this.insertionMode) {
        case fe.INITIAL: {
          nm(this, r);
          break;
        }
        case fe.BEFORE_HTML: {
          DOe(this, r);
          break;
        }
        case fe.BEFORE_HEAD: {
          NOe(this, r);
          break;
        }
        case fe.IN_HEAD: {
          MOe(this, r);
          break;
        }
        case fe.IN_HEAD_NO_SCRIPT: {
          BOe(this, r);
          break;
        }
        case fe.AFTER_HEAD: {
          $Oe(this, r);
          break;
        }
        case fe.IN_BODY: {
          aS(this, r);
          break;
        }
        case fe.TEXT: {
          wIe(this, r);
          break;
        }
        case fe.IN_TABLE: {
          fv(this, r);
          break;
        }
        case fe.IN_TABLE_TEXT: {
          im(this, r);
          break;
        }
        case fe.IN_CAPTION: {
          MIe(this, r);
          break;
        }
        case fe.IN_COLUMN_GROUP: {
          LIe(this, r);
          break;
        }
        case fe.IN_TABLE_BODY: {
          oC(this, r);
          break;
        }
        case fe.IN_ROW: {
          PY(this, r);
          break;
        }
        case fe.IN_CELL: {
          FIe(this, r);
          break;
        }
        case fe.IN_SELECT: {
          xY(this, r);
          break;
        }
        case fe.IN_SELECT_IN_TABLE: {
          HIe(this, r);
          break;
        }
        case fe.IN_TEMPLATE: {
          jIe(this, r);
          break;
        }
        case fe.AFTER_BODY: {
          DY(this, r);
          break;
        }
        case fe.IN_FRAMESET: {
          VIe(this, r);
          break;
        }
        case fe.AFTER_FRAMESET: {
          WIe(this, r);
          break;
        }
        case fe.AFTER_AFTER_BODY: {
          yb(this, r);
          break;
        }
      }
    }
  }, {
    key: "onEof",
    value: function(r) {
      switch (this.insertionMode) {
        case fe.INITIAL: {
          nm(this, r);
          break;
        }
        case fe.BEFORE_HTML: {
          fg(this, r);
          break;
        }
        case fe.BEFORE_HEAD: {
          dg(this, r);
          break;
        }
        case fe.IN_HEAD: {
          pg(this, r);
          break;
        }
        case fe.IN_HEAD_NO_SCRIPT: {
          mg(this, r);
          break;
        }
        case fe.AFTER_HEAD: {
          gg(this, r);
          break;
        }
        case fe.IN_BODY:
        case fe.IN_TABLE:
        case fe.IN_CAPTION:
        case fe.IN_COLUMN_GROUP:
        case fe.IN_TABLE_BODY:
        case fe.IN_ROW:
        case fe.IN_CELL:
        case fe.IN_SELECT:
        case fe.IN_SELECT_IN_TABLE: {
          wY(this, r);
          break;
        }
        case fe.TEXT: {
          AIe(this, r);
          break;
        }
        case fe.IN_TABLE_TEXT: {
          im(this, r);
          break;
        }
        case fe.IN_TEMPLATE: {
          kY(this, r);
          break;
        }
        case fe.AFTER_BODY:
        case fe.IN_FRAMESET:
        case fe.AFTER_FRAMESET:
        case fe.AFTER_AFTER_BODY:
        case fe.AFTER_AFTER_FRAMESET: {
          UN(this, r);
          break;
        }
      }
    }
  }, {
    key: "onWhitespaceCharacter",
    value: function(r) {
      if (this.skipNextNewLine && (this.skipNextNewLine = false, r.chars.charCodeAt(0) === vY.CODE_POINTS.LINE_FEED)) {
        if (r.chars.length === 1)
          return;
        r.chars = r.chars.substr(1);
      }
      if (this.tokenizer.inForeignNode) {
        this._insertCharacters(r);
        return;
      }
      switch (this.insertionMode) {
        case fe.IN_HEAD:
        case fe.IN_HEAD_NO_SCRIPT:
        case fe.AFTER_HEAD:
        case fe.TEXT:
        case fe.IN_COLUMN_GROUP:
        case fe.IN_SELECT:
        case fe.IN_SELECT_IN_TABLE:
        case fe.IN_FRAMESET:
        case fe.AFTER_FRAMESET: {
          this._insertCharacters(r);
          break;
        }
        case fe.IN_BODY:
        case fe.IN_CAPTION:
        case fe.IN_CELL:
        case fe.IN_TEMPLATE:
        case fe.AFTER_BODY:
        case fe.AFTER_AFTER_BODY:
        case fe.AFTER_AFTER_FRAMESET: {
          _Y(this, r);
          break;
        }
        case fe.IN_TABLE:
        case fe.IN_TABLE_BODY:
        case fe.IN_ROW: {
          aO(this, r);
          break;
        }
        case fe.IN_TABLE_TEXT: {
          AY(this, r);
          break;
        }
      }
    }
  }], [{
    key: "parse",
    value: function(r, n) {
      const i = new this(n);
      return i.tokenizer.write(r, true), i.document;
    }
  }, {
    key: "getFragmentParser",
    value: function(r, n) {
      const i = Object.assign(Object.assign({}, c3), n);
      r ?? (r = i.treeAdapter.createElement(D.TAG_NAMES.TEMPLATE, D.NS.HTML, []));
      const o = i.treeAdapter.createElement("documentmock", D.NS.HTML, []), a = new this(i, o, r);
      return a.fragmentContextID === D.TAG_ID.TEMPLATE && a.tmplInsertionModeStack.unshift(fe.IN_TEMPLATE), a._initTokenizerForFragmentParsing(), a._insertFakeRootElement(), a._resetInsertionMode(), a._findFormInFragmentContext(), a;
    }
  }]), e12;
}();
hv.Parser = TOe;
function EOe(e12, t) {
  let r = e12.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);
  return r ? e12.openElements.contains(r.element) ? e12.openElements.hasInScope(t.tagID) || (r = null) : (e12.activeFormattingElements.removeEntry(r), r = null) : SY(e12, t), r;
}
function SOe(e12, t) {
  let r = null, n = e12.openElements.stackTop;
  for (; n >= 0; n--) {
    const i = e12.openElements.items[n];
    if (i === t.element)
      break;
    e12._isSpecialElement(i, e12.openElements.tagIDs[n]) && (r = i);
  }
  return r || (e12.openElements.shortenToLength(n < 0 ? 0 : n), e12.activeFormattingElements.removeEntry(t)), r;
}
function wOe(e12, t, r) {
  let n = t, i = e12.openElements.getCommonAncestor(t);
  for (let o = 0, a = i; a !== r; o++, a = i) {
    i = e12.openElements.getCommonAncestor(a);
    const s = e12.activeFormattingElements.getElementEntry(a), l = s && o >= _Oe;
    !s || l ? (l && e12.activeFormattingElements.removeEntry(s), e12.openElements.remove(a)) : (a = AOe(e12, s), n === t && (e12.activeFormattingElements.bookmark = s), e12.treeAdapter.detachNode(n), e12.treeAdapter.appendChild(a, n), n = a);
  }
  return n;
}
function AOe(e12, t) {
  const r = e12.treeAdapter.getNamespaceURI(t.element), n = e12.treeAdapter.createElement(t.token.tagName, r, t.token.attrs);
  return e12.openElements.replace(t.element, n), t.element = n, n;
}
function OOe(e12, t, r) {
  const n = e12.treeAdapter.getTagName(t), i = (0, D.getTagID)(n);
  if (e12._isElementCausesFosterParenting(i))
    e12._fosterParentElement(r);
  else {
    const o = e12.treeAdapter.getNamespaceURI(t);
    i === D.TAG_ID.TEMPLATE && o === D.NS.HTML && (t = e12.treeAdapter.getTemplateContent(t)), e12.treeAdapter.appendChild(t, r);
  }
}
function IOe(e12, t, r) {
  const n = e12.treeAdapter.getNamespaceURI(r.element), {
    token: i
  } = r, o = e12.treeAdapter.createElement(i.tagName, n, i.attrs);
  e12._adoptNodes(t, o), e12.treeAdapter.appendChild(t, o), e12.activeFormattingElements.insertElementAfterBookmark(o, i), e12.activeFormattingElements.removeEntry(r), e12.openElements.remove(r.element), e12.openElements.insertAfter(t, o, i.tagID);
}
function HN(e12, t) {
  for (let r = 0; r < yOe; r++) {
    const n = EOe(e12, t);
    if (!n)
      break;
    const i = SOe(e12, n);
    if (!i)
      break;
    e12.activeFormattingElements.bookmark = n;
    const o = wOe(e12, i, n.element), a = e12.openElements.getCommonAncestor(n.element);
    e12.treeAdapter.detachNode(o), a && OOe(e12, a, o), IOe(e12, i, n);
  }
}
function iC(e12, t) {
  e12._appendCommentNode(t, e12.openElements.currentTmplContentOrNode);
}
function POe(e12, t) {
  e12._appendCommentNode(t, e12.openElements.items[0]);
}
function COe(e12, t) {
  e12._appendCommentNode(t, e12.document);
}
function UN(e12, t) {
  if (e12.stopped = true, t.location) {
    const r = e12.fragmentContext ? 0 : 2;
    for (let n = e12.openElements.stackTop; n >= r; n--)
      e12._setEndLocation(e12.openElements.items[n], t);
    if (!e12.fragmentContext && e12.openElements.stackTop >= 0) {
      const n = e12.openElements.items[0], i = e12.treeAdapter.getNodeSourceCodeLocation(n);
      if (i && !i.endTag && (e12._setEndLocation(n, t), e12.openElements.stackTop >= 1)) {
        const o = e12.openElements.items[1], a = e12.treeAdapter.getNodeSourceCodeLocation(o);
        a && !a.endTag && e12._setEndLocation(o, t);
      }
    }
  }
}
function xOe(e12, t) {
  e12._setDocumentType(t);
  const r = t.forceQuirks ? D.DOCUMENT_MODE.QUIRKS : l3.getDocumentMode(t);
  l3.isConforming(t) || e12._err(t, Gn.ERR.nonConformingDoctype), e12.treeAdapter.setDocumentMode(e12.document, r), e12.insertionMode = fe.BEFORE_HTML;
}
function nm(e12, t) {
  e12._err(t, Gn.ERR.missingDoctype, true), e12.treeAdapter.setDocumentMode(e12.document, D.DOCUMENT_MODE.QUIRKS), e12.insertionMode = fe.BEFORE_HTML, e12._processToken(t);
}
function kOe(e12, t) {
  t.tagID === D.TAG_ID.HTML ? (e12._insertElement(t, D.NS.HTML), e12.insertionMode = fe.BEFORE_HEAD) : fg(e12, t);
}
function DOe(e12, t) {
  const r = t.tagID;
  (r === D.TAG_ID.HTML || r === D.TAG_ID.HEAD || r === D.TAG_ID.BODY || r === D.TAG_ID.BR) && fg(e12, t);
}
function fg(e12, t) {
  e12._insertFakeRootElement(), e12.insertionMode = fe.BEFORE_HEAD, e12._processToken(t);
}
function ROe(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.HTML: {
      ai(e12, t);
      break;
    }
    case D.TAG_ID.HEAD: {
      e12._insertElement(t, D.NS.HTML), e12.headElement = e12.openElements.current, e12.insertionMode = fe.IN_HEAD;
      break;
    }
    default:
      dg(e12, t);
  }
}
function NOe(e12, t) {
  const r = t.tagID;
  r === D.TAG_ID.HEAD || r === D.TAG_ID.BODY || r === D.TAG_ID.HTML || r === D.TAG_ID.BR ? dg(e12, t) : e12._err(t, Gn.ERR.endTagWithoutMatchingOpenElement);
}
function dg(e12, t) {
  e12._insertFakeElement(D.TAG_NAMES.HEAD, D.TAG_ID.HEAD), e12.headElement = e12.openElements.current, e12.insertionMode = fe.IN_HEAD, e12._processToken(t);
}
function ca(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.HTML: {
      ai(e12, t);
      break;
    }
    case D.TAG_ID.BASE:
    case D.TAG_ID.BASEFONT:
    case D.TAG_ID.BGSOUND:
    case D.TAG_ID.LINK:
    case D.TAG_ID.META: {
      e12._appendElement(t, D.NS.HTML), t.ackSelfClosing = true;
      break;
    }
    case D.TAG_ID.TITLE: {
      e12._switchToTextParsing(t, fi.TokenizerMode.RCDATA);
      break;
    }
    case D.TAG_ID.NOSCRIPT: {
      e12.options.scriptingEnabled ? e12._switchToTextParsing(t, fi.TokenizerMode.RAWTEXT) : (e12._insertElement(t, D.NS.HTML), e12.insertionMode = fe.IN_HEAD_NO_SCRIPT);
      break;
    }
    case D.TAG_ID.NOFRAMES:
    case D.TAG_ID.STYLE: {
      e12._switchToTextParsing(t, fi.TokenizerMode.RAWTEXT);
      break;
    }
    case D.TAG_ID.SCRIPT: {
      e12._switchToTextParsing(t, fi.TokenizerMode.SCRIPT_DATA);
      break;
    }
    case D.TAG_ID.TEMPLATE: {
      e12._insertTemplate(t), e12.activeFormattingElements.insertMarker(), e12.framesetOk = false, e12.insertionMode = fe.IN_TEMPLATE, e12.tmplInsertionModeStack.unshift(fe.IN_TEMPLATE);
      break;
    }
    case D.TAG_ID.HEAD: {
      e12._err(t, Gn.ERR.misplacedStartTagForHeadElement);
      break;
    }
    default:
      pg(e12, t);
  }
}
function MOe(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.HEAD: {
      e12.openElements.pop(), e12.insertionMode = fe.AFTER_HEAD;
      break;
    }
    case D.TAG_ID.BODY:
    case D.TAG_ID.BR:
    case D.TAG_ID.HTML: {
      pg(e12, t);
      break;
    }
    case D.TAG_ID.TEMPLATE: {
      oh(e12, t);
      break;
    }
    default:
      e12._err(t, Gn.ERR.endTagWithoutMatchingOpenElement);
  }
}
function oh(e12, t) {
  e12.openElements.tmplCount > 0 ? (e12.openElements.generateImpliedEndTagsThoroughly(), e12.openElements.currentTagId !== D.TAG_ID.TEMPLATE && e12._err(t, Gn.ERR.closingOfElementWithOpenChildElements), e12.openElements.popUntilTagNamePopped(D.TAG_ID.TEMPLATE), e12.activeFormattingElements.clearToLastMarker(), e12.tmplInsertionModeStack.shift(), e12._resetInsertionMode()) : e12._err(t, Gn.ERR.endTagWithoutMatchingOpenElement);
}
function pg(e12, t) {
  e12.openElements.pop(), e12.insertionMode = fe.AFTER_HEAD, e12._processToken(t);
}
function LOe(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.HTML: {
      ai(e12, t);
      break;
    }
    case D.TAG_ID.BASEFONT:
    case D.TAG_ID.BGSOUND:
    case D.TAG_ID.HEAD:
    case D.TAG_ID.LINK:
    case D.TAG_ID.META:
    case D.TAG_ID.NOFRAMES:
    case D.TAG_ID.STYLE: {
      ca(e12, t);
      break;
    }
    case D.TAG_ID.NOSCRIPT: {
      e12._err(t, Gn.ERR.nestedNoscriptInHead);
      break;
    }
    default:
      mg(e12, t);
  }
}
function BOe(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.NOSCRIPT: {
      e12.openElements.pop(), e12.insertionMode = fe.IN_HEAD;
      break;
    }
    case D.TAG_ID.BR: {
      mg(e12, t);
      break;
    }
    default:
      e12._err(t, Gn.ERR.endTagWithoutMatchingOpenElement);
  }
}
function mg(e12, t) {
  const r = t.type === fn.TokenType.EOF ? Gn.ERR.openElementsLeftAfterEof : Gn.ERR.disallowedContentInNoscriptInHead;
  e12._err(t, r), e12.openElements.pop(), e12.insertionMode = fe.IN_HEAD, e12._processToken(t);
}
function FOe(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.HTML: {
      ai(e12, t);
      break;
    }
    case D.TAG_ID.BODY: {
      e12._insertElement(t, D.NS.HTML), e12.framesetOk = false, e12.insertionMode = fe.IN_BODY;
      break;
    }
    case D.TAG_ID.FRAMESET: {
      e12._insertElement(t, D.NS.HTML), e12.insertionMode = fe.IN_FRAMESET;
      break;
    }
    case D.TAG_ID.BASE:
    case D.TAG_ID.BASEFONT:
    case D.TAG_ID.BGSOUND:
    case D.TAG_ID.LINK:
    case D.TAG_ID.META:
    case D.TAG_ID.NOFRAMES:
    case D.TAG_ID.SCRIPT:
    case D.TAG_ID.STYLE:
    case D.TAG_ID.TEMPLATE:
    case D.TAG_ID.TITLE: {
      e12._err(t, Gn.ERR.abandonedHeadElementChild), e12.openElements.push(e12.headElement, D.TAG_ID.HEAD), ca(e12, t), e12.openElements.remove(e12.headElement);
      break;
    }
    case D.TAG_ID.HEAD: {
      e12._err(t, Gn.ERR.misplacedStartTagForHeadElement);
      break;
    }
    default:
      gg(e12, t);
  }
}
function $Oe(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.BODY:
    case D.TAG_ID.HTML:
    case D.TAG_ID.BR: {
      gg(e12, t);
      break;
    }
    case D.TAG_ID.TEMPLATE: {
      oh(e12, t);
      break;
    }
    default:
      e12._err(t, Gn.ERR.endTagWithoutMatchingOpenElement);
  }
}
function gg(e12, t) {
  e12._insertFakeElement(D.TAG_NAMES.BODY, D.TAG_ID.BODY), e12.insertionMode = fe.IN_BODY, oS(e12, t);
}
function oS(e12, t) {
  switch (t.type) {
    case fn.TokenType.CHARACTER: {
      bY(e12, t);
      break;
    }
    case fn.TokenType.WHITESPACE_CHARACTER: {
      _Y(e12, t);
      break;
    }
    case fn.TokenType.COMMENT: {
      iC(e12, t);
      break;
    }
    case fn.TokenType.START_TAG: {
      ai(e12, t);
      break;
    }
    case fn.TokenType.END_TAG: {
      aS(e12, t);
      break;
    }
    case fn.TokenType.EOF: {
      wY(e12, t);
      break;
    }
  }
}
function _Y(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._insertCharacters(t);
}
function bY(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._insertCharacters(t), e12.framesetOk = false;
}
function HOe(e12, t) {
  e12.openElements.tmplCount === 0 && e12.treeAdapter.adoptAttributes(e12.openElements.items[0], t.attrs);
}
function UOe(e12, t) {
  const r = e12.openElements.tryPeekProperlyNestedBodyElement();
  r && e12.openElements.tmplCount === 0 && (e12.framesetOk = false, e12.treeAdapter.adoptAttributes(r, t.attrs));
}
function jOe(e12, t) {
  const r = e12.openElements.tryPeekProperlyNestedBodyElement();
  e12.framesetOk && r && (e12.treeAdapter.detachNode(r), e12.openElements.popAllUpToHtmlElement(), e12._insertElement(t, D.NS.HTML), e12.insertionMode = fe.IN_FRAMESET);
}
function GOe(e12, t) {
  e12.openElements.hasInButtonScope(D.TAG_ID.P) && e12._closePElement(), e12._insertElement(t, D.NS.HTML);
}
function zOe(e12, t) {
  e12.openElements.hasInButtonScope(D.TAG_ID.P) && e12._closePElement(), (0, D.isNumberedHeader)(e12.openElements.currentTagId) && e12.openElements.pop(), e12._insertElement(t, D.NS.HTML);
}
function VOe(e12, t) {
  e12.openElements.hasInButtonScope(D.TAG_ID.P) && e12._closePElement(), e12._insertElement(t, D.NS.HTML), e12.skipNextNewLine = true, e12.framesetOk = false;
}
function XOe(e12, t) {
  const r = e12.openElements.tmplCount > 0;
  (!e12.formElement || r) && (e12.openElements.hasInButtonScope(D.TAG_ID.P) && e12._closePElement(), e12._insertElement(t, D.NS.HTML), r || (e12.formElement = e12.openElements.current));
}
function WOe(e12, t) {
  e12.framesetOk = false;
  const r = t.tagID;
  for (let n = e12.openElements.stackTop; n >= 0; n--) {
    const i = e12.openElements.tagIDs[n];
    if (r === D.TAG_ID.LI && i === D.TAG_ID.LI || (r === D.TAG_ID.DD || r === D.TAG_ID.DT) && (i === D.TAG_ID.DD || i === D.TAG_ID.DT)) {
      e12.openElements.generateImpliedEndTagsWithExclusion(i), e12.openElements.popUntilTagNamePopped(i);
      break;
    }
    if (i !== D.TAG_ID.ADDRESS && i !== D.TAG_ID.DIV && i !== D.TAG_ID.P && e12._isSpecialElement(e12.openElements.items[n], i))
      break;
  }
  e12.openElements.hasInButtonScope(D.TAG_ID.P) && e12._closePElement(), e12._insertElement(t, D.NS.HTML);
}
function YOe(e12, t) {
  e12.openElements.hasInButtonScope(D.TAG_ID.P) && e12._closePElement(), e12._insertElement(t, D.NS.HTML), e12.tokenizer.state = fi.TokenizerMode.PLAINTEXT;
}
function qOe(e12, t) {
  e12.openElements.hasInScope(D.TAG_ID.BUTTON) && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilTagNamePopped(D.TAG_ID.BUTTON)), e12._reconstructActiveFormattingElements(), e12._insertElement(t, D.NS.HTML), e12.framesetOk = false;
}
function KOe(e12, t) {
  const r = e12.activeFormattingElements.getElementEntryInScopeWithTagName(D.TAG_NAMES.A);
  r && (HN(e12, t), e12.openElements.remove(r.element), e12.activeFormattingElements.removeEntry(r)), e12._reconstructActiveFormattingElements(), e12._insertElement(t, D.NS.HTML), e12.activeFormattingElements.pushElement(e12.openElements.current, t);
}
function ZOe(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._insertElement(t, D.NS.HTML), e12.activeFormattingElements.pushElement(e12.openElements.current, t);
}
function QOe(e12, t) {
  e12._reconstructActiveFormattingElements(), e12.openElements.hasInScope(D.TAG_ID.NOBR) && (HN(e12, t), e12._reconstructActiveFormattingElements()), e12._insertElement(t, D.NS.HTML), e12.activeFormattingElements.pushElement(e12.openElements.current, t);
}
function JOe(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._insertElement(t, D.NS.HTML), e12.activeFormattingElements.insertMarker(), e12.framesetOk = false;
}
function eIe(e12, t) {
  e12.treeAdapter.getDocumentMode(e12.document) !== D.DOCUMENT_MODE.QUIRKS && e12.openElements.hasInButtonScope(D.TAG_ID.P) && e12._closePElement(), e12._insertElement(t, D.NS.HTML), e12.framesetOk = false, e12.insertionMode = fe.IN_TABLE;
}
function TY(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._appendElement(t, D.NS.HTML), e12.framesetOk = false, t.ackSelfClosing = true;
}
function EY(e12) {
  const t = (0, fn.getTokenAttr)(e12, D.ATTRS.TYPE);
  return t != null && t.toLowerCase() === vOe;
}
function tIe(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._appendElement(t, D.NS.HTML), EY(t) || (e12.framesetOk = false), t.ackSelfClosing = true;
}
function rIe(e12, t) {
  e12._appendElement(t, D.NS.HTML), t.ackSelfClosing = true;
}
function nIe(e12, t) {
  e12.openElements.hasInButtonScope(D.TAG_ID.P) && e12._closePElement(), e12._appendElement(t, D.NS.HTML), e12.framesetOk = false, t.ackSelfClosing = true;
}
function iIe(e12, t) {
  t.tagName = D.TAG_NAMES.IMG, t.tagID = D.TAG_ID.IMG, TY(e12, t);
}
function oIe(e12, t) {
  e12._insertElement(t, D.NS.HTML), e12.skipNextNewLine = true, e12.tokenizer.state = fi.TokenizerMode.RCDATA, e12.originalInsertionMode = e12.insertionMode, e12.framesetOk = false, e12.insertionMode = fe.TEXT;
}
function aIe(e12, t) {
  e12.openElements.hasInButtonScope(D.TAG_ID.P) && e12._closePElement(), e12._reconstructActiveFormattingElements(), e12.framesetOk = false, e12._switchToTextParsing(t, fi.TokenizerMode.RAWTEXT);
}
function sIe(e12, t) {
  e12.framesetOk = false, e12._switchToTextParsing(t, fi.TokenizerMode.RAWTEXT);
}
function u3(e12, t) {
  e12._switchToTextParsing(t, fi.TokenizerMode.RAWTEXT);
}
function lIe(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._insertElement(t, D.NS.HTML), e12.framesetOk = false, e12.insertionMode = e12.insertionMode === fe.IN_TABLE || e12.insertionMode === fe.IN_CAPTION || e12.insertionMode === fe.IN_TABLE_BODY || e12.insertionMode === fe.IN_ROW || e12.insertionMode === fe.IN_CELL ? fe.IN_SELECT_IN_TABLE : fe.IN_SELECT;
}
function cIe(e12, t) {
  e12.openElements.currentTagId === D.TAG_ID.OPTION && e12.openElements.pop(), e12._reconstructActiveFormattingElements(), e12._insertElement(t, D.NS.HTML);
}
function uIe(e12, t) {
  e12.openElements.hasInScope(D.TAG_ID.RUBY) && e12.openElements.generateImpliedEndTags(), e12._insertElement(t, D.NS.HTML);
}
function hIe(e12, t) {
  e12.openElements.hasInScope(D.TAG_ID.RUBY) && e12.openElements.generateImpliedEndTagsWithExclusion(D.TAG_ID.RTC), e12._insertElement(t, D.NS.HTML);
}
function fIe(e12, t) {
  e12._reconstructActiveFormattingElements(), Sa.adjustTokenMathMLAttrs(t), Sa.adjustTokenXMLAttrs(t), t.selfClosing ? e12._appendElement(t, D.NS.MATHML) : e12._insertElement(t, D.NS.MATHML), t.ackSelfClosing = true;
}
function dIe(e12, t) {
  e12._reconstructActiveFormattingElements(), Sa.adjustTokenSVGAttrs(t), Sa.adjustTokenXMLAttrs(t), t.selfClosing ? e12._appendElement(t, D.NS.SVG) : e12._insertElement(t, D.NS.SVG), t.ackSelfClosing = true;
}
function h3(e12, t) {
  e12._reconstructActiveFormattingElements(), e12._insertElement(t, D.NS.HTML);
}
function ai(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.I:
    case D.TAG_ID.S:
    case D.TAG_ID.B:
    case D.TAG_ID.U:
    case D.TAG_ID.EM:
    case D.TAG_ID.TT:
    case D.TAG_ID.BIG:
    case D.TAG_ID.CODE:
    case D.TAG_ID.FONT:
    case D.TAG_ID.SMALL:
    case D.TAG_ID.STRIKE:
    case D.TAG_ID.STRONG: {
      ZOe(e12, t);
      break;
    }
    case D.TAG_ID.A: {
      KOe(e12, t);
      break;
    }
    case D.TAG_ID.H1:
    case D.TAG_ID.H2:
    case D.TAG_ID.H3:
    case D.TAG_ID.H4:
    case D.TAG_ID.H5:
    case D.TAG_ID.H6: {
      zOe(e12, t);
      break;
    }
    case D.TAG_ID.P:
    case D.TAG_ID.DL:
    case D.TAG_ID.OL:
    case D.TAG_ID.UL:
    case D.TAG_ID.DIV:
    case D.TAG_ID.DIR:
    case D.TAG_ID.NAV:
    case D.TAG_ID.MAIN:
    case D.TAG_ID.MENU:
    case D.TAG_ID.ASIDE:
    case D.TAG_ID.CENTER:
    case D.TAG_ID.FIGURE:
    case D.TAG_ID.FOOTER:
    case D.TAG_ID.HEADER:
    case D.TAG_ID.HGROUP:
    case D.TAG_ID.DIALOG:
    case D.TAG_ID.DETAILS:
    case D.TAG_ID.ADDRESS:
    case D.TAG_ID.ARTICLE:
    case D.TAG_ID.SECTION:
    case D.TAG_ID.SUMMARY:
    case D.TAG_ID.FIELDSET:
    case D.TAG_ID.BLOCKQUOTE:
    case D.TAG_ID.FIGCAPTION: {
      GOe(e12, t);
      break;
    }
    case D.TAG_ID.LI:
    case D.TAG_ID.DD:
    case D.TAG_ID.DT: {
      WOe(e12, t);
      break;
    }
    case D.TAG_ID.BR:
    case D.TAG_ID.IMG:
    case D.TAG_ID.WBR:
    case D.TAG_ID.AREA:
    case D.TAG_ID.EMBED:
    case D.TAG_ID.KEYGEN: {
      TY(e12, t);
      break;
    }
    case D.TAG_ID.HR: {
      nIe(e12, t);
      break;
    }
    case D.TAG_ID.RB:
    case D.TAG_ID.RTC: {
      uIe(e12, t);
      break;
    }
    case D.TAG_ID.RT:
    case D.TAG_ID.RP: {
      hIe(e12, t);
      break;
    }
    case D.TAG_ID.PRE:
    case D.TAG_ID.LISTING: {
      VOe(e12, t);
      break;
    }
    case D.TAG_ID.XMP: {
      aIe(e12, t);
      break;
    }
    case D.TAG_ID.SVG: {
      dIe(e12, t);
      break;
    }
    case D.TAG_ID.HTML: {
      HOe(e12, t);
      break;
    }
    case D.TAG_ID.BASE:
    case D.TAG_ID.LINK:
    case D.TAG_ID.META:
    case D.TAG_ID.STYLE:
    case D.TAG_ID.TITLE:
    case D.TAG_ID.SCRIPT:
    case D.TAG_ID.BGSOUND:
    case D.TAG_ID.BASEFONT:
    case D.TAG_ID.TEMPLATE: {
      ca(e12, t);
      break;
    }
    case D.TAG_ID.BODY: {
      UOe(e12, t);
      break;
    }
    case D.TAG_ID.FORM: {
      XOe(e12, t);
      break;
    }
    case D.TAG_ID.NOBR: {
      QOe(e12, t);
      break;
    }
    case D.TAG_ID.MATH: {
      fIe(e12, t);
      break;
    }
    case D.TAG_ID.TABLE: {
      eIe(e12, t);
      break;
    }
    case D.TAG_ID.INPUT: {
      tIe(e12, t);
      break;
    }
    case D.TAG_ID.PARAM:
    case D.TAG_ID.TRACK:
    case D.TAG_ID.SOURCE: {
      rIe(e12, t);
      break;
    }
    case D.TAG_ID.IMAGE: {
      iIe(e12, t);
      break;
    }
    case D.TAG_ID.BUTTON: {
      qOe(e12, t);
      break;
    }
    case D.TAG_ID.APPLET:
    case D.TAG_ID.OBJECT:
    case D.TAG_ID.MARQUEE: {
      JOe(e12, t);
      break;
    }
    case D.TAG_ID.IFRAME: {
      sIe(e12, t);
      break;
    }
    case D.TAG_ID.SELECT: {
      lIe(e12, t);
      break;
    }
    case D.TAG_ID.OPTION:
    case D.TAG_ID.OPTGROUP: {
      cIe(e12, t);
      break;
    }
    case D.TAG_ID.NOEMBED: {
      u3(e12, t);
      break;
    }
    case D.TAG_ID.FRAMESET: {
      jOe(e12, t);
      break;
    }
    case D.TAG_ID.TEXTAREA: {
      oIe(e12, t);
      break;
    }
    case D.TAG_ID.NOSCRIPT: {
      e12.options.scriptingEnabled ? u3(e12, t) : h3(e12, t);
      break;
    }
    case D.TAG_ID.PLAINTEXT: {
      YOe(e12, t);
      break;
    }
    case D.TAG_ID.COL:
    case D.TAG_ID.TH:
    case D.TAG_ID.TD:
    case D.TAG_ID.TR:
    case D.TAG_ID.HEAD:
    case D.TAG_ID.FRAME:
    case D.TAG_ID.TBODY:
    case D.TAG_ID.TFOOT:
    case D.TAG_ID.THEAD:
    case D.TAG_ID.CAPTION:
    case D.TAG_ID.COLGROUP:
      break;
    default:
      h3(e12, t);
  }
}
function pIe(e12, t) {
  if (e12.openElements.hasInScope(D.TAG_ID.BODY) && (e12.insertionMode = fe.AFTER_BODY, e12.options.sourceCodeLocationInfo)) {
    const r = e12.openElements.tryPeekProperlyNestedBodyElement();
    r && e12._setEndLocation(r, t);
  }
}
function mIe(e12, t) {
  e12.openElements.hasInScope(D.TAG_ID.BODY) && (e12.insertionMode = fe.AFTER_BODY, DY(e12, t));
}
function gIe(e12, t) {
  const r = t.tagID;
  e12.openElements.hasInScope(r) && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilTagNamePopped(r));
}
function vIe(e12) {
  const t = e12.openElements.tmplCount > 0, {
    formElement: r
  } = e12;
  t || (e12.formElement = null), (r || t) && e12.openElements.hasInScope(D.TAG_ID.FORM) && (e12.openElements.generateImpliedEndTags(), t ? e12.openElements.popUntilTagNamePopped(D.TAG_ID.FORM) : r && e12.openElements.remove(r));
}
function yIe(e12) {
  e12.openElements.hasInButtonScope(D.TAG_ID.P) || e12._insertFakeElement(D.TAG_NAMES.P, D.TAG_ID.P), e12._closePElement();
}
function _Ie(e12) {
  e12.openElements.hasInListItemScope(D.TAG_ID.LI) && (e12.openElements.generateImpliedEndTagsWithExclusion(D.TAG_ID.LI), e12.openElements.popUntilTagNamePopped(D.TAG_ID.LI));
}
function bIe(e12, t) {
  const r = t.tagID;
  e12.openElements.hasInScope(r) && (e12.openElements.generateImpliedEndTagsWithExclusion(r), e12.openElements.popUntilTagNamePopped(r));
}
function TIe(e12) {
  e12.openElements.hasNumberedHeaderInScope() && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilNumberedHeaderPopped());
}
function EIe(e12, t) {
  const r = t.tagID;
  e12.openElements.hasInScope(r) && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilTagNamePopped(r), e12.activeFormattingElements.clearToLastMarker());
}
function SIe(e12) {
  e12._reconstructActiveFormattingElements(), e12._insertFakeElement(D.TAG_NAMES.BR, D.TAG_ID.BR), e12.openElements.pop(), e12.framesetOk = false;
}
function SY(e12, t) {
  const r = t.tagName, n = t.tagID;
  for (let i = e12.openElements.stackTop; i > 0; i--) {
    const o = e12.openElements.items[i], a = e12.openElements.tagIDs[i];
    if (n === a && (n !== D.TAG_ID.UNKNOWN || e12.treeAdapter.getTagName(o) === r)) {
      e12.openElements.generateImpliedEndTagsWithExclusion(n), e12.openElements.stackTop >= i && e12.openElements.shortenToLength(i);
      break;
    }
    if (e12._isSpecialElement(o, a))
      break;
  }
}
function aS(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.A:
    case D.TAG_ID.B:
    case D.TAG_ID.I:
    case D.TAG_ID.S:
    case D.TAG_ID.U:
    case D.TAG_ID.EM:
    case D.TAG_ID.TT:
    case D.TAG_ID.BIG:
    case D.TAG_ID.CODE:
    case D.TAG_ID.FONT:
    case D.TAG_ID.NOBR:
    case D.TAG_ID.SMALL:
    case D.TAG_ID.STRIKE:
    case D.TAG_ID.STRONG: {
      HN(e12, t);
      break;
    }
    case D.TAG_ID.P: {
      yIe(e12);
      break;
    }
    case D.TAG_ID.DL:
    case D.TAG_ID.UL:
    case D.TAG_ID.OL:
    case D.TAG_ID.DIR:
    case D.TAG_ID.DIV:
    case D.TAG_ID.NAV:
    case D.TAG_ID.PRE:
    case D.TAG_ID.MAIN:
    case D.TAG_ID.MENU:
    case D.TAG_ID.ASIDE:
    case D.TAG_ID.BUTTON:
    case D.TAG_ID.CENTER:
    case D.TAG_ID.FIGURE:
    case D.TAG_ID.FOOTER:
    case D.TAG_ID.HEADER:
    case D.TAG_ID.HGROUP:
    case D.TAG_ID.DIALOG:
    case D.TAG_ID.ADDRESS:
    case D.TAG_ID.ARTICLE:
    case D.TAG_ID.DETAILS:
    case D.TAG_ID.SECTION:
    case D.TAG_ID.SUMMARY:
    case D.TAG_ID.LISTING:
    case D.TAG_ID.FIELDSET:
    case D.TAG_ID.BLOCKQUOTE:
    case D.TAG_ID.FIGCAPTION: {
      gIe(e12, t);
      break;
    }
    case D.TAG_ID.LI: {
      _Ie(e12);
      break;
    }
    case D.TAG_ID.DD:
    case D.TAG_ID.DT: {
      bIe(e12, t);
      break;
    }
    case D.TAG_ID.H1:
    case D.TAG_ID.H2:
    case D.TAG_ID.H3:
    case D.TAG_ID.H4:
    case D.TAG_ID.H5:
    case D.TAG_ID.H6: {
      TIe(e12);
      break;
    }
    case D.TAG_ID.BR: {
      SIe(e12);
      break;
    }
    case D.TAG_ID.BODY: {
      pIe(e12, t);
      break;
    }
    case D.TAG_ID.HTML: {
      mIe(e12, t);
      break;
    }
    case D.TAG_ID.FORM: {
      vIe(e12);
      break;
    }
    case D.TAG_ID.APPLET:
    case D.TAG_ID.OBJECT:
    case D.TAG_ID.MARQUEE: {
      EIe(e12, t);
      break;
    }
    case D.TAG_ID.TEMPLATE: {
      oh(e12, t);
      break;
    }
    default:
      SY(e12, t);
  }
}
function wY(e12, t) {
  e12.tmplInsertionModeStack.length > 0 ? kY(e12, t) : UN(e12, t);
}
function wIe(e12, t) {
  var r;
  t.tagID === D.TAG_ID.SCRIPT && ((r = e12.scriptHandler) === null || r === void 0 || r.call(e12, e12.openElements.current)), e12.openElements.pop(), e12.insertionMode = e12.originalInsertionMode;
}
function AIe(e12, t) {
  e12._err(t, Gn.ERR.eofInElementThatCanContainOnlyText), e12.openElements.pop(), e12.insertionMode = e12.originalInsertionMode, e12.onEof(t);
}
function aO(e12, t) {
  if (yY.has(e12.openElements.currentTagId))
    switch (e12.pendingCharacterTokens.length = 0, e12.hasNonWhitespacePendingCharacterToken = false, e12.originalInsertionMode = e12.insertionMode, e12.insertionMode = fe.IN_TABLE_TEXT, t.type) {
      case fn.TokenType.CHARACTER: {
        OY(e12, t);
        break;
      }
      case fn.TokenType.WHITESPACE_CHARACTER: {
        AY(e12, t);
        break;
      }
    }
  else
    hy(e12, t);
}
function OIe(e12, t) {
  e12.openElements.clearBackToTableContext(), e12.activeFormattingElements.insertMarker(), e12._insertElement(t, D.NS.HTML), e12.insertionMode = fe.IN_CAPTION;
}
function IIe(e12, t) {
  e12.openElements.clearBackToTableContext(), e12._insertElement(t, D.NS.HTML), e12.insertionMode = fe.IN_COLUMN_GROUP;
}
function PIe(e12, t) {
  e12.openElements.clearBackToTableContext(), e12._insertFakeElement(D.TAG_NAMES.COLGROUP, D.TAG_ID.COLGROUP), e12.insertionMode = fe.IN_COLUMN_GROUP, jN(e12, t);
}
function CIe(e12, t) {
  e12.openElements.clearBackToTableContext(), e12._insertElement(t, D.NS.HTML), e12.insertionMode = fe.IN_TABLE_BODY;
}
function xIe(e12, t) {
  e12.openElements.clearBackToTableContext(), e12._insertFakeElement(D.TAG_NAMES.TBODY, D.TAG_ID.TBODY), e12.insertionMode = fe.IN_TABLE_BODY, sS(e12, t);
}
function kIe(e12, t) {
  e12.openElements.hasInTableScope(D.TAG_ID.TABLE) && (e12.openElements.popUntilTagNamePopped(D.TAG_ID.TABLE), e12._resetInsertionMode(), e12._processStartTag(t));
}
function DIe(e12, t) {
  EY(t) ? e12._appendElement(t, D.NS.HTML) : hy(e12, t), t.ackSelfClosing = true;
}
function RIe(e12, t) {
  !e12.formElement && e12.openElements.tmplCount === 0 && (e12._insertElement(t, D.NS.HTML), e12.formElement = e12.openElements.current, e12.openElements.pop());
}
function Cd(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.TD:
    case D.TAG_ID.TH:
    case D.TAG_ID.TR: {
      xIe(e12, t);
      break;
    }
    case D.TAG_ID.STYLE:
    case D.TAG_ID.SCRIPT:
    case D.TAG_ID.TEMPLATE: {
      ca(e12, t);
      break;
    }
    case D.TAG_ID.COL: {
      PIe(e12, t);
      break;
    }
    case D.TAG_ID.FORM: {
      RIe(e12, t);
      break;
    }
    case D.TAG_ID.TABLE: {
      kIe(e12, t);
      break;
    }
    case D.TAG_ID.TBODY:
    case D.TAG_ID.TFOOT:
    case D.TAG_ID.THEAD: {
      CIe(e12, t);
      break;
    }
    case D.TAG_ID.INPUT: {
      DIe(e12, t);
      break;
    }
    case D.TAG_ID.CAPTION: {
      OIe(e12, t);
      break;
    }
    case D.TAG_ID.COLGROUP: {
      IIe(e12, t);
      break;
    }
    default:
      hy(e12, t);
  }
}
function fv(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.TABLE: {
      e12.openElements.hasInTableScope(D.TAG_ID.TABLE) && (e12.openElements.popUntilTagNamePopped(D.TAG_ID.TABLE), e12._resetInsertionMode());
      break;
    }
    case D.TAG_ID.TEMPLATE: {
      oh(e12, t);
      break;
    }
    case D.TAG_ID.BODY:
    case D.TAG_ID.CAPTION:
    case D.TAG_ID.COL:
    case D.TAG_ID.COLGROUP:
    case D.TAG_ID.HTML:
    case D.TAG_ID.TBODY:
    case D.TAG_ID.TD:
    case D.TAG_ID.TFOOT:
    case D.TAG_ID.TH:
    case D.TAG_ID.THEAD:
    case D.TAG_ID.TR:
      break;
    default:
      hy(e12, t);
  }
}
function hy(e12, t) {
  const r = e12.fosterParentingEnabled;
  e12.fosterParentingEnabled = true, oS(e12, t), e12.fosterParentingEnabled = r;
}
function AY(e12, t) {
  e12.pendingCharacterTokens.push(t);
}
function OY(e12, t) {
  e12.pendingCharacterTokens.push(t), e12.hasNonWhitespacePendingCharacterToken = true;
}
function im(e12, t) {
  let r = 0;
  if (e12.hasNonWhitespacePendingCharacterToken)
    for (; r < e12.pendingCharacterTokens.length; r++)
      hy(e12, e12.pendingCharacterTokens[r]);
  else
    for (; r < e12.pendingCharacterTokens.length; r++)
      e12._insertCharacters(e12.pendingCharacterTokens[r]);
  e12.insertionMode = e12.originalInsertionMode, e12._processToken(t);
}
var IY = /* @__PURE__ */ new Set([D.TAG_ID.CAPTION, D.TAG_ID.COL, D.TAG_ID.COLGROUP, D.TAG_ID.TBODY, D.TAG_ID.TD, D.TAG_ID.TFOOT, D.TAG_ID.TH, D.TAG_ID.THEAD, D.TAG_ID.TR]);
function NIe(e12, t) {
  const r = t.tagID;
  IY.has(r) ? e12.openElements.hasInTableScope(D.TAG_ID.CAPTION) && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilTagNamePopped(D.TAG_ID.CAPTION), e12.activeFormattingElements.clearToLastMarker(), e12.insertionMode = fe.IN_TABLE, Cd(e12, t)) : ai(e12, t);
}
function MIe(e12, t) {
  const r = t.tagID;
  switch (r) {
    case D.TAG_ID.CAPTION:
    case D.TAG_ID.TABLE: {
      e12.openElements.hasInTableScope(D.TAG_ID.CAPTION) && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilTagNamePopped(D.TAG_ID.CAPTION), e12.activeFormattingElements.clearToLastMarker(), e12.insertionMode = fe.IN_TABLE, r === D.TAG_ID.TABLE && fv(e12, t));
      break;
    }
    case D.TAG_ID.BODY:
    case D.TAG_ID.COL:
    case D.TAG_ID.COLGROUP:
    case D.TAG_ID.HTML:
    case D.TAG_ID.TBODY:
    case D.TAG_ID.TD:
    case D.TAG_ID.TFOOT:
    case D.TAG_ID.TH:
    case D.TAG_ID.THEAD:
    case D.TAG_ID.TR:
      break;
    default:
      aS(e12, t);
  }
}
function jN(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.HTML: {
      ai(e12, t);
      break;
    }
    case D.TAG_ID.COL: {
      e12._appendElement(t, D.NS.HTML), t.ackSelfClosing = true;
      break;
    }
    case D.TAG_ID.TEMPLATE: {
      ca(e12, t);
      break;
    }
    default:
      J0(e12, t);
  }
}
function LIe(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.COLGROUP: {
      e12.openElements.currentTagId === D.TAG_ID.COLGROUP && (e12.openElements.pop(), e12.insertionMode = fe.IN_TABLE);
      break;
    }
    case D.TAG_ID.TEMPLATE: {
      oh(e12, t);
      break;
    }
    case D.TAG_ID.COL:
      break;
    default:
      J0(e12, t);
  }
}
function J0(e12, t) {
  e12.openElements.currentTagId === D.TAG_ID.COLGROUP && (e12.openElements.pop(), e12.insertionMode = fe.IN_TABLE, e12._processToken(t));
}
function sS(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.TR: {
      e12.openElements.clearBackToTableBodyContext(), e12._insertElement(t, D.NS.HTML), e12.insertionMode = fe.IN_ROW;
      break;
    }
    case D.TAG_ID.TH:
    case D.TAG_ID.TD: {
      e12.openElements.clearBackToTableBodyContext(), e12._insertFakeElement(D.TAG_NAMES.TR, D.TAG_ID.TR), e12.insertionMode = fe.IN_ROW, lS(e12, t);
      break;
    }
    case D.TAG_ID.CAPTION:
    case D.TAG_ID.COL:
    case D.TAG_ID.COLGROUP:
    case D.TAG_ID.TBODY:
    case D.TAG_ID.TFOOT:
    case D.TAG_ID.THEAD: {
      e12.openElements.hasTableBodyContextInTableScope() && (e12.openElements.clearBackToTableBodyContext(), e12.openElements.pop(), e12.insertionMode = fe.IN_TABLE, Cd(e12, t));
      break;
    }
    default:
      Cd(e12, t);
  }
}
function oC(e12, t) {
  const r = t.tagID;
  switch (t.tagID) {
    case D.TAG_ID.TBODY:
    case D.TAG_ID.TFOOT:
    case D.TAG_ID.THEAD: {
      e12.openElements.hasInTableScope(r) && (e12.openElements.clearBackToTableBodyContext(), e12.openElements.pop(), e12.insertionMode = fe.IN_TABLE);
      break;
    }
    case D.TAG_ID.TABLE: {
      e12.openElements.hasTableBodyContextInTableScope() && (e12.openElements.clearBackToTableBodyContext(), e12.openElements.pop(), e12.insertionMode = fe.IN_TABLE, fv(e12, t));
      break;
    }
    case D.TAG_ID.BODY:
    case D.TAG_ID.CAPTION:
    case D.TAG_ID.COL:
    case D.TAG_ID.COLGROUP:
    case D.TAG_ID.HTML:
    case D.TAG_ID.TD:
    case D.TAG_ID.TH:
    case D.TAG_ID.TR:
      break;
    default:
      fv(e12, t);
  }
}
function lS(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.TH:
    case D.TAG_ID.TD: {
      e12.openElements.clearBackToTableRowContext(), e12._insertElement(t, D.NS.HTML), e12.insertionMode = fe.IN_CELL, e12.activeFormattingElements.insertMarker();
      break;
    }
    case D.TAG_ID.CAPTION:
    case D.TAG_ID.COL:
    case D.TAG_ID.COLGROUP:
    case D.TAG_ID.TBODY:
    case D.TAG_ID.TFOOT:
    case D.TAG_ID.THEAD:
    case D.TAG_ID.TR: {
      e12.openElements.hasInTableScope(D.TAG_ID.TR) && (e12.openElements.clearBackToTableRowContext(), e12.openElements.pop(), e12.insertionMode = fe.IN_TABLE_BODY, sS(e12, t));
      break;
    }
    default:
      Cd(e12, t);
  }
}
function PY(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.TR: {
      e12.openElements.hasInTableScope(D.TAG_ID.TR) && (e12.openElements.clearBackToTableRowContext(), e12.openElements.pop(), e12.insertionMode = fe.IN_TABLE_BODY);
      break;
    }
    case D.TAG_ID.TABLE: {
      e12.openElements.hasInTableScope(D.TAG_ID.TR) && (e12.openElements.clearBackToTableRowContext(), e12.openElements.pop(), e12.insertionMode = fe.IN_TABLE_BODY, oC(e12, t));
      break;
    }
    case D.TAG_ID.TBODY:
    case D.TAG_ID.TFOOT:
    case D.TAG_ID.THEAD: {
      (e12.openElements.hasInTableScope(t.tagID) || e12.openElements.hasInTableScope(D.TAG_ID.TR)) && (e12.openElements.clearBackToTableRowContext(), e12.openElements.pop(), e12.insertionMode = fe.IN_TABLE_BODY, oC(e12, t));
      break;
    }
    case D.TAG_ID.BODY:
    case D.TAG_ID.CAPTION:
    case D.TAG_ID.COL:
    case D.TAG_ID.COLGROUP:
    case D.TAG_ID.HTML:
    case D.TAG_ID.TD:
    case D.TAG_ID.TH:
      break;
    default:
      fv(e12, t);
  }
}
function BIe(e12, t) {
  const r = t.tagID;
  IY.has(r) ? (e12.openElements.hasInTableScope(D.TAG_ID.TD) || e12.openElements.hasInTableScope(D.TAG_ID.TH)) && (e12._closeTableCell(), lS(e12, t)) : ai(e12, t);
}
function FIe(e12, t) {
  const r = t.tagID;
  switch (r) {
    case D.TAG_ID.TD:
    case D.TAG_ID.TH: {
      e12.openElements.hasInTableScope(r) && (e12.openElements.generateImpliedEndTags(), e12.openElements.popUntilTagNamePopped(r), e12.activeFormattingElements.clearToLastMarker(), e12.insertionMode = fe.IN_ROW);
      break;
    }
    case D.TAG_ID.TABLE:
    case D.TAG_ID.TBODY:
    case D.TAG_ID.TFOOT:
    case D.TAG_ID.THEAD:
    case D.TAG_ID.TR: {
      e12.openElements.hasInTableScope(r) && (e12._closeTableCell(), PY(e12, t));
      break;
    }
    case D.TAG_ID.BODY:
    case D.TAG_ID.CAPTION:
    case D.TAG_ID.COL:
    case D.TAG_ID.COLGROUP:
    case D.TAG_ID.HTML:
      break;
    default:
      aS(e12, t);
  }
}
function CY(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.HTML: {
      ai(e12, t);
      break;
    }
    case D.TAG_ID.OPTION: {
      e12.openElements.currentTagId === D.TAG_ID.OPTION && e12.openElements.pop(), e12._insertElement(t, D.NS.HTML);
      break;
    }
    case D.TAG_ID.OPTGROUP: {
      e12.openElements.currentTagId === D.TAG_ID.OPTION && e12.openElements.pop(), e12.openElements.currentTagId === D.TAG_ID.OPTGROUP && e12.openElements.pop(), e12._insertElement(t, D.NS.HTML);
      break;
    }
    case D.TAG_ID.INPUT:
    case D.TAG_ID.KEYGEN:
    case D.TAG_ID.TEXTAREA:
    case D.TAG_ID.SELECT: {
      e12.openElements.hasInSelectScope(D.TAG_ID.SELECT) && (e12.openElements.popUntilTagNamePopped(D.TAG_ID.SELECT), e12._resetInsertionMode(), t.tagID !== D.TAG_ID.SELECT && e12._processStartTag(t));
      break;
    }
    case D.TAG_ID.SCRIPT:
    case D.TAG_ID.TEMPLATE: {
      ca(e12, t);
      break;
    }
  }
}
function xY(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.OPTGROUP: {
      e12.openElements.stackTop > 0 && e12.openElements.currentTagId === D.TAG_ID.OPTION && e12.openElements.tagIDs[e12.openElements.stackTop - 1] === D.TAG_ID.OPTGROUP && e12.openElements.pop(), e12.openElements.currentTagId === D.TAG_ID.OPTGROUP && e12.openElements.pop();
      break;
    }
    case D.TAG_ID.OPTION: {
      e12.openElements.currentTagId === D.TAG_ID.OPTION && e12.openElements.pop();
      break;
    }
    case D.TAG_ID.SELECT: {
      e12.openElements.hasInSelectScope(D.TAG_ID.SELECT) && (e12.openElements.popUntilTagNamePopped(D.TAG_ID.SELECT), e12._resetInsertionMode());
      break;
    }
    case D.TAG_ID.TEMPLATE: {
      oh(e12, t);
      break;
    }
  }
}
function $Ie(e12, t) {
  const r = t.tagID;
  r === D.TAG_ID.CAPTION || r === D.TAG_ID.TABLE || r === D.TAG_ID.TBODY || r === D.TAG_ID.TFOOT || r === D.TAG_ID.THEAD || r === D.TAG_ID.TR || r === D.TAG_ID.TD || r === D.TAG_ID.TH ? (e12.openElements.popUntilTagNamePopped(D.TAG_ID.SELECT), e12._resetInsertionMode(), e12._processStartTag(t)) : CY(e12, t);
}
function HIe(e12, t) {
  const r = t.tagID;
  r === D.TAG_ID.CAPTION || r === D.TAG_ID.TABLE || r === D.TAG_ID.TBODY || r === D.TAG_ID.TFOOT || r === D.TAG_ID.THEAD || r === D.TAG_ID.TR || r === D.TAG_ID.TD || r === D.TAG_ID.TH ? e12.openElements.hasInTableScope(r) && (e12.openElements.popUntilTagNamePopped(D.TAG_ID.SELECT), e12._resetInsertionMode(), e12.onEndTag(t)) : xY(e12, t);
}
function UIe(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.BASE:
    case D.TAG_ID.BASEFONT:
    case D.TAG_ID.BGSOUND:
    case D.TAG_ID.LINK:
    case D.TAG_ID.META:
    case D.TAG_ID.NOFRAMES:
    case D.TAG_ID.SCRIPT:
    case D.TAG_ID.STYLE:
    case D.TAG_ID.TEMPLATE:
    case D.TAG_ID.TITLE: {
      ca(e12, t);
      break;
    }
    case D.TAG_ID.CAPTION:
    case D.TAG_ID.COLGROUP:
    case D.TAG_ID.TBODY:
    case D.TAG_ID.TFOOT:
    case D.TAG_ID.THEAD: {
      e12.tmplInsertionModeStack[0] = fe.IN_TABLE, e12.insertionMode = fe.IN_TABLE, Cd(e12, t);
      break;
    }
    case D.TAG_ID.COL: {
      e12.tmplInsertionModeStack[0] = fe.IN_COLUMN_GROUP, e12.insertionMode = fe.IN_COLUMN_GROUP, jN(e12, t);
      break;
    }
    case D.TAG_ID.TR: {
      e12.tmplInsertionModeStack[0] = fe.IN_TABLE_BODY, e12.insertionMode = fe.IN_TABLE_BODY, sS(e12, t);
      break;
    }
    case D.TAG_ID.TD:
    case D.TAG_ID.TH: {
      e12.tmplInsertionModeStack[0] = fe.IN_ROW, e12.insertionMode = fe.IN_ROW, lS(e12, t);
      break;
    }
    default:
      e12.tmplInsertionModeStack[0] = fe.IN_BODY, e12.insertionMode = fe.IN_BODY, ai(e12, t);
  }
}
function jIe(e12, t) {
  t.tagID === D.TAG_ID.TEMPLATE && oh(e12, t);
}
function kY(e12, t) {
  e12.openElements.tmplCount > 0 ? (e12.openElements.popUntilTagNamePopped(D.TAG_ID.TEMPLATE), e12.activeFormattingElements.clearToLastMarker(), e12.tmplInsertionModeStack.shift(), e12._resetInsertionMode(), e12.onEof(t)) : UN(e12, t);
}
function GIe(e12, t) {
  t.tagID === D.TAG_ID.HTML ? ai(e12, t) : eT(e12, t);
}
function DY(e12, t) {
  var r;
  if (t.tagID === D.TAG_ID.HTML) {
    if (e12.fragmentContext || (e12.insertionMode = fe.AFTER_AFTER_BODY), e12.options.sourceCodeLocationInfo && e12.openElements.tagIDs[0] === D.TAG_ID.HTML) {
      e12._setEndLocation(e12.openElements.items[0], t);
      const n = e12.openElements.items[1];
      n && !(!((r = e12.treeAdapter.getNodeSourceCodeLocation(n)) === null || r === void 0) && r.endTag) && e12._setEndLocation(n, t);
    }
  } else
    eT(e12, t);
}
function eT(e12, t) {
  e12.insertionMode = fe.IN_BODY, oS(e12, t);
}
function zIe(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.HTML: {
      ai(e12, t);
      break;
    }
    case D.TAG_ID.FRAMESET: {
      e12._insertElement(t, D.NS.HTML);
      break;
    }
    case D.TAG_ID.FRAME: {
      e12._appendElement(t, D.NS.HTML), t.ackSelfClosing = true;
      break;
    }
    case D.TAG_ID.NOFRAMES: {
      ca(e12, t);
      break;
    }
  }
}
function VIe(e12, t) {
  t.tagID === D.TAG_ID.FRAMESET && !e12.openElements.isRootHtmlElementCurrent() && (e12.openElements.pop(), !e12.fragmentContext && e12.openElements.currentTagId !== D.TAG_ID.FRAMESET && (e12.insertionMode = fe.AFTER_FRAMESET));
}
function XIe(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.HTML: {
      ai(e12, t);
      break;
    }
    case D.TAG_ID.NOFRAMES: {
      ca(e12, t);
      break;
    }
  }
}
function WIe(e12, t) {
  t.tagID === D.TAG_ID.HTML && (e12.insertionMode = fe.AFTER_AFTER_FRAMESET);
}
function YIe(e12, t) {
  t.tagID === D.TAG_ID.HTML ? ai(e12, t) : yb(e12, t);
}
function yb(e12, t) {
  e12.insertionMode = fe.IN_BODY, oS(e12, t);
}
function qIe(e12, t) {
  switch (t.tagID) {
    case D.TAG_ID.HTML: {
      ai(e12, t);
      break;
    }
    case D.TAG_ID.NOFRAMES: {
      ca(e12, t);
      break;
    }
  }
}
function KIe(e12, t) {
  t.chars = vY.REPLACEMENT_CHARACTER, e12._insertCharacters(t);
}
function ZIe(e12, t) {
  e12._insertCharacters(t), e12.framesetOk = false;
}
function RY(e12) {
  for (; e12.treeAdapter.getNamespaceURI(e12.openElements.current) !== D.NS.HTML && !e12._isIntegrationPoint(e12.openElements.currentTagId, e12.openElements.current); )
    e12.openElements.pop();
}
function QIe(e12, t) {
  if (Sa.causesExit(t))
    RY(e12), e12._startTagOutsideForeignContent(t);
  else {
    const r = e12._getAdjustedCurrentElement(), n = e12.treeAdapter.getNamespaceURI(r);
    n === D.NS.MATHML ? Sa.adjustTokenMathMLAttrs(t) : n === D.NS.SVG && (Sa.adjustTokenSVGTagName(t), Sa.adjustTokenSVGAttrs(t)), Sa.adjustTokenXMLAttrs(t), t.selfClosing ? e12._appendElement(t, n) : e12._insertElement(t, n), t.ackSelfClosing = true;
  }
}
function JIe(e12, t) {
  if (t.tagID === D.TAG_ID.P || t.tagID === D.TAG_ID.BR) {
    RY(e12), e12._endTagOutsideForeignContent(t);
    return;
  }
  for (let r = e12.openElements.stackTop; r > 0; r--) {
    const n = e12.openElements.items[r];
    if (e12.treeAdapter.getNamespaceURI(n) === D.NS.HTML) {
      e12._endTagOutsideForeignContent(t);
      break;
    }
    const i = e12.treeAdapter.getTagName(n);
    if (i.toLowerCase() === t.tagName) {
      t.tagName = i, e12.openElements.shortenToLength(r);
      break;
    }
  }
}
var xd = {};
Object.defineProperty(xd, "__esModule", {
  value: true
});
xd.serializeOuter = xd.serialize = void 0;
var Pr = Zs;
var NY = vd;
var ePe = iS;
var tPe = /* @__PURE__ */ new Set([Pr.TAG_NAMES.AREA, Pr.TAG_NAMES.BASE, Pr.TAG_NAMES.BASEFONT, Pr.TAG_NAMES.BGSOUND, Pr.TAG_NAMES.BR, Pr.TAG_NAMES.COL, Pr.TAG_NAMES.EMBED, Pr.TAG_NAMES.FRAME, Pr.TAG_NAMES.HR, Pr.TAG_NAMES.IMG, Pr.TAG_NAMES.INPUT, Pr.TAG_NAMES.KEYGEN, Pr.TAG_NAMES.LINK, Pr.TAG_NAMES.META, Pr.TAG_NAMES.PARAM, Pr.TAG_NAMES.SOURCE, Pr.TAG_NAMES.TRACK, Pr.TAG_NAMES.WBR]);
function MY(e12, t) {
  return t.treeAdapter.isElementNode(e12) && t.treeAdapter.getNamespaceURI(e12) === Pr.NS.HTML && tPe.has(t.treeAdapter.getTagName(e12));
}
var LY = {
  treeAdapter: ePe.defaultTreeAdapter,
  scriptingEnabled: true
};
function rPe(e12, t) {
  const r = Object.assign(Object.assign({}, LY), t);
  return MY(e12, r) ? "" : BY(e12, r);
}
xd.serialize = rPe;
function nPe(e12, t) {
  const r = Object.assign(Object.assign({}, LY), t);
  return FY(e12, r);
}
xd.serializeOuter = nPe;
function BY(e12, t) {
  let r = "";
  const n = t.treeAdapter.isElementNode(e12) && t.treeAdapter.getTagName(e12) === Pr.TAG_NAMES.TEMPLATE && t.treeAdapter.getNamespaceURI(e12) === Pr.NS.HTML ? t.treeAdapter.getTemplateContent(e12) : e12, i = t.treeAdapter.getChildNodes(n);
  if (i)
    for (const o of i)
      r += FY(o, t);
  return r;
}
function FY(e12, t) {
  return t.treeAdapter.isElementNode(e12) ? iPe(e12, t) : t.treeAdapter.isTextNode(e12) ? aPe(e12, t) : t.treeAdapter.isCommentNode(e12) ? sPe(e12, t) : t.treeAdapter.isDocumentTypeNode(e12) ? lPe(e12, t) : "";
}
function iPe(e12, t) {
  const r = t.treeAdapter.getTagName(e12);
  return `<${r}${oPe(e12, t)}>${MY(e12, t) ? "" : `${BY(e12, t)}</${r}>`}`;
}
function oPe(e12, {
  treeAdapter: t
}) {
  let r = "";
  for (const n of t.getAttrList(e12)) {
    if (r += " ", !n.namespace)
      r += n.name;
    else
      switch (n.namespace) {
        case Pr.NS.XML: {
          r += `xml:${n.name}`;
          break;
        }
        case Pr.NS.XMLNS: {
          n.name !== "xmlns" && (r += "xmlns:"), r += n.name;
          break;
        }
        case Pr.NS.XLINK: {
          r += `xlink:${n.name}`;
          break;
        }
        default:
          r += `${n.prefix}:${n.name}`;
      }
    r += `="${(0, NY.escapeAttribute)(n.value)}"`;
  }
  return r;
}
function aPe(e12, t) {
  const {
    treeAdapter: r
  } = t, n = r.getTextNodeContent(e12), i = r.getParentNode(e12), o = i && r.isElementNode(i) && r.getTagName(i);
  return o && r.getNamespaceURI(i) === Pr.NS.HTML && (0, Pr.hasUnescapedText)(o, t.scriptingEnabled) ? n : (0, NY.escapeText)(n);
}
function sPe(e12, {
  treeAdapter: t
}) {
  return `<!--${t.getCommentNodeContent(e12)}-->`;
}
function lPe(e12, {
  treeAdapter: t
}) {
  return `<!DOCTYPE ${t.getDocumentTypeNodeName(e12)}>`;
}
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.parseFragment = e12.parse = e12.TokenizerMode = e12.Tokenizer = e12.Token = e12.html = e12.foreignContent = e12.ErrorCodes = e12.serializeOuter = e12.serialize = e12.Parser = e12.defaultTreeAdapter = void 0;
  const t = hv;
  var r = iS;
  Object.defineProperty(e12, "defaultTreeAdapter", {
    enumerable: true,
    get: function() {
      return r.defaultTreeAdapter;
    }
  });
  var n = hv;
  Object.defineProperty(e12, "Parser", {
    enumerable: true,
    get: function() {
      return n.Parser;
    }
  });
  var i = xd;
  Object.defineProperty(e12, "serialize", {
    enumerable: true,
    get: function() {
      return i.serialize;
    }
  }), Object.defineProperty(e12, "serializeOuter", {
    enumerable: true,
    get: function() {
      return i.serializeOuter;
    }
  });
  var o = uy;
  Object.defineProperty(e12, "ErrorCodes", {
    enumerable: true,
    get: function() {
      return o.ERR;
    }
  }), e12.foreignContent = $N, e12.html = Zs, e12.Token = rS;
  var a = wu;
  Object.defineProperty(e12, "Tokenizer", {
    enumerable: true,
    get: function() {
      return a.Tokenizer;
    }
  }), Object.defineProperty(e12, "TokenizerMode", {
    enumerable: true,
    get: function() {
      return a.TokenizerMode;
    }
  });
  function s(u, c) {
    return t.Parser.parse(u, c);
  }
  e12.parse = s;
  function l(u, c, f) {
    typeof u == "string" && (f = c, c = u, u = null);
    const h = t.Parser.getFragmentParser(u, f);
    return h.tokenizer.write(c, true), h.getFragment();
  }
  e12.parseFragment = l;
})(lY);
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.adapter = e12.serializeDoctypeContent = void 0;
  const t = lY, r = ni;
  function n(a) {
    return new r.Text(a);
  }
  function i(a) {
    const s = a.includes('"') ? "'" : '"';
    return s + a + s;
  }
  function o(a, s, l) {
    let u = "!DOCTYPE ";
    return a && (u += a), s ? u += ` PUBLIC ${i(s)}` : l && (u += " SYSTEM"), l && (u += ` ${i(l)}`), u;
  }
  e12.serializeDoctypeContent = o, e12.adapter = {
    // Re-exports from domhandler
    isCommentNode: r.isComment,
    isElementNode: r.isTag,
    isTextNode: r.isText,
    //Node construction
    createDocument() {
      const a = new r.Document([]);
      return a["x-mode"] = t.html.DOCUMENT_MODE.NO_QUIRKS, a;
    },
    createDocumentFragment() {
      return new r.Document([]);
    },
    createElement(a, s, l) {
      const u = /* @__PURE__ */ Object.create(null), c = /* @__PURE__ */ Object.create(null), f = /* @__PURE__ */ Object.create(null);
      for (let d = 0; d < l.length; d++) {
        const p = l[d].name;
        u[p] = l[d].value, c[p] = l[d].namespace, f[p] = l[d].prefix;
      }
      const h = new r.Element(a, u, []);
      return h.namespace = s, h["x-attribsNamespace"] = c, h["x-attribsPrefix"] = f, h;
    },
    createCommentNode(a) {
      return new r.Comment(a);
    },
    //Tree mutation
    appendChild(a, s) {
      const l = a.children[a.children.length - 1];
      l && (l.next = s, s.prev = l), a.children.push(s), s.parent = a;
    },
    insertBefore(a, s, l) {
      const u = a.children.indexOf(l), {
        prev: c
      } = l;
      c && (c.next = s, s.prev = c), l.prev = s, s.next = l, a.children.splice(u, 0, s), s.parent = a;
    },
    setTemplateContent(a, s) {
      e12.adapter.appendChild(a, s);
    },
    getTemplateContent(a) {
      return a.children[0];
    },
    setDocumentType(a, s, l, u) {
      const c = o(s, l, u);
      let f = a.children.find((h) => (0, r.isDirective)(h) && h.name === "!doctype");
      f ? f.data = c ?? null : (f = new r.ProcessingInstruction("!doctype", c), e12.adapter.appendChild(a, f)), f["x-name"] = s ?? void 0, f["x-publicId"] = l ?? void 0, f["x-systemId"] = u ?? void 0;
    },
    setDocumentMode(a, s) {
      a["x-mode"] = s;
    },
    getDocumentMode(a) {
      return a["x-mode"];
    },
    detachNode(a) {
      if (a.parent) {
        const s = a.parent.children.indexOf(a), {
          prev: l,
          next: u
        } = a;
        a.prev = null, a.next = null, l && (l.next = u), u && (u.prev = l), a.parent.children.splice(s, 1), a.parent = null;
      }
    },
    insertText(a, s) {
      const l = a.children[a.children.length - 1];
      l && (0, r.isText)(l) ? l.data += s : e12.adapter.appendChild(a, n(s));
    },
    insertTextBefore(a, s, l) {
      const u = a.children[a.children.indexOf(l) - 1];
      u && (0, r.isText)(u) ? u.data += s : e12.adapter.insertBefore(a, n(s), l);
    },
    adoptAttributes(a, s) {
      for (let l = 0; l < s.length; l++) {
        const u = s[l].name;
        typeof a.attribs[u] > "u" && (a.attribs[u] = s[l].value, a["x-attribsNamespace"][u] = s[l].namespace, a["x-attribsPrefix"][u] = s[l].prefix);
      }
    },
    //Tree traversing
    getFirstChild(a) {
      return a.children[0];
    },
    getChildNodes(a) {
      return a.children;
    },
    getParentNode(a) {
      return a.parent;
    },
    getAttrList(a) {
      return a.attributes;
    },
    //Node data
    getTagName(a) {
      return a.name;
    },
    getNamespaceURI(a) {
      return a.namespace;
    },
    getTextNodeContent(a) {
      return a.data;
    },
    getCommentNodeContent(a) {
      return a.data;
    },
    getDocumentTypeNodeName(a) {
      var s;
      return (s = a["x-name"]) !== null && s !== void 0 ? s : "";
    },
    getDocumentTypeNodePublicId(a) {
      var s;
      return (s = a["x-publicId"]) !== null && s !== void 0 ? s : "";
    },
    getDocumentTypeNodeSystemId(a) {
      var s;
      return (s = a["x-systemId"]) !== null && s !== void 0 ? s : "";
    },
    //Node types
    isDocumentTypeNode(a) {
      return (0, r.isDirective)(a) && a.name === "!doctype";
    },
    // Source code location
    setNodeSourceCodeLocation(a, s) {
      s && (a.startIndex = s.startOffset, a.endIndex = s.endOffset), a.sourceCodeLocation = s;
    },
    getNodeSourceCodeLocation(a) {
      return a.sourceCodeLocation;
    },
    updateNodeSourceCodeLocation(a, s) {
      s.endOffset != null && (a.endIndex = s.endOffset), a.sourceCodeLocation = Object.assign(Object.assign({}, a.sourceCodeLocation), s);
    }
  };
})(sY);
var cPe = De && De.__spreadArray || function(e12, t, r) {
  if (r || arguments.length === 2)
    for (var n = 0, i = t.length, o; n < i; n++)
      (o || !(n in t)) && (o || (o = Array.prototype.slice.call(t, 0, n)), o[n] = t[n]);
  return e12.concat(o || Array.prototype.slice.call(t));
};
Object.defineProperty(wd, "__esModule", {
  value: true
});
wd.renderWithParse5 = wd.parseWithParse5 = void 0;
var uPe = ni;
var aC = xW;
var $Y = sY;
function hPe(e12, t, r, n) {
  var i = {
    scriptingEnabled: typeof t.scriptingEnabled == "boolean" ? t.scriptingEnabled : true,
    treeAdapter: $Y.adapter,
    sourceCodeLocationInfo: t.sourceCodeLocationInfo
  };
  return r ? (0, aC.parse)(e12, i) : (0, aC.parseFragment)(n, e12, i);
}
wd.parseWithParse5 = hPe;
var fPe = {
  treeAdapter: $Y.adapter
};
function dPe(e12) {
  for (var t, r = ("length" in e12) ? e12 : [e12], n = 0; n < r.length; n += 1) {
    var i = r[n];
    (0, uPe.isDocument)(i) && (t = Array.prototype.splice).call.apply(t, cPe([r, n, 1], i.children, false));
  }
  for (var o = "", n = 0; n < r.length; n += 1) {
    var i = r[n];
    o += (0, aC.serializeOuter)(i, fPe);
  }
  return o;
}
wd.renderWithParse5 = dPe;
var HY = {};
var dv = {};
var GN = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.QuoteType = void 0;
  var t = bu, r;
  (function(h) {
    h[h.Tab = 9] = "Tab", h[h.NewLine = 10] = "NewLine", h[h.FormFeed = 12] = "FormFeed", h[h.CarriageReturn = 13] = "CarriageReturn", h[h.Space = 32] = "Space", h[h.ExclamationMark = 33] = "ExclamationMark", h[h.Number = 35] = "Number", h[h.Amp = 38] = "Amp", h[h.SingleQuote = 39] = "SingleQuote", h[h.DoubleQuote = 34] = "DoubleQuote", h[h.Dash = 45] = "Dash", h[h.Slash = 47] = "Slash", h[h.Zero = 48] = "Zero", h[h.Nine = 57] = "Nine", h[h.Semi = 59] = "Semi", h[h.Lt = 60] = "Lt", h[h.Eq = 61] = "Eq", h[h.Gt = 62] = "Gt", h[h.Questionmark = 63] = "Questionmark", h[h.UpperA = 65] = "UpperA", h[h.LowerA = 97] = "LowerA", h[h.UpperF = 70] = "UpperF", h[h.LowerF = 102] = "LowerF", h[h.UpperZ = 90] = "UpperZ", h[h.LowerZ = 122] = "LowerZ", h[h.LowerX = 120] = "LowerX", h[h.OpeningSquareBracket = 91] = "OpeningSquareBracket";
  })(r || (r = {}));
  var n;
  (function(h) {
    h[h.Text = 1] = "Text", h[h.BeforeTagName = 2] = "BeforeTagName", h[h.InTagName = 3] = "InTagName", h[h.InSelfClosingTag = 4] = "InSelfClosingTag", h[h.BeforeClosingTagName = 5] = "BeforeClosingTagName", h[h.InClosingTagName = 6] = "InClosingTagName", h[h.AfterClosingTagName = 7] = "AfterClosingTagName", h[h.BeforeAttributeName = 8] = "BeforeAttributeName", h[h.InAttributeName = 9] = "InAttributeName", h[h.AfterAttributeName = 10] = "AfterAttributeName", h[h.BeforeAttributeValue = 11] = "BeforeAttributeValue", h[h.InAttributeValueDq = 12] = "InAttributeValueDq", h[h.InAttributeValueSq = 13] = "InAttributeValueSq", h[h.InAttributeValueNq = 14] = "InAttributeValueNq", h[h.BeforeDeclaration = 15] = "BeforeDeclaration", h[h.InDeclaration = 16] = "InDeclaration", h[h.InProcessingInstruction = 17] = "InProcessingInstruction", h[h.BeforeComment = 18] = "BeforeComment", h[h.CDATASequence = 19] = "CDATASequence", h[h.InSpecialComment = 20] = "InSpecialComment", h[h.InCommentLike = 21] = "InCommentLike", h[h.BeforeSpecialS = 22] = "BeforeSpecialS", h[h.SpecialStartSequence = 23] = "SpecialStartSequence", h[h.InSpecialTag = 24] = "InSpecialTag", h[h.BeforeEntity = 25] = "BeforeEntity", h[h.BeforeNumericEntity = 26] = "BeforeNumericEntity", h[h.InNamedEntity = 27] = "InNamedEntity", h[h.InNumericEntity = 28] = "InNumericEntity", h[h.InHexEntity = 29] = "InHexEntity";
  })(n || (n = {}));
  function i(h) {
    return h === r.Space || h === r.NewLine || h === r.Tab || h === r.FormFeed || h === r.CarriageReturn;
  }
  function o(h) {
    return h === r.Slash || h === r.Gt || i(h);
  }
  function a(h) {
    return h >= r.Zero && h <= r.Nine;
  }
  function s(h) {
    return h >= r.LowerA && h <= r.LowerZ || h >= r.UpperA && h <= r.UpperZ;
  }
  function l(h) {
    return h >= r.UpperA && h <= r.UpperF || h >= r.LowerA && h <= r.LowerF;
  }
  var u;
  (function(h) {
    h[h.NoValue = 0] = "NoValue", h[h.Unquoted = 1] = "Unquoted", h[h.Single = 2] = "Single", h[h.Double = 3] = "Double";
  })(u = e12.QuoteType || (e12.QuoteType = {}));
  var c = {
    Cdata: new Uint8Array([67, 68, 65, 84, 65, 91]),
    CdataEnd: new Uint8Array([93, 93, 62]),
    CommentEnd: new Uint8Array([45, 45, 62]),
    ScriptEnd: new Uint8Array([60, 47, 115, 99, 114, 105, 112, 116]),
    StyleEnd: new Uint8Array([60, 47, 115, 116, 121, 108, 101]),
    TitleEnd: new Uint8Array([60, 47, 116, 105, 116, 108, 101])
    // `</title`
  }, f = (
    /** @class */
    function() {
      function h(d, p) {
        var m = d.xmlMode, g = m === void 0 ? false : m, v = d.decodeEntities, _ = v === void 0 ? true : v;
        this.cbs = p, this.state = n.Text, this.buffer = "", this.sectionStart = 0, this.index = 0, this.baseState = n.Text, this.isSpecial = false, this.running = true, this.offset = 0, this.currentSequence = void 0, this.sequenceIndex = 0, this.trieIndex = 0, this.trieCurrent = 0, this.entityResult = 0, this.entityExcess = 0, this.xmlMode = g, this.decodeEntities = _, this.entityTrie = g ? t.xmlDecodeTree : t.htmlDecodeTree;
      }
      return h.prototype.reset = function() {
        this.state = n.Text, this.buffer = "", this.sectionStart = 0, this.index = 0, this.baseState = n.Text, this.currentSequence = void 0, this.running = true, this.offset = 0;
      }, h.prototype.write = function(d) {
        this.offset += this.buffer.length, this.buffer = d, this.parse();
      }, h.prototype.end = function() {
        this.running && this.finish();
      }, h.prototype.pause = function() {
        this.running = false;
      }, h.prototype.resume = function() {
        this.running = true, this.index < this.buffer.length + this.offset && this.parse();
      }, h.prototype.getIndex = function() {
        return this.index;
      }, h.prototype.getSectionStart = function() {
        return this.sectionStart;
      }, h.prototype.stateText = function(d) {
        d === r.Lt || !this.decodeEntities && this.fastForwardTo(r.Lt) ? (this.index > this.sectionStart && this.cbs.ontext(this.sectionStart, this.index), this.state = n.BeforeTagName, this.sectionStart = this.index) : this.decodeEntities && d === r.Amp && (this.state = n.BeforeEntity);
      }, h.prototype.stateSpecialStartSequence = function(d) {
        var p = this.sequenceIndex === this.currentSequence.length, m = p ? (
          // If we are at the end of the sequence, make sure the tag name has ended
          o(d)
        ) : (
          // Otherwise, do a case-insensitive comparison
          (d | 32) === this.currentSequence[this.sequenceIndex]
        );
        if (!m)
          this.isSpecial = false;
        else if (!p) {
          this.sequenceIndex++;
          return;
        }
        this.sequenceIndex = 0, this.state = n.InTagName, this.stateInTagName(d);
      }, h.prototype.stateInSpecialTag = function(d) {
        if (this.sequenceIndex === this.currentSequence.length) {
          if (d === r.Gt || i(d)) {
            var p = this.index - this.currentSequence.length;
            if (this.sectionStart < p) {
              var m = this.index;
              this.index = p, this.cbs.ontext(this.sectionStart, p), this.index = m;
            }
            this.isSpecial = false, this.sectionStart = p + 2, this.stateInClosingTagName(d);
            return;
          }
          this.sequenceIndex = 0;
        }
        (d | 32) === this.currentSequence[this.sequenceIndex] ? this.sequenceIndex += 1 : this.sequenceIndex === 0 ? this.currentSequence === c.TitleEnd ? this.decodeEntities && d === r.Amp && (this.state = n.BeforeEntity) : this.fastForwardTo(r.Lt) && (this.sequenceIndex = 1) : this.sequenceIndex = +(d === r.Lt);
      }, h.prototype.stateCDATASequence = function(d) {
        d === c.Cdata[this.sequenceIndex] ? ++this.sequenceIndex === c.Cdata.length && (this.state = n.InCommentLike, this.currentSequence = c.CdataEnd, this.sequenceIndex = 0, this.sectionStart = this.index + 1) : (this.sequenceIndex = 0, this.state = n.InDeclaration, this.stateInDeclaration(d));
      }, h.prototype.fastForwardTo = function(d) {
        for (; ++this.index < this.buffer.length + this.offset; )
          if (this.buffer.charCodeAt(this.index - this.offset) === d)
            return true;
        return this.index = this.buffer.length + this.offset - 1, false;
      }, h.prototype.stateInCommentLike = function(d) {
        d === this.currentSequence[this.sequenceIndex] ? ++this.sequenceIndex === this.currentSequence.length && (this.currentSequence === c.CdataEnd ? this.cbs.oncdata(this.sectionStart, this.index, 2) : this.cbs.oncomment(this.sectionStart, this.index, 2), this.sequenceIndex = 0, this.sectionStart = this.index + 1, this.state = n.Text) : this.sequenceIndex === 0 ? this.fastForwardTo(this.currentSequence[0]) && (this.sequenceIndex = 1) : d !== this.currentSequence[this.sequenceIndex - 1] && (this.sequenceIndex = 0);
      }, h.prototype.isTagStartChar = function(d) {
        return this.xmlMode ? !o(d) : s(d);
      }, h.prototype.startSpecial = function(d, p) {
        this.isSpecial = true, this.currentSequence = d, this.sequenceIndex = p, this.state = n.SpecialStartSequence;
      }, h.prototype.stateBeforeTagName = function(d) {
        if (d === r.ExclamationMark)
          this.state = n.BeforeDeclaration, this.sectionStart = this.index + 1;
        else if (d === r.Questionmark)
          this.state = n.InProcessingInstruction, this.sectionStart = this.index + 1;
        else if (this.isTagStartChar(d)) {
          var p = d | 32;
          this.sectionStart = this.index, !this.xmlMode && p === c.TitleEnd[2] ? this.startSpecial(c.TitleEnd, 3) : this.state = !this.xmlMode && p === c.ScriptEnd[2] ? n.BeforeSpecialS : n.InTagName;
        } else
          d === r.Slash ? this.state = n.BeforeClosingTagName : (this.state = n.Text, this.stateText(d));
      }, h.prototype.stateInTagName = function(d) {
        o(d) && (this.cbs.onopentagname(this.sectionStart, this.index), this.sectionStart = -1, this.state = n.BeforeAttributeName, this.stateBeforeAttributeName(d));
      }, h.prototype.stateBeforeClosingTagName = function(d) {
        i(d) || (d === r.Gt ? this.state = n.Text : (this.state = this.isTagStartChar(d) ? n.InClosingTagName : n.InSpecialComment, this.sectionStart = this.index));
      }, h.prototype.stateInClosingTagName = function(d) {
        (d === r.Gt || i(d)) && (this.cbs.onclosetag(this.sectionStart, this.index), this.sectionStart = -1, this.state = n.AfterClosingTagName, this.stateAfterClosingTagName(d));
      }, h.prototype.stateAfterClosingTagName = function(d) {
        (d === r.Gt || this.fastForwardTo(r.Gt)) && (this.state = n.Text, this.baseState = n.Text, this.sectionStart = this.index + 1);
      }, h.prototype.stateBeforeAttributeName = function(d) {
        d === r.Gt ? (this.cbs.onopentagend(this.index), this.isSpecial ? (this.state = n.InSpecialTag, this.sequenceIndex = 0) : this.state = n.Text, this.baseState = this.state, this.sectionStart = this.index + 1) : d === r.Slash ? this.state = n.InSelfClosingTag : i(d) || (this.state = n.InAttributeName, this.sectionStart = this.index);
      }, h.prototype.stateInSelfClosingTag = function(d) {
        d === r.Gt ? (this.cbs.onselfclosingtag(this.index), this.state = n.Text, this.baseState = n.Text, this.sectionStart = this.index + 1, this.isSpecial = false) : i(d) || (this.state = n.BeforeAttributeName, this.stateBeforeAttributeName(d));
      }, h.prototype.stateInAttributeName = function(d) {
        (d === r.Eq || o(d)) && (this.cbs.onattribname(this.sectionStart, this.index), this.sectionStart = -1, this.state = n.AfterAttributeName, this.stateAfterAttributeName(d));
      }, h.prototype.stateAfterAttributeName = function(d) {
        d === r.Eq ? this.state = n.BeforeAttributeValue : d === r.Slash || d === r.Gt ? (this.cbs.onattribend(u.NoValue, this.index), this.state = n.BeforeAttributeName, this.stateBeforeAttributeName(d)) : i(d) || (this.cbs.onattribend(u.NoValue, this.index), this.state = n.InAttributeName, this.sectionStart = this.index);
      }, h.prototype.stateBeforeAttributeValue = function(d) {
        d === r.DoubleQuote ? (this.state = n.InAttributeValueDq, this.sectionStart = this.index + 1) : d === r.SingleQuote ? (this.state = n.InAttributeValueSq, this.sectionStart = this.index + 1) : i(d) || (this.sectionStart = this.index, this.state = n.InAttributeValueNq, this.stateInAttributeValueNoQuotes(d));
      }, h.prototype.handleInAttributeValue = function(d, p) {
        d === p || !this.decodeEntities && this.fastForwardTo(p) ? (this.cbs.onattribdata(this.sectionStart, this.index), this.sectionStart = -1, this.cbs.onattribend(p === r.DoubleQuote ? u.Double : u.Single, this.index), this.state = n.BeforeAttributeName) : this.decodeEntities && d === r.Amp && (this.baseState = this.state, this.state = n.BeforeEntity);
      }, h.prototype.stateInAttributeValueDoubleQuotes = function(d) {
        this.handleInAttributeValue(d, r.DoubleQuote);
      }, h.prototype.stateInAttributeValueSingleQuotes = function(d) {
        this.handleInAttributeValue(d, r.SingleQuote);
      }, h.prototype.stateInAttributeValueNoQuotes = function(d) {
        i(d) || d === r.Gt ? (this.cbs.onattribdata(this.sectionStart, this.index), this.sectionStart = -1, this.cbs.onattribend(u.Unquoted, this.index), this.state = n.BeforeAttributeName, this.stateBeforeAttributeName(d)) : this.decodeEntities && d === r.Amp && (this.baseState = this.state, this.state = n.BeforeEntity);
      }, h.prototype.stateBeforeDeclaration = function(d) {
        d === r.OpeningSquareBracket ? (this.state = n.CDATASequence, this.sequenceIndex = 0) : this.state = d === r.Dash ? n.BeforeComment : n.InDeclaration;
      }, h.prototype.stateInDeclaration = function(d) {
        (d === r.Gt || this.fastForwardTo(r.Gt)) && (this.cbs.ondeclaration(this.sectionStart, this.index), this.state = n.Text, this.sectionStart = this.index + 1);
      }, h.prototype.stateInProcessingInstruction = function(d) {
        (d === r.Gt || this.fastForwardTo(r.Gt)) && (this.cbs.onprocessinginstruction(this.sectionStart, this.index), this.state = n.Text, this.sectionStart = this.index + 1);
      }, h.prototype.stateBeforeComment = function(d) {
        d === r.Dash ? (this.state = n.InCommentLike, this.currentSequence = c.CommentEnd, this.sequenceIndex = 2, this.sectionStart = this.index + 1) : this.state = n.InDeclaration;
      }, h.prototype.stateInSpecialComment = function(d) {
        (d === r.Gt || this.fastForwardTo(r.Gt)) && (this.cbs.oncomment(this.sectionStart, this.index, 0), this.state = n.Text, this.sectionStart = this.index + 1);
      }, h.prototype.stateBeforeSpecialS = function(d) {
        var p = d | 32;
        p === c.ScriptEnd[3] ? this.startSpecial(c.ScriptEnd, 4) : p === c.StyleEnd[3] ? this.startSpecial(c.StyleEnd, 4) : (this.state = n.InTagName, this.stateInTagName(d));
      }, h.prototype.stateBeforeEntity = function(d) {
        this.entityExcess = 1, this.entityResult = 0, d === r.Number ? this.state = n.BeforeNumericEntity : d === r.Amp || (this.trieIndex = 0, this.trieCurrent = this.entityTrie[0], this.state = n.InNamedEntity, this.stateInNamedEntity(d));
      }, h.prototype.stateInNamedEntity = function(d) {
        if (this.entityExcess += 1, this.trieIndex = (0, t.determineBranch)(this.entityTrie, this.trieCurrent, this.trieIndex + 1, d), this.trieIndex < 0) {
          this.emitNamedEntity(), this.index--;
          return;
        }
        this.trieCurrent = this.entityTrie[this.trieIndex];
        var p = this.trieCurrent & t.BinTrieFlags.VALUE_LENGTH;
        if (p) {
          var m = (p >> 14) - 1;
          if (!this.allowLegacyEntity() && d !== r.Semi)
            this.trieIndex += m;
          else {
            var g = this.index - this.entityExcess + 1;
            g > this.sectionStart && this.emitPartial(this.sectionStart, g), this.entityResult = this.trieIndex, this.trieIndex += m, this.entityExcess = 0, this.sectionStart = this.index + 1, m === 0 && this.emitNamedEntity();
          }
        }
      }, h.prototype.emitNamedEntity = function() {
        if (this.state = this.baseState, this.entityResult !== 0) {
          var d = (this.entityTrie[this.entityResult] & t.BinTrieFlags.VALUE_LENGTH) >> 14;
          switch (d) {
            case 1: {
              this.emitCodePoint(this.entityTrie[this.entityResult] & ~t.BinTrieFlags.VALUE_LENGTH);
              break;
            }
            case 2: {
              this.emitCodePoint(this.entityTrie[this.entityResult + 1]);
              break;
            }
            case 3:
              this.emitCodePoint(this.entityTrie[this.entityResult + 1]), this.emitCodePoint(this.entityTrie[this.entityResult + 2]);
          }
        }
      }, h.prototype.stateBeforeNumericEntity = function(d) {
        (d | 32) === r.LowerX ? (this.entityExcess++, this.state = n.InHexEntity) : (this.state = n.InNumericEntity, this.stateInNumericEntity(d));
      }, h.prototype.emitNumericEntity = function(d) {
        var p = this.index - this.entityExcess - 1, m = p + 2 + +(this.state === n.InHexEntity);
        m !== this.index && (p > this.sectionStart && this.emitPartial(this.sectionStart, p), this.sectionStart = this.index + Number(d), this.emitCodePoint((0, t.replaceCodePoint)(this.entityResult))), this.state = this.baseState;
      }, h.prototype.stateInNumericEntity = function(d) {
        d === r.Semi ? this.emitNumericEntity(true) : a(d) ? (this.entityResult = this.entityResult * 10 + (d - r.Zero), this.entityExcess++) : (this.allowLegacyEntity() ? this.emitNumericEntity(false) : this.state = this.baseState, this.index--);
      }, h.prototype.stateInHexEntity = function(d) {
        d === r.Semi ? this.emitNumericEntity(true) : a(d) ? (this.entityResult = this.entityResult * 16 + (d - r.Zero), this.entityExcess++) : l(d) ? (this.entityResult = this.entityResult * 16 + ((d | 32) - r.LowerA + 10), this.entityExcess++) : (this.allowLegacyEntity() ? this.emitNumericEntity(false) : this.state = this.baseState, this.index--);
      }, h.prototype.allowLegacyEntity = function() {
        return !this.xmlMode && (this.baseState === n.Text || this.baseState === n.InSpecialTag);
      }, h.prototype.cleanup = function() {
        this.running && this.sectionStart !== this.index && (this.state === n.Text || this.state === n.InSpecialTag && this.sequenceIndex === 0 ? (this.cbs.ontext(this.sectionStart, this.index), this.sectionStart = this.index) : (this.state === n.InAttributeValueDq || this.state === n.InAttributeValueSq || this.state === n.InAttributeValueNq) && (this.cbs.onattribdata(this.sectionStart, this.index), this.sectionStart = this.index));
      }, h.prototype.shouldContinue = function() {
        return this.index < this.buffer.length + this.offset && this.running;
      }, h.prototype.parse = function() {
        for (; this.shouldContinue(); ) {
          var d = this.buffer.charCodeAt(this.index - this.offset);
          switch (this.state) {
            case n.Text: {
              this.stateText(d);
              break;
            }
            case n.SpecialStartSequence: {
              this.stateSpecialStartSequence(d);
              break;
            }
            case n.InSpecialTag: {
              this.stateInSpecialTag(d);
              break;
            }
            case n.CDATASequence: {
              this.stateCDATASequence(d);
              break;
            }
            case n.InAttributeValueDq: {
              this.stateInAttributeValueDoubleQuotes(d);
              break;
            }
            case n.InAttributeName: {
              this.stateInAttributeName(d);
              break;
            }
            case n.InCommentLike: {
              this.stateInCommentLike(d);
              break;
            }
            case n.InSpecialComment: {
              this.stateInSpecialComment(d);
              break;
            }
            case n.BeforeAttributeName: {
              this.stateBeforeAttributeName(d);
              break;
            }
            case n.InTagName: {
              this.stateInTagName(d);
              break;
            }
            case n.InClosingTagName: {
              this.stateInClosingTagName(d);
              break;
            }
            case n.BeforeTagName: {
              this.stateBeforeTagName(d);
              break;
            }
            case n.AfterAttributeName: {
              this.stateAfterAttributeName(d);
              break;
            }
            case n.InAttributeValueSq: {
              this.stateInAttributeValueSingleQuotes(d);
              break;
            }
            case n.BeforeAttributeValue: {
              this.stateBeforeAttributeValue(d);
              break;
            }
            case n.BeforeClosingTagName: {
              this.stateBeforeClosingTagName(d);
              break;
            }
            case n.AfterClosingTagName: {
              this.stateAfterClosingTagName(d);
              break;
            }
            case n.BeforeSpecialS: {
              this.stateBeforeSpecialS(d);
              break;
            }
            case n.InAttributeValueNq: {
              this.stateInAttributeValueNoQuotes(d);
              break;
            }
            case n.InSelfClosingTag: {
              this.stateInSelfClosingTag(d);
              break;
            }
            case n.InDeclaration: {
              this.stateInDeclaration(d);
              break;
            }
            case n.BeforeDeclaration: {
              this.stateBeforeDeclaration(d);
              break;
            }
            case n.BeforeComment: {
              this.stateBeforeComment(d);
              break;
            }
            case n.InProcessingInstruction: {
              this.stateInProcessingInstruction(d);
              break;
            }
            case n.InNamedEntity: {
              this.stateInNamedEntity(d);
              break;
            }
            case n.BeforeEntity: {
              this.stateBeforeEntity(d);
              break;
            }
            case n.InHexEntity: {
              this.stateInHexEntity(d);
              break;
            }
            case n.InNumericEntity: {
              this.stateInNumericEntity(d);
              break;
            }
            default:
              this.stateBeforeNumericEntity(d);
          }
          this.index++;
        }
        this.cleanup();
      }, h.prototype.finish = function() {
        this.state === n.InNamedEntity && this.emitNamedEntity(), this.sectionStart < this.index && this.handleTrailingData(), this.cbs.onend();
      }, h.prototype.handleTrailingData = function() {
        var d = this.buffer.length + this.offset;
        this.state === n.InCommentLike ? this.currentSequence === c.CdataEnd ? this.cbs.oncdata(this.sectionStart, d, 0) : this.cbs.oncomment(this.sectionStart, d, 0) : this.state === n.InNumericEntity && this.allowLegacyEntity() ? this.emitNumericEntity(false) : this.state === n.InHexEntity && this.allowLegacyEntity() ? this.emitNumericEntity(false) : this.state === n.InTagName || this.state === n.BeforeAttributeName || this.state === n.BeforeAttributeValue || this.state === n.AfterAttributeName || this.state === n.InAttributeName || this.state === n.InAttributeValueSq || this.state === n.InAttributeValueDq || this.state === n.InAttributeValueNq || this.state === n.InClosingTagName || this.cbs.ontext(this.sectionStart, d);
      }, h.prototype.emitPartial = function(d, p) {
        this.baseState !== n.Text && this.baseState !== n.InSpecialTag ? this.cbs.onattribdata(d, p) : this.cbs.ontext(d, p);
      }, h.prototype.emitCodePoint = function(d) {
        this.baseState !== n.Text && this.baseState !== n.InSpecialTag ? this.cbs.onattribentity(d) : this.cbs.ontextentity(d);
      }, h;
    }()
  );
  e12.default = f;
})(GN);
var pPe = De && De.__createBinding || (Object.create ? function(e12, t, r, n) {
  n === void 0 && (n = r);
  var i = Object.getOwnPropertyDescriptor(t, r);
  (!i || ("get" in i ? !t.__esModule : i.writable || i.configurable)) && (i = {
    enumerable: true,
    get: function() {
      return t[r];
    }
  }), Object.defineProperty(e12, n, i);
} : function(e12, t, r, n) {
  n === void 0 && (n = r), e12[n] = t[r];
});
var mPe = De && De.__setModuleDefault || (Object.create ? function(e12, t) {
  Object.defineProperty(e12, "default", {
    enumerable: true,
    value: t
  });
} : function(e12, t) {
  e12.default = t;
});
var gPe = De && De.__importStar || function(e12) {
  if (e12 && e12.__esModule)
    return e12;
  var t = {};
  if (e12 != null)
    for (var r in e12)
      r !== "default" && Object.prototype.hasOwnProperty.call(e12, r) && pPe(t, e12, r);
  return mPe(t, e12), t;
};
Object.defineProperty(dv, "__esModule", {
  value: true
});
dv.Parser = void 0;
var b_ = gPe(GN);
var f3 = bu;
var kh = /* @__PURE__ */ new Set(["input", "option", "optgroup", "select", "button", "datalist", "textarea"]);
var _r = /* @__PURE__ */ new Set(["p"]);
var d3 = /* @__PURE__ */ new Set(["thead", "tbody"]);
var p3 = /* @__PURE__ */ new Set(["dd", "dt"]);
var m3 = /* @__PURE__ */ new Set(["rt", "rp"]);
var vPe = /* @__PURE__ */ new Map([["tr", /* @__PURE__ */ new Set(["tr", "th", "td"])], ["th", /* @__PURE__ */ new Set(["th"])], ["td", /* @__PURE__ */ new Set(["thead", "th", "td"])], ["body", /* @__PURE__ */ new Set(["head", "link", "script"])], ["li", /* @__PURE__ */ new Set(["li"])], ["p", _r], ["h1", _r], ["h2", _r], ["h3", _r], ["h4", _r], ["h5", _r], ["h6", _r], ["select", kh], ["input", kh], ["output", kh], ["button", kh], ["datalist", kh], ["textarea", kh], ["option", /* @__PURE__ */ new Set(["option"])], ["optgroup", /* @__PURE__ */ new Set(["optgroup", "option"])], ["dd", p3], ["dt", p3], ["address", _r], ["article", _r], ["aside", _r], ["blockquote", _r], ["details", _r], ["div", _r], ["dl", _r], ["fieldset", _r], ["figcaption", _r], ["figure", _r], ["footer", _r], ["form", _r], ["header", _r], ["hr", _r], ["main", _r], ["nav", _r], ["ol", _r], ["pre", _r], ["section", _r], ["table", _r], ["ul", _r], ["rt", m3], ["rp", m3], ["tbody", d3], ["tfoot", d3]]);
var yPe = /* @__PURE__ */ new Set(["area", "base", "basefont", "br", "col", "command", "embed", "frame", "hr", "img", "input", "isindex", "keygen", "link", "meta", "param", "source", "track", "wbr"]);
var g3 = /* @__PURE__ */ new Set(["math", "svg"]);
var v3 = /* @__PURE__ */ new Set(["mi", "mo", "mn", "ms", "mtext", "annotation-xml", "foreignobject", "desc", "title"]);
var _Pe = /\s|\//;
var bPe = (
  /** @class */
  function() {
    function e12(t, r) {
      r === void 0 && (r = {});
      var n, i, o, a, s;
      this.options = r, this.startIndex = 0, this.endIndex = 0, this.openTagStart = 0, this.tagname = "", this.attribname = "", this.attribvalue = "", this.attribs = null, this.stack = [], this.foreignContext = [], this.buffers = [], this.bufferOffset = 0, this.writeIndex = 0, this.ended = false, this.cbs = t ?? {}, this.lowerCaseTagNames = (n = r.lowerCaseTags) !== null && n !== void 0 ? n : !r.xmlMode, this.lowerCaseAttributeNames = (i = r.lowerCaseAttributeNames) !== null && i !== void 0 ? i : !r.xmlMode, this.tokenizer = new ((o = r.Tokenizer) !== null && o !== void 0 ? o : b_.default)(this.options, this), (s = (a = this.cbs).onparserinit) === null || s === void 0 || s.call(a, this);
    }
    return e12.prototype.ontext = function(t, r) {
      var n, i, o = this.getSlice(t, r);
      this.endIndex = r - 1, (i = (n = this.cbs).ontext) === null || i === void 0 || i.call(n, o), this.startIndex = r;
    }, e12.prototype.ontextentity = function(t) {
      var r, n, i = this.tokenizer.getSectionStart();
      this.endIndex = i - 1, (n = (r = this.cbs).ontext) === null || n === void 0 || n.call(r, (0, f3.fromCodePoint)(t)), this.startIndex = i;
    }, e12.prototype.isVoidElement = function(t) {
      return !this.options.xmlMode && yPe.has(t);
    }, e12.prototype.onopentagname = function(t, r) {
      this.endIndex = r;
      var n = this.getSlice(t, r);
      this.lowerCaseTagNames && (n = n.toLowerCase()), this.emitOpenTag(n);
    }, e12.prototype.emitOpenTag = function(t) {
      var r, n, i, o;
      this.openTagStart = this.startIndex, this.tagname = t;
      var a = !this.options.xmlMode && vPe.get(t);
      if (a)
        for (; this.stack.length > 0 && a.has(this.stack[this.stack.length - 1]); ) {
          var s = this.stack.pop();
          (n = (r = this.cbs).onclosetag) === null || n === void 0 || n.call(r, s, true);
        }
      this.isVoidElement(t) || (this.stack.push(t), g3.has(t) ? this.foreignContext.push(true) : v3.has(t) && this.foreignContext.push(false)), (o = (i = this.cbs).onopentagname) === null || o === void 0 || o.call(i, t), this.cbs.onopentag && (this.attribs = {});
    }, e12.prototype.endOpenTag = function(t) {
      var r, n;
      this.startIndex = this.openTagStart, this.attribs && ((n = (r = this.cbs).onopentag) === null || n === void 0 || n.call(r, this.tagname, this.attribs, t), this.attribs = null), this.cbs.onclosetag && this.isVoidElement(this.tagname) && this.cbs.onclosetag(this.tagname, true), this.tagname = "";
    }, e12.prototype.onopentagend = function(t) {
      this.endIndex = t, this.endOpenTag(false), this.startIndex = t + 1;
    }, e12.prototype.onclosetag = function(t, r) {
      var n, i, o, a, s, l;
      this.endIndex = r;
      var u = this.getSlice(t, r);
      if (this.lowerCaseTagNames && (u = u.toLowerCase()), (g3.has(u) || v3.has(u)) && this.foreignContext.pop(), this.isVoidElement(u))
        !this.options.xmlMode && u === "br" && ((i = (n = this.cbs).onopentagname) === null || i === void 0 || i.call(n, "br"), (a = (o = this.cbs).onopentag) === null || a === void 0 || a.call(o, "br", {}, true), (l = (s = this.cbs).onclosetag) === null || l === void 0 || l.call(s, "br", false));
      else {
        var c = this.stack.lastIndexOf(u);
        if (c !== -1)
          if (this.cbs.onclosetag)
            for (var f = this.stack.length - c; f--; )
              this.cbs.onclosetag(this.stack.pop(), f !== 0);
          else
            this.stack.length = c;
        else
          !this.options.xmlMode && u === "p" && (this.emitOpenTag("p"), this.closeCurrentTag(true));
      }
      this.startIndex = r + 1;
    }, e12.prototype.onselfclosingtag = function(t) {
      this.endIndex = t, this.options.xmlMode || this.options.recognizeSelfClosing || this.foreignContext[this.foreignContext.length - 1] ? (this.closeCurrentTag(false), this.startIndex = t + 1) : this.onopentagend(t);
    }, e12.prototype.closeCurrentTag = function(t) {
      var r, n, i = this.tagname;
      this.endOpenTag(t), this.stack[this.stack.length - 1] === i && ((n = (r = this.cbs).onclosetag) === null || n === void 0 || n.call(r, i, !t), this.stack.pop());
    }, e12.prototype.onattribname = function(t, r) {
      this.startIndex = t;
      var n = this.getSlice(t, r);
      this.attribname = this.lowerCaseAttributeNames ? n.toLowerCase() : n;
    }, e12.prototype.onattribdata = function(t, r) {
      this.attribvalue += this.getSlice(t, r);
    }, e12.prototype.onattribentity = function(t) {
      this.attribvalue += (0, f3.fromCodePoint)(t);
    }, e12.prototype.onattribend = function(t, r) {
      var n, i;
      this.endIndex = r, (i = (n = this.cbs).onattribute) === null || i === void 0 || i.call(n, this.attribname, this.attribvalue, t === b_.QuoteType.Double ? '"' : t === b_.QuoteType.Single ? "'" : t === b_.QuoteType.NoValue ? void 0 : null), this.attribs && !Object.prototype.hasOwnProperty.call(this.attribs, this.attribname) && (this.attribs[this.attribname] = this.attribvalue), this.attribvalue = "";
    }, e12.prototype.getInstructionName = function(t) {
      var r = t.search(_Pe), n = r < 0 ? t : t.substr(0, r);
      return this.lowerCaseTagNames && (n = n.toLowerCase()), n;
    }, e12.prototype.ondeclaration = function(t, r) {
      this.endIndex = r;
      var n = this.getSlice(t, r);
      if (this.cbs.onprocessinginstruction) {
        var i = this.getInstructionName(n);
        this.cbs.onprocessinginstruction("!".concat(i), "!".concat(n));
      }
      this.startIndex = r + 1;
    }, e12.prototype.onprocessinginstruction = function(t, r) {
      this.endIndex = r;
      var n = this.getSlice(t, r);
      if (this.cbs.onprocessinginstruction) {
        var i = this.getInstructionName(n);
        this.cbs.onprocessinginstruction("?".concat(i), "?".concat(n));
      }
      this.startIndex = r + 1;
    }, e12.prototype.oncomment = function(t, r, n) {
      var i, o, a, s;
      this.endIndex = r, (o = (i = this.cbs).oncomment) === null || o === void 0 || o.call(i, this.getSlice(t, r - n)), (s = (a = this.cbs).oncommentend) === null || s === void 0 || s.call(a), this.startIndex = r + 1;
    }, e12.prototype.oncdata = function(t, r, n) {
      var i, o, a, s, l, u, c, f, h, d;
      this.endIndex = r;
      var p = this.getSlice(t, r - n);
      this.options.xmlMode || this.options.recognizeCDATA ? ((o = (i = this.cbs).oncdatastart) === null || o === void 0 || o.call(i), (s = (a = this.cbs).ontext) === null || s === void 0 || s.call(a, p), (u = (l = this.cbs).oncdataend) === null || u === void 0 || u.call(l)) : ((f = (c = this.cbs).oncomment) === null || f === void 0 || f.call(c, "[CDATA[".concat(p, "]]")), (d = (h = this.cbs).oncommentend) === null || d === void 0 || d.call(h)), this.startIndex = r + 1;
    }, e12.prototype.onend = function() {
      var t, r;
      if (this.cbs.onclosetag) {
        this.endIndex = this.startIndex;
        for (var n = this.stack.length; n > 0; this.cbs.onclosetag(this.stack[--n], true))
          ;
      }
      (r = (t = this.cbs).onend) === null || r === void 0 || r.call(t);
    }, e12.prototype.reset = function() {
      var t, r, n, i;
      (r = (t = this.cbs).onreset) === null || r === void 0 || r.call(t), this.tokenizer.reset(), this.tagname = "", this.attribname = "", this.attribs = null, this.stack.length = 0, this.startIndex = 0, this.endIndex = 0, (i = (n = this.cbs).onparserinit) === null || i === void 0 || i.call(n, this), this.buffers.length = 0, this.bufferOffset = 0, this.writeIndex = 0, this.ended = false;
    }, e12.prototype.parseComplete = function(t) {
      this.reset(), this.end(t);
    }, e12.prototype.getSlice = function(t, r) {
      for (; t - this.bufferOffset >= this.buffers[0].length; )
        this.shiftBuffer();
      for (var n = this.buffers[0].slice(t - this.bufferOffset, r - this.bufferOffset); r - this.bufferOffset > this.buffers[0].length; )
        this.shiftBuffer(), n += this.buffers[0].slice(0, r - this.bufferOffset);
      return n;
    }, e12.prototype.shiftBuffer = function() {
      this.bufferOffset += this.buffers[0].length, this.writeIndex--, this.buffers.shift();
    }, e12.prototype.write = function(t) {
      var r, n;
      if (this.ended) {
        (n = (r = this.cbs).onerror) === null || n === void 0 || n.call(r, new Error(".write() after done!"));
        return;
      }
      this.buffers.push(t), this.tokenizer.running && (this.tokenizer.write(t), this.writeIndex++);
    }, e12.prototype.end = function(t) {
      var r, n;
      if (this.ended) {
        (n = (r = this.cbs).onerror) === null || n === void 0 || n.call(r, new Error(".end() after done!"));
        return;
      }
      t && this.write(t), this.ended = true, this.tokenizer.end();
    }, e12.prototype.pause = function() {
      this.tokenizer.pause();
    }, e12.prototype.resume = function() {
      for (this.tokenizer.resume(); this.tokenizer.running && this.writeIndex < this.buffers.length; )
        this.tokenizer.write(this.buffers[this.writeIndex++]);
      this.ended && this.tokenizer.end();
    }, e12.prototype.parseChunk = function(t) {
      this.write(t);
    }, e12.prototype.done = function(t) {
      this.end(t);
    }, e12;
  }()
);
dv.Parser = bPe;
(function(e12) {
  var t = De && De.__createBinding || (Object.create ? function(v, _, y, b) {
    b === void 0 && (b = y);
    var T = Object.getOwnPropertyDescriptor(_, y);
    (!T || ("get" in T ? !_.__esModule : T.writable || T.configurable)) && (T = {
      enumerable: true,
      get: function() {
        return _[y];
      }
    }), Object.defineProperty(v, b, T);
  } : function(v, _, y, b) {
    b === void 0 && (b = y), v[b] = _[y];
  }), r = De && De.__setModuleDefault || (Object.create ? function(v, _) {
    Object.defineProperty(v, "default", {
      enumerable: true,
      value: _
    });
  } : function(v, _) {
    v.default = _;
  }), n = De && De.__importStar || function(v) {
    if (v && v.__esModule)
      return v;
    var _ = {};
    if (v != null)
      for (var y in v)
        y !== "default" && Object.prototype.hasOwnProperty.call(v, y) && t(_, v, y);
    return r(_, v), _;
  }, i = De && De.__importDefault || function(v) {
    return v && v.__esModule ? v : {
      default: v
    };
  };
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.DomUtils = e12.parseFeed = e12.getFeed = e12.ElementType = e12.Tokenizer = e12.createDomStream = e12.parseDOM = e12.parseDocument = e12.DefaultHandler = e12.DomHandler = e12.Parser = void 0;
  var o = dv, a = dv;
  Object.defineProperty(e12, "Parser", {
    enumerable: true,
    get: function() {
      return a.Parser;
    }
  });
  var s = ni, l = ni;
  Object.defineProperty(e12, "DomHandler", {
    enumerable: true,
    get: function() {
      return l.DomHandler;
    }
  }), Object.defineProperty(e12, "DefaultHandler", {
    enumerable: true,
    get: function() {
      return l.DomHandler;
    }
  });
  function u(v, _) {
    var y = new s.DomHandler(void 0, _);
    return new o.Parser(y, _).end(v), y.root;
  }
  e12.parseDocument = u;
  function c(v, _) {
    return u(v, _).children;
  }
  e12.parseDOM = c;
  function f(v, _, y) {
    var b = new s.DomHandler(v, _, y);
    return new o.Parser(b, _);
  }
  e12.createDomStream = f;
  var h = GN;
  Object.defineProperty(e12, "Tokenizer", {
    enumerable: true,
    get: function() {
      return i(h).default;
    }
  }), e12.ElementType = n(cp);
  var d = Jo, p = Jo;
  Object.defineProperty(e12, "getFeed", {
    enumerable: true,
    get: function() {
      return p.getFeed;
    }
  });
  var m = {
    xmlMode: true
  };
  function g(v, _) {
    return _ === void 0 && (_ = m), (0, d.getFeed)(c(v, _));
  }
  e12.parseFeed = g, e12.DomUtils = n(Jo);
})(HY);
(function(e12) {
  var t = De && De.__createBinding || (Object.create ? function(p, m, g, v) {
    v === void 0 && (v = g);
    var _ = Object.getOwnPropertyDescriptor(m, g);
    (!_ || ("get" in _ ? !m.__esModule : _.writable || _.configurable)) && (_ = {
      enumerable: true,
      get: function() {
        return m[g];
      }
    }), Object.defineProperty(p, v, _);
  } : function(p, m, g, v) {
    v === void 0 && (v = g), p[v] = m[g];
  }), r = De && De.__setModuleDefault || (Object.create ? function(p, m) {
    Object.defineProperty(p, "default", {
      enumerable: true,
      value: m
    });
  } : function(p, m) {
    p.default = m;
  }), n = De && De.__exportStar || function(p, m) {
    for (var g in p)
      g !== "default" && !Object.prototype.hasOwnProperty.call(m, g) && t(m, p, g);
  }, i = De && De.__importStar || function(p) {
    if (p && p.__esModule)
      return p;
    var m = {};
    if (p != null)
      for (var g in p)
        g !== "default" && Object.prototype.hasOwnProperty.call(p, g) && t(m, p, g);
    return r(m, p), m;
  }, o = De && De.__importDefault || function(p) {
    return p && p.__esModule ? p : {
      default: p
    };
  };
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.root = e12.parseHTML = e12.merge = e12.contains = e12.text = e12.xml = e12.html = e12.load = void 0, n(kX, e12);
  var a = x1, s = Eu, l = wd, u = o(up), c = HY, f = (0, s.getParse)(function(p, m, g, v) {
    return m.xmlMode || m._useHtmlParser2 ? (0, c.parseDocument)(p, m) : (0, l.parseWithParse5)(p, m, g, v);
  });
  e12.load = (0, a.getLoad)(f, function(p, m) {
    return m.xmlMode || m._useHtmlParser2 ? (0, u.default)(p, m) : (0, l.renderWithParse5)(p);
  }), e12.default = (0, e12.load)([]);
  var h = tn;
  Object.defineProperty(e12, "html", {
    enumerable: true,
    get: function() {
      return h.html;
    }
  }), Object.defineProperty(e12, "xml", {
    enumerable: true,
    get: function() {
      return h.xml;
    }
  }), Object.defineProperty(e12, "text", {
    enumerable: true,
    get: function() {
      return h.text;
    }
  });
  var d = i(tn);
  e12.contains = d.contains, e12.merge = d.merge, e12.parseHTML = d.parseHTML, e12.root = d.root;
})(xX);
var ah = {};
var cS = {};
var TPe = /* @__PURE__ */ function() {
  function e12(t, r) {
    for (var n = 0; n < r.length; n++) {
      var i = r[n];
      i.enumerable = i.enumerable || false, i.configurable = true, "value" in i && (i.writable = true), Object.defineProperty(t, i.key, i);
    }
  }
  return function(t, r, n) {
    return r && e12(t.prototype, r), n && e12(t, n), t;
  };
}();
function EPe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function T_(e12, t) {
  return new Error(String(e12) + " is a required method of " + String(t) + ", but was not implemented.");
}
var UY = function() {
  function e12() {
    EPe(this, e12), this.options = {};
  }
  return TPe(e12, [{
    key: "createRenderer",
    value: /* @__PURE__ */ function() {
      function t(r) {
        throw T_("createRenderer", "EnzymeAdapter");
      }
      return t;
    }()
    // converts an RSTNode to the corresponding JSX Pragma Element. This will be needed
    // in order to implement the `Wrapper.mount()` and `Wrapper.shallow()` methods, but should
    // be pretty straightforward for people to implement.
    // eslint-disable-next-line class-methods-use-this, no-unused-vars
  }, {
    key: "nodeToElement",
    value: /* @__PURE__ */ function() {
      function t(r) {
        throw T_("nodeToElement", "EnzymeAdapter");
      }
      return t;
    }()
    // eslint-disable-next-line class-methods-use-this
  }, {
    key: "matchesElementType",
    value: /* @__PURE__ */ function() {
      function t(r, n) {
        if (!r)
          return r;
        var i = r.type;
        return i === n;
      }
      return t;
    }()
    // eslint-disable-next-line class-methods-use-this, no-unused-vars
  }, {
    key: "isValidElement",
    value: /* @__PURE__ */ function() {
      function t(r) {
        throw T_("isValidElement", "EnzymeAdapter");
      }
      return t;
    }()
    // eslint-disable-next-line class-methods-use-this, no-unused-vars
  }, {
    key: "createElement",
    value: /* @__PURE__ */ function() {
      function t(r, n) {
        throw T_("createElement", "EnzymeAdapter");
      }
      return t;
    }()
    // eslint-disable-next-line class-methods-use-this
  }, {
    key: "invokeSetStateCallback",
    value: /* @__PURE__ */ function() {
      function t(r, n) {
        n.call(r);
      }
      return t;
    }()
  }]), e12;
}();
UY.MODES = {
  STRING: "string",
  MOUNT: "mount",
  SHALLOW: "shallow"
};
var jY = UY;
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.default = i;
  var t = jY, r = n(t);
  function n(o) {
    return o && o.__esModule ? o : {
      default: o
    };
  }
  function i(o) {
    if (!o)
      throw new Error(`
      Enzyme Internal Error: Enzyme expects an adapter to be configured, but found none.
      To configure an adapter, you should call \`Enzyme.configure({ adapter: new Adapter() })\`
      before using any of Enzyme's top level APIs, where \`Adapter\` is the adapter
      corresponding to the library currently being tested. For example:

      import Adapter from 'enzyme-adapter-react-15';

      To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html
    `);
    if (typeof o == "function")
      throw Object.getPrototypeOf(o) === r.default ? new Error(`
        Enzyme Internal Error: Enzyme expects an adapter instance to be configured -
        you provided an adapter *constructor*.
        To configure an adapter, you should call \`Enzyme.configure({ adapter: new Adapter() })\`
        before using any of Enzyme's top level APIs, where \`Adapter\` is the adapter
        corresponding to the library currently being tested. For example:

        import Adapter from 'enzyme-adapter-react-15';

        To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html
      `) : new Error(`
      Enzyme Internal Error: Enzyme expects an adapter to be configured -
      an enzyme adapter must be an object instance; you provided a function.
      To configure an adapter, you should call \`Enzyme.configure({ adapter: new Adapter() })\`
      before using any of Enzyme's top level APIs, where \`Adapter\` is the adapter
      corresponding to the library currently being tested. For example:

      import Adapter from 'enzyme-adapter-react-15';

      To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html
    `);
    if (!(o instanceof r.default))
      throw new Error("Enzyme Internal Error: configured enzyme adapter did not inherit from the EnzymeAdapter base class");
  }
})(cS);
Object.defineProperty(ah, "__esModule", {
  value: true
});
ah.get = OPe;
ah.merge = VY;
ah.reset = IPe;
var SPe = op;
var GY = zY(SPe);
var wPe = cS;
var APe = zY(wPe);
function zY(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
var zN = {};
function OPe() {
  return (0, GY.default)({}, zN);
}
function VY(e12) {
  e12.adapter && (0, APe.default)(e12.adapter), (0, GY.default)(zN, e12);
}
function IPe() {
  var e12 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  zN = {}, VY(e12);
}
var _n = {};
var sC = { exports: {} };
(function(e12, t) {
  Object.defineProperty(t, "__esModule", {
    value: true
  });
  var r = function(n) {
    function i(o, a) {
      return n.apply(this, arguments);
    }
    return i.toString = function() {
      return n.toString();
    }, i;
  }(function(n, i) {
    return typeof n != "object" || n === null || typeof i != "object" || i === null ? false : Object.keys(i).every(function(o) {
      if (!n.propertyIsEnumerable(o))
        return false;
      var a = i[o], s = n[o];
      return !(typeof a == "object" && a !== null ? !r(s, a) : s !== a);
    });
  });
  t.default = r, e12.exports = t.default;
})(sC, sC.exports);
var PPe = sC.exports;
var uc = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.default = o;
  var t = cS, r = i(t), n = ah;
  function i(a) {
    return a && a.__esModule ? a : {
      default: a
    };
  }
  function o() {
    var a = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    if (a.adapter)
      return (0, r.default)(a.adapter), a.adapter;
    var s = (0, n.get)(), l = s.adapter;
    return (0, r.default)(l), l;
  }
})(uc);
Object.defineProperty(_n, "__esModule", {
  value: true
});
var CPe = /* @__PURE__ */ function() {
  function e12(t, r) {
    var n = [], i = true, o = false, a = void 0;
    try {
      for (var s = t[Symbol.iterator](), l; !(i = (l = s.next()).done) && (n.push(l.value), !(r && n.length === r)); i = true)
        ;
    } catch (u) {
      o = true, a = u;
    } finally {
      try {
        !i && s.return && s.return();
      } finally {
        if (o)
          throw a;
      }
    }
    return n;
  }
  return function(t, r) {
    if (Array.isArray(t))
      return t;
    if (Symbol.iterator in Object(t))
      return e12(t, r);
    throw new TypeError("Invalid attempt to destructure non-iterable instance");
  };
}();
_n.propsOfNode = uS;
_n.childrenOfNode = pp;
_n.hasClassName = VPe;
_n.treeForEach = VN;
_n.treeFilter = XN;
_n.findParentNode = XPe;
_n.pathToNode = XY;
_n.parentsOfNode = YPe;
_n.nodeHasId = qPe;
_n.nodeMatchesObjectProps = JPe;
_n.getTextFromNode = WY;
_n.getTextFromHostNodes = YY;
_n.getHTMLFromHostNodes = qY;
var xPe = op;
var kPe = sh(xPe);
var DPe = Jv;
var y3 = sh(DPe);
var RPe = bX;
var NPe = sh(RPe);
var MPe = PPe;
var LPe = sh(MPe);
var BPe = bN;
var FPe = sh(BPe);
var $Pe = W2;
var HPe = sh($Pe);
var UPe = uc;
var jPe = sh(UPe);
function sh(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function GPe(e12, t, r) {
  return t in e12 ? Object.defineProperty(e12, t, {
    value: r,
    enumerable: true,
    configurable: true,
    writable: true
  }) : e12[t] = r, e12;
}
function zPe(e12) {
  if (Array.isArray(e12)) {
    for (var t = 0, r = Array(e12.length); t < e12.length; t++)
      r[t] = e12[t];
    return r;
  } else
    return Array.from(e12);
}
function uS(e12) {
  return e12 && e12.props || {};
}
function pp(e12) {
  if (!e12)
    return [];
  var t = (0, jPe.default)(), r = t.isFragment && typeof t.isFragment == "function", n = Array.isArray(e12.rendered) ? (0, y3.default)(e12.rendered, 1) : [e12.rendered];
  return r ? (0, y3.default)(n.map(function(i) {
    return t.isFragment(i) ? pp(i) : i;
  }), 1) : n;
}
function VPe(e12, t) {
  var r = uS(e12).className || "";
  return r = String(r).replace(/\s/g, " "), (0, HPe.default)(t) ? t.test(r) : (" " + String(r) + " ").indexOf(" " + String(t) + " ") > -1;
}
function VN(e12, t) {
  e12 && t(e12), pp(e12).forEach(function(r) {
    return VN(r, t);
  });
}
function XN(e12, t) {
  var r = [];
  return VN(e12, function(n) {
    t(n) && r.push(n);
  }), r;
}
function XPe(e12, t) {
  var r = XN(e12, function(n) {
    return n.rendered ? pp(n).indexOf(t) !== -1 : false;
  });
  return r[0] || null;
}
function WPe(e12, t) {
  return e12.filter(function(r) {
    return XN(r, t).length !== 0;
  });
}
function XY(e12, t) {
  for (var r = [t], n = [], i = function(l) {
    return e12 === l;
  }; r.length; ) {
    var o = r.pop(), a = pp(o);
    if (o === e12)
      return WPe(n, i);
    n.push(o), a.length === 0 && n.pop(), r.push.apply(r, zPe(a));
  }
  return null;
}
function YPe(e12, t) {
  return (XY(e12, t) || []).reverse();
}
function qPe(e12, t) {
  return uS(e12).id === t;
}
var KPe = {};
function ZPe(e12) {
  return typeof e12 < "u" ? e12 : KPe;
}
function QPe(e12) {
  return (0, NPe.default)(e12).reduce(function(t, r) {
    var n = CPe(r, 2), i = n[0], o = n[1];
    return (0, kPe.default)({}, t, GPe({}, i, ZPe(o)));
  }, {});
}
function JPe(e12, t) {
  return (0, LPe.default)(uS(e12), QPe(t));
}
function eCe(e12) {
  return typeof e12 == "string" ? String(e12 || "") : e12 && e12.textContent || "";
}
function WN(e12, t) {
  var r = t.getCustom, n = t.handleHostNodes, i = t.recurse, o = t.nullRenderReturnsNull, a = o === void 0 ? false : o;
  return e12 == null ? "" : typeof e12 == "string" || typeof e12 == "number" ? String(e12) : r && e12.type && typeof e12.type == "function" ? r(e12) : n && e12.nodeType === "host" ? n(e12) : e12.rendered == null && a ? null : pp(e12).map(i).join("");
}
function WY(e12) {
  return WN(e12, {
    recurse: WY,
    getCustom: /* @__PURE__ */ function() {
      function t(r) {
        var n = r.type;
        return "<" + String(n.displayName || (0, FPe.default)(n)) + " />";
      }
      return t;
    }()
  });
}
function YY(e12, t) {
  return WN(e12, {
    recurse: /* @__PURE__ */ function() {
      function r(n) {
        return YY(n, t);
      }
      return r;
    }(),
    handleHostNodes: /* @__PURE__ */ function() {
      function r(n) {
        var i = [].concat(t.nodeToHostNode(n, true));
        return i.map(eCe).join("");
      }
      return r;
    }()
  });
}
function tCe(e12) {
  return e12 == null ? null : e12.outerHTML.replace(/\sdata-(reactid|reactroot)+="([^"]*)+"/g, "");
}
function qY(e12, t) {
  return WN(e12, {
    recurse: /* @__PURE__ */ function() {
      function r(n) {
        return qY(n, t);
      }
      return r;
    }(),
    handleHostNodes: /* @__PURE__ */ function() {
      function r(n) {
        var i = [].concat(t.nodeToHostNode(n, true));
        return i.map(tCe).join("");
      }
      return r;
    }(),
    nullRenderReturnsNull: true
  });
}
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.shallowEqual = e12.ITERATOR_SYMBOL = void 0;
  var t = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(ee) {
    return typeof ee;
  } : function(ee) {
    return ee && typeof Symbol == "function" && ee.constructor === Symbol && ee !== Symbol.prototype ? "symbol" : typeof ee;
  }, r = /* @__PURE__ */ function() {
    function ee(de, Ce) {
      var ke = [], Ve = true, We = false, Ke = void 0;
      try {
        for (var tt = de[Symbol.iterator](), ut; !(Ve = (ut = tt.next()).done) && (ke.push(ut.value), !(Ce && ke.length === Ce)); Ve = true)
          ;
      } catch (Dt) {
        We = true, Ke = Dt;
      } finally {
        try {
          !Ve && tt.return && tt.return();
        } finally {
          if (We)
            throw Ke;
        }
      }
      return ke;
    }
    return function(de, Ce) {
      if (Array.isArray(de))
        return de;
      if (Symbol.iterator in Object(de))
        return ee(de, Ce);
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    };
  }();
  e12.getAdapter = F, e12.makeOptions = K, e12.isCustomComponent = se, e12.isCustomComponentElement = J, e12.propsOfNode = me, e12.typeOfNode = ae, e12.nodeHasType = Y, e12.nodeMatches = we, e12.nodeEqual = Ne, e12.containsChildrenSubArray = Me, e12.childrenToSimplifiedArray = je, e12.isReactElementAlike = at, e12.withSetStateAllowed = Qe, e12.AND = bt, e12.displayNameOfNode = Et, e12.sym = $t, e12.privateSet = rn, e12.cloneElement = Ht, e12.spyMethod = xe;
  var n = pX;
  Object.defineProperty(e12, "shallowEqual", {
    enumerable: true,
    get: /* @__PURE__ */ function() {
      function ee() {
        return B(n).default;
      }
      return ee;
    }()
  }), e12.isEmptyValue = ne, e12.renderedDive = ce, e12.loadCheerioRoot = _e;
  var i = op, o = B(i), a = i1, s = B(a), l = yN, u = B(l), c = bX, f = B(c), h = bN, d = B(h), p = sp, m = B(p), g = Jv, v = B(g), _ = eX, y = B(_), b = xX, T = B(b), E = lc, P = ah, A = _n, I = uc, x = B(I), S = cS, N = B(S);
  function B(ee) {
    return ee && ee.__esModule ? ee : {
      default: ee
    };
  }
  function w(ee, de, Ce) {
    return de in ee ? Object.defineProperty(ee, de, {
      value: Ce,
      enumerable: true,
      configurable: true,
      writable: true
    }) : ee[de] = Ce, ee;
  }
  function R(ee, de) {
    var Ce = {};
    for (var ke in ee)
      de.indexOf(ke) >= 0 || Object.prototype.hasOwnProperty.call(ee, ke) && (Ce[ke] = ee[ke]);
    return Ce;
  }
  e12.ITERATOR_SYMBOL = typeof Symbol == "function" && Symbol.iterator;
  function F() {
    var ee = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    return console.warn("getAdapter from Utils is deprecated; please use ./getAdapter instead"), (0, x.default)(ee);
  }
  function $(ee, de) {
    if (ee && de && ee !== de)
      throw new TypeError("If both the `attachTo` and `hydrateIn` options are provided, they must be === (for backwards compatibility)");
  }
  function K(ee) {
    var de = (0, P.get)(), Ce = de.attachTo, ke = de.hydrateIn, Ve = R(de, ["attachTo", "hydrateIn"]);
    $(Ce, ke);
    var We = ee.attachTo, Ke = ee.hydrateIn;
    $(We, Ke);
    var tt = Ke || ke || Ce || We || void 0, ut = Ke || ke || void 0, Dt = (0, o.default)({}, tt && {
      attachTo: tt
    }, ut && {
      hydrateIn: ut
    });
    return (0, o.default)({}, Ve, ee, Dt);
  }
  function se(ee, de) {
    return (0, N.default)(de), de.isCustomComponent ? !!de.isCustomComponent(ee) : typeof ee == "function";
  }
  function J(ee, de) {
    return de.isCustomComponentElement ? !!de.isCustomComponentElement(ee) : !!ee && de.isValidElement(ee) && typeof ee.type == "function";
  }
  function me(ee) {
    return (0, f.default)(ee && ee.props || {}).filter(function(de) {
      var Ce = r(de, 2), ke = Ce[1];
      return typeof ke < "u";
    }).reduce(function(de, Ce) {
      var ke = r(Ce, 2), Ve = ke[0], We = ke[1];
      return (0, o.default)(de, w({}, Ve, We));
    }, {});
  }
  function ae(ee) {
    return ee ? ee.type : null;
  }
  function Y(ee, de) {
    if (!de || !ee)
      return false;
    var Ce = (0, x.default)();
    if (Ce.displayNameOfNode) {
      var ke = Ce.displayNameOfNode(ee);
      return ke === de;
    }
    return ee.type ? typeof ee.type == "string" ? ee.type === de : (typeof ee.type == "function" ? (0, d.default)(ee.type) === de : ee.type.name === de) || ee.type.displayName === de : false;
  }
  function Q(ee, de, Ce, ke) {
    var Ve = ke ? we : Ne;
    if (ee === de)
      return true;
    if (!Array.isArray(ee) && !Array.isArray(de))
      return Ve(ee, de, Ce);
    var We = (0, v.default)(ee, 1 / 0), Ke = (0, v.default)(de, 1 / 0);
    if (We.length !== Ke.length)
      return false;
    if (We.length === 0 && Ke.length === 0)
      return true;
    for (var tt = 0; tt < We.length; tt += 1)
      if (!Ve(We[tt], Ke[tt], Ce))
        return false;
    return true;
  }
  function le(ee, de, Ce) {
    return Q(ee, de, Ce, true);
  }
  function Se(ee, de, Ce) {
    return Q(ee, de, Ce, false);
  }
  function Pe(ee, de) {
    var Ce = r(de, 2), ke = Ce[0], Ve = Ce[1], We = Ve == null ? {} : w({}, ke, Ve);
    return (0, o.default)({}, ee, We);
  }
  function Re(ee, de, Ce, ke) {
    if (ee === de)
      return true;
    if (!ee || !de || ee.type !== de.type)
      return false;
    var Ve = me(ee), We = me(de);
    ke && (Ve = (0, f.default)(Ve).reduce(Pe, {}), We = (0, f.default)(We).reduce(Pe, {}));
    for (var Ke = Object.keys(Ve), tt = 0; tt < Ke.length; tt += 1) {
      var ut = Ke[tt];
      if (ut !== "children")
        if (ut in We) {
          if (We[ut] !== Ve[ut])
            if (t(We[ut]) === t(Ve[ut]) && t(Ve[ut]) === "object") {
              if (!(0, s.default)(Ve[ut], We[ut]))
                return false;
            } else
              return false;
        } else
          return false;
    }
    var Dt = "children" in Ve, gt = "children" in We, pr = ke ? le : Se;
    if ((Dt || gt) && !pr(je(Ve.children, ke), je(We.children, ke), Ce))
      return false;
    if (!ot(ee)) {
      var H = Object.keys(We);
      return Ce(Ke.length - Dt, H.length - gt);
    }
    return false;
  }
  function we(ee, de) {
    var Ce = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : u.default;
    return Re(ee, de, Ce, true);
  }
  function Ne(ee, de) {
    var Ce = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : u.default;
    return Re(ee, de, Ce, false);
  }
  function Me(ee, de, Ce) {
    var ke = (0, A.childrenOfNode)(de), Ve = function(Ke, tt) {
      return Ie(ee, ke.slice(tt, tt + Ce.length), Ce);
    };
    return ke.some(Ve);
  }
  function Ie(ee, de, Ce) {
    return de.length === Ce.length && de.every(function(ke, Ve) {
      return ee(ke, Ce[Ve]);
    });
  }
  function Ge(ee) {
    var de = [], Ce = function(Ve) {
      Ve === null || Ve === false || typeof Ve > "u" || de.push(Ve);
    };
    return Array.isArray(ee) ? ee.forEach(Ce) : Ce(ee), de;
  }
  function je(ee) {
    for (var de = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false, Ce = Ge(ee), ke = [], Ve = 0; Ve < Ce.length; Ve += 1) {
      var We = Ce[Ve], Ke = ke.pop();
      typeof Ke > "u" ? ke.push(We) : ot(We) && ot(Ke) ? ke.push(Ke + We) : (ke.push(Ke), ke.push(We));
    }
    return de ? ke.map(function(tt) {
      return typeof tt == "string" ? (0, y.default)(tt) : tt;
    }) : ke;
  }
  function ot(ee) {
    return typeof ee == "string" || typeof ee == "number";
  }
  function at(ee, de) {
    return de.isValidElement(ee) || ot(ee) || Array.isArray(ee);
  }
  function Qe(ee) {
    var de = false;
    typeof globalThis.document > "u" && (de = true, globalThis.document = {}), ee(), de && (globalThis.document = void 0, delete globalThis.document);
  }
  function bt(ee) {
    var de = ee.slice().reverse();
    return function(Ce) {
      return de.every(function(ke) {
        return ke(Ce);
      });
    };
  }
  function Et(ee) {
    if (!ee)
      return null;
    var de = ee.type;
    return de ? de.displayName || (typeof de == "function" ? (0, d.default)(de) : de.name || de) : null;
  }
  function $t(ee) {
    return typeof Symbol == "function" ? Symbol.for("enzyme." + String(ee)) : ee;
  }
  function rn(ee, de, Ce) {
    Object.defineProperty(ee, de, {
      value: Ce,
      enumerable: false,
      writable: true
    });
  }
  function Ht(ee, de, Ce) {
    return ee.createElement(de.type, (0, o.default)({}, de.props, Ce));
  }
  function xe(ee, de) {
    var Ce = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : function() {
    }, ke = void 0, Ve = ee[de], We = (0, m.default)(ee, de), Ke = void 0;
    return We && (Ke = Object.getOwnPropertyDescriptor(ee, de)), Object.defineProperty(ee, de, {
      configurable: true,
      enumerable: !Ke || !!Ke.enumerable,
      value: Ce(Ve) || /* @__PURE__ */ function() {
        function tt() {
          for (var ut = arguments.length, Dt = Array(ut), gt = 0; gt < ut; gt++)
            Dt[gt] = arguments[gt];
          var pr = Ve.apply(this, Dt);
          return ke = pr, pr;
        }
        return tt;
      }()
    }), {
      restore: /* @__PURE__ */ function() {
        function tt() {
          We ? Ke ? Object.defineProperty(ee, de, Ke) : ee[de] = Ve : delete ee[de];
        }
        return tt;
      }(),
      getLastReturnValue: /* @__PURE__ */ function() {
        function tt() {
          return ke;
        }
        return tt;
      }()
    };
  }
  function ne(ee) {
    return ee === null || ee === false;
  }
  function ce(ee) {
    return ne(ee) ? true : [].concat(ee).every(function(de) {
      if (de) {
        var Ce = de.rendered;
        return ne(Ce) || ce(Ce);
      }
      return ne(de);
    });
  }
  function _e(ee) {
    return ee ? (0, E.isHtml)(ee) ? T.default.load("")(ee) : T.default.load(ee, null, false).root() : T.default.root();
  }
})(ey);
var hc = {};
var rCe = 1 / 0;
var nCe = "[object Symbol]";
var KY = /[&<>"'`]/g;
var iCe = RegExp(KY.source);
var oCe = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;",
  "`": "&#96;"
};
var aCe = typeof globalThis == "object" && globalThis && globalThis.Object === Object && globalThis;
var sCe = typeof self == "object" && self && self.Object === Object && self;
var lCe = aCe || sCe || Function("return this")();
function cCe(e12) {
  return function(t) {
    return e12 == null ? void 0 : e12[t];
  };
}
var uCe = cCe(oCe);
var hCe = Object.prototype;
var fCe = hCe.toString;
var _3 = lCe.Symbol;
var b3 = _3 ? _3.prototype : void 0;
var T3 = b3 ? b3.toString : void 0;
function dCe(e12) {
  if (typeof e12 == "string")
    return e12;
  if (mCe(e12))
    return T3 ? T3.call(e12) : "";
  var t = e12 + "";
  return t == "0" && 1 / e12 == -rCe ? "-0" : t;
}
function pCe(e12) {
  return !!e12 && typeof e12 == "object";
}
function mCe(e12) {
  return typeof e12 == "symbol" || pCe(e12) && fCe.call(e12) == nCe;
}
function gCe(e12) {
  return e12 == null ? "" : dCe(e12);
}
function vCe(e12) {
  return e12 = gCe(e12), e12 && iCe.test(e12) ? e12.replace(KY, uCe) : e12;
}
var yCe = vCe;
var _Ce = String.prototype.valueOf;
var bCe = function(t) {
  try {
    return _Ce.call(t), true;
  } catch {
    return false;
  }
};
var TCe = Object.prototype.toString;
var ECe = "[object String]";
var SCe = Qv();
var ZY = function(t) {
  return typeof t == "string" ? true : typeof t != "object" ? false : SCe ? bCe(t) : TCe.call(t) === ECe;
};
var wCe = Number.prototype.toString;
var ACe = function(t) {
  try {
    return wCe.call(t), true;
  } catch {
    return false;
  }
};
var OCe = Object.prototype.toString;
var ICe = "[object Number]";
var PCe = Qv();
var CCe = function(t) {
  return typeof t == "number" ? true : typeof t != "object" ? false : PCe ? ACe(t) : OCe.call(t) === ICe;
};
var QY = Ai;
var xCe = QY("Boolean.prototype.toString");
var kCe = QY("Object.prototype.toString");
var DCe = function(t) {
  try {
    return xCe(t), true;
  } catch {
    return false;
  }
};
var RCe = "[object Boolean]";
var NCe = Qv();
var MCe = function(t) {
  return typeof t == "boolean" ? true : t === null || typeof t != "object" ? false : NCe && Symbol.toStringTag in t ? DCe(t) : kCe(t) === RCe;
};
Object.defineProperty(hc, "__esModule", {
  value: true
});
var E3 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e12) {
  return typeof e12;
} : function(e12) {
  return e12 && typeof Symbol == "function" && e12.constructor === Symbol && e12 !== Symbol.prototype ? "symbol" : typeof e12;
};
hc.typeName = tq;
hc.spaces = rq;
hc.indent = nq;
hc.debugNode = YN;
hc.debugNodes = txe;
var LCe = yCe;
var BCe = Qs(LCe);
var FCe = bN;
var JY = Qs(FCe);
var $Ce = ZY;
var HCe = Qs($Ce);
var UCe = CCe;
var jCe = Qs(UCe);
var GCe = mN;
var zCe = Qs(GCe);
var VCe = MCe;
var XCe = Qs(VCe);
var WCe = O2;
var Vh = Qs(WCe);
var YCe = sp;
var Dh = Qs(YCe);
var eq = _n;
var qCe = uc;
var lC = Qs(qCe);
function Qs(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
var KCe = Function.bind.call(Function.call, Boolean.prototype.valueOf);
function tq(e12) {
  var t = (0, lC.default)();
  return t.displayNameOfNode ? (0, lC.default)().displayNameOfNode(e12) || "Component" : typeof e12.type == "function" ? e12.type.displayName || (0, JY.default)(e12.type) || "Component" : e12.type;
}
function rq(e12) {
  return Array(e12 + 1).join(" ");
}
function nq(e12, t) {
  return t.split(`
`).map(function(r) {
    return "" + String(rq(e12)) + String(r);
  }).join(`
`);
}
function ZCe(e12, t) {
  return (0, HCe.default)(e12) ? (0, Vh.default)(String(e12), {
    quoteStyle: "double"
  }) : (0, jCe.default)(e12) ? "{" + String((0, Vh.default)(Number(e12))) + "}" : (0, XCe.default)(e12) ? "{" + String((0, Vh.default)(KCe(e12))) + "}" : (0, zCe.default)(e12) ? "{" + String((0, Vh.default)(e12)) + "}" : (typeof e12 > "u" ? "undefined" : E3(e12)) === "object" ? t.verbose ? "{" + String((0, Vh.default)(e12)) + "}" : "{{...}}" : "{[" + (typeof e12 > "u" ? "undefined" : E3(e12)) + "]}";
}
function QCe(e12, t) {
  var r = (0, eq.propsOfNode)(e12), n = Object.keys(r).filter(function(i) {
    return i !== "children";
  });
  return n.map(function(i) {
    return String(i) + "=" + String(ZCe(r[i], t));
  }).join(" ");
}
function JCe(e12, t) {
  return e12.length ? `
` + String(e12.map(function(r) {
    return nq(t, r);
  }).join(`
`)) + `
` : "";
}
function exe(e12) {
  return (0, Dh.default)(e12, "nodeType") && typeof e12.nodeType == "string" && (0, Dh.default)(e12, "type") && (0, Dh.default)(e12, "key") && (0, Dh.default)(e12, "ref") && (0, Dh.default)(e12, "instance") && (0, Dh.default)(e12, "rendered");
}
function YN(e12) {
  var t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 2, r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  if (typeof e12 == "string" || typeof e12 == "number")
    return (0, BCe.default)(e12);
  if (typeof e12 == "function") {
    var n = (0, JY.default)(e12);
    return "[function" + (n ? " " + String(n) : "") + "]";
  }
  if (!e12)
    return "";
  var i = (0, lC.default)();
  if (!i.isValidElement(e12) && !exe(e12))
    return "{" + String((0, Vh.default)(e12)) + "}";
  var o = (0, eq.childrenOfNode)(e12).map(function(h) {
    return YN(h, t, r);
  }).filter(Boolean), a = tq(e12), s = r.ignoreProps ? "" : QCe(e12, r), l = s ? " " : "", u = o.length ? ">" : " ", c = JCe(o, t), f = o.length ? "</" + String(a) + ">" : "/>";
  return "<" + String(a) + l + String(s) + u + String(c) + f;
}
function txe(e12) {
  var t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return e12.map(function(r) {
    return YN(r, void 0, t);
  }).join(`


`);
}
var mp = {};
var kd = {};
var qN = {};
Object.defineProperty(qN, "__esModule", {
  value: true
});
var S3 = function(t) {
  return JSON.stringify(t);
};
var rxe = function(t) {
  var r = t.body, n = [], i = true, o = false, a = void 0;
  try {
    for (var s = r[Symbol.iterator](), l; !(i = (l = s.next()).done); i = true) {
      var u = l.value, c = void 0;
      if (u.type === "universalSelector")
        c = "*";
      else if (u.type === "typeSelector")
        c = u.name;
      else if (u.type === "idSelector")
        c = "#" + u.name;
      else if (u.type === "classSelector")
        c = "." + u.name;
      else if (u.type === "attributePresenceSelector")
        c = "[" + u.name + "]";
      else if (u.type === "attributeValueSelector")
        c = "[" + u.name + u.operator + S3(u.value) + "]";
      else if (u.type === "pseudoClassSelector")
        c = ":" + u.name, u.parameters.length && (c += "(" + u.parameters.map(S3).join(", ") + ")");
      else if (u.type === "pseudoElementSelector")
        c = "::" + u.name;
      else
        throw new Error("Unknown token.");
      n.push(c);
    }
  } catch (f) {
    o = true, a = f;
  } finally {
    try {
      !i && s.return && s.return();
    } finally {
      if (o)
        throw a;
    }
  }
  return n.join("");
};
qN.default = function() {
  var e12 = function(r) {
    var n = [], i = true, o = false, a = void 0;
    try {
      for (var s = r[Symbol.iterator](), l; !(i = (l = s.next()).done); i = true) {
        var u = l.value;
        if (u.type === "selector")
          n.push(rxe(u));
        else if (u.type === "descendantCombinator")
          n.push(" ");
        else if (u.type === "childCombinator")
          n.push(" > ");
        else if (u.type === "adjacentSiblingCombinator")
          n.push(" + ");
        else if (u.type === "generalSiblingCombinator")
          n.push(" ~ ");
        else
          throw new Error("Unknown token.");
      }
    } catch (c) {
      o = true, a = c;
    } finally {
      try {
        !i && s.return && s.return();
      } finally {
        if (o)
          throw a;
      }
    }
    return n.join("");
  };
  return {
    generate: e12
  };
};
var KN = {};
var iq = { exports: {} };
(function(e12) {
  (function(t, r) {
    e12.exports ? e12.exports = r() : t.nearley = r();
  })(De, function() {
    function t(u, c, f) {
      return this.id = ++t.highestId, this.name = u, this.symbols = c, this.postprocess = f, this;
    }
    t.highestId = 0, t.prototype.toString = function(u) {
      var c = typeof u > "u" ? this.symbols.map(l).join(" ") : this.symbols.slice(0, u).map(l).join(" ") + " ● " + this.symbols.slice(u).map(l).join(" ");
      return this.name + " → " + c;
    };
    function r(u, c, f, h) {
      this.rule = u, this.dot = c, this.reference = f, this.data = [], this.wantedBy = h, this.isComplete = this.dot === u.symbols.length;
    }
    r.prototype.toString = function() {
      return "{" + this.rule.toString(this.dot) + "}, from: " + (this.reference || 0);
    }, r.prototype.nextState = function(u) {
      var c = new r(this.rule, this.dot + 1, this.reference, this.wantedBy);
      return c.left = this, c.right = u, c.isComplete && (c.data = c.build(), c.right = void 0), c;
    }, r.prototype.build = function() {
      var u = [], c = this;
      do
        u.push(c.right.data), c = c.left;
      while (c.left);
      return u.reverse(), u;
    }, r.prototype.finish = function() {
      this.rule.postprocess && (this.data = this.rule.postprocess(this.data, this.reference, a.fail));
    };
    function n(u, c) {
      this.grammar = u, this.index = c, this.states = [], this.wants = {}, this.scannable = [], this.completed = {};
    }
    n.prototype.process = function(u) {
      for (var c = this.states, f = this.wants, h = this.completed, d = 0; d < c.length; d++) {
        var p = c[d];
        if (p.isComplete) {
          if (p.finish(), p.data !== a.fail) {
            for (var m = p.wantedBy, g = m.length; g--; ) {
              var v = m[g];
              this.complete(v, p);
            }
            if (p.reference === this.index) {
              var _ = p.rule.name;
              (this.completed[_] = this.completed[_] || []).push(p);
            }
          }
        } else {
          var _ = p.rule.symbols[p.dot];
          if (typeof _ != "string") {
            this.scannable.push(p);
            continue;
          }
          if (f[_]) {
            if (f[_].push(p), h.hasOwnProperty(_))
              for (var y = h[_], g = 0; g < y.length; g++) {
                var b = y[g];
                this.complete(p, b);
              }
          } else
            f[_] = [p], this.predict(_);
        }
      }
    }, n.prototype.predict = function(u) {
      for (var c = this.grammar.byName[u] || [], f = 0; f < c.length; f++) {
        var h = c[f], d = this.wants[u], p = new r(h, 0, this.index, d);
        this.states.push(p);
      }
    }, n.prototype.complete = function(u, c) {
      var f = u.nextState(c);
      this.states.push(f);
    };
    function i(u, c) {
      this.rules = u, this.start = c || this.rules[0].name;
      var f = this.byName = {};
      this.rules.forEach(function(h) {
        f.hasOwnProperty(h.name) || (f[h.name] = []), f[h.name].push(h);
      });
    }
    i.fromCompiled = function(h, c) {
      var f = h.Lexer;
      h.ParserStart && (c = h.ParserStart, h = h.ParserRules);
      var h = h.map(function(p) {
        return new t(p.name, p.symbols, p.postprocess);
      }), d = new i(h, c);
      return d.lexer = f, d;
    };
    function o() {
      this.reset("");
    }
    o.prototype.reset = function(u, c) {
      this.buffer = u, this.index = 0, this.line = c ? c.line : 1, this.lastLineBreak = c ? -c.col : 0;
    }, o.prototype.next = function() {
      if (this.index < this.buffer.length) {
        var u = this.buffer[this.index++];
        return u === `
` && (this.line += 1, this.lastLineBreak = this.index), {
          value: u
        };
      }
    }, o.prototype.save = function() {
      return {
        line: this.line,
        col: this.index - this.lastLineBreak
      };
    }, o.prototype.formatError = function(u, c) {
      var f = this.buffer;
      if (typeof f == "string") {
        var h = f.split(`
`).slice(Math.max(0, this.line - 5), this.line), d = f.indexOf(`
`, this.index);
        d === -1 && (d = f.length);
        var p = this.index - this.lastLineBreak, m = String(this.line).length;
        return c += " at line " + this.line + " col " + p + `:

`, c += h.map(function(v, _) {
          return g(this.line - h.length + _ + 1, m) + " " + v;
        }, this).join(`
`), c += `
` + g("", m + p) + `^
`, c;
      } else
        return c + " at index " + (this.index - 1);
      function g(v, _) {
        var y = String(v);
        return Array(_ - y.length + 1).join(" ") + y;
      }
    };
    function a(u, c, f) {
      if (u instanceof i)
        var h = u, f = c;
      else
        var h = i.fromCompiled(u, c);
      this.grammar = h, this.options = {
        keepHistory: false,
        lexer: h.lexer || new o()
      };
      for (var d in f || {})
        this.options[d] = f[d];
      this.lexer = this.options.lexer, this.lexerState = void 0;
      var p = new n(h, 0);
      this.table = [p], p.wants[h.start] = [], p.predict(h.start), p.process(), this.current = 0;
    }
    a.fail = {}, a.prototype.feed = function(u) {
      var c = this.lexer;
      c.reset(u, this.lexerState);
      for (var f; ; ) {
        try {
          if (f = c.next(), !f)
            break;
        } catch (P) {
          var m = new n(this.grammar, this.current + 1);
          this.table.push(m);
          var h = new Error(this.reportLexerError(P));
          throw h.offset = this.current, h.token = P.token, h;
        }
        var d = this.table[this.current];
        this.options.keepHistory || delete this.table[this.current - 1];
        var p = this.current + 1, m = new n(this.grammar, p);
        this.table.push(m);
        for (var g = f.text !== void 0 ? f.text : f.value, v = c.constructor === o ? f.value : f, _ = d.scannable, y = _.length; y--; ) {
          var b = _[y], T = b.rule.symbols[b.dot];
          if (T.test ? T.test(v) : T.type ? T.type === f.type : T.literal === g) {
            var E = b.nextState({
              data: v,
              token: f,
              isToken: true,
              reference: p - 1
            });
            m.states.push(E);
          }
        }
        if (m.process(), m.states.length === 0) {
          var h = new Error(this.reportError(f));
          throw h.offset = this.current, h.token = f, h;
        }
        this.options.keepHistory && (d.lexerState = c.save()), this.current++;
      }
      return d && (this.lexerState = c.save()), this.results = this.finish(), this;
    }, a.prototype.reportLexerError = function(u) {
      var c, f, h = u.token;
      return h ? (c = "input " + JSON.stringify(h.text[0]) + " (lexer error)", f = this.lexer.formatError(h, "Syntax error")) : (c = "input (lexer error)", f = u.message), this.reportErrorCommon(f, c);
    }, a.prototype.reportError = function(u) {
      var c = (u.type ? u.type + " token: " : "") + JSON.stringify(u.value !== void 0 ? u.value : u), f = this.lexer.formatError(u, "Syntax error");
      return this.reportErrorCommon(f, c);
    }, a.prototype.reportErrorCommon = function(u, c) {
      var f = [];
      f.push(u);
      var h = this.table.length - 2, d = this.table[h], p = d.states.filter(function(g) {
        var v = g.rule.symbols[g.dot];
        return v && typeof v != "string";
      });
      if (p.length === 0)
        f.push("Unexpected " + c + `. I did not expect any more input. Here is the state of my parse table:
`), this.displayStateStack(d.states, f);
      else {
        f.push("Unexpected " + c + `. Instead, I was expecting to see one of the following:
`);
        var m = p.map(function(g) {
          return this.buildFirstStateStack(g, []) || [g];
        }, this);
        m.forEach(function(g) {
          var v = g[0], _ = v.rule.symbols[v.dot], y = this.getSymbolDisplay(_);
          f.push("A " + y + " based on:"), this.displayStateStack(g, f);
        }, this);
      }
      return f.push(""), f.join(`
`);
    }, a.prototype.displayStateStack = function(u, c) {
      for (var f, h = 0, d = 0; d < u.length; d++) {
        var p = u[d], m = p.rule.toString(p.dot);
        m === f ? h++ : (h > 0 && c.push("    ^ " + h + " more lines identical to this"), h = 0, c.push("    " + m)), f = m;
      }
    }, a.prototype.getSymbolDisplay = function(u) {
      return s(u);
    }, a.prototype.buildFirstStateStack = function(u, c) {
      if (c.indexOf(u) !== -1)
        return null;
      if (u.wantedBy.length === 0)
        return [u];
      var f = u.wantedBy[0], h = [u].concat(c), d = this.buildFirstStateStack(f, h);
      return d === null ? null : [u].concat(d);
    }, a.prototype.save = function() {
      var u = this.table[this.current];
      return u.lexerState = this.lexerState, u;
    }, a.prototype.restore = function(u) {
      var c = u.index;
      this.current = c, this.table[c] = u, this.table.splice(c + 1), this.lexerState = u.lexerState, this.results = this.finish();
    }, a.prototype.rewind = function(u) {
      if (!this.options.keepHistory)
        throw new Error("set option `keepHistory` to enable rewinding");
      this.restore(this.table[u]);
    }, a.prototype.finish = function() {
      var u = [], c = this.grammar.start, f = this.table[this.table.length - 1];
      return f.states.forEach(function(h) {
        h.rule.name === c && h.dot === h.rule.symbols.length && h.reference === 0 && h.data !== a.fail && u.push(h);
      }), u.map(function(h) {
        return h.data;
      });
    };
    function s(u) {
      var c = typeof u;
      if (c === "string")
        return u;
      if (c === "object") {
        if (u.literal)
          return JSON.stringify(u.literal);
        if (u instanceof RegExp)
          return "character matching " + u;
        if (u.type)
          return u.type + " token";
        if (u.test)
          return "token matching " + String(u.test);
        throw new Error("Unknown symbol type: " + u);
      }
    }
    function l(u) {
      var c = typeof u;
      if (c === "string")
        return u;
      if (c === "object") {
        if (u.literal)
          return JSON.stringify(u.literal);
        if (u instanceof RegExp)
          return u.toString();
        if (u.type)
          return "%" + u.type;
        if (u.test)
          return "<" + String(u.test) + ">";
        throw new Error("Unknown symbol type: " + u);
      }
    }
    return {
      Parser: a,
      Grammar: i,
      Rule: t
    };
  });
})(iq);
var nxe = iq.exports;
var oq = { exports: {} };
var ixe = 1 / 0;
var oxe = 9007199254740991;
var axe = "[object Arguments]";
var sxe = "[object Function]";
var lxe = "[object GeneratorFunction]";
var cxe = typeof globalThis == "object" && globalThis && globalThis.Object === Object && globalThis;
var uxe = typeof self == "object" && self && self.Object === Object && self;
var hxe = cxe || uxe || Function("return this")();
function fxe(e12, t) {
  for (var r = -1, n = t.length, i = e12.length; ++r < n; )
    e12[i + r] = t[r];
  return e12;
}
var ZN = Object.prototype;
var dxe = ZN.hasOwnProperty;
var aq = ZN.toString;
var w3 = hxe.Symbol;
var pxe = ZN.propertyIsEnumerable;
var A3 = w3 ? w3.isConcatSpreadable : void 0;
function sq(e12, t, r, n, i) {
  var o = -1, a = e12.length;
  for (r || (r = mxe), i || (i = []); ++o < a; ) {
    var s = e12[o];
    t > 0 && r(s) ? t > 1 ? sq(s, t - 1, r, n, i) : fxe(i, s) : n || (i[i.length] = s);
  }
  return i;
}
function mxe(e12) {
  return yxe(e12) || vxe(e12) || !!(A3 && e12 && e12[A3]);
}
function gxe(e12) {
  var t = e12 ? e12.length : 0;
  return t ? sq(e12, ixe) : [];
}
function vxe(e12) {
  return bxe(e12) && dxe.call(e12, "callee") && (!pxe.call(e12, "callee") || aq.call(e12) == axe);
}
var yxe = Array.isArray;
function _xe(e12) {
  return e12 != null && Exe(e12.length) && !Txe(e12);
}
function bxe(e12) {
  return wxe(e12) && _xe(e12);
}
function Txe(e12) {
  var t = Sxe(e12) ? aq.call(e12) : "";
  return t == sxe || t == lxe;
}
function Exe(e12) {
  return typeof e12 == "number" && e12 > -1 && e12 % 1 == 0 && e12 <= oxe;
}
function Sxe(e12) {
  var t = typeof e12;
  return !!e12 && (t == "object" || t == "function");
}
function wxe(e12) {
  return !!e12 && typeof e12 == "object";
}
var Axe = gxe;
(function(e12) {
  (function() {
    function t(f) {
      return f[0];
    }
    var r = Axe, n = function(h, d) {
      return function(p) {
        return p[h].concat([p[d]]);
      };
    }, i = function(h) {
      return h = h.filter(function(d) {
        return d !== null;
      }), r(h);
    }, o = {
      " ": "descendantCombinator",
      "+": "adjacentSiblingCombinator",
      ">": "childCombinator",
      "~": "generalSiblingCombinator"
    }, a = function(h) {
      return (Array.isArray(h[0]) ? h[0] : [h[0]]).concat({
        type: o[h[2]]
      }).concat(h[4]);
    }, s = function(h, d, p) {
      var m = r(h).join(""), g = parseFloat(m);
      return isNaN(g) ? p : g;
    }, l = function(h, d, p) {
      return h[0] === "true" ? true : h[0] === "false" ? false : p;
    }, u = function(h, d, p) {
      if (h[0] === "NaN")
        return NaN;
      if (h[0] !== "undefined")
        return h[0] === "null" ? null : p;
    }, c = {
      Lexer: void 0,
      ParserRules: [{
        name: "combinator",
        symbols: ["selector"]
      }, {
        name: "combinator",
        symbols: ["combinator", "_", /[>+~ ]/, "_", "selector"],
        postprocess: a
      }, {
        name: "selector",
        symbols: ["selectorBody"],
        postprocess: function(h) {
          return {
            type: "selector",
            body: h[0]
          };
        }
      }, {
        name: "selectorBody$ebnf$1",
        symbols: ["typeSelector"],
        postprocess: t
      }, {
        name: "selectorBody$ebnf$1",
        symbols: [],
        postprocess: function(h) {
          return null;
        }
      }, {
        name: "selectorBody$ebnf$2",
        symbols: []
      }, {
        name: "selectorBody$ebnf$2",
        symbols: ["selectorBody$ebnf$2", "simpleSelector"],
        postprocess: function(h) {
          return h[0].concat([h[1]]);
        }
      }, {
        name: "selectorBody",
        symbols: ["selectorBody$ebnf$1", "selectorBody$ebnf$2"],
        postprocess: function(h, d, p) {
          var m = i(h);
          return m.length ? m : p;
        }
      }, {
        name: "selectorBody$ebnf$3",
        symbols: []
      }, {
        name: "selectorBody$ebnf$3",
        symbols: ["selectorBody$ebnf$3", "simpleSelector"],
        postprocess: function(h) {
          return h[0].concat([h[1]]);
        }
      }, {
        name: "selectorBody",
        symbols: ["universalSelector", "selectorBody$ebnf$3"],
        postprocess: i
      }, {
        name: "simpleSelector",
        symbols: ["idSelector"]
      }, {
        name: "simpleSelector",
        symbols: ["classSelector"]
      }, {
        name: "simpleSelector",
        symbols: ["attributeValueSelector"]
      }, {
        name: "simpleSelector",
        symbols: ["attributePresenceSelector"]
      }, {
        name: "simpleSelector",
        symbols: ["pseudoClassSelector"]
      }, {
        name: "simpleSelector",
        symbols: ["pseudoElementSelector"]
      }, {
        name: "typeSelector",
        symbols: ["attributeName"],
        postprocess: function(h) {
          return {
            type: "typeSelector",
            name: h[0]
          };
        }
      }, {
        name: "className$ebnf$1",
        symbols: [{
          literal: "-"
        }],
        postprocess: t
      }, {
        name: "className$ebnf$1",
        symbols: [],
        postprocess: function(h) {
          return null;
        }
      }, {
        name: "className$ebnf$2",
        symbols: []
      }, {
        name: "className$ebnf$2",
        symbols: ["className$ebnf$2", /[_a-zA-Z0-9-]/],
        postprocess: function(h) {
          return h[0].concat([h[1]]);
        }
      }, {
        name: "className",
        symbols: ["className$ebnf$1", /[_a-zA-Z]/, "className$ebnf$2"],
        postprocess: function(h) {
          return (h[0] || "") + h[1] + h[2].join("");
        }
      }, {
        name: "attributeName$ebnf$1",
        symbols: []
      }, {
        name: "attributeName$ebnf$1",
        symbols: ["attributeName$ebnf$1", /[_a-zA-Z()0-9-]/],
        postprocess: function(h) {
          return h[0].concat([h[1]]);
        }
      }, {
        name: "attributeName",
        symbols: [/[_a-z()A-Z]/, "attributeName$ebnf$1"],
        postprocess: function(h) {
          return h[0] + h[1].join("");
        }
      }, {
        name: "classSelector",
        symbols: [{
          literal: "."
        }, "className"],
        postprocess: function(h) {
          return {
            type: "classSelector",
            name: h[1]
          };
        }
      }, {
        name: "idSelector",
        symbols: [{
          literal: "#"
        }, "attributeName"],
        postprocess: function(h) {
          return {
            type: "idSelector",
            name: h[1]
          };
        }
      }, {
        name: "universalSelector",
        symbols: [{
          literal: "*"
        }],
        postprocess: function(h) {
          return {
            type: "universalSelector"
          };
        }
      }, {
        name: "attributePresenceSelector",
        symbols: [{
          literal: "["
        }, "attributeName", {
          literal: "]"
        }],
        postprocess: function(h) {
          return {
            type: "attributePresenceSelector",
            name: h[1]
          };
        }
      }, {
        name: "attributeOperator",
        symbols: [{
          literal: "="
        }]
      }, {
        name: "attributeOperator$string$1",
        symbols: [{
          literal: "~"
        }, {
          literal: "="
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "attributeOperator",
        symbols: ["attributeOperator$string$1"]
      }, {
        name: "attributeOperator$string$2",
        symbols: [{
          literal: "|"
        }, {
          literal: "="
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "attributeOperator",
        symbols: ["attributeOperator$string$2"]
      }, {
        name: "attributeOperator$string$3",
        symbols: [{
          literal: "^"
        }, {
          literal: "="
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "attributeOperator",
        symbols: ["attributeOperator$string$3"]
      }, {
        name: "attributeOperator$string$4",
        symbols: [{
          literal: "$"
        }, {
          literal: "="
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "attributeOperator",
        symbols: ["attributeOperator$string$4"]
      }, {
        name: "attributeOperator$string$5",
        symbols: [{
          literal: "*"
        }, {
          literal: "="
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "attributeOperator",
        symbols: ["attributeOperator$string$5"]
      }, {
        name: "attributeValueSelector",
        symbols: [{
          literal: "["
        }, "attributeName", "attributeOperator", "attributeValue", {
          literal: "]"
        }],
        postprocess: function(h) {
          return {
            type: "attributeValueSelector",
            name: h[1],
            value: h[3],
            operator: h[2][0]
          };
        }
      }, {
        name: "attributeValue",
        symbols: ["falsyPrimitiveStrings"],
        postprocess: t
      }, {
        name: "attributeValue",
        symbols: ["numericValue"],
        postprocess: t
      }, {
        name: "attributeValue",
        symbols: ["sqstring"],
        postprocess: t
      }, {
        name: "attributeValue",
        symbols: ["dqstring"],
        postprocess: t
      }, {
        name: "falsyPrimitiveStrings$string$1",
        symbols: [{
          literal: "f"
        }, {
          literal: "a"
        }, {
          literal: "l"
        }, {
          literal: "s"
        }, {
          literal: "e"
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "falsyPrimitiveStrings",
        symbols: ["falsyPrimitiveStrings$string$1"],
        postprocess: l
      }, {
        name: "falsyPrimitiveStrings$string$2",
        symbols: [{
          literal: "t"
        }, {
          literal: "r"
        }, {
          literal: "u"
        }, {
          literal: "e"
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "falsyPrimitiveStrings",
        symbols: ["falsyPrimitiveStrings$string$2"],
        postprocess: l
      }, {
        name: "falsyPrimitiveStrings$string$3",
        symbols: [{
          literal: "N"
        }, {
          literal: "a"
        }, {
          literal: "N"
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "falsyPrimitiveStrings",
        symbols: ["falsyPrimitiveStrings$string$3"],
        postprocess: u
      }, {
        name: "falsyPrimitiveStrings$string$4",
        symbols: [{
          literal: "n"
        }, {
          literal: "u"
        }, {
          literal: "l"
        }, {
          literal: "l"
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "falsyPrimitiveStrings",
        symbols: ["falsyPrimitiveStrings$string$4"],
        postprocess: u
      }, {
        name: "falsyPrimitiveStrings$string$5",
        symbols: [{
          literal: "u"
        }, {
          literal: "n"
        }, {
          literal: "d"
        }, {
          literal: "e"
        }, {
          literal: "f"
        }, {
          literal: "i"
        }, {
          literal: "n"
        }, {
          literal: "e"
        }, {
          literal: "d"
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "falsyPrimitiveStrings",
        symbols: ["falsyPrimitiveStrings$string$5"],
        postprocess: u
      }, {
        name: "numericValue",
        symbols: ["int", {
          literal: "."
        }, "int"],
        postprocess: s
      }, {
        name: "numericValue",
        symbols: [{
          literal: "+"
        }, "int", {
          literal: "."
        }, "int"],
        postprocess: s
      }, {
        name: "numericValue",
        symbols: [{
          literal: "-"
        }, "int", {
          literal: "."
        }, "int"],
        postprocess: s
      }, {
        name: "numericValue",
        symbols: [{
          literal: "-"
        }, "int"],
        postprocess: s
      }, {
        name: "numericValue",
        symbols: ["int"],
        postprocess: s
      }, {
        name: "numericValue",
        symbols: [{
          literal: "+"
        }, "int"],
        postprocess: s
      }, {
        name: "numericValue$string$1",
        symbols: [{
          literal: "I"
        }, {
          literal: "n"
        }, {
          literal: "f"
        }, {
          literal: "i"
        }, {
          literal: "n"
        }, {
          literal: "i"
        }, {
          literal: "t"
        }, {
          literal: "y"
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "numericValue",
        symbols: ["numericValue$string$1"],
        postprocess: s
      }, {
        name: "numericValue$string$2",
        symbols: [{
          literal: "+"
        }, {
          literal: "I"
        }, {
          literal: "n"
        }, {
          literal: "f"
        }, {
          literal: "i"
        }, {
          literal: "n"
        }, {
          literal: "i"
        }, {
          literal: "t"
        }, {
          literal: "y"
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "numericValue",
        symbols: ["numericValue$string$2"],
        postprocess: s
      }, {
        name: "numericValue$string$3",
        symbols: [{
          literal: "-"
        }, {
          literal: "I"
        }, {
          literal: "n"
        }, {
          literal: "f"
        }, {
          literal: "i"
        }, {
          literal: "n"
        }, {
          literal: "i"
        }, {
          literal: "t"
        }, {
          literal: "y"
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "numericValue",
        symbols: ["numericValue$string$3"],
        postprocess: s
      }, {
        name: "int$ebnf$1",
        symbols: [/[0-9]/]
      }, {
        name: "int$ebnf$1",
        symbols: ["int$ebnf$1", /[0-9]/],
        postprocess: function(h) {
          return h[0].concat([h[1]]);
        }
      }, {
        name: "int",
        symbols: ["int$ebnf$1"]
      }, {
        name: "classParameters",
        symbols: []
      }, {
        name: "classParameters",
        symbols: ["classParameter"]
      }, {
        name: "classParameters",
        symbols: ["classParameters", {
          literal: ","
        }, "_", "classParameter"],
        postprocess: n(0, 3)
      }, {
        name: "classParameter$ebnf$1",
        symbols: [/[^()"', ]/]
      }, {
        name: "classParameter$ebnf$1",
        symbols: ["classParameter$ebnf$1", /[^()"', ]/],
        postprocess: function(h) {
          return h[0].concat([h[1]]);
        }
      }, {
        name: "classParameter",
        symbols: ["classParameter$ebnf$1"],
        postprocess: function(h) {
          return h[0].join("");
        }
      }, {
        name: "classParameter",
        symbols: ["sqstring"],
        postprocess: t
      }, {
        name: "classParameter",
        symbols: ["dqstring"],
        postprocess: t
      }, {
        name: "pseudoElementSelector$string$1",
        symbols: [{
          literal: ":"
        }, {
          literal: ":"
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "pseudoElementSelector",
        symbols: ["pseudoElementSelector$string$1", "pseudoClassSelectorName"],
        postprocess: function(h) {
          return {
            type: "pseudoElementSelector",
            name: h[1]
          };
        }
      }, {
        name: "pseudoClassSelector",
        symbols: [{
          literal: ":"
        }, "pseudoClassSelectorName"],
        postprocess: function(h) {
          return {
            type: "pseudoClassSelector",
            name: h[1]
          };
        }
      }, {
        name: "pseudoClassSelector",
        symbols: [{
          literal: ":"
        }, "pseudoClassSelectorName", {
          literal: "("
        }, "classParameters", {
          literal: ")"
        }],
        postprocess: function(h) {
          return {
            type: "pseudoClassSelector",
            name: h[1],
            parameters: h[3]
          };
        }
      }, {
        name: "pseudoClassSelectorName$ebnf$1",
        symbols: [/[a-zA-Z0-9-_]/]
      }, {
        name: "pseudoClassSelectorName$ebnf$1",
        symbols: ["pseudoClassSelectorName$ebnf$1", /[a-zA-Z0-9-_]/],
        postprocess: function(h) {
          return h[0].concat([h[1]]);
        }
      }, {
        name: "pseudoClassSelectorName",
        symbols: [/[a-zA-Z]/, "pseudoClassSelectorName$ebnf$1"],
        postprocess: function(h) {
          return h[0] + h[1].join("");
        }
      }, {
        name: "dqstring$ebnf$1",
        symbols: []
      }, {
        name: "dqstring$ebnf$1",
        symbols: ["dqstring$ebnf$1", "dstrchar"],
        postprocess: function(h) {
          return h[0].concat([h[1]]);
        }
      }, {
        name: "dqstring",
        symbols: [{
          literal: '"'
        }, "dqstring$ebnf$1", {
          literal: '"'
        }],
        postprocess: function(h) {
          return h[1].join("");
        }
      }, {
        name: "dstrchar",
        symbols: [/[^"]/],
        postprocess: t
      }, {
        name: "dstrchar$string$1",
        symbols: [{
          literal: "\\"
        }, {
          literal: '"'
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "dstrchar",
        symbols: ["dstrchar$string$1"],
        postprocess: function(h) {
          return '"';
        }
      }, {
        name: "sqstring$ebnf$1",
        symbols: []
      }, {
        name: "sqstring$ebnf$1",
        symbols: ["sqstring$ebnf$1", "sstrchar"],
        postprocess: function(h) {
          return h[0].concat([h[1]]);
        }
      }, {
        name: "sqstring",
        symbols: [{
          literal: "'"
        }, "sqstring$ebnf$1", {
          literal: "'"
        }],
        postprocess: function(h) {
          return h[1].join("");
        }
      }, {
        name: "sstrchar",
        symbols: [/[^']/],
        postprocess: t
      }, {
        name: "sstrchar$string$1",
        symbols: [{
          literal: "\\"
        }, {
          literal: "'"
        }],
        postprocess: function(h) {
          return h.join("");
        }
      }, {
        name: "sstrchar",
        symbols: ["sstrchar$string$1"],
        postprocess: function(h) {
          return "'";
        }
      }, {
        name: "_$ebnf$1",
        symbols: []
      }, {
        name: "_$ebnf$1",
        symbols: ["_$ebnf$1", /[ ]/],
        postprocess: function(h) {
          return h[0].concat([h[1]]);
        }
      }, {
        name: "_",
        symbols: ["_$ebnf$1"],
        postprocess: function(h) {
          return null;
        }
      }],
      ParserStart: "combinator"
    };
    e12.exports = c;
  })();
})(oq);
var Oxe = oq.exports;
Object.defineProperty(KN, "__esModule", {
  value: true
});
var Ixe = nxe;
var Pxe = Oxe;
var O3 = Cxe(Pxe);
function Cxe(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
KN.default = function() {
  var e12 = function(r) {
    var n = new Ixe.Parser(O3.default.ParserRules, O3.default.ParserStart), i = n.feed(r).results;
    if (i.length === 0)
      throw new Error("Found no parsings.");
    if (i.length > 1)
      throw new Error("Ambiguous results.");
    return i[0];
  };
  return {
    parse: e12
  };
};
Object.defineProperty(kd, "__esModule", {
  value: true
});
kd.createParser = kd.createGenerator = void 0;
var xxe = qN;
var kxe = lq(xxe);
var Dxe = KN;
var Rxe = lq(Dxe);
function lq(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
kd.createGenerator = kxe.default;
kd.createParser = Rxe.default;
var Nxe = ap;
var cq = Ai;
var Mxe = cq("Object.prototype.propertyIsEnumerable");
var Lxe = cq("Array.prototype.push");
var uq = function(t) {
  var r = Nxe(t), n = [];
  for (var i in r)
    Mxe(r, i) && Lxe(n, r[i]);
  return n;
};
var Bxe = uq;
var hq = function() {
  return typeof Object.values == "function" ? Object.values : Bxe;
};
var Fxe = hq;
var $xe = ii;
var Hxe = function() {
  var t = Fxe();
  return $xe(Object, {
    values: t
  }, {
    values: function() {
      return Object.values !== t;
    }
  }), t;
};
var Uxe = ii;
var jxe = qs;
var Gxe = uq;
var fq = hq;
var zxe = Hxe;
var dq = jxe(fq(), Object);
Uxe(dq, {
  getPolyfill: fq,
  implementation: Gxe,
  shim: zxe
});
var Vxe = dq;
var Xxe = F2;
var Wxe = H2();
var Yxe = j2();
var qxe = Zv;
var Kxe = G2();
var Zxe = gN;
var Qxe = iX();
var Jxe = N2;
var eke = oX;
var I3 = vN;
var tke = Ai;
var rke = ZY;
var P3 = Object("a");
var nke = P3[0] !== "a" || !(0 in P3);
var ike = tke("String.prototype.split");
var pq = function(t) {
  var r = eke(this), n = nke && rke(r) ? ike(r, "") : r, i = Qxe(n);
  if (!Zxe(t))
    throw new TypeError("Array.prototype.filter callback must be a function");
  var o;
  arguments.length > 1 && (o = arguments[1]);
  for (var a = Xxe(r, 0), s = 0, l = 0; s < i; ) {
    var u = I3(s), c = Kxe(r, u);
    if (c) {
      var f = qxe(r, u), h = Jxe(Wxe(t, o, [f, s, r]));
      h && (Yxe(a, I3(l), f), l += 1);
    }
    s += 1;
  }
  return a;
};
var oke = function(t) {
  var r = true, n = true, i = false;
  if (typeof t == "function") {
    try {
      t.call("f", function(o, a, s) {
        typeof s != "object" && (r = false);
      }), t.call([null], function() {
        "use strict";
        n = typeof this == "string";
      }, "x");
    } catch {
      i = true;
    }
    return !i && r && n;
  }
  return false;
};
var ake = oke;
var ske = pq;
var mq = function() {
  var t = Array.prototype.filter;
  return ake(t) ? t : ske;
};
var sO;
var C3;
function lke() {
  if (C3)
    return sO;
  C3 = 1;
  var e12 = ii, t = mq;
  return sO = function() {
    var n = t();
    return e12(Array.prototype, {
      filter: n
    }, {
      filter: function() {
        return Array.prototype.filter !== n;
      }
    }), n;
  }, sO;
}
var cke = ii;
var uke = ap;
var hke = qs;
var fke = Ai;
var dke = pq;
var gq = mq;
var pke = hke.apply(gq());
var mke = lke();
var gke = fke("Array.prototype.slice");
var vq = function(t, r) {
  return uke(t), pke(t, gke(arguments, 1));
};
cke(vq, {
  getPolyfill: gq,
  implementation: dke,
  shim: mke
});
var vke = vq;
var yke = Ai;
var _ke = yke("Array.prototype.push");
var bke = function(e12, t) {
  for (var r = [], n = 0; n < e12.length; n += 1)
    _ke(r, t(e12[n], n));
  return r;
};
var Tke = [
  ["HTMLElement", "article"],
  ["HTMLElement", "section"],
  ["HTMLBaseFontElement", "basefont", "HTMLBaseFontElementConstructor"],
  // Safari 5.1
  ["HTMLPhraseElement", "cite", "HTMLElement"],
  // Safari 5.1
  ["HTMLElement", "noscript"],
  ["HTMLBGSoundElement", "bgsound", "HTMLElement"],
  // Safari 5.1
  ["HTMLPhraseElement", "blink", "HTMLElement"],
  // Safari 5.1
  ["HTMLElement", "multicol"],
  ["HTMLNextIdElement", "nextid", "HTMLElement"],
  // Safari 5.1
  ["HTMLElement", "rb"],
  ["HTMLElement", "spacer"],
  ["HTMLAnchorElement", "a", "HTMLElement"],
  // Safari 5.1
  // ['HTMLAppletElement', 'applet'], // commented out due to IE 11 java update popup
  ["HTMLAreaElement", "area", "HTMLElement"],
  // Safari 5.1
  ["HTMLAudioElement", "audio", "HTMLElement"],
  // Safari 5.1
  ["HTMLBaseElement", "base", "HTMLElement"],
  // Safari 5.1
  ["HTMLBodyElement", "body", "HTMLElement"],
  // Safari 5.1
  ["HTMLBRElement", "br", "HTMLElement"],
  // Safari 5.1
  ["HTMLButtonElement", "button"],
  ["HTMLCanvasElement", "canvas"],
  ["HTMLContentElement", "content", "HTMLElement"],
  // Safari 5.1
  ["HTMLDataElement", "data", "HTMLElement"],
  // Safari 5.1
  ["HTMLDataListElement", "datalist"],
  ["HTMLDialogElement", "dialog", "HTMLElement"],
  // Safari 5.1
  ["HTMLDirectoryElement", "dir"],
  ["HTMLDivElement", "div"],
  ["HTMLDListElement", "dl"],
  ["HTMLEmbedElement", "embed"],
  ["HTMLFieldSetElement", "fieldset"],
  ["HTMLFontElement", "font"],
  ["HTMLFormElement", "form"],
  ["HTMLFrameElement", "frame"],
  ["HTMLFrameSetElement", "frameset"],
  ["HTMLHeadElement", "head"],
  ["HTMLHeadingElement", "h1"],
  ["HTMLHeadingElement", "h2"],
  ["HTMLHeadingElement", "h3"],
  ["HTMLHeadingElement", "h4"],
  ["HTMLHeadingElement", "h5"],
  ["HTMLHeadingElement", "h6"],
  ["HTMLHtmlElement", "html"],
  ["HTMLHRElement", "hr"],
  ["HTMLIFrameElement", "iframe"],
  ["HTMLImageElement", "img"],
  ["HTMLInputElement", "input"],
  ["HTMLIsIndexElement", "index", "HTMLElement"],
  // in HTML5, this is HTMLUnknownElement (Safari 5.1 for HTMLElement)
  ["HTMLKeygenElement", "keygen", "HTMLBlockElement"],
  ["HTMLLabelElement", "label"],
  ["HTMLLegendElement", "legend"],
  ["HTMLLIElement", "li"],
  ["HTMLLinkElement", "link"],
  ["HTMLElement", "main"],
  // in IE 9-11, this is HTMLUnknownElement
  ["HTMLMapElement", "map"],
  ["HTMLMarqueeElement", "marquee"],
  ["HTMLMenuElement", "menu"],
  ["HTMLMetaElement", "meta"],
  ["HTMLMeterElement", "meter", "HTMLElement"],
  // Safari 5.1
  ["HTMLModElement", "del"],
  ["HTMLModElement", "ins"],
  ["HTMLObjectElement", "object"],
  ["HTMLOListElement", "ol"],
  ["HTMLOptGroupElement", "optgroup"],
  ["HTMLOptionElement", "option"],
  ["HTMLOutputElement", "output"],
  ["HTMLParagraphElement", "p"],
  ["HTMLParamElement", "param"],
  ["HTMLPictureElement", "picture", "HTMLElement"],
  // Safari 5.1
  ["HTMLPreElement", "pre"],
  ["HTMLProgressElement", "progress", "HTMLElement"],
  // Safari 5.1
  ["HTMLQuoteElement", "q", "HTMLBlockquoteElement"],
  // Safari 5.1
  ["HTMLQuoteElement", "blockquote", "HTMLBlockElement", "HTMLBlockquoteElement"],
  // Safari 5.1
  ["HTMLScriptElement", "script"],
  ["HTMLSelectElement", "select"],
  ["HTMLShadowElement", "shadow", "HTMLElement"],
  // Safari 5.1
  ["HTMLSourceElement", "source"],
  ["HTMLSpanElement", "span", "HTMLElement"],
  // Safari 5.1
  ["HTMLStyleElement", "style"],
  ["HTMLTableElement", "table"],
  ["HTMLTableCaptionElement", "caption"],
  ["HTMLTableCellElement", "td", "HTMLTableDataCellElement"],
  ["HTMLTableCellElement", "th", "HTMLTableHeaderCellElement"],
  ["HTMLTableRowElement", "tr"],
  ["HTMLTableColElement", "col"],
  ["HTMLTableColElement", "colgroup"],
  ["HTMLTableSectionElement", "tbody"],
  ["HTMLTableSectionElement", "thead"],
  ["HTMLTableSectionElement", "tfoot"],
  ["HTMLTemplateElement", "template", "HTMLElement"],
  // Safari 5.1
  ["HTMLTextAreaElement", "textarea"],
  ["HTMLTimeElement", "time", "HTMLElement"],
  // Safari 5.1
  ["HTMLTitleElement", "title"],
  ["HTMLTrackElement", "track", "HTMLElement"],
  // Safari 5.1
  ["HTMLUListElement", "ul"],
  ["HTMLVideoElement", "video"],
  ["HTMLElement", "abbr"],
  ["HTMLElement", "address"],
  ["HTMLElement", "aside"],
  ["HTMLElement", "b"],
  ["HTMLElement", "bdi"],
  ["HTMLElement", "bdo"],
  ["HTMLElement", "code"],
  ["HTMLElement", "dd"],
  ["HTMLDetailsElement", "details", "HTMLElement"],
  // Safari 5.1
  ["HTMLElement", "dfn"],
  ["HTMLElement", "dt"],
  ["HTMLElement", "em"],
  ["HTMLElement", "figcaption"],
  ["HTMLElement", "figure"],
  ["HTMLElement", "footer"],
  ["HTMLElement", "header"],
  ["HTMLElement", "hgroup"],
  ["HTMLElement", "i"],
  ["HTMLElement", "kbd"],
  ["HTMLElement", "mark"],
  ["HTMLElement", "nav"],
  ["HTMLElement", "rp"],
  ["HTMLElement", "rt"],
  ["HTMLElement", "ruby"],
  ["HTMLElement", "s"],
  ["HTMLElement", "samp"],
  ["HTMLSlotElement", "slot", "HTMLElement"],
  // Safari 5.1
  ["HTMLElement", "small"],
  ["HTMLElement", "strong"],
  ["HTMLElement", "summary"],
  ["HTMLElement", "u"],
  ["HTMLElement", "var"],
  ["HTMLElement", "wbr"]
];
var Eke = function(t, r, n) {
  if (typeof document < "u" && typeof document.createElement == "function") {
    var i = document.createElement(t).constructor;
    if (i !== n)
      return i;
  }
};
var Ske = function() {
  var t = globalThis.HTMLUnknownElement;
  return {
    all: globalThis.HTMLElement,
    elements: bke(Tke, function(r) {
      for (var n = r[0], i = r[1], o, a, s = 2; s < arguments.length && !a; s += 1)
        o = r[s], a = o && globalThis[o];
      var l = globalThis[n];
      return {
        constructor: Eke(i, a || l, t),
        constructorName: a ? o : n,
        expectedConstructor: a || l,
        tag: i
      };
    }),
    unknown: t
  };
};
var wke = vke;
var Ake = Ske;
var Oke = function(t) {
  if (!t)
    return [];
  var r = Ake();
  return t === r.unknown ? [] : t === r.all ? r.elements : wke(r.elements, function(n) {
    return n.constructor === t;
  });
};
Object.defineProperty(mp, "__esModule", {
  value: true
});
var yq = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e12) {
  return typeof e12;
} : function(e12) {
  return e12 && typeof Symbol == "function" && e12.constructor === Symbol && e12 !== Symbol.prototype ? "symbol" : typeof e12;
};
var Ike = /* @__PURE__ */ function() {
  function e12(t, r) {
    var n = [], i = true, o = false, a = void 0;
    try {
      for (var s = t[Symbol.iterator](), l; !(i = (l = s.next()).done) && (n.push(l.value), !(r && n.length === r)); i = true)
        ;
    } catch (u) {
      o = true, a = u;
    } finally {
      try {
        !i && s.return && s.return();
      } finally {
        if (o)
          throw a;
      }
    }
    return n;
  }
  return function(t, r) {
    if (Array.isArray(t))
      return t;
    if (Symbol.iterator in Object(t))
      return e12(t, r);
    throw new TypeError("Invalid attempt to destructure non-iterable instance");
  };
}();
mp.buildPredicate = Aq;
mp.reduceTreeBySelector = hS;
mp.reduceTreesBySelector = uDe;
var Pke = kd;
var Cke = Vxe;
var xke = gp(Cke);
var kke = Jv;
var QN = gp(kke);
var Dke = yN;
var Rke = gp(Dke);
var Nke = sp;
var Mke = gp(Nke);
var Lke = Oke;
var Bke = gp(Lke);
var bi = _n;
var _q = ey;
var Fke = uc;
var bq = gp(Fke);
function gp(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function $ke(e12) {
  if (Array.isArray(e12)) {
    for (var t = 0, r = Array(e12.length); t < e12.length; t++)
      r[t] = e12[t];
    return r;
  } else
    return Array.from(e12);
}
var Hke = (0, Pke.createParser)();
var Uke = "childCombinator";
var jke = "adjacentSiblingCombinator";
var Gke = "generalSiblingCombinator";
var zke = "descendantCombinator";
var Tq = "selector";
var Vke = "typeSelector";
var Xke = "classSelector";
var Wke = "idSelector";
var Yke = "universalSelector";
var Eq = "attributePresenceSelector";
var qke = "attributeValueSelector";
var Kke = "pseudoClassSelector";
var Zke = "pseudoElementSelector";
var x3 = "=";
var Qke = "~=";
var Jke = "|=";
var eDe = "^=";
var tDe = "$=";
var rDe = "*=";
function Sq(e12) {
  return [].concat($ke(new Set(e12)));
}
function JN(e12, t) {
  return Sq(t.reduce(e12, []));
}
function wq(e12) {
  try {
    return Hke.parse(e12);
  } catch {
    throw new Error("Failed to parse selector: " + String(e12));
  }
}
function k3(e12, t) {
  var r = t.operator, n = t.value, i = t.name, o = (0, _q.propsOfNode)(e12), a = Object.getOwnPropertyDescriptor(o, i);
  if (a && a.get)
    return false;
  var s = o[i];
  if (typeof s > "u")
    return false;
  if (t.type === Eq)
    return (0, Mke.default)(o, t.name);
  if ((typeof s != "string" || typeof n != "string") && r !== x3)
    return false;
  switch (r) {
    case x3:
      return (0, Rke.default)(s, n);
    case Qke:
      return s.split(" ").indexOf(n) !== -1;
    case Jke:
      return s === n || s.startsWith(String(n) + "-");
    case eDe:
      return n === "" ? false : s.slice(0, n.length) === n;
    case tDe:
      return n === "" ? false : s.slice(-n.length) === n;
    case rDe:
      return n === "" ? false : s.indexOf(n) !== -1;
    default:
      throw new Error('Enzyme::Selector: Unknown attribute selector operator "' + String(r) + '"');
  }
}
function nDe(e12, t, r) {
  var n = t.name, i = t.parameters;
  if (n === "not")
    return i.every(function(h) {
      return hS(h, e12).length === 0;
    });
  if (n === "empty")
    return (0, bi.treeFilter)(e12, function(h) {
      return h !== e12;
    }).length === 0;
  if (n === "first-child") {
    var o = (0, bi.findParentNode)(r, e12), a = o.rendered, s = Ike(a, 1), l = s[0];
    return l === e12;
  }
  if (n === "last-child") {
    var u = (0, bi.findParentNode)(r, e12), c = u.rendered;
    return c[c.length - 1] === e12;
  }
  if (n === "focus") {
    if (typeof document > "u")
      throw new Error('Enzyme::Selector does not support the ":focus" pseudo-element without a global `document`.');
    var f = (0, bq.default)();
    return document.activeElement && f.nodeToHostNode(e12) === document.activeElement;
  }
  throw new TypeError('Enzyme::Selector does not support the "' + String(t.name) + '" pseudo-element or pseudo-class selectors.');
}
function iDe(e12, t, r) {
  if (e12 === null || typeof e12 == "string")
    return false;
  switch (t.type) {
    case Yke:
      return true;
    case Xke:
      return (0, bi.hasClassName)(e12, t.name);
    case Vke:
      return (0, _q.nodeHasType)(e12, t.name);
    case Wke:
      return (0, bi.nodeHasId)(e12, t.name);
    case Eq:
      return k3(e12, t);
    case qke:
      return k3(e12, t);
    case Zke:
    case Kke:
      return nDe(e12, t, r);
    default:
      throw new Error("Unknown token type: " + String(t.type));
  }
}
function cC(e12, t) {
  return function(r) {
    return e12.body.every(function(n) {
      return iDe(r, n, t);
    });
  };
}
function oDe(e12) {
  return e12.some(function(t) {
    return t.type !== Tq;
  });
}
function Aq(e12) {
  if (typeof e12 == "string") {
    var t = wq(e12);
    if (oDe(t))
      throw new TypeError("This method does not support complex CSS selectors");
    return cC(t[0]);
  }
  var r = (0, bq.default)(), n = r.isValidElementType ? r.isValidElementType(e12) : typeof e12 == "function";
  if (n)
    return function(o) {
      return r.matchesElementType(o, e12);
    };
  if ((typeof e12 > "u" ? "undefined" : yq(e12)) === "object") {
    if (!Array.isArray(e12) && e12 !== null && Object.keys(e12).length > 0) {
      var i = (0, xke.default)(e12).some(function(o) {
        return typeof o > "u";
      });
      if (i)
        throw new TypeError("Enzyme::Props can’t have `undefined` values. Try using ‘findWhere()’ instead.");
      return function(o) {
        return (0, bi.nodeMatchesObjectProps)(o, e12);
      };
    }
    throw new TypeError("Enzyme::Selector does not support an array, null, or empty object as a selector");
  }
  throw new TypeError("Enzyme::Selector expects a string, object, or valid element type (Component Constructor)");
}
function aDe(e12, t, r) {
  return e12.reduce(function(n, i) {
    var o = (0, bi.findParentNode)(r, i);
    if (!o)
      return n;
    var a = (0, bi.childrenOfNode)(o), s = a.indexOf(i), l = a[s + 1];
    return l && t(l) && n.push(l), n;
  }, []);
}
function sDe(e12, t, r) {
  return JN(function(n, i) {
    var o = (0, bi.findParentNode)(r, i);
    if (!o)
      return n;
    var a = (0, bi.childrenOfNode)(o), s = a.indexOf(i), l = a.slice(s + 1);
    return n.concat(l.filter(t));
  }, e12);
}
function lDe(e12, t) {
  return JN(function(r, n) {
    return r.concat((0, bi.childrenOfNode)(n).filter(t));
  }, e12);
}
function cDe(e12, t) {
  return JN(function(r, n) {
    return r.concat((0, bi.treeFilter)(n, t));
  }, (0, QN.default)(e12.map(bi.childrenOfNode)));
}
function hS(e12, t) {
  if (typeof e12 != "string") {
    var r = (0, Bke.default)(e12);
    if (r.length > 0)
      return (0, QN.default)(r.map(function(c) {
        return hS(c.tag, t);
      }));
  }
  if (typeof e12 == "function" || (typeof e12 > "u" ? "undefined" : yq(e12)) === "object")
    return (0, bi.treeFilter)(t, Aq(e12));
  var n = [];
  if (typeof e12 == "string")
    for (var i = wq(e12), o = 0; o < i.length; ) {
      var a = i[o];
      if (a.type === Tq) {
        var s = cC(a, t);
        n = n.concat((0, bi.treeFilter)(t, s));
      } else {
        var l = a.type;
        o += 1;
        var u = cC(i[o], t);
        switch (l) {
          case jke:
            n = aDe(n, u, t);
            break;
          case Gke:
            n = sDe(n, u, t);
            break;
          case Uke:
            n = lDe(n, u);
            break;
          case zke: {
            n = cDe(n, u);
            break;
          }
          default:
            throw new Error("Unknown combinator selector: " + String(l));
        }
      }
      o += 1;
    }
  else
    throw new TypeError("Enzyme::Selector expects a string, object, or Component Constructor");
  return n;
}
function uDe(e12, t) {
  var r = t.map(function(n) {
    return hS(e12, n);
  });
  return Sq((0, QN.default)(r, 1));
}
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  });
  var t = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(ae) {
    return typeof ae;
  } : function(ae) {
    return ae && typeof Symbol == "function" && ae.constructor === Symbol && ae !== Symbol.prototype ? "symbol" : typeof ae;
  }, r = /* @__PURE__ */ function() {
    function ae(Y, Q) {
      for (var le = 0; le < Q.length; le++) {
        var Se = Q[le];
        Se.enumerable = Se.enumerable || false, Se.configurable = true, "value" in Se && (Se.writable = true), Object.defineProperty(Y, Se.key, Se);
      }
    }
    return function(Y, Q, le) {
      return Q && ae(Y.prototype, Q), le && ae(Y, le), Y;
    };
  }(), n = op, i = m(n), o = Jv, a = m(o), s = sp, l = m(s), u = ey, c = uc, f = m(c), h = hc, d = _n, p = mp;
  function m(ae) {
    return ae && ae.__esModule ? ae : {
      default: ae
    };
  }
  function g(ae, Y, Q) {
    return Y in ae ? Object.defineProperty(ae, Y, {
      value: Q,
      enumerable: true,
      configurable: true,
      writable: true
    }) : ae[Y] = Q, ae;
  }
  function v(ae, Y) {
    if (!ae)
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return Y && (typeof Y == "object" || typeof Y == "function") ? Y : ae;
  }
  function _(ae, Y) {
    if (typeof Y != "function" && Y !== null)
      throw new TypeError("Super expression must either be null or a function, not " + typeof Y);
    ae.prototype = Object.create(Y && Y.prototype, {
      constructor: {
        value: ae,
        enumerable: false,
        writable: true,
        configurable: true
      }
    }), Y && (Object.setPrototypeOf ? Object.setPrototypeOf(ae, Y) : ae.__proto__ = Y);
  }
  function y(ae, Y) {
    if (!(ae instanceof Y))
      throw new TypeError("Cannot call a class as a function");
  }
  var b = (0, u.sym)("__node__"), T = (0, u.sym)("__nodes__"), E = (0, u.sym)("__renderer__"), P = (0, u.sym)("__unrendered__"), A = (0, u.sym)("__root__"), I = (0, u.sym)("__options__"), x = (0, u.sym)("__rootNodes__"), S = (0, u.sym)("__wrappingComponent__"), N = (0, u.sym)("__linkedRoots__"), B = (0, u.sym)("__updatedBy__");
  function w(ae, Y) {
    var Q = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : d.treeFilter;
    return ae.flatMap(function(le) {
      return Q(le.getNodeInternal(), Y);
    });
  }
  function R(ae, Y) {
    return ae.wrap(ae.getNodesInternal().filter(Y).filter(Boolean));
  }
  function F(ae) {
    if (ae[A].length !== 1)
      throw new Error("getRootNodeInternal(wrapper) can only be called when wrapper wraps one node");
    return ae[A] !== ae ? ae[x][0] : ae[A][b];
  }
  function $(ae, Y) {
    return (0, d.parentsOfNode)(Y, F(ae));
  }
  function K(ae, Y) {
    Y ? Array.isArray(Y) ? ((0, u.privateSet)(ae, b, Y[0]), (0, u.privateSet)(ae, T, Y)) : ((0, u.privateSet)(ae, b, Y), (0, u.privateSet)(ae, T, [Y])) : ((0, u.privateSet)(ae, b, null), (0, u.privateSet)(ae, T, [])), (0, u.privateSet)(ae, "length", ae[T].length);
  }
  var se = function() {
    function ae(Y, Q) {
      var le = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
      if (y(this, ae), !globalThis.window && !globalThis.document)
        throw new Error("It looks like you called `mount()` without a global document being loaded.");
      var Se = (0, u.makeOptions)(le);
      if (Q)
        (0, u.privateSet)(this, E, Q[E]), (0, u.privateSet)(this, A, Q), K(this, Y), (0, u.privateSet)(this, x, Q[T]), (0, u.privateSet)(this, I, Q[I]), (0, u.privateSet)(this, N, []);
      else {
        var Pe = (0, f.default)(Se);
        if (!Pe.isValidElement(Y))
          throw new TypeError("ReactWrapper can only wrap valid elements");
        var Re = Pe.createRenderer((0, i.default)({
          mode: "mount"
        }, Se));
        if ((0, u.privateSet)(this, E, Re), Re.render(Y, Se.context), (0, u.privateSet)(this, A, this), K(this, this[E].getNode()), (0, u.privateSet)(this, I, Se), (0, u.privateSet)(this, N, []), (0, u.isCustomComponent)(Se.wrappingComponent, Pe)) {
          if (typeof this[E].getWrappingComponentRenderer != "function")
            throw new TypeError("your adapter does not support `wrappingComponent`. Try upgrading it!");
          (0, u.privateSet)(this, S, new J(this, this[E].getWrappingComponentRenderer())), this[N].push(this[S]);
        }
      }
      (0, u.privateSet)(this, P, Y), (0, u.privateSet)(this, B, null);
    }
    return r(ae, [{
      key: "root",
      value: /* @__PURE__ */ function() {
        function Y() {
          return this[A];
        }
        return Y;
      }()
      /**
       * Returns the wrapped component.
       *
       * @return {ReactComponent}
       */
    }, {
      key: "getNodeInternal",
      value: /* @__PURE__ */ function() {
        function Y() {
          if (this.length !== 1)
            throw new Error("ReactWrapper::getNode() can only be called when wrapping one node");
          return this[T][0];
        }
        return Y;
      }()
      /**
       * Returns the the wrapped components.
       *
       * @return {Array<ReactComponent>}
       */
    }, {
      key: "getNodesInternal",
      value: /* @__PURE__ */ function() {
        function Y() {
          return this[T];
        }
        return Y;
      }()
      /**
       * Returns the wrapped ReactElement.
       *
       * @return {ReactElement}
       */
    }, {
      key: "getElement",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = this;
          return this.single("getElement", function() {
            return (0, f.default)(Q[I]).nodeToElement(Q[b]);
          });
        }
        return Y;
      }()
      /**
       * Returns the wrapped ReactElements.
       *
       * @return {Array<ReactElement>}
       */
    }, {
      key: "getElements",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = this;
          return this[T].map(function(le) {
            return (0, f.default)(Q[I]).nodeToElement(le);
          });
        }
        return Y;
      }()
      // eslint-disable-next-line class-methods-use-this
    }, {
      key: "getNode",
      value: /* @__PURE__ */ function() {
        function Y() {
          throw new Error("ReactWrapper::getNode() is no longer supported. Use ReactWrapper::instance() instead");
        }
        return Y;
      }()
      // eslint-disable-next-line class-methods-use-this
    }, {
      key: "getNodes",
      value: /* @__PURE__ */ function() {
        function Y() {
          throw new Error("ReactWrapper::getNodes() is no longer supported.");
        }
        return Y;
      }()
      /**
       * Returns the outer most DOMComponent of the current wrapper.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @returns {DOMComponent}
       */
    }, {
      key: "getDOMNode",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = (0, f.default)(this[I]);
          return this.single("getDOMNode", function(le) {
            return Q.nodeToHostNode(le, true);
          });
        }
        return Y;
      }()
      /**
       * If the root component contained a ref, you can access it here and get the relevant
       * react component instance or HTML element instance.
       *
       * NOTE: can only be called on a wrapper instance that is also the root instance.
       *
       * @param {String} refname
       * @returns {ReactComponent | HTMLElement}
       */
    }, {
      key: "ref",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          if (this[A] !== this)
            throw new Error("ReactWrapper::ref(refname) can only be called on the root");
          return this.instance().refs[Q];
        }
        return Y;
      }()
      /**
       * Returns the wrapper's underlying instance.
       *
       * Example:
       * ```
       * const wrapper = mount(<MyComponent />);
       * const inst = wrapper.instance();
       * expect(inst).to.be.instanceOf(MyComponent);
       * ```
       * @returns {ReactComponent|DOMComponent}
       */
    }, {
      key: "instance",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = this;
          return this.single("instance", function() {
            return Q[b].instance;
          });
        }
        return Y;
      }()
      /**
       * If a `wrappingComponent` was passed in `options`, this methods returns a `ReactWrapper` around
       * the rendered `wrappingComponent`. This `ReactWrapper` can be used to update the
       * `wrappingComponent`'s props, state, etc.
       *
       * @returns ReactWrapper
       */
    }, {
      key: "getWrappingComponent",
      value: /* @__PURE__ */ function() {
        function Y() {
          if (this[A] !== this)
            throw new Error("ReactWrapper::getWrappingComponent() can only be called on the root");
          if (!this[I].wrappingComponent)
            throw new Error("ReactWrapper::getWrappingComponent() can only be called on a wrapper that was originally passed a `wrappingComponent` option");
          return this[S];
        }
        return Y;
      }()
      /**
       * Forces a re-render. Useful to run before checking the render output if something external
       * may be updating the state of the component somewhere.
       *
       * NOTE: no matter what instance this is called on, it will always update the root.
       *
       * @returns {ReactWrapper}
       */
    }, {
      key: "update",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = this, le = this[A];
          return this !== le ? le.update() : (K(this, this[E].getNode()), this[N].forEach(function(Se) {
            if (Se !== Q[B]) {
              Se[B] = Q;
              try {
                Se.update();
              } finally {
                Se[B] = null;
              }
            }
          }), this);
        }
        return Y;
      }()
      /**
       * A method that unmounts the component. This can be used to simulate a component going through
       * and unmount/mount lifecycle.
       *
       * @returns {ReactWrapper}
       */
    }, {
      key: "unmount",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = this;
          if (this[A] !== this)
            throw new Error("ReactWrapper::unmount() can only be called on the root");
          return this.single("unmount", function() {
            Q[E].unmount(), Q.update();
          }), this;
        }
        return Y;
      }()
      /**
       * A method that re-mounts the component, if it is not currently mounted.
       * This can be used to simulate a component going through
       * an unmount/mount lifecycle.
       *
       * @returns {ReactWrapper}
       */
    }, {
      key: "mount",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = this;
          if (this[A] !== this)
            throw new Error("ReactWrapper::mount() can only be called on the root");
          return this[E].render(this[P], this[I].context, function() {
            return Q.update();
          }), this;
        }
        return Y;
      }()
      /**
       * A method that sets the props of the root component, and re-renders. Useful for when you are
       * wanting to test how the component behaves over time with changing props. Calling this, for
       * instance, will call the `componentWillReceiveProps` lifecycle method.
       *
       * Similar to `setState`, this method accepts a props object and will merge it in with the already
       * existing props.
       *
       * NOTE: can only be called on a wrapper instance that is also the root instance.
       *
       * @param {Object} props object
       * @param {Function} cb - callback function
       * @returns {ReactWrapper}
       */
    }, {
      key: "setProps",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this, Se = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0;
          if (this[A] !== this)
            throw new Error("ReactWrapper::setProps() can only be called on the root");
          if (arguments.length > 1 && typeof Se != "function")
            throw new TypeError("ReactWrapper::setProps() expects a function as its second argument");
          var Pe = (0, f.default)(this[I]);
          return this[P] = (0, u.cloneElement)(Pe, this[P], Q), this[E].render(this[P], null, function() {
            le.update(), Se && Se();
          }), this;
        }
        return Y;
      }()
      /**
       * A method to invoke `setState` on the root component instance similar to how you might in the
       * definition of the component, and re-renders.  This method is useful for testing your component
       * in hard to achieve states, however should be used sparingly. If possible, you should utilize
       * your component's external API in order to get it into whatever state you want to test, in order
       * to be as accurate of a test as possible. This is not always practical, however.
       *
       * NOTE: can only be called on a wrapper instance that is also the root instance.
       *
       * @param {Object} state to merge
       * @param {Function} cb - callback function
       * @returns {ReactWrapper}
       */
    }, {
      key: "setState",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this, Se = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0;
          if (this.instance() === null || this.getNodeInternal().nodeType !== "class")
            throw new Error("ReactWrapper::setState() can only be called on class components");
          if (arguments.length > 1 && typeof Se != "function")
            throw new TypeError("ReactWrapper::setState() expects a function as its second argument");
          return this.instance().setState(Q, function() {
            if (le.update(), Se) {
              var Pe = (0, f.default)(le[I]), Re = le.instance();
              Pe.invokeSetStateCallback ? Pe.invokeSetStateCallback(Re, Se) : Se.call(Re);
            }
          }), this;
        }
        return Y;
      }()
      /**
       * A method that sets the context of the root component, and re-renders. Useful for when you are
       * wanting to test how the component behaves over time with changing contexts.
       *
       * NOTE: can only be called on a wrapper instance that is also the root instance.
       *
       * @param {Object} context object
       * @returns {ReactWrapper}
       */
    }, {
      key: "setContext",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          if (this[A] !== this)
            throw new Error("ReactWrapper::setContext() can only be called on the root");
          if (!this[I].context)
            throw new Error("ReactWrapper::setContext() can only be called on a wrapper that was originally passed a context option");
          return this[E].render(this[P], Q, function() {
            return le.update();
          }), this;
        }
        return Y;
      }()
      /**
       * Whether or not a given react element exists in the mount render tree.
       *
       * Example:
       * ```
       * const wrapper = mount(<MyComponent />);
       * expect(wrapper.contains(<div className="foo bar" />)).to.equal(true);
       * ```
       *
       * @param {ReactElement|Array<ReactElement>} nodeOrNodes
       * @returns {Boolean}
       */
    }, {
      key: "contains",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = (0, f.default)(this[I]), Se = Array.isArray(Q) ? function(Pe) {
            return (0, u.containsChildrenSubArray)(u.nodeEqual, Pe, Q.map(function(Re) {
              return le.elementToNode(Re);
            }));
          } : function(Pe) {
            return (0, u.nodeEqual)(le.elementToNode(Q), Pe);
          };
          return w(this, Se).length > 0;
        }
        return Y;
      }()
      /**
       * Whether or not a given react element exists in the current render tree.
       * It will determine if one of the wrappers element "looks like" the expected
       * element by checking if all props of the expected element are present
       * on the wrappers element and equals to each other.
       *
       * Example:
       * ```
       * // MyComponent outputs <div><div class="foo">Hello</div></div>
       * const wrapper = mount(<MyComponent />);
       * expect(wrapper.containsMatchingElement(<div>Hello</div>)).to.equal(true);
       * ```
       *
       * @param {ReactElement} node
       * @returns {Boolean}
       */
    }, {
      key: "containsMatchingElement",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = (0, f.default)(this[I]).elementToNode(Q), Se = /* @__PURE__ */ function() {
            function Pe(Re) {
              return (0, u.nodeMatches)(le, Re, function(we, Ne) {
                return we <= Ne;
              });
            }
            return Pe;
          }();
          return w(this, Se).length > 0;
        }
        return Y;
      }()
      /**
       * Whether or not all the given react elements exist in the current render tree.
       * It will determine if one of the wrappers element "looks like" the expected
       * element by checking if all props of the expected element are present
       * on the wrappers element and equals to each other.
       *
       * Example:
       * ```
       * const wrapper = mount(<MyComponent />);
       * expect(wrapper.containsAllMatchingElements([
       *   <div>Hello</div>,
       *   <div>Goodbye</div>,
       * ])).to.equal(true);
       * ```
       *
       * @param {Array<ReactElement>} nodes
       * @returns {Boolean}
       */
    }, {
      key: "containsAllMatchingElements",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          if (!Array.isArray(Q))
            throw new TypeError("nodes should be an Array");
          return Q.every(function(Se) {
            return le.containsMatchingElement(Se);
          });
        }
        return Y;
      }()
      /**
       * Whether or not one of the given react elements exists in the current render tree.
       * It will determine if one of the wrappers element "looks like" the expected
       * element by checking if all props of the expected element are present
       * on the wrappers element and equals to each other.
       *
       * Example:
       * ```
       * const wrapper = mount(<MyComponent />);
       * expect(wrapper.containsAnyMatchingElements([
       *   <div>Hello</div>,
       *   <div>Goodbye</div>,
       * ])).to.equal(true);
       * ```
       *
       * @param {Array<ReactElement>} nodes
       * @returns {Boolean}
       */
    }, {
      key: "containsAnyMatchingElements",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          return Array.isArray(Q) && Q.some(function(Se) {
            return le.containsMatchingElement(Se);
          });
        }
        return Y;
      }()
      /**
       * Whether or not a given react element exists in the render tree.
       *
       * Example:
       * ```
       * const wrapper = mount(<MyComponent />);
       * expect(wrapper.contains(<div className="foo bar" />)).to.equal(true);
       * ```
       *
       * @param {ReactElement} node
       * @returns {Boolean}
       */
    }, {
      key: "equals",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          return this.single("equals", function() {
            return (0, u.nodeEqual)(le.getNodeInternal(), Q);
          });
        }
        return Y;
      }()
      /**
       * Whether or not a given react element matches the render tree.
       * Match is based on the expected element and not on wrapper root node.
       * It will determine if the wrapper root node "looks like" the expected
       * element by checking if all props of the expected element are present
       * on the wrapper root node and equals to each other.
       *
       * Example:
       * ```
       * // MyComponent outputs <div class="foo">Hello</div>
       * const wrapper = mount(<MyComponent />);
       * expect(wrapper.matchesElement(<div>Hello</div>)).to.equal(true);
       * ```
       *
       * @param {ReactElement} node
       * @returns {Boolean}
       */
    }, {
      key: "matchesElement",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          return this.single("matchesElement", function() {
            var Se = (0, f.default)(le[I]), Pe = Se.elementToNode(Q);
            return (0, u.nodeMatches)(Pe, le.getNodeInternal(), function(Re, we) {
              return Re <= we;
            });
          });
        }
        return Y;
      }()
      /**
       * Finds every node in the render tree of the current wrapper that matches the provided selector.
       *
       * @param {EnzymeSelector} selector
       * @returns {ReactWrapper}
       */
    }, {
      key: "find",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          return this.wrap((0, p.reduceTreesBySelector)(Q, this.getNodesInternal()));
        }
        return Y;
      }()
      /**
       * Returns whether or not current node matches a provided selector.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @param {EnzymeSelector} selector
       * @returns {boolean}
       */
    }, {
      key: "is",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = (0, p.buildPredicate)(Q);
          return this.single("is", function(Se) {
            return le(Se);
          });
        }
        return Y;
      }()
      /**
       * Returns true if the component rendered nothing, i.e., null or false.
       *
       * @returns {boolean}
       */
    }, {
      key: "isEmptyRender",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = this.getNodeInternal();
          return (0, u.renderedDive)(Q);
        }
        return Y;
      }()
      /**
       * Returns a new wrapper instance with only the nodes of the current wrapper instance that match
       * the provided predicate function.
       *
       * @param {Function} predicate
       * @returns {ReactWrapper}
       */
    }, {
      key: "filterWhere",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          return R(this, function(Se) {
            return Q(le.wrap(Se));
          });
        }
        return Y;
      }()
      /**
       * Returns a new wrapper instance with only the nodes of the current wrapper instance that match
       * the provided selector.
       *
       * @param {EnzymeSelector} selector
       * @returns {ReactWrapper}
       */
    }, {
      key: "filter",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = (0, p.buildPredicate)(Q);
          return R(this, le);
        }
        return Y;
      }()
      /**
       * Returns a new wrapper instance with only the nodes of the current wrapper that did not match
       * the provided selector. Essentially the inverse of `filter`.
       *
       * @param {EnzymeSelector} selector
       * @returns {ReactWrapper}
       */
    }, {
      key: "not",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = (0, p.buildPredicate)(Q);
          return R(this, function(Se) {
            return !le(Se);
          });
        }
        return Y;
      }()
      /**
       * Returns a string of the rendered text of the current render tree.  This function should be
       * looked at with skepticism if being used to test what the actual HTML output of the component
       * will be. If that is what you would like to test, use enzyme's `render` function instead.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @returns {String}
       */
    }, {
      key: "text",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = (0, f.default)(this[I]);
          return this.single("text", function(le) {
            return (0, d.getTextFromHostNodes)(le, Q);
          });
        }
        return Y;
      }()
      /**
       * Returns the HTML of the node.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @returns {String}
       */
    }, {
      key: "html",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = (0, f.default)(this[I]);
          return this.single("html", function(le) {
            return (0, d.getHTMLFromHostNodes)(le, Q);
          });
        }
        return Y;
      }()
      /**
       * Returns the current node rendered to HTML and wrapped in a CheerioWrapper.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @returns {CheerioWrapper}
       */
    }, {
      key: "render",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = this.html();
          return (0, u.loadCheerioRoot)(Q);
        }
        return Y;
      }()
      /**
       * Used to simulate events. Pass an eventname and (optionally) event arguments. This method of
       * testing events should be met with some skepticism.
       *
       * @param {String} event
       * @param {Object} mock (optional)
       * @returns {ReactWrapper}
       */
    }, {
      key: "simulate",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this, Se = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
          return this.single("simulate", function(Pe) {
            return le[E].simulateEvent(Pe, Q, Se), le[A].update(), le;
          });
        }
        return Y;
      }()
      /**
       * Used to simulate throwing a rendering error. Pass an error to throw.
       *
       * @param {String} error
       * @returns {ReactWrapper}
       */
    }, {
      key: "simulateError",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          if (this[A] === this)
            throw new Error("ReactWrapper::simulateError() may not be called on the root");
          return this.single("simulateError", function(Se) {
            if (Se.nodeType === "host")
              throw new Error("ReactWrapper::simulateError() can only be called on custom components");
            var Pe = le[E];
            if (typeof Pe.simulateError != "function")
              throw new TypeError("your adapter does not support `simulateError`. Try upgrading it!");
            var Re = F(le), we = [Se].concat($(le, Se));
            return Pe.simulateError(we, Re, Q), le[A].update(), le;
          });
        }
        return Y;
      }()
      /**
       * Returns the props hash for the root node of the wrapper.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @returns {Object}
       */
    }, {
      key: "props",
      value: /* @__PURE__ */ function() {
        function Y() {
          return this.single("props", d.propsOfNode);
        }
        return Y;
      }()
      /**
       * Returns the state hash for the root node of the wrapper. Optionally pass in a prop name and it
       * will return just that value.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @param {String} name (optional)
       * @returns {*}
       */
    }, {
      key: "state",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this, Se = this[A] === this ? this[E].getNode() : this.getNodeInternal();
          if (this.instance() === null || Se.nodeType !== "class")
            throw new Error("ReactWrapper::state() can only be called on class components");
          var Pe = this.single("state", function() {
            return le.instance().state;
          });
          if (typeof Q < "u") {
            if (Pe == null)
              throw new TypeError('ReactWrapper::state("' + String(Q) + '") requires that `state` not be `null` or `undefined`');
            return Pe[Q];
          }
          return Pe;
        }
        return Y;
      }()
      /**
       * Returns the context hash for the root node of the wrapper.
       * Optionally pass in a prop name and it will return just that value.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @param {String} name (optional)
       * @returns {*}
       */
    }, {
      key: "context",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          if (this[A] !== this)
            throw new Error("ReactWrapper::context() can only be called on the root");
          var Se = this.single("context", function() {
            return le.instance();
          });
          if (Se === null)
            throw new Error("ReactWrapper::context() can only be called on components with instances");
          var Pe = Se.context;
          return typeof Q < "u" ? Pe[Q] : Pe;
        }
        return Y;
      }()
      /**
       * Returns a new wrapper with all of the children of the current wrapper.
       *
       * @param {EnzymeSelector} [selector]
       * @returns {ReactWrapper}
       */
    }, {
      key: "children",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this.flatMap(function(Se) {
            return (0, d.childrenOfNode)(Se.getNodeInternal());
          });
          return Q ? le.filter(Q) : le;
        }
        return Y;
      }()
      /**
       * Returns a new wrapper with a specific child
       *
       * @param {Number} [index]
       * @returns {ReactWrapper}
       */
    }, {
      key: "childAt",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          return this.single("childAt", function() {
            return le.children().at(Q);
          });
        }
        return Y;
      }()
      /**
       * Returns a wrapper around all of the parents/ancestors of the wrapper. Does not include the node
       * in the current wrapper.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @param {EnzymeSelector} [selector]
       * @returns {ReactWrapper}
       */
    }, {
      key: "parents",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          return this.single("parents", function(Se) {
            var Pe = le.wrap($(le, Se));
            return Q ? Pe.filter(Q) : Pe;
          });
        }
        return Y;
      }()
      /**
       * Returns a wrapper around the immediate parent of the current node.
       *
       * @returns {ReactWrapper}
       */
    }, {
      key: "parent",
      value: /* @__PURE__ */ function() {
        function Y() {
          return this.flatMap(function(Q) {
            return [Q.parents().get(0)];
          });
        }
        return Y;
      }()
      /**
       *
       * @param {EnzymeSelector} selector
       * @returns {ReactWrapper}
       */
    }, {
      key: "closest",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          if (this.is(Q))
            return this;
          var le = this.parents().filter(Q);
          return le.length > 0 ? le.first() : this.findWhere(function() {
            return false;
          });
        }
        return Y;
      }()
      /**
       * Returns the value of  prop with the given name of the root node.
       *
       * @param {String} propName
       * @returns {*}
       */
    }, {
      key: "prop",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          return this.props()[Q];
        }
        return Y;
      }()
      /**
       * Used to invoke a function prop.
       * Will invoke an function prop and return its value.
       *
       * @param {String} propName
       * @returns {Any}
       */
    }, {
      key: "invoke",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          return this.single("invoke", function() {
            var Se = le.prop(Q);
            if (typeof Se != "function")
              throw new TypeError("ReactWrapper::invoke() requires the name of a prop whose value is a function");
            return function() {
              for (var Pe = arguments.length, Re = Array(Pe), we = 0; we < Pe; we++)
                Re[we] = arguments[we];
              var Ne = typeof le[E].wrapInvoke == "function" ? le[E].wrapInvoke(function() {
                return Se.apply(void 0, Re);
              }) : Se.apply(void 0, Re);
              return le[A].update(), Ne;
            };
          });
        }
        return Y;
      }()
      /**
       * Returns a wrapper of the node rendered by the provided render prop.
       *
       * @param {String} propName
       * @returns {Function}
       */
    }, {
      key: "renderProp",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this, Se = (0, f.default)(this[I]);
          if (typeof Se.wrap != "function")
            throw new RangeError("your adapter does not support `wrap`. Try upgrading it!");
          return this.single("renderProp", function(Pe) {
            if (Pe.nodeType === "host")
              throw new TypeError("ReactWrapper::renderProp() can only be called on custom components");
            if (typeof Q != "string")
              throw new TypeError("ReactWrapper::renderProp(): `propName` must be a string");
            var Re = le.props();
            if (!(0, l.default)(Re, Q))
              throw new Error("ReactWrapper::renderProp(): no prop called “" + String(Q) + "“ found");
            var we = Re[Q];
            if (typeof we != "function")
              throw new TypeError("ReactWrapper::renderProp(): expected prop “" + String(Q) + "“ to contain a function, but it holds “" + (typeof we > "u" ? "undefined" : t(we)) + "“");
            return function() {
              var Ne = we.apply(void 0, arguments), Me = Se.wrap(Ne);
              return le.wrap(Me, null, le[I]);
            };
          });
        }
        return Y;
      }()
      /**
       * Returns the key assigned to the current node.
       *
       * @returns {String}
       */
    }, {
      key: "key",
      value: /* @__PURE__ */ function() {
        function Y() {
          return this.single("key", function(Q) {
            return Q.key === void 0 ? null : Q.key;
          });
        }
        return Y;
      }()
      /**
       * Returns the type of the root node of this wrapper. If it's a composite component, this will be
       * the component constructor. If it's native DOM node, it will be a string.
       *
       * @returns {String|Function}
       */
    }, {
      key: "type",
      value: /* @__PURE__ */ function() {
        function Y() {
          return this.single("type", function(Q) {
            return (0, u.typeOfNode)(Q);
          });
        }
        return Y;
      }()
      /**
       * Returns the name of the root node of this wrapper.
       *
       * In order of precedence => type.displayName -> type.name -> type.
       *
       * @returns {String}
       */
    }, {
      key: "name",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = (0, f.default)(this[I]);
          return this.single("name", function(le) {
            return Q.displayNameOfNode ? Q.displayNameOfNode(le) : (0, u.displayNameOfNode)(le);
          });
        }
        return Y;
      }()
      /**
       * Returns whether or not the current root node has the given class name or not.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @param {String} className
       * @returns {Boolean}
       */
    }, {
      key: "hasClass",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          return typeof Q == "string" && Q.indexOf(".") !== -1 && console.warn("It looks like you're calling `ReactWrapper::hasClass()` with a CSS selector. hasClass() expects a class name, not a CSS selector."), this.single("hasClass", function(le) {
            return (0, d.hasClassName)(le, Q);
          });
        }
        return Y;
      }()
      /**
       * Iterates through each node of the current wrapper and executes the provided function with a
       * wrapper around the corresponding node passed in as the first argument.
       *
       * @param {Function} fn
       * @returns {ReactWrapper}
       */
    }, {
      key: "forEach",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          return this.getNodesInternal().forEach(function(Se, Pe) {
            return Q.call(le, le.wrap(Se), Pe);
          }), this;
        }
        return Y;
      }()
      /**
       * Maps the current array of nodes to another array. Each node is passed in as a `ReactWrapper`
       * to the map function.
       *
       * @param {Function} fn
       * @returns {Array}
       */
    }, {
      key: "map",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          return this.getNodesInternal().map(function(Se, Pe) {
            return Q.call(le, le.wrap(Se), Pe);
          });
        }
        return Y;
      }()
      /**
       * Reduces the current array of nodes to another array.
       * Each node is passed in as a `ShallowWrapper` to the reducer function.
       *
       * @param {Function} fn - the reducer function
       * @param {*} initialValue - the initial value
       * @returns {*}
       */
    }, {
      key: "reduce",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this, Se = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0;
          return arguments.length > 1 ? this.getNodesInternal().reduce(function(Pe, Re, we) {
            return Q.call(le, Pe, le.wrap(Re), we);
          }, Se) : this.getNodesInternal().reduce(function(Pe, Re, we) {
            return Q.call(le, we === 1 ? le.wrap(Pe) : Pe, le.wrap(Re), we);
          });
        }
        return Y;
      }()
      /**
       * Reduces the current array of nodes to another array, from right to left. Each node is passed
       * in as a `ShallowWrapper` to the reducer function.
       *
       * @param {Function} fn - the reducer function
       * @param {*} initialValue - the initial value
       * @returns {*}
       */
    }, {
      key: "reduceRight",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this, Se = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0;
          return arguments.length > 1 ? this.getNodesInternal().reduceRight(function(Pe, Re, we) {
            return Q.call(le, Pe, le.wrap(Re), we);
          }, Se) : this.getNodesInternal().reduceRight(function(Pe, Re, we) {
            return Q.call(le, we === 1 ? le.wrap(Pe) : Pe, le.wrap(Re), we);
          });
        }
        return Y;
      }()
      /**
       * Returns a new wrapper with a subset of the nodes of the original wrapper, according to the
       * rules of `Array#slice`.
       *
       * @param {Number} begin
       * @param {Number} end
       * @returns {ShallowWrapper}
       */
    }, {
      key: "slice",
      value: /* @__PURE__ */ function() {
        function Y(Q, le) {
          return this.wrap(this.getNodesInternal().slice(Q, le));
        }
        return Y;
      }()
      /**
       * Returns whether or not any of the nodes in the wrapper match the provided selector.
       *
       * @param {EnzymeSelector} selector
       * @returns {Boolean}
       */
    }, {
      key: "some",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          if (this[A] === this)
            throw new Error("ReactWrapper::some() can not be called on the root");
          var le = (0, p.buildPredicate)(Q);
          return this.getNodesInternal().some(le);
        }
        return Y;
      }()
      /**
       * Returns whether or not any of the nodes in the wrapper pass the provided predicate function.
       *
       * @param {Function} predicate
       * @returns {Boolean}
       */
    }, {
      key: "someWhere",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          return this.getNodesInternal().some(function(Se, Pe) {
            return Q.call(le, le.wrap(Se), Pe);
          });
        }
        return Y;
      }()
      /**
       * Returns whether or not all of the nodes in the wrapper match the provided selector.
       *
       * @param {EnzymeSelector} selector
       * @returns {Boolean}
       */
    }, {
      key: "every",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = (0, p.buildPredicate)(Q);
          return this.getNodesInternal().every(le);
        }
        return Y;
      }()
      /**
       * Returns whether or not any of the nodes in the wrapper pass the provided predicate function.
       *
       * @param {Function} predicate
       * @returns {Boolean}
       */
    }, {
      key: "everyWhere",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          return this.getNodesInternal().every(function(Se, Pe) {
            return Q.call(le, le.wrap(Se), Pe);
          });
        }
        return Y;
      }()
      /**
       * Utility method used to create new wrappers with a mapping function that returns an array of
       * nodes in response to a single node wrapper. The returned wrapper is a single wrapper around
       * all of the mapped nodes flattened (and de-duplicated).
       *
       * @param {Function} fn
       * @returns {ReactWrapper}
       */
    }, {
      key: "flatMap",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this, Se = this.getNodesInternal().map(function(Re, we) {
            return Q.call(le, le.wrap(Re), we);
          }), Pe = (0, a.default)(Se, 1);
          return this.wrap(Pe.filter(Boolean));
        }
        return Y;
      }()
      /**
       * Finds all nodes in the current wrapper nodes' render trees that match the provided predicate
       * function.
       *
       * @param {Function} predicate
       * @returns {ReactWrapper}
       */
    }, {
      key: "findWhere",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this;
          return w(this, function(Se) {
            var Pe = le.wrap(Se);
            return Pe.length > 0 && Q(Pe);
          });
        }
        return Y;
      }()
      /**
       * Returns the node at a given index of the current wrapper.
       *
       * @param {Number} index
       * @returns {ReactElement}
       */
    }, {
      key: "get",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          return this.getElements()[Q];
        }
        return Y;
      }()
      /**
       * Returns a wrapper around the node at a given index of the current wrapper.
       *
       * @param {Number} index
       * @returns {ReactWrapper}
       */
    }, {
      key: "at",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = this.getNodesInternal();
          return Q < le.length ? this.wrap(le[Q]) : this.wrap([]);
        }
        return Y;
      }()
      /**
       * Returns a wrapper around the first node of the current wrapper.
       *
       * @returns {ReactWrapper}
       */
    }, {
      key: "first",
      value: /* @__PURE__ */ function() {
        function Y() {
          return this.at(0);
        }
        return Y;
      }()
      /**
       * Returns a wrapper around the last node of the current wrapper.
       *
       * @returns {ReactWrapper}
       */
    }, {
      key: "last",
      value: /* @__PURE__ */ function() {
        function Y() {
          return this.at(this.length - 1);
        }
        return Y;
      }()
      /**
       * Delegates to exists()
       *
       * @returns {boolean}
       */
    }, {
      key: "isEmpty",
      value: /* @__PURE__ */ function() {
        function Y() {
          return console.warn("Enzyme::Deprecated method isEmpty() called, use exists() instead."), !this.exists();
        }
        return Y;
      }()
      /**
       * Returns true if the current wrapper has nodes. False otherwise.
       * If called with a selector it returns `.find(selector).exists()` instead.
       *
       * @param {EnzymeSelector} selector (optional)
       * @returns {boolean}
       */
    }, {
      key: "exists",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null;
          return arguments.length > 0 ? this.find(Q).exists() : this.length > 0;
        }
        return Y;
      }()
      /**
       * Utility method that throws an error if the current instance has a length other than one.
       * This is primarily used to enforce that certain methods are only run on a wrapper when it is
       * wrapping a single node.
       *
       * @param {Function} fn
       * @returns {*}
       */
    }, {
      key: "single",
      value: /* @__PURE__ */ function() {
        function Y(Q, le) {
          var Se = typeof Q == "string" ? Q : "unknown", Pe = typeof le == "function" ? le : Q;
          if (this.length !== 1)
            throw new Error("Method “" + Se + "” is meant to be run on 1 node. " + String(this.length) + " found instead.");
          return Pe.call(this, this.getNodeInternal());
        }
        return Y;
      }()
      /**
       * Helpful utility method to create a new wrapper with the same root as the current wrapper, with
       * any nodes passed in as the first parameter automatically wrapped.
       *
       * @param {ReactWrapper|ReactElement|Array<ReactElement>} node
       * @returns {ReactWrapper}
       */
    }, {
      key: "wrap",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          var le = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this[A];
          if (Q instanceof ae)
            return Q;
          for (var Se = arguments.length, Pe = Array(Se > 2 ? Se - 2 : 0), Re = 2; Re < Se; Re++)
            Pe[Re - 2] = arguments[Re];
          return new (Function.prototype.bind.apply(ae, [null].concat([Q, le], Pe)))();
        }
        return Y;
      }()
      /**
       * Returns an HTML-like string of the shallow render for debugging purposes.
       *
       * @param {Object} [options] - Property bag of additional options.
       * @param {boolean} [options.ignoreProps] - if true, props are omitted from the string.
       * @param {boolean} [options.verbose] - if true, arrays and objects to be verbosely printed.
       * @returns {String}
       */
    }, {
      key: "debug",
      value: /* @__PURE__ */ function() {
        function Y() {
          var Q = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          return (0, h.debugNodes)(this.getNodesInternal(), Q);
        }
        return Y;
      }()
      /**
       * Invokes intercepter and returns itself. intercepter is called with itself.
       * This is helpful when debugging nodes in method chains.
       * @param fn
       * @returns {ReactWrapper}
       */
    }, {
      key: "tap",
      value: /* @__PURE__ */ function() {
        function Y(Q) {
          return Q(this), this;
        }
        return Y;
      }()
      /**
       * Detaches the react tree from the DOM. Runs `ReactDOM.unmountComponentAtNode()` under the hood.
       *
       * This method will most commonly be used as a "cleanup" method if you decide to use the
       * `attachTo` option in `mount(node, options)`.
       *
       * The method is intentionally not "fluent" (in that it doesn't return `this`) because you should
       * not be doing anything with this wrapper after this method is called.
       */
    }, {
      key: "detach",
      value: /* @__PURE__ */ function() {
        function Y() {
          if (this[A] !== this)
            throw new Error("ReactWrapper::detach() can only be called on the root");
          if (!this[I].attachTo)
            throw new Error("ReactWrapper::detach() can only be called on when the `attachTo` option was passed into `mount()`.");
          this[E].unmount();
        }
        return Y;
      }()
      /**
       * Strips out all the not host-nodes from the list of nodes
       *
       * This method is useful if you want to check for the presence of host nodes
       * (actually rendered HTML elements) ignoring the React nodes.
       */
    }, {
      key: "hostNodes",
      value: /* @__PURE__ */ function() {
        function Y() {
          return this.filterWhere(function(Q) {
            return typeof Q.type() == "string";
          });
        }
        return Y;
      }()
    }]), ae;
  }(), J = function(ae) {
    _(Y, ae);
    function Y(Q, le) {
      y(this, Y);
      var Se = v(this, (Y.__proto__ || Object.getPrototypeOf(Y)).call(this, le.getNode(), Q));
      return (0, u.privateSet)(Se, A, Se), (0, u.privateSet)(Se, E, le), Se[N].push(Q), Se;
    }
    return r(Y, [{
      key: "getWrappingComponent",
      value: /* @__PURE__ */ function() {
        function Q() {
          throw new TypeError("ReactWrapper::getWrappingComponent() can only be called on the root");
        }
        return Q;
      }()
    }]), Y;
  }(se);
  u.ITERATOR_SYMBOL && Object.defineProperty(se.prototype, u.ITERATOR_SYMBOL, {
    configurable: true,
    value: /* @__PURE__ */ function() {
      function ae() {
        var Y, Q = this[T][u.ITERATOR_SYMBOL](), le = (0, f.default)(this[I]);
        return Y = {}, g(Y, u.ITERATOR_SYMBOL, function() {
          return this;
        }), g(Y, "next", /* @__PURE__ */ function() {
          function Se() {
            var Pe = Q.next();
            return Pe.done ? {
              done: true
            } : {
              done: false,
              value: le.nodeToElement(Pe.value)
            };
          }
          return Se;
        }()), Y;
      }
      return ae;
    }()
  });
  function me(ae, Y) {
    Object.defineProperty(se.prototype, ae, {
      get: /* @__PURE__ */ function() {
        function Q() {
          throw new Error(`
        Attempted to access ReactWrapper::` + String(ae) + `, which was previously a private property on
        Enzyme ReactWrapper instances, but is no longer and should not be relied upon.
        ` + String(Y) + `
      `);
        }
        return Q;
      }(),
      enumerable: false,
      configurable: false
    });
  }
  me("node", "Consider using the getElement() method instead."), me("nodes", "Consider using the getElements() method instead."), me("renderer", ""), me("options", ""), me("complexSelector", ""), e12.default = se;
})(nN);
var eM = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  });
  var t = /* @__PURE__ */ function() {
    function xe(ne, ce, _e) {
      ne === null && (ne = Function.prototype);
      var ee = Object.getOwnPropertyDescriptor(ne, ce);
      if (ee === void 0) {
        var de = Object.getPrototypeOf(ne);
        return de === null ? void 0 : xe(de, ce, _e);
      } else {
        if ("value" in ee)
          return ee.value;
        var Ce = ee.get;
        return Ce === void 0 ? void 0 : Ce.call(_e);
      }
    }
    return xe;
  }(), r = /* @__PURE__ */ function() {
    function xe(ne, ce) {
      for (var _e = 0; _e < ce.length; _e++) {
        var ee = ce[_e];
        ee.enumerable = ee.enumerable || false, ee.configurable = true, "value" in ee && (ee.writable = true), Object.defineProperty(ne, ee.key, ee);
      }
    }
    return function(ne, ce, _e) {
      return ce && xe(ne.prototype, ce), _e && xe(ne, _e), ne;
    };
  }(), n = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(xe) {
    return typeof xe;
  } : function(xe) {
    return xe && typeof Symbol == "function" && xe.constructor === Symbol && xe !== Symbol.prototype ? "symbol" : typeof xe;
  }, i = op, o = _(i), a = Jv, s = _(a), l = sp, u = _(l), c = pX, f = _(c), h = ey, d = uc, p = _(d), m = hc, g = _n, v = mp;
  function _(xe) {
    return xe && xe.__esModule ? xe : {
      default: xe
    };
  }
  function y(xe, ne) {
    if (!xe)
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return ne && (typeof ne == "object" || typeof ne == "function") ? ne : xe;
  }
  function b(xe, ne) {
    if (typeof ne != "function" && ne !== null)
      throw new TypeError("Super expression must either be null or a function, not " + typeof ne);
    xe.prototype = Object.create(ne && ne.prototype, {
      constructor: {
        value: xe,
        enumerable: false,
        writable: true,
        configurable: true
      }
    }), ne && (Object.setPrototypeOf ? Object.setPrototypeOf(xe, ne) : xe.__proto__ = ne);
  }
  function T(xe) {
    if (Array.isArray(xe)) {
      for (var ne = 0, ce = Array(xe.length); ne < xe.length; ne++)
        ce[ne] = xe[ne];
      return ce;
    } else
      return Array.from(xe);
  }
  function E(xe, ne) {
    if (!(xe instanceof ne))
      throw new TypeError("Cannot call a class as a function");
  }
  function P(xe, ne, ce) {
    return ne in xe ? Object.defineProperty(xe, ne, {
      value: ce,
      enumerable: true,
      configurable: true,
      writable: true
    }) : xe[ne] = ce, xe;
  }
  var A = (0, h.sym)("__node__"), I = (0, h.sym)("__nodes__"), x = (0, h.sym)("__renderer__"), S = (0, h.sym)("__unrendered__"), N = (0, h.sym)("__root__"), B = (0, h.sym)("__options__"), w = (0, h.sym)("__setState__"), R = (0, h.sym)("__rootNodes__"), F = (0, h.sym)("__childContext__"), $ = (0, h.sym)("__wrappingComponent__"), K = (0, h.sym)("__primaryWrapper__"), se = (0, h.sym)("__rootFinder__"), J = (0, h.sym)("__providerValues__");
  function me(xe, ne) {
    var ce = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : g.treeFilter;
    return xe.flatMap(function(_e) {
      return ce(_e.getNodeInternal(), ne);
    });
  }
  function ae(xe, ne) {
    return xe.wrap(xe.getNodesInternal().filter(ne).filter(Boolean));
  }
  function Y(xe) {
    var ne = xe.lifecycleExperimental, ce = xe.disableLifecycleMethods, _e = xe.enableComponentDidUpdateOnSetState, ee = xe.supportPrevContextArgumentOfComponentDidUpdate, de = xe.lifecycles;
    if (typeof ne < "u" && typeof ne != "boolean")
      throw new Error("lifecycleExperimental must be either true or false if provided");
    if (typeof ce < "u" && typeof ce != "boolean")
      throw new Error("disableLifecycleMethods must be either true or false if provided");
    if (ne != null && ce != null && ne === ce)
      throw new Error("lifecycleExperimental and disableLifecycleMethods cannot be set to the same value");
    if (typeof _e < "u" && de.componentDidUpdate && de.componentDidUpdate.onSetState !== _e)
      throw new TypeError("the legacy enableComponentDidUpdateOnSetState option should be matched by `lifecycles: { componentDidUpdate: { onSetState: true } }`, for compatibility");
    if (typeof ee < "u" && de.componentDidUpdate && de.componentDidUpdate.prevContext !== ee)
      throw new TypeError("the legacy supportPrevContextArgumentOfComponentDidUpdate option should be matched by `lifecycles: { componentDidUpdate: { prevContext: true } }`, for compatibility");
  }
  function Q(xe) {
    var ne = xe.options, ce = ne.lifecycles, _e = ce === void 0 ? {} : ce, ee = ne.enableComponentDidUpdateOnSetState, de = ne.supportPrevContextArgumentOfComponentDidUpdate, Ce = typeof ee < "u", ke = typeof de < "u", Ve = Ce || ke ? (0, o.default)({}, Ce && {
      onSetState: !!ee
    }, ke && {
      prevContext: !!de
    }) : null, We = _e.getDerivedStateFromProps, Ke = We ? {
      hasShouldComponentUpdateBug: !!We.hasShouldComponentUpdateBug
    } : false;
    return (0, o.default)({}, _e, {
      setState: (0, o.default)({}, _e.setState),
      getChildContext: (0, o.default)({
        calledByRenderer: true
      }, _e.getChildContext)
    }, Ve && {
      componentDidUpdate: Ve
    }, {
      getDerivedStateFromProps: Ke
    });
  }
  function le(xe) {
    return xe.nodeType === "host" ? xe : xe.rendered;
  }
  function Se(xe) {
    if (xe[N].length !== 1)
      throw new Error("getRootNodeInternal(wrapper) can only be called when wrapper wraps one node");
    return xe[N] !== xe ? xe[R][0] : xe[N][A];
  }
  function Pe(xe, ne) {
    return (0, g.parentsOfNode)(ne, Se(xe));
  }
  function Re(xe, ne) {
    Array.isArray(ne) ? ((0, h.privateSet)(xe, A, ne[0]), (0, h.privateSet)(xe, I, ne)) : ((0, h.privateSet)(xe, A, ne), (0, h.privateSet)(xe, I, [ne])), (0, h.privateSet)(xe, "length", xe[I].length);
  }
  function we(xe, ne, ce, _e) {
    return !(0, f.default)(xe, ne) || !(0, f.default)(ce, _e);
  }
  function Ne(xe) {
    return xe && xe.isPureReactComponent;
  }
  function Me(xe, ne, ce) {
    var _e = xe.instance, ee = xe.type, de = (0, h.displayNameOfNode)(xe);
    if (n(ee.childContextTypes) !== "object")
      return console.warn(String(de) + ".getChildContext(): childContextTypes must be defined in order to use getChildContext()."), {};
    var Ce = _e.getChildContext();
    return Object.keys(Ce).forEach(function(ke) {
      if (!(ke in ee.childContextTypes))
        throw new Error(String(de) + '.getChildContext(): key "' + String(ke) + '" is not defined in childContextTypes.');
    }), typeof ce.checkPropTypes == "function" && ce.checkPropTypes(ee.childContextTypes, Ce, "child context", ne), Ce;
  }
  function Ie(xe, ne) {
    return !(0, h.isCustomComponentElement)(xe, ne) || !xe.type.prototype || typeof xe.type.prototype.getChildContext != "function" ? null : (0, h.spyMethod)(xe.type.prototype, "getChildContext");
  }
  function Ge(xe, ne, ce, _e, ee) {
    var de = ne[x];
    if (xe.options.legacyContextMode === "parent")
      if (ee)
        (0, h.privateSet)(ne, F, ee.getLastReturnValue()), ee.restore();
      else if (typeof ce.getChildContext == "function") {
        var Ce = [ne[A]].concat(Pe(ne, ne[A])), ke = Me(_e, Ce, de);
        (0, h.privateSet)(ne, F, ke);
      } else
        (0, h.privateSet)(ne, F, null);
  }
  function je(xe, ne) {
    var ce = xe.type.getDerivedStateFromProps;
    if (typeof ce == "function")
      var _e = xe.instance, ee = (0, h.spyMethod)(_e, "shouldComponentUpdate", function(Ce) {
        return /* @__PURE__ */ function() {
          function ke() {
            _e.state = ne;
            for (var Ve = arguments.length, We = Array(Ve), Ke = 0; Ke < Ve; Ke++)
              We[Ke] = arguments[Ke];
            var tt = Ce.apply(_e, We), ut = We[1];
            return _e.state = ut, de(), tt;
          }
          return ke;
        }();
      }), de = ee.restore;
  }
  function ot(xe, ne, ce) {
    var _e = xe[A], ee = _e && ce.nodeToElement(_e);
    if (xe.type() === ne)
      return xe.dive();
    if (ee && (0, h.isCustomComponentElement)(ee, ce))
      return ot(xe.dive(), ne, ce);
    for (var de = xe.children(), Ce = 0; Ce < de.length; Ce += 1) {
      var ke = ot(de.at(Ce), ne, ce);
      if (typeof ke < "u")
        return ke;
    }
  }
  function at(xe, ne) {
    var ce = ot(xe, xe[se], ne);
    if (!ce)
      throw new Error("`wrappingComponent` must render its children!");
    return {
      legacyContext: ce[B].context,
      providerValues: ce[J]
    };
  }
  function Qe(xe, ne, ce, _e) {
    var ee = (0, h.makeOptions)(ce), de = (0, p.default)(ce);
    if ((0, h.privateSet)(ee, J, ce[J]), ne || !(0, h.isCustomComponent)(ee.wrappingComponent, de))
      return ee;
    if (typeof de.wrapWithWrappingComponent != "function")
      throw new TypeError("your adapter does not support `wrappingComponent`. Try upgrading it!");
    var Ce = de.wrapWithWrappingComponent(xe, ee), ke = Ce.node, Ve = Ce.RootFinder, We = new rn(ke, _e, Ve), Ke = at(We, de), tt = Ke.legacyContext, ut = Ke.providerValues;
    return (0, h.privateSet)(_e, $, We), (0, o.default)({}, ee, P({
      context: (0, o.default)({}, ee.context, tt)
    }, J, ut));
  }
  function bt(xe) {
    var ne = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, ce = (0, o.default)({}, xe[B], ne, {
      context: ne.context || (0, o.default)({}, xe[B].context, xe[N][F])
    });
    return (0, h.privateSet)(ce, J, xe[N][J]), ce;
  }
  var Et = function() {
    function xe(ne, ce) {
      var _e = this, ee = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
      E(this, xe), Y(ee);
      var de = Qe(ne, ce, ee, this), Ce = (0, p.default)(de), ke = Q(Ce);
      if (ce)
        (0, h.privateSet)(this, N, ce), (0, h.privateSet)(this, S, null), (0, h.privateSet)(this, x, ce[x]), Re(this, ne), (0, h.privateSet)(this, B, ce[B]), (0, h.privateSet)(this, R, ce[I]), (0, h.privateSet)(this, J, null);
      else {
        if (!Ce.isValidElement(ne))
          throw new TypeError("ShallowWrapper can only wrap valid elements");
        var Ve = ke.getChildContext.calledByRenderer ? Ie(ne, Ce) : null;
        (0, h.privateSet)(this, N, this), (0, h.privateSet)(this, S, ne);
        var We = Ce.createRenderer((0, o.default)({
          mode: "shallow"
        }, de));
        (0, h.privateSet)(this, x, We);
        var Ke = new Map(de[J] || []);
        this[x].render(ne, de.context, {
          providerValues: Ke
        });
        var tt = this[x].getNode();
        Re(this, le(tt)), (0, h.privateSet)(this, B, de), (0, h.privateSet)(this, J, Ke);
        var ut = tt.instance;
        ut && !de.disableLifecycleMethods && (ke.componentDidUpdate.onSetState && !ut[w] && ((0, h.privateSet)(ut, w, ut.setState), ut.setState = function(Dt) {
          var gt = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0;
          return _e.setState.apply(_e, T(gt == null ? [Dt] : [Dt, gt]));
        }), typeof ut.componentDidMount == "function" && this[x].batchedUpdates(function() {
          ut.componentDidMount();
        }), Ge(Ce, this, ut, tt, Ve));
      }
    }
    return r(xe, [{
      key: "root",
      value: /* @__PURE__ */ function() {
        function ne() {
          return this[N];
        }
        return ne;
      }()
      /**
       * Returns the wrapped component.
       *
       * @return {ReactComponent}
       */
    }, {
      key: "getNodeInternal",
      value: /* @__PURE__ */ function() {
        function ne() {
          if (this.length !== 1)
            throw new Error("ShallowWrapper::getNode() can only be called when wrapping one node");
          return this[N] === this && this.update(), this[A];
        }
        return ne;
      }()
      /**
       * Returns the the wrapped components.
       *
       * @return {Array<ReactComponent>}
       */
    }, {
      key: "getNodesInternal",
      value: /* @__PURE__ */ function() {
        function ne() {
          return this[N] === this && this.length === 1 && this.update(), this[I];
        }
        return ne;
      }()
      /**
       * Returns the wrapped ReactElement.
       *
       * @return {ReactElement}
       */
    }, {
      key: "getElement",
      value: /* @__PURE__ */ function() {
        function ne() {
          var ce = this;
          return this.single("getElement", function(_e) {
            return (0, p.default)(ce[B]).nodeToElement(_e);
          });
        }
        return ne;
      }()
      /**
       * Returns the wrapped ReactElements.
       *
       * @return {Array<ReactElement>}
       */
    }, {
      key: "getElements",
      value: /* @__PURE__ */ function() {
        function ne() {
          var ce = this;
          return this.getNodesInternal().map(function(_e) {
            return (0, p.default)(ce[B]).nodeToElement(_e);
          });
        }
        return ne;
      }()
      // eslint-disable-next-line class-methods-use-this
    }, {
      key: "getNode",
      value: /* @__PURE__ */ function() {
        function ne() {
          throw new Error("ShallowWrapper::getNode() is no longer supported. Use ShallowWrapper::getElement() instead");
        }
        return ne;
      }()
      // eslint-disable-next-line class-methods-use-this
    }, {
      key: "getNodes",
      value: /* @__PURE__ */ function() {
        function ne() {
          throw new Error("ShallowWrapper::getNodes() is no longer supported. Use ShallowWrapper::getElements() instead");
        }
        return ne;
      }()
      /**
       * Gets the instance of the component being rendered as the root node passed into `shallow()`.
       *
       * NOTE: can only be called on a wrapper instance that is also the root instance.
       *
       * Example:
       * ```
       * const wrapper = shallow(<MyComponent />);
       * const inst = wrapper.instance();
       * expect(inst).to.be.instanceOf(MyComponent);
       * ```
       * @returns {ReactComponent}
       */
    }, {
      key: "instance",
      value: /* @__PURE__ */ function() {
        function ne() {
          if (this[N] !== this)
            throw new Error("ShallowWrapper::instance() can only be called on the root");
          return this[x].getNode().instance;
        }
        return ne;
      }()
      /**
       * If a `wrappingComponent` was passed in `options`, this methods returns a `ShallowWrapper`
       * around the rendered `wrappingComponent`. This `ShallowWrapper` can be used to update the
       * `wrappingComponent`'s props, state, etc.
       *
       * @returns ShallowWrapper
       */
    }, {
      key: "getWrappingComponent",
      value: /* @__PURE__ */ function() {
        function ne() {
          if (this[N] !== this)
            throw new Error("ShallowWrapper::getWrappingComponent() can only be called on the root");
          if (!this[B].wrappingComponent)
            throw new Error("ShallowWrapper::getWrappingComponent() can only be called on a wrapper that was originally passed a `wrappingComponent` option");
          return this[$];
        }
        return ne;
      }()
      /**
       * Forces a re-render. Useful to run before checking the render output if something external
       * may be updating the state of the component somewhere.
       *
       * NOTE: can only be called on a wrapper instance that is also the root instance.
       *
       * @returns {ShallowWrapper}
       */
    }, {
      key: "update",
      value: /* @__PURE__ */ function() {
        function ne() {
          if (this[N] !== this)
            throw new Error("ShallowWrapper::update() can only be called on the root");
          if (this.length !== 1)
            throw new Error("ShallowWrapper::update() can only be called when wrapping one node");
          return Re(this, le(this[x].getNode())), this;
        }
        return ne;
      }()
      /**
       * A method that unmounts the component. This can be used to simulate a component going through
       * and unmount/mount lifecycle.
       * @returns {ShallowWrapper}
       */
    }, {
      key: "unmount",
      value: /* @__PURE__ */ function() {
        function ne() {
          return this[x].unmount(), this[N][$] && this[N][$].unmount(), this;
        }
        return ne;
      }()
      /**
       * A method is for re-render with new props and context.
       * This calls componentDidUpdate method if disableLifecycleMethods is not enabled.
       *
       * NOTE: can only be called on a wrapper instance that is also the root instance.
       *
       * @param {Object} props
       * @param {Object} context
       * @returns {ShallowWrapper}
       */
    }, {
      key: "rerender",
      value: /* @__PURE__ */ function() {
        function ne(ce, _e) {
          var ee = this, de = (0, p.default)(this[B]);
          return this.single("rerender", function() {
            (0, h.withSetStateAllowed)(function() {
              var Ce = ee[x].getNode(), ke = Ce.instance || {}, Ve = Ce.type || {}, We = ke.state, Ke = ke.props || ee[S].props, tt = ke.context || ee[B].context, ut = _e || tt;
              _e && (ee[B] = (0, o.default)({}, ee[B], {
                context: ut
              })), ee[x].batchedUpdates(function() {
                var Dt = Q(de), gt = true, pr = void 0, H = void 0;
                if (!ee[B].disableLifecycleMethods && ke) {
                  if (typeof ke.shouldComponentUpdate == "function") {
                    var C = Dt.getDerivedStateFromProps;
                    C && C.hasShouldComponentUpdateBug && je(Ce, We), pr = (0, h.spyMethod)(ke, "shouldComponentUpdate");
                  }
                  Dt.getChildContext.calledByRenderer && typeof ke.getChildContext == "function" && (H = (0, h.spyMethod)(ke, "getChildContext"));
                }
                if (!pr && Ne(ke) && (gt = we(Ke, ce, We, ke.state)), ce && (ee[S] = (0, h.cloneElement)(de, ee[S], ce)), ee[x].render(ee[S], ut, {
                  providerValues: ee[J]
                }), pr && (gt = pr.getLastReturnValue(), pr.restore()), gt && !ee[B].disableLifecycleMethods && ke)
                  if (Ge(de, ee, ke, Ce, H), Dt.getSnapshotBeforeUpdate) {
                    var M = void 0;
                    typeof ke.getSnapshotBeforeUpdate == "function" && (M = ke.getSnapshotBeforeUpdate(Ke, We)), Dt.componentDidUpdate && typeof ke.componentDidUpdate == "function" && (!We || (0, f.default)(We, ee.instance().state) || typeof Ve.getDerivedStateFromProps == "function") && ke.componentDidUpdate(Ke, We, M);
                  } else
                    Dt.componentDidUpdate && typeof ke.componentDidUpdate == "function" && (Dt.componentDidUpdate.prevContext ? ke.componentDidUpdate(Ke, We, tt) : (!We || (0, f.default)(ee.instance().state, We)) && ke.componentDidUpdate(Ke, We));
                else
                  (0, f.default)(ce, ke.props) || (ke.props = (Object.freeze || Object)((0, o.default)({}, ke.props, ce)));
                ee.update();
              });
            });
          }), this;
        }
        return ne;
      }()
      /**
       * A method that sets the props of the root component, and re-renders. Useful for when you are
       * wanting to test how the component behaves over time with changing props. Calling this, for
       * instance, will call the `componentWillReceiveProps` lifecycle method.
       *
       * Similar to `setState`, this method accepts a props object and will merge it in with the already
       * existing props.
       *
       * NOTE: can only be called on a wrapper instance that is also the root instance.
       *
       * @param {Object} props object
       * @param {Function} cb - callback function
       * @returns {ShallowWrapper}
       */
    }, {
      key: "setProps",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0;
          if (this[N] !== this)
            throw new Error("ShallowWrapper::setProps() can only be called on the root");
          if (arguments.length > 1 && typeof _e != "function")
            throw new TypeError("ReactWrapper::setProps() expects a function as its second argument");
          return this.rerender(ce), _e && _e(), this;
        }
        return ne;
      }()
      /**
       * A method to invoke `setState` on the root component instance similar to how you might in the
       * definition of the component, and re-renders.  This method is useful for testing your component
       * in hard to achieve states, however should be used sparingly. If possible, you should utilize
       * your component's external API in order to get it into whatever state you want to test, in order
       * to be as accurate of a test as possible. This is not always practical, however.
       *
       * NOTE: can only be called on a wrapper instance that is also the root instance.
       *
       * @param {Object} state to merge
       * @param {Function} cb - callback function
       * @returns {ShallowWrapper}
       */
    }, {
      key: "setState",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this, ee = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0;
          if (this[N] !== this)
            throw new Error("ShallowWrapper::setState() can only be called on the root");
          if (this.instance() === null || this[x].getNode().nodeType !== "class")
            throw new Error("ShallowWrapper::setState() can only be called on class components");
          if (arguments.length > 1 && typeof ee != "function")
            throw new TypeError("ReactWrapper::setState() expects a function as its second argument");
          return this.single("setState", function() {
            (0, h.withSetStateAllowed)(function() {
              var de = (0, p.default)(_e[B]), Ce = Q(de), ke = _e[x].getNode(), Ve = ke.instance, We = Ve.props, Ke = Ve.state, tt = Ve.context, ut = typeof ce == "function" ? ce.call(Ve, Ke, We) : ce, Dt = !Ce.setState.skipsComponentDidUpdateOnNullish || ut != null, gt = void 0, pr = void 0, H = true;
              if (!_e[B].disableLifecycleMethods && Ve) {
                if (Ce.componentDidUpdate && Ce.componentDidUpdate.onSetState && typeof Ve.shouldComponentUpdate == "function") {
                  var C = Ce.getDerivedStateFromProps;
                  C && C.hasShouldComponentUpdateBug && je(ke, ce), gt = (0, h.spyMethod)(Ve, "shouldComponentUpdate");
                }
                Ce.getChildContext.calledByRenderer && typeof Ve.getChildContext == "function" && (pr = (0, h.spyMethod)(Ve, "getChildContext"));
              }
              if (!gt && Ne(Ve) && (H = we(We, Ve.props, Ke, (0, o.default)({}, Ke, ut))), Ve[w] ? Ve[w](ut) : Ve.setState(ut), gt && (H = gt.getLastReturnValue(), gt.restore()), Dt && H && !_e[B].disableLifecycleMethods && (Ge(de, _e, Ve, ke, pr), Ce.componentDidUpdate && Ce.componentDidUpdate.onSetState))
                if (Ce.getSnapshotBeforeUpdate && typeof Ve.getSnapshotBeforeUpdate == "function") {
                  var M = Ve.getSnapshotBeforeUpdate(We, Ke);
                  typeof Ve.componentDidUpdate == "function" && Ve.componentDidUpdate(We, Ke, M);
                } else
                  typeof Ve.componentDidUpdate == "function" && (Ce.componentDidUpdate.prevContext ? Ve.componentDidUpdate(We, Ke, tt) : Ve.componentDidUpdate(We, Ke));
              _e.update(), ee && (de.invokeSetStateCallback ? de.invokeSetStateCallback(Ve, ee) : ee.call(Ve));
            });
          }), this;
        }
        return ne;
      }()
      /**
       * A method that sets the context of the root component, and re-renders. Useful for when you are
       * wanting to test how the component behaves over time with changing contexts.
       *
       * NOTE: can only be called on a wrapper instance that is also the root instance.
       *
       * @param {Object} context object
       * @returns {ShallowWrapper}
       */
    }, {
      key: "setContext",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          if (this[N] !== this)
            throw new Error("ShallowWrapper::setContext() can only be called on the root");
          if (!this[B].context)
            throw new Error("ShallowWrapper::setContext() can only be called on a wrapper that was originally passed a context option");
          return this.rerender(null, ce);
        }
        return ne;
      }()
      /**
       * Whether or not a given react element exists in the shallow render tree.
       *
       * Example:
       * ```
       * const wrapper = shallow(<MyComponent />);
       * expect(wrapper.contains(<div className="foo bar" />)).to.equal(true);
       * ```
       *
       * @param {ReactElement|Array<ReactElement>} nodeOrNodes
       * @returns {Boolean}
       */
    }, {
      key: "contains",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = (0, p.default)(this[B]);
          if (!(0, h.isReactElementAlike)(ce, _e))
            throw new Error("ShallowWrapper::contains() can only be called with a ReactElement (or an array of them), a string, or a number as an argument.");
          var ee = Array.isArray(ce) ? function(de) {
            return (0, h.containsChildrenSubArray)(h.nodeEqual, de, ce.map(function(Ce) {
              return _e.elementToNode(Ce);
            }));
          } : function(de) {
            return (0, h.nodeEqual)(_e.elementToNode(ce), de);
          };
          return me(this, ee).length > 0;
        }
        return ne;
      }()
      /**
       * Whether or not a given react element exists in the shallow render tree.
       * Match is based on the expected element and not on wrappers element.
       * It will determine if one of the wrappers element "looks like" the expected
       * element by checking if all props of the expected element are present
       * on the wrappers element and equals to each other.
       *
       * Example:
       * ```
       * // MyComponent outputs <div><div class="foo">Hello</div></div>
       * const wrapper = shallow(<MyComponent />);
       * expect(wrapper.containsMatchingElement(<div>Hello</div>)).to.equal(true);
       * ```
       *
       * @param {ReactElement} node
       * @returns {Boolean}
       */
    }, {
      key: "containsMatchingElement",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = (0, p.default)(this[B]), ee = _e.elementToNode(ce), de = /* @__PURE__ */ function() {
            function Ce(ke) {
              return (0, h.nodeMatches)(ee, ke, function(Ve, We) {
                return Ve <= We;
              });
            }
            return Ce;
          }();
          return me(this, de).length > 0;
        }
        return ne;
      }()
      /**
       * Whether or not all the given react elements exist in the shallow render tree.
       * Match is based on the expected element and not on wrappers element.
       * It will determine if one of the wrappers element "looks like" the expected
       * element by checking if all props of the expected element are present
       * on the wrappers element and equals to each other.
       *
       * Example:
       * ```
       * const wrapper = shallow(<MyComponent />);
       * expect(wrapper.containsAllMatchingElements([
       *   <div>Hello</div>,
       *   <div>Goodbye</div>,
       * ])).to.equal(true);
       * ```
       *
       * @param {Array<ReactElement>} nodes
       * @returns {Boolean}
       */
    }, {
      key: "containsAllMatchingElements",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          if (!Array.isArray(ce))
            throw new TypeError("nodes should be an Array");
          return ce.every(function(ee) {
            return _e.containsMatchingElement(ee);
          });
        }
        return ne;
      }()
      /**
       * Whether or not one of the given react elements exists in the shallow render tree.
       * Match is based on the expected element and not on wrappers element.
       * It will determine if one of the wrappers element "looks like" the expected
       * element by checking if all props of the expected element are present
       * on the wrappers element and equals to each other.
       *
       * Example:
       * ```
       * const wrapper = shallow(<MyComponent />);
       * expect(wrapper.containsAnyMatchingElements([
       *   <div>Hello</div>,
       *   <div>Goodbye</div>,
       * ])).to.equal(true);
       * ```
       *
       * @param {Array<ReactElement>} nodes
       * @returns {Boolean}
       */
    }, {
      key: "containsAnyMatchingElements",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return Array.isArray(ce) && ce.some(function(ee) {
            return _e.containsMatchingElement(ee);
          });
        }
        return ne;
      }()
      /**
       * Whether or not a given react element exists in the render tree.
       *
       * Example:
       * ```
       * const wrapper = shallow(<MyComponent />);
       * expect(wrapper.contains(<div className="foo bar" />)).to.equal(true);
       * ```
       *
       * @param {ReactElement} node
       * @returns {Boolean}
       */
    }, {
      key: "equals",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return this.single("equals", function() {
            return (0, h.nodeEqual)(_e.getNodeInternal(), ce);
          });
        }
        return ne;
      }()
      /**
       * Whether or not a given react element matches the render tree.
       * Match is based on the expected element and not on wrapper root node.
       * It will determine if the wrapper root node "looks like" the expected
       * element by checking if all props of the expected element are present
       * on the wrapper root node and equals to each other.
       *
       * Example:
       * ```
       * // MyComponent outputs <div class="foo">Hello</div>
       * const wrapper = shallow(<MyComponent />);
       * expect(wrapper.matchesElement(<div>Hello</div>)).to.equal(true);
       * ```
       *
       * @param {ReactElement} node
       * @returns {Boolean}
       */
    }, {
      key: "matchesElement",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return this.single("matchesElement", function() {
            var ee = (0, p.default)(_e[B]), de = ee.elementToNode(ce);
            return (0, h.nodeMatches)(de, _e.getNodeInternal(), function(Ce, ke) {
              return Ce <= ke;
            });
          });
        }
        return ne;
      }()
      /**
       * Finds every node in the render tree of the current wrapper that matches the provided selector.
       *
       * @param {EnzymeSelector} selector
       * @returns {ShallowWrapper}
       */
    }, {
      key: "find",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          return this.wrap((0, v.reduceTreesBySelector)(ce, this.getNodesInternal()));
        }
        return ne;
      }()
      /**
       * Returns whether or not current node matches a provided selector.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @param {EnzymeSelector} selector
       * @returns {boolean}
       */
    }, {
      key: "is",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = (0, v.buildPredicate)(ce);
          return this.single("is", function(ee) {
            return _e(ee);
          });
        }
        return ne;
      }()
      /**
       * Returns true if the component rendered nothing, i.e., null or false.
       *
       * @returns {boolean}
       */
    }, {
      key: "isEmptyRender",
      value: /* @__PURE__ */ function() {
        function ne() {
          var ce = this.getNodesInternal();
          return ce.every(function(_e) {
            return (0, h.isEmptyValue)(_e);
          });
        }
        return ne;
      }()
      /**
       * Returns a new wrapper instance with only the nodes of the current wrapper instance that match
       * the provided predicate function. The predicate should receive a wrapped node as its first
       * argument.
       *
       * @param {Function} predicate
       * @returns {ShallowWrapper}
       */
    }, {
      key: "filterWhere",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return ae(this, function(ee) {
            return ce(_e.wrap(ee));
          });
        }
        return ne;
      }()
      /**
       * Returns a new wrapper instance with only the nodes of the current wrapper instance that match
       * the provided selector.
       *
       * @param {EnzymeSelector} selector
       * @returns {ShallowWrapper}
       */
    }, {
      key: "filter",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = (0, v.buildPredicate)(ce);
          return ae(this, _e);
        }
        return ne;
      }()
      /**
       * Returns a new wrapper instance with only the nodes of the current wrapper that did not match
       * the provided selector. Essentially the inverse of `filter`.
       *
       * @param {EnzymeSelector} selector
       * @returns {ShallowWrapper}
       */
    }, {
      key: "not",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = (0, v.buildPredicate)(ce);
          return ae(this, function(ee) {
            return !_e(ee);
          });
        }
        return ne;
      }()
      /**
       * Returns a string of the rendered text of the current render tree.  This function should be
       * looked at with skepticism if being used to test what the actual HTML output of the component
       * will be. If that is what you would like to test, use enzyme's `render` function instead.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @returns {String}
       */
    }, {
      key: "text",
      value: /* @__PURE__ */ function() {
        function ne() {
          return this.single("text", g.getTextFromNode);
        }
        return ne;
      }()
      /**
       * Returns the HTML of the node.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @returns {String}
       */
    }, {
      key: "html",
      value: /* @__PURE__ */ function() {
        function ne() {
          var ce = this;
          return this.single("html", function(_e) {
            if (ce.type() === null)
              return null;
            var ee = (0, p.default)(ce[B]), de = ee.createRenderer((0, o.default)({}, ce[B], {
              mode: "string"
            }));
            return de.render(ee.nodeToElement(_e));
          });
        }
        return ne;
      }()
      /**
       * Returns the current node rendered to HTML and wrapped in a CheerioWrapper.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @returns {CheerioWrapper}
       */
    }, {
      key: "render",
      value: /* @__PURE__ */ function() {
        function ne() {
          var ce = this.html();
          return (0, h.loadCheerioRoot)(ce);
        }
        return ne;
      }()
      /**
       * Used to simulate events. Pass an eventname and (optionally) event arguments. This method of
       * testing events should be met with some skepticism.
       *
       * @param {String} event
       * @param {Array} args
       * @returns {ShallowWrapper}
       */
    }, {
      key: "simulate",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          for (var _e = this, ee = arguments.length, de = Array(ee > 1 ? ee - 1 : 0), Ce = 1; Ce < ee; Ce++)
            de[Ce - 1] = arguments[Ce];
          return this.single("simulate", function(ke) {
            var Ve;
            return (Ve = _e[x]).simulateEvent.apply(Ve, [ke, ce].concat(de)), _e[N].update(), _e;
          });
        }
        return ne;
      }()
      /**
       * Used to simulate throwing a rendering error. Pass an error to throw.
       *
       * @param {String} error
       * @returns {ShallowWrapper}
       */
    }, {
      key: "simulateError",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return this.single("simulateError", function(ee) {
            if (ee.nodeType === "host")
              throw new TypeError("ShallowWrapper::simulateError() can only be called on custom components");
            var de = _e[x];
            if (typeof de.simulateError != "function")
              throw new TypeError("your adapter does not support `simulateError`. Try upgrading it!");
            var Ce = Se(_e), ke = [ee].concat(Pe(_e, ee));
            return de.simulateError(ke, Ce, ce), _e;
          });
        }
        return ne;
      }()
      /**
       * Returns the props hash for the current node of the wrapper.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @returns {Object}
       */
    }, {
      key: "props",
      value: /* @__PURE__ */ function() {
        function ne() {
          return this.single("props", g.propsOfNode);
        }
        return ne;
      }()
      /**
       * Returns the state hash for the root node of the wrapper. Optionally pass in a prop name and it
       * will return just that value.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @param {String} name (optional)
       * @returns {*}
       */
    }, {
      key: "state",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          if (this[N] !== this)
            throw new Error("ShallowWrapper::state() can only be called on the root");
          if (this.instance() === null || this[x].getNode().nodeType !== "class")
            throw new Error("ShallowWrapper::state() can only be called on class components");
          var ee = this.single("state", function() {
            return _e.instance().state;
          });
          if (typeof ce < "u") {
            if (ee == null)
              throw new TypeError('ShallowWrapper::state("' + String(ce) + '") requires that `state` not be `null` or `undefined`');
            return ee[ce];
          }
          return ee;
        }
        return ne;
      }()
      /**
       * Returns the context hash for the root node of the wrapper.
       * Optionally pass in a prop name and it will return just that value.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @param {String} name (optional)
       * @returns {*}
       */
    }, {
      key: "context",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          if (this[N] !== this)
            throw new Error("ShallowWrapper::context() can only be called on the root");
          if (!this[B].context)
            throw new Error("ShallowWrapper::context() can only be called on a wrapper that was originally passed a context option");
          if (this.instance() === null)
            throw new Error("ShallowWrapper::context() can only be called on wrapped nodes that have a non-null instance");
          var ee = this.single("context", function() {
            return _e.instance().context;
          });
          return ce ? ee[ce] : ee;
        }
        return ne;
      }()
      /**
       * Returns a new wrapper with all of the children of the current wrapper.
       *
       * @param {EnzymeSelector} [selector]
       * @returns {ShallowWrapper}
       */
    }, {
      key: "children",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this.flatMap(function(ee) {
            return (0, g.childrenOfNode)(ee.getNodeInternal());
          });
          return ce ? _e.filter(ce) : _e;
        }
        return ne;
      }()
      /**
       * Returns a new wrapper with a specific child
       *
       * @param {Number} [index]
       * @returns {ShallowWrapper}
       */
    }, {
      key: "childAt",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return this.single("childAt", function() {
            return _e.children().at(ce);
          });
        }
        return ne;
      }()
      /**
       * Returns a wrapper around all of the parents/ancestors of the wrapper. Does not include the node
       * in the current wrapper.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @param {EnzymeSelector} [selector]
       * @returns {ShallowWrapper}
       */
    }, {
      key: "parents",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return this.single("parents", function(ee) {
            var de = _e.wrap(Pe(_e, ee));
            return ce ? de.filter(ce) : de;
          });
        }
        return ne;
      }()
      /**
       * Returns a wrapper around the immediate parent of the current node.
       *
       * @returns {ShallowWrapper}
       */
    }, {
      key: "parent",
      value: /* @__PURE__ */ function() {
        function ne() {
          return this.flatMap(function(ce) {
            return [ce.parents().get(0)];
          });
        }
        return ne;
      }()
      /**
       *
       * @param {EnzymeSelector} selector
       * @returns {ShallowWrapper}
       */
    }, {
      key: "closest",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          if (this.is(ce))
            return this;
          var _e = this.parents().filter(ce);
          return _e.length > 0 ? _e.first() : this.findWhere(function() {
            return false;
          });
        }
        return ne;
      }()
      /**
       * Shallow renders the current node and returns a shallow wrapper around it.
       *
       * NOTE: can only be called on wrapper of a single node.
       *
       * @param {Object} options
       * @returns {ShallowWrapper}
       */
    }, {
      key: "shallow",
      value: /* @__PURE__ */ function() {
        function ne() {
          var ce = this, _e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          return this.single("shallow", function(ee) {
            var de = bt(ce, _e);
            return ce.wrap((0, p.default)(ce[B]).nodeToElement(ee), null, de);
          });
        }
        return ne;
      }()
      /**
       * Returns the value of prop with the given name of the current node.
       *
       * @param propName
       * @returns {*}
       */
    }, {
      key: "prop",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          return this.props()[ce];
        }
        return ne;
      }()
      /**
       * Used to invoke a function prop.
       * Will invoke an function prop and return its value.
       *
       * @param {String} propName
       * @returns {Any}
       */
    }, {
      key: "invoke",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return this.single("invoke", function() {
            var ee = _e.prop(ce);
            if (typeof ee != "function")
              throw new TypeError("ShallowWrapper::invoke() requires the name of a prop whose value is a function");
            return function() {
              var de = ee.apply(void 0, arguments);
              return _e[N].update(), de;
            };
          });
        }
        return ne;
      }()
      /**
       * Returns a wrapper of the node rendered by the provided render prop.
       *
       * @param {String} propName
       * @returns {Function}
       */
    }, {
      key: "renderProp",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this, ee = (0, p.default)(this[B]);
          if (typeof ee.wrap != "function")
            throw new RangeError("your adapter does not support `wrap`. Try upgrading it!");
          return this.single("renderProp", function(de) {
            if (de.nodeType === "host")
              throw new TypeError("ShallowWrapper::renderProp() can only be called on custom components");
            if (typeof ce != "string")
              throw new TypeError("ShallowWrapper::renderProp(): `propName` must be a string");
            var Ce = _e.props();
            if (!(0, u.default)(Ce, ce))
              throw new Error("ShallowWrapper::renderProp(): no prop called “" + String(ce) + "“ found");
            var ke = Ce[ce];
            if (typeof ke != "function")
              throw new TypeError("ShallowWrapper::renderProp(): expected prop “" + String(ce) + "“ to contain a function, but it holds “" + (typeof ke > "u" ? "undefined" : n(ke)) + "“");
            return function() {
              var Ve = ke.apply(void 0, arguments), We = ee.wrap(Ve);
              return _e.wrap(We, null, _e[B]);
            };
          });
        }
        return ne;
      }()
      /**
       * Returns the key assigned to the current node.
       *
       * @returns {String}
       */
    }, {
      key: "key",
      value: /* @__PURE__ */ function() {
        function ne() {
          return this.single("key", function(ce) {
            return ce.key === void 0 ? null : ce.key;
          });
        }
        return ne;
      }()
      /**
       * Returns the type of the current node of this wrapper. If it's a composite component, this will
       * be the component constructor. If it's a native DOM node, it will be a string of the tag name.
       * If it's null, it will be null.
       *
       * @returns {String|Function|null}
       */
    }, {
      key: "type",
      value: /* @__PURE__ */ function() {
        function ne() {
          return this.single("type", function(ce) {
            return (0, h.typeOfNode)(ce);
          });
        }
        return ne;
      }()
      /**
       * Returns the name of the current node of this wrapper.
       *
       * In order of precedence => type.displayName -> type.name -> type.
       *
       * @returns {String}
       */
    }, {
      key: "name",
      value: /* @__PURE__ */ function() {
        function ne() {
          var ce = (0, p.default)(this[B]);
          return this.single("name", function(_e) {
            return ce.displayNameOfNode ? ce.displayNameOfNode(_e) : (0, h.displayNameOfNode)(_e);
          });
        }
        return ne;
      }()
      /**
       * Returns whether or not the current node has the given class name or not.
       *
       * NOTE: can only be called on a wrapper of a single node.
       *
       * @param className
       * @returns {Boolean}
       */
    }, {
      key: "hasClass",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          return typeof ce == "string" && ce.indexOf(".") !== -1 && console.warn("It looks like you're calling `ShallowWrapper::hasClass()` with a CSS selector. hasClass() expects a class name, not a CSS selector."), this.single("hasClass", function(_e) {
            return (0, g.hasClassName)(_e, ce);
          });
        }
        return ne;
      }()
      /**
       * Iterates through each node of the current wrapper and executes the provided function with a
       * wrapper around the corresponding node passed in as the first argument.
       *
       * @param {Function} fn
       * @returns {ShallowWrapper}
       */
    }, {
      key: "forEach",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return this.getNodesInternal().forEach(function(ee, de) {
            return ce.call(_e, _e.wrap(ee), de);
          }), this;
        }
        return ne;
      }()
      /**
       * Maps the current array of nodes to another array. Each node is passed in as a `ShallowWrapper`
       * to the map function.
       *
       * @param {Function} fn
       * @returns {Array}
       */
    }, {
      key: "map",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return this.getNodesInternal().map(function(ee, de) {
            return ce.call(_e, _e.wrap(ee), de);
          });
        }
        return ne;
      }()
      /**
       * Reduces the current array of nodes to a value. Each node is passed in as a `ShallowWrapper`
       * to the reducer function.
       *
       * @param {Function} fn - the reducer function
       * @param {*} initialValue - the initial value
       * @returns {*}
       */
    }, {
      key: "reduce",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this, ee = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0;
          return arguments.length > 1 ? this.getNodesInternal().reduce(function(de, Ce, ke) {
            return ce.call(_e, de, _e.wrap(Ce), ke);
          }, ee) : this.getNodesInternal().reduce(function(de, Ce, ke) {
            return ce.call(_e, ke === 1 ? _e.wrap(de) : de, _e.wrap(Ce), ke);
          });
        }
        return ne;
      }()
      /**
       * Reduces the current array of nodes to another array, from right to left. Each node is passed
       * in as a `ShallowWrapper` to the reducer function.
       *
       * @param {Function} fn - the reducer function
       * @param {*} initialValue - the initial value
       * @returns {*}
       */
    }, {
      key: "reduceRight",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this, ee = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : void 0;
          return arguments.length > 1 ? this.getNodesInternal().reduceRight(function(de, Ce, ke) {
            return ce.call(_e, de, _e.wrap(Ce), ke);
          }, ee) : this.getNodesInternal().reduceRight(function(de, Ce, ke) {
            return ce.call(_e, ke === 1 ? _e.wrap(de) : de, _e.wrap(Ce), ke);
          });
        }
        return ne;
      }()
      /**
       * Returns a new wrapper with a subset of the nodes of the original wrapper, according to the
       * rules of `Array#slice`.
       *
       * @param {Number} begin
       * @param {Number} end
       * @returns {ShallowWrapper}
       */
    }, {
      key: "slice",
      value: /* @__PURE__ */ function() {
        function ne(ce, _e) {
          return this.wrap(this.getNodesInternal().slice(ce, _e));
        }
        return ne;
      }()
      /**
       * Returns whether or not any of the nodes in the wrapper match the provided selector.
       *
       * @param {EnzymeSelector} selector
       * @returns {Boolean}
       */
    }, {
      key: "some",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          if (this[N] === this)
            throw new Error("ShallowWrapper::some() can not be called on the root");
          var _e = (0, v.buildPredicate)(ce);
          return this.getNodesInternal().some(_e);
        }
        return ne;
      }()
      /**
       * Returns whether or not any of the nodes in the wrapper pass the provided predicate function.
       *
       * @param {Function} predicate
       * @returns {Boolean}
       */
    }, {
      key: "someWhere",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return this.getNodesInternal().some(function(ee, de) {
            return ce.call(_e, _e.wrap(ee), de);
          });
        }
        return ne;
      }()
      /**
       * Returns whether or not all of the nodes in the wrapper match the provided selector.
       *
       * @param {EnzymeSelector} selector
       * @returns {Boolean}
       */
    }, {
      key: "every",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = (0, v.buildPredicate)(ce);
          return this.getNodesInternal().every(_e);
        }
        return ne;
      }()
      /**
       * Returns whether or not any of the nodes in the wrapper pass the provided predicate function.
       *
       * @param {Function} predicate
       * @returns {Boolean}
       */
    }, {
      key: "everyWhere",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return this.getNodesInternal().every(function(ee, de) {
            return ce.call(_e, _e.wrap(ee), de);
          });
        }
        return ne;
      }()
      /**
       * Utility method used to create new wrappers with a mapping function that returns an array of
       * nodes in response to a single node wrapper. The returned wrapper is a single wrapper around
       * all of the mapped nodes flattened (and de-duplicated).
       *
       * @param {Function} fn
       * @returns {ShallowWrapper}
       */
    }, {
      key: "flatMap",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this, ee = this.getNodesInternal().map(function(Ce, ke) {
            return ce.call(_e, _e.wrap(Ce), ke);
          }), de = (0, s.default)(ee, 1);
          return this.wrap(de.filter(Boolean));
        }
        return ne;
      }()
      /**
       * Finds all nodes in the current wrapper nodes' render trees that match the provided predicate
       * function. The predicate function will receive the nodes inside a ShallowWrapper as its
       * first argument.
       *
       * @param {Function} predicate
       * @returns {ShallowWrapper}
       */
    }, {
      key: "findWhere",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this;
          return me(this, function(ee) {
            var de = _e.wrap(ee);
            return de.length > 0 && ce(de);
          });
        }
        return ne;
      }()
      /**
       * Returns the node at a given index of the current wrapper.
       *
       * @param index
       * @returns {ReactElement}
       */
    }, {
      key: "get",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          return this.getElements()[ce];
        }
        return ne;
      }()
      /**
       * Returns a wrapper around the node at a given index of the current wrapper.
       *
       * @param index
       * @returns {ShallowWrapper}
       */
    }, {
      key: "at",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = this.getNodesInternal();
          return ce < _e.length ? this.wrap(_e[ce]) : this.wrap([]);
        }
        return ne;
      }()
      /**
       * Returns a wrapper around the first node of the current wrapper.
       *
       * @returns {ShallowWrapper}
       */
    }, {
      key: "first",
      value: /* @__PURE__ */ function() {
        function ne() {
          return this.at(0);
        }
        return ne;
      }()
      /**
       * Returns a wrapper around the last node of the current wrapper.
       *
       * @returns {ShallowWrapper}
       */
    }, {
      key: "last",
      value: /* @__PURE__ */ function() {
        function ne() {
          return this.at(this.length - 1);
        }
        return ne;
      }()
      /**
       * Delegates to exists()
       *
       * @returns {boolean}
       */
    }, {
      key: "isEmpty",
      value: /* @__PURE__ */ function() {
        function ne() {
          return console.warn("Enzyme::Deprecated method isEmpty() called, use exists() instead."), !this.exists();
        }
        return ne;
      }()
      /**
       * Returns true if the current wrapper has nodes. False otherwise.
       * If called with a selector it returns `.find(selector).exists()` instead.
       *
       * @param {EnzymeSelector} selector (optional)
       * @returns {boolean}
       */
    }, {
      key: "exists",
      value: /* @__PURE__ */ function() {
        function ne() {
          var ce = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null;
          return arguments.length > 0 ? this.find(ce).exists() : this.length > 0;
        }
        return ne;
      }()
      /**
       * Utility method that throws an error if the current instance has a length other than one.
       * This is primarily used to enforce that certain methods are only run on a wrapper when it is
       * wrapping a single node.
       *
       * @param fn
       * @returns {*}
       */
    }, {
      key: "single",
      value: /* @__PURE__ */ function() {
        function ne(ce, _e) {
          var ee = typeof ce == "string" ? ce : "unknown", de = typeof _e == "function" ? _e : ce;
          if (this.length !== 1)
            throw new Error("Method “" + ee + "” is meant to be run on 1 node. " + String(this.length) + " found instead.");
          return de.call(this, this.getNodeInternal());
        }
        return ne;
      }()
      /**
       * Helpful utility method to create a new wrapper with the same root as the current wrapper, with
       * any nodes passed in as the first parameter automatically wrapped.
       *
       * @param node
       * @returns {ShallowWrapper}
       */
    }, {
      key: "wrap",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          var _e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this[N];
          if (ce instanceof xe)
            return ce;
          for (var ee = arguments.length, de = Array(ee > 2 ? ee - 2 : 0), Ce = 2; Ce < ee; Ce++)
            de[Ce - 2] = arguments[Ce];
          return new (Function.prototype.bind.apply(xe, [null].concat([ce, _e], de)))();
        }
        return ne;
      }()
      /**
       * Returns an HTML-like string of the shallow render for debugging purposes.
       *
       * @param {Object} [options] - Property bag of additional options.
       * @param {boolean} [options.ignoreProps] - if true, props are omitted from the string.
       * @param {boolean} [options.verbose] - if true, arrays and objects to be verbosely printed.
       * @returns {String}
       */
    }, {
      key: "debug",
      value: /* @__PURE__ */ function() {
        function ne() {
          var ce = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          return (0, m.debugNodes)(this.getNodesInternal(), ce);
        }
        return ne;
      }()
      /**
       * Invokes intercepter and returns itself. intercepter is called with itself.
       * This is helpful when debugging nodes in method chains.
       * @param fn
       * @returns {ShallowWrapper}
       */
    }, {
      key: "tap",
      value: /* @__PURE__ */ function() {
        function ne(ce) {
          return ce(this), this;
        }
        return ne;
      }()
      /**
       * Primarily useful for HOCs (higher-order components), this method may only be
       * run on a single, non-DOM node, and will return the node, shallow-rendered.
       *
       * @param {Object} options
       * @returns {ShallowWrapper}
       */
    }, {
      key: "dive",
      value: /* @__PURE__ */ function() {
        function ne() {
          var ce = this, _e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, ee = (0, p.default)(this[B]), de = "dive";
          return this.single(de, function(Ce) {
            if (Ce && Ce.nodeType === "host")
              throw new TypeError("ShallowWrapper::" + de + "() can not be called on Host Components");
            var ke = (0, p.default)(ce[B]).nodeToElement(Ce);
            if (!(0, h.isCustomComponentElement)(ke, ee))
              throw new TypeError("ShallowWrapper::" + de + "() can only be called on components");
            var Ve = bt(ce, _e);
            return ce.wrap(ke, null, Ve);
          });
        }
        return ne;
      }()
      /**
       * Strips out all the not host-nodes from the list of nodes
       *
       * This method is useful if you want to check for the presence of host nodes
       * (actually rendered HTML elements) ignoring the React nodes.
       */
    }, {
      key: "hostNodes",
      value: /* @__PURE__ */ function() {
        function ne() {
          return this.filterWhere(function(ce) {
            return typeof ce.type() == "string";
          });
        }
        return ne;
      }()
    }]), xe;
  }();
  function $t(xe) {
    var ne = (0, p.default)(xe[B]), ce = xe[K], _e = ce[x], ee = _e.getNode(), de = at(xe, ne), Ce = de.legacyContext, ke = de.providerValues, Ve = ce[J];
    if (ce.setContext((0, o.default)({}, xe[K][B].context, Ce)), ce[J] = new Map([].concat(T(Ve), T(ke))), typeof ne.isContextConsumer == "function" && ne.isContextConsumer(ee.type)) {
      var We = ee.type, Ke = ne.getProviderFromConsumer(We), tt = ke.get(Ke), ut = Ve.get(Ke);
      tt !== ut && ce.rerender();
    }
  }
  var rn = function(xe) {
    b(ne, xe);
    function ne(ce, _e, ee) {
      E(this, ne);
      var de = y(this, (ne.__proto__ || Object.getPrototypeOf(ne)).call(this, ce));
      return (0, h.privateSet)(de, K, _e), (0, h.privateSet)(de, se, ee), de;
    }
    return r(ne, [{
      key: "rerender",
      value: /* @__PURE__ */ function() {
        function ce() {
          for (var _e, ee = arguments.length, de = Array(ee), Ce = 0; Ce < ee; Ce++)
            de[Ce] = arguments[Ce];
          var ke = (_e = t(ne.prototype.__proto__ || Object.getPrototypeOf(ne.prototype), "rerender", this)).call.apply(_e, [this].concat(de));
          return $t(this), ke;
        }
        return ce;
      }()
      /**
       * Like setState() on ShallowWrapper, except it also does a "full render" of
       * itself and updates the primary ShallowWrapper's context.
       */
    }, {
      key: "setState",
      value: /* @__PURE__ */ function() {
        function ce() {
          for (var _e, ee = arguments.length, de = Array(ee), Ce = 0; Ce < ee; Ce++)
            de[Ce] = arguments[Ce];
          var ke = (_e = t(ne.prototype.__proto__ || Object.getPrototypeOf(ne.prototype), "setState", this)).call.apply(_e, [this].concat(de));
          return $t(this), ke;
        }
        return ce;
      }()
      // eslint-disable-next-line class-methods-use-this
    }, {
      key: "getWrappingComponent",
      value: /* @__PURE__ */ function() {
        function ce() {
          throw new Error("ShallowWrapper::getWrappingComponent() can only be called on the root");
        }
        return ce;
      }()
    }]), ne;
  }(Et);
  h.ITERATOR_SYMBOL && Object.defineProperty(Et.prototype, h.ITERATOR_SYMBOL, {
    configurable: true,
    value: /* @__PURE__ */ function() {
      function xe() {
        var ne, ce = this.getNodesInternal()[h.ITERATOR_SYMBOL](), _e = (0, p.default)(this[B]);
        return ne = {}, P(ne, h.ITERATOR_SYMBOL, function() {
          return this;
        }), P(ne, "next", /* @__PURE__ */ function() {
          function ee() {
            var de = ce.next();
            return de.done ? {
              done: true
            } : {
              done: false,
              value: _e.nodeToElement(de.value)
            };
          }
          return ee;
        }()), ne;
      }
      return xe;
    }()
  });
  function Ht(xe, ne) {
    Object.defineProperty(Et.prototype, xe, {
      get: /* @__PURE__ */ function() {
        function ce() {
          throw new Error(`
        Attempted to access ShallowWrapper::` + String(xe) + `, which was previously a private property on
        Enzyme ShallowWrapper instances, but is no longer and should not be relied upon.
        ` + String(ne) + `
      `);
        }
        return ce;
      }(),
      enumerable: false,
      configurable: false
    });
  }
  Ht("node", "Consider using the getElement() method instead."), Ht("nodes", "Consider using the getElements() method instead."), Ht("renderer", ""), Ht("options", ""), Ht("complexSelector", ""), e12.default = Et;
})(eM);
var Oq = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.default = i;
  var t = nN, r = n(t);
  function n(o) {
    return o && o.__esModule ? o : {
      default: o
    };
  }
  function i(o, a) {
    return new r.default(o, null, a);
  }
})(Oq);
var Iq = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.default = i;
  var t = eM, r = n(t);
  function n(o) {
    return o && o.__esModule ? o : {
      default: o
    };
  }
  function i(o, a) {
    return new r.default(o, null, a);
  }
})(Iq);
var Pq = {};
(function(e12) {
  Object.defineProperty(e12, "__esModule", {
    value: true
  }), e12.default = s;
  var t = op, r = a(t), n = uc, i = a(n), o = ey;
  function a(l) {
    return l && l.__esModule ? l : {
      default: l
    };
  }
  function s(l) {
    var u = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, c = (0, i.default)(u), f = c.createRenderer((0, r.default)({
      mode: "string"
    }, u)), h = f.render(l, u.context);
    return (0, o.loadCheerioRoot)(h);
  }
})(Pq);
var hDe = nN;
var fDe = vp(hDe);
var dDe = eM;
var pDe = vp(dDe);
var mDe = jY;
var gDe = vp(mDe);
var vDe = Oq;
var yDe = vp(vDe);
var _De = Iq;
var bDe = vp(_De);
var TDe = Pq;
var EDe = vp(TDe);
var SDe = ah;
function vp(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
var wDe = {
  render: EDe.default,
  shallow: bDe.default,
  mount: yDe.default,
  ShallowWrapper: pDe.default,
  ReactWrapper: fDe.default,
  configure: SDe.merge,
  EnzymeAdapter: gDe.default
};
var tM = 100;
var ADe = (e12, t, r, n) => {
  for (const {
    viewId: i,
    trackId: o,
    track: a
  } of e12.instance().iterateOverTracks())
    i === t && o === r && (a.options = {
      ...a.options,
      ...n
    });
  e12.setState(e12.instance().state);
};
var ODe = (e12) => {
  for (const t of e12.iterateOverTracks())
    if (i2(e12, t.viewId, t.trackId).activeTransitions > 0)
      return true;
  return false;
};
var Cq = (e12, t) => {
  ODe(e12) ? setTimeout(() => {
    Cq(e12, t);
  }, tM) : t();
};
var rM = (e12) => {
  iv > 0 ? setTimeout(() => rM(e12), tM) : e12();
};
var IDe = (e12) => {
  for (const t of e12.iterateOverTracks()) {
    let r = rN(e12, t.viewId, t.trackId);
    if (!(!t.track.server && !t.track.tilesetUid && !(t.track.data && t.track.data.type === "divided")))
      if (t.track.data && t.track.data.type === "divided" || t.track.server && t.track.tilesetUid) {
        if (r.originalTrack && (r = r.originalTrack), !(r.tilesetInfo || r.chromInfo) || r.fetching && r.fetching.size)
          return true;
      } else
        throw Error('"server" and "tilesetUid" belong together');
  }
  return false;
};
var tT = (e12, t) => {
  IDe(e12) ? setTimeout(() => {
    tT(e12, t);
  }, tM) : t();
};
var xq = (e12, t, r, n, i = {}) => {
  const {
    style: o = "width:800px; background-color: lightgreen;",
    bounded: a = false,
    extendedDelay: s = false
  } = i;
  t && (t.unmount(), t.detach()), e12 && globalThis.document.body.removeChild(e12);
  const l = globalThis.document.createElement("div");
  globalThis.document.body.appendChild(l), l.setAttribute("style", o), l.setAttribute("id", "simple-hg-component");
  const u = wDe.mount(import_react.default.createElement(My, {
    options: {
      bounded: a
    },
    viewConfig: r
  }), {
    attachTo: l
  });
  return u.update(), rM(() => {
    if (s) {
      const c = () => setTimeout(() => {
        n();
      }, 1e3);
      tT(u.instance(), c);
    } else
      tT(u.instance(), n);
  }), /** @type {const} */
  [l, u];
};
var PDe = (e12) => {
  e12 && (import_react_dom.default.unmountComponentAtNode(e12), document.body.removeChild(e12));
};
async function CDe(e12, t, r, n) {
  let i;
  return await new Promise((o) => {
    i = xq(e12, t, r, o, n);
  }), i;
}
var Dd = 0;
var Cm = 0;
var om = 0;
var kq = 1e3;
var rT;
var xm;
var nT = 0;
var Au = 0;
var fS = 0;
var pv = typeof performance == "object" && performance.now ? performance : Date;
var Dq = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(e12) {
  setTimeout(e12, 17);
};
function nM() {
  return Au || (Dq(xDe), Au = pv.now() + fS);
}
function xDe() {
  Au = 0;
}
function iT() {
  this._call = this._time = this._next = null;
}
iT.prototype = Rq.prototype = {
  constructor: iT,
  restart: function(e12, t, r) {
    if (typeof e12 != "function")
      throw new TypeError("callback is not a function");
    r = (r == null ? nM() : +r) + (t == null ? 0 : +t), !this._next && xm !== this && (xm ? xm._next = this : rT = this, xm = this), this._call = e12, this._time = r, uC();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, uC());
  }
};
function Rq(e12, t, r) {
  var n = new iT();
  return n.restart(e12, t, r), n;
}
function kDe() {
  nM(), ++Dd;
  for (var e12 = rT, t; e12; )
    (t = Au - e12._time) >= 0 && e12._call.call(void 0, t), e12 = e12._next;
  --Dd;
}
function D3() {
  Au = (nT = pv.now()) + fS, Dd = Cm = 0;
  try {
    kDe();
  } finally {
    Dd = 0, RDe(), Au = 0;
  }
}
function DDe() {
  var e12 = pv.now(), t = e12 - nT;
  t > kq && (fS -= t, nT = e12);
}
function RDe() {
  for (var e12, t = rT, r, n = 1 / 0; t; )
    t._call ? (n > t._time && (n = t._time), e12 = t, t = t._next) : (r = t._next, t._next = null, t = e12 ? e12._next = r : rT = r);
  xm = e12, uC(n);
}
function uC(e12) {
  if (!Dd) {
    Cm && (Cm = clearTimeout(Cm));
    var t = e12 - Au;
    t > 24 ? (e12 < 1 / 0 && (Cm = setTimeout(D3, e12 - pv.now() - fS)), om && (om = clearInterval(om))) : (om || (nT = pv.now(), om = setInterval(DDe, kq)), Dd = 1, Dq(D3));
  }
}
function R3(e12, t, r) {
  var n = new iT();
  return t = t == null ? 0 : +t, n.restart((i) => {
    n.stop(), e12(i + t);
  }, t, r), n;
}
var NDe = np("start", "end", "cancel", "interrupt");
var MDe = [];
var Nq = 0;
var hC = 1;
var fC = 2;
var _b = 3;
var N3 = 4;
var dC = 5;
var bb = 6;
function dS(e12, t, r, n, i, o) {
  var a = e12.__transition;
  if (!a)
    e12.__transition = {};
  else if (r in a)
    return;
  LDe(e12, r, {
    name: t,
    index: n,
    // For context during callback.
    group: i,
    // For context during callback.
    on: NDe,
    tween: MDe,
    time: o.time,
    delay: o.delay,
    duration: o.duration,
    ease: o.ease,
    timer: null,
    state: Nq
  });
}
function iM(e12, t) {
  var r = ua(e12, t);
  if (r.state > Nq)
    throw new Error("too late; already scheduled");
  return r;
}
function Qa(e12, t) {
  var r = ua(e12, t);
  if (r.state > _b)
    throw new Error("too late; already running");
  return r;
}
function ua(e12, t) {
  var r = e12.__transition;
  if (!r || !(r = r[t]))
    throw new Error("transition not found");
  return r;
}
function LDe(e12, t, r) {
  var n = e12.__transition, i;
  n[t] = r, r.timer = Rq(o, 0, r.time);
  function o(u) {
    r.state = hC, r.timer.restart(a, r.delay, r.time), r.delay <= u && a(u - r.delay);
  }
  function a(u) {
    var c, f, h, d;
    if (r.state !== hC)
      return l();
    for (c in n)
      if (d = n[c], d.name === r.name) {
        if (d.state === _b)
          return R3(a);
        d.state === N3 ? (d.state = bb, d.timer.stop(), d.on.call("interrupt", e12, e12.__data__, d.index, d.group), delete n[c]) : +c < t && (d.state = bb, d.timer.stop(), d.on.call("cancel", e12, e12.__data__, d.index, d.group), delete n[c]);
      }
    if (R3(function() {
      r.state === _b && (r.state = N3, r.timer.restart(s, r.delay, r.time), s(u));
    }), r.state = fC, r.on.call("start", e12, e12.__data__, r.index, r.group), r.state === fC) {
      for (r.state = _b, i = new Array(h = r.tween.length), c = 0, f = -1; c < h; ++c)
        (d = r.tween[c].value.call(e12, e12.__data__, r.index, r.group)) && (i[++f] = d);
      i.length = f + 1;
    }
  }
  function s(u) {
    for (var c = u < r.duration ? r.ease.call(null, u / r.duration) : (r.timer.restart(l), r.state = dC, 1), f = -1, h = i.length; ++f < h; )
      i[f].call(e12, c);
    r.state === dC && (r.on.call("end", e12, e12.__data__, r.index, r.group), l());
  }
  function l() {
    r.state = bb, r.timer.stop(), delete n[t];
    for (var u in n)
      return;
    delete e12.__transition;
  }
}
function vg(e12, t) {
  var r = e12.__transition, n, i, o = true, a;
  if (r) {
    t = t == null ? null : t + "";
    for (a in r) {
      if ((n = r[a]).name !== t) {
        o = false;
        continue;
      }
      i = n.state > fC && n.state < dC, n.state = bb, n.timer.stop(), n.on.call(i ? "interrupt" : "cancel", e12, e12.__data__, n.index, n.group), delete r[a];
    }
    o && delete e12.__transition;
  }
}
function BDe(e12) {
  return this.each(function() {
    vg(this, e12);
  });
}
function FDe(e12, t) {
  var r, n;
  return function() {
    var i = Qa(this, e12), o = i.tween;
    if (o !== r) {
      n = r = o;
      for (var a = 0, s = n.length; a < s; ++a)
        if (n[a].name === t) {
          n = n.slice(), n.splice(a, 1);
          break;
        }
    }
    i.tween = n;
  };
}
function $De(e12, t, r) {
  var n, i;
  if (typeof r != "function")
    throw new Error();
  return function() {
    var o = Qa(this, e12), a = o.tween;
    if (a !== n) {
      i = (n = a).slice();
      for (var s = {
        name: t,
        value: r
      }, l = 0, u = i.length; l < u; ++l)
        if (i[l].name === t) {
          i[l] = s;
          break;
        }
      l === u && i.push(s);
    }
    o.tween = i;
  };
}
function HDe(e12, t) {
  var r = this._id;
  if (e12 += "", arguments.length < 2) {
    for (var n = ua(this.node(), r).tween, i = 0, o = n.length, a; i < o; ++i)
      if ((a = n[i]).name === e12)
        return a.value;
    return null;
  }
  return this.each((t == null ? FDe : $De)(r, e12, t));
}
function oM(e12, t, r) {
  var n = e12._id;
  return e12.each(function() {
    var i = Qa(this, n);
    (i.value || (i.value = {}))[t] = r.apply(this, arguments);
  }), function(i) {
    return ua(i, n).value[t];
  };
}
function Mq(e12, t) {
  var r;
  return (typeof t == "number" ? bo : t instanceof dn ? ad : (r = dn(t)) ? (t = r, ad) : YD)(e12, t);
}
function UDe(e12) {
  return function() {
    this.removeAttribute(e12);
  };
}
function jDe(e12) {
  return function() {
    this.removeAttributeNS(e12.space, e12.local);
  };
}
function GDe(e12, t, r) {
  var n, i = r + "", o;
  return function() {
    var a = this.getAttribute(e12);
    return a === i ? null : a === n ? o : o = t(n = a, r);
  };
}
function zDe(e12, t, r) {
  var n, i = r + "", o;
  return function() {
    var a = this.getAttributeNS(e12.space, e12.local);
    return a === i ? null : a === n ? o : o = t(n = a, r);
  };
}
function VDe(e12, t, r) {
  var n, i, o;
  return function() {
    var a, s = r(this), l;
    return s == null ? void this.removeAttribute(e12) : (a = this.getAttribute(e12), l = s + "", a === l ? null : a === n && l === i ? o : (i = l, o = t(n = a, s)));
  };
}
function XDe(e12, t, r) {
  var n, i, o;
  return function() {
    var a, s = r(this), l;
    return s == null ? void this.removeAttributeNS(e12.space, e12.local) : (a = this.getAttributeNS(e12.space, e12.local), l = s + "", a === l ? null : a === n && l === i ? o : (i = l, o = t(n = a, s)));
  };
}
function WDe(e12, t) {
  var r = Wu(e12), n = r === "transform" ? R9 : Mq;
  return this.attrTween(e12, typeof t == "function" ? (r.local ? XDe : VDe)(r, n, oM(this, "attr." + e12, t)) : t == null ? (r.local ? jDe : UDe)(r) : (r.local ? zDe : GDe)(r, n, t));
}
function YDe(e12, t) {
  return function(r) {
    this.setAttribute(e12, t.call(this, r));
  };
}
function qDe(e12, t) {
  return function(r) {
    this.setAttributeNS(e12.space, e12.local, t.call(this, r));
  };
}
function KDe(e12, t) {
  var r, n;
  function i() {
    var o = t.apply(this, arguments);
    return o !== n && (r = (n = o) && qDe(e12, o)), r;
  }
  return i._value = t, i;
}
function ZDe(e12, t) {
  var r, n;
  function i() {
    var o = t.apply(this, arguments);
    return o !== n && (r = (n = o) && YDe(e12, o)), r;
  }
  return i._value = t, i;
}
function QDe(e12, t) {
  var r = "attr." + e12;
  if (arguments.length < 2)
    return (r = this.tween(r)) && r._value;
  if (t == null)
    return this.tween(r, null);
  if (typeof t != "function")
    throw new Error();
  var n = Wu(e12);
  return this.tween(r, (n.local ? KDe : ZDe)(n, t));
}
function JDe(e12, t) {
  return function() {
    iM(this, e12).delay = +t.apply(this, arguments);
  };
}
function eRe(e12, t) {
  return t = +t, function() {
    iM(this, e12).delay = t;
  };
}
function tRe(e12) {
  var t = this._id;
  return arguments.length ? this.each((typeof e12 == "function" ? JDe : eRe)(t, e12)) : ua(this.node(), t).delay;
}
function rRe(e12, t) {
  return function() {
    Qa(this, e12).duration = +t.apply(this, arguments);
  };
}
function nRe(e12, t) {
  return t = +t, function() {
    Qa(this, e12).duration = t;
  };
}
function iRe(e12) {
  var t = this._id;
  return arguments.length ? this.each((typeof e12 == "function" ? rRe : nRe)(t, e12)) : ua(this.node(), t).duration;
}
function oRe(e12, t) {
  if (typeof t != "function")
    throw new Error();
  return function() {
    Qa(this, e12).ease = t;
  };
}
function aRe(e12) {
  var t = this._id;
  return arguments.length ? this.each(oRe(t, e12)) : ua(this.node(), t).ease;
}
function sRe(e12, t) {
  return function() {
    var r = t.apply(this, arguments);
    if (typeof r != "function")
      throw new Error();
    Qa(this, e12).ease = r;
  };
}
function lRe(e12) {
  if (typeof e12 != "function")
    throw new Error();
  return this.each(sRe(this._id, e12));
}
function cRe(e12) {
  typeof e12 != "function" && (e12 = GE(e12));
  for (var t = this._groups, r = t.length, n = new Array(r), i = 0; i < r; ++i)
    for (var o = t[i], a = o.length, s = n[i] = [], l, u = 0; u < a; ++u)
      (l = o[u]) && e12.call(l, l.__data__, u, o) && s.push(l);
  return new Xa(n, this._parents, this._name, this._id);
}
function uRe(e12) {
  if (e12._id !== this._id)
    throw new Error();
  for (var t = this._groups, r = e12._groups, n = t.length, i = r.length, o = Math.min(n, i), a = new Array(n), s = 0; s < o; ++s)
    for (var l = t[s], u = r[s], c = l.length, f = a[s] = new Array(c), h, d = 0; d < c; ++d)
      (h = l[d] || u[d]) && (f[d] = h);
  for (; s < n; ++s)
    a[s] = t[s];
  return new Xa(a, this._parents, this._name, this._id);
}
function hRe(e12) {
  return (e12 + "").trim().split(/^|\s+/).every(function(t) {
    var r = t.indexOf(".");
    return r >= 0 && (t = t.slice(0, r)), !t || t === "start";
  });
}
function fRe(e12, t, r) {
  var n, i, o = hRe(t) ? iM : Qa;
  return function() {
    var a = o(this, e12), s = a.on;
    s !== n && (i = (n = s).copy()).on(t, r), a.on = i;
  };
}
function dRe(e12, t) {
  var r = this._id;
  return arguments.length < 2 ? ua(this.node(), r).on.on(e12) : this.each(fRe(r, e12, t));
}
function pRe(e12) {
  return function() {
    var t = this.parentNode;
    for (var r in this.__transition)
      if (+r !== e12)
        return;
    t && t.removeChild(this);
  };
}
function mRe() {
  return this.on("end.remove", pRe(this._id));
}
function gRe(e12) {
  var t = this._name, r = this._id;
  typeof e12 != "function" && (e12 = Lv(e12));
  for (var n = this._groups, i = n.length, o = new Array(i), a = 0; a < i; ++a)
    for (var s = n[a], l = s.length, u = o[a] = new Array(l), c, f, h = 0; h < l; ++h)
      (c = s[h]) && (f = e12.call(c, c.__data__, h, s)) && ("__data__" in c && (f.__data__ = c.__data__), u[h] = f, dS(u[h], t, r, h, u, ua(c, r)));
  return new Xa(o, this._parents, t, r);
}
function vRe(e12) {
  var t = this._name, r = this._id;
  typeof e12 != "function" && (e12 = jE(e12));
  for (var n = this._groups, i = n.length, o = [], a = [], s = 0; s < i; ++s)
    for (var l = n[s], u = l.length, c, f = 0; f < u; ++f)
      if (c = l[f]) {
        for (var h = e12.call(c, c.__data__, f, l), d, p = ua(c, r), m = 0, g = h.length; m < g; ++m)
          (d = h[m]) && dS(d, t, r, m, h, p);
        o.push(h), a.push(c);
      }
  return new Xa(o, a, t, r);
}
var yRe = oa.prototype.constructor;
function _Re() {
  return new yRe(this._groups, this._parents);
}
function bRe(e12, t) {
  var r, n, i;
  return function() {
    var o = xo(this, e12), a = (this.style.removeProperty(e12), xo(this, e12));
    return o === a ? null : o === r && a === n ? i : i = t(r = o, n = a);
  };
}
function Lq(e12) {
  return function() {
    this.style.removeProperty(e12);
  };
}
function TRe(e12, t, r) {
  var n, i = r + "", o;
  return function() {
    var a = xo(this, e12);
    return a === i ? null : a === n ? o : o = t(n = a, r);
  };
}
function ERe(e12, t, r) {
  var n, i, o;
  return function() {
    var a = xo(this, e12), s = r(this), l = s + "";
    return s == null && (l = s = (this.style.removeProperty(e12), xo(this, e12))), a === l ? null : a === n && l === i ? o : (i = l, o = t(n = a, s));
  };
}
function SRe(e12, t) {
  var r, n, i, o = "style." + t, a = "end." + o, s;
  return function() {
    var l = Qa(this, e12), u = l.on, c = l.value[o] == null ? s || (s = Lq(t)) : void 0;
    (u !== r || i !== c) && (n = (r = u).copy()).on(a, i = c), l.on = n;
  };
}
function wRe(e12, t, r) {
  var n = (e12 += "") == "transform" ? D9 : Mq;
  return t == null ? this.styleTween(e12, bRe(e12, n)).on("end.style." + e12, Lq(e12)) : typeof t == "function" ? this.styleTween(e12, ERe(e12, n, oM(this, "style." + e12, t))).each(SRe(this._id, e12)) : this.styleTween(e12, TRe(e12, n, t), r).on("end.style." + e12, null);
}
function ARe(e12, t, r) {
  return function(n) {
    this.style.setProperty(e12, t.call(this, n), r);
  };
}
function ORe(e12, t, r) {
  var n, i;
  function o() {
    var a = t.apply(this, arguments);
    return a !== i && (n = (i = a) && ARe(e12, a, r)), n;
  }
  return o._value = t, o;
}
function IRe(e12, t, r) {
  var n = "style." + (e12 += "");
  if (arguments.length < 2)
    return (n = this.tween(n)) && n._value;
  if (t == null)
    return this.tween(n, null);
  if (typeof t != "function")
    throw new Error();
  return this.tween(n, ORe(e12, t, r ?? ""));
}
function PRe(e12) {
  return function() {
    this.textContent = e12;
  };
}
function CRe(e12) {
  return function() {
    var t = e12(this);
    this.textContent = t ?? "";
  };
}
function xRe(e12) {
  return this.tween("text", typeof e12 == "function" ? CRe(oM(this, "text", e12)) : PRe(e12 == null ? "" : e12 + ""));
}
function kRe(e12) {
  return function(t) {
    this.textContent = e12.call(this, t);
  };
}
function DRe(e12) {
  var t, r;
  function n() {
    var i = e12.apply(this, arguments);
    return i !== r && (t = (r = i) && kRe(i)), t;
  }
  return n._value = e12, n;
}
function RRe(e12) {
  var t = "text";
  if (arguments.length < 1)
    return (t = this.tween(t)) && t._value;
  if (e12 == null)
    return this.tween(t, null);
  if (typeof e12 != "function")
    throw new Error();
  return this.tween(t, DRe(e12));
}
function NRe() {
  for (var e12 = this._name, t = this._id, r = Fq(), n = this._groups, i = n.length, o = 0; o < i; ++o)
    for (var a = n[o], s = a.length, l, u = 0; u < s; ++u)
      if (l = a[u]) {
        var c = ua(l, t);
        dS(l, e12, r, u, a, {
          time: c.time + c.delay + c.duration,
          delay: 0,
          duration: c.duration,
          ease: c.ease
        });
      }
  return new Xa(n, this._parents, e12, r);
}
function MRe() {
  var e12, t, r = this, n = r._id, i = r.size();
  return new Promise(function(o, a) {
    var s = {
      value: a
    }, l = {
      value: function() {
        --i === 0 && o();
      }
    };
    r.each(function() {
      var u = Qa(this, n), c = u.on;
      c !== e12 && (t = (e12 = c).copy(), t._.cancel.push(s), t._.interrupt.push(s), t._.end.push(l)), u.on = t;
    }), i === 0 && o();
  });
}
var LRe = 0;
function Xa(e12, t, r, n) {
  this._groups = e12, this._parents = t, this._name = r, this._id = n;
}
function Bq(e12) {
  return oa().transition(e12);
}
function Fq() {
  return ++LRe;
}
var os = oa.prototype;
Xa.prototype = Bq.prototype = {
  constructor: Xa,
  select: gRe,
  selectAll: vRe,
  selectChild: os.selectChild,
  selectChildren: os.selectChildren,
  filter: cRe,
  merge: uRe,
  selection: _Re,
  transition: NRe,
  call: os.call,
  nodes: os.nodes,
  node: os.node,
  size: os.size,
  empty: os.empty,
  each: os.each,
  on: dRe,
  attr: WDe,
  attrTween: QDe,
  style: wRe,
  styleTween: IRe,
  text: xRe,
  textTween: RRe,
  remove: mRe,
  tween: HDe,
  delay: tRe,
  duration: iRe,
  ease: aRe,
  easeVarying: lRe,
  end: MRe,
  [Symbol.iterator]: os[Symbol.iterator]
};
function BRe(e12) {
  return ((e12 *= 2) <= 1 ? e12 * e12 * e12 : (e12 -= 2) * e12 * e12 + 2) / 2;
}
var FRe = {
  time: null,
  // Set on use.
  delay: 0,
  duration: 250,
  ease: BRe
};
function $Re(e12, t) {
  for (var r; !(r = e12.__transition) || !(r = r[t]); )
    if (!(e12 = e12.parentNode))
      throw new Error(`transition ${t} not found`);
  return r;
}
function HRe(e12) {
  var t, r;
  e12 instanceof Xa ? (t = e12._id, e12 = e12._name) : (t = Fq(), (r = FRe).time = nM(), e12 = e12 == null ? null : e12 + "");
  for (var n = this._groups, i = n.length, o = 0; o < i; ++o)
    for (var a = n[o], s = a.length, l, u = 0; u < s; ++u)
      (l = a[u]) && dS(l, e12, t, u, a, r || $Re(l, t));
  return new Xa(n, this._parents, e12, t);
}
oa.prototype.interrupt = BDe;
oa.prototype.transition = HRe;
var URe = [null];
function jRe(e12, t) {
  var r = e12.__transition, n, i;
  if (r) {
    t = t == null ? null : t + "";
    for (i in r)
      if ((n = r[i]).state > hC && n.name === t)
        return new Xa([[e12]], URe, t, +i);
  }
  return null;
}
var GRe = Object.freeze(Object.defineProperty({
  __proto__: null,
  active: jRe,
  interrupt: vg,
  transition: Bq
}, Symbol.toStringTag, { value: "Module" }));
var E_ = (e12) => () => e12;
function zRe(e12, {
  sourceEvent: t,
  target: r,
  transform: n,
  dispatch: i
}) {
  Object.defineProperties(this, {
    type: {
      value: e12,
      enumerable: true,
      configurable: true
    },
    sourceEvent: {
      value: t,
      enumerable: true,
      configurable: true
    },
    target: {
      value: r,
      enumerable: true,
      configurable: true
    },
    transform: {
      value: n,
      enumerable: true,
      configurable: true
    },
    _: {
      value: i
    }
  });
}
function La(e12, t, r) {
  this.k = e12, this.x = t, this.y = r;
}
La.prototype = {
  constructor: La,
  scale: function(e12) {
    return e12 === 1 ? this : new La(this.k * e12, this.x, this.y);
  },
  translate: function(e12, t) {
    return e12 === 0 & t === 0 ? this : new La(this.k, this.x + this.k * e12, this.y + this.k * t);
  },
  apply: function(e12) {
    return [e12[0] * this.k + this.x, e12[1] * this.k + this.y];
  },
  applyX: function(e12) {
    return e12 * this.k + this.x;
  },
  applyY: function(e12) {
    return e12 * this.k + this.y;
  },
  invert: function(e12) {
    return [(e12[0] - this.x) / this.k, (e12[1] - this.y) / this.k];
  },
  invertX: function(e12) {
    return (e12 - this.x) / this.k;
  },
  invertY: function(e12) {
    return (e12 - this.y) / this.k;
  },
  rescaleX: function(e12) {
    return e12.copy().domain(e12.range().map(this.invertX, this).map(e12.invert, e12));
  },
  rescaleY: function(e12) {
    return e12.copy().domain(e12.range().map(this.invertY, this).map(e12.invert, e12));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
var Sn = new La(1, 0, 0);
$q.prototype = La.prototype;
function $q(e12) {
  for (; !e12.__zoom; )
    if (!(e12 = e12.parentNode))
      return Sn;
  return e12.__zoom;
}
function lO(e12) {
  e12.stopImmediatePropagation();
}
function am(e12) {
  e12.preventDefault(), e12.stopImmediatePropagation();
}
function VRe(e12) {
  return (!e12.ctrlKey || e12.type === "wheel") && !e12.button;
}
function XRe() {
  var e12 = this;
  return e12 instanceof SVGElement ? (e12 = e12.ownerSVGElement || e12, e12.hasAttribute("viewBox") ? (e12 = e12.viewBox.baseVal, [[e12.x, e12.y], [e12.x + e12.width, e12.y + e12.height]]) : [[0, 0], [e12.width.baseVal.value, e12.height.baseVal.value]]) : [[0, 0], [e12.clientWidth, e12.clientHeight]];
}
function M3() {
  return this.__zoom || Sn;
}
function WRe(e12) {
  return -e12.deltaY * (e12.deltaMode === 1 ? 0.05 : e12.deltaMode ? 1 : 2e-3) * (e12.ctrlKey ? 10 : 1);
}
function YRe() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function qRe(e12, t, r) {
  var n = e12.invertX(t[0][0]) - r[0][0], i = e12.invertX(t[1][0]) - r[1][0], o = e12.invertY(t[0][1]) - r[0][1], a = e12.invertY(t[1][1]) - r[1][1];
  return e12.translate(i > n ? (n + i) / 2 : Math.min(0, n) || Math.max(0, i), a > o ? (o + a) / 2 : Math.min(0, o) || Math.max(0, a));
}
function pC() {
  var e12 = VRe, t = XRe, r = qRe, n = WRe, i = YRe, o = [0, 1 / 0], a = [[-1 / 0, -1 / 0], [1 / 0, 1 / 0]], s = 250, l = zse, u = np("start", "zoom", "end"), c, f, h, d = 500, p = 150, m = 0, g = 10;
  function v(w) {
    w.property("__zoom", M3).on("wheel.zoom", A, {
      passive: false
    }).on("mousedown.zoom", I).on("dblclick.zoom", x).filter(i).on("touchstart.zoom", S).on("touchmove.zoom", N).on("touchend.zoom touchcancel.zoom", B).style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  v.transform = function(w, R, F, $) {
    var K = w.selection ? w.selection() : w;
    K.property("__zoom", M3), w !== K ? T(w, R, F, $) : K.interrupt().each(function() {
      E(this, arguments).event($).start().zoom(null, typeof R == "function" ? R.apply(this, arguments) : R).end();
    });
  }, v.scaleBy = function(w, R, F, $) {
    v.scaleTo(w, function() {
      var K = this.__zoom.k, se = typeof R == "function" ? R.apply(this, arguments) : R;
      return K * se;
    }, F, $);
  }, v.scaleTo = function(w, R, F, $) {
    v.transform(w, function() {
      var K = t.apply(this, arguments), se = this.__zoom, J = F == null ? b(K) : typeof F == "function" ? F.apply(this, arguments) : F, me = se.invert(J), ae = typeof R == "function" ? R.apply(this, arguments) : R;
      return r(y(_(se, ae), J, me), K, a);
    }, F, $);
  }, v.translateBy = function(w, R, F, $) {
    v.transform(w, function() {
      return r(this.__zoom.translate(typeof R == "function" ? R.apply(this, arguments) : R, typeof F == "function" ? F.apply(this, arguments) : F), t.apply(this, arguments), a);
    }, null, $);
  }, v.translateTo = function(w, R, F, $, K) {
    v.transform(w, function() {
      var se = t.apply(this, arguments), J = this.__zoom, me = $ == null ? b(se) : typeof $ == "function" ? $.apply(this, arguments) : $;
      return r(Sn.translate(me[0], me[1]).scale(J.k).translate(typeof R == "function" ? -R.apply(this, arguments) : -R, typeof F == "function" ? -F.apply(this, arguments) : -F), se, a);
    }, $, K);
  };
  function _(w, R) {
    return R = Math.max(o[0], Math.min(o[1], R)), R === w.k ? w : new La(R, w.x, w.y);
  }
  function y(w, R, F) {
    var $ = R[0] - F[0] * w.k, K = R[1] - F[1] * w.k;
    return $ === w.x && K === w.y ? w : new La(w.k, $, K);
  }
  function b(w) {
    return [(+w[0][0] + +w[1][0]) / 2, (+w[0][1] + +w[1][1]) / 2];
  }
  function T(w, R, F, $) {
    w.on("start.zoom", function() {
      E(this, arguments).event($).start();
    }).on("interrupt.zoom end.zoom", function() {
      E(this, arguments).event($).end();
    }).tween("zoom", function() {
      var K = this, se = arguments, J = E(K, se).event($), me = t.apply(K, se), ae = F == null ? b(me) : typeof F == "function" ? F.apply(K, se) : F, Y = Math.max(me[1][0] - me[0][0], me[1][1] - me[0][1]), Q = K.__zoom, le = typeof R == "function" ? R.apply(K, se) : R, Se = l(Q.invert(ae).concat(Y / Q.k), le.invert(ae).concat(Y / le.k));
      return function(Pe) {
        if (Pe === 1)
          Pe = le;
        else {
          var Re = Se(Pe), we = Y / Re[2];
          Pe = new La(we, ae[0] - Re[0] * we, ae[1] - Re[1] * we);
        }
        J.zoom(null, Pe);
      };
    });
  }
  function E(w, R, F) {
    return !F && w.__zooming || new P(w, R);
  }
  function P(w, R) {
    this.that = w, this.args = R, this.active = 0, this.sourceEvent = null, this.extent = t.apply(w, R), this.taps = 0;
  }
  P.prototype = {
    event: function(w) {
      return w && (this.sourceEvent = w), this;
    },
    start: function() {
      return ++this.active === 1 && (this.that.__zooming = this, this.emit("start")), this;
    },
    zoom: function(w, R) {
      return this.mouse && w !== "mouse" && (this.mouse[1] = R.invert(this.mouse[0])), this.touch0 && w !== "touch" && (this.touch0[1] = R.invert(this.touch0[0])), this.touch1 && w !== "touch" && (this.touch1[1] = R.invert(this.touch1[0])), this.that.__zoom = R, this.emit("zoom"), this;
    },
    end: function() {
      return --this.active === 0 && (delete this.that.__zooming, this.emit("end")), this;
    },
    emit: function(w) {
      var R = Wt(this.that).datum();
      u.call(w, this.that, new zRe(w, {
        sourceEvent: this.sourceEvent,
        target: v,
        type: w,
        transform: this.that.__zoom,
        dispatch: u
      }), R);
    }
  };
  function A(w, ...R) {
    if (!e12.apply(this, arguments))
      return;
    var F = E(this, R).event(w), $ = this.__zoom, K = Math.max(o[0], Math.min(o[1], $.k * Math.pow(2, n.apply(this, arguments)))), se = vr(w);
    if (F.wheel)
      (F.mouse[0][0] !== se[0] || F.mouse[0][1] !== se[1]) && (F.mouse[1] = $.invert(F.mouse[0] = se)), clearTimeout(F.wheel);
    else {
      if ($.k === K)
        return;
      F.mouse = [se, $.invert(se)], vg(this), F.start();
    }
    am(w), F.wheel = setTimeout(J, p), F.zoom("mouse", r(y(_($, K), F.mouse[0], F.mouse[1]), F.extent, a));
    function J() {
      F.wheel = null, F.end();
    }
  }
  function I(w, ...R) {
    if (h || !e12.apply(this, arguments))
      return;
    var F = w.currentTarget, $ = E(this, R, true).event(w), K = Wt(w.view).on("mousemove.zoom", ae, true).on("mouseup.zoom", Y, true), se = vr(w, F), J = w.clientX, me = w.clientY;
    v1(w.view), lO(w), $.mouse = [se, this.__zoom.invert(se)], vg(this), $.start();
    function ae(Q) {
      if (am(Q), !$.moved) {
        var le = Q.clientX - J, Se = Q.clientY - me;
        $.moved = le * le + Se * Se > m;
      }
      $.event(Q).zoom("mouse", r(y($.that.__zoom, $.mouse[0] = vr(Q, F), $.mouse[1]), $.extent, a));
    }
    function Y(Q) {
      K.on("mousemove.zoom mouseup.zoom", null), y1(Q.view, $.moved), am(Q), $.event(Q).end();
    }
  }
  function x(w, ...R) {
    if (e12.apply(this, arguments)) {
      var F = this.__zoom, $ = vr(w.changedTouches ? w.changedTouches[0] : w, this), K = F.invert($), se = F.k * (w.shiftKey ? 0.5 : 2), J = r(y(_(F, se), $, K), t.apply(this, R), a);
      am(w), s > 0 ? Wt(this).transition().duration(s).call(T, J, $, w) : Wt(this).call(v.transform, J, $, w);
    }
  }
  function S(w, ...R) {
    if (e12.apply(this, arguments)) {
      var F = w.touches, $ = F.length, K = E(this, R, w.changedTouches.length === $).event(w), se, J, me, ae;
      for (lO(w), J = 0; J < $; ++J)
        me = F[J], ae = vr(me, this), ae = [ae, this.__zoom.invert(ae), me.identifier], K.touch0 ? !K.touch1 && K.touch0[2] !== ae[2] && (K.touch1 = ae, K.taps = 0) : (K.touch0 = ae, se = true, K.taps = 1 + !!c);
      c && (c = clearTimeout(c)), se && (K.taps < 2 && (f = ae[0], c = setTimeout(function() {
        c = null;
      }, d)), vg(this), K.start());
    }
  }
  function N(w, ...R) {
    if (this.__zooming) {
      var F = E(this, R).event(w), $ = w.changedTouches, K = $.length, se, J, me, ae;
      for (am(w), se = 0; se < K; ++se)
        J = $[se], me = vr(J, this), F.touch0 && F.touch0[2] === J.identifier ? F.touch0[0] = me : F.touch1 && F.touch1[2] === J.identifier && (F.touch1[0] = me);
      if (J = F.that.__zoom, F.touch1) {
        var Y = F.touch0[0], Q = F.touch0[1], le = F.touch1[0], Se = F.touch1[1], Pe = (Pe = le[0] - Y[0]) * Pe + (Pe = le[1] - Y[1]) * Pe, Re = (Re = Se[0] - Q[0]) * Re + (Re = Se[1] - Q[1]) * Re;
        J = _(J, Math.sqrt(Pe / Re)), me = [(Y[0] + le[0]) / 2, (Y[1] + le[1]) / 2], ae = [(Q[0] + Se[0]) / 2, (Q[1] + Se[1]) / 2];
      } else if (F.touch0)
        me = F.touch0[0], ae = F.touch0[1];
      else
        return;
      F.zoom("touch", r(y(J, me, ae), F.extent, a));
    }
  }
  function B(w, ...R) {
    if (this.__zooming) {
      var F = E(this, R).event(w), $ = w.changedTouches, K = $.length, se, J;
      for (lO(w), h && clearTimeout(h), h = setTimeout(function() {
        h = null;
      }, d), se = 0; se < K; ++se)
        J = $[se], F.touch0 && F.touch0[2] === J.identifier ? delete F.touch0 : F.touch1 && F.touch1[2] === J.identifier && delete F.touch1;
      if (F.touch1 && !F.touch0 && (F.touch0 = F.touch1, delete F.touch1), F.touch0)
        F.touch0[1] = this.__zoom.invert(F.touch0[0]);
      else if (F.end(), F.taps === 2 && (J = vr(J, this), Math.hypot(f[0] - J[0], f[1] - J[1]) < g)) {
        var me = Wt(this).on("dblclick.zoom");
        me && me.apply(this, arguments);
      }
    }
  }
  return v.wheelDelta = function(w) {
    return arguments.length ? (n = typeof w == "function" ? w : E_(+w), v) : n;
  }, v.filter = function(w) {
    return arguments.length ? (e12 = typeof w == "function" ? w : E_(!!w), v) : e12;
  }, v.touchable = function(w) {
    return arguments.length ? (i = typeof w == "function" ? w : E_(!!w), v) : i;
  }, v.extent = function(w) {
    return arguments.length ? (t = typeof w == "function" ? w : E_([[+w[0][0], +w[0][1]], [+w[1][0], +w[1][1]]]), v) : t;
  }, v.scaleExtent = function(w) {
    return arguments.length ? (o[0] = +w[0], o[1] = +w[1], v) : [o[0], o[1]];
  }, v.translateExtent = function(w) {
    return arguments.length ? (a[0][0] = +w[0][0], a[1][0] = +w[1][0], a[0][1] = +w[0][1], a[1][1] = +w[1][1], v) : [[a[0][0], a[0][1]], [a[1][0], a[1][1]]];
  }, v.constrain = function(w) {
    return arguments.length ? (r = w, v) : r;
  }, v.duration = function(w) {
    return arguments.length ? (s = +w, v) : s;
  }, v.interpolate = function(w) {
    return arguments.length ? (l = w, v) : l;
  }, v.on = function() {
    var w = u.on.apply(u, arguments);
    return w === u ? v : w;
  }, v.clickDistance = function(w) {
    return arguments.length ? (m = (w = +w) * w, v) : Math.sqrt(m);
  }, v.tapDistance = function(w) {
    return arguments.length ? (g = +w, v) : g;
  }, v;
}
var KRe = Object.freeze(Object.defineProperty({
  __proto__: null,
  ZoomTransform: La,
  zoom: pC,
  zoomIdentity: Sn,
  zoomTransform: $q
}, Symbol.toStringTag, { value: "Module" }));
function ZRe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function L3(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, JRe(n.key), n);
  }
}
function QRe(e12, t, r) {
  return t && L3(e12.prototype, t), r && L3(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function JRe(e12) {
  var t = eNe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function eNe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
var tNe = 40;
var Tn = 0;
var xi = 5;
var B3 = 4;
var pS = function() {
  function e12(t) {
    ZRe(this, e12), this.pAxis = new Ue.PIXI.Graphics(), this.track = t, this.axisTexts = [], this.axisTextFontFamily = "Arial", this.axisTextFontSize = 10;
  }
  return QRe(e12, [{
    key: "startAxis",
    value: function(r) {
      const n = this.pAxis;
      n.clear(), n.lineStyle(1, this.track.getTheme() === wr ? ct("#ffffff") : 0, 1), n.moveTo(0, 0), n.lineTo(0, r);
    }
  }, {
    key: "createAxisTexts",
    value: function(r, n) {
      this.tickValues = this.calculateAxisTickValues(r, n);
      let i = 0;
      const o = this.track.getTheme() === wr ? "white" : "black";
      for (!this.track.options || !this.track.options.axisLabelFormatting || this.track.options.axisLabelFormatting === "scientific" ? this.tickFormat = oo(".2") : this.tickFormat = (a) => a; i < this.tickValues.length; ) {
        const a = this.tickValues[i];
        for (; this.axisTexts.length <= i; ) {
          const s = new Ue.PIXI.Text(a, {
            fontSize: `${this.axisTextFontSize}px`,
            fontFamily: this.axisTextFontFamily,
            fill: o
          });
          this.axisTexts.push(s), this.pAxis.addChild(s);
        }
        this.axisTexts[i].text = this.tickFormat(a), this.axisTexts[i].anchor.y = 0.5, this.axisTexts[i].anchor.x = 0.5, i++;
      }
      for (; this.axisTexts.length > this.tickValues.length; ) {
        const a = this.axisTexts.pop();
        this.pAxis.removeChild(a), a.destroy(true);
      }
    }
  }, {
    key: "calculateAxisTickValues",
    value: function(r, n) {
      const i = Math.max(Math.ceil(n / tNe), 1);
      let o = r.ticks(i);
      return o.length < 1 && (o = r.ticks(i + 1), o.length > 1 && (o = [o[0]])), o;
    }
  }, {
    key: "drawAxisLeft",
    value: function(r, n) {
      this.startAxis(n), this.createAxisTexts(r, n);
      const i = this.pAxis;
      this.track.getTheme() === wr && i.lineStyle(i.lineWidth || i._lineStyle.width, ct("#ffffff")), i.moveTo(0, 0), i.lineTo(-(Tn + xi), 0), i.moveTo(0, n), i.lineTo(-(Tn + xi), n);
      for (let o = 0; o < this.axisTexts.length; o++) {
        const a = this.tickValues[o];
        this.axisTexts[o].x = -(Tn + xi + B3 + this.axisTexts[o].width / 2), this.axisTexts[o].y = r(a), i.moveTo(-Tn, r(a)), i.lineTo(-(Tn + xi), r(a)), this.track && this.track.flipText && (this.axisTexts[o].scale.x = -1);
      }
      this.hideOverlappingAxisLabels();
    }
  }, {
    key: "drawAxisRight",
    value: function(r, n) {
      this.startAxis(n), this.createAxisTexts(r, n);
      const i = this.pAxis;
      this.track.getTheme() === wr && i.lineStyle(i.lineWidth || i._lineStyle.width, ct("#ffffff")), i.moveTo(0, 0), i.lineTo(Tn + xi, 0), i.moveTo(0, n), i.lineTo(Tn + xi, n);
      for (let o = 0; o < this.axisTexts.length; o++) {
        const a = this.tickValues[o];
        this.axisTexts[o].x = Tn + xi + B3 + this.axisTexts[o].width / 2, this.axisTexts[o].y = r(a), i.moveTo(Tn, r(a)), i.lineTo(Tn + xi, r(a)), this.track && this.track.flipText && (this.axisTexts[o].scale.x = -1);
      }
      this.hideOverlappingAxisLabels();
    }
  }, {
    key: "hideOverlappingAxisLabels",
    value: function() {
      for (let r = this.axisTexts.length - 1; r >= 0; r--)
        this.axisTexts[r].visible = true;
      for (let r = this.axisTexts.length - 1; r >= 0; r--) {
        if (!this.axisTexts[r].visible)
          continue;
        let n = r - 1;
        for (; n >= 0 && this.axisTexts[r].y + this.axisTexts[r].height / 2 > this.axisTexts[n].y - this.axisTexts[n].height / 2; ) {
          this.axisTexts[n].visible = false;
          n -= 1;
        }
      }
    }
  }, {
    key: "exportVerticalAxis",
    value: function(r) {
      const n = document.createElement("g");
      n.setAttribute("class", "axis-vertical");
      let i = "black";
      this.track && this.track.options.lineStrokeColor && (i = this.track.options.lineStrokeColor), this.track.getTheme() === wr && (i = "#cccccc");
      const o = document.createElement("path");
      return o.setAttribute("fill", "transparent"), o.setAttribute("stroke", i), o.setAttribute("id", "axis-line"), o.setAttribute("d", `M0,0 L0,${r}`), n.appendChild(o), n;
    }
  }, {
    key: "createAxisSVGLine",
    value: function() {
      let r = "black";
      this.track && this.track.options.lineStrokeColor && (r = this.track.options.lineStrokeColor), this.track.getTheme() === wr && (r = "#cccccc");
      const n = document.createElement("path");
      return n.setAttribute("id", "tick-mark"), n.setAttribute("fill", "transparent"), n.setAttribute("stroke", r), n;
    }
  }, {
    key: "createAxisSVGText",
    value: function(r) {
      const n = document.createElement("text");
      return n.innerHTML = r, n.setAttribute("id", "axis-text"), n.setAttribute("text-anchor", "middle"), n.setAttribute("font-family", this.axisTextFontFamily), n.setAttribute("font-size", this.axisTextFontSize), n.setAttribute("dy", this.axisTextFontSize / 2 - 2), n;
    }
  }, {
    key: "exportAxisLeftSVG",
    value: function(r, n) {
      const i = this.exportVerticalAxis(n), o = this.createAxisSVGLine();
      i.appendChild(o), o.setAttribute("d", `M0,0 L${+(Tn + xi)},0`);
      const a = this.createAxisSVGLine();
      i.appendChild(a), a.setAttribute("d", `M0,${n} L${+(Tn + xi)},${n}`);
      for (let s = 0; s < this.axisTexts.length; s++) {
        const l = this.tickValues[s], u = this.axisTexts[s], c = this.createAxisSVGLine();
        i.appendChild(c), c.setAttribute("d", `M${+Tn},${r(l)} L${+(Tn + xi)},${r(l)}`);
        const f = document.createElement("g");
        if (i.appendChild(f), u.visible) {
          const h = this.createAxisSVGText(u.text);
          f.appendChild(h);
        }
        f.setAttribute("transform", `translate(${u.position.x},${u.position.y})
             scale(${u.scale.x},${u.scale.y})`);
      }
      return i;
    }
  }, {
    key: "exportAxisRightSVG",
    value: function(r, n) {
      const i = this.exportVerticalAxis(n), o = this.createAxisSVGLine();
      i.appendChild(o), o.setAttribute("d", `M0,0 L${-(Tn + xi)},0`);
      const a = this.createAxisSVGLine();
      i.appendChild(a), a.setAttribute("d", `M0,${n} L${-(Tn + xi)},${n}`);
      for (let s = 0; s < this.axisTexts.length; s++) {
        const l = this.tickValues[s], u = this.axisTexts[s], c = this.createAxisSVGLine();
        i.appendChild(c), c.setAttribute("d", `M${-Tn},${r(l)} L${-(Tn + xi)},${r(l)}`);
        const f = document.createElement("g");
        if (i.appendChild(f), u.visible) {
          const h = this.createAxisSVGText(u.text);
          f.appendChild(h);
        }
        f.setAttribute("transform", `translate(${u.position.x},${u.position.y})
             scale(${u.scale.x},${u.scale.y})`);
      }
      return i;
    }
  }, {
    key: "clearAxis",
    value: function() {
      const r = this.pAxis;
      for (; this.axisTexts.length; ) {
        const n = this.axisTexts.pop();
        r.removeChild(n);
      }
      r.clear();
    }
  }]), e12;
}();
var Hq = (e12, t) => {
  const r = [];
  for (let n = e12; n < t; n++)
    r.push(n);
  return r;
};
var rNe = (e12, t) => {
  const r = e12.map((s) => +s).sort((s, l) => l - s), n = t.range()[1] - t.range()[0], o = r.map((s) => (t.domain()[1] - t.domain()[0]) / s).map((s) => s / n), a = o.filter((s) => s < 1);
  return a.length === 0 ? 0 : o.indexOf(a[a.length - 1]);
};
var nNe = (e12, t, r, n) => {
  const i = e12.range()[1] - e12.range()[0], o = Math.max((r - t) / (e12.domain()[1] - e12.domain()[0]), 1), s = Math.max(0, Math.ceil(Math.log(i / 384) / Math.LN2));
  let l = Math.round(Math.log(o) / Math.LN2) + s, u = 0;
  return n && (u = Math.floor(Math.log(256) / Math.log(2) - Math.log(n) / Math.log(2))), l += u, l;
};
var Uq = (e12, t, r) => {
  if (typeof r > "u" && (r = Number.MAX_SAFE_INTEGER), e12.resolutions)
    return rNe(e12.resolutions, t, e12.min_pos[0], e12.max_pos[0] - 2);
  const n = nNe(t, e12.min_pos[0], e12.max_pos[0], e12.bins_per_dimension || e12.tile_size), i = Math.min(n, r);
  return Math.max(i, 0);
};
var iNe = (e12, t, r, n, i, o) => {
  const a = Math.min(e12, i), s = o / 2 ** a, l = 1e-7;
  return Hq(Math.max(0, Math.floor((t.domain()[0] - r) / s)), Math.min(2 ** a, Math.ceil((t.domain()[1] - r - l) / s)));
};
var oNe = (e12, t, r, n = Number.MAX_VALUE, i = 256) => {
  const a = e12 * i, s = 20, l = Math.max(0, Math.floor((t.domain()[0] - r) / a)), u = Math.ceil(Math.min(n, t.domain()[1] - r - 1e-7) / a);
  let c = Hq(l, u);
  return c.length > s && (console.warn(`Too many visible tiles: ${c.length} truncating to ${s}`), c = c.slice(0, s)), c;
};
var aNe = (e12, t) => {
  if (!e12)
    return [];
  const r = Uq(e12, t, e12.max_zoom);
  if (e12.resolutions) {
    const o = e12.resolutions.map((l) => +l).sort((l, u) => u - l);
    return oNe(o[r], t, e12.min_pos[0], e12.max_pos[0]).map((l) => [r, l]);
  }
  return iNe(r, t, e12.min_pos[0], e12.max_pos[0], e12.max_zoom, e12.max_width).map((o) => [r, o]);
};
var sNe = (e12, t) => {
  if (e12.axis || (e12.axis = new pS(e12), e12.pBase.addChild(e12.axis.pAxis)), !e12.options.axisPositionVertical && !e12.options.axisPositionHorizontal) {
    e12.axis.clearAxis();
    return;
  }
  if (e12.options.axisPositionVertical && e12.options.axisPositionVertical === "hidden") {
    e12.axis.clearAxis();
    return;
  }
  if (e12.options.axisPositionHorizontal && e12.options.axisPositionHorizontal === "hidden") {
    e12.axis.clearAxis();
    return;
  }
  const r = e12.options.axisMargin || 0;
  e12.options.axisPositionHorizontal === "left" || e12.options.axisPositionVertical === "top" ? (e12.axis.pAxis.position.x = e12.position[0] + r, e12.axis.pAxis.position.y = e12.position[1], e12.axis.drawAxisRight(t, e12.dimensions[1])) : e12.options.axisPositionHorizontal === "outsideLeft" || e12.options.axisPositionVertical === "outsideTop" ? (e12.axis.pAxis.position.x = e12.position[0] + r, e12.axis.pAxis.position.y = e12.position[1], e12.axis.drawAxisLeft(t, e12.dimensions[1])) : e12.options.axisPositionHorizontal === "right" || e12.options.axisPositionVertical === "bottom" ? (e12.axis.pAxis.position.x = e12.position[0] + e12.dimensions[0] - r, e12.axis.pAxis.position.y = e12.position[1], e12.axis.drawAxisLeft(t, e12.dimensions[1])) : (e12.options.axisPositionHorizontal === "outsideRight" || e12.options.axisPositionVertical === "outsideBottom") && (e12.axis.pAxis.position.x = e12.position[0] + e12.dimensions[0] - r, e12.axis.pAxis.position.y = e12.position[1], e12.axis.drawAxisRight(t, e12.dimensions[1]));
};
var lNe = (e12, t) => {
  const r = e12.valueScaleTransform, {
    y: n,
    k: i
  } = r, o = e12.dimensions[1];
  n + t / i > -(i - 1) * o && n + t / i < 0 && (e12.valueScaleTransform = r.translate(0, t / i)), Object.values(e12.fetchedTiles).forEach((a) => {
    a.graphics.position.y = e12.valueScaleTransform.y;
  }), e12.animate();
};
var cNe = (e12, t, r, n) => {
  const i = r.k, o = r.y, a = (e12 - o) / i, s = Math.max(i / t, 1);
  let l = i * a + o - s * a;
  return l = Math.max(l, -(s - 1) * n), l = Math.min(l, 0), Sn.translate(0, l).scale(s);
};
var uNe = (e12, t) => {
  const r = +t.split(".")[0], n = +t.split(".")[1], i = e12.max_width, o = e12.min_pos[0], a = i / 2 ** r;
  return {
    tileX: o + n * a,
    tileWidth: a
  };
};
function hNe(e12, t) {
  Object.values(e12.fetchedTiles).forEach((r) => {
    if (!r.drawnAtScale)
      return;
    const n = r.drawnAtScale.range(), i = e12._xScale.range();
    if (n[0] !== i[0] || n[1] !== i[1]) {
      e12.renderTile(r);
      return;
    }
    const o = (r.drawnAtScale.domain()[1] - r.drawnAtScale.domain()[0]) / (e12._xScale.domain()[1] - e12._xScale.domain()[0]);
    if (o > 2 || o < 0.5)
      e12.renderTile(r);
    else {
      const s = e12._xScale.domain().map(r.drawnAtScale)[0];
      for (const l of t)
        l(r).scale.x = o, l(r).x = -s * o;
    }
  });
}
var iu = {
  calculate1DVisibleTiles: aNe,
  calculate1DZoomLevel: Uq,
  drawAxis: sNe,
  movedY: lNe,
  getTilePosAndDimensions: uNe,
  stretchRects: hNe,
  zoomedY: cNe
};
var fNe = Object.freeze(Object.defineProperty({
  __proto__: null,
  DenseDataExtrema1D: H0,
  DenseDataExtrema2D: eN,
  IS_TRACK_RANGE_SELECTABLE: ip,
  absToChr: pn,
  accessorTransposition: dV,
  addArrays: pV,
  addClass: Gpe,
  base64ToCanvas: zpe,
  changeOptions: ADe,
  chrToAbs: C0,
  chromInfoBisector: fV,
  cloneEvent: mV,
  colorDomainToRgbaArray: Zl,
  colorToHex: ct,
  colorToRgba: CV,
  dataToGenomicLoci: N0,
  debounce: jR,
  decToHexStr: AP,
  dictFromTuples: xV,
  dictItems: vo,
  dictKeys: mo,
  dictValues: mr,
  download: Qm,
  expandCombinedTracks: hb,
  fillInMinWidths: kV,
  flatten: Ame,
  forEach: Ome,
  forwardEvent: M0,
  genomeLociToPixels: Ime,
  genomicRangeToChromosomeChunks: Pme,
  getAggregationFunction: tN,
  getDefaultTrackForDatatype: GR,
  getElementDim: FV,
  getTiledPlot: _ve,
  getTrackByUid: Zi,
  getTrackConfFromHGC: Oge,
  getTrackObjById: Om,
  getTrackObjectFromHGC: rN,
  getTrackPositionByUid: Jm,
  getTrackRenderer: i2,
  getXylofon: HV,
  gradient: UV,
  hasClass: P0,
  hasParent: jV,
  hexStrToInt: GV,
  intoTheVoid: zV,
  isTrackOrChildTrack: VV,
  isWithin: ZR,
  latToY: Mge,
  lngToX: Bge,
  loadChromInfos: Lge,
  map: qR,
  max: OP,
  maxNonZero: IP,
  min: XV,
  minNonZero: PP,
  mod: Fge,
  mountHGComponent: xq,
  mountHGComponentAsync: CDe,
  ndarrayAssign: WV,
  ndarrayFlatten: KV,
  ndarrayToList: qV,
  numericifyVersion: ZV,
  objVals: E1,
  or: qv,
  parseChromsizesRows: S1,
  pixiTextToSvg: CP,
  q: Qge,
  rangeQuery2d: Jge,
  reduce: DV,
  relToAbsChromPos: eve,
  removeClass: rve,
  removeHGComponent: PDe,
  resetD3BrushStyle: Df,
  rgbToHex: nve,
  scalesCenterAndK: un,
  scalesToGenomeLoci: QV,
  segmentsToRows: $0,
  selectedItemsToSize: av,
  showMousePosition: _u,
  some: sve,
  sum: Ol,
  svgLine: JV,
  throttleAndDebounce: e22,
  tileToCanvas: lve,
  timeout: QR,
  toVoid: qo,
  totalTrackPixelHeight: cve,
  trackUtils: iu,
  trimTrailingSlash: w1,
  valueToColor: JR,
  visitPositionedTracks: hs,
  visitTracks: YR,
  waitForJsonComplete: rM,
  waitForTilesLoaded: tT,
  waitForTransitionsFinished: Cq
}, Symbol.toStringTag, { value: "Module" }));
function mC() {
  return mC = Object.assign ? Object.assign.bind() : function(e12) {
    for (var t = 1; t < arguments.length; t++) {
      var r = arguments[t];
      for (var n in r)
        Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
    }
    return e12;
  }, mC.apply(this, arguments);
}
var {
  Provider: dNe,
  Consumer: pNe
} = import_react.default.createContext({
  close: qo,
  open: qo
});
var lh = (e12) => import_react.default.forwardRef((t, r) => import_react.default.createElement(pNe, null, (n) => import_react.default.createElement(e12, mC({
  ref: r
}, t, {
  theme: n
}))));
var wl = {
  "track-control": "_track-control_w7hx2_1",
  "track-control-vertical": "_track-control-vertical_w7hx2_2",
  "track-control-dark": "_track-control-dark_w7hx2_15",
  "track-control-active": "_track-control-active_w7hx2_16 _track-control_w7hx2_1",
  "track-control-left": "_track-control-left_w7hx2_24",
  "track-control-vertical-active": "_track-control-vertical-active_w7hx2_30",
  "track-control-padding-right": "_track-control-padding-right_w7hx2_48",
  "track-control-button": "_track-control-button_w7hx2_52",
  "track-control-button-vertical": "_track-control-button-vertical_w7hx2_81"
};
var mNe = (e12) => nr({
  [wl["track-control-active"]]: e12.isVisible,
  [wl["track-control"]]: !e12.isVisible,
  [wl["track-control-left"]]: e12.isAlignLeft,
  [wl["track-control-vertical"]]: e12.isVertical,
  [wl["track-control-padding-right"]]: e12.paddingRight,
  [wl["track-control-dark"]]: e12.theme === wr
});
var S_ = (e12) => nr("no-zoom", wl["track-control-button"], {
  [wl["track-control-button-vertical"]]: e12.isVertical
});
var cO = null;
var F3 = null;
function jq(e12) {
  (!e12 || !cO || Object.keys(e12).some((n) => cO[n] !== e12[n])) && (cO = e12, F3 = TP(() => import_react.default.createElement("svg", {
    className: S_(e12),
    style: {
      height: "20px",
      width: "20px",
      ...e12.imgStyleMove
    }
  }, import_react.default.createElement("title", null, "Move track"), import_react.default.createElement("use", {
    xlinkHref: "#move"
  }))));
  let t, r;
  return import_react.default.createElement("div", {
    className: mNe(e12)
  }, e12.isMoveable && import_react.default.createElement(F3, null), import_react.default.createElement("svg", {
    ref: (n) => {
      t = n;
    },
    className: S_(e12),
    onClick: () => {
      e12.onConfigTrackMenuOpened(e12.uid, t.getBoundingClientRect());
    },
    style: {
      height: "20px",
      width: "20px",
      ...e12.imgStyleSettings
    }
  }, import_react.default.createElement("title", null, "Configure track"), import_react.default.createElement("use", {
    xlinkHref: "#cog"
  })), e12.onAddSeries && import_react.default.createElement("svg", {
    className: S_(e12),
    onClick: () => e12.onAddSeries(e12.uid),
    style: {
      height: "20px",
      width: "20px",
      ...e12.imgStyleAdd
    }
  }, import_react.default.createElement("title", null, "Add series"), import_react.default.createElement("use", {
    xlinkHref: "#plus"
  })), import_react.default.createElement("svg", {
    ref: (n) => {
      r = n;
    },
    className: S_(e12),
    onClick: () => {
      e12.onCloseTrackMenuOpened(e12.uid, r.getBoundingClientRect());
    },
    style: {
      height: "20px",
      width: "20px",
      ...e12.imgStyleClose
    }
  }, import_react.default.createElement("title", null, "Close track"), import_react.default.createElement("use", {
    xlinkHref: "#cross"
  })));
}
jq.propTypes = {
  imgStyleAdd: L.object,
  imgStyleClose: L.object,
  imgStyleMove: L.object,
  imgStyleSettings: L.object,
  isAlignLeft: L.bool,
  isMoveable: L.bool,
  isVertical: L.bool,
  isVisible: L.bool,
  onConfigTrackMenuOpened: L.func,
  onCloseTrackMenuOpened: L.func,
  onAddSeries: L.func,
  paddingRight: L.bool,
  theme: L.symbol.isRequired,
  uid: L.string
};
var mS = lh(jq);
var gC = {
  "center-track": "_center-track_fiu64_1",
  "center-track-container": "_center-track-container_fiu64_6"
};
var jo = {
  "track-range-selection": "_track-range-selection_5bcsr_1",
  "track-range-selection-active": "_track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1",
  "track-range-selection-active-primary": "_track-range-selection-active-primary_5bcsr_14 _track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1",
  "track-range-selection-active-secondary": "_track-range-selection-active-secondary_5bcsr_18 _track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1",
  "track-range-selection-group-inactive": "_track-range-selection-group-inactive_5bcsr_22",
  "track-range-selection-group-brush-selection": "_track-range-selection-group-brush-selection_5bcsr_26"
};
function gNe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function $3(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, yNe(n.key), n);
  }
}
function vNe(e12, t, r) {
  return t && $3(e12.prototype, t), r && $3(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function yNe(e12) {
  var t = _Ne(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function _Ne(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function bNe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && vC(e12, t);
}
function vC(e12, t) {
  return vC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, vC(e12, t);
}
function TNe(e12) {
  var t = SNe();
  return function() {
    var n = oT(e12), i;
    if (t) {
      var o = oT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return ENe(this, i);
  };
}
function ENe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return ml(e12);
}
function ml(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function SNe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function oT(e12) {
  return oT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, oT(e12);
}
var w_ = {
  pointerEvents: "all"
};
function Rh(e12) {
  return e12 && e12.sourceEvent;
}
var aM = function(e12) {
  bNe(r, e12);
  var t = TNe(r);
  function r(n) {
    var i;
    return gNe(this, r), i = t.call(this, n), i.state = {
      isVisible: false
    }, i.brushBehaviorX = T1().on("brush", i.brushedX.bind(ml(i))).on("end", i.brushedXEnded.bind(ml(i))), i.brushBehaviorY = Xv().on("brush", i.brushedY.bind(ml(i))).on("end", i.brushedYEnded.bind(ml(i))), i.brushBehaviorXY = NR().on("start", i.brushStarted.bind(ml(i))).on("brush", i.brushedXY.bind(ml(i))).on("end", i.brushedXYEnded.bind(ml(i))), i;
  }
  return vNe(r, [{
    key: "componentDidMount",
    value: function() {
      this.props.isRangeSelectionActive && this.addBrush2d();
    }
  }, {
    key: "shouldComponentUpdate",
    value: function(i, o) {
      if (this.rangeSelectionTriggeredXY) {
        if (this.rangeSelectionTriggeredXY = false, this.rangeSelectionTriggeredXYEnd) {
          const a = i.rangeSelection[0] || null;
          this.moveBrushXY([a, i.rangeSelection[1]], true), this.rangeSelectionTriggeredXYEnd = false;
        }
        return this.state !== o;
      }
      if (this.props.rangeSelection !== i.rangeSelection) {
        const a = i.rangeSelection[0] || null;
        this.props.is1dRangeSelection ? (this.rangeSelectionTriggeredX || this.moveBrushX(a, i.rangeSelectionEnd), this.rangeSelectionTriggeredXEnd && this.moveBrushX(a, i.rangeSelectionEnd, true), this.rangeSelectionTriggeredY || this.moveBrushY(a, i.rangeSelectionEnd), this.rangeSelectionTriggeredYEnd && this.moveBrushY(a, i.rangeSelectionEnd, true), this.rangeSelectionTriggeredX = false, this.rangeSelectionTriggeredXEnd = false, this.rangeSelectionTriggeredY = false, this.rangeSelectionTriggeredYEnd = false) : this.moveBrushXY([a, i.rangeSelection[1]], i.rangeSelectionEnd);
        const s = this.props.is1dRangeSelection && !i.is1dRangeSelection && a === null;
        return this.state !== o || s;
      }
      return true;
    }
  }, {
    key: "componentDidUpdate",
    value: function() {
      this.props.isRangeSelectionActive ? this.addBrush2d() : (this.removeBrush1d(), this.removeBrush2d());
    }
    /* ---------------------------- Custom Methods ---------------------------- */
  }, {
    key: "addBrush1d",
    value: function() {
      !this.brushElX || !this.brushElY || this.brushElXOld === this.brushElX && this.brushElYOld === this.brushElY || (this.brushElXOld && this.brushElXOld.on(".brush", null), this.brushElYOld && this.brushElYOld.on(".brush", null), this.brushElX.call(this.brushBehaviorX), this.brushElY.call(this.brushBehaviorY), Df(this.brushElX, jo["track-range-selection-group-brush-selection"]), Df(this.brushElY, jo["track-range-selection-group-brush-selection"]), this.brushElXOld = this.brushElX, this.brushElYOld = this.brushElY, this.brushIs1dBound = true);
    }
  }, {
    key: "addBrush2d",
    value: function() {
      !this.brushElXY || this.brushElXYOld === this.brushElXY || (this.brushElXYOld && this.brushElXYOld.on(".brush", null), this.brushElXY.call(this.brushBehaviorXY), this.brushElXYOld = this.brushElXY, this.brushIs2dBound = true, Df(this.brushElXY, jo["track-range-selection-group-brush-selection"]));
    }
  }, {
    key: "brushedX",
    value: function(i) {
      const o = this.rangeSelectionMoved;
      this.rangeSelectionMoved = false, !(!Rh(i) || !this.props.onRangeSelectionX || !this.props.is1dRangeSelection || o) && (this.rangeSelectionTriggeredX = true, this.props.onRangeSelectionX(i.selection));
    }
  }, {
    key: "brushedXEnded",
    value: function(i) {
      const o = this.rangeSelectionMovedEnd;
      this.rangeSelectionMovedEnd = false, !(!Rh(i) || !this.props.onRangeSelectionX || !this.props.is1dRangeSelection || o) && (this.rangeSelectionTriggeredX = true, this.rangeSelectionTriggeredXEnd = true, this.props.onRangeSelectionXEnd(i.selection));
    }
  }, {
    key: "brushedY",
    value: function(i) {
      const o = this.rangeSelectionMoved;
      this.rangeSelectionMoved = false, !(!Rh(i) || !this.props.onRangeSelectionY || !this.props.is1dRangeSelection || o) && (this.rangeSelectionTriggeredY = true, this.props.onRangeSelectionY(i.selection));
    }
  }, {
    key: "brushedYEnded",
    value: function(i) {
      const o = this.rangeSelectionMovedEnd;
      this.rangeSelectionMovedEnd = false, !(!Rh(i) || !this.props.onRangeSelectionY || !this.props.is1dRangeSelection || o) && (this.rangeSelectionTriggeredY = true, this.rangeSelectionTriggeredYEnd = true, this.props.onRangeSelectionYEnd(i.selection));
    }
  }, {
    key: "brushedXY",
    value: function(i) {
      const o = this.rangeSelectionMoved;
      this.rangeSelectionMoved = false, !(!Rh(i) || !this.props.onRangeSelectionXY || o || this.props.is1dRangeSelection) && (this.rangeSelectionTriggeredXY = true, this.props.onRangeSelectionXY([[i.selection[0][0], i.selection[1][0]], [i.selection[0][1], i.selection[1][1]]]));
    }
  }, {
    key: "brushedXYEnded",
    value: function(i) {
      if (this.props.is1dRangeSelection)
        return;
      const o = this.rangeSelectionMovedEnd;
      this.rangeSelectionMovedEnd = false, i.selection && i.sourceEvent && this.props.onRangeSelectionXY && !o && (this.rangeSelectionTriggeredXY = true, this.rangeSelectionTriggeredXYEnd = true, this.props.onRangeSelectionXYEnd([[i.selection[0][0], i.selection[1][0]], [i.selection[0][1], i.selection[1][1]]])), i.selection || (this.rangeSelectionTriggeredXY = true, this.props.onRangeSelectionReset());
    }
  }, {
    key: "brushStarted",
    value: function(i) {
      Rh(i) && this.props.onRangeSelectionStart();
    }
  }, {
    key: "moveBrushX",
    value: function(i, o = false) {
      if (!this.brushEl)
        return;
      this.brushIs2dBound && (this.removeBrush2d(), this.addBrush1d());
      const a = i ? [this.props.scaleX(i[0]), this.props.scaleX(i[1])] : null;
      this.rangeSelectionMoved = true, this.rangeSelectionMovedEnd = true, o ? this.brushElX.transition().call(this.brushBehaviorX.move, a) : this.brushElX.call(this.brushBehaviorX.move, a);
    }
  }, {
    key: "moveBrushY",
    value: function(i, o = false) {
      if (!this.brushEl)
        return;
      this.brushIs2dBound && (this.removeBrush2d(), this.addBrush1d());
      const a = i ? [this.props.scaleY(i[0]), this.props.scaleY(i[1])] : null;
      this.rangeSelectionMoved = true, this.rangeSelectionMovedEnd = true, o ? this.brushElY.transition().call(this.brushBehaviorY.move, a) : this.brushElY.call(this.brushBehaviorY.move, a);
    }
  }, {
    key: "moveBrushXY",
    value: function(i, o = false) {
      if (!this.brushEl)
        return;
      const a = [[this.props.scaleX(i[0][0]), this.props.scaleY(i[1][0])], [this.props.scaleX(i[0][1]), this.props.scaleY(i[1][1])]];
      this.rangeSelectionMoved = true, this.rangeSelectionMovedEnd = true, o ? this.brushElXY.transition().call(this.brushBehaviorXY.move, a) : this.brushElXY.call(this.brushBehaviorXY.move, a);
    }
  }, {
    key: "mouseEnterHandler",
    value: function() {
      this.props.isRangeSelectionActive || this.setState({
        isVisible: true
      });
    }
  }, {
    key: "mouseLeaveHandler",
    value: function() {
      this.setState({
        isVisible: false
      });
    }
  }, {
    key: "removeBrush1d",
    value: function() {
      this.brushIs1dBound && (this.brushElX && (this.brushElX.call(this.brushBehaviorX.move, null), this.brushElX.on(".brush", null)), this.brushElY && (this.brushElY.call(this.brushBehaviorY.move, null), this.brushElY.on(".brush", null)), this.brushIs1dBound = false);
    }
  }, {
    key: "removeBrush2d",
    value: function() {
      this.brushIs2dBound && this.brushElXY && (this.brushElXY.call(this.brushBehaviorXY.move, null), this.brushElXY.on(".brush", null), this.brushElXYOld = void 0, this.brushIs2dBound = false, this.props.is1dRangeSelection || this.props.onRangeSelectionReset());
    }
    /* ------------------------------ Rendering ------------------------------- */
  }, {
    key: "render",
    value: function() {
      const i = this.props.tracks.map((u) => ip(u)).reduce(qv, false), o = this.props.tracks.some((u) => u.contents ? u.contents.some((c) => c.type === "heatmap" ? c.options.colorbarPosition === "topRight" : false) : u.type === "heatmap" ? u.options.colorbarPosition === "topRight" : false);
      let a = "track-range-selection";
      this.props.isRangeSelectionActive && (a += this.props.is1dRangeSelection ? "-active-secondary" : "-active-primary");
      const s = nr(!this.props.is1dRangeSelection && jo["track-range-selection-group-inactive"]), l = nr(this.props.is1dRangeSelection && jo["track-range-selection-group-inactive"]);
      return import_react.default.createElement("div", {
        className: nr(this.props.className, gC["center-track"]),
        onMouseEnter: this.mouseEnterHandler.bind(this),
        onMouseLeave: this.mouseLeaveHandler.bind(this),
        style: {
          height: this.props.height,
          width: this.props.width
        }
      }, i && import_react.default.createElement("svg", {
        className: jo[a],
        style: {
          height: this.props.height,
          width: this.props.width
        },
        xmlns: "http://www.w3.org/2000/svg"
      }, import_react.default.createElement("g", {
        ref: (u) => {
          this.brushElX = Wt(u);
        },
        className: s
      }), import_react.default.createElement("g", {
        ref: (u) => {
          this.brushElY = Wt(u);
        },
        className: s
      }), import_react.default.createElement("g", {
        ref: (u) => {
          this.brushElXY = Wt(u);
        },
        className: l
      })), this.props.editable && // show track controls if config menu is visible or
      // mouse is within the bounds of the track
      import_react.default.createElement(mS, {
        imgStyleAdd: w_,
        imgStyleClose: w_,
        imgStyleMove: w_,
        imgStyleSettings: w_,
        isMoveable: false,
        isVisible: this.state.isVisible || this.props.uid === this.props.configTrackMenuId,
        onAddSeries: this.props.onAddSeries,
        onCloseTrackMenuOpened: this.props.onCloseTrackMenuOpened,
        onConfigTrackMenuOpened: this.props.onConfigTrackMenuOpened,
        paddingRight: o,
        uid: this.props.uid
      }));
    }
  }]), r;
}(import_react.default.Component);
aM.defaultProps = {
  className: "center-track",
  configTrackMenuId: null,
  is1dRangeSelection: false,
  rangeSelectionEnd: L.bool,
  isRangeSelectionActive: false,
  scaleX: (e12) => e12,
  scaleY: (e12) => e12
};
aM.propTypes = {
  className: L.string,
  configTrackMenuId: L.string,
  editable: L.bool,
  height: L.number.isRequired,
  is1dRangeSelection: L.bool,
  isRangeSelectionActive: L.bool,
  onAddSeries: L.func.isRequired,
  onCloseTrackMenuOpened: L.func.isRequired,
  onConfigTrackMenuOpened: L.func.isRequired,
  onRangeSelectionX: L.func.isRequired,
  onRangeSelectionXEnd: L.func.isRequired,
  onRangeSelectionY: L.func.isRequired,
  onRangeSelectionYEnd: L.func.isRequired,
  onRangeSelectionXY: L.func.isRequired,
  onRangeSelectionXYEnd: L.func.isRequired,
  onRangeSelectionReset: L.func.isRequired,
  onRangeSelectionStart: L.func.isRequired,
  rangeSelection: L.array.isRequired,
  rangeSelectionEnd: L.bool,
  scaleX: L.func,
  scaleY: L.func,
  tracks: L.array.isRequired,
  uid: L.string.isRequired,
  width: L.number.isRequired
};
function yC() {
  return yC = Object.assign ? Object.assign.bind() : function(e12) {
    for (var t = 1; t < arguments.length; t++) {
      var r = arguments[t];
      for (var n in r)
        Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
    }
    return e12;
  }, yC.apply(this, arguments);
}
var sM = {
  __fake__: true,
  publish: qo,
  subscribe: () => ({
    event: "fake",
    handler: qo
  }),
  unsubscribe: qo,
  clear: qo
};
var {
  Provider: wNe,
  Consumer: ANe
} = import_react.default.createContext(sM);
var yp = (e12) => import_react.default.forwardRef((t, r) => import_react.default.createElement(ANe, null, (n) => import_react.default.createElement(e12, yC({
  ref: r
}, t, {
  pubSub: n
}))));
var ONe = {
  "drag-listening-div-active": "_drag-listening-div-active_19gkt_1"
};
function INe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function H3(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, CNe(n.key), n);
  }
}
function PNe(e12, t, r) {
  return t && H3(e12.prototype, t), r && H3(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function CNe(e12) {
  var t = xNe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function xNe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function kNe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && _C(e12, t);
}
function _C(e12, t) {
  return _C = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, _C(e12, t);
}
function DNe(e12) {
  var t = MNe();
  return function() {
    var n = aT(e12), i;
    if (t) {
      var o = aT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return RNe(this, i);
  };
}
function RNe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return NNe(e12);
}
function NNe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function MNe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function aT(e12) {
  return aT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, aT(e12);
}
var lM = function(e12) {
  kNe(r, e12);
  var t = DNe(r);
  function r(n) {
    var i;
    return INe(this, r), i = t.call(this, n), i.state = {
      dragOnTop: false
    }, i;
  }
  return PNe(r, [{
    key: "render",
    value: function() {
      let i = "red";
      return this.props.enabled && this.state.dragOnTop ? i = "green" : this.props.enabled && (i = "blue"), import_react.default.createElement("div", {
        className: nr("DragListeningDiv", {
          [ONe["drag-listening-div-active"]]: this.props.enabled
        }),
        onDragEnter: () => {
          this.setState({
            dragOnTop: true
          });
        },
        onDragLeave: () => {
          this.setState({
            dragOnTop: false
          });
        },
        onDragOver: (o) => {
          o.preventDefault();
        },
        onDrop: () => {
          if (!this.props.enabled)
            return;
          const o = this.props.draggingHappening, a = {
            type: this.props.defaultTrackType,
            uid: Gt.nice(),
            tilesetUid: o.tilesetUid,
            server: o.server
          };
          this.props.onTrackDropped(a), this.props.pubSub.publish("trackDropped", a);
        },
        style: {
          background: i,
          opacity: 0.6,
          ...this.props.style
        }
      });
    }
  }]), r;
}(import_react.default.Component);
lM.defaultProps = {
  enabled: false,
  style: {},
  draggingHappening: {},
  onTrackDropped: () => {
  }
};
lM.propTypes = {
  enabled: L.bool,
  style: L.object,
  defaultTrackType: L.object,
  draggingHappening: L.object,
  onTrackDropped: L.func,
  position: L.string.isRequired,
  pubSub: L.object.isRequired
};
var A_ = yp(lM);
var Ic = {
  "gallery-tracks": "_gallery-tracks_fbxxi_1",
  "gallery-track": "_gallery-track_fbxxi_1",
  "gallery-sub-track": "_gallery-sub-track_fbxxi_18",
  "gallery-invisible-track": "_gallery-invisible-track_fbxxi_19"
};
var LNe = "_horizontalList_1y7td_7";
var BNe = "_list_1y7td_14";
var FNe = "_stylizedList_1y7td_21";
var $Ne = "_stylizedItem_1y7td_28";
var HNe = "_stylizedHelper_1y7td_39";
var UNe = "_horizontalItem_1y7td_44";
var jNe = "_domain_1y7td_60";
var Go = {
  "tiled-plot": "_tiled-plot_1y7td_1",
  horizontalList: LNe,
  list: BNe,
  stylizedList: FNe,
  stylizedItem: $Ne,
  stylizedHelper: HNe,
  horizontalItem: UNe,
  "resizable-track": "_resizable-track_1y7td_55",
  domain: jNe
};
function GNe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function U3(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, VNe(n.key), n);
  }
}
function zNe(e12, t, r) {
  return t && U3(e12.prototype, t), r && U3(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function VNe(e12) {
  var t = XNe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function XNe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function WNe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && bC(e12, t);
}
function bC(e12, t) {
  return bC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, bC(e12, t);
}
function YNe(e12) {
  var t = ZNe();
  return function() {
    var n = sT(e12), i;
    if (t) {
      var o = sT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return qNe(this, i);
  };
}
function qNe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return KNe(e12);
}
function KNe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function ZNe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function sT(e12) {
  return sT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, sT(e12);
}
var O_ = {
  pointerEvents: "all"
};
var Gq = function(e12) {
  WNe(r, e12);
  var t = YNe(r);
  function r(n) {
    var i;
    return GNe(this, r), i = t.call(this, n), i.state = {
      hovering: false
    }, i;
  }
  return zNe(r, [{
    key: "mouseEnterHandler",
    value: function() {
      this.setState({
        hovering: true
      });
    }
  }, {
    key: "mouseLeaveHandler",
    value: function() {
      this.setState({
        hovering: false
      });
    }
  }, {
    key: "render",
    value: function() {
      return import_react.default.createElement("div", {
        className: nr("gallery-tracks", Ic["gallery-tracks"])
      }, this.props.tracks && this.props.tracks.map((i, o) => import_react.default.createElement("div", {
        key: i.uid || o,
        className: Ic["gallery-track"],
        onMouseLeave: this.mouseLeaveHandler.bind(this),
        style: {
          top: i.height * o,
          right: i.height * o,
          bottom: i.height * o,
          left: i.height * o
        }
      }, import_react.default.createElement("div", {
        className: Ic["gallery-sub-track"],
        onMouseEnter: this.mouseEnterHandler.bind(this),
        style: {
          top: 0,
          right: 0,
          left: 0,
          height: i.height
        }
      }), import_react.default.createElement("div", {
        className: Ic["gallery-sub-track"],
        onMouseEnter: this.mouseEnterHandler.bind(this),
        style: {
          top: 0,
          right: 0,
          bottom: 0,
          width: i.height
        }
      }), import_react.default.createElement("div", {
        className: Ic["gallery-sub-track"],
        onMouseEnter: this.mouseEnterHandler.bind(this),
        style: {
          right: 0,
          bottom: 0,
          left: 0,
          height: i.height
        }
      }), import_react.default.createElement("div", {
        className: Ic["gallery-sub-track"],
        onMouseEnter: this.mouseEnterHandler.bind(this),
        style: {
          top: 0,
          bottom: 0,
          left: 0,
          width: i.height
        }
      }), import_react.default.createElement("div", {
        className: Ic["gallery-invisible-track"],
        onMouseLeave: this.mouseLeaveHandler.bind(this),
        style: {
          top: i.height,
          right: i.height,
          bottom: i.height,
          left: i.height
        }
      }), this.props.editable && import_react.default.createElement(mS, {
        configMenuVisible: true,
        imgStyleAdd: O_,
        imgStyleClose: O_,
        imgStyleMove: O_,
        imgStyleSettings: O_,
        isMoveable: false,
        isVisible: this.state.hovering,
        onCloseTrackMenuOpened: this.props.onCloseTrackMenuOpened,
        onConfigTrackMenuOpened: this.props.onConfigTrackMenuOpened,
        uid: i.uid || o
      }))));
    }
  }]), r;
}(import_react.default.Component);
Gq.propTypes = {
  editable: L.bool,
  onCloseTrackMenuOpened: L.func.isRequired,
  onConfigTrackMenuOpened: L.func.isRequired,
  tracks: L.array
};
function QNe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function j3(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, eMe(n.key), n);
  }
}
function JNe(e12, t, r) {
  return t && j3(e12.prototype, t), r && j3(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function eMe(e12) {
  var t = tMe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function tMe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
var Lf = function() {
  function e12(t, r) {
    QNe(this, e12), this.context = t;
    const {
      id: n,
      pubSub: i,
      getTheme: o
    } = t;
    this.pubSub = i ?? sM, this.id = n, this._xScale = It(), this._yScale = It(), this._refXScale = It(), this._refYScale = It(), this.position = [0, 0], this.dimensions = [1, 1], this.options = r, this.pubSubs = [], this.getTheme = o ?? (() => {
    }), this.pubSubs.push(this.pubSub.subscribe("app.mouseMove", this.defaultMouseMoveHandler.bind(this))), this.isLeftModified = false;
  }
  return JNe(e12, [{
    key: "isWithin",
    value: function(r, n) {
      let i = r, o = n, a = this.position[0], s = this.position[1];
      return this.isLeftModified && (i = n, o = r, a = this.position[1], s = this.position[0]), ZR(i, o, a, this.dimensions[0] + a, s, this.dimensions[1] + s);
    }
    /**
     * Get a property from the track.
     * @template {keyof this} T
     * @param {T} prop - The property to get.
     * @return {() => this[T]}
     */
  }, {
    key: "getProp",
    value: function(r) {
      return () => this[r];
    }
  }, {
    key: "getData",
    value: function() {
    }
    /**
     * Capture click events. x and y are relative to the track position
     * @template T
     * @param {number} x - X position of the click event.
     * @param {number} y - Y position of the click event.
     * @param {T} evt - The event.
     * @return {{ type: 'generic', event: T, payload: null }}
     */
  }, {
    key: "click",
    value: function(r, n, i) {
      return {
        type: "generic",
        event: i,
        payload: null
      };
    }
    /** There was a click event outside the track * */
  }, {
    key: "clickOutside",
    value: function() {
    }
    /** @returns {[number, number]} */
  }, {
    key: "getDimensions",
    value: function() {
      return this.dimensions;
    }
    /** @param {[number, number]} newDimensions */
  }, {
    key: "setDimensions",
    value: function(r) {
      this.dimensions = r, this._xScale.range([0, this.dimensions[0]]), this._yScale.range([0, this.dimensions[1]]);
    }
    /**
     * @overload
     * @return {import('./types').Scale}
     */
    /**
     * @overload
     * @param {import('./types').Scale} scale
     * @return {this}
     */
    /**
     * Either get or set the reference xScale
     *
     * @param {import('./types').Scale=} scale
     * @return {import('./types').Scale | this}
     */
  }, {
    key: "refXScale",
    value: function(r) {
      return r ? (this._refXScale = r, this) : this._refXScale;
    }
    /**
     * @overload
     * @return {import('./types').Scale}
     */
    /**
     * @overload
     * @param {import('./types').Scale} scale
     * @return {this}
     */
    /**
     * Either get or set the reference yScale
     *
     * @param {import('./types').Scale=} scale
     * @return {import('./types').Scale | this}
     */
  }, {
    key: "refYScale",
    value: function(r) {
      return r ? (this._refYScale = r, this) : this._refYScale;
    }
    /**
     * @overload
     * @return {import('./types').Scale}
     */
    /**
     * @overload
     * @param {import('./types').Scale} scale
     * @return {this}
     */
    /**
     * Either get or set the xScale
     *
     * @param {import('./types').Scale=} scale
     * @return {import('./types').Scale | this}
     */
  }, {
    key: "xScale",
    value: function(r) {
      return r ? (this._xScale = r, this) : this._xScale;
    }
    /**
     * @overload
     * @return {import('./types').Scale}
     */
    /**
     * @overload
     * @param {import('./types').Scale} scale
     * @return {this}
     */
    /**
     * Either get or set the yScale
     *
     * @param {import('./types').Scale=} scale
     * @return {import('./types').Scale | this}
     */
  }, {
    key: "yScale",
    value: function(r) {
      return r ? (this._yScale = r, this) : this._yScale;
    }
    /**
     * @param {import('./types').Scale} newXScale
     * @param {import('./types').Scale} newYScale
     * @returns {void}
     */
  }, {
    key: "zoomed",
    value: function(r, n) {
      this.xScale(r), this.yScale(n);
    }
    /**
     * @param {import('./types').Scale} refXScale
     * @param {import('./types').Scale} refYScale
     * @returns {void}
     */
  }, {
    key: "refScalesChanged",
    value: function(r, n) {
      this._refXScale = r, this._refYScale = n;
    }
    /** @returns {void} */
  }, {
    key: "draw",
    value: function() {
    }
    /** @returns {[number, number]} */
  }, {
    key: "getPosition",
    value: function() {
      return this.position;
    }
    /**
     * @param {[number, number]} newPosition
     * @returns {void}
     */
  }, {
    key: "setPosition",
    value: function(r) {
      this.position = r;
    }
    /**
     * A blank handler for MouseMove / Zoom events. Should be overriden
     * by individual tracks to provide
     *
     * @param {{}} evt
     * @returns {void}
     */
  }, {
    key: "defaultMouseMoveHandler",
    value: function(r) {
    }
    /** @returns {void} */
  }, {
    key: "remove",
    value: function() {
      this.pubSubs.forEach((r) => this.pubSub.unsubscribe(r)), this.pubSubs = [];
    }
    /**
     * @param {Options} options
     * @returns {void}
     */
  }, {
    key: "rerender",
    value: function(r) {
    }
    /**
     * This function is for seeing whether this track should respond
     * to events at this mouse position. The difference to `isWithin()` is that it
     * can be overwritten if a track is inactive for example.
     *
     * @param {number} x - X position to be tested.
     * @param {number} y - Y position to be tested.
     * @returns {boolean}
     */
  }, {
    key: "respondsToPosition",
    value: function(r, n) {
      return this.isWithin(r, n);
    }
    /**
     * @param {number} trackY
     * @param {number} kMultiplier
     * @returns {void}
     */
  }, {
    key: "zoomedY",
    value: function(r, n) {
    }
    /**
     * @param {number} dY
     * @returns {void}
     */
  }, {
    key: "movedY",
    value: function(r) {
    }
  }]), e12;
}();
function rMe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function G3(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, iMe(n.key), n);
  }
}
function nMe(e12, t, r) {
  return t && G3(e12.prototype, t), r && G3(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function iMe(e12) {
  var t = oMe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function oMe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Tb() {
  return typeof Reflect < "u" && Reflect.get ? Tb = Reflect.get.bind() : Tb = function(t, r, n) {
    var i = aMe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Tb.apply(this, arguments);
}
function aMe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Rd(e12), e12 !== null); )
    ;
  return e12;
}
function sMe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && TC(e12, t);
}
function TC(e12, t) {
  return TC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, TC(e12, t);
}
function lMe(e12) {
  var t = hMe();
  return function() {
    var n = Rd(e12), i;
    if (t) {
      var o = Rd(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return cMe(this, i);
  };
}
function cMe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return uMe(e12);
}
function uMe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function hMe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Rd(e12) {
  return Rd = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Rd(e12);
}
function fMe(e12, t) {
  const r = rp(t, e12);
  return Ku(`.${r}`, e12)(e12);
}
function dMe(e12, t) {
  const r = e12.map((o) => +o).sort((o, a) => a - o), n = r[t], i = r[r.length - 1];
  return fMe(n, i);
}
function pMe(e12, t, r, n) {
  const i = t / (2 ** e12 * r);
  if (!Number.isNaN(i)) {
    const o = t / (2 ** n * r), a = rp(o, i);
    return Ku(`.${a}`, i)(i);
  }
  return console.warn("NaN resolution, screen is probably too small."), "";
}
var Oi = function(e12) {
  sMe(r, e12);
  var t = lMe(r);
  function r(n, i) {
    var o;
    rMe(this, r), o = t.call(this, n, i);
    const {
      scene: a
    } = n;
    o.scene = a, o.delayDrawing = false, o.pBase = new Ue.PIXI.Graphics(), o.pMasked = new Ue.PIXI.Graphics(), o.pMask = new Ue.PIXI.Graphics(), o.pMain = new Ue.PIXI.Graphics(), o.pBorder = new Ue.PIXI.Graphics(), o.pBackground = new Ue.PIXI.Graphics(), o.pForeground = new Ue.PIXI.Graphics(), o.pLabel = new Ue.PIXI.Graphics(), o.pMobile = new Ue.PIXI.Graphics(), o.pAxis = new Ue.PIXI.Graphics(), o.pMouseOver = new Ue.PIXI.Graphics(), o.scene.addChild(o.pBase), o.pBase.addChild(o.pMasked), o.pMasked.addChild(o.pBackground), o.pMasked.addChild(o.pMain), o.pMasked.addChild(o.pMask), o.pMasked.addChild(o.pMobile), o.pMasked.addChild(o.pBorder), o.pMasked.addChild(o.pLabel), o.pMasked.addChild(o.pForeground), o.pMasked.addChild(o.pMouseOver), o.pBase.addChild(o.pAxis), o.pMasked.mask = o.pMask, o.prevOptions = "", o.options = Object.assign(o.options, i);
    const s = o.getName();
    return o.labelTextFontFamily = "Arial", o.labelTextFontSize = 12, o.labelXOffset = 0, o.labelText = new Ue.PIXI.Text(s, {
      fontSize: `${o.labelTextFontSize}px`,
      fontFamily: o.labelTextFontFamily,
      fill: "black"
    }), o.pLabel.addChild(o.labelText), o.errorText = new Ue.PIXI.Text("", {
      fontSize: "12px",
      fontFamily: "Arial",
      fill: "red"
    }), o.errorText.anchor.x = 0.5, o.errorText.anchor.y = 0.5, o.pLabel.addChild(o.errorText), o.errorTextText = "", o.flipText = false, o.tilesetInfo = void 0, o;
  }
  return nMe(r, [{
    key: "setLabelText",
    value: function() {
    }
    /** @param {[number, number]} newPosition */
  }, {
    key: "setPosition",
    value: function(i) {
      this.position = i, this.drawBorder(), this.drawLabel(), this.drawBackground(), this.setMask(this.position, this.dimensions), this.setForeground();
    }
    /** @param {[number, number]} newDimensions */
  }, {
    key: "setDimensions",
    value: function(i) {
      Tb(Rd(r.prototype), "setDimensions", this).call(this, i), this.drawBorder(), this.drawLabel(), this.drawBackground(), this.setMask(this.position, this.dimensions), this.setForeground();
    }
    /**
     * @param {[number, number]} position
     * @param {[number, number]} dimensions
     */
  }, {
    key: "setMask",
    value: function(i, o) {
      this.pMask.clear(), this.pMask.beginFill(), this.pMask.drawRect(i[0], i[1], o[0], o[1]), this.pMask.endFill();
    }
  }, {
    key: "setForeground",
    value: function() {
      this.pForeground.position.y = this.position[1], this.pForeground.position.x = this.position[0];
    }
    /**
     * We're going to destroy this object, so we need to detach its
     * graphics from the scene
     */
  }, {
    key: "remove",
    value: function() {
      this.pBase.clear(), this.scene.removeChild(this.pBase);
    }
    /**
     * Draw a border around each track.
     */
  }, {
    key: "drawBorder",
    value: function() {
      const i = this.pBorder;
      if (i.clear(), !this.options || !this.options.trackBorderWidth)
        return;
      const o = ct(this.options.trackBorderColor ? this.options.trackBorderColor : "white");
      i.lineStyle(this.options.trackBorderWidth, o), i.drawRect(this.position[0], this.position[1], this.dimensions[0], this.dimensions[1]);
    }
  }, {
    key: "drawError",
    value: function() {
      if (this.errorText.x = this.position[0] + this.dimensions[0] / 2, this.errorText.y = this.position[1] + this.dimensions[1] / 2, this.errorText.text = this.errorTextText, this.errorTextText && this.errorTextText.length) {
        const i = this.pBorder;
        i.clear(), i.lineStyle(1, ct("red")), i.drawRect(this.position[0], this.position[1], this.dimensions[0], this.dimensions[1]);
      }
    }
  }, {
    key: "drawBackground",
    value: function() {
      const i = this.pBackground;
      if (i.clear(), !this.options || !this.options.backgroundColor)
        return;
      let o = 1, a = this.options.backgroundColor;
      this.options.backgroundColor === "transparent" && (o = 0, a = "white");
      const s = ct(a);
      i.beginFill(s, o), i.drawRect(this.position[0], this.position[1], this.dimensions[0], this.dimensions[1]);
    }
    /**
     * Determine the label color based on the number of options.
     *
     * @return {string} The color to use for the label.
     */
  }, {
    key: "getLabelColor",
    value: function() {
      return this.options.labelColor && this.options.labelColor !== "[glyph-color]" ? this.options.labelColor : this.options.lineStrokeColor || this.options.barFillColor || "black";
    }
  }, {
    key: "getName",
    value: function() {
      return this.options.name ? this.options.name : this.tilesetInfo && this.tilesetInfo.name || "";
    }
  }, {
    key: "drawLabel",
    value: function() {
      if (!this.labelText)
        return;
      const i = this.pLabel;
      if (i.clear(), !this.options || !this.options.labelPosition || this.options.labelPosition === "hidden") {
        this.labelText.alpha = 0;
        return;
      }
      const {
        labelBackgroundColor: o = "white",
        labelBackgroundOpacity: a = 0.5
      } = this.options;
      i.beginFill(ct(o), +a);
      const s = ct(this.getLabelColor()), l = 2;
      if (this.dimensions[0] < 0)
        return;
      let u = this.options.labelShowAssembly && this.tilesetInfo && this.tilesetInfo.coordSystem ? `${this.tilesetInfo.coordSystem} | ` : "";
      if (u += this.getName(), this.options.labelShowResolution && Pge(this.tilesetInfo) && this.tilesetInfo.bins_per_dimension) {
        const p = pMe(this.calculateZoomLevel(), this.tilesetInfo.max_width, this.tilesetInfo.bins_per_dimension, this.tilesetInfo.max_zoom);
        u += `
[Current data resolution: ${p}]`;
      } else if (this.options.labelShowResolution && Cge(this.tilesetInfo)) {
        const p = dMe(this.tilesetInfo.resolutions, this.calculateZoomLevel());
        u += `
[Current data resolution: ${p}]`;
      }
      if (this.options && this.options.dataTransform) {
        let p = null;
        if (this.tilesetInfo && this.tilesetInfo.transforms)
          for (const m of this.tilesetInfo.transforms)
            m.value === this.options.dataTransform && (p = m);
        p ? u += `
[Transform: ${p.name}]` : this.options.dataTransform === "None" ? u += `
[Transform: None ]` : u += `
[Transform: Default ]`;
      }
      this.labelText.text = u, this.labelText.style = {
        fontSize: `${this.labelTextFontSize}px`,
        fontFamily: this.labelTextFontFamily,
        fill: s
      }, this.labelText.alpha = typeof this.options.labelTextOpacity < "u" ? this.options.labelTextOpacity : 1, this.labelText.visible = true, this.flipText && (this.labelText.scale.x = -1);
      const {
        labelLeftMargin: c = 0,
        labelRightMargin: f = 0,
        labelTopMargin: h = 0,
        labelBottomMargin: d = 0
      } = this.options;
      this.options.labelPosition === "topLeft" ? (this.labelText.x = this.position[0] + c + this.labelXOffset, this.labelText.y = this.position[1] + h, this.labelText.anchor.x = 0.5, this.labelText.anchor.y = 0, this.labelText.x += this.labelText.width / 2, i.drawRect(this.position[0] + c + this.labelXOffset, this.position[1] + h, this.labelText.width + l, this.labelText.height + l)) : this.options.labelPosition === "bottomLeft" && !this.flipText || this.options.labelPosition === "topRight" && this.flipText ? (this.labelText.x = this.position[0] + (c || h), this.labelText.y = this.position[1] + this.dimensions[1] - (d || f), this.labelText.anchor.x = 0.5, this.labelText.anchor.y = 1, this.labelText.x += this.labelText.width / 2 + this.labelXOffset, i.drawRect(this.position[0] + (c || h) + this.labelXOffset, this.position[1] + this.dimensions[1] - this.labelText.height - l - (d || f), this.labelText.width + l, this.labelText.height + l)) : this.options.labelPosition === "topRight" && !this.flipText || this.options.labelPosition === "bottomLeft" && this.flipText ? (this.labelText.x = this.position[0] + this.dimensions[0] - (f || d), this.labelText.y = this.position[1] + (h || c), this.labelText.anchor.x = 0.5, this.labelText.anchor.y = 0, this.labelText.x -= this.labelText.width / 2 + this.labelXOffset, i.drawRect(this.position[0] + this.dimensions[0] - this.labelText.width - l - (f || d) - this.labelXOffset, this.position[1] + (h || c), this.labelText.width + l, this.labelText.height + l)) : this.options.labelPosition === "bottomRight" ? (this.labelText.x = this.position[0] + this.dimensions[0] - f, this.labelText.y = this.position[1] + this.dimensions[1] - d, this.labelText.anchor.x = 0.5, this.labelText.anchor.y = 1, this.labelText.x -= this.labelText.width / 2 + this.labelXOffset, i.drawRect(this.position[0] + this.dimensions[0] - this.labelText.width - l - f - this.labelXOffset, this.position[1] + this.dimensions[1] - this.labelText.height - l - d, this.labelText.width + l, this.labelText.height + l)) : this.options.labelPosition === "outerLeft" && !this.flipText || this.options.labelPosition === "outerTop" && this.flipText ? (this.labelText.x = this.position[0], this.labelText.y = this.position[1] + this.dimensions[1] / 2, this.labelText.anchor.x = 0.5, this.labelText.anchor.y = 0.5, this.labelText.x -= this.labelText.width / 2 + 3) : this.options.labelPosition === "outerTop" && !this.flipText || this.options.labelPosition === "outerLeft" && this.flipText ? (this.labelText.x = this.position[0] + this.dimensions[0] / 2, this.labelText.y = this.position[1], this.labelText.anchor.x = 0.5, this.labelText.anchor.y = 0.5, this.labelText.y -= this.labelText.height / 2 + 3) : this.options.labelPosition === "outerBottom" && !this.flipText || this.options.labelPosition === "outerRight" && this.flipText ? (this.labelText.x = this.position[0] + this.dimensions[0] / 2, this.labelText.y = this.position[1] + this.dimensions[1], this.labelText.anchor.x = 0.5, this.labelText.anchor.y = 0.5, this.labelText.y += this.labelText.height / 2 + 3) : this.options.labelPosition === "outerRight" && !this.flipText || this.options.labelPosition === "outerBottom" && this.flipText ? (this.labelText.x = this.position[0] + this.dimensions[0], this.labelText.y = this.position[1] + this.dimensions[1] / 2, this.labelText.anchor.x = 0.5, this.labelText.anchor.y = 0.5, this.labelText.x += this.labelText.width / 2 + 3) : this.labelText.visible = false, this.options.labelPosition === "outerLeft" || this.options.labelPosition === "outerRight" || this.options.labelPosition === "outerTop" || this.options.labelPosition === "outerBottom" ? this.pLabel.setParent(this.pBase) : this.pLabel.setParent(this.pMasked);
    }
    /** @param {PixiTrackOptions} options */
  }, {
    key: "rerender",
    value: function(i) {
      this.options = i, this.draw(), this.drawBackground(), this.drawLabel(), this.drawError(), this.drawBorder();
    }
    /**
     * Draw all the data associated with this track
     */
  }, {
    key: "draw",
    value: function() {
      this.drawError();
    }
    /**
     * Export an SVG representation of this track
     *
     * @returns {[HTMLElement, HTMLElement]} The two returned DOM nodes are both SVG
     * elements [base, track]. Base is a parent which contains track as a
     * child. Track is clipped with a clipping rectangle contained in base.
     *
     */
  }, {
    key: "exportSVG",
    value: function() {
      const i = document.createElement("g"), o = document.createElement("rect");
      o.setAttribute("x", `${this.position[0]}`), o.setAttribute("y", `${this.position[1]}`), o.setAttribute("width", `${this.dimensions[0]}`), o.setAttribute("height", `${this.dimensions[1]}`), this.options && this.options.backgroundColor ? o.setAttribute("fill", this.options.backgroundColor) : o.setAttribute("fill-opacity", "0");
      const a = document.createElement("g");
      a.setAttribute("class", "g-clipped"), i.appendChild(a), a.appendChild(o);
      const s = document.createElement("g");
      a.setAttribute("class", "g-track"), a.appendChild(s);
      const l = document.createElement("g");
      a.setAttribute("class", "g-labels"), a.appendChild(l);
      const u = document.createElementNS("http://www.w3.org/2000/svg", "clipPath");
      i.appendChild(u);
      const c = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
      u.appendChild(c), c.setAttribute("points", `${this.position[0]},${this.position[1]} ${this.position[0] + this.dimensions[0]},${this.position[1]} ${this.position[0] + this.dimensions[0]},${this.position[1] + this.dimensions[1]} ${this.position[0]},${this.position[1] + this.dimensions[1]} `);
      const f = Gt.nice();
      u.setAttribute("id", f), a.setAttribute("style", `clip-path:url(#${f});`);
      const h = this.labelText.text.split(`
`);
      let d = 0;
      const p = 3, m = (this.labelTextFontSize + 2) * h.length + p;
      this.labelText.anchor.y === 0.5 ? d = m / 2 : this.labelText.anchor.y === 1 && (d = -m);
      for (let g = 0; g < h.length; g++) {
        const v = document.createElement("text");
        if (v.setAttribute("font-family", this.labelTextFontFamily), v.setAttribute("font-size", `${this.labelTextFontSize}px`), v.innerText = h[g], this.options.labelPosition === "topLeft" || this.options.labelPosition === "topRight") {
          const _ = d + (g + 1) * (this.labelTextFontSize + 2);
          v.setAttribute("dy", String(_));
        } else
          (this.options.labelPosition === "bottomLeft" || this.options.labelPosition === "bottomRight") && v.setAttribute("dy", String(d + g * (this.labelTextFontSize + 2)));
        v.setAttribute("fill", this.options.labelColor ?? ""), this.labelText.anchor.x === 0.5 ? v.setAttribute("text-anchor", "middle") : this.labelText.anchor.x === 1 && v.setAttribute("text-anchor", "end"), l.appendChild(v);
      }
      return l.setAttribute("transform", `translate(${this.labelText.x},${this.labelText.y})scale(${this.labelText.scale.x},1)`), [i, s];
    }
    /**
     * @returns {number}
     */
  }, {
    key: "calculateZoomLevel",
    value: function() {
      throw new Error("Must be implemented by subclass");
    }
  }]), r;
}(Lf);
function mMe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function z3(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, vMe(n.key), n);
  }
}
function gMe(e12, t, r) {
  return t && z3(e12.prototype, t), r && z3(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function vMe(e12) {
  var t = yMe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function yMe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function _Me(e12) {
  return e12.length === 2;
}
var gS = function() {
  function e12(t, r) {
    if (mMe(this, e12), this.tilesetInfoLoading = true, !t) {
      console.error("No dataconfig provided");
      return;
    }
    this.dataConfig = JSON.parse(JSON.stringify(t)), this.uuid = Gt.nice(), this.pubSub = r, t.children && (this.dataConfig.children = t.children.map((n) => new e12(n, r)));
  }
  return gMe(e12, [{
    key: "registerFileUrl",
    value: async function({
      server: r,
      url: n,
      filetype: i,
      coordSystem: o
    }) {
      const a = `${w1(r)}/register_url/`;
      return fetch(a, {
        method: "POST",
        body: JSON.stringify({
          fileurl: n,
          filetype: i,
          coordSystem: o
        }),
        headers: {
          "Content-Type": "application/json; charset=utf-8"
        }
      });
    }
    /**
     * Obtain tileset infos for all of the tilesets listed
     * @param {import('../types').HandleTilesetInfoFinished} finished - A callback that will be called
     */
  }, {
    key: "tilesetInfo",
    value: function(r) {
      const {
        server: n,
        url: i,
        filetype: o,
        coordSystem: a
      } = this.dataConfig;
      return n && i && o ? this.registerFileUrl({
        server: n,
        url: i,
        filetype: o,
        coordSystem: a
      }).then((s) => s.json()).then((s) => {
        this.dataConfig.tilesetUid = s.uid, this.tilesetInfoAfterRegister(r);
      }).catch((s) => {
        console.error("Error registering url", s);
      }) : new Promise(() => {
        this.tilesetInfoAfterRegister(r);
      });
    }
    /**
     * Obtain tileset infos for all of the tilesets listed
     *
     * If there is more than one tileset info, this function
     * should (not currently implemented) check if the tileset
     * infos have the same dimensions and then return a common
     * one.
     *
     * @param {import('../types').HandleTilesetInfoFinished} finished - A callback that will be called
     *  when all tileset infos are loaded
     */
  }, {
    key: "tilesetInfoAfterRegister",
    value: function(r) {
      if (this.dataConfig.children) {
        const n = this.dataConfig.children.map((i) => (
          /** @type {Promise<TilesetInfo>} */
          new Promise((o) => {
            i.tilesetInfo(o);
          })
        ));
        Promise.all(n).then((i) => {
          r(i[0]);
        });
      } else {
        const {
          server: n,
          tilesetUid: i
        } = this.dataConfig;
        !n || !i ? (console.warn("No dataConfig children, server or tilesetUid:", this.dataConfig), r(null)) : Je.trackInfo(n, i, (o) => {
          this.dataConfig.tilesetInfo = o[i], r(o[i], i);
        }, (o) => {
          this.tilesetInfoLoading = false, r({
            error: o
          });
        }, this.pubSub);
      }
    }
    /**
     * @param {string} tilesetUid - Uid of the tileset on the server
     * @param {string} tileId - The tileId of the tile
     * @returns {string} The full tile id that the server will parse.
     *
     * @example
     * ```javascript
     * // returns 'xyxx.0.0.0'
     * fullTileId('xyxx', '0.0.0');
     * ```
     */
  }, {
    key: "fullTileId",
    value: function(r, n) {
      return `${r}.${n}`;
    }
    /**
     * Fetch a set of tiles.
     *
     * Because the track shouldn't care about tileset ids, the tile ids
     * should just include positions and any necessary transforms.
     *
     * @param {(tiles: Record<string, DividedTile | Tile>) => void} receivedTiles - A function to call once the tiles have been fetched
     * @param {string[]} tileIds - The tile ids to fetch
     * @returns {Promise<Record<string, DividedTile | Tile>>}
     */
  }, {
    key: "fetchTilesDebounced",
    value: function(r, n) {
      var i;
      if (this.dataConfig.type === "horizontal-section")
        return this.fetchHorizontalSection(r, n);
      if (this.dataConfig.type === "vertical-section")
        return this.fetchHorizontalSection(r, n, true);
      if (!this.dataConfig.children && this.dataConfig.tilesetUid)
        return new Promise((s) => {
          Je.fetchTilesDebounced({
            id: Gt.nice(),
            server: this.dataConfig.server,
            done: s,
            ids: n.map((l) => `${this.dataConfig.tilesetUid}.${l}`),
            options: this.dataConfig.options
          }, this.pubSub, true);
        }).then((s) => {
          const l = mr(s)[0].tilesetUid, u = {};
          for (let c = 0; c < n.length; c++) {
            const f = this.fullTileId(l, n[c]);
            s[f].tilePositionId = n[c], u[n[c]] = s[f];
          }
          return r(u), u;
        });
      const o = ((i = this.dataConfig.children) == null ? void 0 : i.map((a) => (
        /** @type {Promise<Record<string, Tile | DividedTile>>} */
        new Promise((s) => {
          a.fetchTilesDebounced(s, n);
        })
      ))) ?? [];
      return Promise.all(o).then((a) => {
        if (this.dataConfig.type === "divided" && _Me(a)) {
          const s = this.makeDivided(a, n);
          return r(s), s;
        }
        return console.warn("Unimplemented dataConfig type. Returning first data source.", this.dataConfig), r(a[0]), a[0];
      });
    }
    /**
     * Return an array consisting of the division of the numerator
     * array by the denominator array
     *
     * @param {ArrayLike<number>} numeratorData - An array of numerical values
     * @param {ArrayLike<number>} denominatorData - An array of numerical values
     *
     * @returns {Float32Array} An array consisting of the division of the numerator by the denominator
     */
  }, {
    key: "divideData",
    value: function(r, n) {
      const i = new Float32Array(r.length);
      for (let o = 0; o < i.length; o++)
        n[o] === 0 ? i[o] = NaN : i[o] = r[o] / n[o];
      return i;
    }
    /*
     * Take a horizontal slice across the returned tiles at the
     * given position.
     *
     * @param {list} returnedTiles: The tiles returned from a fetch request
     * @param {Number} sliceYPos: The y position across which to slice
     */
  }, {
    key: "horizontalSlice",
    value: function() {
      return null;
    }
    /**
     * Extract a slice from a matrix at a given position.
     *
     * @param {Array<number>} inputData - An array containing a matrix stored row-wise
     * @param {Array<number>} arrayShape - The shape of the array, should be a
     *  two element array e.g. [256,256].
     * @param {number} sliceIndex - The index across which to take the slice
     * @param {number=} axis - The axis along which to take the slice
     * @returns {Array<number>} an array corresponding to a slice of this matrix
     */
  }, {
    key: "extractDataSlice",
    value: function(r, n, i, o) {
      if (!o)
        return r.slice(n[1] * i, n[1] * (i + 1));
      const a = new Array(n[1]);
      for (let s = i; s < r.length; s += n[0])
        a[Math.floor(s / n[0])] = r[s];
      return a;
    }
    /**
     * Fetch a horizontal section of a 2D dataset
     * @param {(tiles: Record<string, Tile>) => void} receivedTiles - A function to call once the tiles have been fetched
     * @param {string[]} tileIds - The tile ids to fetch
     * @param {boolean=} vertical - Whether to fetch a vertical section
     * @returns {Promise<Record<string, Tile>>}
     */
  }, {
    key: "fetchHorizontalSection",
    value: function(r, n, i = false) {
      const o = [], a = [], {
        slicePos: s,
        tilesetInfo: l
      } = this.dataConfig;
      if (!s || !l)
        throw new Error("No slice position or tileset info");
      for (const c of n) {
        const f = c.split("."), h = +f[0], d = +f[1], p = It().domain([s, s]);
        let m = [];
        if ("resolutions" in l) {
          const _ = l.resolutions.map((y) => +y).sort((y, b) => b - y);
          m = Je.calculateTilesFromResolution(_[h], p, l.min_pos[i ? 1 : 0], l.max_pos[i ? 1 : 0]);
        } else
          m = Je.calculateTiles(h, p, l.min_pos[i ? 1 : 0], l.max_pos[i ? 1 : 0], l.max_zoom, l.max_width);
        const g = [d, m[0]].sort((_, y) => _ - y);
        g[0] === d ? a.push(false) : a.push(true);
        const v = `${h}.${g[0]}.${g[1]}`;
        o.push(v);
      }
      return new Promise((c) => {
        Je.fetchTilesDebounced({
          id: Gt.nice(),
          server: this.dataConfig.server,
          done: c,
          ids: o.map((f) => `${this.dataConfig.tilesetUid}.${f}`)
        }, this.pubSub, true);
      }).then((c) => {
        const f = mr(c)[0].tilesetUid, h = {};
        for (let d = 0; d < o.length; d++) {
          const p = o[d].split("."), m = +p[0], g = +p[1], v = +p[2], _ = Je.calculateTileAndPosInTile(
            l,
            // @ts-expect-error - This is undefined for legacy tilesets, but
            // `calculateTileAndPosInTile` ignores this argument with `resolutions`.
            // We should probably refactor `calculateTileAndPosInTile` to just take
            // the `tilesetInfo` object.
            l.max_width,
            l.min_pos[1],
            m,
            +s
          )[1], y = this.fullTileId(f, o[d]), b = c[y];
          let T = null;
          if (g === v) {
            T = this.extractDataSlice(b.dense, [256, 256], _);
            const P = this.extractDataSlice(b.dense, [256, 256], _, 1);
            for (let A = 0; A < T.length; A++)
              T[A] += P[A];
          } else
            a[d] ? T = this.extractDataSlice(b.dense, [256, 256], _, 1) : T = this.extractDataSlice(b.dense, [256, 256], _);
          const E = {
            min_value: Math.min.apply(null, T),
            max_value: Math.max.apply(null, T),
            denseDataExtrema: new H0(T),
            minNonZero: PP(T),
            maxNonZero: IP(T),
            dense: T,
            dtype: b.dtype,
            server: b.server,
            tilePos: a[d] ? [v] : [g],
            tilePositionId: n[d],
            tilesetUid: f,
            zoomLevel: b.zoomLevel
          };
          h[n[d]] = E;
        }
        return r(h), h;
      });
    }
    /**
     * @typedef {{ zoomLevel: number, tilePos: number[], dense?: ArrayLike<number> }} Dividable
     * @param {[Record<string, Dividable>, Record<string, Dividable>]} returnedTiles
     * @param {string[]} tileIds
     * @returns {Record<string, DividedTile>}
     */
  }, {
    key: "makeDivided",
    value: function(r, n) {
      r.length < 2 && console.warn("Only one tileset specified for a divided datafetcher:", this.dataConfig);
      const i = {};
      for (let o = 0; o < n.length; o++) {
        const a = r[0][n[o]].zoomLevel, s = r[0][n[o]].tilePos;
        let l = {
          zoomLevel: a,
          tilePos: s,
          tilePositionId: n[o]
        };
        const u = r[0][n[o]].dense, c = r[1][n[o]].dense;
        if (u && c) {
          const f = this.divideData(u, c), h = s.length === 2 ? new eN(f) : new H0(f);
          l = {
            dense: f,
            denseDataExtrema: h,
            minNonZero: PP(f),
            maxNonZero: IP(f),
            zoomLevel: a,
            tilePos: s,
            tilePositionId: n[o]
          };
        }
        i[n[o]] = l;
      }
      return i;
    }
  }]), e12;
}();
var Js = {};
(function(e12) {
  var t = typeof Uint8Array < "u" && typeof Uint16Array < "u" && typeof Int32Array < "u";
  function r(o, a) {
    return Object.prototype.hasOwnProperty.call(o, a);
  }
  e12.assign = function(o) {
    for (var a = Array.prototype.slice.call(arguments, 1); a.length; ) {
      var s = a.shift();
      if (s) {
        if (typeof s != "object")
          throw new TypeError(s + "must be non-object");
        for (var l in s)
          r(s, l) && (o[l] = s[l]);
      }
    }
    return o;
  }, e12.shrinkBuf = function(o, a) {
    return o.length === a ? o : o.subarray ? o.subarray(0, a) : (o.length = a, o);
  };
  var n = {
    arraySet: function(o, a, s, l, u) {
      if (a.subarray && o.subarray) {
        o.set(a.subarray(s, s + l), u);
        return;
      }
      for (var c = 0; c < l; c++)
        o[u + c] = a[s + c];
    },
    // Join array of chunks to single array.
    flattenChunks: function(o) {
      var a, s, l, u, c, f;
      for (l = 0, a = 0, s = o.length; a < s; a++)
        l += o[a].length;
      for (f = new Uint8Array(l), u = 0, a = 0, s = o.length; a < s; a++)
        c = o[a], f.set(c, u), u += c.length;
      return f;
    }
  }, i = {
    arraySet: function(o, a, s, l, u) {
      for (var c = 0; c < l; c++)
        o[u + c] = a[s + c];
    },
    // Join array of chunks to single array.
    flattenChunks: function(o) {
      return [].concat.apply([], o);
    }
  };
  e12.setTyped = function(o) {
    o ? (e12.Buf8 = Uint8Array, e12.Buf16 = Uint16Array, e12.Buf32 = Int32Array, e12.assign(e12, n)) : (e12.Buf8 = Array, e12.Buf16 = Array, e12.Buf32 = Array, e12.assign(e12, i));
  }, e12.setTyped(t);
})(Js);
var fy = {};
var Ja = {};
var _p = {};
var bMe = Js;
var TMe = 4;
var V3 = 0;
var X3 = 1;
var EMe = 2;
function bp(e12) {
  for (var t = e12.length; --t >= 0; )
    e12[t] = 0;
}
var SMe = 0;
var zq = 1;
var wMe = 2;
var AMe = 3;
var OMe = 258;
var cM = 29;
var dy = 256;
var mv = dy + 1 + cM;
var Bf = 30;
var uM = 19;
var Vq = 2 * mv + 1;
var Vc = 15;
var uO = 16;
var IMe = 7;
var hM = 256;
var Xq = 16;
var Wq = 17;
var Yq = 18;
var EC = (
  /* extra bits for each length code */
  [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]
);
var Eb = (
  /* extra bits for each distance code */
  [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]
);
var PMe = (
  /* extra bits for each bit length code */
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]
);
var qq = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
var CMe = 512;
var fs = new Array((mv + 2) * 2);
bp(fs);
var yg = new Array(Bf * 2);
bp(yg);
var gv = new Array(CMe);
bp(gv);
var vv = new Array(OMe - AMe + 1);
bp(vv);
var fM = new Array(cM);
bp(fM);
var lT = new Array(Bf);
bp(lT);
function hO(e12, t, r, n, i) {
  this.static_tree = e12, this.extra_bits = t, this.extra_base = r, this.elems = n, this.max_length = i, this.has_stree = e12 && e12.length;
}
var Kq;
var Zq;
var Qq;
function fO(e12, t) {
  this.dyn_tree = e12, this.max_code = 0, this.stat_desc = t;
}
function Jq(e12) {
  return e12 < 256 ? gv[e12] : gv[256 + (e12 >>> 7)];
}
function yv(e12, t) {
  e12.pending_buf[e12.pending++] = t & 255, e12.pending_buf[e12.pending++] = t >>> 8 & 255;
}
function Fi(e12, t, r) {
  e12.bi_valid > uO - r ? (e12.bi_buf |= t << e12.bi_valid & 65535, yv(e12, e12.bi_buf), e12.bi_buf = t >> uO - e12.bi_valid, e12.bi_valid += r - uO) : (e12.bi_buf |= t << e12.bi_valid & 65535, e12.bi_valid += r);
}
function wa(e12, t, r) {
  Fi(
    e12,
    r[t * 2],
    r[t * 2 + 1]
    /*.Len*/
  );
}
function eK(e12, t) {
  var r = 0;
  do
    r |= e12 & 1, e12 >>>= 1, r <<= 1;
  while (--t > 0);
  return r >>> 1;
}
function xMe(e12) {
  e12.bi_valid === 16 ? (yv(e12, e12.bi_buf), e12.bi_buf = 0, e12.bi_valid = 0) : e12.bi_valid >= 8 && (e12.pending_buf[e12.pending++] = e12.bi_buf & 255, e12.bi_buf >>= 8, e12.bi_valid -= 8);
}
function kMe(e12, t) {
  var r = t.dyn_tree, n = t.max_code, i = t.stat_desc.static_tree, o = t.stat_desc.has_stree, a = t.stat_desc.extra_bits, s = t.stat_desc.extra_base, l = t.stat_desc.max_length, u, c, f, h, d, p, m = 0;
  for (h = 0; h <= Vc; h++)
    e12.bl_count[h] = 0;
  for (r[e12.heap[e12.heap_max] * 2 + 1] = 0, u = e12.heap_max + 1; u < Vq; u++)
    c = e12.heap[u], h = r[r[c * 2 + 1] * 2 + 1] + 1, h > l && (h = l, m++), r[c * 2 + 1] = h, !(c > n) && (e12.bl_count[h]++, d = 0, c >= s && (d = a[c - s]), p = r[c * 2], e12.opt_len += p * (h + d), o && (e12.static_len += p * (i[c * 2 + 1] + d)));
  if (m !== 0) {
    do {
      for (h = l - 1; e12.bl_count[h] === 0; )
        h--;
      e12.bl_count[h]--, e12.bl_count[h + 1] += 2, e12.bl_count[l]--, m -= 2;
    } while (m > 0);
    for (h = l; h !== 0; h--)
      for (c = e12.bl_count[h]; c !== 0; )
        f = e12.heap[--u], !(f > n) && (r[f * 2 + 1] !== h && (e12.opt_len += (h - r[f * 2 + 1]) * r[f * 2], r[f * 2 + 1] = h), c--);
  }
}
function tK(e12, t, r) {
  var n = new Array(Vc + 1), i = 0, o, a;
  for (o = 1; o <= Vc; o++)
    n[o] = i = i + r[o - 1] << 1;
  for (a = 0; a <= t; a++) {
    var s = e12[a * 2 + 1];
    s !== 0 && (e12[a * 2] = eK(n[s]++, s));
  }
}
function DMe() {
  var e12, t, r, n, i, o = new Array(Vc + 1);
  for (r = 0, n = 0; n < cM - 1; n++)
    for (fM[n] = r, e12 = 0; e12 < 1 << EC[n]; e12++)
      vv[r++] = n;
  for (vv[r - 1] = n, i = 0, n = 0; n < 16; n++)
    for (lT[n] = i, e12 = 0; e12 < 1 << Eb[n]; e12++)
      gv[i++] = n;
  for (i >>= 7; n < Bf; n++)
    for (lT[n] = i << 7, e12 = 0; e12 < 1 << Eb[n] - 7; e12++)
      gv[256 + i++] = n;
  for (t = 0; t <= Vc; t++)
    o[t] = 0;
  for (e12 = 0; e12 <= 143; )
    fs[e12 * 2 + 1] = 8, e12++, o[8]++;
  for (; e12 <= 255; )
    fs[e12 * 2 + 1] = 9, e12++, o[9]++;
  for (; e12 <= 279; )
    fs[e12 * 2 + 1] = 7, e12++, o[7]++;
  for (; e12 <= 287; )
    fs[e12 * 2 + 1] = 8, e12++, o[8]++;
  for (tK(fs, mv + 1, o), e12 = 0; e12 < Bf; e12++)
    yg[e12 * 2 + 1] = 5, yg[e12 * 2] = eK(e12, 5);
  Kq = new hO(fs, EC, dy + 1, mv, Vc), Zq = new hO(yg, Eb, 0, Bf, Vc), Qq = new hO(new Array(0), PMe, 0, uM, IMe);
}
function rK(e12) {
  var t;
  for (t = 0; t < mv; t++)
    e12.dyn_ltree[t * 2] = 0;
  for (t = 0; t < Bf; t++)
    e12.dyn_dtree[t * 2] = 0;
  for (t = 0; t < uM; t++)
    e12.bl_tree[t * 2] = 0;
  e12.dyn_ltree[hM * 2] = 1, e12.opt_len = e12.static_len = 0, e12.last_lit = e12.matches = 0;
}
function nK(e12) {
  e12.bi_valid > 8 ? yv(e12, e12.bi_buf) : e12.bi_valid > 0 && (e12.pending_buf[e12.pending++] = e12.bi_buf), e12.bi_buf = 0, e12.bi_valid = 0;
}
function RMe(e12, t, r, n) {
  nK(e12), n && (yv(e12, r), yv(e12, ~r)), bMe.arraySet(e12.pending_buf, e12.window, t, r, e12.pending), e12.pending += r;
}
function W3(e12, t, r, n) {
  var i = t * 2, o = r * 2;
  return e12[i] < e12[o] || e12[i] === e12[o] && n[t] <= n[r];
}
function dO(e12, t, r) {
  for (var n = e12.heap[r], i = r << 1; i <= e12.heap_len && (i < e12.heap_len && W3(t, e12.heap[i + 1], e12.heap[i], e12.depth) && i++, !W3(t, n, e12.heap[i], e12.depth)); )
    e12.heap[r] = e12.heap[i], r = i, i <<= 1;
  e12.heap[r] = n;
}
function Y3(e12, t, r) {
  var n, i, o = 0, a, s;
  if (e12.last_lit !== 0)
    do
      n = e12.pending_buf[e12.d_buf + o * 2] << 8 | e12.pending_buf[e12.d_buf + o * 2 + 1], i = e12.pending_buf[e12.l_buf + o], o++, n === 0 ? wa(e12, i, t) : (a = vv[i], wa(e12, a + dy + 1, t), s = EC[a], s !== 0 && (i -= fM[a], Fi(e12, i, s)), n--, a = Jq(n), wa(e12, a, r), s = Eb[a], s !== 0 && (n -= lT[a], Fi(e12, n, s)));
    while (o < e12.last_lit);
  wa(e12, hM, t);
}
function SC(e12, t) {
  var r = t.dyn_tree, n = t.stat_desc.static_tree, i = t.stat_desc.has_stree, o = t.stat_desc.elems, a, s, l = -1, u;
  for (e12.heap_len = 0, e12.heap_max = Vq, a = 0; a < o; a++)
    r[a * 2] !== 0 ? (e12.heap[++e12.heap_len] = l = a, e12.depth[a] = 0) : r[a * 2 + 1] = 0;
  for (; e12.heap_len < 2; )
    u = e12.heap[++e12.heap_len] = l < 2 ? ++l : 0, r[u * 2] = 1, e12.depth[u] = 0, e12.opt_len--, i && (e12.static_len -= n[u * 2 + 1]);
  for (t.max_code = l, a = e12.heap_len >> 1; a >= 1; a--)
    dO(e12, r, a);
  u = o;
  do
    a = e12.heap[
      1
      /*SMALLEST*/
    ], e12.heap[
      1
      /*SMALLEST*/
    ] = e12.heap[e12.heap_len--], dO(
      e12,
      r,
      1
      /*SMALLEST*/
    ), s = e12.heap[
      1
      /*SMALLEST*/
    ], e12.heap[--e12.heap_max] = a, e12.heap[--e12.heap_max] = s, r[u * 2] = r[a * 2] + r[s * 2], e12.depth[u] = (e12.depth[a] >= e12.depth[s] ? e12.depth[a] : e12.depth[s]) + 1, r[a * 2 + 1] = r[s * 2 + 1] = u, e12.heap[
      1
      /*SMALLEST*/
    ] = u++, dO(
      e12,
      r,
      1
      /*SMALLEST*/
    );
  while (e12.heap_len >= 2);
  e12.heap[--e12.heap_max] = e12.heap[
    1
    /*SMALLEST*/
  ], kMe(e12, t), tK(r, l, e12.bl_count);
}
function q3(e12, t, r) {
  var n, i = -1, o, a = t[0 * 2 + 1], s = 0, l = 7, u = 4;
  for (a === 0 && (l = 138, u = 3), t[(r + 1) * 2 + 1] = 65535, n = 0; n <= r; n++)
    o = a, a = t[(n + 1) * 2 + 1], !(++s < l && o === a) && (s < u ? e12.bl_tree[o * 2] += s : o !== 0 ? (o !== i && e12.bl_tree[o * 2]++, e12.bl_tree[Xq * 2]++) : s <= 10 ? e12.bl_tree[Wq * 2]++ : e12.bl_tree[Yq * 2]++, s = 0, i = o, a === 0 ? (l = 138, u = 3) : o === a ? (l = 6, u = 3) : (l = 7, u = 4));
}
function K3(e12, t, r) {
  var n, i = -1, o, a = t[0 * 2 + 1], s = 0, l = 7, u = 4;
  for (a === 0 && (l = 138, u = 3), n = 0; n <= r; n++)
    if (o = a, a = t[(n + 1) * 2 + 1], !(++s < l && o === a)) {
      if (s < u)
        do
          wa(e12, o, e12.bl_tree);
        while (--s !== 0);
      else
        o !== 0 ? (o !== i && (wa(e12, o, e12.bl_tree), s--), wa(e12, Xq, e12.bl_tree), Fi(e12, s - 3, 2)) : s <= 10 ? (wa(e12, Wq, e12.bl_tree), Fi(e12, s - 3, 3)) : (wa(e12, Yq, e12.bl_tree), Fi(e12, s - 11, 7));
      s = 0, i = o, a === 0 ? (l = 138, u = 3) : o === a ? (l = 6, u = 3) : (l = 7, u = 4);
    }
}
function NMe(e12) {
  var t;
  for (q3(e12, e12.dyn_ltree, e12.l_desc.max_code), q3(e12, e12.dyn_dtree, e12.d_desc.max_code), SC(e12, e12.bl_desc), t = uM - 1; t >= 3 && e12.bl_tree[qq[t] * 2 + 1] === 0; t--)
    ;
  return e12.opt_len += 3 * (t + 1) + 5 + 5 + 4, t;
}
function MMe(e12, t, r, n) {
  var i;
  for (Fi(e12, t - 257, 5), Fi(e12, r - 1, 5), Fi(e12, n - 4, 4), i = 0; i < n; i++)
    Fi(e12, e12.bl_tree[qq[i] * 2 + 1], 3);
  K3(e12, e12.dyn_ltree, t - 1), K3(e12, e12.dyn_dtree, r - 1);
}
function LMe(e12) {
  var t = 4093624447, r;
  for (r = 0; r <= 31; r++, t >>>= 1)
    if (t & 1 && e12.dyn_ltree[r * 2] !== 0)
      return V3;
  if (e12.dyn_ltree[9 * 2] !== 0 || e12.dyn_ltree[10 * 2] !== 0 || e12.dyn_ltree[13 * 2] !== 0)
    return X3;
  for (r = 32; r < dy; r++)
    if (e12.dyn_ltree[r * 2] !== 0)
      return X3;
  return V3;
}
var Z3 = false;
function BMe(e12) {
  Z3 || (DMe(), Z3 = true), e12.l_desc = new fO(e12.dyn_ltree, Kq), e12.d_desc = new fO(e12.dyn_dtree, Zq), e12.bl_desc = new fO(e12.bl_tree, Qq), e12.bi_buf = 0, e12.bi_valid = 0, rK(e12);
}
function iK(e12, t, r, n) {
  Fi(e12, (SMe << 1) + (n ? 1 : 0), 3), RMe(e12, t, r, true);
}
function FMe(e12) {
  Fi(e12, zq << 1, 3), wa(e12, hM, fs), xMe(e12);
}
function $Me(e12, t, r, n) {
  var i, o, a = 0;
  e12.level > 0 ? (e12.strm.data_type === EMe && (e12.strm.data_type = LMe(e12)), SC(e12, e12.l_desc), SC(e12, e12.d_desc), a = NMe(e12), i = e12.opt_len + 3 + 7 >>> 3, o = e12.static_len + 3 + 7 >>> 3, o <= i && (i = o)) : i = o = r + 5, r + 4 <= i && t !== -1 ? iK(e12, t, r, n) : e12.strategy === TMe || o === i ? (Fi(e12, (zq << 1) + (n ? 1 : 0), 3), Y3(e12, fs, yg)) : (Fi(e12, (wMe << 1) + (n ? 1 : 0), 3), MMe(e12, e12.l_desc.max_code + 1, e12.d_desc.max_code + 1, a + 1), Y3(e12, e12.dyn_ltree, e12.dyn_dtree)), rK(e12), n && nK(e12);
}
function HMe(e12, t, r) {
  return e12.pending_buf[e12.d_buf + e12.last_lit * 2] = t >>> 8 & 255, e12.pending_buf[e12.d_buf + e12.last_lit * 2 + 1] = t & 255, e12.pending_buf[e12.l_buf + e12.last_lit] = r & 255, e12.last_lit++, t === 0 ? e12.dyn_ltree[r * 2]++ : (e12.matches++, t--, e12.dyn_ltree[(vv[r] + dy + 1) * 2]++, e12.dyn_dtree[Jq(t) * 2]++), e12.last_lit === e12.lit_bufsize - 1;
}
_p._tr_init = BMe;
_p._tr_stored_block = iK;
_p._tr_flush_block = $Me;
_p._tr_tally = HMe;
_p._tr_align = FMe;
function UMe(e12, t, r, n) {
  for (var i = e12 & 65535 | 0, o = e12 >>> 16 & 65535 | 0, a = 0; r !== 0; ) {
    a = r > 2e3 ? 2e3 : r, r -= a;
    do
      i = i + t[n++] | 0, o = o + i | 0;
    while (--a);
    i %= 65521, o %= 65521;
  }
  return i | o << 16 | 0;
}
var oK = UMe;
function jMe() {
  for (var e12, t = [], r = 0; r < 256; r++) {
    e12 = r;
    for (var n = 0; n < 8; n++)
      e12 = e12 & 1 ? 3988292384 ^ e12 >>> 1 : e12 >>> 1;
    t[r] = e12;
  }
  return t;
}
var GMe = jMe();
function zMe(e12, t, r, n) {
  var i = GMe, o = n + r;
  e12 ^= -1;
  for (var a = n; a < o; a++)
    e12 = e12 >>> 8 ^ i[(e12 ^ t[a]) & 255];
  return e12 ^ -1;
}
var aK = zMe;
var dM = {
  2: "need dictionary",
  /* Z_NEED_DICT       2  */
  1: "stream end",
  /* Z_STREAM_END      1  */
  0: "",
  /* Z_OK              0  */
  "-1": "file error",
  /* Z_ERRNO         (-1) */
  "-2": "stream error",
  /* Z_STREAM_ERROR  (-2) */
  "-3": "data error",
  /* Z_DATA_ERROR    (-3) */
  "-4": "insufficient memory",
  /* Z_MEM_ERROR     (-4) */
  "-5": "buffer error",
  /* Z_BUF_ERROR     (-5) */
  "-6": "incompatible version"
  /* Z_VERSION_ERROR (-6) */
};
var di = Js;
var Po = _p;
var sK = oK;
var gl = aK;
var VMe = dM;
var ch = 0;
var XMe = 1;
var WMe = 3;
var Gl = 4;
var Q3 = 5;
var Aa = 0;
var J3 = 1;
var Co = -2;
var YMe = -3;
var pO = -5;
var qMe = -1;
var KMe = 1;
var I_ = 2;
var ZMe = 3;
var QMe = 4;
var JMe = 0;
var eLe = 2;
var vS = 8;
var tLe = 9;
var rLe = 15;
var nLe = 8;
var iLe = 29;
var oLe = 256;
var wC = oLe + 1 + iLe;
var aLe = 30;
var sLe = 19;
var lLe = 2 * wC + 1;
var cLe = 15;
var er = 3;
var Bl = 258;
var ea = Bl + er + 1;
var uLe = 32;
var yS = 42;
var AC = 69;
var Sb = 73;
var wb = 91;
var Ab = 103;
var Xc = 113;
var km = 666;
var mn = 1;
var py = 2;
var Ou = 3;
var Tp = 4;
var hLe = 3;
function Fl(e12, t) {
  return e12.msg = VMe[t], t;
}
function eU(e12) {
  return (e12 << 1) - (e12 > 4 ? 9 : 0);
}
function Il(e12) {
  for (var t = e12.length; --t >= 0; )
    e12[t] = 0;
}
function vl(e12) {
  var t = e12.state, r = t.pending;
  r > e12.avail_out && (r = e12.avail_out), r !== 0 && (di.arraySet(e12.output, t.pending_buf, t.pending_out, r, e12.next_out), e12.next_out += r, t.pending_out += r, e12.total_out += r, e12.avail_out -= r, t.pending -= r, t.pending === 0 && (t.pending_out = 0));
}
function Hn(e12, t) {
  Po._tr_flush_block(e12, e12.block_start >= 0 ? e12.block_start : -1, e12.strstart - e12.block_start, t), e12.block_start = e12.strstart, vl(e12.strm);
}
function sr(e12, t) {
  e12.pending_buf[e12.pending++] = t;
}
function sm(e12, t) {
  e12.pending_buf[e12.pending++] = t >>> 8 & 255, e12.pending_buf[e12.pending++] = t & 255;
}
function fLe(e12, t, r, n) {
  var i = e12.avail_in;
  return i > n && (i = n), i === 0 ? 0 : (e12.avail_in -= i, di.arraySet(t, e12.input, e12.next_in, i, r), e12.state.wrap === 1 ? e12.adler = sK(e12.adler, t, i, r) : e12.state.wrap === 2 && (e12.adler = gl(e12.adler, t, i, r)), e12.next_in += i, e12.total_in += i, i);
}
function lK(e12, t) {
  var r = e12.max_chain_length, n = e12.strstart, i, o, a = e12.prev_length, s = e12.nice_match, l = e12.strstart > e12.w_size - ea ? e12.strstart - (e12.w_size - ea) : 0, u = e12.window, c = e12.w_mask, f = e12.prev, h = e12.strstart + Bl, d = u[n + a - 1], p = u[n + a];
  e12.prev_length >= e12.good_match && (r >>= 2), s > e12.lookahead && (s = e12.lookahead);
  do
    if (i = t, !(u[i + a] !== p || u[i + a - 1] !== d || u[i] !== u[n] || u[++i] !== u[n + 1])) {
      n += 2, i++;
      do
        ;
      while (u[++n] === u[++i] && u[++n] === u[++i] && u[++n] === u[++i] && u[++n] === u[++i] && u[++n] === u[++i] && u[++n] === u[++i] && u[++n] === u[++i] && u[++n] === u[++i] && n < h);
      if (o = Bl - (h - n), n = h - Bl, o > a) {
        if (e12.match_start = t, a = o, o >= s)
          break;
        d = u[n + a - 1], p = u[n + a];
      }
    }
  while ((t = f[t & c]) > l && --r !== 0);
  return a <= e12.lookahead ? a : e12.lookahead;
}
function Iu(e12) {
  var t = e12.w_size, r, n, i, o, a;
  do {
    if (o = e12.window_size - e12.lookahead - e12.strstart, e12.strstart >= t + (t - ea)) {
      di.arraySet(e12.window, e12.window, t, t, 0), e12.match_start -= t, e12.strstart -= t, e12.block_start -= t, n = e12.hash_size, r = n;
      do
        i = e12.head[--r], e12.head[r] = i >= t ? i - t : 0;
      while (--n);
      n = t, r = n;
      do
        i = e12.prev[--r], e12.prev[r] = i >= t ? i - t : 0;
      while (--n);
      o += t;
    }
    if (e12.strm.avail_in === 0)
      break;
    if (n = fLe(e12.strm, e12.window, e12.strstart + e12.lookahead, o), e12.lookahead += n, e12.lookahead + e12.insert >= er)
      for (a = e12.strstart - e12.insert, e12.ins_h = e12.window[a], e12.ins_h = (e12.ins_h << e12.hash_shift ^ e12.window[a + 1]) & e12.hash_mask; e12.insert && (e12.ins_h = (e12.ins_h << e12.hash_shift ^ e12.window[a + er - 1]) & e12.hash_mask, e12.prev[a & e12.w_mask] = e12.head[e12.ins_h], e12.head[e12.ins_h] = a, a++, e12.insert--, !(e12.lookahead + e12.insert < er)); )
        ;
  } while (e12.lookahead < ea && e12.strm.avail_in !== 0);
}
function dLe(e12, t) {
  var r = 65535;
  for (r > e12.pending_buf_size - 5 && (r = e12.pending_buf_size - 5); ; ) {
    if (e12.lookahead <= 1) {
      if (Iu(e12), e12.lookahead === 0 && t === ch)
        return mn;
      if (e12.lookahead === 0)
        break;
    }
    e12.strstart += e12.lookahead, e12.lookahead = 0;
    var n = e12.block_start + r;
    if ((e12.strstart === 0 || e12.strstart >= n) && (e12.lookahead = e12.strstart - n, e12.strstart = n, Hn(e12, false), e12.strm.avail_out === 0) || e12.strstart - e12.block_start >= e12.w_size - ea && (Hn(e12, false), e12.strm.avail_out === 0))
      return mn;
  }
  return e12.insert = 0, t === Gl ? (Hn(e12, true), e12.strm.avail_out === 0 ? Ou : Tp) : (e12.strstart > e12.block_start && (Hn(e12, false), e12.strm.avail_out === 0), mn);
}
function mO(e12, t) {
  for (var r, n; ; ) {
    if (e12.lookahead < ea) {
      if (Iu(e12), e12.lookahead < ea && t === ch)
        return mn;
      if (e12.lookahead === 0)
        break;
    }
    if (r = 0, e12.lookahead >= er && (e12.ins_h = (e12.ins_h << e12.hash_shift ^ e12.window[e12.strstart + er - 1]) & e12.hash_mask, r = e12.prev[e12.strstart & e12.w_mask] = e12.head[e12.ins_h], e12.head[e12.ins_h] = e12.strstart), r !== 0 && e12.strstart - r <= e12.w_size - ea && (e12.match_length = lK(e12, r)), e12.match_length >= er)
      if (n = Po._tr_tally(e12, e12.strstart - e12.match_start, e12.match_length - er), e12.lookahead -= e12.match_length, e12.match_length <= e12.max_lazy_match && e12.lookahead >= er) {
        e12.match_length--;
        do
          e12.strstart++, e12.ins_h = (e12.ins_h << e12.hash_shift ^ e12.window[e12.strstart + er - 1]) & e12.hash_mask, r = e12.prev[e12.strstart & e12.w_mask] = e12.head[e12.ins_h], e12.head[e12.ins_h] = e12.strstart;
        while (--e12.match_length !== 0);
        e12.strstart++;
      } else
        e12.strstart += e12.match_length, e12.match_length = 0, e12.ins_h = e12.window[e12.strstart], e12.ins_h = (e12.ins_h << e12.hash_shift ^ e12.window[e12.strstart + 1]) & e12.hash_mask;
    else
      n = Po._tr_tally(e12, 0, e12.window[e12.strstart]), e12.lookahead--, e12.strstart++;
    if (n && (Hn(e12, false), e12.strm.avail_out === 0))
      return mn;
  }
  return e12.insert = e12.strstart < er - 1 ? e12.strstart : er - 1, t === Gl ? (Hn(e12, true), e12.strm.avail_out === 0 ? Ou : Tp) : e12.last_lit && (Hn(e12, false), e12.strm.avail_out === 0) ? mn : py;
}
function Nh(e12, t) {
  for (var r, n, i; ; ) {
    if (e12.lookahead < ea) {
      if (Iu(e12), e12.lookahead < ea && t === ch)
        return mn;
      if (e12.lookahead === 0)
        break;
    }
    if (r = 0, e12.lookahead >= er && (e12.ins_h = (e12.ins_h << e12.hash_shift ^ e12.window[e12.strstart + er - 1]) & e12.hash_mask, r = e12.prev[e12.strstart & e12.w_mask] = e12.head[e12.ins_h], e12.head[e12.ins_h] = e12.strstart), e12.prev_length = e12.match_length, e12.prev_match = e12.match_start, e12.match_length = er - 1, r !== 0 && e12.prev_length < e12.max_lazy_match && e12.strstart - r <= e12.w_size - ea && (e12.match_length = lK(e12, r), e12.match_length <= 5 && (e12.strategy === KMe || e12.match_length === er && e12.strstart - e12.match_start > 4096) && (e12.match_length = er - 1)), e12.prev_length >= er && e12.match_length <= e12.prev_length) {
      i = e12.strstart + e12.lookahead - er, n = Po._tr_tally(e12, e12.strstart - 1 - e12.prev_match, e12.prev_length - er), e12.lookahead -= e12.prev_length - 1, e12.prev_length -= 2;
      do
        ++e12.strstart <= i && (e12.ins_h = (e12.ins_h << e12.hash_shift ^ e12.window[e12.strstart + er - 1]) & e12.hash_mask, r = e12.prev[e12.strstart & e12.w_mask] = e12.head[e12.ins_h], e12.head[e12.ins_h] = e12.strstart);
      while (--e12.prev_length !== 0);
      if (e12.match_available = 0, e12.match_length = er - 1, e12.strstart++, n && (Hn(e12, false), e12.strm.avail_out === 0))
        return mn;
    } else if (e12.match_available) {
      if (n = Po._tr_tally(e12, 0, e12.window[e12.strstart - 1]), n && Hn(e12, false), e12.strstart++, e12.lookahead--, e12.strm.avail_out === 0)
        return mn;
    } else
      e12.match_available = 1, e12.strstart++, e12.lookahead--;
  }
  return e12.match_available && (n = Po._tr_tally(e12, 0, e12.window[e12.strstart - 1]), e12.match_available = 0), e12.insert = e12.strstart < er - 1 ? e12.strstart : er - 1, t === Gl ? (Hn(e12, true), e12.strm.avail_out === 0 ? Ou : Tp) : e12.last_lit && (Hn(e12, false), e12.strm.avail_out === 0) ? mn : py;
}
function pLe(e12, t) {
  for (var r, n, i, o, a = e12.window; ; ) {
    if (e12.lookahead <= Bl) {
      if (Iu(e12), e12.lookahead <= Bl && t === ch)
        return mn;
      if (e12.lookahead === 0)
        break;
    }
    if (e12.match_length = 0, e12.lookahead >= er && e12.strstart > 0 && (i = e12.strstart - 1, n = a[i], n === a[++i] && n === a[++i] && n === a[++i])) {
      o = e12.strstart + Bl;
      do
        ;
      while (n === a[++i] && n === a[++i] && n === a[++i] && n === a[++i] && n === a[++i] && n === a[++i] && n === a[++i] && n === a[++i] && i < o);
      e12.match_length = Bl - (o - i), e12.match_length > e12.lookahead && (e12.match_length = e12.lookahead);
    }
    if (e12.match_length >= er ? (r = Po._tr_tally(e12, 1, e12.match_length - er), e12.lookahead -= e12.match_length, e12.strstart += e12.match_length, e12.match_length = 0) : (r = Po._tr_tally(e12, 0, e12.window[e12.strstart]), e12.lookahead--, e12.strstart++), r && (Hn(e12, false), e12.strm.avail_out === 0))
      return mn;
  }
  return e12.insert = 0, t === Gl ? (Hn(e12, true), e12.strm.avail_out === 0 ? Ou : Tp) : e12.last_lit && (Hn(e12, false), e12.strm.avail_out === 0) ? mn : py;
}
function mLe(e12, t) {
  for (var r; ; ) {
    if (e12.lookahead === 0 && (Iu(e12), e12.lookahead === 0)) {
      if (t === ch)
        return mn;
      break;
    }
    if (e12.match_length = 0, r = Po._tr_tally(e12, 0, e12.window[e12.strstart]), e12.lookahead--, e12.strstart++, r && (Hn(e12, false), e12.strm.avail_out === 0))
      return mn;
  }
  return e12.insert = 0, t === Gl ? (Hn(e12, true), e12.strm.avail_out === 0 ? Ou : Tp) : e12.last_lit && (Hn(e12, false), e12.strm.avail_out === 0) ? mn : py;
}
function ma(e12, t, r, n, i) {
  this.good_length = e12, this.max_lazy = t, this.nice_length = r, this.max_chain = n, this.func = i;
}
var yf;
yf = [
  /*      good lazy nice chain */
  new ma(0, 0, 0, 0, dLe),
  /* 0 store only */
  new ma(4, 4, 8, 4, mO),
  /* 1 max speed, no lazy matches */
  new ma(4, 5, 16, 8, mO),
  /* 2 */
  new ma(4, 6, 32, 32, mO),
  /* 3 */
  new ma(4, 4, 16, 16, Nh),
  /* 4 lazy matches */
  new ma(8, 16, 32, 32, Nh),
  /* 5 */
  new ma(8, 16, 128, 128, Nh),
  /* 6 */
  new ma(8, 32, 128, 256, Nh),
  /* 7 */
  new ma(32, 128, 258, 1024, Nh),
  /* 8 */
  new ma(32, 258, 258, 4096, Nh)
  /* 9 max compression */
];
function gLe(e12) {
  e12.window_size = 2 * e12.w_size, Il(e12.head), e12.max_lazy_match = yf[e12.level].max_lazy, e12.good_match = yf[e12.level].good_length, e12.nice_match = yf[e12.level].nice_length, e12.max_chain_length = yf[e12.level].max_chain, e12.strstart = 0, e12.block_start = 0, e12.lookahead = 0, e12.insert = 0, e12.match_length = e12.prev_length = er - 1, e12.match_available = 0, e12.ins_h = 0;
}
function vLe() {
  this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = vS, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new di.Buf16(lLe * 2), this.dyn_dtree = new di.Buf16((2 * aLe + 1) * 2), this.bl_tree = new di.Buf16((2 * sLe + 1) * 2), Il(this.dyn_ltree), Il(this.dyn_dtree), Il(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new di.Buf16(cLe + 1), this.heap = new di.Buf16(2 * wC + 1), Il(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new di.Buf16(2 * wC + 1), Il(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
}
function cK(e12) {
  var t;
  return !e12 || !e12.state ? Fl(e12, Co) : (e12.total_in = e12.total_out = 0, e12.data_type = eLe, t = e12.state, t.pending = 0, t.pending_out = 0, t.wrap < 0 && (t.wrap = -t.wrap), t.status = t.wrap ? yS : Xc, e12.adler = t.wrap === 2 ? 0 : 1, t.last_flush = ch, Po._tr_init(t), Aa);
}
function uK(e12) {
  var t = cK(e12);
  return t === Aa && gLe(e12.state), t;
}
function yLe(e12, t) {
  return !e12 || !e12.state || e12.state.wrap !== 2 ? Co : (e12.state.gzhead = t, Aa);
}
function hK(e12, t, r, n, i, o) {
  if (!e12)
    return Co;
  var a = 1;
  if (t === qMe && (t = 6), n < 0 ? (a = 0, n = -n) : n > 15 && (a = 2, n -= 16), i < 1 || i > tLe || r !== vS || n < 8 || n > 15 || t < 0 || t > 9 || o < 0 || o > QMe)
    return Fl(e12, Co);
  n === 8 && (n = 9);
  var s = new vLe();
  return e12.state = s, s.strm = e12, s.wrap = a, s.gzhead = null, s.w_bits = n, s.w_size = 1 << s.w_bits, s.w_mask = s.w_size - 1, s.hash_bits = i + 7, s.hash_size = 1 << s.hash_bits, s.hash_mask = s.hash_size - 1, s.hash_shift = ~~((s.hash_bits + er - 1) / er), s.window = new di.Buf8(s.w_size * 2), s.head = new di.Buf16(s.hash_size), s.prev = new di.Buf16(s.w_size), s.lit_bufsize = 1 << i + 6, s.pending_buf_size = s.lit_bufsize * 4, s.pending_buf = new di.Buf8(s.pending_buf_size), s.d_buf = 1 * s.lit_bufsize, s.l_buf = (1 + 2) * s.lit_bufsize, s.level = t, s.strategy = o, s.method = r, uK(e12);
}
function _Le(e12, t) {
  return hK(e12, t, vS, rLe, nLe, JMe);
}
function bLe(e12, t) {
  var r, n, i, o;
  if (!e12 || !e12.state || t > Q3 || t < 0)
    return e12 ? Fl(e12, Co) : Co;
  if (n = e12.state, !e12.output || !e12.input && e12.avail_in !== 0 || n.status === km && t !== Gl)
    return Fl(e12, e12.avail_out === 0 ? pO : Co);
  if (n.strm = e12, r = n.last_flush, n.last_flush = t, n.status === yS)
    if (n.wrap === 2)
      e12.adler = 0, sr(n, 31), sr(n, 139), sr(n, 8), n.gzhead ? (sr(n, (n.gzhead.text ? 1 : 0) + (n.gzhead.hcrc ? 2 : 0) + (n.gzhead.extra ? 4 : 0) + (n.gzhead.name ? 8 : 0) + (n.gzhead.comment ? 16 : 0)), sr(n, n.gzhead.time & 255), sr(n, n.gzhead.time >> 8 & 255), sr(n, n.gzhead.time >> 16 & 255), sr(n, n.gzhead.time >> 24 & 255), sr(n, n.level === 9 ? 2 : n.strategy >= I_ || n.level < 2 ? 4 : 0), sr(n, n.gzhead.os & 255), n.gzhead.extra && n.gzhead.extra.length && (sr(n, n.gzhead.extra.length & 255), sr(n, n.gzhead.extra.length >> 8 & 255)), n.gzhead.hcrc && (e12.adler = gl(e12.adler, n.pending_buf, n.pending, 0)), n.gzindex = 0, n.status = AC) : (sr(n, 0), sr(n, 0), sr(n, 0), sr(n, 0), sr(n, 0), sr(n, n.level === 9 ? 2 : n.strategy >= I_ || n.level < 2 ? 4 : 0), sr(n, hLe), n.status = Xc);
    else {
      var a = vS + (n.w_bits - 8 << 4) << 8, s = -1;
      n.strategy >= I_ || n.level < 2 ? s = 0 : n.level < 6 ? s = 1 : n.level === 6 ? s = 2 : s = 3, a |= s << 6, n.strstart !== 0 && (a |= uLe), a += 31 - a % 31, n.status = Xc, sm(n, a), n.strstart !== 0 && (sm(n, e12.adler >>> 16), sm(n, e12.adler & 65535)), e12.adler = 1;
    }
  if (n.status === AC)
    if (n.gzhead.extra) {
      for (i = n.pending; n.gzindex < (n.gzhead.extra.length & 65535) && !(n.pending === n.pending_buf_size && (n.gzhead.hcrc && n.pending > i && (e12.adler = gl(e12.adler, n.pending_buf, n.pending - i, i)), vl(e12), i = n.pending, n.pending === n.pending_buf_size)); )
        sr(n, n.gzhead.extra[n.gzindex] & 255), n.gzindex++;
      n.gzhead.hcrc && n.pending > i && (e12.adler = gl(e12.adler, n.pending_buf, n.pending - i, i)), n.gzindex === n.gzhead.extra.length && (n.gzindex = 0, n.status = Sb);
    } else
      n.status = Sb;
  if (n.status === Sb)
    if (n.gzhead.name) {
      i = n.pending;
      do {
        if (n.pending === n.pending_buf_size && (n.gzhead.hcrc && n.pending > i && (e12.adler = gl(e12.adler, n.pending_buf, n.pending - i, i)), vl(e12), i = n.pending, n.pending === n.pending_buf_size)) {
          o = 1;
          break;
        }
        n.gzindex < n.gzhead.name.length ? o = n.gzhead.name.charCodeAt(n.gzindex++) & 255 : o = 0, sr(n, o);
      } while (o !== 0);
      n.gzhead.hcrc && n.pending > i && (e12.adler = gl(e12.adler, n.pending_buf, n.pending - i, i)), o === 0 && (n.gzindex = 0, n.status = wb);
    } else
      n.status = wb;
  if (n.status === wb)
    if (n.gzhead.comment) {
      i = n.pending;
      do {
        if (n.pending === n.pending_buf_size && (n.gzhead.hcrc && n.pending > i && (e12.adler = gl(e12.adler, n.pending_buf, n.pending - i, i)), vl(e12), i = n.pending, n.pending === n.pending_buf_size)) {
          o = 1;
          break;
        }
        n.gzindex < n.gzhead.comment.length ? o = n.gzhead.comment.charCodeAt(n.gzindex++) & 255 : o = 0, sr(n, o);
      } while (o !== 0);
      n.gzhead.hcrc && n.pending > i && (e12.adler = gl(e12.adler, n.pending_buf, n.pending - i, i)), o === 0 && (n.status = Ab);
    } else
      n.status = Ab;
  if (n.status === Ab && (n.gzhead.hcrc ? (n.pending + 2 > n.pending_buf_size && vl(e12), n.pending + 2 <= n.pending_buf_size && (sr(n, e12.adler & 255), sr(n, e12.adler >> 8 & 255), e12.adler = 0, n.status = Xc)) : n.status = Xc), n.pending !== 0) {
    if (vl(e12), e12.avail_out === 0)
      return n.last_flush = -1, Aa;
  } else if (e12.avail_in === 0 && eU(t) <= eU(r) && t !== Gl)
    return Fl(e12, pO);
  if (n.status === km && e12.avail_in !== 0)
    return Fl(e12, pO);
  if (e12.avail_in !== 0 || n.lookahead !== 0 || t !== ch && n.status !== km) {
    var l = n.strategy === I_ ? mLe(n, t) : n.strategy === ZMe ? pLe(n, t) : yf[n.level].func(n, t);
    if ((l === Ou || l === Tp) && (n.status = km), l === mn || l === Ou)
      return e12.avail_out === 0 && (n.last_flush = -1), Aa;
    if (l === py && (t === XMe ? Po._tr_align(n) : t !== Q3 && (Po._tr_stored_block(n, 0, 0, false), t === WMe && (Il(n.head), n.lookahead === 0 && (n.strstart = 0, n.block_start = 0, n.insert = 0))), vl(e12), e12.avail_out === 0))
      return n.last_flush = -1, Aa;
  }
  return t !== Gl ? Aa : n.wrap <= 0 ? J3 : (n.wrap === 2 ? (sr(n, e12.adler & 255), sr(n, e12.adler >> 8 & 255), sr(n, e12.adler >> 16 & 255), sr(n, e12.adler >> 24 & 255), sr(n, e12.total_in & 255), sr(n, e12.total_in >> 8 & 255), sr(n, e12.total_in >> 16 & 255), sr(n, e12.total_in >> 24 & 255)) : (sm(n, e12.adler >>> 16), sm(n, e12.adler & 65535)), vl(e12), n.wrap > 0 && (n.wrap = -n.wrap), n.pending !== 0 ? Aa : J3);
}
function TLe(e12) {
  var t;
  return !e12 || !e12.state ? Co : (t = e12.state.status, t !== yS && t !== AC && t !== Sb && t !== wb && t !== Ab && t !== Xc && t !== km ? Fl(e12, Co) : (e12.state = null, t === Xc ? Fl(e12, YMe) : Aa));
}
function ELe(e12, t) {
  var r = t.length, n, i, o, a, s, l, u, c;
  if (!e12 || !e12.state || (n = e12.state, a = n.wrap, a === 2 || a === 1 && n.status !== yS || n.lookahead))
    return Co;
  for (a === 1 && (e12.adler = sK(e12.adler, t, r, 0)), n.wrap = 0, r >= n.w_size && (a === 0 && (Il(n.head), n.strstart = 0, n.block_start = 0, n.insert = 0), c = new di.Buf8(n.w_size), di.arraySet(c, t, r - n.w_size, n.w_size, 0), t = c, r = n.w_size), s = e12.avail_in, l = e12.next_in, u = e12.input, e12.avail_in = r, e12.next_in = 0, e12.input = t, Iu(n); n.lookahead >= er; ) {
    i = n.strstart, o = n.lookahead - (er - 1);
    do
      n.ins_h = (n.ins_h << n.hash_shift ^ n.window[i + er - 1]) & n.hash_mask, n.prev[i & n.w_mask] = n.head[n.ins_h], n.head[n.ins_h] = i, i++;
    while (--o);
    n.strstart = i, n.lookahead = er - 1, Iu(n);
  }
  return n.strstart += n.lookahead, n.block_start = n.strstart, n.insert = n.lookahead, n.lookahead = 0, n.match_length = n.prev_length = er - 1, n.match_available = 0, e12.next_in = l, e12.input = u, e12.avail_in = s, n.wrap = a, Aa;
}
Ja.deflateInit = _Le;
Ja.deflateInit2 = hK;
Ja.deflateReset = uK;
Ja.deflateResetKeep = cK;
Ja.deflateSetHeader = yLe;
Ja.deflate = bLe;
Ja.deflateEnd = TLe;
Ja.deflateSetDictionary = ELe;
Ja.deflateInfo = "pako deflate (from Nodeca project)";
var uh = {};
var _S = Js;
var fK = true;
var dK = true;
try {
  String.fromCharCode.apply(null, [0]);
} catch {
  fK = false;
}
try {
  String.fromCharCode.apply(null, new Uint8Array(1));
} catch {
  dK = false;
}
var _v = new _S.Buf8(256);
for (ll = 0; ll < 256; ll++)
  _v[ll] = ll >= 252 ? 6 : ll >= 248 ? 5 : ll >= 240 ? 4 : ll >= 224 ? 3 : ll >= 192 ? 2 : 1;
var ll;
_v[254] = _v[254] = 1;
uh.string2buf = function(e12) {
  var t, r, n, i, o, a = e12.length, s = 0;
  for (i = 0; i < a; i++)
    r = e12.charCodeAt(i), (r & 64512) === 55296 && i + 1 < a && (n = e12.charCodeAt(i + 1), (n & 64512) === 56320 && (r = 65536 + (r - 55296 << 10) + (n - 56320), i++)), s += r < 128 ? 1 : r < 2048 ? 2 : r < 65536 ? 3 : 4;
  for (t = new _S.Buf8(s), o = 0, i = 0; o < s; i++)
    r = e12.charCodeAt(i), (r & 64512) === 55296 && i + 1 < a && (n = e12.charCodeAt(i + 1), (n & 64512) === 56320 && (r = 65536 + (r - 55296 << 10) + (n - 56320), i++)), r < 128 ? t[o++] = r : r < 2048 ? (t[o++] = 192 | r >>> 6, t[o++] = 128 | r & 63) : r < 65536 ? (t[o++] = 224 | r >>> 12, t[o++] = 128 | r >>> 6 & 63, t[o++] = 128 | r & 63) : (t[o++] = 240 | r >>> 18, t[o++] = 128 | r >>> 12 & 63, t[o++] = 128 | r >>> 6 & 63, t[o++] = 128 | r & 63);
  return t;
};
function pK(e12, t) {
  if (t < 65534 && (e12.subarray && dK || !e12.subarray && fK))
    return String.fromCharCode.apply(null, _S.shrinkBuf(e12, t));
  for (var r = "", n = 0; n < t; n++)
    r += String.fromCharCode(e12[n]);
  return r;
}
uh.buf2binstring = function(e12) {
  return pK(e12, e12.length);
};
uh.binstring2buf = function(e12) {
  for (var t = new _S.Buf8(e12.length), r = 0, n = t.length; r < n; r++)
    t[r] = e12.charCodeAt(r);
  return t;
};
uh.buf2string = function(e12, t) {
  var r, n, i, o, a = t || e12.length, s = new Array(a * 2);
  for (n = 0, r = 0; r < a; ) {
    if (i = e12[r++], i < 128) {
      s[n++] = i;
      continue;
    }
    if (o = _v[i], o > 4) {
      s[n++] = 65533, r += o - 1;
      continue;
    }
    for (i &= o === 2 ? 31 : o === 3 ? 15 : 7; o > 1 && r < a; )
      i = i << 6 | e12[r++] & 63, o--;
    if (o > 1) {
      s[n++] = 65533;
      continue;
    }
    i < 65536 ? s[n++] = i : (i -= 65536, s[n++] = 55296 | i >> 10 & 1023, s[n++] = 56320 | i & 1023);
  }
  return pK(s, n);
};
uh.utf8border = function(e12, t) {
  var r;
  for (t = t || e12.length, t > e12.length && (t = e12.length), r = t - 1; r >= 0 && (e12[r] & 192) === 128; )
    r--;
  return r < 0 || r === 0 ? t : r + _v[e12[r]] > t ? r : t;
};
function SLe() {
  this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
}
var mK = SLe;
var _g = Ja;
var bg = Js;
var OC = uh;
var IC = dM;
var wLe = mK;
var gK = Object.prototype.toString;
var ALe = 0;
var gO = 4;
var Ff = 0;
var tU = 1;
var rU = 2;
var OLe = -1;
var ILe = 0;
var PLe = 8;
function Pu(e12) {
  if (!(this instanceof Pu))
    return new Pu(e12);
  this.options = bg.assign({
    level: OLe,
    method: PLe,
    chunkSize: 16384,
    windowBits: 15,
    memLevel: 8,
    strategy: ILe,
    to: ""
  }, e12 || {});
  var t = this.options;
  t.raw && t.windowBits > 0 ? t.windowBits = -t.windowBits : t.gzip && t.windowBits > 0 && t.windowBits < 16 && (t.windowBits += 16), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new wLe(), this.strm.avail_out = 0;
  var r = _g.deflateInit2(this.strm, t.level, t.method, t.windowBits, t.memLevel, t.strategy);
  if (r !== Ff)
    throw new Error(IC[r]);
  if (t.header && _g.deflateSetHeader(this.strm, t.header), t.dictionary) {
    var n;
    if (typeof t.dictionary == "string" ? n = OC.string2buf(t.dictionary) : gK.call(t.dictionary) === "[object ArrayBuffer]" ? n = new Uint8Array(t.dictionary) : n = t.dictionary, r = _g.deflateSetDictionary(this.strm, n), r !== Ff)
      throw new Error(IC[r]);
    this._dict_set = true;
  }
}
Pu.prototype.push = function(e12, t) {
  var r = this.strm, n = this.options.chunkSize, i, o;
  if (this.ended)
    return false;
  o = t === ~~t ? t : t === true ? gO : ALe, typeof e12 == "string" ? r.input = OC.string2buf(e12) : gK.call(e12) === "[object ArrayBuffer]" ? r.input = new Uint8Array(e12) : r.input = e12, r.next_in = 0, r.avail_in = r.input.length;
  do {
    if (r.avail_out === 0 && (r.output = new bg.Buf8(n), r.next_out = 0, r.avail_out = n), i = _g.deflate(r, o), i !== tU && i !== Ff)
      return this.onEnd(i), this.ended = true, false;
    (r.avail_out === 0 || r.avail_in === 0 && (o === gO || o === rU)) && (this.options.to === "string" ? this.onData(OC.buf2binstring(bg.shrinkBuf(r.output, r.next_out))) : this.onData(bg.shrinkBuf(r.output, r.next_out)));
  } while ((r.avail_in > 0 || r.avail_out === 0) && i !== tU);
  return o === gO ? (i = _g.deflateEnd(this.strm), this.onEnd(i), this.ended = true, i === Ff) : (o === rU && (this.onEnd(Ff), r.avail_out = 0), true);
};
Pu.prototype.onData = function(e12) {
  this.chunks.push(e12);
};
Pu.prototype.onEnd = function(e12) {
  e12 === Ff && (this.options.to === "string" ? this.result = this.chunks.join("") : this.result = bg.flattenChunks(this.chunks)), this.chunks = [], this.err = e12, this.msg = this.strm.msg;
};
function pM(e12, t) {
  var r = new Pu(t);
  if (r.push(e12, true), r.err)
    throw r.msg || IC[r.err];
  return r.result;
}
function CLe(e12, t) {
  return t = t || {}, t.raw = true, pM(e12, t);
}
function xLe(e12, t) {
  return t = t || {}, t.gzip = true, pM(e12, t);
}
fy.Deflate = Pu;
fy.deflate = pM;
fy.deflateRaw = CLe;
fy.gzip = xLe;
var my = {};
var ha = {};
var P_ = 30;
var kLe = 12;
var DLe = function(t, r) {
  var n, i, o, a, s, l, u, c, f, h, d, p, m, g, v, _, y, b, T, E, P, A, I, x, S;
  n = t.state, i = t.next_in, x = t.input, o = i + (t.avail_in - 5), a = t.next_out, S = t.output, s = a - (r - t.avail_out), l = a + (t.avail_out - 257), u = n.dmax, c = n.wsize, f = n.whave, h = n.wnext, d = n.window, p = n.hold, m = n.bits, g = n.lencode, v = n.distcode, _ = (1 << n.lenbits) - 1, y = (1 << n.distbits) - 1;
  e:
    do {
      m < 15 && (p += x[i++] << m, m += 8, p += x[i++] << m, m += 8), b = g[p & _];
      t:
        for (; ; ) {
          if (T = b >>> 24, p >>>= T, m -= T, T = b >>> 16 & 255, T === 0)
            S[a++] = b & 65535;
          else if (T & 16) {
            E = b & 65535, T &= 15, T && (m < T && (p += x[i++] << m, m += 8), E += p & (1 << T) - 1, p >>>= T, m -= T), m < 15 && (p += x[i++] << m, m += 8, p += x[i++] << m, m += 8), b = v[p & y];
            r:
              for (; ; ) {
                if (T = b >>> 24, p >>>= T, m -= T, T = b >>> 16 & 255, T & 16) {
                  if (P = b & 65535, T &= 15, m < T && (p += x[i++] << m, m += 8, m < T && (p += x[i++] << m, m += 8)), P += p & (1 << T) - 1, P > u) {
                    t.msg = "invalid distance too far back", n.mode = P_;
                    break e;
                  }
                  if (p >>>= T, m -= T, T = a - s, P > T) {
                    if (T = P - T, T > f && n.sane) {
                      t.msg = "invalid distance too far back", n.mode = P_;
                      break e;
                    }
                    if (A = 0, I = d, h === 0) {
                      if (A += c - T, T < E) {
                        E -= T;
                        do
                          S[a++] = d[A++];
                        while (--T);
                        A = a - P, I = S;
                      }
                    } else if (h < T) {
                      if (A += c + h - T, T -= h, T < E) {
                        E -= T;
                        do
                          S[a++] = d[A++];
                        while (--T);
                        if (A = 0, h < E) {
                          T = h, E -= T;
                          do
                            S[a++] = d[A++];
                          while (--T);
                          A = a - P, I = S;
                        }
                      }
                    } else if (A += h - T, T < E) {
                      E -= T;
                      do
                        S[a++] = d[A++];
                      while (--T);
                      A = a - P, I = S;
                    }
                    for (; E > 2; )
                      S[a++] = I[A++], S[a++] = I[A++], S[a++] = I[A++], E -= 3;
                    E && (S[a++] = I[A++], E > 1 && (S[a++] = I[A++]));
                  } else {
                    A = a - P;
                    do
                      S[a++] = S[A++], S[a++] = S[A++], S[a++] = S[A++], E -= 3;
                    while (E > 2);
                    E && (S[a++] = S[A++], E > 1 && (S[a++] = S[A++]));
                  }
                } else if (T & 64) {
                  t.msg = "invalid distance code", n.mode = P_;
                  break e;
                } else {
                  b = v[(b & 65535) + (p & (1 << T) - 1)];
                  continue r;
                }
                break;
              }
          } else if (T & 64)
            if (T & 32) {
              n.mode = kLe;
              break e;
            } else {
              t.msg = "invalid literal/length code", n.mode = P_;
              break e;
            }
          else {
            b = g[(b & 65535) + (p & (1 << T) - 1)];
            continue t;
          }
          break;
        }
    } while (i < o && a < l);
  E = m >> 3, i -= E, m -= E << 3, p &= (1 << m) - 1, t.next_in = i, t.next_out = a, t.avail_in = i < o ? 5 + (o - i) : 5 - (i - o), t.avail_out = a < l ? 257 + (l - a) : 257 - (a - l), n.hold = p, n.bits = m;
};
var nU = Js;
var Mh = 15;
var iU = 852;
var oU = 592;
var aU = 0;
var vO = 1;
var sU = 2;
var RLe = [
  /* Length codes 257..285 base */
  3,
  4,
  5,
  6,
  7,
  8,
  9,
  10,
  11,
  13,
  15,
  17,
  19,
  23,
  27,
  31,
  35,
  43,
  51,
  59,
  67,
  83,
  99,
  115,
  131,
  163,
  195,
  227,
  258,
  0,
  0
];
var NLe = [
  /* Length codes 257..285 extra */
  16,
  16,
  16,
  16,
  16,
  16,
  16,
  16,
  17,
  17,
  17,
  17,
  18,
  18,
  18,
  18,
  19,
  19,
  19,
  19,
  20,
  20,
  20,
  20,
  21,
  21,
  21,
  21,
  16,
  72,
  78
];
var MLe = [
  /* Distance codes 0..29 base */
  1,
  2,
  3,
  4,
  5,
  7,
  9,
  13,
  17,
  25,
  33,
  49,
  65,
  97,
  129,
  193,
  257,
  385,
  513,
  769,
  1025,
  1537,
  2049,
  3073,
  4097,
  6145,
  8193,
  12289,
  16385,
  24577,
  0,
  0
];
var LLe = [
  /* Distance codes 0..29 extra */
  16,
  16,
  16,
  16,
  17,
  17,
  18,
  18,
  19,
  19,
  20,
  20,
  21,
  21,
  22,
  22,
  23,
  23,
  24,
  24,
  25,
  25,
  26,
  26,
  27,
  27,
  28,
  28,
  29,
  29,
  64,
  64
];
var BLe = function(t, r, n, i, o, a, s, l) {
  var u = l.bits, c = 0, f = 0, h = 0, d = 0, p = 0, m = 0, g = 0, v = 0, _ = 0, y = 0, b, T, E, P, A, I = null, x = 0, S, N = new nU.Buf16(Mh + 1), B = new nU.Buf16(Mh + 1), w = null, R = 0, F, $, K;
  for (c = 0; c <= Mh; c++)
    N[c] = 0;
  for (f = 0; f < i; f++)
    N[r[n + f]]++;
  for (p = u, d = Mh; d >= 1 && N[d] === 0; d--)
    ;
  if (p > d && (p = d), d === 0)
    return o[a++] = 1 << 24 | 64 << 16 | 0, o[a++] = 1 << 24 | 64 << 16 | 0, l.bits = 1, 0;
  for (h = 1; h < d && N[h] === 0; h++)
    ;
  for (p < h && (p = h), v = 1, c = 1; c <= Mh; c++)
    if (v <<= 1, v -= N[c], v < 0)
      return -1;
  if (v > 0 && (t === aU || d !== 1))
    return -1;
  for (B[1] = 0, c = 1; c < Mh; c++)
    B[c + 1] = B[c] + N[c];
  for (f = 0; f < i; f++)
    r[n + f] !== 0 && (s[B[r[n + f]]++] = f);
  if (t === aU ? (I = w = s, S = 19) : t === vO ? (I = RLe, x -= 257, w = NLe, R -= 257, S = 256) : (I = MLe, w = LLe, S = -1), y = 0, f = 0, c = h, A = a, m = p, g = 0, E = -1, _ = 1 << p, P = _ - 1, t === vO && _ > iU || t === sU && _ > oU)
    return 1;
  for (; ; ) {
    F = c - g, s[f] < S ? ($ = 0, K = s[f]) : s[f] > S ? ($ = w[R + s[f]], K = I[x + s[f]]) : ($ = 32 + 64, K = 0), b = 1 << c - g, T = 1 << m, h = T;
    do
      T -= b, o[A + (y >> g) + T] = F << 24 | $ << 16 | K | 0;
    while (T !== 0);
    for (b = 1 << c - 1; y & b; )
      b >>= 1;
    if (b !== 0 ? (y &= b - 1, y += b) : y = 0, f++, --N[c] === 0) {
      if (c === d)
        break;
      c = r[n + s[f]];
    }
    if (c > p && (y & P) !== E) {
      for (g === 0 && (g = p), A += h, m = c - g, v = 1 << m; m + g < d && (v -= N[m + g], !(v <= 0)); )
        m++, v <<= 1;
      if (_ += 1 << m, t === vO && _ > iU || t === sU && _ > oU)
        return 1;
      E = y & P, o[E] = p << 24 | m << 16 | A - a | 0;
    }
  }
  return y !== 0 && (o[A + y] = c - g << 24 | 64 << 16 | 0), l.bits = p, 0;
};
var io = Js;
var PC = oK;
var ga = aK;
var FLe = DLe;
var Tg = BLe;
var $Le = 0;
var vK = 1;
var yK = 2;
var lU = 4;
var HLe = 5;
var C_ = 6;
var Cu = 0;
var ULe = 1;
var jLe = 2;
var ko = -2;
var _K = -3;
var bK = -4;
var GLe = -5;
var cU = 8;
var TK = 1;
var uU = 2;
var hU = 3;
var fU = 4;
var dU = 5;
var pU = 6;
var mU = 7;
var gU = 8;
var vU = 9;
var yU = 10;
var cT = 11;
var as = 12;
var yO = 13;
var _U = 14;
var _O = 15;
var bU = 16;
var TU = 17;
var EU = 18;
var SU = 19;
var x_ = 20;
var k_ = 21;
var wU = 22;
var AU = 23;
var OU = 24;
var IU = 25;
var PU = 26;
var bO = 27;
var CU = 28;
var xU = 29;
var Mr = 30;
var EK = 31;
var zLe = 32;
var VLe = 852;
var XLe = 592;
var WLe = 15;
var YLe = WLe;
function kU(e12) {
  return (e12 >>> 24 & 255) + (e12 >>> 8 & 65280) + ((e12 & 65280) << 8) + ((e12 & 255) << 24);
}
function qLe() {
  this.mode = 0, this.last = false, this.wrap = 0, this.havedict = false, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new io.Buf16(320), this.work = new io.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;
}
function SK(e12) {
  var t;
  return !e12 || !e12.state ? ko : (t = e12.state, e12.total_in = e12.total_out = t.total = 0, e12.msg = "", t.wrap && (e12.adler = t.wrap & 1), t.mode = TK, t.last = 0, t.havedict = 0, t.dmax = 32768, t.head = null, t.hold = 0, t.bits = 0, t.lencode = t.lendyn = new io.Buf32(VLe), t.distcode = t.distdyn = new io.Buf32(XLe), t.sane = 1, t.back = -1, Cu);
}
function wK(e12) {
  var t;
  return !e12 || !e12.state ? ko : (t = e12.state, t.wsize = 0, t.whave = 0, t.wnext = 0, SK(e12));
}
function AK(e12, t) {
  var r, n;
  return !e12 || !e12.state || (n = e12.state, t < 0 ? (r = 0, t = -t) : (r = (t >> 4) + 1, t < 48 && (t &= 15)), t && (t < 8 || t > 15)) ? ko : (n.window !== null && n.wbits !== t && (n.window = null), n.wrap = r, n.wbits = t, wK(e12));
}
function OK(e12, t) {
  var r, n;
  return e12 ? (n = new qLe(), e12.state = n, n.window = null, r = AK(e12, t), r !== Cu && (e12.state = null), r) : ko;
}
function KLe(e12) {
  return OK(e12, YLe);
}
var DU = true;
var TO;
var EO;
function ZLe(e12) {
  if (DU) {
    var t;
    for (TO = new io.Buf32(512), EO = new io.Buf32(32), t = 0; t < 144; )
      e12.lens[t++] = 8;
    for (; t < 256; )
      e12.lens[t++] = 9;
    for (; t < 280; )
      e12.lens[t++] = 7;
    for (; t < 288; )
      e12.lens[t++] = 8;
    for (Tg(vK, e12.lens, 0, 288, TO, 0, e12.work, {
      bits: 9
    }), t = 0; t < 32; )
      e12.lens[t++] = 5;
    Tg(yK, e12.lens, 0, 32, EO, 0, e12.work, {
      bits: 5
    }), DU = false;
  }
  e12.lencode = TO, e12.lenbits = 9, e12.distcode = EO, e12.distbits = 5;
}
function IK(e12, t, r, n) {
  var i, o = e12.state;
  return o.window === null && (o.wsize = 1 << o.wbits, o.wnext = 0, o.whave = 0, o.window = new io.Buf8(o.wsize)), n >= o.wsize ? (io.arraySet(o.window, t, r - o.wsize, o.wsize, 0), o.wnext = 0, o.whave = o.wsize) : (i = o.wsize - o.wnext, i > n && (i = n), io.arraySet(o.window, t, r - n, i, o.wnext), n -= i, n ? (io.arraySet(o.window, t, r - n, n, 0), o.wnext = n, o.whave = o.wsize) : (o.wnext += i, o.wnext === o.wsize && (o.wnext = 0), o.whave < o.wsize && (o.whave += i))), 0;
}
function QLe(e12, t) {
  var r, n, i, o, a, s, l, u, c, f, h, d, p, m, g = 0, v, _, y, b, T, E, P, A, I = new io.Buf8(4), x, S, N = (
    /* permutation of code lengths */
    [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]
  );
  if (!e12 || !e12.state || !e12.output || !e12.input && e12.avail_in !== 0)
    return ko;
  r = e12.state, r.mode === as && (r.mode = yO), a = e12.next_out, i = e12.output, l = e12.avail_out, o = e12.next_in, n = e12.input, s = e12.avail_in, u = r.hold, c = r.bits, f = s, h = l, A = Cu;
  e:
    for (; ; )
      switch (r.mode) {
        case TK:
          if (r.wrap === 0) {
            r.mode = yO;
            break;
          }
          for (; c < 16; ) {
            if (s === 0)
              break e;
            s--, u += n[o++] << c, c += 8;
          }
          if (r.wrap & 2 && u === 35615) {
            r.check = 0, I[0] = u & 255, I[1] = u >>> 8 & 255, r.check = ga(r.check, I, 2, 0), u = 0, c = 0, r.mode = uU;
            break;
          }
          if (r.flags = 0, r.head && (r.head.done = false), !(r.wrap & 1) || /* check if zlib header allowed */
          (((u & 255) << 8) + (u >> 8)) % 31) {
            e12.msg = "incorrect header check", r.mode = Mr;
            break;
          }
          if ((u & 15) !== cU) {
            e12.msg = "unknown compression method", r.mode = Mr;
            break;
          }
          if (u >>>= 4, c -= 4, P = (u & 15) + 8, r.wbits === 0)
            r.wbits = P;
          else if (P > r.wbits) {
            e12.msg = "invalid window size", r.mode = Mr;
            break;
          }
          r.dmax = 1 << P, e12.adler = r.check = 1, r.mode = u & 512 ? yU : as, u = 0, c = 0;
          break;
        case uU:
          for (; c < 16; ) {
            if (s === 0)
              break e;
            s--, u += n[o++] << c, c += 8;
          }
          if (r.flags = u, (r.flags & 255) !== cU) {
            e12.msg = "unknown compression method", r.mode = Mr;
            break;
          }
          if (r.flags & 57344) {
            e12.msg = "unknown header flags set", r.mode = Mr;
            break;
          }
          r.head && (r.head.text = u >> 8 & 1), r.flags & 512 && (I[0] = u & 255, I[1] = u >>> 8 & 255, r.check = ga(r.check, I, 2, 0)), u = 0, c = 0, r.mode = hU;
        case hU:
          for (; c < 32; ) {
            if (s === 0)
              break e;
            s--, u += n[o++] << c, c += 8;
          }
          r.head && (r.head.time = u), r.flags & 512 && (I[0] = u & 255, I[1] = u >>> 8 & 255, I[2] = u >>> 16 & 255, I[3] = u >>> 24 & 255, r.check = ga(r.check, I, 4, 0)), u = 0, c = 0, r.mode = fU;
        case fU:
          for (; c < 16; ) {
            if (s === 0)
              break e;
            s--, u += n[o++] << c, c += 8;
          }
          r.head && (r.head.xflags = u & 255, r.head.os = u >> 8), r.flags & 512 && (I[0] = u & 255, I[1] = u >>> 8 & 255, r.check = ga(r.check, I, 2, 0)), u = 0, c = 0, r.mode = dU;
        case dU:
          if (r.flags & 1024) {
            for (; c < 16; ) {
              if (s === 0)
                break e;
              s--, u += n[o++] << c, c += 8;
            }
            r.length = u, r.head && (r.head.extra_len = u), r.flags & 512 && (I[0] = u & 255, I[1] = u >>> 8 & 255, r.check = ga(r.check, I, 2, 0)), u = 0, c = 0;
          } else
            r.head && (r.head.extra = null);
          r.mode = pU;
        case pU:
          if (r.flags & 1024 && (d = r.length, d > s && (d = s), d && (r.head && (P = r.head.extra_len - r.length, r.head.extra || (r.head.extra = new Array(r.head.extra_len)), io.arraySet(
            r.head.extra,
            n,
            o,
            // extra field is limited to 65536 bytes
            // - no need for additional size check
            d,
            /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/
            P
          )), r.flags & 512 && (r.check = ga(r.check, n, d, o)), s -= d, o += d, r.length -= d), r.length))
            break e;
          r.length = 0, r.mode = mU;
        case mU:
          if (r.flags & 2048) {
            if (s === 0)
              break e;
            d = 0;
            do
              P = n[o + d++], r.head && P && r.length < 65536 && (r.head.name += String.fromCharCode(P));
            while (P && d < s);
            if (r.flags & 512 && (r.check = ga(r.check, n, d, o)), s -= d, o += d, P)
              break e;
          } else
            r.head && (r.head.name = null);
          r.length = 0, r.mode = gU;
        case gU:
          if (r.flags & 4096) {
            if (s === 0)
              break e;
            d = 0;
            do
              P = n[o + d++], r.head && P && r.length < 65536 && (r.head.comment += String.fromCharCode(P));
            while (P && d < s);
            if (r.flags & 512 && (r.check = ga(r.check, n, d, o)), s -= d, o += d, P)
              break e;
          } else
            r.head && (r.head.comment = null);
          r.mode = vU;
        case vU:
          if (r.flags & 512) {
            for (; c < 16; ) {
              if (s === 0)
                break e;
              s--, u += n[o++] << c, c += 8;
            }
            if (u !== (r.check & 65535)) {
              e12.msg = "header crc mismatch", r.mode = Mr;
              break;
            }
            u = 0, c = 0;
          }
          r.head && (r.head.hcrc = r.flags >> 9 & 1, r.head.done = true), e12.adler = r.check = 0, r.mode = as;
          break;
        case yU:
          for (; c < 32; ) {
            if (s === 0)
              break e;
            s--, u += n[o++] << c, c += 8;
          }
          e12.adler = r.check = kU(u), u = 0, c = 0, r.mode = cT;
        case cT:
          if (r.havedict === 0)
            return e12.next_out = a, e12.avail_out = l, e12.next_in = o, e12.avail_in = s, r.hold = u, r.bits = c, jLe;
          e12.adler = r.check = 1, r.mode = as;
        case as:
          if (t === HLe || t === C_)
            break e;
        case yO:
          if (r.last) {
            u >>>= c & 7, c -= c & 7, r.mode = bO;
            break;
          }
          for (; c < 3; ) {
            if (s === 0)
              break e;
            s--, u += n[o++] << c, c += 8;
          }
          switch (r.last = u & 1, u >>>= 1, c -= 1, u & 3) {
            case 0:
              r.mode = _U;
              break;
            case 1:
              if (ZLe(r), r.mode = x_, t === C_) {
                u >>>= 2, c -= 2;
                break e;
              }
              break;
            case 2:
              r.mode = TU;
              break;
            case 3:
              e12.msg = "invalid block type", r.mode = Mr;
          }
          u >>>= 2, c -= 2;
          break;
        case _U:
          for (u >>>= c & 7, c -= c & 7; c < 32; ) {
            if (s === 0)
              break e;
            s--, u += n[o++] << c, c += 8;
          }
          if ((u & 65535) !== (u >>> 16 ^ 65535)) {
            e12.msg = "invalid stored block lengths", r.mode = Mr;
            break;
          }
          if (r.length = u & 65535, u = 0, c = 0, r.mode = _O, t === C_)
            break e;
        case _O:
          r.mode = bU;
        case bU:
          if (d = r.length, d) {
            if (d > s && (d = s), d > l && (d = l), d === 0)
              break e;
            io.arraySet(i, n, o, d, a), s -= d, o += d, l -= d, a += d, r.length -= d;
            break;
          }
          r.mode = as;
          break;
        case TU:
          for (; c < 14; ) {
            if (s === 0)
              break e;
            s--, u += n[o++] << c, c += 8;
          }
          if (r.nlen = (u & 31) + 257, u >>>= 5, c -= 5, r.ndist = (u & 31) + 1, u >>>= 5, c -= 5, r.ncode = (u & 15) + 4, u >>>= 4, c -= 4, r.nlen > 286 || r.ndist > 30) {
            e12.msg = "too many length or distance symbols", r.mode = Mr;
            break;
          }
          r.have = 0, r.mode = EU;
        case EU:
          for (; r.have < r.ncode; ) {
            for (; c < 3; ) {
              if (s === 0)
                break e;
              s--, u += n[o++] << c, c += 8;
            }
            r.lens[N[r.have++]] = u & 7, u >>>= 3, c -= 3;
          }
          for (; r.have < 19; )
            r.lens[N[r.have++]] = 0;
          if (r.lencode = r.lendyn, r.lenbits = 7, x = {
            bits: r.lenbits
          }, A = Tg($Le, r.lens, 0, 19, r.lencode, 0, r.work, x), r.lenbits = x.bits, A) {
            e12.msg = "invalid code lengths set", r.mode = Mr;
            break;
          }
          r.have = 0, r.mode = SU;
        case SU:
          for (; r.have < r.nlen + r.ndist; ) {
            for (; g = r.lencode[u & (1 << r.lenbits) - 1], v = g >>> 24, _ = g >>> 16 & 255, y = g & 65535, !(v <= c); ) {
              if (s === 0)
                break e;
              s--, u += n[o++] << c, c += 8;
            }
            if (y < 16)
              u >>>= v, c -= v, r.lens[r.have++] = y;
            else {
              if (y === 16) {
                for (S = v + 2; c < S; ) {
                  if (s === 0)
                    break e;
                  s--, u += n[o++] << c, c += 8;
                }
                if (u >>>= v, c -= v, r.have === 0) {
                  e12.msg = "invalid bit length repeat", r.mode = Mr;
                  break;
                }
                P = r.lens[r.have - 1], d = 3 + (u & 3), u >>>= 2, c -= 2;
              } else if (y === 17) {
                for (S = v + 3; c < S; ) {
                  if (s === 0)
                    break e;
                  s--, u += n[o++] << c, c += 8;
                }
                u >>>= v, c -= v, P = 0, d = 3 + (u & 7), u >>>= 3, c -= 3;
              } else {
                for (S = v + 7; c < S; ) {
                  if (s === 0)
                    break e;
                  s--, u += n[o++] << c, c += 8;
                }
                u >>>= v, c -= v, P = 0, d = 11 + (u & 127), u >>>= 7, c -= 7;
              }
              if (r.have + d > r.nlen + r.ndist) {
                e12.msg = "invalid bit length repeat", r.mode = Mr;
                break;
              }
              for (; d--; )
                r.lens[r.have++] = P;
            }
          }
          if (r.mode === Mr)
            break;
          if (r.lens[256] === 0) {
            e12.msg = "invalid code -- missing end-of-block", r.mode = Mr;
            break;
          }
          if (r.lenbits = 9, x = {
            bits: r.lenbits
          }, A = Tg(vK, r.lens, 0, r.nlen, r.lencode, 0, r.work, x), r.lenbits = x.bits, A) {
            e12.msg = "invalid literal/lengths set", r.mode = Mr;
            break;
          }
          if (r.distbits = 6, r.distcode = r.distdyn, x = {
            bits: r.distbits
          }, A = Tg(yK, r.lens, r.nlen, r.ndist, r.distcode, 0, r.work, x), r.distbits = x.bits, A) {
            e12.msg = "invalid distances set", r.mode = Mr;
            break;
          }
          if (r.mode = x_, t === C_)
            break e;
        case x_:
          r.mode = k_;
        case k_:
          if (s >= 6 && l >= 258) {
            e12.next_out = a, e12.avail_out = l, e12.next_in = o, e12.avail_in = s, r.hold = u, r.bits = c, FLe(e12, h), a = e12.next_out, i = e12.output, l = e12.avail_out, o = e12.next_in, n = e12.input, s = e12.avail_in, u = r.hold, c = r.bits, r.mode === as && (r.back = -1);
            break;
          }
          for (r.back = 0; g = r.lencode[u & (1 << r.lenbits) - 1], v = g >>> 24, _ = g >>> 16 & 255, y = g & 65535, !(v <= c); ) {
            if (s === 0)
              break e;
            s--, u += n[o++] << c, c += 8;
          }
          if (_ && !(_ & 240)) {
            for (b = v, T = _, E = y; g = r.lencode[E + ((u & (1 << b + T) - 1) >> b)], v = g >>> 24, _ = g >>> 16 & 255, y = g & 65535, !(b + v <= c); ) {
              if (s === 0)
                break e;
              s--, u += n[o++] << c, c += 8;
            }
            u >>>= b, c -= b, r.back += b;
          }
          if (u >>>= v, c -= v, r.back += v, r.length = y, _ === 0) {
            r.mode = PU;
            break;
          }
          if (_ & 32) {
            r.back = -1, r.mode = as;
            break;
          }
          if (_ & 64) {
            e12.msg = "invalid literal/length code", r.mode = Mr;
            break;
          }
          r.extra = _ & 15, r.mode = wU;
        case wU:
          if (r.extra) {
            for (S = r.extra; c < S; ) {
              if (s === 0)
                break e;
              s--, u += n[o++] << c, c += 8;
            }
            r.length += u & (1 << r.extra) - 1, u >>>= r.extra, c -= r.extra, r.back += r.extra;
          }
          r.was = r.length, r.mode = AU;
        case AU:
          for (; g = r.distcode[u & (1 << r.distbits) - 1], v = g >>> 24, _ = g >>> 16 & 255, y = g & 65535, !(v <= c); ) {
            if (s === 0)
              break e;
            s--, u += n[o++] << c, c += 8;
          }
          if (!(_ & 240)) {
            for (b = v, T = _, E = y; g = r.distcode[E + ((u & (1 << b + T) - 1) >> b)], v = g >>> 24, _ = g >>> 16 & 255, y = g & 65535, !(b + v <= c); ) {
              if (s === 0)
                break e;
              s--, u += n[o++] << c, c += 8;
            }
            u >>>= b, c -= b, r.back += b;
          }
          if (u >>>= v, c -= v, r.back += v, _ & 64) {
            e12.msg = "invalid distance code", r.mode = Mr;
            break;
          }
          r.offset = y, r.extra = _ & 15, r.mode = OU;
        case OU:
          if (r.extra) {
            for (S = r.extra; c < S; ) {
              if (s === 0)
                break e;
              s--, u += n[o++] << c, c += 8;
            }
            r.offset += u & (1 << r.extra) - 1, u >>>= r.extra, c -= r.extra, r.back += r.extra;
          }
          if (r.offset > r.dmax) {
            e12.msg = "invalid distance too far back", r.mode = Mr;
            break;
          }
          r.mode = IU;
        case IU:
          if (l === 0)
            break e;
          if (d = h - l, r.offset > d) {
            if (d = r.offset - d, d > r.whave && r.sane) {
              e12.msg = "invalid distance too far back", r.mode = Mr;
              break;
            }
            d > r.wnext ? (d -= r.wnext, p = r.wsize - d) : p = r.wnext - d, d > r.length && (d = r.length), m = r.window;
          } else
            m = i, p = a - r.offset, d = r.length;
          d > l && (d = l), l -= d, r.length -= d;
          do
            i[a++] = m[p++];
          while (--d);
          r.length === 0 && (r.mode = k_);
          break;
        case PU:
          if (l === 0)
            break e;
          i[a++] = r.length, l--, r.mode = k_;
          break;
        case bO:
          if (r.wrap) {
            for (; c < 32; ) {
              if (s === 0)
                break e;
              s--, u |= n[o++] << c, c += 8;
            }
            if (h -= l, e12.total_out += h, r.total += h, h && (e12.adler = r.check = /*UPDATE(state.check, put - _out, _out);*/
            r.flags ? ga(r.check, i, h, a - h) : PC(r.check, i, h, a - h)), h = l, (r.flags ? u : kU(u)) !== r.check) {
              e12.msg = "incorrect data check", r.mode = Mr;
              break;
            }
            u = 0, c = 0;
          }
          r.mode = CU;
        case CU:
          if (r.wrap && r.flags) {
            for (; c < 32; ) {
              if (s === 0)
                break e;
              s--, u += n[o++] << c, c += 8;
            }
            if (u !== (r.total & 4294967295)) {
              e12.msg = "incorrect length check", r.mode = Mr;
              break;
            }
            u = 0, c = 0;
          }
          r.mode = xU;
        case xU:
          A = ULe;
          break e;
        case Mr:
          A = _K;
          break e;
        case EK:
          return bK;
        case zLe:
        default:
          return ko;
      }
  return e12.next_out = a, e12.avail_out = l, e12.next_in = o, e12.avail_in = s, r.hold = u, r.bits = c, (r.wsize || h !== e12.avail_out && r.mode < Mr && (r.mode < bO || t !== lU)) && IK(e12, e12.output, e12.next_out, h - e12.avail_out), f -= e12.avail_in, h -= e12.avail_out, e12.total_in += f, e12.total_out += h, r.total += h, r.wrap && h && (e12.adler = r.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/
  r.flags ? ga(r.check, i, h, e12.next_out - h) : PC(r.check, i, h, e12.next_out - h)), e12.data_type = r.bits + (r.last ? 64 : 0) + (r.mode === as ? 128 : 0) + (r.mode === x_ || r.mode === _O ? 256 : 0), (f === 0 && h === 0 || t === lU) && A === Cu && (A = GLe), A;
}
function JLe(e12) {
  if (!e12 || !e12.state)
    return ko;
  var t = e12.state;
  return t.window && (t.window = null), e12.state = null, Cu;
}
function e5e(e12, t) {
  var r;
  return !e12 || !e12.state || (r = e12.state, !(r.wrap & 2)) ? ko : (r.head = t, t.done = false, Cu);
}
function t5e(e12, t) {
  var r = t.length, n, i, o;
  return !e12 || !e12.state || (n = e12.state, n.wrap !== 0 && n.mode !== cT) ? ko : n.mode === cT && (i = 1, i = PC(i, t, r, 0), i !== n.check) ? _K : (o = IK(e12, t, r, r), o ? (n.mode = EK, bK) : (n.havedict = 1, Cu));
}
ha.inflateReset = wK;
ha.inflateReset2 = AK;
ha.inflateResetKeep = SK;
ha.inflateInit = KLe;
ha.inflateInit2 = OK;
ha.inflate = QLe;
ha.inflateEnd = JLe;
ha.inflateGetHeader = e5e;
ha.inflateSetDictionary = t5e;
ha.inflateInfo = "pako inflate (from Nodeca project)";
var PK = {
  /* Allowed flush values; see deflate() and inflate() below for details */
  Z_NO_FLUSH: 0,
  Z_PARTIAL_FLUSH: 1,
  Z_SYNC_FLUSH: 2,
  Z_FULL_FLUSH: 3,
  Z_FINISH: 4,
  Z_BLOCK: 5,
  Z_TREES: 6,
  /* Return codes for the compression/decompression functions. Negative values
  * are errors, positive values are used for special but normal events.
  */
  Z_OK: 0,
  Z_STREAM_END: 1,
  Z_NEED_DICT: 2,
  Z_ERRNO: -1,
  Z_STREAM_ERROR: -2,
  Z_DATA_ERROR: -3,
  //Z_MEM_ERROR:     -4,
  Z_BUF_ERROR: -5,
  //Z_VERSION_ERROR: -6,
  /* compression levels */
  Z_NO_COMPRESSION: 0,
  Z_BEST_SPEED: 1,
  Z_BEST_COMPRESSION: 9,
  Z_DEFAULT_COMPRESSION: -1,
  Z_FILTERED: 1,
  Z_HUFFMAN_ONLY: 2,
  Z_RLE: 3,
  Z_FIXED: 4,
  Z_DEFAULT_STRATEGY: 0,
  /* Possible values of the data_type field (though see inflate()) */
  Z_BINARY: 0,
  Z_TEXT: 1,
  //Z_ASCII:                1, // = Z_TEXT (deprecated)
  Z_UNKNOWN: 2,
  /* The deflate compression method */
  Z_DEFLATED: 8
  //Z_NULL:                 null // Use -1 or null inline, depending on var type
};
function r5e() {
  this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = false;
}
var n5e = r5e;
var $f = ha;
var Eg = Js;
var Ob = uh;
var Zr = PK;
var CC = dM;
var i5e = mK;
var o5e = n5e;
var CK = Object.prototype.toString;
function xu(e12) {
  if (!(this instanceof xu))
    return new xu(e12);
  this.options = Eg.assign({
    chunkSize: 16384,
    windowBits: 0,
    to: ""
  }, e12 || {});
  var t = this.options;
  t.raw && t.windowBits >= 0 && t.windowBits < 16 && (t.windowBits = -t.windowBits, t.windowBits === 0 && (t.windowBits = -15)), t.windowBits >= 0 && t.windowBits < 16 && !(e12 && e12.windowBits) && (t.windowBits += 32), t.windowBits > 15 && t.windowBits < 48 && (t.windowBits & 15 || (t.windowBits |= 15)), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new i5e(), this.strm.avail_out = 0;
  var r = $f.inflateInit2(this.strm, t.windowBits);
  if (r !== Zr.Z_OK)
    throw new Error(CC[r]);
  if (this.header = new o5e(), $f.inflateGetHeader(this.strm, this.header), t.dictionary && (typeof t.dictionary == "string" ? t.dictionary = Ob.string2buf(t.dictionary) : CK.call(t.dictionary) === "[object ArrayBuffer]" && (t.dictionary = new Uint8Array(t.dictionary)), t.raw && (r = $f.inflateSetDictionary(this.strm, t.dictionary), r !== Zr.Z_OK)))
    throw new Error(CC[r]);
}
xu.prototype.push = function(e12, t) {
  var r = this.strm, n = this.options.chunkSize, i = this.options.dictionary, o, a, s, l, u, c = false;
  if (this.ended)
    return false;
  a = t === ~~t ? t : t === true ? Zr.Z_FINISH : Zr.Z_NO_FLUSH, typeof e12 == "string" ? r.input = Ob.binstring2buf(e12) : CK.call(e12) === "[object ArrayBuffer]" ? r.input = new Uint8Array(e12) : r.input = e12, r.next_in = 0, r.avail_in = r.input.length;
  do {
    if (r.avail_out === 0 && (r.output = new Eg.Buf8(n), r.next_out = 0, r.avail_out = n), o = $f.inflate(r, Zr.Z_NO_FLUSH), o === Zr.Z_NEED_DICT && i && (o = $f.inflateSetDictionary(this.strm, i)), o === Zr.Z_BUF_ERROR && c === true && (o = Zr.Z_OK, c = false), o !== Zr.Z_STREAM_END && o !== Zr.Z_OK)
      return this.onEnd(o), this.ended = true, false;
    r.next_out && (r.avail_out === 0 || o === Zr.Z_STREAM_END || r.avail_in === 0 && (a === Zr.Z_FINISH || a === Zr.Z_SYNC_FLUSH)) && (this.options.to === "string" ? (s = Ob.utf8border(r.output, r.next_out), l = r.next_out - s, u = Ob.buf2string(r.output, s), r.next_out = l, r.avail_out = n - l, l && Eg.arraySet(r.output, r.output, s, l, 0), this.onData(u)) : this.onData(Eg.shrinkBuf(r.output, r.next_out))), r.avail_in === 0 && r.avail_out === 0 && (c = true);
  } while ((r.avail_in > 0 || r.avail_out === 0) && o !== Zr.Z_STREAM_END);
  return o === Zr.Z_STREAM_END && (a = Zr.Z_FINISH), a === Zr.Z_FINISH ? (o = $f.inflateEnd(this.strm), this.onEnd(o), this.ended = true, o === Zr.Z_OK) : (a === Zr.Z_SYNC_FLUSH && (this.onEnd(Zr.Z_OK), r.avail_out = 0), true);
};
xu.prototype.onData = function(e12) {
  this.chunks.push(e12);
};
xu.prototype.onEnd = function(e12) {
  e12 === Zr.Z_OK && (this.options.to === "string" ? this.result = this.chunks.join("") : this.result = Eg.flattenChunks(this.chunks)), this.chunks = [], this.err = e12, this.msg = this.strm.msg;
};
function mM(e12, t) {
  var r = new xu(t);
  if (r.push(e12, true), r.err)
    throw r.msg || CC[r.err];
  return r.result;
}
function a5e(e12, t) {
  return t = t || {}, t.raw = true, mM(e12, t);
}
my.Inflate = xu;
my.inflate = mM;
my.inflateRaw = a5e;
my.ungzip = mM;
var s5e = Js.assign;
var l5e = fy;
var c5e = my;
var u5e = PK;
var xK = {};
s5e(xK, l5e, c5e, u5e);
var h5e = xK;
var f5e = Ui(h5e);
var d5e = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
var p5e = d5e;
function m5e(e12) {
  if (typeof e12 != "string")
    throw new TypeError("input must be a string");
  let t = [], r, n, i = {
    // Contains in order: locus name, sequence length, molecule type (e.g. DNA), genbank division (see 1-18 below), modification date
    // locus definition has changed with time, use accession number for a unique identifier
    LOCUS_TAG: "LOCUS",
    DEFINITION_TAG: "DEFINITION",
    // Accession tag
    // Example: Z78533
    ACCESSION_TAG: "ACCESSION",
    // The version tag contains 2 informations
    // The accession number with a revision
    // The GI (GenInfo Identifier), a ncbi sequential number
    // Example: Z78533.1  GI:2765658
    // Unicity garanteed with respect to sequence. If 1 nucleotide changes, the version is different.
    VERSION_TAG: "VERSION",
    KEYWORDS_TAG: "KEYWORDS",
    // SEGMENT_TAG:"SEGMENT"
    // Source is free text
    SOURCE_TAG: "SOURCE",
    ORGANISM_TAG: "ORGANISM",
    REFERENCE_TAG: "REFERENCE",
    AUTHORS_TAG: "AUTHORS",
    CONSORTIUM_TAG: "CONSRTM",
    TITLE_TAG: "TITLE",
    // Can be multiple journal tags
    JOURNAL_TAG: "JOURNAL",
    PUBMED_TAG: "PUBMED",
    REMARK_TAG: "REMARK",
    FEATURES_TAG: "FEATURES",
    BASE_COUNT_TAG: "BASE COUNT",
    // CONTIG_TAG: "CONTIG"
    ORIGIN_TAG: "ORIGIN",
    END_SEQUENCE_TAG: "//"
  }, o = e12.split(/\r?\n/), a, s, l, u, c, f = false;
  for (let w of o) {
    if (w === null)
      break;
    let R = A(w), F = x(w), $ = N(w), K = S(w);
    if (R === i.END_SEQUENCE_TAG || K ? (a = R, s = null) : $ && (s = R), !(w.trim() === "" || R === ";")) {
      if (!f && a !== i.LOCUS_TAG)
        break;
      switch (a) {
        case i.LOCUS_TAG:
          f = true, g(w);
          break;
        case i.FEATURES_TAG:
          y(w, R, F);
          break;
        case i.ORIGIN_TAG:
          m(w, R);
          break;
        case i.DEFINITION_TAG:
        case i.ACCESSION_TAG:
        case i.VERSION_TAG:
        case i.KEYWORDS_TAG:
          I(a, w, a.toLowerCase());
          break;
        case i.SOURCE_TAG:
          s === i.ORGANISM_TAG ? I(s, w, "organism") : I(R, w, "source");
          break;
        case i.REFERENCE_TAG:
          if (R === i.REFERENCE_TAG) {
            const se = r.references || [];
            r.references = se, se.push({});
          }
          _(w, s);
          break;
        case i.END_SEQUENCE_TAG:
          h();
          break;
      }
    }
  }
  return t[t.length - 1] !== r && h(), t;
  function h() {
    p(), t.push(r);
  }
  function d() {
    return r.features[r.features.length - 1];
  }
  function p() {
    if (r && r.features)
      for (let w = 0; w < r.features.length; w++)
        r.features[w] = B(r.features[w]);
  }
  function m(w, R) {
    if (R !== i.ORIGIN_TAG) {
      let F = w.replace(/[\s]*[0-9]*/g, "");
      r.sequence += F;
    }
  }
  function g(w) {
    r = {
      features: [],
      name: "Untitled sequence",
      sequence: "",
      references: []
    }, w = v(i.LOCUS_TAG, w);
    const R = w.match(/^([^\s]+)\s+(\d+)\s+bp\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*([^\s]+)?$/);
    let F = R[1], $ = +R[2], K = R[3], se = R[4] === "circular";
    const J = r;
    let me = "";
    R[6] ? (J.genbankDivision = R[5], me = R[6]) : me = R[5], J.circular = se, J.moleculeType = K;
    const ae = me.match(/^(\d{2})-(.{3})-(\d{4})$/), Y = /* @__PURE__ */ new Date();
    Y.setFullYear(+ae[3]), Y.setUTCMonth(p5e.indexOf(ae[2].toUpperCase())), Y.setDate(+ae[1]), Y.setUTCHours(12), Y.setMinutes(0), Y.setSeconds(0), Y.setMilliseconds(0), J.date = Y.toISOString(), J.name = F, J.size = $;
  }
  function v(w, R) {
    return R = R.replace(/^\s*/, ""), R.indexOf(w) === 0 && (R = R.replace(w, "")), R.trim();
  }
  function _(w, R) {
    const F = r.references;
    let $ = F[F.length - 1];
    R ? I(R, w, R.toLowerCase(), $) : I(i.REFERENCE_TAG, w, "description", $);
  }
  function y(w, R, F) {
    let $;
    if (R === i.FEATURES_TAG) {
      u = true;
      return;
    }
    if (u && (l = kK(w), u = false), g5e(w, l))
      c ? (E(w.trim()), c = true) : (n && (n[n.length - 1] += w.trim().replace(/"/g, "")), c = false);
    else if (T(w))
      d() && (P(w), c = false);
    else {
      F.match(/complement/g) ? $ = -1 : $ = 1, b();
      let K = d();
      K.type = R, K.strand = $, E(F), c = true;
    }
  }
  function b() {
    r.features.push({
      notes: {}
    });
  }
  function T(w) {
    let R = false;
    return (w.trim().charAt(0).match(/\//) || w.match(/^[\s]*\/[\w]+=[\S]+/)) && (R = true), R;
  }
  function E(w) {
    w = w.trim();
    let R = [];
    w.replace(/(\d+)/g, function($, K) {
      R.push(K);
    });
    let F = d();
    F.start = +R[0], F.end = R[1] === void 0 ? +R[0] : +R[1];
  }
  function P(w) {
    let R, F;
    R = w.trim(), R = R.replace(/^\/|"$/g, ""), F = R.split(/="|=/);
    let $ = F[1];
    $ && ($ = $.replace(/\\/g, " "), w.match(/="/g) ? $ = $.replace(/".*/g, "") : $.match(/^\d+$/g) && ($ = +$));
    let K = F[0], se = d().notes;
    se[K] ? se[K].push($) : se[K] = [$], n = se[K];
  }
  function A(w) {
    let R;
    return w = w.trim(), R = w.split(/[\s]+/), R[0];
  }
  function I(w, R, F, $) {
    $ = $ || r;
    let K = v(w, R);
    $[F] = $[F] ? `${$[F]} ` : "", $[F] += K;
  }
  function x(w) {
    let R;
    return w.indexOf("=") < 0 ? (w = w.replace(/^[\s]*[\S]+[\s]+|[\s]+$/, ""), w = w.trim(), w) : (R = w.split(/=/), R[1]);
  }
  function S(w) {
    let R = false;
    return w.substr(0, 10).match(/^[\S]+/) && (R = true), R;
  }
  function N(w) {
    let R = false;
    return w.substr(0, 10).match(/^[\s]+[\S]+/) && (R = true), R;
  }
  function B(w) {
    return w.notes.label ? w.name = w.notes.label[0] : w.notes.gene ? w.name = w.notes.gene[0] : w.notes.ApEinfo_label ? w.name = w.notes.ApEinfo_label[0] : w.notes.name ? w.name = w.notes.name[0] : w.notes.organism ? w.name = w.notes.organism[0] : w.notes.locus_tag ? w.name = w.notes.locus_tag[0] : w.notes.note ? w.name = w.notes.note[0] : w.name = "Untitled Feature", w.name = typeof w.name == "string" ? w.name : String(w.name), w;
  }
}
function g5e(e12, t) {
  let r = kK(e12);
  return !(t === r || e12.trim().charAt(0).match(/\//));
}
function kK(e12) {
  let t = /^\s*/.exec(e12);
  return t !== null ? t[0].length : 0;
}
var v5e = m5e;
var y5e = Ui(v5e);
function _5e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function RU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, T5e(n.key), n);
  }
}
function b5e(e12, t, r) {
  return t && RU(e12.prototype, t), r && RU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function T5e(e12) {
  var t = E5e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function E5e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function NU(e12, t, r) {
  const n = [];
  if (!e12.length)
    return [];
  let o = e12[0].start, a = e12[0].end;
  for (let s = 1; s < e12.length; s++)
    e12[s].start < a + 5 * 1 / t ? a = Math.max(a, e12[s].end) : (n.push({
      type: "filler",
      start: o,
      end: a,
      strand: r
    }), o = e12[s].start, a = e12[s].end);
  return n.push({
    start: o,
    end: a,
    type: "filler",
    strand: r
  }), n;
}
function S5e(e12) {
  for (let t = e12.length - 1; t > 0; t--) {
    const r = Math.floor(Math.random() * (t + 1)), n = e12[t];
    e12[t] = e12[r], e12[r] = n;
  }
  return e12;
}
function w5e(e12) {
  return e12.type === "filler";
}
function A5e(e12) {
  const t = e12.end - e12.start, r = e12.strand === 1 ? "+" : "-", n = Gt.nice();
  return w5e(e12) ? {
    xStart: e12.start,
    xEnd: e12.end,
    strand: e12.strand,
    fields: [],
    type: "filler",
    uid: n
  } : {
    xStart: e12.start,
    xEnd: e12.end,
    strand: r,
    chrOffset: 0,
    importance: e12.end - e12.start,
    uid: n,
    type: e12.type,
    fields: ["chrom", e12.start, e12.end, e12.name, t, r, "", "", e12.type, e12.name, e12.start.toString(), e12.end.toString(), e12.start.toString(), e12.end.toString()]
  };
}
function O5e(e12) {
  const t = y5e(e12), r = S5e(t[0].features.filter((n) => n.type !== "source").sort((n, i) => n.start - i.start));
  return {
    json: t,
    features: r
  };
}
async function I5e(e12, {
  gzipped: t
}) {
  if (!t)
    return e12.text();
  const r = await e12.arrayBuffer();
  return f5e.inflate(r, {
    to: "string"
  });
}
var DK = function() {
  function e12(t) {
    _5e(this, e12), this.dataConfig = t, this.trackUid = Gt.nice(), this.errorTxt = "";
    let r;
    if (t.url) {
      const n = t.url.slice(t.url.length - 3);
      r = fetch(t.url, {
        mode: "cors",
        redirect: "follow",
        method: "GET"
      }).then((i) => I5e(i, {
        gzipped: n === ".gz"
      }));
    } else if (t.text)
      r = Promise.resolve(t.text);
    else
      throw new Error("No data or URL specified");
    this.gbDataPromise = r.then((n) => O5e(n));
  }
  return b5e(e12, [{
    key: "tilesetInfo",
    value: function(r) {
      return this.tilesetInfoLoading = true, this.gbDataPromise.then((n) => {
        this.tilesetInfoLoading = false;
        const i = 1024, o = {
          name: `genbank-${this.trackUid}`,
          tile_size: i,
          max_zoom: Math.ceil(Math.log(n.json[0].size / i) / Math.log(2)),
          max_width: n.json[0].size,
          min_pos: [0],
          max_pos: [n.json[0].size]
        };
        return r && r(o), o;
      }).catch((n) => {
        this.tilesetInfoLoading = false, r && r({
          error: `Error parsing genbank: ${n}`
        });
      });
    }
    /**
     * @param {(tiles: Record<string, GenbankTile>) => void} receivedTiles
     * @param {string[]} tileIds
     * @returns {Promise<Record<string, GenbankTile>>}
     */
  }, {
    key: "fetchTilesDebounced",
    value: async function(r, n) {
      const i = {}, o = [], a = [];
      for (const l of n) {
        const u = l.split("."), c = parseInt(u[0], 10), f = parseInt(u[1], 10);
        if (Number.isNaN(f) || Number.isNaN(c)) {
          console.warn("Invalid tile zoom or position:", c, f);
          continue;
        }
        o.push(l), a.push(this.tile(c, f));
      }
      const s = await Promise.all(a);
      for (let l = 0; l < s.length; l++) {
        const u = o[l];
        i[u] = s[l], i[u].tilePositionId = u;
      }
      return r(i), i;
    }
    /**
     * @param {number} z
     * @param {number} x
     * @returns {Promise<GeneAnnotation[]>}
     */
  }, {
    key: "tile",
    value: async function(r, n) {
      const [i, o] = await Promise.all([this.tilesetInfo(), this.gbDataPromise]);
      if (!i)
        throw new Error("No tileset info");
      const a = +i.max_width / 2 ** +r, s = i.min_pos[0] + n * a, l = i.min_pos[0] + (n + 1) * a, u = o.features.filter((m) => m.end > s && m.start < l), c = 1024 / 2 ** (i.max_zoom - r), f = NU(u.filter((m) => m.strand === 1), c, "+"), h = NU(u.filter((m) => m.strand !== 1), c, "-"), d = [], p = 20;
      for (let m = 0; m < o.features.length && !(d.length >= p); m++)
        o.features[m].end >= s && o.features[m].start <= l && d.push(o.features[m]);
      return [d, f, h].flatMap((m) => m.map(A5e));
    }
  }]), e12;
}();
function P5e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function MU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, x5e(n.key), n);
  }
}
function C5e(e12, t, r) {
  return t && MU(e12.prototype, t), r && MU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function x5e(e12) {
  var t = k5e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function k5e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
var RK = function() {
  function e12(t) {
    P5e(this, e12), this.dataConfig = t, this.tilesetInfoData = Object.values(this.dataConfig.tilesetInfo)[0], this.tilesData = {}, this.tilesetInfoLoading = true;
  }
  return C5e(e12, [{
    key: "tilesetInfo",
    value: async function(r) {
      return this.tilesetInfoLoading = false, r(this.tilesetInfoData), this.tilesetInfoData;
    }
    /** We expect there to be a tilesetUid in the provided tilesetInfo
     * and tiles data since tileResponseToData needs it
     *
     * It is also easier for users to paste in request responses for debugging.
     *
     * @param {(tiles: Record<string, LocalTile>) => void} receivedTiles
     * @param {string[]} tileIds
     */
  }, {
    key: "fetchTilesDebounced",
    value: async function(r, n) {
      this.tilesData = {};
      for (const a of Object.keys(this.dataConfig.tiles)) {
        const l = `localtile.${a.split(".").slice(1).join(".")}`;
        this.tilesData[l] = this.dataConfig.tiles[a];
      }
      const i = {}, o = n.map((a) => `localtile.${a}`);
      WR(this.tilesData, "", o);
      for (const a of n)
        i[a] = this.tilesData[`localtile.${a}`];
      return r(i), i;
    }
    /**
     * @param {number} z
     * @param {number} x
     * @returns {void}
     */
  }, {
    key: "tile",
    value: function(r, n) {
    }
  }]), e12;
}();
function D5e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function LU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, N5e(n.key), n);
  }
}
function R5e(e12, t, r) {
  return t && LU(e12.prototype, t), r && LU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function N5e(e12) {
  var t = M5e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function M5e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function L5e(e12) {
  return e12.data === null;
}
var B5e = function() {
  function e12() {
    D5e(this, e12), this.taskList = [], this.taskHandle = null, this.requestIdleCallbackTimeout = 300;
  }
  return R5e(e12, [{
    key: "enqueueTask",
    value: function(r, n, i = null) {
      i === null ? this.taskList.push({
        handler: r,
        data: n
      }) : (this.taskList = this.taskList.filter((o) => o.trackId !== i), this.taskList.push({
        handler: r,
        data: n,
        trackId: i
      })), this.taskHandle || (this.taskHandle = requestIdleCallback(this.runTaskQueue.bind(this), {
        timeout: this.requestIdleCallbackTimeout
      }));
    }
    /**
     * @param {{ timeRemaining(): number, didTimeout: boolean }} deadline
     */
  }, {
    key: "runTaskQueue",
    value: function(r) {
      for (; (r.timeRemaining() > 0 || r.didTimeout) && this.taskList.length; ) {
        const n = this.taskList.shift();
        n && L5e(n) ? n.handler() : n && n.handler(n.data);
      }
      this.taskList.length ? this.taskHandle = requestIdleCallback(this.runTaskQueue.bind(this), {
        timeout: this.requestIdleCallbackTimeout
      }) : this.taskHandle = 0;
    }
  }]), e12;
}();
var F5e = new B5e();
function $5e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function BU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, U5e(n.key), n);
  }
}
function H5e(e12, t, r) {
  return t && BU(e12.prototype, t), r && BU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function U5e(e12) {
  var t = j5e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function j5e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Wc() {
  return typeof Reflect < "u" && Reflect.get ? Wc = Reflect.get.bind() : Wc = function(t, r, n) {
    var i = G5e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Wc.apply(this, arguments);
}
function G5e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Es(e12), e12 !== null); )
    ;
  return e12;
}
function z5e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && xC(e12, t);
}
function xC(e12, t) {
  return xC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, xC(e12, t);
}
function V5e(e12) {
  var t = W5e();
  return function() {
    var n = Es(e12), i;
    if (t) {
      var o = Es(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return X5e(this, i);
  };
}
function X5e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return kC(e12);
}
function kC(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function W5e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Es(e12) {
  return Es = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Es(e12);
}
function Y5e(e12, t, r, n, i) {
  const o = e12 || i, a = 0;
  return o === "log" && t > 0 ? ["log", nc().range([254, 0]).domain([t + a, n + a])] : ["linear", It().range([254, 0]).domain([t, n])];
}
var hh = function(e12) {
  z5e(r, e12);
  var t = V5e(r);
  function r(n, i) {
    var o;
    $5e(this, r), o = t.call(this, n, i);
    const {
      pubSub: a,
      dataConfig: s,
      handleTilesetInfoReceived: l,
      animate: u,
      onValueScaleChanged: c
    } = n;
    return o.renderVersion = 1, o.visibleTiles = /* @__PURE__ */ new Set(), o.visibleTileIds = /* @__PURE__ */ new Set(), o.renderingTiles = /* @__PURE__ */ new Set(), o.fetching = /* @__PURE__ */ new Set(), o.scale = {}, o.fetchedTiles = {}, o.tileGraphics = {}, o.maxZoom = 0, o.medianVisibleValue = null, o.backgroundTaskScheduler = F5e, o.continuousScaling = "requestIdleCallback" in window, o.valueScaleMin = null, o.fixedValueScaleMin = null, o.valueScaleMax = null, o.fixedValueScaleMax = null, o.listeners = {}, o.pubSub = a, o.animate = u, o.onValueScaleChanged = c, o.prevValueScale = null, n.dataFetcher ? o.dataFetcher = n.dataFetcher : o.dataFetcher = new gS(s, o.pubSub), o.tilesetInfo = null, o.uuid = Gt.nice(), o.trackNotFoundText = new Ue.PIXI.Text("", {
      fontSize: "12px",
      fontFamily: "Arial",
      fill: "black"
    }), o.pLabel.addChild(o.trackNotFoundText), o.refreshTilesDebounced = e22(o.refreshTiles.bind(kC(o)), k0, k0), o.dataFetcher.tilesetInfo((f, h) => {
      if (f) {
        if (o.tilesetInfo = f, o.dataFetcher.dataConfig.tilesetUid || (o.dataFetcher.dataConfig.tilesetUid = h), o.tilesetUid = o.dataFetcher.dataConfig.tilesetUid, o.server = o.dataFetcher.dataConfig.server || "unknown", o.tilesetInfo && o.tilesetInfo.chromsizes && (o.chromInfo = S1(o.tilesetInfo.chromsizes)), "error" in o.tilesetInfo) {
          console.warn("Error retrieving tilesetInfo:", s, o.tilesetInfo.error), o.tilesetInfo = null, o.setError(o.tilesetInfo.error);
          return;
        }
        o.tilesetInfo.resolutions ? o.maxZoom = o.tilesetInfo.resolutions.length : o.maxZoom = +o.tilesetInfo.max_zoom, o.options && o.options.maxZoom && (o.options.maxZoom >= 0 ? o.maxZoom = Math.min(o.options.maxZoom, o.maxZoom) : console.error("Invalid maxZoom on track:", kC(o))), o.refreshTiles(), l && l(f), o.options || (o.options = {}), o.options.name = o.options.name || f.name, o.checkValueScaleLimits(), o.draw(), o.drawLabel(), o.animate();
      }
    }), o;
  }
  return H5e(r, [{
    key: "setError",
    value: function(i) {
      this.errorTextText = i, this.draw(), this.animate();
    }
  }, {
    key: "setFixedValueScaleMin",
    value: function(i) {
      Number.isNaN(+i) ? this.fixedValueScaleMin = null : this.fixedValueScaleMin = +i;
    }
  }, {
    key: "setFixedValueScaleMax",
    value: function(i) {
      Number.isNaN(+i) ? this.fixedValueScaleMax = null : this.fixedValueScaleMax = +i;
    }
  }, {
    key: "checkValueScaleLimits",
    value: function() {
      this.valueScaleMin = typeof this.options.valueScaleMin < "u" ? +this.options.valueScaleMin : null, this.fixedValueScaleMin !== null && (this.valueScaleMin = this.fixedValueScaleMin), this.valueScaleMax = typeof this.options.valueScaleMax < "u" ? +this.options.valueScaleMax : null, this.fixedValueScaleMax !== null && (this.valueScaleMax = this.fixedValueScaleMax);
    }
    /**
     * Register an event listener for track events. Currently, the only supported
     * event is ``dataChanged``.
     *
     * @param {string} event The event to listen for
     * @param {function} callback The callback to call when the event occurs. The
     *  parameters for the event depend on the event called.
     *
     * @example
     *
     *  trackObj.on('dataChanged', (newData) => {
     *   console.log('newData:', newData)
     *  });
     */
  }, {
    key: "on",
    value: function(i, o) {
      this.listeners[i] || (this.listeners[i] = []), this.listeners[i].push(o);
    }
  }, {
    key: "off",
    value: function(i, o) {
      const a = this.listeners[i].indexOf(o);
      a === -1 || a >= this.listeners[i].length || this.listeners[i].splice(a, 1);
    }
  }, {
    key: "rerender",
    value: function(i) {
      Wc(Es(r.prototype), "rerender", this).call(this, i), this.renderVersion += 1, this.tilesetInfo && (this.checkValueScaleLimits(), this.tilesetInfo.resolutions ? this.maxZoom = this.tilesetInfo.resolutions.length : this.maxZoom = +this.tilesetInfo.max_zoom, this.options && this.options.maxZoom && (this.options.maxZoom >= 0 ? this.maxZoom = Math.min(this.options.maxZoom, this.maxZoom) : console.error("Invalid maxZoom on track:", this)));
    }
    /**
     * Return the set of ids of all tiles which are both visible and fetched.
     */
  }, {
    key: "visibleAndFetchedIds",
    value: function() {
      return Object.keys(this.fetchedTiles).filter((i) => this.visibleTileIds.has(i));
    }
  }, {
    key: "visibleAndFetchedTiles",
    value: function() {
      return this.visibleAndFetchedIds().map((i) => this.fetchedTiles[i]);
    }
    /**
     * Set which tiles are visible right now.
     *
     * @param tiles: A set of tiles which will be considered the currently visible
     * tile positions.
     */
  }, {
    key: "setVisibleTiles",
    value: function(i) {
      this.visibleTiles = i.map((o) => ({
        tileId: this.tileToLocalId(o),
        remoteId: this.tileToRemoteId(o),
        mirrored: o.mirrored
      })), this.visibleTileIds = new Set(this.visibleTiles.map((o) => o.tileId));
    }
  }, {
    key: "removeOldTiles",
    value: function() {
      this.calculateVisibleTiles();
      const o = [...new Set(Object.keys(this.fetchedTiles))].filter((a) => !this.visibleTileIds.has(a));
      this.removeTiles(o);
    }
  }, {
    key: "refreshTiles",
    value: function() {
      if (!this.tilesetInfo)
        return;
      this.calculateVisibleTiles();
      const i = new Set(Object.keys(this.fetchedTiles)), o = [...this.visibleTiles].filter((a) => !this.fetching.has(a.remoteId) && !i.has(a.tileId));
      for (let a = 0; a < o.length; a++)
        this.fetching.add(o[a].remoteId);
      this.removeOldTiles(), this.fetchNewTiles(o);
    }
  }, {
    key: "parentInFetched",
    value: function(i) {
      const o = i.tileData.tilesetUid;
      let a = i.tileData.zoomLevel, s = i.tileData.tilePos;
      for (; a > 0; )
        if (a -= 1, s = s.map((u) => Math.floor(u / 2)), `${o}.${a}.${s.join(".")}` in this.fetchedTiles)
          return true;
      return false;
    }
  }, {
    key: "parentTileId",
    value: function(i) {
      const o = i.tileData.zoomLevel - 1, a = i.tileData.tilePos.map((l) => Math.floor(l / 2));
      return `${i.tileData.tilesetUid}.${o}.${a.join(".")}`;
    }
    /**
     * Remove obsolete tiles
     *
     * @param toRemoveIds: An array of tile ids to remove from the list of fetched tiles.
     */
  }, {
    key: "removeTiles",
    value: function(i) {
      !i.length || !this.areAllVisibleTilesLoaded() || this.renderingTiles.size || (i.forEach((o) => {
        const a = o;
        this.destroyTile(this.fetchedTiles[a]), a in this.tileGraphics && (this.pMain.removeChild(this.tileGraphics[a]), delete this.tileGraphics[a]), delete this.fetchedTiles[a];
      }), this.synchronizeTilesAndGraphics(), this.draw());
    }
  }, {
    key: "zoomed",
    value: function(i, o, a = 1, s = 0, l = 0) {
      this.xScale(i), this.yScale(o), this.refreshTilesDebounced(), this.pMobile.position.x = s, this.pMobile.position.y = this.position[1], this.pMobile.scale.x = a, this.pMobile.scale.y = 1;
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Wc(Es(r.prototype), "setPosition", this).call(this, i);
    }
  }, {
    key: "setDimensions",
    value: function(i) {
      Wc(Es(r.prototype), "setDimensions", this).call(this, i);
    }
    /**
     * Check to see if all the visible tiles are loaded.
     *
     * If they are, remove all other tiles.
     */
  }, {
    key: "areAllVisibleTilesLoaded",
    value: function() {
      const i = new Set(Object.keys(this.fetchedTiles)), o = [...this.visibleTileIds];
      for (let a = 0; a < o.length; a++)
        if (!i.has(o[a]))
          return false;
      return true;
    }
    /**
     * Function is called when all tiles that should be visible have
     * been received.
     */
  }, {
    key: "allTilesLoaded",
    value: function() {
    }
  }, {
    key: "minValue",
    value: function(i) {
      return i ? (this.scale.minValue = i, this) : this.valueScaleMin !== null ? this.valueScaleMin : this.scale.minValue;
    }
  }, {
    key: "maxValue",
    value: function(i) {
      return i ? (this.scale.maxValue = i, this) : this.valueScaleMax !== null ? this.valueScaleMax : this.scale.maxValue;
    }
  }, {
    key: "minRawValue",
    value: function() {
      return this.scale.minRawValue;
    }
  }, {
    key: "maxRawValue",
    value: function() {
      return this.scale.maxRawValue;
    }
  }, {
    key: "initTile",
    value: function() {
      this.scale.minRawValue = this.continuousScaling ? this.minVisibleValue() : this.minVisibleValueInTiles(), this.scale.maxRawValue = this.continuousScaling ? this.maxVisibleValue() : this.maxVisibleValueInTiles(), this.scale.minValue = this.scale.minRawValue, this.scale.maxValue = this.scale.maxRawValue;
    }
  }, {
    key: "updateTile",
    value: function() {
    }
  }, {
    key: "destroyTile",
    value: function() {
    }
  }, {
    key: "addMissingGraphics",
    value: function() {
      const i = Object.keys(this.fetchedTiles);
      this.renderVersion += 1;
      for (let o = 0; o < i.length; o++)
        if (!(i[o] in this.tileGraphics)) {
          const a = new Ue.PIXI.Graphics();
          this.pMain.addChild(a), this.fetchedTiles[i[o]].graphics = a, this.initTile(this.fetchedTiles[i[o]]), this.tileGraphics[i[o]] = a;
        }
    }
    /**
     * Change the graphics for existing tiles
     */
  }, {
    key: "updateExistingGraphics",
    value: function() {
      const i = Object.keys(this.fetchedTiles);
      for (let o = 0; o < i.length; o++) {
        const a = this.fetchedTiles[i[o]];
        this.updateTile(a);
      }
    }
  }, {
    key: "synchronizeTilesAndGraphics",
    value: function() {
      if (this.addMissingGraphics(), this.removeOldTiles(), this.updateExistingGraphics(), this.listeners.dataChanged)
        for (const i of this.listeners.dataChanged)
          i(this.visibleAndFetchedTiles().map((o) => o.tileData));
    }
  }, {
    key: "loadTileData",
    value: function(i, o) {
      let a = this.lruCache.get(i.tileId);
      return a || (a = o(i.data, i.type), this.lruCache.put(i.tileId, a)), a;
    }
  }, {
    key: "fetchNewTiles",
    value: function(i) {
      if (i.length > 0) {
        const o = [...new Set(i.map((a) => a.remoteId))];
        this.dataFetcher.fetchTilesDebounced(this.receivedTiles.bind(this), o);
      }
    }
    /**
     * We've gotten a bunch of tiles from the server in
     * response to a request from fetchTiles.
     */
  }, {
    key: "receivedTiles",
    value: function(i) {
      for (let o = 0; o < this.visibleTiles.length; o++) {
        const {
          tileId: a
        } = this.visibleTiles[o];
        if (i[this.visibleTiles[o].remoteId] && this.visibleTiles[o].remoteId in i) {
          if (a in this.fetchedTiles || (this.fetchedTiles[a] = this.visibleTiles[o]), Array.isArray(i[this.visibleTiles[o].remoteId])) {
            const s = i[this.visibleTiles[o].remoteId];
            this.fetchedTiles[a].tileData = [...s], Object.keys(s).filter((l) => Number.isNaN(+l)).forEach((l) => {
              this.fetchedTiles[a].tileData[l] = s[l];
            });
          } else
            this.fetchedTiles[a].tileData = {
              ...i[this.visibleTiles[o].remoteId]
            };
          this.fetchedTiles[a].tileData.error && console.warn("Error in loaded tile", a, this.fetchedTiles[a].tileData);
        }
      }
      for (const o in i)
        if (i[o]) {
          const a = i[o].tilePositionId;
          this.fetching.has(a) && this.fetching.delete(a);
        }
      this.synchronizeTilesAndGraphics(), this.draw(), this.drawLabel(), this.valueScale && (!this.prevValueScale || JSON.stringify(this.valueScale.domain()) !== JSON.stringify(this.prevValueScale.domain())) && (this.prevValueScale = this.valueScale.copy(), this.onValueScaleChanged && this.onValueScaleChanged()), this.animate(), this.areAllVisibleTilesLoaded() && this.pubSub && this.pubSub.publish("TiledPixiTrack.tilesLoaded", {
        uuid: this.uuid
      });
    }
  }, {
    key: "draw",
    value: function() {
      if (this.delayDrawing)
        return;
      this.tilesetInfo ? this.trackNotFoundText.visible = false : (this.dataFetcher.tilesetInfoLoading ? this.trackNotFoundText.text = "Loading..." : this.trackNotFoundText.text = `Tileset info not found. Server: [${this.server}] tilesetUid: [${this.tilesetUid}]`, [this.trackNotFoundText.x, this.trackNotFoundText.y] = this.position, this.flipText && (this.trackNotFoundText.anchor.x = 1, this.trackNotFoundText.scale.x = -1), this.trackNotFoundText.visible = true), this.pubSub && this.pubSub.publish("TiledPixiTrack.tilesDrawnStart", {
        uuid: this.uuid
      });
      const i = Object.values(this.fetchedTiles).map((o) => o.tileData && o.tileData.error && `${o.tileId}: ${o.tileData.error}`).filter((o) => o);
      i.length ? this.errorTextText = i.join(`
`) : this.errorTextText = "", Wc(Es(r.prototype), "draw", this).call(this), Object.keys(this.fetchedTiles).forEach((o) => {
        this.drawTile(this.fetchedTiles[o]);
      }), this.pubSub && this.pubSub.publish("TiledPixiTrack.tilesDrawnEnd", {
        uuid: this.uuid
      });
    }
    /**
     * Draw a tile on some graphics
     */
  }, {
    key: "drawTile",
    value: function() {
    }
  }, {
    key: "calculateMedianVisibleValue",
    value: function() {
      this.areAllVisibleTilesLoaded() && this.allTilesLoaded();
      let i = this.visibleAndFetchedIds();
      i.length === 0 && (i = Object.keys(this.fetchedTiles));
      const o = [].concat(...i.filter((a) => this.fetchedTiles[a].tileData.dense).map((a) => Array.from(this.fetchedTiles[a].tileData.dense))).filter((a) => a > 0);
      return this.medianVisibleValue = UD(o), this.medianVisibleValue;
    }
  }, {
    key: "allVisibleValues",
    value: function() {
      return [].concat(...this.visibleAndFetchedIds().map((i) => Array.from(this.fetchedTiles[i].tileData.dense)));
    }
    // Should be overwriten by child clases to get the true minimal
    // visible value in the currently viewed area
  }, {
    key: "minVisibleValue",
    value: function(i = false) {
      return this.minVisibleValueInTiles(i);
    }
  }, {
    key: "minVisibleValueInTiles",
    value: function(i = false) {
      let o = this.visibleAndFetchedIds();
      o.length === 0 && (o = Object.keys(this.fetchedTiles));
      let a = Math.min(...o.map((s) => this.fetchedTiles[s].tileData.minNonZero));
      return a === Number.MAX_SAFE_INTEGER && (a = null), i ? a : this.valueScaleMin !== null ? this.valueScaleMin : a;
    }
    // Should be overwriten by child clases to get the true maximal
    // visible value in the currently viewed area
  }, {
    key: "maxVisibleValue",
    value: function(i = false) {
      return this.maxVisibleValueInTiles(i);
    }
  }, {
    key: "maxVisibleValueInTiles",
    value: function(i = false) {
      let o = this.visibleAndFetchedIds();
      o.length === 0 && (o = Object.keys(this.fetchedTiles));
      let a = Math.max(...o.map((s) => this.fetchedTiles[s].tileData.maxNonZero));
      return a === Number.MIN_SAFE_INTEGER && (a = null), i ? a : this.valueScaleMax !== null ? this.valueScaleMax : a;
    }
  }, {
    key: "makeValueScale",
    value: function(i, o, a, s) {
      let l = null, u = 0, c = s;
      (c === null || typeof c > "u") && (c = 6);
      let f = Math.min(this.dimensions[1] - c, c), h = Math.max(this.dimensions[1] - c, c);
      if (this.dimensions[1] - c < c && (f = this.dimensions[1] / 2, h = this.dimensions[1] / 2), this.options.valueScaling === "log")
        u = o, u || (u = i), l = nc().domain([u, a + u]).range([f, h]);
      else if (this.options.valueScaling === "quantile") {
        const d = this.dimensions[1] - c, p = c, m = m0().domain(this.allVisibleValues()).range(yi(d, p, (p - d) / 256));
        return m.ticks = (g) => pu(d, p, g), [m, 0];
      } else if (this.options.valueScaling === "setquantile") {
        const d = this.dimensions[1] - c, p = c, m = new Set(this.allVisibleValues()), g = m0().domain([...m]).range(yi(d, p, (p - d) / 256));
        return g.ticks = (v) => pu(d, p, v), [g, 0];
      } else
        l = It().domain([i, a]).range([h, f]);
      return [l, u];
    }
  }]), r;
}(Oi);
function q5e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function FU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, Z5e(n.key), n);
  }
}
function K5e(e12, t, r) {
  return t && FU(e12.prototype, t), r && FU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function Z5e(e12) {
  var t = Q5e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function Q5e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Qr() {
  return typeof Reflect < "u" && Reflect.get ? Qr = Reflect.get.bind() : Qr = function(t, r, n) {
    var i = J5e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Qr.apply(this, arguments);
}
function J5e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = jr(e12), e12 !== null); )
    ;
  return e12;
}
function eBe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && DC(e12, t);
}
function DC(e12, t) {
  return DC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, DC(e12, t);
}
function tBe(e12) {
  var t = nBe();
  return function() {
    var n = jr(e12), i;
    if (t) {
      var o = jr(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return rBe(this, i);
  };
}
function rBe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Ib(e12);
}
function Ib(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function nBe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function jr(e12) {
  return jr = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, jr(e12);
}
var $U = 200;
var yl = 10;
var Dm = 40;
var ei = 10;
var _l = ei;
var HU = 4;
var Xh = 1;
var bl = 4;
var UU = 5;
var iBe = 256;
var lm = yl + Dm + ei + Xh + _l + bl;
var gy = function(e12) {
  eBe(r, e12);
  var t = tBe(r);
  function r(n, i) {
    var o;
    q5e(this, r);
    const a = {
      ...n
    };
    a.onValueScaleChanged = () => {
      n.onValueScaleChanged(), o.drawColorbar();
    }, o = t.call(this, a, i);
    const {
      pubSub: s,
      animate: l,
      svgElement: u,
      onTrackOptionsChanged: c,
      onMouseMoveZoom: f,
      isShowGlobalMousePosition: h,
      isValueScaleLocked: d
    } = n;
    return o.pubSub = s, o.is2d = true, o.animate = l, o.uid = Gt.nice(), o.scaleBrush = Xv(), o.onTrackOptionsChanged = c, o.isShowGlobalMousePosition = h, o.isValueScaleLocked = d, o.pColorbarArea = new Ue.PIXI.Graphics(), o.pMasked.addChild(o.pColorbarArea), o.pColorbar = new Ue.PIXI.Graphics(), o.pColorbarArea.addChild(o.pColorbar), o.axis = new pS(Ib(o)), o.pColorbarArea.addChild(o.axis.pAxis), o.colorScale = dd, i && i.colorRange && (o.colorScale = Zl(i.colorRange)), o.gBase = Wt(u).append("g"), o.gMain = o.gBase.append("g"), o.gColorscaleBrush = o.gMain.append("g"), o.brushing = false, o.prevOptions = "", o.prevIndUpperLeftTile = "", o.onMouseMoveZoom = f, o.setDataLensSize(11), o.dataLens = new Float32Array(o.dataLensSize ** 2), o.mouseMoveHandlerBound = o.mouseMoveHandler.bind(Ib(o)), o.onMouseMoveZoom && o.pubSubs.push(o.pubSub.subscribe("app.mouseMove", o.mouseMoveHandlerBound)), o.options && o.options.showMousePosition && !o.hideMousePosition && (o.hideMousePosition = _u(Ib(o), o.is2d, o.isShowGlobalMousePosition())), o.prevOptions = JSON.stringify(i), o;
  }
  return K5e(r, [{
    key: "mouseMoveHandler",
    value: function(i) {
      this.isWithin(i.x, i.y) && (this.mouseX = i.x, this.mouseY = i.y, this.mouseMoveZoomHandler());
    }
    /**
     * Mouse move and zoom handler. Is triggered on both events.
     *
     * @param  {Number}  absX  Absolute X coordinate.
     * @param  {Number}  absY  Absolute Y coordinate
     */
  }, {
    key: "mouseMoveZoomHandler",
    value: function(i = this.mouseX, o = this.mouseY) {
      if (typeof i > "u" || typeof o > "u" || !this.areAllVisibleTilesLoaded() || !this.tilesetInfo)
        return;
      const a = i - this.position[0], s = o - this.position[1];
      let l, u;
      try {
        u = this.getVisibleRectangleData(a - this.dataLensPadding, s - this.dataLensPadding, this.dataLensSize, this.dataLensSize), l = u.get(this.dataLensPadding, this.dataLensPadding);
      } catch {
        return;
      }
      const c = this.dataLensSize;
      let f;
      try {
        f = JR(this.limitedValueScale, this.colorScale, this.valueScale.domain()[0]);
      } catch {
        return;
      }
      if (!f)
        return;
      const h = Math.round(this._xScale.invert(a)), d = Math.round(this._yScale.invert(s));
      let p = [h, d], m = [Math.round(this._xScale.invert(a - this.dataLensPadding)), Math.round(this._xScale.invert(a + this.dataLensPadding))], g = [Math.round(this._yScale.invert(s - this.dataLensPadding)), Math.round(this._yScale.invert(s + this.dataLensPadding))];
      this.chromInfo && (p = p.map((v) => pn(v, this.chromInfo).slice(0, 2)), m = m.map((v) => pn(v, this.chromInfo).slice(0, 2)), g = g.map((v) => pn(v, this.chromInfo).slice(0, 2))), this.onMouseMoveZoom({
        trackId: this.id,
        data: l,
        absX: i,
        absY: o,
        relX: a,
        relY: s,
        dataX: h,
        dataY: d,
        orientation: "2d",
        // Specific to 2D matrices
        dataLens: u,
        dim: c,
        toRgb: f,
        center: p,
        xRange: m,
        yRange: g,
        isGenomicCoords: !!this.chromInfo
      });
    }
  }, {
    key: "scheduleRerender",
    value: function() {
      this.backgroundTaskScheduler.enqueueTask(this.handleRerender.bind(this), null, this.uuid);
    }
  }, {
    key: "handleRerender",
    value: function() {
      this.rerender(this.options, true);
    }
    /**
     * Get absolute (i.e., display) tile dimension and position.
     *
     * @param {Number}  zoomLevel  Current zoom level.
     * @param {Array}  tilePos  Tile position.
     * @return {Object}  Object holding the absolute x, y, width, and height.
     */
  }, {
    key: "getAbsTileDim",
    value: function(i, o, a) {
      const {
        tileX: s,
        tileY: l,
        tileWidth: u,
        tileHeight: c
      } = this.getTilePosAndDimensions(i, o), f = {};
      return f.width = this._refXScale(s + u) - this._refXScale(s), f.height = this._refYScale(l + c) - this._refYScale(l), a ? (f.x = this._refXScale(l), f.y = this._refYScale(s)) : (f.x = this._refXScale(s), f.y = this._refYScale(l)), f;
    }
  }, {
    key: "updateValueScale",
    value: function() {
      let i = this.minValue(), o = this.maxValue();
      const a = 1e-6;
      i != null && o !== void 0 && o !== null && Math.abs(i - o) < a && (i = Math.max(a, i - 1e-3), o += 1e-3);
      const [s, l] = Y5e(this.options && this.options.heatmapValueScaling || "log", i, this.medianVisibleValue, o, "log");
      return this.valueScale = l, this.limitedValueScale = this.valueScale.copy(), this.options && typeof this.options.scaleStartPercent < "u" && typeof this.options.scaleEndPercent < "u" && this.limitedValueScale.domain([this.valueScale.domain()[0] + (this.valueScale.domain()[1] - this.valueScale.domain()[0]) * this.options.scaleStartPercent, this.valueScale.domain()[0] + (this.valueScale.domain()[1] - this.valueScale.domain()[0]) * this.options.scaleEndPercent]), [s, l];
    }
  }, {
    key: "rerender",
    value: function(i, o) {
      Qr(jr(r.prototype), "rerender", this).call(this, i, o), this.updateValueScale();
      const a = JSON.stringify(i);
      this.drawColorbar(), !(!o && a === this.prevOptions) && (this.prevOptions = a, this.options = i, Qr(jr(r.prototype), "rerender", this).call(this, i, o), this.calculateVisibleTiles(), i && i.colorRange && (this.colorScale = Zl(i.colorRange)), this.visibleAndFetchedTiles().forEach((s) => this.renderTile(s)), this.hideMousePosition && (this.hideMousePosition(), this.hideMousePosition = void 0), this.options && this.options.showMousePosition && !this.hideMousePosition && (this.hideMousePosition = _u(this, this.is2d, this.isShowGlobalMousePosition())));
    }
  }, {
    key: "drawLabel",
    value: function() {
      this.options.labelPosition === this.options.colorbarPosition ? this.labelXOffset = lm : this.labelXOffset = 0, Qr(jr(r.prototype), "drawLabel", this).call(this);
    }
  }, {
    key: "tileDataToCanvas",
    value: function(i) {
      const o = document.createElement("canvas");
      o.width = this.binsPerTile(), o.height = this.binsPerTile();
      const a = o.getContext("2d");
      a.fillStyle = "transparent", a.fillRect(0, 0, o.width, o.height);
      const s = new ImageData(i, o.width, o.height);
      return a.putImageData(s, 0, 0), o;
    }
  }, {
    key: "exportData",
    value: function() {
      if (this.tilesetInfo) {
        const i = this.getVisibleRectangleData(0, 0, this.dimensions[0], this.dimensions[1]), o = {
          bounds: [this._xScale.domain(), this._yScale.domain()],
          dimensions: i.shape,
          data: KV(i)
        };
        Qm("data.json", JSON.stringify(o));
      }
    }
    /**
     * Position sprite (the rendered tile)
     *
     * @param  {Object}  sprite  PIXI sprite object.
     * @param  {Number}  zoomLevel  Current zoom level.
     * @param  {Array}  tilePos  X,Y position of tile.
     * @param  {Boolean}  mirrored  If `true` tile is mirrored.
     */
  }, {
    key: "setSpriteProperties",
    value: function(i, o, a, s) {
      const l = this.getAbsTileDim(o, a, s);
      i.width = l.width, i.height = l.height, i.x = l.x, i.y = l.y, s && a[0] !== a[1] && (i.rotation = -Math.PI / 2, i.scale.x = Math.abs(i.scale.x) * -1);
    }
  }, {
    key: "refXScale",
    value: function(i) {
      Qr(jr(r.prototype), "refXScale", this).call(this, i), this.draw();
    }
  }, {
    key: "refYScale",
    value: function(i) {
      Qr(jr(r.prototype), "refYScale", this).call(this, i), this.draw();
    }
  }, {
    key: "draw",
    value: function() {
      Qr(jr(r.prototype), "draw", this).call(this);
    }
  }, {
    key: "newBrushOptions",
    value: function(i) {
      const o = JSON.parse(JSON.stringify(this.options)), a = this.valueScale.copy().range([this.colorbarHeight, 0]), s = a.invert(i[0]), u = (a.invert(i[1]) - a.domain()[0]) / // eslint-disable-line operator-linebreak
      (a.domain()[1] - a.domain()[0]), c = (s - a.domain()[0]) / // eslint-disable-line operator-linebreak
      (a.domain()[1] - a.domain()[0]);
      return o.scaleStartPercent = u.toFixed(UU), o.scaleEndPercent = c.toFixed(UU), o;
    }
  }, {
    key: "brushStart",
    value: function() {
      this.brushing = true;
    }
  }, {
    key: "brushMoved",
    value: function(i) {
      if (!i.selection)
        return;
      const o = this.newBrushOptions(i.selection), a = JSON.stringify(o);
      this.gColorscaleBrush.selectAll(".handle--custom").attr("y", (s) => s.type === "n" ? i.selection[0] : i.selection[1] - HU / 2), a !== this.prevOptions && (this.prevOptions = a, this.rerender(o, true), this.onTrackOptionsChanged(o), this.isValueScaleLocked() && this.onValueScaleChanged());
    }
  }, {
    key: "brushEnd",
    value: function() {
      this.brushing = false;
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Qr(jr(r.prototype), "setPosition", this).call(this, i), this.drawColorbar();
    }
  }, {
    key: "setDimensions",
    value: function(i) {
      Qr(jr(r.prototype), "setDimensions", this).call(this, i), this.drawColorbar();
    }
  }, {
    key: "removeColorbar",
    value: function() {
      this.pColorbarArea.visible = false, this.scaleBrush.on(".brush") && this.gColorscaleBrush.call(this.scaleBrush.move, null), this.gColorscaleBrush.on(".brush", null), this.gColorscaleBrush.selectAll("rect").remove();
    }
  }, {
    key: "drawColorbar",
    value: function() {
      if (this.pColorbar.clear(), !this.options || !this.options.colorbarPosition || this.options.colorbarPosition === "hidden") {
        this.removeColorbar();
        return;
      }
      if (this.pColorbarArea.visible = true, !this.valueScale || Number.isNaN(+this.valueScale.domain()[0]) || Number.isNaN(+this.valueScale.domain()[1]))
        return;
      const i = Math.min(this.dimensions[1] / 2, $U);
      if (this.colorbarHeight = i - 2 * ei, this.colorbarHeight < 0) {
        this.removeColorbar();
        return;
      }
      if (this.valueScale.domain()[1] === this.valueScale.domain()[0]) {
        this.removeColorbar();
        return;
      }
      const o = this.valueScale.copy().range([this.colorbarHeight, 0]);
      this.options.colorbarPosition === "topLeft" || this.options.colorbarPosition === "bottomLeft" ? this.scaleBrush.extent([[bl, 0], [_l, this.colorbarHeight]]) : this.scaleBrush.extent([[0, 0], [_l - bl, this.colorbarHeight]]), this.options.colorbarPosition === "topLeft" && ([this.pColorbarArea.x, this.pColorbarArea.y] = this.position, this.pColorbar.y = ei, this.axis.pAxis.y = ei, this.axis.pAxis.x = bl + _l + Xh + yl, this.pColorbar.x = bl + _l + Xh, this.gColorscaleBrush.attr("transform", `translate(${this.pColorbarArea.x + bl},${this.pColorbarArea.y + this.pColorbar.y - 1})`)), this.options.colorbarPosition === "topRight" && (this.pColorbarArea.x = this.position[0] + this.dimensions[0] - lm, this.pColorbarArea.y = this.position[1], this.pColorbar.y = ei, this.axis.pAxis.y = ei, this.axis.pAxis.x = Dm + ei, this.pColorbar.x = Dm + ei, this.gColorscaleBrush.attr("transform", `translate(${this.pColorbarArea.x + this.pColorbar.x + yl + 2},${this.pColorbarArea.y + this.pColorbar.y - 1})`)), this.options.colorbarPosition === "bottomRight" && (this.pColorbarArea.x = this.position[0] + this.dimensions[0] - lm, this.pColorbarArea.y = this.position[1] + this.dimensions[1] - i, this.pColorbar.y = ei, this.axis.pAxis.y = ei, this.axis.pAxis.x = Dm + ei, this.pColorbar.x = Dm + ei, this.gColorscaleBrush.attr("transform", `translate(${this.pColorbarArea.x + this.pColorbar.x + yl + Xh},${this.pColorbarArea.y + this.pColorbar.y - 1})`)), this.options.colorbarPosition === "bottomLeft" && (this.pColorbarArea.x = this.position[0], this.pColorbarArea.y = this.position[1] + this.dimensions[1] - i, this.pColorbar.y = ei, this.axis.pAxis.y = ei, this.axis.pAxis.x = bl + _l + Xh + yl, this.pColorbar.x = bl + _l + Xh, this.gColorscaleBrush.attr("transform", `translate(${this.pColorbarArea.x + 2},${this.pColorbarArea.y + this.pColorbar.y - 1})`)), this.pColorbarArea.clear(), this.pColorbarArea.beginFill(ct(this.options.colorbarBackgroundColor || "white"), +this.options.colorbarBackgroundOpacity >= 0 ? +this.options.colorbarBackgroundOpacity : 0.6), this.pColorbarArea.drawRect(0, 0, lm, i), this.options ? (this.options.scaleStartPercent || (this.options.scaleStartPercent = 0), this.options.scaleEndPercent || (this.options.scaleEndPercent = 1)) : this.options = {
        scaleStartPercent: 0,
        scaleEndPercent: 1
      };
      const a = o.domain()[1] - o.domain()[0], s = o(this.options.scaleStartPercent * a + o.domain()[0]), l = o(this.options.scaleEndPercent * a + o.domain()[0]);
      this.brushing || (this.scaleBrush.on("start", this.brushStart.bind(this)).on("brush", this.brushMoved.bind(this)).on("end", this.brushEnd.bind(this)).handleSize(0), this.gColorscaleBrush.on(".brush", null), this.gColorscaleBrush.call(this.scaleBrush), this.northHandle = this.gColorscaleBrush.selectAll(".handle--custom").data([{
        type: "n"
      }, {
        type: "s"
      }]).enter().append("rect").classed("handle--custom", true).attr("cursor", "ns-resize").attr("width", _l).attr("height", HU).style("fill", "#666").style("stroke", "white"), this.flipText && this.northHandle.attr("cursor", "ew-resize"), this.gColorscaleBrush.call(this.scaleBrush.move, [l, s]));
      const u = It().domain([0, 255]).range([0, this.colorbarHeight]);
      for (let c = 0; c < this.colorbarHeight; c++) {
        const f = this.limitedValueScale(o.invert(c)), h = Math.max(0, Math.min(254, Math.floor(f)));
        this.pColorbar.beginFill(ct(`rgb(${this.colorScale[h][0]},${this.colorScale[h][1]},${this.colorScale[h][2]})`)), this.pColorbar.drawRect(0, c, yl, 1);
      }
      this.pAxis.position.x = yl, this.pAxis.position.y = u(0), this.options.colorbarPosition === "topLeft" || this.options.colorbarPosition === "bottomLeft" ? this.axis.drawAxisRight(o, this.colorbarHeight) : (this.options.colorbarPosition === "topRight" || this.options.colorbarPosition === "bottomRight") && this.axis.drawAxisLeft(o, this.colorbarHeight);
    }
  }, {
    key: "exportColorBarSVG",
    value: function() {
      const i = document.createElement("g");
      if (i.setAttribute("class", "color-bar"), !this.options.colorbarPosition || this.options.colorbarPosition === "hidden" || !this.valueScale)
        return i;
      i.setAttribute("transform", `translate(${this.pColorbarArea.x}, ${this.pColorbarArea.y})`);
      const o = document.createElement("rect");
      i.appendChild(o);
      const a = document.createElement("g");
      i.appendChild(a), a.setAttribute("transform", `translate(${this.pColorbar.x}, ${this.pColorbar.y})`);
      const s = Math.min(this.dimensions[1] / 2, $U);
      this.colorbarHeight = s - 2 * ei, o.setAttribute("x", 0), o.setAttribute("y", 0), o.setAttribute("width", lm), o.setAttribute("height", s), o.setAttribute("style", "fill: white; stroke-width: 0; opacity: 0.7");
      const l = 256, u = It().domain([0, l - 1]).range([0, this.colorbarHeight]), c = this.colorbarHeight / l;
      for (let p = 0; p < l; p++) {
        const m = document.createElement("rect");
        a.appendChild(m), m.setAttribute("x", 0), m.setAttribute("y", u(p)), m.setAttribute("width", yl), m.setAttribute("height", c), m.setAttribute("class", "color-rect");
        const g = Math.min(this.colorScale.length - 1, Math.max(0, Math.floor(this.limitedValueScale(this.valueScale.invert(p))))), v = this.colorScale[g];
        v ? m.setAttribute("style", `fill: rgb(${v[0]}, ${v[1]}, ${v[2]})`) : m.setAttribute("style", "fill: rgb(255,255,255,0)");
      }
      const f = document.createElement("g");
      i.appendChild(f), f.setAttribute("transform", `translate(${this.axis.pAxis.position.x},${this.axis.pAxis.position.y})`);
      let h = null;
      const d = this.valueScale.copy().range([this.colorbarHeight, 0]);
      return this.options.colorbarPosition === "topLeft" || this.options.colorbarPosition === "bottomLeft" ? h = this.axis.exportAxisRightSVG(d, this.colorbarHeight) : (this.options.colorbarPosition === "topRight" || this.options.colorbarPosition === "bottomRight") && (h = this.axis.exportAxisLeftSVG(d, this.colorbarHeight)), f.appendChild(h), i;
    }
    /**
     * Set data lens size
     *
     * @param  {Integer}  newDataLensSize  New data lens size. Needs to be an odd
     *   integer.
     */
  }, {
    key: "setDataLensSize",
    value: function(i) {
      this.dataLensPadding = Math.max(0, Math.floor((i - 1) / 2)), this.dataLensSize = this.dataLensPadding * 2 + 1;
    }
  }, {
    key: "binsPerTile",
    value: function() {
      return this.tilesetInfo.bins_per_dimension || iBe;
    }
    /**
     * Get the data in the visible rectangle
     *
     * The parameter coordinates are in pixel coordinates
     *
     * @param {int} x: The upper left corner of the rectangle in pixel coordinates
     * @param {int} y: The upper left corner of the rectangle in pixel coordinates
     * @param {int} width: The width of the rectangle (pixels)
     * @param {int} height: The height of the rectangle (pixels)
     *
     * @returns {Array} A numjs array containing the data in the visible region
     *
     */
  }, {
    key: "getVisibleRectangleData",
    value: function(i, o, a, s) {
      let l = this.calculateZoomLevel();
      l = this.tilesetInfo.max_zoom ? Math.min(this.tilesetInfo.max_zoom, l) : l;
      const c = Je.calculateTileWidth(this.tilesetInfo, l, this.binsPerTile()) / this.binsPerTile(), f = [this._xScale.invert(i), this._xScale.invert(i + a)], h = [this._yScale.invert(o), this._yScale.invert(o + s)], d = [Math.max(f[0], this.tilesetInfo.min_pos[0]), Math.min(f[1], this.tilesetInfo.max_pos[0])], p = [Math.max(h[0], this.tilesetInfo.min_pos[1]), Math.min(h[1], this.tilesetInfo.max_pos[1])], m = Math.floor(d[0] / c), g = Math.floor(p[0] / c), v = Math.max(0, Math.ceil((d[1] - d[0]) / c)), _ = Math.max(0, Math.ceil((p[1] - p[0]) / c)), y = kf(new Array(_ * v).fill(NaN), [_, v]);
      return this.visibleAndFetchedTiles().forEach((b) => {
        const T = b.mirrored ? [b.tileData.tilePos[1], b.tileData.tilePos[0]] : b.tileData.tilePos, {
          tileX: E,
          tileY: P,
          tileWidth: A,
          tileHeight: I
        } = this.getTilePosAndDimensions(b.tileData.zoomLevel, T, this.binsPerTile()), x = Math.floor(E / c), S = Math.floor((E + A) / c), N = Math.floor(P / c), B = Math.floor((P + I) / c);
        let w = Math.max(m, x) - x, R = Math.max(g, N) - N;
        const F = Math.min(m + v, S) - x, $ = Math.min(g + _, B) - N, K = Math.max(x - m, 0), se = Math.max(N - g, 0), J = F - w, me = $ - R;
        if (!(J < 0 || me < 0)) {
          if (b.mirrored && w > R) {
            const ae = w;
            w = R, R = ae;
          }
          WV(y.hi(se + me, K + J).lo(se, K), b.dataArray.hi(R + me, w + J).lo(R, w));
        }
      }), y;
    }
    /**
     * Convert the raw tile data to a rendered array of values which can be represented as a sprite.
     *
     * @param tile: The data structure containing all the tile information. Relevant to
     *              this function are tile.tileData = \{'dense': [...], ...\}
     *              and tile.graphics
     */
  }, {
    key: "initTile",
    value: function(i) {
      Qr(jr(r.prototype), "initTile", this).call(this, i), i.tileData.dense.length === this.binsPerTile() ** 2 && (i.dataArray = kf(Array.from(i.tileData.dense), [this.binsPerTile(), this.binsPerTile()]), this.continuousScaling && i.tileData.tilePos[0] === i.tileData.tilePos[1] && i.mirrored && (i.tileData.denseDataExtrema.mirrorPrecomputedExtrema(), Qr(jr(r.prototype), "initTile", this).call(this, i))), !(this.scale.minValue === null || this.scale.maxValue === null) && this.renderTile(i);
    }
    // /**
    //  * Draw a border around tiles
    //  *
    //  * @param  {Array}  pixData  Pixel data to be adjusted
    //  */
    // addBorder(pixData) {
    //   for (let i = 0; i < 256; i++) {
    //     if (i === 0) {
    //       const prefix = i * 256 * 4;
    //       for (let j = 0; j < 255; j++) {
    //         pixData[prefix + (j * 4)] = 0;
    //         pixData[prefix + (j * 4) + 1] = 0;
    //         pixData[prefix + (j * 4) + 2] = 255;
    //         pixData[prefix + (j * 4) + 3] = 255;
    //       }
    //     }
    //     pixData[(i * 256 * 4)] = 0;
    //     pixData[(i * 256 * 4) + 1] = 0;
    //     pixData[(i * 256 * 4) + 2] = 255;
    //     pixData[(i * 256 * 4) + 3] = 255;
    //   }
    // }
    //
  }, {
    key: "updateTile",
    value: function(i) {
      i.scale && this.scale && this.scale.minValue === i.scale.minValue && this.scale.maxValue === i.scale.maxValue || (this.renderTile(i), this.drawColorbar());
    }
  }, {
    key: "destroyTile",
    value: function(i) {
      i.sprite.destroy(true), i.canvas = null, i.sprite = null, i.texture = null;
    }
  }, {
    key: "pixDataFunction",
    value: function(i, o) {
      if (o) {
        const {
          graphics: a
        } = i, s = this.tileDataToCanvas(o.pixData);
        i.sprite && i.sprite.destroy(true);
        const l = Ue.PIXI.VERSION[0] === "4" ? Ue.PIXI.Texture.fromCanvas(s, Ue.PIXI.SCALE_MODES.NEAREST) : Ue.PIXI.Texture.from(s, {
          scaleMode: Ue.PIXI.SCALE_MODES.NEAREST
        }), u = new Ue.PIXI.Sprite(l);
        i.sprite = u, i.texture = l, i.canvas = s, this.setSpriteProperties(i.sprite, i.tileData.zoomLevel, i.tileData.tilePos, i.mirrored), a.removeChildren(), a.addChild(i.sprite);
      }
      this.renderingTiles.delete(i.tileId);
    }
    /**
     * Render / draw a tile.
     *
     * @param {Object}  tile  Tile data to be rendered.
     */
  }, {
    key: "renderTile",
    value: function(i) {
      const [o] = this.updateValueScale(), a = 0;
      if (this.renderingTiles.add(i.tileId), this.tilesetInfo.tile_size && i.tileData.dense.length < this.tilesetInfo.tile_size) {
        const s = new Float32Array(this.tilesetInfo.tile_size);
        s.fill(NaN), s.set(i.tileData.dense), i.tileData.dense = s;
      }
      Je.tileDataToPixData(
        i,
        o,
        this.limitedValueScale.domain(),
        a,
        // used as a pseudocount to prevent taking the log of 0
        this.colorScale,
        (s) => this.pixDataFunction(i, s),
        this.mirrorTiles() && !i.mirrored && i.tileData.tilePos[0] === i.tileData.tilePos[1],
        this.options.extent === "upper-right" && i.tileData.tilePos[0] === i.tileData.tilePos[1],
        this.options.zeroValueColor ? CV(this.options.zeroValueColor) : void 0,
        {
          selectedRows: this.options.selectRows,
          selectedRowsAggregationMode: this.options.selectRowsAggregationMode,
          selectedRowsAggregationWithRelativeHeight: this.options.selectRowsAggregationWithRelativeHeight,
          selectedRowsAggregationMethod: this.options.selectRowsAggregationMethod
        }
      );
    }
    /**
     * Remove this track from the view
     */
  }, {
    key: "remove",
    value: function() {
      this.gMain.remove(), this.gMain = null, Qr(jr(r.prototype), "remove", this).call(this);
    }
  }, {
    key: "refScalesChanged",
    value: function(i, o) {
      Qr(jr(r.prototype), "refScalesChanged", this).call(this, i, o), E1(this.fetchedTiles).filter((a) => a.sprite).forEach((a) => this.setSpriteProperties(a.sprite, a.tileData.zoomLevel, a.tileData.tilePos, a.mirrored));
    }
    /**
     * Bypass this track's exportSVG function
     */
  }, {
    key: "superSVG",
    value: function() {
      return Qr(jr(r.prototype), "exportSVG", this).call(this);
    }
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      Qr(jr(r.prototype), "exportSVG", this) ? [o, i] = Qr(jr(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o);
      const a = document.createElement("g");
      i.appendChild(a), a.setAttribute("transform", `translate(${this.pMain.position.x},${this.pMain.position.y}) scale(${this.pMain.scale.x},${this.pMain.scale.y})`);
      for (const l of this.visibleAndFetchedTiles()) {
        const u = l.sprite.rotation * 180 / Math.PI, c = document.createElement("g");
        c.setAttribute("transform", `translate(${l.sprite.x},${l.sprite.y}) rotate(${u}) scale(${l.sprite.scale.x},${l.sprite.scale.y})`);
        const f = document.createElement("image");
        f.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", l.canvas.toDataURL()), f.setAttribute("width", l.canvas.width), f.setAttribute("height", l.canvas.height), f.setAttribute("style", "image-rendering: pixelated"), c.appendChild(f), a.appendChild(c);
      }
      const s = this.exportColorBarSVG();
      return i.appendChild(s), [o, o];
    }
    // This function gets the indices of the visible part of the upper left tile.
    // The indices are 'rounded' to the grid used by the DenseDataExrema module.
    // It is used to determine if we should check for a new value scale in
    // the case of continuous scaling
  }, {
    key: "getVisiblePartOfUppLeftTile",
    value: function() {
      const i = this.visibleAndFetchedTiles().map((p) => {
        const m = p.mirrored ? [p.tileData.tilePos[1], p.tileData.tilePos[0]] : p.tileData.tilePos;
        return [m[0], m[1], p.tileId];
      });
      if (i.length === 0)
        return null;
      let o = i[0];
      for (let p = 0; p < i.length; p++) {
        const m = i[p];
        (m[0] < o[0] || m[1] < o[1]) && (o = m);
      }
      const a = Math.min(UR, this.binsPerTile()), s = this.binsPerTile() / a, l = this.visibleAndFetchedTiles().filter((p) => p.tileId === o[2])[0], u = this.getIndicesOfVisibleDataInTile(l), c = u[0], f = u[1], h = c - c % s, d = f - f % s;
      return [l.tileId, h, d];
    }
  }, {
    key: "getIndicesOfVisibleDataInTile",
    value: function(i) {
      const o = this._xScale.range(), a = this._yScale.range(), s = i.mirrored ? [i.tileData.tilePos[1], i.tileData.tilePos[0]] : i.tileData.tilePos, {
        tileX: l,
        tileY: u,
        tileWidth: c,
        tileHeight: f
      } = this.getTilePosAndDimensions(i.tileData.zoomLevel, s, this.binsPerTile()), h = It().domain([0, this.binsPerTile()]).range([l, l + c]), d = Math.max(0, Math.round(h.invert(this._xScale.invert(o[0]))) - 1), p = Math.min(this.binsPerTile(), Math.round(h.invert(this._xScale.invert(o[1])))), m = It().domain([0, this.binsPerTile()]).range([u, u + f]), g = Math.max(0, Math.round(m.invert(this._yScale.invert(a[0]))) - 1), v = Math.min(this.binsPerTile(), Math.round(m.invert(this._yScale.invert(a[1]))));
      return i.mirrored && s[0] !== s[1] ? [g, d, v, p] : [d, g, p, v];
    }
  }, {
    key: "minVisibleValue",
    value: function(i = false) {
      const o = this.visibleAndFetchedTiles().map((s) => {
        if (s.tileData.denseDataExtrema === void 0)
          return null;
        const l = this.getIndicesOfVisibleDataInTile(s);
        return s.tileData.denseDataExtrema.getMinNonZeroInSubset(l);
      });
      if (o.length === 0 && this.valueScaleMax === null)
        return null;
      const a = Math.min.apply(null, o);
      return a === Number.MAX_SAFE_INTEGER ? Qr(jr(r.prototype), "minVisibleValue", this).call(this, i) : i ? a : this.valueScaleMin !== null ? this.valueScaleMin : a;
    }
  }, {
    key: "maxVisibleValue",
    value: function(i = false) {
      const o = this.visibleAndFetchedTiles().map((s) => {
        if (s.tileData.denseDataExtrema === void 0)
          return null;
        const l = this.getIndicesOfVisibleDataInTile(s);
        return s.tileData.denseDataExtrema.getMaxNonZeroInSubset(l);
      });
      if (o.length === 0 && this.valueScaleMax === null)
        return null;
      const a = Math.max.apply(null, o);
      return a === Number.MIN_SAFE_INTEGER ? Qr(jr(r.prototype), "maxVisibleValue", this).call(this, i) : i ? a : this.valueScaleMax !== null ? this.valueScaleMax : a;
    }
  }, {
    key: "zoomed",
    value: function(i, o, a, s, l) {
      if (this.brushing)
        return;
      Qr(jr(r.prototype), "zoomed", this).call(this, i, o), this.pMain.position.x = s, this.pMain.position.y = l, this.pMain.scale.x = a, this.pMain.scale.y = a;
      const u = this.isValueScaleLocked();
      if (this.continuousScaling && this.minValue() !== void 0 && this.maxValue() !== void 0) {
        const c = JSON.stringify(this.getVisiblePartOfUppLeftTile());
        if (this.valueScaleMin === null && this.valueScaleMax === null && !u && // syncs the recomputation with the grid used in the DenseDataExtrema module
        c !== this.prevIndUpperLeftTile) {
          const f = this.minVisibleValue(), h = this.maxVisibleValue(), d = 1e-6;
          f !== null && // can happen if tiles haven't loaded
          h !== null && (Math.abs(this.minValue() - f) > d || Math.abs(this.maxValue() - h) > d) && (this.minValue(f), this.maxValue(h), this.scheduleRerender()), this.prevIndUpperLeftTile = c;
        }
        u && this.onValueScaleChanged();
      }
      this.mouseMoveZoomHandler();
    }
    /**
     * Helper method for adding a tile ID in place. Used by `tilesToId()`.
     *
     * @param  {Array}  tiles  Array tile ID should be added to.
     * @param  {Integer}  zoomLevel  Zoom level.
     * @param  {Integer}  row  Column ID, i.e., y.
     * @param  {Integer}  column  Column ID, i.e., x.
     * @param  {Objwect}  dataTransform  ??
     * @param  {Boolean}  mirrored  If `true` tile is mirrored.
     */
  }, {
    key: "addTileId",
    value: function(i, o, a, s, l, u = false) {
      const c = [o, a, s];
      c.mirrored = u, c.dataTransform = l, i.push(c);
    }
    /**
     * Convert tile positions to tile IDs
     *
     * @param  {Array}  xTiles  X positions of tiles
     * @param  {Array}  yTiles  Y positions of tiles
     * @param  {Array}  zoomLevel  Current zoom level
     * @return  {Array}  List of tile IDs
     */
  }, {
    key: "tilesToId",
    value: function(i, o, a) {
      const s = i, l = o, u = this.options && this.options.dataTransform || "default", c = [];
      for (let f = 0; f < s.length; f++)
        for (let h = 0; h < l.length; h++)
          this.mirrorTiles() ? (s[f] >= l[h] ? this.options.extent !== "lower-left" && this.addTileId(c, a, l[h], s[f], u, true) : this.options.extent !== "upper-right" && this.addTileId(c, a, s[f], l[h], u), s[f] === l[h] && this.options.extent === "lower-left" && this.addTileId(c, a, s[f], l[h], u)) : this.addTileId(c, a, s[f], l[h], u);
      return c;
    }
  }, {
    key: "calculateVisibleTiles",
    value: function() {
      if (this.tilesetInfo) {
        if (this.zoomLevel = this.calculateZoomLevel(), this.tilesetInfo.resolutions) {
          const i = this.tilesetInfo.resolutions.map((o) => +o).sort((o, a) => a - o);
          this.xTiles = Je.calculateTilesFromResolution(i[this.zoomLevel], this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]), this.yTiles = Je.calculateTilesFromResolution(i[this.zoomLevel], this._yScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]);
        } else
          this.xTiles = Je.calculateTiles(this.zoomLevel, this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width), this.yTiles = Je.calculateTiles(this.zoomLevel, this._yScale, this.options.reverseYAxis ? -this.tilesetInfo.max_pos[1] : this.tilesetInfo.min_pos[1], this.options.reverseYAxis ? -this.tilesetInfo.min_pos[1] : this.tilesetInfo.max_pos[1], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width1 || this.tilesetInfo.max_width);
        this.setVisibleTiles(this.tilesToId(this.xTiles, this.yTiles, this.zoomLevel));
      }
    }
  }, {
    key: "mirrorTiles",
    value: function() {
      return !(this.tilesetInfo.mirror_tiles && (this.tilesetInfo.mirror_tiles === false || this.tilesetInfo.mirror_tiles === "false"));
    }
  }, {
    key: "getMouseOverHtml",
    value: function(i, o) {
      if (!this.options || !this.options.showTooltip || !this.tilesetInfo)
        return "";
      const a = Je.calculateResolution(this.tilesetInfo, this.zoomLevel), s = Math.max(this.tilesetInfo.max_pos[1] - this.tilesetInfo.min_pos[1], this.tilesetInfo.max_pos[0] - this.tilesetInfo.min_pos[0]), l = Math.ceil(Math.log(s / a) / Math.log(10));
      this.setDataLensSize(1);
      const u = this._xScale.invert(i), c = this._yScale.invert(o);
      let f = "<b>Position:</b> ";
      if (this.chromInfo) {
        const d = pn(u, this.chromInfo), p = pn(c, this.chromInfo), m = (g) => oo(`.${l}s`)(g);
        f += `${d[0]}:${m(d[1])} & ${p[0]}:${m(p[1])}`, f += "<br/>";
      }
      let h = null;
      try {
        h = this.getVisibleRectangleData(i, o, 1, 1).get(0, 0);
      } catch {
        return "";
      }
      return this.options && this.options.heatmapValueScaling === "log" ? h > 0 ? `${f}<b>Value:</b> 1e${oo(".3f")(Math.log(h) / Math.log(10))}` : h === 0 ? `${f}<b>Value:</b> 0` : `${f}<b>Value:</b> N/A` : `${f}<b>Value:</b> ${oo(".3f")(h)}`;
    }
    /**
     * Get the tile's position in its coordinate system.
     *
     * @description
     * Normally the absolute coordinate system are the genome basepair positions
     */
  }, {
    key: "getTilePosAndDimensions",
    value: function(i, o, a) {
      const s = a || this.binsPerTile();
      if (this.tilesetInfo.resolutions) {
        const v = this.tilesetInfo.resolutions.map((E) => +E).sort((E, P) => P - E)[i], _ = v * s, y = _, b = v * s * o[0], T = v * s * o[1];
        return {
          tileX: b,
          tileY: T,
          tileWidth: _,
          tileHeight: y
        };
      }
      const l = o[0], u = o[1], c = this.tilesetInfo.min_pos[0], f = this.options.reverseYAxis ? -this.tilesetInfo.max_pos[1] : this.tilesetInfo.min_pos[1], h = this.tilesetInfo.max_width / 2 ** i, d = this.tilesetInfo.max_width / 2 ** i, p = c + l * h, m = f + u * d;
      return {
        tileX: p,
        tileY: m,
        tileWidth: h,
        tileHeight: d
      };
    }
  }, {
    key: "calculateZoomLevel",
    value: function() {
      const i = this.tilesetInfo.min_pos[0], o = this.tilesetInfo.max_pos[0], a = this.tilesetInfo.min_pos[1], s = this.tilesetInfo.max_pos[1];
      let l = null;
      if (this.tilesetInfo.resolutions) {
        const u = Je.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions, this._xScale, i, o), c = Je.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions, this._yScale, a, s);
        l = Math.min(u, c);
      } else {
        const u = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0], this.binsPerTile()), c = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[1], this.tilesetInfo.max_pos[1], this.binsPerTile());
        l = Math.max(u, c), l = Math.min(l, this.maxZoom);
      }
      return this.options && this.options.maxZoom && (this.options.maxZoom >= 0 ? l = Math.min(this.options.maxZoom, l) : console.error("Invalid maxZoom on track:", this)), l;
    }
    /**
     * The local tile identifier
     *
     * @param {array}  tile  Tile definition array to be converted to id. Tile
     *   array must contain `[zoomLevel, xPos, yPos]` and two props `mirrored` and
     *   `dataTransform`.
     */
  }, {
    key: "tileToLocalId",
    value: function(i) {
      return i.dataTransform && i.dataTransform !== "default" ? `${i.join(".")}.${i.mirrored}.${i.dataTransform}` : `${i.join(".")}.${i.mirrored}`;
    }
    /**
     * The tile identifier used on the server
     */
  }, {
    key: "tileToRemoteId",
    value: function(i) {
      return i.dataTransform && i.dataTransform !== "default" ? `${i.join(".")}.${i.dataTransform}` : `${i.join(".")}`;
    }
  }, {
    key: "localToRemoteId",
    value: function(i) {
      const o = i.split(".");
      return o.slice(0, o.length - 1).join(".");
    }
  }]), r;
}(hh);
function oBe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function jU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, sBe(n.key), n);
  }
}
function aBe(e12, t, r) {
  return t && jU(e12.prototype, t), r && jU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function sBe(e12) {
  var t = lBe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function lBe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function cBe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && RC(e12, t);
}
function RC(e12, t) {
  return RC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, RC(e12, t);
}
function uBe(e12) {
  var t = dBe();
  return function() {
    var n = uT(e12), i;
    if (t) {
      var o = uT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return hBe(this, i);
  };
}
function hBe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return fBe(e12);
}
function fBe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function dBe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function uT(e12) {
  return uT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, uT(e12);
}
function NK(e12) {
  if (!e12.graphics)
    return;
  const t = e12.graphics, {
    tileX: r,
    tileY: n,
    tileWidth: i
  } = this.getTilePosAndDimensions(e12.tileData.zoomLevel, e12.tileData.tilePos);
  e12.drawnAtScale = this._xScale.copy();
  const o = 1 / ((this._xScale(1) - this._xScale(0)) / (this._refXScale(1) - this._refXScale(0))), a = 1 / ((this._yScale(1) - this._yScale(0)) / (this._refYScale(1) - this._refYScale(0)));
  e12.text.scale.x = o, e12.text.scale.y = a;
  const s = this._xScale(i) - this._xScale(0);
  if (e12.textGraphics.scale.x = s / 256, e12.textGraphics.scale.y = s / 256, t.clear(), t.lineStyle(4 * o, 255, 1), t.beginFill(16740363, 0.4), t.alpha = 0.5, e12.mirrored) {
    const l = this._refXScale(n + i) - this._refXScale(n), u = this._refYScale(r + i) - this._refYScale(r);
    e12.textGraphics.position.x = this._refXScale(n) + l / 2, e12.textGraphics.position.y = this._refYScale(r) + u / 2, t.drawRect(this._refXScale(n), this._refYScale(r), l, u);
  } else {
    const l = this._refXScale(r + i) - this._refXScale(r), u = this._refYScale(n + i) - this._refYScale(n);
    e12.textGraphics.position.x = this._refXScale(r) + l / 2, e12.textGraphics.position.y = this._refYScale(n) + u / 2, t.drawRect(this._refXScale(r), this._refYScale(n), l, u);
  }
}
function MK(e12) {
  const t = e12.graphics;
  e12.textGraphics = new Ue.PIXI.Graphics(), e12.mirrored ? e12.text = new Ue.PIXI.Text(`${e12.tileData.zoomLevel}/${[e12.tileData.tilePos[1], e12.tileData.tilePos[0]].join("/")}`, {
    fontFamily: "Arial",
    fontSize: 24,
    fill: 16715792,
    align: "center"
  }) : e12.text = new Ue.PIXI.Text(`${e12.tileData.zoomLevel}/${e12.tileData.tilePos.join("/")}`, {
    fontFamily: "Arial",
    fontSize: 24,
    fill: 16715792,
    align: "center"
  }), e12.textGraphics.addChild(e12.text), e12.text.anchor.x = 0.5, e12.text.anchor.y = 0.5, t.addChild(e12.textGraphics);
}
var LK = function(e12) {
  cBe(r, e12);
  var t = uBe(r);
  function r() {
    return oBe(this, r), t.apply(this, arguments);
  }
  return aBe(r, [{
    key: "areAllVisibleTilesLoaded",
    value: function() {
      return true;
    }
  }, {
    key: "initTile",
    value: function(i) {
      MK.bind(this)(i), this.drawTile(i);
    }
  }, {
    key: "destroyTile",
    value: function(i, o) {
    }
  }, {
    key: "drawTile",
    value: function(i) {
      NK.bind(this)(i);
    }
  }, {
    key: "fetchNewTiles",
    value: function(i) {
      i.forEach((o) => {
        const s = o.remoteId.split("."), l = {
          zoomLevel: s[0],
          tilePos: s.slice(1, s.length).map((u) => +u)
        };
        this.fetchedTiles[o.tileId] = o, this.fetchedTiles[o.tileId].tileData = l, this.fetching.has(o.remoteId) && this.fetching.delete(o.remoteId);
      }), this.synchronizeTilesAndGraphics();
    }
  }]), r;
}(gy);
function pBe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function GU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, gBe(n.key), n);
  }
}
function mBe(e12, t, r) {
  return t && GU(e12.prototype, t), r && GU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function gBe(e12) {
  var t = vBe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function vBe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Sg() {
  return typeof Reflect < "u" && Reflect.get ? Sg = Reflect.get.bind() : Sg = function(t, r, n) {
    var i = yBe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Sg.apply(this, arguments);
}
function yBe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = ku(e12), e12 !== null); )
    ;
  return e12;
}
function _Be(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && NC(e12, t);
}
function NC(e12, t) {
  return NC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, NC(e12, t);
}
function bBe(e12) {
  var t = EBe();
  return function() {
    var n = ku(e12), i;
    if (t) {
      var o = ku(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return TBe(this, i);
  };
}
function TBe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return BK(e12);
}
function BK(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function EBe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function ku(e12) {
  return ku = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, ku(e12);
}
var SBe = 1024;
var gM = function(e12) {
  _Be(r, e12);
  var t = bBe(r);
  function r(n, i) {
    var o;
    pBe(this, r), o = t.call(this, n, i);
    const {
      onMouseMoveZoom: a,
      isValueScaleLocked: s,
      getLockGroupExtrema: l
    } = n;
    return o.onMouseMoveZoom = a, o.isValueScaleLocked = s, o.getLockGroupExtrema = l, o.onMouseMoveZoom && o.pubSubs.push(o.pubSub.subscribe("app.mouseMove", o.mouseMoveHandler.bind(BK(o)))), o;
  }
  return mBe(r, [{
    key: "initTile",
    value: function(i) {
      Sg(ku(r.prototype), "initTile", this).call(this, i);
    }
  }, {
    key: "tileToLocalId",
    value: function(i) {
      return `${i.join(".")}`;
    }
  }, {
    key: "tileToRemoteId",
    value: function(i) {
      return `${i.join(".")}`;
    }
  }, {
    key: "relevantScale",
    value: function() {
      return null;
    }
  }, {
    key: "setVisibleTiles",
    value: function(i) {
      this.visibleTiles = i.map((o) => ({
        tileId: this.tileToLocalId(o),
        remoteId: this.tileToRemoteId(o)
      })), this.visibleTileIds = new Set(this.visibleTiles.map((o) => o.tileId));
    }
  }, {
    key: "calculateVisibleTiles",
    value: function() {
      if (!this.tilesetInfo)
        return;
      if (this.zoomLevel = this.calculateZoomLevel(), this.tilesetInfo.resolutions) {
        const a = this.tilesetInfo.resolutions.map((u) => +u).sort((u, c) => c - u), l = Je.calculateTilesFromResolution(a[this.zoomLevel], this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]).map((u) => [this.zoomLevel, u]);
        this.setVisibleTiles(l);
        return;
      }
      const o = Je.calculateTiles(this.zoomLevel, this.relevantScale(), this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width).map((a) => [this.zoomLevel, a]);
      this.setVisibleTiles(o);
    }
  }, {
    key: "getTilePosAndDimensions",
    value: function(i, o, a) {
      const s = o[0], l = o[0];
      if (this.tilesetInfo.resolutions) {
        const v = a || SBe, y = this.tilesetInfo.resolutions.map((A) => +A).sort((A, I) => I - A)[i], b = y * v, T = b, E = y * v * o[0], P = y * v * o[1];
        return {
          tileX: E,
          tileY: P,
          tileWidth: b,
          tileHeight: T
        };
      }
      const u = this.tilesetInfo.max_width, c = this.tilesetInfo.max_width, f = this.tilesetInfo.min_pos[0], h = this.tilesetInfo.min_pos[1], d = u / 2 ** i, p = c / 2 ** i, m = f + s * d, g = h + l * p;
      return {
        tileX: m,
        tileY: g,
        tileWidth: d,
        tileHeight: p
      };
    }
  }, {
    key: "updateTile",
    value: function(i) {
    }
  }, {
    key: "scheduleRerender",
    value: function() {
      this.backgroundTaskScheduler.enqueueTask(this.handleRerender.bind(this), null, this.uuid);
    }
  }, {
    key: "handleRerender",
    value: function() {
      this.rerender(this.options, false);
    }
  }, {
    key: "getIndicesOfVisibleDataInTile",
    value: function(i) {
      const o = this._xScale.range();
      if (!this.tilesetInfo)
        return [null, null];
      const {
        tileX: a,
        tileWidth: s
      } = this.getTilePosAndDimensions(i.tileData.zoomLevel, i.tileData.tilePos, this.tilesetInfo.bins_per_dimension || this.tilesetInfo.tile_size), l = It().domain([0, this.tilesetInfo.tile_size || this.tilesetInfo.bins_per_dimension]).range([a, a + s]), u = Math.max(0, Math.round(l.invert(this._xScale.invert(o[0])))), c = Math.min(i.tileData.dense.length, Math.round(l.invert(this._xScale.invert(o[1]))));
      return [u, c];
    }
    /**
     * Returns the minimum in the visible area (not visible tiles)
     */
  }, {
    key: "minVisibleValue",
    value: function(i = false) {
      let o = this.visibleAndFetchedIds();
      o.length === 0 && (o = Object.keys(this.fetchedTiles));
      const a = o.map((l) => this.fetchedTiles[l]).map((l) => {
        const u = this.getIndicesOfVisibleDataInTile(l);
        return l.tileData.denseDataExtrema.getMinNonZeroInSubset(u);
      }), s = Math.min(...a);
      return i ? s : this.valueScaleMin !== null ? this.valueScaleMin : s;
    }
    /**
     * Returns the maximum in the visible area (not visible tiles)
     */
  }, {
    key: "maxVisibleValue",
    value: function(i = false) {
      let o = this.visibleAndFetchedIds();
      o.length === 0 && (o = Object.keys(this.fetchedTiles));
      const a = o.map((l) => this.fetchedTiles[l]).map((l) => {
        const u = this.getIndicesOfVisibleDataInTile(l);
        return l.tileData.denseDataExtrema.getMaxNonZeroInSubset(u);
      }), s = Math.max(...a);
      return i ? s : this.valueScaleMax !== null ? this.valueScaleMax : s;
    }
    /**
     * Return an aggregated visible value. For example, the minimum or maximum.
     *
     * @description
     *   The difference to `minVisibleValueInTiles`
     *   is that the truly visible min or max value is returned instead of the
     *   min or max value of the tile. The latter is not necessarily visible.
     *
     *   For 'min' and 'max' this is identical to minVisibleValue and maxVisibleValue
     *
     * @param  {string} aggregator Aggregation method. Currently supports `min`
     *   and `max` only.
     * @return {number} The aggregated value.
     */
  }, {
    key: "getAggregatedVisibleValue",
    value: function(i = "max") {
      const o = i === "min" ? Math.min : Math.max, a = i === "min" ? 1 / 0 : -1 / 0;
      let s = this.visibleAndFetchedIds();
      s.length === 0 && (s = Object.keys(this.fetchedTiles));
      const l = this._xScale.range();
      return s.map((u) => this.fetchedTiles[u]).map((u) => {
        if (!u.tileData.tilePos)
          return i === "min" ? this.minVisibleValue() : this.maxVisibleValue();
        const {
          tileX: c,
          tileWidth: f
        } = this.getTilePosAndDimensions(u.tileData.zoomLevel, u.tileData.tilePos, this.tilesetInfo.bins_per_dimension || this.tilesetInfo.tile_size), h = It().domain([0, this.tilesetInfo.tile_size || this.tilesetInfo.bins_per_dimension]).range([c, c + f]), d = Math.max(0, Math.round(h.invert(this._xScale.invert(l[0])))), p = Math.min(u.tileData.dense.length, Math.round(h.invert(this._xScale.invert(l[1]))));
        return u.tileData.dense.slice(d, p);
      }).reduce((u, c) => o(u, ...c), a);
    }
    /**
     * Get the data value at a relative pixel position
     * @param   {number}  relPos  Relative pixel position, where 0 indicates the
     *   start of the track
     * @return  {number}  The data value at `relPos`
     */
  }, {
    key: "getDataAtPos",
    value: function(i) {
      let o;
      if (!this.tilesetInfo)
        return o;
      const a = this.calculateZoomLevel(), s = Je.calculateTileWidth(this.tilesetInfo, a, this.tilesetInfo.tile_size), l = this._xScale.invert(i) / s, u = this.tileToLocalId([a, Math.floor(l)]), c = this.fetchedTiles[u];
      if (!c)
        return o;
      const f = this.tilesetInfo.tile_size * (l - Math.floor(l));
      return c.tileData.dense ? c.tileData.dense[Math.floor(f)] : null;
    }
  }, {
    key: "mouseMoveHandler",
    value: function({
      x: i,
      y: o
    } = {}) {
      this.isWithin(i, o) && (this.mouseX = i, this.mouseY = o, this.mouseMoveZoomHandler());
    }
  }, {
    key: "mouseMoveZoomHandler",
    value: function() {
    }
  }, {
    key: "zoomed",
    value: function(...i) {
      Sg(ku(r.prototype), "zoomed", this).call(this, ...i), this.mouseMoveZoomHandler();
    }
  }]), r;
}(hh);
function wBe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function zU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, OBe(n.key), n);
  }
}
function ABe(e12, t, r) {
  return t && zU(e12.prototype, t), r && zU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function OBe(e12) {
  var t = IBe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function IBe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Yc() {
  return typeof Reflect < "u" && Reflect.get ? Yc = Reflect.get.bind() : Yc = function(t, r, n) {
    var i = PBe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Yc.apply(this, arguments);
}
function PBe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Ss(e12), e12 !== null); )
    ;
  return e12;
}
function CBe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && MC(e12, t);
}
function MC(e12, t) {
  return MC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, MC(e12, t);
}
function xBe(e12) {
  var t = DBe();
  return function() {
    var n = Ss(e12), i;
    if (t) {
      var o = Ss(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return kBe(this, i);
  };
}
function kBe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return LC(e12);
}
function LC(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function DBe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Ss(e12) {
  return Ss = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Ss(e12);
}
var Ep = function(e12) {
  CBe(r, e12);
  var t = xBe(r);
  function r(n, i) {
    var o;
    wBe(this, r), o = t.call(this, n, i);
    const {
      animate: a,
      isShowGlobalMousePosition: s
    } = n;
    return o.constIndicator = new Ue.PIXI.Graphics(), o.pMain.addChild(o.constIndicator), o.axis = new pS(LC(o)), o.pBase.addChild(o.axis.pAxis), o.animate = a, o.options = i, o.isShowGlobalMousePosition = s, o.pubSubs = [], o.options.showMousePosition && !o.hideMousePosition && (o.hideMousePosition = _u(LC(o), o.is2d, o.isShowGlobalMousePosition())), o;
  }
  return ABe(r, [{
    key: "rerender",
    value: function(i, o) {
      const a = JSON.stringify(i);
      !o && a === this.prevOptions || (Yc(Ss(r.prototype), "rerender", this).call(this, i, o), this.prevOptions = a, this.options = i, this.options.showMousePosition && !this.hideMousePosition && (this.hideMousePosition = _u(this, this.is2d, this.isShowGlobalMousePosition())), !this.options.showMousePosition && this.hideMousePosition && (this.hideMousePosition(), this.hideMousePosition = void 0));
    }
  }, {
    key: "calculateZoomLevel",
    value: function() {
      if (this.tilesetInfo.resolutions)
        return Je.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions, this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0] - 2);
      const i = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0], this.tilesetInfo.bins_per_dimension || this.tilesetInfo.tile_size);
      let o = Math.min(i, this.maxZoom);
      return o = Math.max(o, 0), o;
    }
    /**
     * Which scale should we use for calculating tile positions?
     *
     * Horizontal tracks should use the xScale and vertical tracks
     * should use the yScale
     *
     * This function should be overwritten by HorizontalTiled1DPixiTrack.js
     * and VerticalTiled1DPixiTrack.js
     */
  }, {
    key: "relevantScale",
    value: function() {
      return this._xScale;
    }
  }, {
    key: "draw",
    value: function() {
      Yc(Ss(r.prototype), "draw", this).call(this), this.drawConstIndicator();
    }
  }, {
    key: "drawAxis",
    value: function(i) {
      if (!this.options.axisPositionVertical && !this.options.axisPositionHorizontal) {
        this.axis.clearAxis();
        return;
      }
      if (this.options.axisPositionVertical && this.options.axisPositionVertical === "hidden") {
        this.axis.clearAxis();
        return;
      }
      if (this.options.axisPositionHorizontal && this.options.axisPositionHorizontal === "hidden") {
        this.axis.clearAxis();
        return;
      }
      const o = this.options.axisMargin || 0;
      this.options.axisPositionHorizontal === "left" || this.options.axisPositionVertical === "top" ? (this.axis.pAxis.position.x = this.position[0] + o, this.axis.pAxis.position.y = this.position[1], this.axis.drawAxisRight(i, this.dimensions[1])) : this.options.axisPositionHorizontal === "outsideLeft" || this.options.axisPositionVertical === "outsideTop" ? (this.axis.pAxis.position.x = this.position[0] + o, this.axis.pAxis.position.y = this.position[1], this.axis.drawAxisLeft(i, this.dimensions[1])) : this.options.axisPositionHorizontal === "right" || this.options.axisPositionVertical === "bottom" ? (this.axis.pAxis.position.x = this.position[0] + this.dimensions[0] - o, this.axis.pAxis.position.y = this.position[1], this.axis.drawAxisLeft(i, this.dimensions[1])) : (this.options.axisPositionHorizontal === "outsideRight" || this.options.axisPositionVertical === "outsideBottom") && (this.axis.pAxis.position.x = this.position[0] + this.dimensions[0] - o, this.axis.pAxis.position.y = this.position[1], this.axis.drawAxisRight(i, this.dimensions[1]));
    }
  }, {
    key: "mouseMoveZoomHandler",
    value: function(i = this.mouseX, o = this.mouseY) {
      if (typeof i > "u" || !this.areAllVisibleTilesLoaded() || !this.tilesetInfo)
        return;
      let a = 0, s = 0, l = "1d-horizontal";
      this.isLeftModified ? (a = o - this.position[1], s = i - this.position[0], l = "1d-vertical") : (a = i - this.position[0], s = o - this.position[1]);
      const u = i - this.position[0], c = o - this.position[1], f = this._xScale.invert(a), h = this._yScale.invert(s), d = this.getDataAtPos(a);
      d && this.onMouseMoveZoom({
        trackId: this.id,
        data: d,
        absX: i,
        absY: o,
        relX: u,
        relY: c,
        dataX: f,
        dataY: h,
        orientation: l
      });
    }
  }, {
    key: "drawConstIndicator",
    value: function() {
      if (this.constIndicator) {
        for (this.constIndicator.clear(); this.constIndicator.children[0]; )
          this.constIndicator.removeChild(this.constIndicator.children[0]);
        !this.options.constIndicators || !this.valueScale || this.options.constIndicators.forEach(({
          color: i = "black",
          opacity: o = 1,
          label: a = null,
          labelColor: s = "black",
          labelOpacity: l = 1,
          labelPosition: u = "leftTop",
          labelSize: c = 12,
          value: f = 0
        } = {}) => {
          const h = ct(i), d = ct(s);
          this.constIndicator.beginFill(h, o);
          const p = this.valueScale(f);
          let m = 0, g = 0;
          if (a) {
            const v = new Ue.PIXI.Text(a, {
              fontFamily: "Arial",
              fontSize: c,
              fill: d
            });
            switch (v.alpha = l, u) {
              case "right":
                v.anchor.x = 1, v.anchor.y = 0.5, v.x = this.position[0] + this.dimensions[0] - 6, v.y = p, g = v.width + 8;
                break;
              case "rightBottom":
                v.anchor.x = 1, v.anchor.y = 0, v.x = this.position[0] + this.dimensions[0] - 6, v.y = p;
                break;
              case "rightTop":
                v.anchor.x = 1, v.anchor.y = 1, v.x = this.position[0] + this.dimensions[0] - 6, v.y = p;
                break;
              case "left":
                v.anchor.x = 0, v.anchor.y = 0.5, v.x = this.position[0] + 2, v.y = p, m = v.width + 4;
                break;
              case "leftBottom":
                v.anchor.x = 0, v.anchor.y = 0, v.x = this.position[0] + 2, v.y = p;
                break;
              case "leftTop":
              default:
                v.anchor.x = 0, v.anchor.y = 1, v.x = this.position[0] + 2, v.y = p;
                break;
            }
            this.constIndicator.addChild(v);
          }
          this.constIndicator.drawRect(this.position[0] + m, p, this.dimensions[0] - g, 1);
        });
      }
    }
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      Yc(Ss(r.prototype), "exportSVG", this) ? [o, i] = Yc(Ss(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o), o.setAttribute("class", "horizontal-tiled-1d-track");
      const a = document.createElement("g");
      return i.appendChild(a), this.options.constIndicators && this.options.constIndicators.forEach(({
        color: s = "black",
        opacity: l = 1,
        label: u = null,
        labelColor: c = "black",
        labelOpacity: f = 1,
        labelPosition: h = "leftTop",
        labelSize: d = 12,
        value: p = 0
      } = {}) => {
        const m = this.valueScale(p);
        if (u) {
          const v = document.createElement("text");
          switch (v.textContent = u, v.setAttribute("x", this.position[0]), v.setAttribute("y", m), v.setAttribute("style", `font-family: 'Arial'; font-size: ${d}px; fill: ${c}; fill-opacity: ${f};`), h) {
            case "rightBottom":
              v.setAttribute("x", this.position[0] + this.dimensions[0] - 6), v.setAttribute("y", m + d + 2), v.setAttribute("text-anchor", "end");
              break;
            case "right":
            case "rightTop":
              v.setAttribute("x", this.position[0] + this.dimensions[0] - 6), v.setAttribute("y", m - 2), v.setAttribute("text-anchor", "end");
              break;
            case "leftBottom":
              v.setAttribute("x", this.position[0] + 2), v.setAttribute("y", m + d + 2);
              break;
            case "left":
            case "leftTop":
            default:
              v.setAttribute("x", this.position[0] + 2), v.setAttribute("y", m - 2);
              break;
          }
          a.appendChild(v);
        }
        const g = document.createElement("line");
        g.setAttribute("x1", this.position[0]), g.setAttribute("y1", m), g.setAttribute("x2", this.dimensions[0]), g.setAttribute("y2", m), g.setAttribute("stroke", s), g.setAttribute("stroke-opacity", l), a.appendChild(g);
      }), [o, i];
    }
  }]), r;
}(gM);
function RBe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function VU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, MBe(n.key), n);
  }
}
function NBe(e12, t, r) {
  return t && VU(e12.prototype, t), r && VU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function MBe(e12) {
  var t = LBe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function LBe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Pb() {
  return typeof Reflect < "u" && Reflect.get ? Pb = Reflect.get.bind() : Pb = function(t, r, n) {
    var i = BBe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Pb.apply(this, arguments);
}
function BBe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Nd(e12), e12 !== null); )
    ;
  return e12;
}
function FBe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && BC(e12, t);
}
function BC(e12, t) {
  return BC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, BC(e12, t);
}
function $Be(e12) {
  var t = jBe();
  return function() {
    var n = Nd(e12), i;
    if (t) {
      var o = Nd(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return HBe(this, i);
  };
}
function HBe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return UBe(e12);
}
function UBe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function jBe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Nd(e12) {
  return Nd = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Nd(e12);
}
var FK = function(e12) {
  FBe(r, e12);
  var t = $Be(r);
  function r(n, i) {
    var o;
    return RBe(this, r), o = t.call(this, n, i), o.pMain = o.pMobile, o;
  }
  return NBe(r, [{
    key: "areAllVisibleTilesLoaded",
    value: function() {
      return true;
    }
  }, {
    key: "initTile",
    value: function(i) {
      const o = i.graphics;
      i.textGraphics = new Ue.PIXI.Graphics(), i.text = new Ue.PIXI.Text(`${i.tileData.zoomLevel}/${i.tileData.tilePos.join("/")}`, {
        fontFamily: "Arial",
        fontSize: 32,
        fill: 16715792,
        align: "center"
      }), i.textGraphics.addChild(i.text), i.text.anchor.x = 0.5, i.text.anchor.y = 0.5, o.addChild(i.textGraphics), this.drawTile(i);
    }
  }, {
    key: "destroyTile",
    value: function(i) {
    }
  }, {
    key: "drawTile",
    value: function(i) {
      if (Pb(Nd(r.prototype), "drawTile", this).call(this, i), !i.graphics)
        return;
      const o = i.graphics, {
        tileX: a,
        tileWidth: s
      } = this.getTilePosAndDimensions(i.tileData.zoomLevel, i.tileData.tilePos), l = 1 / ((this._xScale(1) - this._xScale(0)) / (this._refXScale(1) - this._refXScale(0)));
      i.text.scale.x = l, o.clear();
      const u = this.dimensions[1], c = this._refXScale(a + s) - this._refXScale(a);
      i.textGraphics.position.x = this._refXScale(a) + c / 2, i.textGraphics.position.y = u / 2;
      const f = this._refXScale(a);
      o.lineStyle(4 * l, 255, 1), o.beginFill(16740363, 0.4), o.alpha = 0.5, o.moveTo(f, 0), o.lineTo(f, u), o.moveTo(f + c, 0), o.lineTo(f + c, u), o.lineStyle(0, 255, 1), o.drawRect(f, 0, c, u);
    }
  }]), r;
}(Ep);
function GBe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function XU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, VBe(n.key), n);
  }
}
function zBe(e12, t, r) {
  return t && XU(e12.prototype, t), r && XU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function VBe(e12) {
  var t = XBe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function XBe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Cb() {
  return typeof Reflect < "u" && Reflect.get ? Cb = Reflect.get.bind() : Cb = function(t, r, n) {
    var i = WBe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Cb.apply(this, arguments);
}
function WBe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Md(e12), e12 !== null); )
    ;
  return e12;
}
function YBe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && FC(e12, t);
}
function FC(e12, t) {
  return FC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, FC(e12, t);
}
function qBe(e12) {
  var t = QBe();
  return function() {
    var n = Md(e12), i;
    if (t) {
      var o = Md(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return KBe(this, i);
  };
}
function KBe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return ZBe(e12);
}
function ZBe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function QBe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Md(e12) {
  return Md = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Md(e12);
}
var $K = function(e12) {
  YBe(r, e12);
  var t = qBe(r);
  function r() {
    return GBe(this, r), t.apply(this, arguments);
  }
  return zBe(r, [{
    key: "calculateZoomLevel",
    value: function() {
      const i = Je.calculateZoomLevel(this._yScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]);
      return Math.min(i, this.maxZoom);
    }
  }, {
    key: "relevantScale",
    value: function() {
      return this._yScale;
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      Cb(Md(r.prototype), "zoomed", this).call(this, i, o);
      const a = 1, s = (o(1) - o(0)) / (this._refYScale(1) - this._refYScale(0)), l = this.position[0], u = o(0) + this.position[1] - this._refYScale(1) * s;
      this.pMain.position.x = l, this.pMain.position.y = u, this.pMain.scale.x = a, this.pMain.scale.y = s;
    }
  }]), r;
}(gM);
function JBe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function WU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, tFe(n.key), n);
  }
}
function eFe(e12, t, r) {
  return t && WU(e12.prototype, t), r && WU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function tFe(e12) {
  var t = rFe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function rFe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function xb() {
  return typeof Reflect < "u" && Reflect.get ? xb = Reflect.get.bind() : xb = function(t, r, n) {
    var i = nFe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, xb.apply(this, arguments);
}
function nFe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Ld(e12), e12 !== null); )
    ;
  return e12;
}
function iFe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && $C(e12, t);
}
function $C(e12, t) {
  return $C = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, $C(e12, t);
}
function oFe(e12) {
  var t = lFe();
  return function() {
    var n = Ld(e12), i;
    if (t) {
      var o = Ld(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return aFe(this, i);
  };
}
function aFe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return sFe(e12);
}
function sFe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function lFe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Ld(e12) {
  return Ld = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Ld(e12);
}
var HK = function(e12) {
  iFe(r, e12);
  var t = oFe(r);
  function r() {
    return JBe(this, r), t.apply(this, arguments);
  }
  return eFe(r, [{
    key: "areAllVisibleTilesLoaded",
    value: function() {
      return true;
    }
  }, {
    key: "initTile",
    value: function(i) {
      const o = i.graphics;
      i.textGraphics = new Ue.PIXI.Graphics(), i.text = new Ue.PIXI.Text(`${i.tileData.zoomLevel}/${i.tileData.tilePos.join("/")}`, {
        fontFamily: "Arial",
        fontSize: 32,
        fill: 16715792,
        align: "center"
      }), i.textGraphics.addChild(i.text), i.text.anchor.x = 0.5, i.text.anchor.y = 0.5, i.text.rotation = -Math.PI / 2, o.addChild(i.textGraphics), this.drawTile(i, o);
    }
  }, {
    key: "destroyTile",
    value: function(i, o) {
    }
  }, {
    key: "drawTile",
    value: function(i) {
      if (xb(Ld(r.prototype), "drawTile", this).call(this, i), !i.graphics)
        return;
      const o = i.graphics, {
        tileY: a,
        tileHeight: s
      } = this.getTilePosAndDimensions(i.tileData.zoomLevel, i.tileData.tilePos), l = 1 / ((this._yScale(1) - this._yScale(0)) / (this._refYScale(1) - this._refYScale(0)));
      i.text.scale.x = l, o.clear(), o.lineStyle(4 * l, 255, 1), o.beginFill(16740363, 0.4), o.alpha = 0.5;
      const u = this.dimensions[0], c = this._refYScale(a + s) - this._refYScale(a);
      i.textGraphics.position.x = u / 2, i.textGraphics.position.y = this._refYScale(a) + c / 2, o.drawRect(0, this._refYScale(a), u, c);
    }
  }, {
    key: "fetchNewTiles",
    value: function(i) {
      i.forEach((o) => {
        const s = o.remoteId.split("."), l = {
          zoomLevel: s[1],
          tilePos: s.slice(2, s.length).map((u) => +u)
        };
        this.fetchedTiles[o.tileId] = o, this.fetchedTiles[o.tileId].tileData = l, this.fetching.has(o.remoteId) && this.fetching.delete(o.remoteId);
      }), this.synchronizeTilesAndGraphics();
    }
  }]), r;
}($K);
var SO = Array.prototype.slice;
function cFe(e12) {
  return e12;
}
var kb = 1;
var Db = 2;
var HC = 3;
var Rm = 4;
var YU = 1e-6;
function uFe(e12) {
  return "translate(" + e12 + ",0)";
}
function hFe(e12) {
  return "translate(0," + e12 + ")";
}
function fFe(e12) {
  return (t) => +e12(t);
}
function dFe(e12, t) {
  return t = Math.max(0, e12.bandwidth() - t * 2) / 2, e12.round() && (t = Math.round(t)), (r) => +e12(r) + t;
}
function pFe() {
  return !this.__axis;
}
function bS(e12, t) {
  var r = [], n = null, i = null, o = 6, a = 6, s = 3, l = typeof window < "u" && window.devicePixelRatio > 1 ? 0 : 0.5, u = e12 === kb || e12 === Rm ? -1 : 1, c = e12 === Rm || e12 === Db ? "x" : "y", f = e12 === kb || e12 === HC ? uFe : hFe;
  function h(d) {
    var p = n ?? (t.ticks ? t.ticks.apply(t, r) : t.domain()), m = i ?? (t.tickFormat ? t.tickFormat.apply(t, r) : cFe), g = Math.max(o, 0) + s, v = t.range(), _ = +v[0] + l, y = +v[v.length - 1] + l, b = (t.bandwidth ? dFe : fFe)(t.copy(), l), T = d.selection ? d.selection() : d, E = T.selectAll(".domain").data([null]), P = T.selectAll(".tick").data(p, t).order(), A = P.exit(), I = P.enter().append("g").attr("class", "tick"), x = P.select("line"), S = P.select("text");
    E = E.merge(E.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "currentColor")), P = P.merge(I), x = x.merge(I.append("line").attr("stroke", "currentColor").attr(c + "2", u * o)), S = S.merge(I.append("text").attr("fill", "currentColor").attr(c, u * g).attr("dy", e12 === kb ? "0em" : e12 === HC ? "0.71em" : "0.32em")), d !== T && (E = E.transition(d), P = P.transition(d), x = x.transition(d), S = S.transition(d), A = A.transition(d).attr("opacity", YU).attr("transform", function(N) {
      return isFinite(N = b(N)) ? f(N + l) : this.getAttribute("transform");
    }), I.attr("opacity", YU).attr("transform", function(N) {
      var B = this.parentNode.__axis;
      return f((B && isFinite(B = B(N)) ? B : b(N)) + l);
    })), A.remove(), E.attr("d", e12 === Rm || e12 === Db ? a ? "M" + u * a + "," + _ + "H" + l + "V" + y + "H" + u * a : "M" + l + "," + _ + "V" + y : a ? "M" + _ + "," + u * a + "V" + l + "H" + y + "V" + u * a : "M" + _ + "," + l + "H" + y), P.attr("opacity", 1).attr("transform", function(N) {
      return f(b(N) + l);
    }), x.attr(c + "2", u * o), S.attr(c, u * g).text(m), T.filter(pFe).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", e12 === Db ? "start" : e12 === Rm ? "end" : "middle"), T.each(function() {
      this.__axis = b;
    });
  }
  return h.scale = function(d) {
    return arguments.length ? (t = d, h) : t;
  }, h.ticks = function() {
    return r = SO.call(arguments), h;
  }, h.tickArguments = function(d) {
    return arguments.length ? (r = d == null ? [] : SO.call(d), h) : r.slice();
  }, h.tickValues = function(d) {
    return arguments.length ? (n = d == null ? null : SO.call(d), h) : n && n.slice();
  }, h.tickFormat = function(d) {
    return arguments.length ? (i = d, h) : i;
  }, h.tickSize = function(d) {
    return arguments.length ? (o = a = +d, h) : o;
  }, h.tickSizeInner = function(d) {
    return arguments.length ? (o = +d, h) : o;
  }, h.tickSizeOuter = function(d) {
    return arguments.length ? (a = +d, h) : a;
  }, h.tickPadding = function(d) {
    return arguments.length ? (s = +d, h) : s;
  }, h.offset = function(d) {
    return arguments.length ? (l = +d, h) : l;
  }, h;
}
function UK(e12) {
  return bS(kb, e12);
}
function mFe(e12) {
  return bS(Db, e12);
}
function gFe(e12) {
  return bS(HC, e12);
}
function jK(e12) {
  return bS(Rm, e12);
}
var vFe = Object.freeze(Object.defineProperty({
  __proto__: null,
  axisBottom: gFe,
  axisLeft: jK,
  axisRight: mFe,
  axisTop: UK
}, Symbol.toStringTag, { value: "Module" }));
function yFe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function qU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, bFe(n.key), n);
  }
}
function _Fe(e12, t, r) {
  return t && qU(e12.prototype, t), r && qU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function bFe(e12) {
  var t = TFe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function TFe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function EFe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && UC(e12, t);
}
function UC(e12, t) {
  return UC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, UC(e12, t);
}
function SFe(e12) {
  var t = OFe();
  return function() {
    var n = hT(e12), i;
    if (t) {
      var o = hT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return wFe(this, i);
  };
}
function wFe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return AFe(e12);
}
function AFe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function OFe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function hT(e12) {
  return hT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, hT(e12);
}
var fh = function(e12) {
  EFe(r, e12);
  var t = SFe(r);
  function r(n, i) {
    var o;
    yFe(this, r), o = t.call(this, n, i);
    const {
      svgElement: a
    } = n;
    return o.gMain = Wt(a).append("g"), o.clipUid = Gt.nice(), o.clipRect = o.gMain.append("clipPath").attr("id", `track-bounds-${o.clipUid}`).append("rect"), o.gMain.attr("clip-path", `url(#track-bounds-${o.clipUid})`), o;
  }
  return _Fe(r, [{
    key: "setPosition",
    value: function(i) {
      this.position = i, this.gMain.attr("transform", `translate(${this.position[0]},${this.position[1]})`), this.draw();
    }
  }, {
    key: "setDimensions",
    value: function(i) {
      this.dimensions = i, this._xScale.range([0, this.dimensions[0]]), this._yScale.range([0, this.dimensions[1]]), i[0] >= 0 && i[1] >= 0 ? (this.clipRect.attr("width", i[0]), this.clipRect.attr("height", i[1])) : (this.clipRect.attr("width", 0), this.clipRect.attr("height", 0)), this.draw();
    }
  }, {
    key: "remove",
    value: function() {
      this.gMain.remove(), this.gMain = null;
    }
  }, {
    key: "draw",
    value: function() {
      return this;
    }
  }]), r;
}(Lf);
function IFe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function KU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, CFe(n.key), n);
  }
}
function PFe(e12, t, r) {
  return t && KU(e12.prototype, t), r && KU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function CFe(e12) {
  var t = xFe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function xFe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function wg() {
  return typeof Reflect < "u" && Reflect.get ? wg = Reflect.get.bind() : wg = function(t, r, n) {
    var i = kFe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, wg.apply(this, arguments);
}
function kFe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Du(e12), e12 !== null); )
    ;
  return e12;
}
function DFe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && jC(e12, t);
}
function jC(e12, t) {
  return jC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, jC(e12, t);
}
function RFe(e12) {
  var t = LFe();
  return function() {
    var n = Du(e12), i;
    if (t) {
      var o = Du(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return NFe(this, i);
  };
}
function NFe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return MFe(e12);
}
function MFe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function LFe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Du(e12) {
  return Du = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Du(e12);
}
var GK = function(e12) {
  DFe(r, e12);
  var t = RFe(r);
  function r(n, i) {
    var o;
    return IFe(this, r), o = t.call(this, n, i), o.axis = UK(o._xScale), o.gAxis = o.gMain.append("g"), o.tilesetInfo = true, o;
  }
  return PFe(r, [{
    key: "setDimensions",
    value: function(i) {
      wg(Du(r.prototype), "setDimensions", this).call(this, i), this.axis.ticks(Math.ceil(this.dimensions[0] / 150)), this.gAxis.attr("transform", `translate(0,${i[1]})`);
    }
  }, {
    key: "draw",
    value: function() {
      return this.axis.scale(this._xScale), this.gAxis.call(this.axis), this;
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      wg(Du(r.prototype), "zoomed", this).call(this, i, o), this.draw();
    }
  }]), r;
}(fh);
function BFe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function ZU(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, $Fe(n.key), n);
  }
}
function FFe(e12, t, r) {
  return t && ZU(e12.prototype, t), r && ZU(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function $Fe(e12) {
  var t = HFe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function HFe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Ag() {
  return typeof Reflect < "u" && Reflect.get ? Ag = Reflect.get.bind() : Ag = function(t, r, n) {
    var i = UFe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Ag.apply(this, arguments);
}
function UFe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Ru(e12), e12 !== null); )
    ;
  return e12;
}
function jFe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && GC(e12, t);
}
function GC(e12, t) {
  return GC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, GC(e12, t);
}
function GFe(e12) {
  var t = XFe();
  return function() {
    var n = Ru(e12), i;
    if (t) {
      var o = Ru(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return zFe(this, i);
  };
}
function zFe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return VFe(e12);
}
function VFe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function XFe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Ru(e12) {
  return Ru = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Ru(e12);
}
var zK = function(e12) {
  jFe(r, e12);
  var t = GFe(r);
  function r(n, i) {
    var o;
    return BFe(this, r), o = t.call(this, n, i), o.axis = jK(o._yScale), o.gAxis = o.gMain.append("g"), o.tilesetInfo = true, o;
  }
  return FFe(r, [{
    key: "setDimensions",
    value: function(i) {
      Ag(Ru(r.prototype), "setDimensions", this).call(this, i), this.axis.ticks(Math.ceil(this.dimensions[1] / 150)), this.gAxis.attr("transform", `translate(${i[0]},0)`);
    }
  }, {
    key: "draw",
    value: function() {
      return this.axis.scale(this._yScale), this.gAxis.call(this.axis), this;
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      Ag(Ru(r.prototype), "zoomed", this).call(this, i, o), this.draw();
    }
  }]), r;
}(fh);
var jt = {};
var $r = {};
var vM = 32;
$r.INT_BITS = vM;
$r.INT_MAX = 2147483647;
$r.INT_MIN = -1 << vM - 1;
$r.sign = function(e12) {
  return (e12 > 0) - (e12 < 0);
};
$r.abs = function(e12) {
  var t = e12 >> vM - 1;
  return (e12 ^ t) - t;
};
$r.min = function(e12, t) {
  return t ^ (e12 ^ t) & -(e12 < t);
};
$r.max = function(e12, t) {
  return e12 ^ (e12 ^ t) & -(e12 < t);
};
$r.isPow2 = function(e12) {
  return !(e12 & e12 - 1) && !!e12;
};
$r.log2 = function(e12) {
  var t, r;
  return t = (e12 > 65535) << 4, e12 >>>= t, r = (e12 > 255) << 3, e12 >>>= r, t |= r, r = (e12 > 15) << 2, e12 >>>= r, t |= r, r = (e12 > 3) << 1, e12 >>>= r, t |= r, t | e12 >> 1;
};
$r.log10 = function(e12) {
  return e12 >= 1e9 ? 9 : e12 >= 1e8 ? 8 : e12 >= 1e7 ? 7 : e12 >= 1e6 ? 6 : e12 >= 1e5 ? 5 : e12 >= 1e4 ? 4 : e12 >= 1e3 ? 3 : e12 >= 100 ? 2 : e12 >= 10 ? 1 : 0;
};
$r.popCount = function(e12) {
  return e12 = e12 - (e12 >>> 1 & 1431655765), e12 = (e12 & 858993459) + (e12 >>> 2 & 858993459), (e12 + (e12 >>> 4) & 252645135) * 16843009 >>> 24;
};
function VK(e12) {
  var t = 32;
  return e12 &= -e12, e12 && t--, e12 & 65535 && (t -= 16), e12 & 16711935 && (t -= 8), e12 & 252645135 && (t -= 4), e12 & 858993459 && (t -= 2), e12 & 1431655765 && (t -= 1), t;
}
$r.countTrailingZeros = VK;
$r.nextPow2 = function(e12) {
  return e12 += e12 === 0, --e12, e12 |= e12 >>> 1, e12 |= e12 >>> 2, e12 |= e12 >>> 4, e12 |= e12 >>> 8, e12 |= e12 >>> 16, e12 + 1;
};
$r.prevPow2 = function(e12) {
  return e12 |= e12 >>> 1, e12 |= e12 >>> 2, e12 |= e12 >>> 4, e12 |= e12 >>> 8, e12 |= e12 >>> 16, e12 - (e12 >>> 1);
};
$r.parity = function(e12) {
  return e12 ^= e12 >>> 16, e12 ^= e12 >>> 8, e12 ^= e12 >>> 4, e12 &= 15, 27030 >>> e12 & 1;
};
var Nm = new Array(256);
(function(e12) {
  for (var t = 0; t < 256; ++t) {
    var r = t, n = t, i = 7;
    for (r >>>= 1; r; r >>>= 1)
      n <<= 1, n |= r & 1, --i;
    e12[t] = n << i & 255;
  }
})(Nm);
$r.reverse = function(e12) {
  return Nm[e12 & 255] << 24 | Nm[e12 >>> 8 & 255] << 16 | Nm[e12 >>> 16 & 255] << 8 | Nm[e12 >>> 24 & 255];
};
$r.interleave2 = function(e12, t) {
  return e12 &= 65535, e12 = (e12 | e12 << 8) & 16711935, e12 = (e12 | e12 << 4) & 252645135, e12 = (e12 | e12 << 2) & 858993459, e12 = (e12 | e12 << 1) & 1431655765, t &= 65535, t = (t | t << 8) & 16711935, t = (t | t << 4) & 252645135, t = (t | t << 2) & 858993459, t = (t | t << 1) & 1431655765, e12 | t << 1;
};
$r.deinterleave2 = function(e12, t) {
  return e12 = e12 >>> t & 1431655765, e12 = (e12 | e12 >>> 1) & 858993459, e12 = (e12 | e12 >>> 2) & 252645135, e12 = (e12 | e12 >>> 4) & 16711935, e12 = (e12 | e12 >>> 16) & 65535, e12 << 16 >> 16;
};
$r.interleave3 = function(e12, t, r) {
  return e12 &= 1023, e12 = (e12 | e12 << 16) & 4278190335, e12 = (e12 | e12 << 8) & 251719695, e12 = (e12 | e12 << 4) & 3272356035, e12 = (e12 | e12 << 2) & 1227133513, t &= 1023, t = (t | t << 16) & 4278190335, t = (t | t << 8) & 251719695, t = (t | t << 4) & 3272356035, t = (t | t << 2) & 1227133513, e12 |= t << 1, r &= 1023, r = (r | r << 16) & 4278190335, r = (r | r << 8) & 251719695, r = (r | r << 4) & 3272356035, r = (r | r << 2) & 1227133513, e12 | r << 2;
};
$r.deinterleave3 = function(e12, t) {
  return e12 = e12 >>> t & 1227133513, e12 = (e12 | e12 >>> 2) & 3272356035, e12 = (e12 | e12 >>> 4) & 251719695, e12 = (e12 | e12 >>> 8) & 4278190335, e12 = (e12 | e12 >>> 16) & 1023, e12 << 22 >> 22;
};
$r.nextCombination = function(e12) {
  var t = e12 | e12 - 1;
  return t + 1 | (~t & -~t) - 1 >>> VK(e12) + 1;
};
function XK(e12, t, r) {
  var n = e12[r] | 0;
  if (n <= 0)
    return [];
  var i = new Array(n), o;
  if (r === e12.length - 1)
    for (o = 0; o < n; ++o)
      i[o] = t;
  else
    for (o = 0; o < n; ++o)
      i[o] = XK(e12, t, r + 1);
  return i;
}
function WFe(e12, t) {
  var r, n;
  for (r = new Array(e12), n = 0; n < e12; ++n)
    r[n] = t;
  return r;
}
function YFe(e12, t) {
  switch (typeof t > "u" && (t = 0), typeof e12) {
    case "number":
      if (e12 > 0)
        return WFe(e12 | 0, t);
      break;
    case "object":
      if (typeof e12.length == "number")
        return XK(e12, t, 0);
      break;
  }
  return [];
}
var qFe = YFe;
var WK = {};
var TS = {};
TS.byteLength = QFe;
TS.toByteArray = e$e;
TS.fromByteArray = n$e;
var Oa = [];
var go = [];
var KFe = typeof Uint8Array < "u" ? Uint8Array : Array;
var wO = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
for (Lh = 0, ZFe = wO.length; Lh < ZFe; ++Lh)
  Oa[Lh] = wO[Lh], go[wO.charCodeAt(Lh)] = Lh;
var Lh;
var ZFe;
go["-".charCodeAt(0)] = 62;
go["_".charCodeAt(0)] = 63;
function YK(e12) {
  var t = e12.length;
  if (t % 4 > 0)
    throw new Error("Invalid string. Length must be a multiple of 4");
  var r = e12.indexOf("=");
  r === -1 && (r = t);
  var n = r === t ? 0 : 4 - r % 4;
  return [r, n];
}
function QFe(e12) {
  var t = YK(e12), r = t[0], n = t[1];
  return (r + n) * 3 / 4 - n;
}
function JFe(e12, t, r) {
  return (t + r) * 3 / 4 - r;
}
function e$e(e12) {
  var t, r = YK(e12), n = r[0], i = r[1], o = new KFe(JFe(e12, n, i)), a = 0, s = i > 0 ? n - 4 : n, l;
  for (l = 0; l < s; l += 4)
    t = go[e12.charCodeAt(l)] << 18 | go[e12.charCodeAt(l + 1)] << 12 | go[e12.charCodeAt(l + 2)] << 6 | go[e12.charCodeAt(l + 3)], o[a++] = t >> 16 & 255, o[a++] = t >> 8 & 255, o[a++] = t & 255;
  return i === 2 && (t = go[e12.charCodeAt(l)] << 2 | go[e12.charCodeAt(l + 1)] >> 4, o[a++] = t & 255), i === 1 && (t = go[e12.charCodeAt(l)] << 10 | go[e12.charCodeAt(l + 1)] << 4 | go[e12.charCodeAt(l + 2)] >> 2, o[a++] = t >> 8 & 255, o[a++] = t & 255), o;
}
function t$e(e12) {
  return Oa[e12 >> 18 & 63] + Oa[e12 >> 12 & 63] + Oa[e12 >> 6 & 63] + Oa[e12 & 63];
}
function r$e(e12, t, r) {
  for (var n, i = [], o = t; o < r; o += 3)
    n = (e12[o] << 16 & 16711680) + (e12[o + 1] << 8 & 65280) + (e12[o + 2] & 255), i.push(t$e(n));
  return i.join("");
}
function n$e(e12) {
  for (var t, r = e12.length, n = r % 3, i = [], o = 16383, a = 0, s = r - n; a < s; a += o)
    i.push(r$e(e12, a, a + o > s ? s : a + o));
  return n === 1 ? (t = e12[r - 1], i.push(Oa[t >> 2] + Oa[t << 4 & 63] + "==")) : n === 2 && (t = (e12[r - 2] << 8) + e12[r - 1], i.push(Oa[t >> 10] + Oa[t >> 4 & 63] + Oa[t << 2 & 63] + "=")), i.join("");
}
var yM = {};
yM.read = function(e12, t, r, n, i) {
  var o, a, s = i * 8 - n - 1, l = (1 << s) - 1, u = l >> 1, c = -7, f = r ? i - 1 : 0, h = r ? -1 : 1, d = e12[t + f];
  for (f += h, o = d & (1 << -c) - 1, d >>= -c, c += s; c > 0; o = o * 256 + e12[t + f], f += h, c -= 8)
    ;
  for (a = o & (1 << -c) - 1, o >>= -c, c += n; c > 0; a = a * 256 + e12[t + f], f += h, c -= 8)
    ;
  if (o === 0)
    o = 1 - u;
  else {
    if (o === l)
      return a ? NaN : (d ? -1 : 1) * (1 / 0);
    a = a + Math.pow(2, n), o = o - u;
  }
  return (d ? -1 : 1) * a * Math.pow(2, o - n);
};
yM.write = function(e12, t, r, n, i, o) {
  var a, s, l, u = o * 8 - i - 1, c = (1 << u) - 1, f = c >> 1, h = i === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0, d = n ? 0 : o - 1, p = n ? 1 : -1, m = t < 0 || t === 0 && 1 / t < 0 ? 1 : 0;
  for (t = Math.abs(t), isNaN(t) || t === 1 / 0 ? (s = isNaN(t) ? 1 : 0, a = c) : (a = Math.floor(Math.log(t) / Math.LN2), t * (l = Math.pow(2, -a)) < 1 && (a--, l *= 2), a + f >= 1 ? t += h / l : t += h * Math.pow(2, 1 - f), t * l >= 2 && (a++, l /= 2), a + f >= c ? (s = 0, a = c) : a + f >= 1 ? (s = (t * l - 1) * Math.pow(2, i), a = a + f) : (s = t * Math.pow(2, f - 1) * Math.pow(2, i), a = 0)); i >= 8; e12[r + d] = s & 255, d += p, s /= 256, i -= 8)
    ;
  for (a = a << i | s, u += i; u > 0; e12[r + d] = a & 255, d += p, a /= 256, u -= 8)
    ;
  e12[r + d - p] |= m * 128;
};
(function(e12) {
  function t(H, C) {
    if (!(H instanceof C))
      throw new TypeError("Cannot call a class as a function");
  }
  function r(H, C) {
    for (var M = 0; M < C.length; M++) {
      var Z = C[M];
      Z.enumerable = Z.enumerable || false, Z.configurable = true, "value" in Z && (Z.writable = true), Object.defineProperty(H, i(Z.key), Z);
    }
  }
  function n(H, C, M) {
    return C && r(H.prototype, C), M && r(H, M), Object.defineProperty(H, "prototype", { writable: false }), H;
  }
  function i(H) {
    var C = o(H, "string");
    return typeof C == "symbol" ? C : String(C);
  }
  function o(H, C) {
    if (typeof H != "object" || H === null)
      return H;
    var M = H[Symbol.toPrimitive];
    if (M !== void 0) {
      var Z = M.call(H, C || "default");
      if (typeof Z != "object")
        return Z;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return (C === "string" ? String : Number)(H);
  }
  function a(H, C) {
    if (typeof C != "function" && C !== null)
      throw new TypeError("Super expression must either be null or a function");
    H.prototype = Object.create(C && C.prototype, { constructor: { value: H, writable: true, configurable: true } }), Object.defineProperty(H, "prototype", { writable: false }), C && s(H, C);
  }
  function s(H, C) {
    return s = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(Z, ge) {
      return Z.__proto__ = ge, Z;
    }, s(H, C);
  }
  function l(H) {
    var C = f();
    return function() {
      var Z = h(H), ge;
      if (C) {
        var q = h(this).constructor;
        ge = Reflect.construct(Z, arguments, q);
      } else
        ge = Z.apply(this, arguments);
      return u(this, ge);
    };
  }
  function u(H, C) {
    if (C && (typeof C == "object" || typeof C == "function"))
      return C;
    if (C !== void 0)
      throw new TypeError("Derived constructors may only return object or undefined");
    return c(H);
  }
  function c(H) {
    if (H === void 0)
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return H;
  }
  function f() {
    if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
      return false;
    if (typeof Proxy == "function")
      return true;
    try {
      return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      })), true;
    } catch {
      return false;
    }
  }
  function h(H) {
    return h = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(M) {
      return M.__proto__ || Object.getPrototypeOf(M);
    }, h(H);
  }
  const d = TS, p = yM, m = typeof Symbol == "function" && typeof Symbol.for == "function" ? Symbol.for("nodejs.util.inspect.custom") : null;
  e12.Buffer = y, e12.SlowBuffer = w, e12.INSPECT_MAX_BYTES = 50;
  const g = 2147483647;
  e12.kMaxLength = g, y.TYPED_ARRAY_SUPPORT = v(), !y.TYPED_ARRAY_SUPPORT && typeof console < "u" && typeof console.error == "function" && console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
  function v() {
    try {
      const H = new Uint8Array(1), C = {
        foo: function() {
          return 42;
        }
      };
      return Object.setPrototypeOf(C, Uint8Array.prototype), Object.setPrototypeOf(H, C), H.foo() === 42;
    } catch {
      return false;
    }
  }
  Object.defineProperty(y.prototype, "parent", {
    enumerable: true,
    get: function() {
      if (y.isBuffer(this))
        return this.buffer;
    }
  }), Object.defineProperty(y.prototype, "offset", {
    enumerable: true,
    get: function() {
      if (y.isBuffer(this))
        return this.byteOffset;
    }
  });
  function _(H) {
    if (H > g)
      throw new RangeError('The value "' + H + '" is invalid for option "size"');
    const C = new Uint8Array(H);
    return Object.setPrototypeOf(C, y.prototype), C;
  }
  function y(H, C, M) {
    if (typeof H == "number") {
      if (typeof C == "string")
        throw new TypeError('The "string" argument must be of type string. Received type number');
      return P(H);
    }
    return b(H, C, M);
  }
  y.poolSize = 8192;
  function b(H, C, M) {
    if (typeof H == "string")
      return A(H, C);
    if (ArrayBuffer.isView(H))
      return x(H);
    if (H == null)
      throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof H);
    if (tt(H, ArrayBuffer) || H && tt(H.buffer, ArrayBuffer) || typeof SharedArrayBuffer < "u" && (tt(H, SharedArrayBuffer) || H && tt(H.buffer, SharedArrayBuffer)))
      return S(H, C, M);
    if (typeof H == "number")
      throw new TypeError('The "value" argument must not be of type number. Received type number');
    const Z = H.valueOf && H.valueOf();
    if (Z != null && Z !== H)
      return y.from(Z, C, M);
    const ge = N(H);
    if (ge)
      return ge;
    if (typeof Symbol < "u" && Symbol.toPrimitive != null && typeof H[Symbol.toPrimitive] == "function")
      return y.from(H[Symbol.toPrimitive]("string"), C, M);
    throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof H);
  }
  y.from = function(H, C, M) {
    return b(H, C, M);
  }, Object.setPrototypeOf(y.prototype, Uint8Array.prototype), Object.setPrototypeOf(y, Uint8Array);
  function T(H) {
    if (typeof H != "number")
      throw new TypeError('"size" argument must be of type number');
    if (H < 0)
      throw new RangeError('The value "' + H + '" is invalid for option "size"');
  }
  function E(H, C, M) {
    return T(H), H <= 0 ? _(H) : C !== void 0 ? typeof M == "string" ? _(H).fill(C, M) : _(H).fill(C) : _(H);
  }
  y.alloc = function(H, C, M) {
    return E(H, C, M);
  };
  function P(H) {
    return T(H), _(H < 0 ? 0 : B(H) | 0);
  }
  y.allocUnsafe = function(H) {
    return P(H);
  }, y.allocUnsafeSlow = function(H) {
    return P(H);
  };
  function A(H, C) {
    if ((typeof C != "string" || C === "") && (C = "utf8"), !y.isEncoding(C))
      throw new TypeError("Unknown encoding: " + C);
    const M = R(H, C) | 0;
    let Z = _(M);
    const ge = Z.write(H, C);
    return ge !== M && (Z = Z.slice(0, ge)), Z;
  }
  function I(H) {
    const C = H.length < 0 ? 0 : B(H.length) | 0, M = _(C);
    for (let Z = 0; Z < C; Z += 1)
      M[Z] = H[Z] & 255;
    return M;
  }
  function x(H) {
    if (tt(H, Uint8Array)) {
      const C = new Uint8Array(H);
      return S(C.buffer, C.byteOffset, C.byteLength);
    }
    return I(H);
  }
  function S(H, C, M) {
    if (C < 0 || H.byteLength < C)
      throw new RangeError('"offset" is outside of buffer bounds');
    if (H.byteLength < C + (M || 0))
      throw new RangeError('"length" is outside of buffer bounds');
    let Z;
    return C === void 0 && M === void 0 ? Z = new Uint8Array(H) : M === void 0 ? Z = new Uint8Array(H, C) : Z = new Uint8Array(H, C, M), Object.setPrototypeOf(Z, y.prototype), Z;
  }
  function N(H) {
    if (y.isBuffer(H)) {
      const C = B(H.length) | 0, M = _(C);
      return M.length === 0 || H.copy(M, 0, 0, C), M;
    }
    if (H.length !== void 0)
      return typeof H.length != "number" || ut(H.length) ? _(0) : I(H);
    if (H.type === "Buffer" && Array.isArray(H.data))
      return I(H.data);
  }
  function B(H) {
    if (H >= g)
      throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + g.toString(16) + " bytes");
    return H | 0;
  }
  function w(H) {
    return +H != H && (H = 0), y.alloc(+H);
  }
  y.isBuffer = function(C) {
    return C != null && C._isBuffer === true && C !== y.prototype;
  }, y.compare = function(C, M) {
    if (tt(C, Uint8Array) && (C = y.from(C, C.offset, C.byteLength)), tt(M, Uint8Array) && (M = y.from(M, M.offset, M.byteLength)), !y.isBuffer(C) || !y.isBuffer(M))
      throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
    if (C === M)
      return 0;
    let Z = C.length, ge = M.length;
    for (let q = 0, W = Math.min(Z, ge); q < W; ++q)
      if (C[q] !== M[q]) {
        Z = C[q], ge = M[q];
        break;
      }
    return Z < ge ? -1 : ge < Z ? 1 : 0;
  }, y.isEncoding = function(C) {
    switch (String(C).toLowerCase()) {
      case "hex":
      case "utf8":
      case "utf-8":
      case "ascii":
      case "latin1":
      case "binary":
      case "base64":
      case "ucs2":
      case "ucs-2":
      case "utf16le":
      case "utf-16le":
        return true;
      default:
        return false;
    }
  }, y.concat = function(C, M) {
    if (!Array.isArray(C))
      throw new TypeError('"list" argument must be an Array of Buffers');
    if (C.length === 0)
      return y.alloc(0);
    let Z;
    if (M === void 0)
      for (M = 0, Z = 0; Z < C.length; ++Z)
        M += C[Z].length;
    const ge = y.allocUnsafe(M);
    let q = 0;
    for (Z = 0; Z < C.length; ++Z) {
      let W = C[Z];
      if (tt(W, Uint8Array))
        q + W.length > ge.length ? (y.isBuffer(W) || (W = y.from(W)), W.copy(ge, q)) : Uint8Array.prototype.set.call(ge, W, q);
      else if (y.isBuffer(W))
        W.copy(ge, q);
      else
        throw new TypeError('"list" argument must be an Array of Buffers');
      q += W.length;
    }
    return ge;
  };
  function R(H, C) {
    if (y.isBuffer(H))
      return H.length;
    if (ArrayBuffer.isView(H) || tt(H, ArrayBuffer))
      return H.byteLength;
    if (typeof H != "string")
      throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof H);
    const M = H.length, Z = arguments.length > 2 && arguments[2] === true;
    if (!Z && M === 0)
      return 0;
    let ge = false;
    for (; ; )
      switch (C) {
        case "ascii":
        case "latin1":
        case "binary":
          return M;
        case "utf8":
        case "utf-8":
          return Ce(H).length;
        case "ucs2":
        case "ucs-2":
        case "utf16le":
        case "utf-16le":
          return M * 2;
        case "hex":
          return M >>> 1;
        case "base64":
          return We(H).length;
        default:
          if (ge)
            return Z ? -1 : Ce(H).length;
          C = ("" + C).toLowerCase(), ge = true;
      }
  }
  y.byteLength = R;
  function F(H, C, M) {
    let Z = false;
    if ((C === void 0 || C < 0) && (C = 0), C > this.length || ((M === void 0 || M > this.length) && (M = this.length), M <= 0) || (M >>>= 0, C >>>= 0, M <= C))
      return "";
    for (H || (H = "utf8"); ; )
      switch (H) {
        case "hex":
          return Me(this, C, M);
        case "utf8":
        case "utf-8":
          return Se(this, C, M);
        case "ascii":
          return we(this, C, M);
        case "latin1":
        case "binary":
          return Ne(this, C, M);
        case "base64":
          return le(this, C, M);
        case "ucs2":
        case "ucs-2":
        case "utf16le":
        case "utf-16le":
          return Ie(this, C, M);
        default:
          if (Z)
            throw new TypeError("Unknown encoding: " + H);
          H = (H + "").toLowerCase(), Z = true;
      }
  }
  y.prototype._isBuffer = true;
  function $(H, C, M) {
    const Z = H[C];
    H[C] = H[M], H[M] = Z;
  }
  y.prototype.swap16 = function() {
    const C = this.length;
    if (C % 2 !== 0)
      throw new RangeError("Buffer size must be a multiple of 16-bits");
    for (let M = 0; M < C; M += 2)
      $(this, M, M + 1);
    return this;
  }, y.prototype.swap32 = function() {
    const C = this.length;
    if (C % 4 !== 0)
      throw new RangeError("Buffer size must be a multiple of 32-bits");
    for (let M = 0; M < C; M += 4)
      $(this, M, M + 3), $(this, M + 1, M + 2);
    return this;
  }, y.prototype.swap64 = function() {
    const C = this.length;
    if (C % 8 !== 0)
      throw new RangeError("Buffer size must be a multiple of 64-bits");
    for (let M = 0; M < C; M += 8)
      $(this, M, M + 7), $(this, M + 1, M + 6), $(this, M + 2, M + 5), $(this, M + 3, M + 4);
    return this;
  }, y.prototype.toString = function() {
    const C = this.length;
    return C === 0 ? "" : arguments.length === 0 ? Se(this, 0, C) : F.apply(this, arguments);
  }, y.prototype.toLocaleString = y.prototype.toString, y.prototype.equals = function(C) {
    if (!y.isBuffer(C))
      throw new TypeError("Argument must be a Buffer");
    return this === C ? true : y.compare(this, C) === 0;
  }, y.prototype.inspect = function() {
    let C = "";
    const M = e12.INSPECT_MAX_BYTES;
    return C = this.toString("hex", 0, M).replace(/(.{2})/g, "$1 ").trim(), this.length > M && (C += " ... "), "<Buffer " + C + ">";
  }, m && (y.prototype[m] = y.prototype.inspect), y.prototype.compare = function(C, M, Z, ge, q) {
    if (tt(C, Uint8Array) && (C = y.from(C, C.offset, C.byteLength)), !y.isBuffer(C))
      throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof C);
    if (M === void 0 && (M = 0), Z === void 0 && (Z = C ? C.length : 0), ge === void 0 && (ge = 0), q === void 0 && (q = this.length), M < 0 || Z > C.length || ge < 0 || q > this.length)
      throw new RangeError("out of range index");
    if (ge >= q && M >= Z)
      return 0;
    if (ge >= q)
      return -1;
    if (M >= Z)
      return 1;
    if (M >>>= 0, Z >>>= 0, ge >>>= 0, q >>>= 0, this === C)
      return 0;
    let W = q - ge, j = Z - M;
    const G = Math.min(W, j), ue = this.slice(ge, q), ye = C.slice(M, Z);
    for (let ve = 0; ve < G; ++ve)
      if (ue[ve] !== ye[ve]) {
        W = ue[ve], j = ye[ve];
        break;
      }
    return W < j ? -1 : j < W ? 1 : 0;
  };
  function K(H, C, M, Z, ge) {
    if (H.length === 0)
      return -1;
    if (typeof M == "string" ? (Z = M, M = 0) : M > 2147483647 ? M = 2147483647 : M < -2147483648 && (M = -2147483648), M = +M, ut(M) && (M = ge ? 0 : H.length - 1), M < 0 && (M = H.length + M), M >= H.length) {
      if (ge)
        return -1;
      M = H.length - 1;
    } else if (M < 0)
      if (ge)
        M = 0;
      else
        return -1;
    if (typeof C == "string" && (C = y.from(C, Z)), y.isBuffer(C))
      return C.length === 0 ? -1 : se(H, C, M, Z, ge);
    if (typeof C == "number")
      return C = C & 255, typeof Uint8Array.prototype.indexOf == "function" ? ge ? Uint8Array.prototype.indexOf.call(H, C, M) : Uint8Array.prototype.lastIndexOf.call(H, C, M) : se(H, [C], M, Z, ge);
    throw new TypeError("val must be string, number or Buffer");
  }
  function se(H, C, M, Z, ge) {
    let q = 1, W = H.length, j = C.length;
    if (Z !== void 0 && (Z = String(Z).toLowerCase(), Z === "ucs2" || Z === "ucs-2" || Z === "utf16le" || Z === "utf-16le")) {
      if (H.length < 2 || C.length < 2)
        return -1;
      q = 2, W /= 2, j /= 2, M /= 2;
    }
    function G(ye, ve) {
      return q === 1 ? ye[ve] : ye.readUInt16BE(ve * q);
    }
    let ue;
    if (ge) {
      let ye = -1;
      for (ue = M; ue < W; ue++)
        if (G(H, ue) === G(C, ye === -1 ? 0 : ue - ye)) {
          if (ye === -1 && (ye = ue), ue - ye + 1 === j)
            return ye * q;
        } else
          ye !== -1 && (ue -= ue - ye), ye = -1;
    } else
      for (M + j > W && (M = W - j), ue = M; ue >= 0; ue--) {
        let ye = true;
        for (let ve = 0; ve < j; ve++)
          if (G(H, ue + ve) !== G(C, ve)) {
            ye = false;
            break;
          }
        if (ye)
          return ue;
      }
    return -1;
  }
  y.prototype.includes = function(C, M, Z) {
    return this.indexOf(C, M, Z) !== -1;
  }, y.prototype.indexOf = function(C, M, Z) {
    return K(this, C, M, Z, true);
  }, y.prototype.lastIndexOf = function(C, M, Z) {
    return K(this, C, M, Z, false);
  };
  function J(H, C, M, Z) {
    M = Number(M) || 0;
    const ge = H.length - M;
    Z ? (Z = Number(Z), Z > ge && (Z = ge)) : Z = ge;
    const q = C.length;
    Z > q / 2 && (Z = q / 2);
    let W;
    for (W = 0; W < Z; ++W) {
      const j = parseInt(C.substr(W * 2, 2), 16);
      if (ut(j))
        return W;
      H[M + W] = j;
    }
    return W;
  }
  function me(H, C, M, Z) {
    return Ke(Ce(C, H.length - M), H, M, Z);
  }
  function ae(H, C, M, Z) {
    return Ke(ke(C), H, M, Z);
  }
  function Y(H, C, M, Z) {
    return Ke(We(C), H, M, Z);
  }
  function Q(H, C, M, Z) {
    return Ke(Ve(C, H.length - M), H, M, Z);
  }
  y.prototype.write = function(C, M, Z, ge) {
    if (M === void 0)
      ge = "utf8", Z = this.length, M = 0;
    else if (Z === void 0 && typeof M == "string")
      ge = M, Z = this.length, M = 0;
    else if (isFinite(M))
      M = M >>> 0, isFinite(Z) ? (Z = Z >>> 0, ge === void 0 && (ge = "utf8")) : (ge = Z, Z = void 0);
    else
      throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
    const q = this.length - M;
    if ((Z === void 0 || Z > q) && (Z = q), C.length > 0 && (Z < 0 || M < 0) || M > this.length)
      throw new RangeError("Attempt to write outside buffer bounds");
    ge || (ge = "utf8");
    let W = false;
    for (; ; )
      switch (ge) {
        case "hex":
          return J(this, C, M, Z);
        case "utf8":
        case "utf-8":
          return me(this, C, M, Z);
        case "ascii":
        case "latin1":
        case "binary":
          return ae(this, C, M, Z);
        case "base64":
          return Y(this, C, M, Z);
        case "ucs2":
        case "ucs-2":
        case "utf16le":
        case "utf-16le":
          return Q(this, C, M, Z);
        default:
          if (W)
            throw new TypeError("Unknown encoding: " + ge);
          ge = ("" + ge).toLowerCase(), W = true;
      }
  }, y.prototype.toJSON = function() {
    return {
      type: "Buffer",
      data: Array.prototype.slice.call(this._arr || this, 0)
    };
  };
  function le(H, C, M) {
    return C === 0 && M === H.length ? d.fromByteArray(H) : d.fromByteArray(H.slice(C, M));
  }
  function Se(H, C, M) {
    M = Math.min(H.length, M);
    const Z = [];
    let ge = C;
    for (; ge < M; ) {
      const q = H[ge];
      let W = null, j = q > 239 ? 4 : q > 223 ? 3 : q > 191 ? 2 : 1;
      if (ge + j <= M) {
        let G, ue, ye, ve;
        switch (j) {
          case 1:
            q < 128 && (W = q);
            break;
          case 2:
            G = H[ge + 1], (G & 192) === 128 && (ve = (q & 31) << 6 | G & 63, ve > 127 && (W = ve));
            break;
          case 3:
            G = H[ge + 1], ue = H[ge + 2], (G & 192) === 128 && (ue & 192) === 128 && (ve = (q & 15) << 12 | (G & 63) << 6 | ue & 63, ve > 2047 && (ve < 55296 || ve > 57343) && (W = ve));
            break;
          case 4:
            G = H[ge + 1], ue = H[ge + 2], ye = H[ge + 3], (G & 192) === 128 && (ue & 192) === 128 && (ye & 192) === 128 && (ve = (q & 15) << 18 | (G & 63) << 12 | (ue & 63) << 6 | ye & 63, ve > 65535 && ve < 1114112 && (W = ve));
        }
      }
      W === null ? (W = 65533, j = 1) : W > 65535 && (W -= 65536, Z.push(W >>> 10 & 1023 | 55296), W = 56320 | W & 1023), Z.push(W), ge += j;
    }
    return Re(Z);
  }
  const Pe = 4096;
  function Re(H) {
    const C = H.length;
    if (C <= Pe)
      return String.fromCharCode.apply(String, H);
    let M = "", Z = 0;
    for (; Z < C; )
      M += String.fromCharCode.apply(String, H.slice(Z, Z += Pe));
    return M;
  }
  function we(H, C, M) {
    let Z = "";
    M = Math.min(H.length, M);
    for (let ge = C; ge < M; ++ge)
      Z += String.fromCharCode(H[ge] & 127);
    return Z;
  }
  function Ne(H, C, M) {
    let Z = "";
    M = Math.min(H.length, M);
    for (let ge = C; ge < M; ++ge)
      Z += String.fromCharCode(H[ge]);
    return Z;
  }
  function Me(H, C, M) {
    const Z = H.length;
    (!C || C < 0) && (C = 0), (!M || M < 0 || M > Z) && (M = Z);
    let ge = "";
    for (let q = C; q < M; ++q)
      ge += Dt[H[q]];
    return ge;
  }
  function Ie(H, C, M) {
    const Z = H.slice(C, M);
    let ge = "";
    for (let q = 0; q < Z.length - 1; q += 2)
      ge += String.fromCharCode(Z[q] + Z[q + 1] * 256);
    return ge;
  }
  y.prototype.slice = function(C, M) {
    const Z = this.length;
    C = ~~C, M = M === void 0 ? Z : ~~M, C < 0 ? (C += Z, C < 0 && (C = 0)) : C > Z && (C = Z), M < 0 ? (M += Z, M < 0 && (M = 0)) : M > Z && (M = Z), M < C && (M = C);
    const ge = this.subarray(C, M);
    return Object.setPrototypeOf(ge, y.prototype), ge;
  };
  function Ge(H, C, M) {
    if (H % 1 !== 0 || H < 0)
      throw new RangeError("offset is not uint");
    if (H + C > M)
      throw new RangeError("Trying to access beyond buffer length");
  }
  y.prototype.readUintLE = y.prototype.readUIntLE = function(C, M, Z) {
    C = C >>> 0, M = M >>> 0, Z || Ge(C, M, this.length);
    let ge = this[C], q = 1, W = 0;
    for (; ++W < M && (q *= 256); )
      ge += this[C + W] * q;
    return ge;
  }, y.prototype.readUintBE = y.prototype.readUIntBE = function(C, M, Z) {
    C = C >>> 0, M = M >>> 0, Z || Ge(C, M, this.length);
    let ge = this[C + --M], q = 1;
    for (; M > 0 && (q *= 256); )
      ge += this[C + --M] * q;
    return ge;
  }, y.prototype.readUint8 = y.prototype.readUInt8 = function(C, M) {
    return C = C >>> 0, M || Ge(C, 1, this.length), this[C];
  }, y.prototype.readUint16LE = y.prototype.readUInt16LE = function(C, M) {
    return C = C >>> 0, M || Ge(C, 2, this.length), this[C] | this[C + 1] << 8;
  }, y.prototype.readUint16BE = y.prototype.readUInt16BE = function(C, M) {
    return C = C >>> 0, M || Ge(C, 2, this.length), this[C] << 8 | this[C + 1];
  }, y.prototype.readUint32LE = y.prototype.readUInt32LE = function(C, M) {
    return C = C >>> 0, M || Ge(C, 4, this.length), (this[C] | this[C + 1] << 8 | this[C + 2] << 16) + this[C + 3] * 16777216;
  }, y.prototype.readUint32BE = y.prototype.readUInt32BE = function(C, M) {
    return C = C >>> 0, M || Ge(C, 4, this.length), this[C] * 16777216 + (this[C + 1] << 16 | this[C + 2] << 8 | this[C + 3]);
  }, y.prototype.readBigUInt64LE = gt(function(C) {
    C = C >>> 0, ce(C, "offset");
    const M = this[C], Z = this[C + 7];
    (M === void 0 || Z === void 0) && _e(C, this.length - 8);
    const ge = M + this[++C] * 2 ** 8 + this[++C] * 2 ** 16 + this[++C] * 2 ** 24, q = this[++C] + this[++C] * 2 ** 8 + this[++C] * 2 ** 16 + Z * 2 ** 24;
    return BigInt(ge) + (BigInt(q) << BigInt(32));
  }), y.prototype.readBigUInt64BE = gt(function(C) {
    C = C >>> 0, ce(C, "offset");
    const M = this[C], Z = this[C + 7];
    (M === void 0 || Z === void 0) && _e(C, this.length - 8);
    const ge = M * 2 ** 24 + this[++C] * 2 ** 16 + this[++C] * 2 ** 8 + this[++C], q = this[++C] * 2 ** 24 + this[++C] * 2 ** 16 + this[++C] * 2 ** 8 + Z;
    return (BigInt(ge) << BigInt(32)) + BigInt(q);
  }), y.prototype.readIntLE = function(C, M, Z) {
    C = C >>> 0, M = M >>> 0, Z || Ge(C, M, this.length);
    let ge = this[C], q = 1, W = 0;
    for (; ++W < M && (q *= 256); )
      ge += this[C + W] * q;
    return q *= 128, ge >= q && (ge -= Math.pow(2, 8 * M)), ge;
  }, y.prototype.readIntBE = function(C, M, Z) {
    C = C >>> 0, M = M >>> 0, Z || Ge(C, M, this.length);
    let ge = M, q = 1, W = this[C + --ge];
    for (; ge > 0 && (q *= 256); )
      W += this[C + --ge] * q;
    return q *= 128, W >= q && (W -= Math.pow(2, 8 * M)), W;
  }, y.prototype.readInt8 = function(C, M) {
    return C = C >>> 0, M || Ge(C, 1, this.length), this[C] & 128 ? (255 - this[C] + 1) * -1 : this[C];
  }, y.prototype.readInt16LE = function(C, M) {
    C = C >>> 0, M || Ge(C, 2, this.length);
    const Z = this[C] | this[C + 1] << 8;
    return Z & 32768 ? Z | 4294901760 : Z;
  }, y.prototype.readInt16BE = function(C, M) {
    C = C >>> 0, M || Ge(C, 2, this.length);
    const Z = this[C + 1] | this[C] << 8;
    return Z & 32768 ? Z | 4294901760 : Z;
  }, y.prototype.readInt32LE = function(C, M) {
    return C = C >>> 0, M || Ge(C, 4, this.length), this[C] | this[C + 1] << 8 | this[C + 2] << 16 | this[C + 3] << 24;
  }, y.prototype.readInt32BE = function(C, M) {
    return C = C >>> 0, M || Ge(C, 4, this.length), this[C] << 24 | this[C + 1] << 16 | this[C + 2] << 8 | this[C + 3];
  }, y.prototype.readBigInt64LE = gt(function(C) {
    C = C >>> 0, ce(C, "offset");
    const M = this[C], Z = this[C + 7];
    (M === void 0 || Z === void 0) && _e(C, this.length - 8);
    const ge = this[C + 4] + this[C + 5] * 2 ** 8 + this[C + 6] * 2 ** 16 + (Z << 24);
    return (BigInt(ge) << BigInt(32)) + BigInt(M + this[++C] * 2 ** 8 + this[++C] * 2 ** 16 + this[++C] * 2 ** 24);
  }), y.prototype.readBigInt64BE = gt(function(C) {
    C = C >>> 0, ce(C, "offset");
    const M = this[C], Z = this[C + 7];
    (M === void 0 || Z === void 0) && _e(C, this.length - 8);
    const ge = (M << 24) + // Overflow
    this[++C] * 2 ** 16 + this[++C] * 2 ** 8 + this[++C];
    return (BigInt(ge) << BigInt(32)) + BigInt(this[++C] * 2 ** 24 + this[++C] * 2 ** 16 + this[++C] * 2 ** 8 + Z);
  }), y.prototype.readFloatLE = function(C, M) {
    return C = C >>> 0, M || Ge(C, 4, this.length), p.read(this, C, true, 23, 4);
  }, y.prototype.readFloatBE = function(C, M) {
    return C = C >>> 0, M || Ge(C, 4, this.length), p.read(this, C, false, 23, 4);
  }, y.prototype.readDoubleLE = function(C, M) {
    return C = C >>> 0, M || Ge(C, 8, this.length), p.read(this, C, true, 52, 8);
  }, y.prototype.readDoubleBE = function(C, M) {
    return C = C >>> 0, M || Ge(C, 8, this.length), p.read(this, C, false, 52, 8);
  };
  function je(H, C, M, Z, ge, q) {
    if (!y.isBuffer(H))
      throw new TypeError('"buffer" argument must be a Buffer instance');
    if (C > ge || C < q)
      throw new RangeError('"value" argument is out of bounds');
    if (M + Z > H.length)
      throw new RangeError("Index out of range");
  }
  y.prototype.writeUintLE = y.prototype.writeUIntLE = function(C, M, Z, ge) {
    if (C = +C, M = M >>> 0, Z = Z >>> 0, !ge) {
      const j = Math.pow(2, 8 * Z) - 1;
      je(this, C, M, Z, j, 0);
    }
    let q = 1, W = 0;
    for (this[M] = C & 255; ++W < Z && (q *= 256); )
      this[M + W] = C / q & 255;
    return M + Z;
  }, y.prototype.writeUintBE = y.prototype.writeUIntBE = function(C, M, Z, ge) {
    if (C = +C, M = M >>> 0, Z = Z >>> 0, !ge) {
      const j = Math.pow(2, 8 * Z) - 1;
      je(this, C, M, Z, j, 0);
    }
    let q = Z - 1, W = 1;
    for (this[M + q] = C & 255; --q >= 0 && (W *= 256); )
      this[M + q] = C / W & 255;
    return M + Z;
  }, y.prototype.writeUint8 = y.prototype.writeUInt8 = function(C, M, Z) {
    return C = +C, M = M >>> 0, Z || je(this, C, M, 1, 255, 0), this[M] = C & 255, M + 1;
  }, y.prototype.writeUint16LE = y.prototype.writeUInt16LE = function(C, M, Z) {
    return C = +C, M = M >>> 0, Z || je(this, C, M, 2, 65535, 0), this[M] = C & 255, this[M + 1] = C >>> 8, M + 2;
  }, y.prototype.writeUint16BE = y.prototype.writeUInt16BE = function(C, M, Z) {
    return C = +C, M = M >>> 0, Z || je(this, C, M, 2, 65535, 0), this[M] = C >>> 8, this[M + 1] = C & 255, M + 2;
  }, y.prototype.writeUint32LE = y.prototype.writeUInt32LE = function(C, M, Z) {
    return C = +C, M = M >>> 0, Z || je(this, C, M, 4, 4294967295, 0), this[M + 3] = C >>> 24, this[M + 2] = C >>> 16, this[M + 1] = C >>> 8, this[M] = C & 255, M + 4;
  }, y.prototype.writeUint32BE = y.prototype.writeUInt32BE = function(C, M, Z) {
    return C = +C, M = M >>> 0, Z || je(this, C, M, 4, 4294967295, 0), this[M] = C >>> 24, this[M + 1] = C >>> 16, this[M + 2] = C >>> 8, this[M + 3] = C & 255, M + 4;
  };
  function ot(H, C, M, Z, ge) {
    ne(C, Z, ge, H, M, 7);
    let q = Number(C & BigInt(4294967295));
    H[M++] = q, q = q >> 8, H[M++] = q, q = q >> 8, H[M++] = q, q = q >> 8, H[M++] = q;
    let W = Number(C >> BigInt(32) & BigInt(4294967295));
    return H[M++] = W, W = W >> 8, H[M++] = W, W = W >> 8, H[M++] = W, W = W >> 8, H[M++] = W, M;
  }
  function at(H, C, M, Z, ge) {
    ne(C, Z, ge, H, M, 7);
    let q = Number(C & BigInt(4294967295));
    H[M + 7] = q, q = q >> 8, H[M + 6] = q, q = q >> 8, H[M + 5] = q, q = q >> 8, H[M + 4] = q;
    let W = Number(C >> BigInt(32) & BigInt(4294967295));
    return H[M + 3] = W, W = W >> 8, H[M + 2] = W, W = W >> 8, H[M + 1] = W, W = W >> 8, H[M] = W, M + 8;
  }
  y.prototype.writeBigUInt64LE = gt(function(C, M = 0) {
    return ot(this, C, M, BigInt(0), BigInt("0xffffffffffffffff"));
  }), y.prototype.writeBigUInt64BE = gt(function(C, M = 0) {
    return at(this, C, M, BigInt(0), BigInt("0xffffffffffffffff"));
  }), y.prototype.writeIntLE = function(C, M, Z, ge) {
    if (C = +C, M = M >>> 0, !ge) {
      const G = Math.pow(2, 8 * Z - 1);
      je(this, C, M, Z, G - 1, -G);
    }
    let q = 0, W = 1, j = 0;
    for (this[M] = C & 255; ++q < Z && (W *= 256); )
      C < 0 && j === 0 && this[M + q - 1] !== 0 && (j = 1), this[M + q] = (C / W >> 0) - j & 255;
    return M + Z;
  }, y.prototype.writeIntBE = function(C, M, Z, ge) {
    if (C = +C, M = M >>> 0, !ge) {
      const G = Math.pow(2, 8 * Z - 1);
      je(this, C, M, Z, G - 1, -G);
    }
    let q = Z - 1, W = 1, j = 0;
    for (this[M + q] = C & 255; --q >= 0 && (W *= 256); )
      C < 0 && j === 0 && this[M + q + 1] !== 0 && (j = 1), this[M + q] = (C / W >> 0) - j & 255;
    return M + Z;
  }, y.prototype.writeInt8 = function(C, M, Z) {
    return C = +C, M = M >>> 0, Z || je(this, C, M, 1, 127, -128), C < 0 && (C = 255 + C + 1), this[M] = C & 255, M + 1;
  }, y.prototype.writeInt16LE = function(C, M, Z) {
    return C = +C, M = M >>> 0, Z || je(this, C, M, 2, 32767, -32768), this[M] = C & 255, this[M + 1] = C >>> 8, M + 2;
  }, y.prototype.writeInt16BE = function(C, M, Z) {
    return C = +C, M = M >>> 0, Z || je(this, C, M, 2, 32767, -32768), this[M] = C >>> 8, this[M + 1] = C & 255, M + 2;
  }, y.prototype.writeInt32LE = function(C, M, Z) {
    return C = +C, M = M >>> 0, Z || je(this, C, M, 4, 2147483647, -2147483648), this[M] = C & 255, this[M + 1] = C >>> 8, this[M + 2] = C >>> 16, this[M + 3] = C >>> 24, M + 4;
  }, y.prototype.writeInt32BE = function(C, M, Z) {
    return C = +C, M = M >>> 0, Z || je(this, C, M, 4, 2147483647, -2147483648), C < 0 && (C = 4294967295 + C + 1), this[M] = C >>> 24, this[M + 1] = C >>> 16, this[M + 2] = C >>> 8, this[M + 3] = C & 255, M + 4;
  }, y.prototype.writeBigInt64LE = gt(function(C, M = 0) {
    return ot(this, C, M, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
  }), y.prototype.writeBigInt64BE = gt(function(C, M = 0) {
    return at(this, C, M, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
  });
  function Qe(H, C, M, Z, ge, q) {
    if (M + Z > H.length)
      throw new RangeError("Index out of range");
    if (M < 0)
      throw new RangeError("Index out of range");
  }
  function bt(H, C, M, Z, ge) {
    return C = +C, M = M >>> 0, ge || Qe(H, C, M, 4), p.write(H, C, M, Z, 23, 4), M + 4;
  }
  y.prototype.writeFloatLE = function(C, M, Z) {
    return bt(this, C, M, true, Z);
  }, y.prototype.writeFloatBE = function(C, M, Z) {
    return bt(this, C, M, false, Z);
  };
  function Et(H, C, M, Z, ge) {
    return C = +C, M = M >>> 0, ge || Qe(H, C, M, 8), p.write(H, C, M, Z, 52, 8), M + 8;
  }
  y.prototype.writeDoubleLE = function(C, M, Z) {
    return Et(this, C, M, true, Z);
  }, y.prototype.writeDoubleBE = function(C, M, Z) {
    return Et(this, C, M, false, Z);
  }, y.prototype.copy = function(C, M, Z, ge) {
    if (!y.isBuffer(C))
      throw new TypeError("argument should be a Buffer");
    if (Z || (Z = 0), !ge && ge !== 0 && (ge = this.length), M >= C.length && (M = C.length), M || (M = 0), ge > 0 && ge < Z && (ge = Z), ge === Z || C.length === 0 || this.length === 0)
      return 0;
    if (M < 0)
      throw new RangeError("targetStart out of bounds");
    if (Z < 0 || Z >= this.length)
      throw new RangeError("Index out of range");
    if (ge < 0)
      throw new RangeError("sourceEnd out of bounds");
    ge > this.length && (ge = this.length), C.length - M < ge - Z && (ge = C.length - M + Z);
    const q = ge - Z;
    return this === C && typeof Uint8Array.prototype.copyWithin == "function" ? this.copyWithin(M, Z, ge) : Uint8Array.prototype.set.call(C, this.subarray(Z, ge), M), q;
  }, y.prototype.fill = function(C, M, Z, ge) {
    if (typeof C == "string") {
      if (typeof M == "string" ? (ge = M, M = 0, Z = this.length) : typeof Z == "string" && (ge = Z, Z = this.length), ge !== void 0 && typeof ge != "string")
        throw new TypeError("encoding must be a string");
      if (typeof ge == "string" && !y.isEncoding(ge))
        throw new TypeError("Unknown encoding: " + ge);
      if (C.length === 1) {
        const W = C.charCodeAt(0);
        (ge === "utf8" && W < 128 || ge === "latin1") && (C = W);
      }
    } else
      typeof C == "number" ? C = C & 255 : typeof C == "boolean" && (C = Number(C));
    if (M < 0 || this.length < M || this.length < Z)
      throw new RangeError("Out of range index");
    if (Z <= M)
      return this;
    M = M >>> 0, Z = Z === void 0 ? this.length : Z >>> 0, C || (C = 0);
    let q;
    if (typeof C == "number")
      for (q = M; q < Z; ++q)
        this[q] = C;
    else {
      const W = y.isBuffer(C) ? C : y.from(C, ge), j = W.length;
      if (j === 0)
        throw new TypeError('The value "' + C + '" is invalid for argument "value"');
      for (q = 0; q < Z - M; ++q)
        this[q + M] = W[q % j];
    }
    return this;
  };
  const $t = {};
  function rn(H, C, M) {
    $t[H] = function(Z) {
      a(q, Z);
      var ge = l(q);
      function q() {
        var W;
        return t(this, q), W = ge.call(this), Object.defineProperty(c(W), "message", {
          value: C.apply(c(W), arguments),
          writable: true,
          configurable: true
        }), W.name = `${W.name} [${H}]`, W.stack, delete W.name, W;
      }
      return n(q, [{
        key: "code",
        get: function() {
          return H;
        },
        set: function(W) {
          Object.defineProperty(this, "code", {
            configurable: true,
            enumerable: true,
            value: W,
            writable: true
          });
        }
      }, {
        key: "toString",
        value: function() {
          return `${this.name} [${H}]: ${this.message}`;
        }
      }]), q;
    }(M);
  }
  rn("ERR_BUFFER_OUT_OF_BOUNDS", function(H) {
    return H ? `${H} is outside of buffer bounds` : "Attempt to access memory outside buffer bounds";
  }, RangeError), rn("ERR_INVALID_ARG_TYPE", function(H, C) {
    return `The "${H}" argument must be of type number. Received type ${typeof C}`;
  }, TypeError), rn("ERR_OUT_OF_RANGE", function(H, C, M) {
    let Z = `The value of "${H}" is out of range.`, ge = M;
    return Number.isInteger(M) && Math.abs(M) > 2 ** 32 ? ge = Ht(String(M)) : typeof M == "bigint" && (ge = String(M), (M > BigInt(2) ** BigInt(32) || M < -(BigInt(2) ** BigInt(32))) && (ge = Ht(ge)), ge += "n"), Z += ` It must be ${C}. Received ${ge}`, Z;
  }, RangeError);
  function Ht(H) {
    let C = "", M = H.length;
    const Z = H[0] === "-" ? 1 : 0;
    for (; M >= Z + 4; M -= 3)
      C = `_${H.slice(M - 3, M)}${C}`;
    return `${H.slice(0, M)}${C}`;
  }
  function xe(H, C, M) {
    ce(C, "offset"), (H[C] === void 0 || H[C + M] === void 0) && _e(C, H.length - (M + 1));
  }
  function ne(H, C, M, Z, ge, q) {
    if (H > M || H < C) {
      const W = typeof C == "bigint" ? "n" : "";
      let j;
      throw q > 3 ? C === 0 || C === BigInt(0) ? j = `>= 0${W} and < 2${W} ** ${(q + 1) * 8}${W}` : j = `>= -(2${W} ** ${(q + 1) * 8 - 1}${W}) and < 2 ** ${(q + 1) * 8 - 1}${W}` : j = `>= ${C}${W} and <= ${M}${W}`, new $t.ERR_OUT_OF_RANGE("value", j, H);
    }
    xe(Z, ge, q);
  }
  function ce(H, C) {
    if (typeof H != "number")
      throw new $t.ERR_INVALID_ARG_TYPE(C, "number", H);
  }
  function _e(H, C, M) {
    throw Math.floor(H) !== H ? (ce(H, M), new $t.ERR_OUT_OF_RANGE(M || "offset", "an integer", H)) : C < 0 ? new $t.ERR_BUFFER_OUT_OF_BOUNDS() : new $t.ERR_OUT_OF_RANGE(M || "offset", `>= ${M ? 1 : 0} and <= ${C}`, H);
  }
  const ee = /[^+/0-9A-Za-z-_]/g;
  function de(H) {
    if (H = H.split("=")[0], H = H.trim().replace(ee, ""), H.length < 2)
      return "";
    for (; H.length % 4 !== 0; )
      H = H + "=";
    return H;
  }
  function Ce(H, C) {
    C = C || 1 / 0;
    let M;
    const Z = H.length;
    let ge = null;
    const q = [];
    for (let W = 0; W < Z; ++W) {
      if (M = H.charCodeAt(W), M > 55295 && M < 57344) {
        if (!ge) {
          if (M > 56319) {
            (C -= 3) > -1 && q.push(239, 191, 189);
            continue;
          } else if (W + 1 === Z) {
            (C -= 3) > -1 && q.push(239, 191, 189);
            continue;
          }
          ge = M;
          continue;
        }
        if (M < 56320) {
          (C -= 3) > -1 && q.push(239, 191, 189), ge = M;
          continue;
        }
        M = (ge - 55296 << 10 | M - 56320) + 65536;
      } else
        ge && (C -= 3) > -1 && q.push(239, 191, 189);
      if (ge = null, M < 128) {
        if ((C -= 1) < 0)
          break;
        q.push(M);
      } else if (M < 2048) {
        if ((C -= 2) < 0)
          break;
        q.push(M >> 6 | 192, M & 63 | 128);
      } else if (M < 65536) {
        if ((C -= 3) < 0)
          break;
        q.push(M >> 12 | 224, M >> 6 & 63 | 128, M & 63 | 128);
      } else if (M < 1114112) {
        if ((C -= 4) < 0)
          break;
        q.push(M >> 18 | 240, M >> 12 & 63 | 128, M >> 6 & 63 | 128, M & 63 | 128);
      } else
        throw new Error("Invalid code point");
    }
    return q;
  }
  function ke(H) {
    const C = [];
    for (let M = 0; M < H.length; ++M)
      C.push(H.charCodeAt(M) & 255);
    return C;
  }
  function Ve(H, C) {
    let M, Z, ge;
    const q = [];
    for (let W = 0; W < H.length && !((C -= 2) < 0); ++W)
      M = H.charCodeAt(W), Z = M >> 8, ge = M % 256, q.push(ge), q.push(Z);
    return q;
  }
  function We(H) {
    return d.toByteArray(de(H));
  }
  function Ke(H, C, M, Z) {
    let ge;
    for (ge = 0; ge < Z && !(ge + M >= C.length || ge >= H.length); ++ge)
      C[ge + M] = H[ge];
    return ge;
  }
  function tt(H, C) {
    return H instanceof C || H != null && H.constructor != null && H.constructor.name != null && H.constructor.name === C.name;
  }
  function ut(H) {
    return H !== H;
  }
  const Dt = function() {
    const H = "0123456789abcdef", C = new Array(256);
    for (let M = 0; M < 16; ++M) {
      const Z = M * 16;
      for (let ge = 0; ge < 16; ++ge)
        C[Z + ge] = H[M] + H[ge];
    }
    return C;
  }();
  function gt(H) {
    return typeof BigInt > "u" ? pr : H;
  }
  function pr() {
    throw new Error("BigInt not supported");
  }
})(WK);
var Ql = $r;
var Mn = qFe;
var qK = WK.Buffer;
globalThis.__TYPEDARRAY_POOL || (globalThis.__TYPEDARRAY_POOL = {
  UINT8: Mn([32, 0]),
  UINT16: Mn([32, 0]),
  UINT32: Mn([32, 0]),
  BIGUINT64: Mn([32, 0]),
  INT8: Mn([32, 0]),
  INT16: Mn([32, 0]),
  INT32: Mn([32, 0]),
  BIGINT64: Mn([32, 0]),
  FLOAT: Mn([32, 0]),
  DOUBLE: Mn([32, 0]),
  DATA: Mn([32, 0]),
  UINT8C: Mn([32, 0]),
  BUFFER: Mn([32, 0])
});
var i$e = typeof Uint8ClampedArray < "u";
var o$e = typeof BigUint64Array < "u";
var a$e = typeof BigInt64Array < "u";
var en = globalThis.__TYPEDARRAY_POOL;
en.UINT8C || (en.UINT8C = Mn([32, 0]));
en.BIGUINT64 || (en.BIGUINT64 = Mn([32, 0]));
en.BIGINT64 || (en.BIGINT64 = Mn([32, 0]));
en.BUFFER || (en.BUFFER = Mn([32, 0]));
var ES = en.DATA;
var SS = en.BUFFER;
jt.free = function(t) {
  if (qK.isBuffer(t))
    SS[Ql.log2(t.length)].push(t);
  else {
    if (Object.prototype.toString.call(t) !== "[object ArrayBuffer]" && (t = t.buffer), !t)
      return;
    var r = t.length || t.byteLength, n = Ql.log2(r) | 0;
    ES[n].push(t);
  }
};
function KK(e12) {
  if (e12) {
    var t = e12.length || e12.byteLength, r = Ql.log2(t);
    ES[r].push(e12);
  }
}
function s$e(e12) {
  KK(e12.buffer);
}
jt.freeUint8 = jt.freeUint16 = jt.freeUint32 = jt.freeBigUint64 = jt.freeInt8 = jt.freeInt16 = jt.freeInt32 = jt.freeBigInt64 = jt.freeFloat32 = jt.freeFloat = jt.freeFloat64 = jt.freeDouble = jt.freeUint8Clamped = jt.freeDataView = s$e;
jt.freeArrayBuffer = KK;
jt.freeBuffer = function(t) {
  SS[Ql.log2(t.length)].push(t);
};
jt.malloc = function(t, r) {
  if (r === void 0 || r === "arraybuffer")
    return ji(t);
  switch (r) {
    case "uint8":
      return _M(t);
    case "uint16":
      return ZK(t);
    case "uint32":
      return QK(t);
    case "int8":
      return JK(t);
    case "int16":
      return eZ(t);
    case "int32":
      return tZ(t);
    case "float":
    case "float32":
      return rZ(t);
    case "double":
    case "float64":
      return nZ(t);
    case "uint8_clamped":
      return iZ(t);
    case "bigint64":
      return aZ(t);
    case "biguint64":
      return oZ(t);
    case "buffer":
      return lZ(t);
    case "data":
    case "dataview":
      return sZ(t);
    default:
      return null;
  }
  return null;
};
function ji(t) {
  var t = Ql.nextPow2(t), r = Ql.log2(t), n = ES[r];
  return n.length > 0 ? n.pop() : new ArrayBuffer(t);
}
jt.mallocArrayBuffer = ji;
function _M(e12) {
  return new Uint8Array(ji(e12), 0, e12);
}
jt.mallocUint8 = _M;
function ZK(e12) {
  return new Uint16Array(ji(2 * e12), 0, e12);
}
jt.mallocUint16 = ZK;
function QK(e12) {
  return new Uint32Array(ji(4 * e12), 0, e12);
}
jt.mallocUint32 = QK;
function JK(e12) {
  return new Int8Array(ji(e12), 0, e12);
}
jt.mallocInt8 = JK;
function eZ(e12) {
  return new Int16Array(ji(2 * e12), 0, e12);
}
jt.mallocInt16 = eZ;
function tZ(e12) {
  return new Int32Array(ji(4 * e12), 0, e12);
}
jt.mallocInt32 = tZ;
function rZ(e12) {
  return new Float32Array(ji(4 * e12), 0, e12);
}
jt.mallocFloat32 = jt.mallocFloat = rZ;
function nZ(e12) {
  return new Float64Array(ji(8 * e12), 0, e12);
}
jt.mallocFloat64 = jt.mallocDouble = nZ;
function iZ(e12) {
  return i$e ? new Uint8ClampedArray(ji(e12), 0, e12) : _M(e12);
}
jt.mallocUint8Clamped = iZ;
function oZ(e12) {
  return o$e ? new BigUint64Array(ji(8 * e12), 0, e12) : null;
}
jt.mallocBigUint64 = oZ;
function aZ(e12) {
  return a$e ? new BigInt64Array(ji(8 * e12), 0, e12) : null;
}
jt.mallocBigInt64 = aZ;
function sZ(e12) {
  return new DataView(ji(e12), 0, e12);
}
jt.mallocDataView = sZ;
function lZ(e12) {
  e12 = Ql.nextPow2(e12);
  var t = Ql.log2(e12), r = SS[t];
  return r.length > 0 ? r.pop() : new qK(e12);
}
jt.mallocBuffer = lZ;
jt.clearCache = function() {
  for (var t = 0; t < 32; ++t)
    en.UINT8[t].length = 0, en.UINT16[t].length = 0, en.UINT32[t].length = 0, en.INT8[t].length = 0, en.INT16[t].length = 0, en.INT32[t].length = 0, en.FLOAT[t].length = 0, en.DOUBLE[t].length = 0, en.BIGUINT64[t].length = 0, en.BIGINT64[t].length = 0, en.UINT8C[t].length = 0, ES[t].length = 0, SS[t].length = 0;
};
var l$e = c$e;
var Rb = 32;
function c$e(e12, t) {
  t <= 4 * Rb ? Nb(0, t - 1, e12) : Mb(0, t - 1, e12);
}
function Nb(e12, t, r) {
  for (var n = 2 * (e12 + 1), i = e12 + 1; i <= t; ++i) {
    for (var o = r[n++], a = r[n++], s = i, l = n - 2; s-- > e12; ) {
      var u = r[l - 2], c = r[l - 1];
      if (u < o)
        break;
      if (u === o && c < a)
        break;
      r[l] = u, r[l + 1] = c, l -= 2;
    }
    r[l] = o, r[l + 1] = a;
  }
}
function QU(e12, t, r) {
  e12 *= 2, t *= 2;
  var n = r[e12], i = r[e12 + 1];
  r[e12] = r[t], r[e12 + 1] = r[t + 1], r[t] = n, r[t + 1] = i;
}
function JU(e12, t, r) {
  e12 *= 2, t *= 2, r[e12] = r[t], r[e12 + 1] = r[t + 1];
}
function u$e(e12, t, r, n) {
  e12 *= 2, t *= 2, r *= 2;
  var i = n[e12], o = n[e12 + 1];
  n[e12] = n[t], n[e12 + 1] = n[t + 1], n[t] = n[r], n[t + 1] = n[r + 1], n[r] = i, n[r + 1] = o;
}
function ej(e12, t, r, n, i) {
  e12 *= 2, t *= 2, i[e12] = i[t], i[t] = r, i[e12 + 1] = i[t + 1], i[t + 1] = n;
}
function ss(e12, t, r) {
  e12 *= 2, t *= 2;
  var n = r[e12], i = r[t];
  return n < i ? false : n === i ? r[e12 + 1] > r[t + 1] : true;
}
function D_(e12, t, r, n) {
  e12 *= 2;
  var i = n[e12];
  return i < t ? true : i === t ? n[e12 + 1] < r : false;
}
function Mb(e12, t, r) {
  var n = (t - e12 + 1) / 6 | 0, i = e12 + n, o = t - n, a = e12 + t >> 1, s = a - n, l = a + n, u = i, c = s, f = a, h = l, d = o, p = e12 + 1, m = t - 1, g = 0;
  ss(u, c, r) && (g = u, u = c, c = g), ss(h, d, r) && (g = h, h = d, d = g), ss(u, f, r) && (g = u, u = f, f = g), ss(c, f, r) && (g = c, c = f, f = g), ss(u, h, r) && (g = u, u = h, h = g), ss(f, h, r) && (g = f, f = h, h = g), ss(c, d, r) && (g = c, c = d, d = g), ss(c, f, r) && (g = c, c = f, f = g), ss(h, d, r) && (g = h, h = d, d = g);
  for (var v = r[2 * c], _ = r[2 * c + 1], y = r[2 * h], b = r[2 * h + 1], T = 2 * u, E = 2 * f, P = 2 * d, A = 2 * i, I = 2 * a, x = 2 * o, S = 0; S < 2; ++S) {
    var N = r[T + S], B = r[E + S], w = r[P + S];
    r[A + S] = N, r[I + S] = B, r[x + S] = w;
  }
  JU(s, e12, r), JU(l, t, r);
  for (var R = p; R <= m; ++R)
    if (D_(R, v, _, r))
      R !== p && QU(R, p, r), ++p;
    else if (!D_(R, y, b, r))
      for (; ; )
        if (D_(m, y, b, r)) {
          D_(m, v, _, r) ? (u$e(R, p, m, r), ++p, --m) : (QU(R, m, r), --m);
          break;
        } else {
          if (--m < R)
            break;
          continue;
        }
  ej(e12, p - 1, v, _, r), ej(t, m + 1, y, b, r), p - 2 - e12 <= Rb ? Nb(e12, p - 2, r) : Mb(e12, p - 2, r), t - (m + 2) <= Rb ? Nb(m + 2, t, r) : Mb(m + 2, t, r), m - p <= Rb ? Nb(p, m, r) : Mb(p, m, r);
}
var cZ = {
  init: f$e,
  sweepBipartite: d$e,
  sweepComplete: p$e,
  scanBipartite: m$e,
  scanComplete: g$e
};
var Jr = jt;
var h$e = $r;
var wS = l$e;
var ro = 1 << 28;
var dh = 1024;
var Fn = Jr.mallocInt32(dh);
var xs = Jr.mallocInt32(dh);
var ks = Jr.mallocInt32(dh);
var ou = Jr.mallocInt32(dh);
var Hf = Jr.mallocInt32(dh);
var Og = Jr.mallocInt32(dh);
var Lt = Jr.mallocDouble(dh * 8);
function f$e(e12) {
  var t = h$e.nextPow2(e12);
  Fn.length < t && (Jr.free(Fn), Fn = Jr.mallocInt32(t)), xs.length < t && (Jr.free(xs), xs = Jr.mallocInt32(t)), ks.length < t && (Jr.free(ks), ks = Jr.mallocInt32(t)), ou.length < t && (Jr.free(ou), ou = Jr.mallocInt32(t)), Hf.length < t && (Jr.free(Hf), Hf = Jr.mallocInt32(t)), Og.length < t && (Jr.free(Og), Og = Jr.mallocInt32(t));
  var r = 8 * t;
  Lt.length < r && (Jr.free(Lt), Lt = Jr.mallocDouble(r));
}
function Uf(e12, t, r, n) {
  var i = t[n], o = e12[r - 1];
  e12[i] = o, t[o] = i;
}
function jf(e12, t, r, n) {
  e12[r] = n, t[n] = r;
}
function d$e(e12, t, r, n, i, o, a, s, l, u) {
  for (var c = 0, f = 2 * e12, h = e12 - 1, d = f - 1, p = r; p < n; ++p) {
    var m = o[p], g = f * p;
    Lt[c++] = i[g + h], Lt[c++] = -(m + 1), Lt[c++] = i[g + d], Lt[c++] = m;
  }
  for (var p = a; p < s; ++p) {
    var m = u[p] + ro, v = f * p;
    Lt[c++] = l[v + h], Lt[c++] = -m, Lt[c++] = l[v + d], Lt[c++] = m;
  }
  var _ = c >>> 1;
  wS(Lt, _);
  for (var y = 0, b = 0, p = 0; p < _; ++p) {
    var T = Lt[2 * p + 1] | 0;
    if (T >= ro)
      T = T - ro | 0, Uf(ks, ou, b--, T);
    else if (T >= 0)
      Uf(Fn, xs, y--, T);
    else if (T <= -ro) {
      T = -T - ro | 0;
      for (var E = 0; E < y; ++E) {
        var P = t(Fn[E], T);
        if (P !== void 0)
          return P;
      }
      jf(ks, ou, b++, T);
    } else {
      T = -T - 1 | 0;
      for (var E = 0; E < b; ++E) {
        var P = t(T, ks[E]);
        if (P !== void 0)
          return P;
      }
      jf(Fn, xs, y++, T);
    }
  }
}
function p$e(e12, t, r, n, i, o, a, s, l, u) {
  for (var c = 0, f = 2 * e12, h = e12 - 1, d = f - 1, p = r; p < n; ++p) {
    var m = o[p] + 1 << 1, g = f * p;
    Lt[c++] = i[g + h], Lt[c++] = -m, Lt[c++] = i[g + d], Lt[c++] = m;
  }
  for (var p = a; p < s; ++p) {
    var m = u[p] + 1 << 1, v = f * p;
    Lt[c++] = l[v + h], Lt[c++] = -m | 1, Lt[c++] = l[v + d], Lt[c++] = m | 1;
  }
  var _ = c >>> 1;
  wS(Lt, _);
  for (var y = 0, b = 0, T = 0, p = 0; p < _; ++p) {
    var E = Lt[2 * p + 1] | 0, P = E & 1;
    if (p < _ - 1 && E >> 1 === Lt[2 * p + 3] >> 1 && (P = 2, p += 1), E < 0) {
      for (var A = -(E >> 1) - 1, I = 0; I < T; ++I) {
        var x = t(Hf[I], A);
        if (x !== void 0)
          return x;
      }
      if (P !== 0)
        for (var I = 0; I < y; ++I) {
          var x = t(Fn[I], A);
          if (x !== void 0)
            return x;
        }
      if (P !== 1)
        for (var I = 0; I < b; ++I) {
          var x = t(ks[I], A);
          if (x !== void 0)
            return x;
        }
      P === 0 ? jf(Fn, xs, y++, A) : P === 1 ? jf(ks, ou, b++, A) : P === 2 && jf(Hf, Og, T++, A);
    } else {
      var A = (E >> 1) - 1;
      P === 0 ? Uf(Fn, xs, y--, A) : P === 1 ? Uf(ks, ou, b--, A) : P === 2 && Uf(Hf, Og, T--, A);
    }
  }
}
function m$e(e12, t, r, n, i, o, a, s, l, u, c, f) {
  var h = 0, d = 2 * e12, p = t, m = t + e12, g = 1, v = 1;
  n ? v = ro : g = ro;
  for (var _ = i; _ < o; ++_) {
    var y = _ + g, b = d * _;
    Lt[h++] = a[b + p], Lt[h++] = -y, Lt[h++] = a[b + m], Lt[h++] = y;
  }
  for (var _ = l; _ < u; ++_) {
    var y = _ + v, T = d * _;
    Lt[h++] = c[T + p], Lt[h++] = -y;
  }
  var E = h >>> 1;
  wS(Lt, E);
  for (var P = 0, _ = 0; _ < E; ++_) {
    var A = Lt[2 * _ + 1] | 0;
    if (A < 0) {
      var y = -A, I = false;
      if (y >= ro ? (I = !n, y -= ro) : (I = !!n, y -= 1), I)
        jf(Fn, xs, P++, y);
      else {
        var x = f[y], S = d * y, N = c[S + t + 1], B = c[S + t + 1 + e12];
        e:
          for (var w = 0; w < P; ++w) {
            var R = Fn[w], F = d * R;
            if (!(B < a[F + t + 1] || a[F + t + 1 + e12] < N)) {
              for (var $ = t + 2; $ < e12; ++$)
                if (c[S + $ + e12] < a[F + $] || a[F + $ + e12] < c[S + $])
                  continue e;
              var K = s[R], se;
              if (n ? se = r(x, K) : se = r(K, x), se !== void 0)
                return se;
            }
          }
      }
    } else
      Uf(Fn, xs, P--, A - g);
  }
}
function g$e(e12, t, r, n, i, o, a, s, l, u, c) {
  for (var f = 0, h = 2 * e12, d = t, p = t + e12, m = n; m < i; ++m) {
    var g = m + ro, v = h * m;
    Lt[f++] = o[v + d], Lt[f++] = -g, Lt[f++] = o[v + p], Lt[f++] = g;
  }
  for (var m = s; m < l; ++m) {
    var g = m + 1, _ = h * m;
    Lt[f++] = u[_ + d], Lt[f++] = -g;
  }
  var y = f >>> 1;
  wS(Lt, y);
  for (var b = 0, m = 0; m < y; ++m) {
    var T = Lt[2 * m + 1] | 0;
    if (T < 0) {
      var g = -T;
      if (g >= ro)
        Fn[b++] = g - ro;
      else {
        g -= 1;
        var E = c[g], P = h * g, A = u[P + t + 1], I = u[P + t + 1 + e12];
        e:
          for (var x = 0; x < b; ++x) {
            var S = Fn[x], N = a[S];
            if (N === E)
              break;
            var B = h * S;
            if (!(I < o[B + t + 1] || o[B + t + 1 + e12] < A)) {
              for (var w = t + 2; w < e12; ++w)
                if (u[P + w + e12] < o[B + w] || o[B + w + e12] < u[P + w])
                  continue e;
              var R = r(N, E);
              if (R !== void 0)
                return R;
            }
          }
      }
    } else {
      for (var g = T - ro, x = b - 1; x >= 0; --x)
        if (Fn[x] === g) {
          for (var w = x + 1; w < b; ++w)
            Fn[w - 1] = Fn[w];
          break;
        }
      --b;
    }
  }
}
var bM = {};
var Bc = "d";
var Wh = "ax";
var uZ = "vv";
var AO = "fp";
var cm = "es";
var fT = "rs";
var TM = "re";
var Mm = "rb";
var hZ = "ri";
var Bh = "rp";
var dT = "bs";
var EM = "be";
var Lm = "bb";
var fZ = "bi";
var Fh = "bp";
var OO = "rv";
var IO = "Q";
var zC = [Bc, Wh, uZ, fT, TM, Mm, hZ, dT, EM, Lm, fZ];
function v$e(e12, t, r) {
  var n = "bruteForce" + (e12 ? "Red" : "Blue") + (t ? "Flip" : "") + (r ? "Full" : ""), i = ["function ", n, "(", zC.join(), "){", "var ", cm, "=2*", Bc, ";"], o = "for(var i=" + fT + "," + Bh + "=" + cm + "*" + fT + ";i<" + TM + ";++i," + Bh + "+=" + cm + "){var x0=" + Mm + "[" + Wh + "+" + Bh + "],x1=" + Mm + "[" + Wh + "+" + Bh + "+" + Bc + "],xi=" + hZ + "[i];", a = "for(var j=" + dT + "," + Fh + "=" + cm + "*" + dT + ";j<" + EM + ";++j," + Fh + "+=" + cm + "){var y0=" + Lm + "[" + Wh + "+" + Fh + "]," + (r ? "y1=" + Lm + "[" + Wh + "+" + Fh + "+" + Bc + "]," : "") + "yi=" + fZ + "[j];";
  return e12 ? i.push(o, IO, ":", a) : i.push(a, IO, ":", o), r ? i.push("if(y1<x0||x1<y0)continue;") : t ? i.push("if(y0<=x0||x1<y0)continue;") : i.push("if(y0<x0||x1<y0)continue;"), i.push("for(var k=" + Wh + "+1;k<" + Bc + ";++k){var r0=" + Mm + "[k+" + Bh + "],r1=" + Mm + "[k+" + Bc + "+" + Bh + "],b0=" + Lm + "[k+" + Fh + "],b1=" + Lm + "[k+" + Bc + "+" + Fh + "];if(r1<b0||b1<r0)continue " + IO + ";}var " + OO + "=" + uZ + "("), t ? i.push("yi,xi") : i.push("xi,yi"), i.push(");if(" + OO + "!==void 0)return " + OO + ";}}}"), {
    name: n,
    code: i.join("")
  };
}
function dZ(e12) {
  var t = "bruteForce" + (e12 ? "Full" : "Partial"), r = [], n = zC.slice();
  e12 || n.splice(3, 0, AO);
  var i = ["function " + t + "(" + n.join() + "){"];
  function o(l, u) {
    var c = v$e(l, u, e12);
    r.push(c.code), i.push("return " + c.name + "(" + zC.join() + ");");
  }
  i.push("if(" + TM + "-" + fT + ">" + EM + "-" + dT + "){"), e12 ? (o(true, false), i.push("}else{"), o(false, false)) : (i.push("if(" + AO + "){"), o(true, true), i.push("}else{"), o(true, false), i.push("}}else{if(" + AO + "){"), o(false, true), i.push("}else{"), o(false, false), i.push("}")), i.push("}}return " + t);
  var a = r.join("") + i.join(""), s = new Function(a);
  return s();
}
bM.partial = dZ(false);
bM.full = dZ(true);
var pZ = _$e;
var y$e = "for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";
function _$e(e12, t) {
  var r = "abcdef".split("").concat(t), n = [];
  return e12.indexOf("lo") >= 0 && n.push("lo=e[k+n]"), e12.indexOf("hi") >= 0 && n.push("hi=e[k+o]"), r.push(y$e.replace("_", n.join()).replace("$", e12)), Function.apply(void 0, r);
}
var b$e = w$e;
var T$e = pZ;
var tj = T$e("lo<p0", ["p0"]);
var E$e = 8;
function S$e(e12, t, r, n, i, o) {
  for (var a = 2 * e12, s = a * (r + 1) + t, l = r + 1; l < n; ++l, s += a)
    for (var u = i[s], c = l, f = a * (l - 1); c > r && i[f + t] > u; --c, f -= a) {
      for (var h = f, d = f + a, p = 0; p < a; ++p, ++h, ++d) {
        var m = i[h];
        i[h] = i[d], i[d] = m;
      }
      var g = o[c];
      o[c] = o[c - 1], o[c - 1] = g;
    }
}
function w$e(e12, t, r, n, i, o) {
  if (n <= r + 1)
    return r;
  for (var a = r, s = n, l = n + r >>> 1, u = 2 * e12, c = l, f = i[u * l + t]; a < s; ) {
    if (s - a < E$e) {
      S$e(e12, t, a, s, i, o), f = i[u * l + t];
      break;
    }
    var h = s - a, d = Math.random() * h + a | 0, p = i[u * d + t], m = Math.random() * h + a | 0, g = i[u * m + t], v = Math.random() * h + a | 0, _ = i[u * v + t];
    p <= g ? _ >= g ? (c = m, f = g) : p >= _ ? (c = d, f = p) : (c = v, f = _) : g >= _ ? (c = m, f = g) : _ >= p ? (c = d, f = p) : (c = v, f = _);
    for (var T = u * (s - 1), E = u * c, y = 0; y < u; ++y, ++T, ++E) {
      var b = i[T];
      i[T] = i[E], i[E] = b;
    }
    var P = o[s - 1];
    o[s - 1] = o[c], o[c] = P, c = tj(e12, t, a, s - 1, i, o, f);
    for (var T = u * (s - 1), E = u * c, y = 0; y < u; ++y, ++T, ++E) {
      var b = i[T];
      i[T] = i[E], i[E] = b;
    }
    var P = o[s - 1];
    if (o[s - 1] = o[c], o[c] = P, l < c) {
      for (s = c - 1; a < s && i[u * (s - 1) + t] === f; )
        s -= 1;
      s += 1;
    } else if (c < l)
      for (a = c + 1; a < s && i[u * a + t] === f; )
        a += 1;
    else
      break;
  }
  return tj(e12, t, r, l, i, o, i[u * l + t]);
}
var A$e = F$e;
var _f = jt;
var PO = $r;
var mZ = bM;
var O$e = mZ.partial;
var I$e = mZ.full;
var cl = cZ;
var P$e = b$e;
var Sp = pZ;
var rj = 128;
var C$e = 1 << 22;
var x$e = 1 << 22;
var k$e = Sp("!(lo>=p0)&&!(p1>=hi)", ["p0", "p1"]);
var nj = Sp("lo===p0", ["p0"]);
var D$e = Sp("lo<p0", ["p0"]);
var R$e = Sp("hi<=p0", ["p0"]);
var ij = Sp("lo<=p0&&p0<=hi", ["p0"]);
var N$e = Sp("lo<p0&&p0<=hi", ["p0"]);
var SM = 6;
var wM = 2;
var gZ = 1024;
var pi = _f.mallocInt32(gZ);
var au = _f.mallocDouble(gZ);
function M$e(e12, t) {
  var r = 8 * PO.log2(t + 1) * (e12 + 1) | 0, n = PO.nextPow2(SM * r);
  pi.length < n && (_f.free(pi), pi = _f.mallocInt32(n));
  var i = PO.nextPow2(wM * r);
  au.length < i && (_f.free(au), au = _f.mallocDouble(i));
}
function Lo(e12, t, r, n, i, o, a, s, l) {
  var u = SM * e12;
  pi[u] = t, pi[u + 1] = r, pi[u + 2] = n, pi[u + 3] = i, pi[u + 4] = o, pi[u + 5] = a;
  var c = wM * e12;
  au[c] = s, au[c + 1] = l;
}
function L$e(e12, t, r, n, i, o, a, s, l, u, c) {
  var f = 2 * e12, h = l * f, d = u[h + t];
  e:
    for (var p = i, m = i * f; p < o; ++p, m += f) {
      var g = a[m + t], v = a[m + t + e12];
      if (!(d < g || v < d) && !(n && d === g)) {
        for (var _ = s[p], y = t + 1; y < e12; ++y) {
          var g = a[m + y], v = a[m + y + e12], b = u[h + y], T = u[h + y + e12];
          if (v < b || T < g)
            continue e;
        }
        var E;
        if (n ? E = r(c, _) : E = r(_, c), E !== void 0)
          return E;
      }
    }
}
function B$e(e12, t, r, n, i, o, a, s, l, u) {
  var c = 2 * e12, f = s * c, h = l[f + t];
  e:
    for (var d = n, p = n * c; d < i; ++d, p += c) {
      var m = a[d];
      if (m !== u) {
        var g = o[p + t], v = o[p + t + e12];
        if (!(h < g || v < h)) {
          for (var _ = t + 1; _ < e12; ++_) {
            var g = o[p + _], v = o[p + _ + e12], y = l[f + _], b = l[f + _ + e12];
            if (v < y || b < g)
              continue e;
          }
          var T = r(m, u);
          if (T !== void 0)
            return T;
        }
      }
    }
}
function F$e(e12, t, r, n, i, o, a, s, l) {
  M$e(e12, n + a);
  var u = 0, c = 2 * e12, f;
  for (Lo(u++, 0, 0, n, 0, a, r ? 16 : 0, -1 / 0, 1 / 0), r || Lo(u++, 0, 0, a, 0, n, 1, -1 / 0, 1 / 0); u > 0; ) {
    u -= 1;
    var h = u * SM, d = pi[h], p = pi[h + 1], m = pi[h + 2], g = pi[h + 3], v = pi[h + 4], _ = pi[h + 5], y = u * wM, b = au[y], T = au[y + 1], E = _ & 1, P = !!(_ & 16), A = i, I = o, x = s, S = l;
    if (E && (A = s, I = l, x = i, S = o), !(_ & 2 && (m = D$e(e12, d, p, m, A, I, T), p >= m)) && !(_ & 4 && (p = R$e(e12, d, p, m, A, I, b), p >= m))) {
      var N = m - p, B = v - g;
      if (P) {
        if (e12 * N * (N + B) < x$e) {
          if (f = cl.scanComplete(e12, d, t, p, m, A, I, g, v, x, S), f !== void 0)
            return f;
          continue;
        }
      } else if (e12 * Math.min(N, B) < rj) {
        if (f = O$e(e12, d, t, E, p, m, A, I, g, v, x, S), f !== void 0)
          return f;
        continue;
      } else if (e12 * N * B < C$e) {
        if (f = cl.scanBipartite(e12, d, t, E, p, m, A, I, g, v, x, S), f !== void 0)
          return f;
        continue;
      }
      var w = k$e(e12, d, p, m, A, I, b, T);
      if (p < w)
        if (e12 * (w - p) < rj) {
          if (f = I$e(e12, d + 1, t, p, w, A, I, g, v, x, S), f !== void 0)
            return f;
        } else if (d === e12 - 2) {
          if (E ? f = cl.sweepBipartite(e12, t, g, v, x, S, p, w, A, I) : f = cl.sweepBipartite(e12, t, p, w, A, I, g, v, x, S), f !== void 0)
            return f;
        } else
          Lo(u++, d + 1, p, w, g, v, E, -1 / 0, 1 / 0), Lo(u++, d + 1, g, v, p, w, E ^ 1, -1 / 0, 1 / 0);
      if (w < m) {
        var R = P$e(e12, d, g, v, x, S), F = x[c * R + d], $ = nj(e12, d, R, v, x, S, F);
        if ($ < v && Lo(u++, d, w, m, $, v, (E | 4) + (P ? 16 : 0), F, T), g < R && Lo(u++, d, w, m, g, R, (E | 2) + (P ? 16 : 0), b, F), R + 1 === $) {
          if (P ? f = B$e(e12, d, t, w, m, A, I, R, x, S[R]) : f = L$e(e12, d, t, E, w, m, A, I, R, x, S[R]), f !== void 0)
            return f;
        } else if (R < $) {
          var K;
          if (P) {
            if (K = ij(e12, d, w, m, A, I, F), w < K) {
              var se = nj(e12, d, w, K, A, I, F);
              if (d === e12 - 2) {
                if (w < se && (f = cl.sweepComplete(e12, t, w, se, A, I, R, $, x, S), f !== void 0) || se < K && (f = cl.sweepBipartite(e12, t, se, K, A, I, R, $, x, S), f !== void 0))
                  return f;
              } else
                w < se && Lo(u++, d + 1, w, se, R, $, 16, -1 / 0, 1 / 0), se < K && (Lo(u++, d + 1, se, K, R, $, 0, -1 / 0, 1 / 0), Lo(u++, d + 1, R, $, se, K, 1, -1 / 0, 1 / 0));
            }
          } else
            E ? K = N$e(e12, d, w, m, A, I, F) : K = ij(e12, d, w, m, A, I, F), w < K && (d === e12 - 2 ? E ? f = cl.sweepBipartite(e12, t, R, $, x, S, w, K, A, I) : f = cl.sweepBipartite(e12, t, w, K, A, I, R, $, x, S) : (Lo(u++, d + 1, w, K, R, $, E, -1 / 0, 1 / 0), Lo(u++, d + 1, R, $, w, K, E ^ 1, -1 / 0, 1 / 0)));
        }
      }
    }
  }
}
var $$e = z$e;
var ul = jt;
var R_ = cZ;
var H$e = A$e;
function U$e(e12, t) {
  for (var r = 0; r < e12; ++r)
    if (!(t[r] <= t[r + e12]))
      return true;
  return false;
}
function oj(e12, t, r, n) {
  for (var i = 0, o = 0, a = 0, s = e12.length; a < s; ++a) {
    var l = e12[a];
    if (!U$e(t, l)) {
      for (var u = 0; u < 2 * t; ++u)
        r[i++] = l[u];
      n[o++] = a;
    }
  }
  return o;
}
function pT(e12, t, r, n) {
  var i = e12.length, o = t.length;
  if (!(i <= 0 || o <= 0)) {
    var a = e12[0].length >>> 1;
    if (!(a <= 0)) {
      var s, l = ul.mallocDouble(2 * a * i), u = ul.mallocInt32(i);
      if (i = oj(e12, a, l, u), i > 0) {
        if (a === 1 && n)
          R_.init(i), s = R_.sweepComplete(a, r, 0, i, l, u, 0, i, l, u);
        else {
          var c = ul.mallocDouble(2 * a * o), f = ul.mallocInt32(o);
          o = oj(t, a, c, f), o > 0 && (R_.init(i + o), a === 1 ? s = R_.sweepBipartite(a, r, 0, i, l, u, 0, o, c, f) : s = H$e(a, r, n, i, l, u, o, c, f), ul.free(c), ul.free(f));
        }
        ul.free(l), ul.free(u);
      }
      return s;
    }
  }
}
var bv;
function vZ(e12, t) {
  bv.push([e12, t]);
}
function j$e(e12) {
  return bv = [], pT(e12, e12, vZ, true), bv;
}
function G$e(e12, t) {
  return bv = [], pT(e12, t, vZ, false), bv;
}
function z$e(e12, t, r) {
  switch (arguments.length) {
    case 1:
      return j$e(e12);
    case 2:
      return typeof t == "function" ? pT(e12, e12, t, true) : G$e(e12, t);
    case 3:
      return pT(e12, t, r, false);
    default:
      throw new Error("box-intersect: Invalid arguments");
  }
}
var vy = Ui($$e);
var yZ = { exports: {} };
var _Z = V$e;
var aj = +(Math.pow(2, 27) + 1);
function V$e(e12, t, r) {
  var n = e12 * t, i = aj * e12, o = i - e12, a = i - o, s = e12 - a, l = aj * t, u = l - t, c = l - u, f = t - c, h = n - a * c, d = h - s * c, p = d - a * f, m = s * f - p;
  return r ? (r[0] = m, r[1] = n, r) : [m, n];
}
var X$e = Y$e;
function W$e(e12, t) {
  var r = e12 + t, n = r - e12, i = r - n, o = t - n, a = e12 - i, s = a + o;
  return s ? [s, r] : [r];
}
function Y$e(e12, t) {
  var r = e12.length | 0, n = t.length | 0;
  if (r === 1 && n === 1)
    return W$e(e12[0], t[0]);
  var i = r + n, o = new Array(i), a = 0, s = 0, l = 0, u = Math.abs, c = e12[s], f = u(c), h = t[l], d = u(h), p, m;
  f < d ? (m = c, s += 1, s < r && (c = e12[s], f = u(c))) : (m = h, l += 1, l < n && (h = t[l], d = u(h))), s < r && f < d || l >= n ? (p = c, s += 1, s < r && (c = e12[s], f = u(c))) : (p = h, l += 1, l < n && (h = t[l], d = u(h)));
  for (var g = p + m, v = g - p, _ = m - v, y = _, b = g, T, E, P, A, I; s < r && l < n; )
    f < d ? (p = c, s += 1, s < r && (c = e12[s], f = u(c))) : (p = h, l += 1, l < n && (h = t[l], d = u(h))), m = y, g = p + m, v = g - p, _ = m - v, _ && (o[a++] = _), T = b + g, E = T - b, P = T - E, A = g - E, I = b - P, y = I + A, b = T;
  for (; s < r; )
    p = c, m = y, g = p + m, v = g - p, _ = m - v, _ && (o[a++] = _), T = b + g, E = T - b, P = T - E, A = g - E, I = b - P, y = I + A, b = T, s += 1, s < r && (c = e12[s]);
  for (; l < n; )
    p = h, m = y, g = p + m, v = g - p, _ = m - v, _ && (o[a++] = _), T = b + g, E = T - b, P = T - E, A = g - E, I = b - P, y = I + A, b = T, l += 1, l < n && (h = t[l]);
  return y && (o[a++] = y), b && (o[a++] = b), a || (o[a++] = 0), o.length = a, o;
}
var q$e = K$e;
function K$e(e12, t, r) {
  var n = e12 + t, i = n - e12, o = n - i, a = t - i, s = e12 - o;
  return r ? (r[0] = s + a, r[1] = n, r) : [s + a, n];
}
var CO = _Z;
var Z$e = q$e;
var Q$e = J$e;
function J$e(e12, t) {
  var r = e12.length;
  if (r === 1) {
    var n = CO(e12[0], t);
    return n[0] ? n : [n[1]];
  }
  var i = new Array(2 * r), o = [0.1, 0.1], a = [0.1, 0.1], s = 0;
  CO(e12[0], t, o), o[0] && (i[s++] = o[0]);
  for (var l = 1; l < r; ++l) {
    CO(e12[l], t, a);
    var u = o[1];
    Z$e(u, a[0], o), o[0] && (i[s++] = o[0]);
    var c = a[1], f = o[1], h = c + f, d = h - c, p = f - d;
    o[1] = h, p && (i[s++] = p);
  }
  return o[1] && (i[s++] = o[1]), s === 0 && (i[s++] = 0), i.length = s, i;
}
var eHe = rHe;
function tHe(e12, t) {
  var r = e12 + t, n = r - e12, i = r - n, o = t - n, a = e12 - i, s = a + o;
  return s ? [s, r] : [r];
}
function rHe(e12, t) {
  var r = e12.length | 0, n = t.length | 0;
  if (r === 1 && n === 1)
    return tHe(e12[0], -t[0]);
  var i = r + n, o = new Array(i), a = 0, s = 0, l = 0, u = Math.abs, c = e12[s], f = u(c), h = -t[l], d = u(h), p, m;
  f < d ? (m = c, s += 1, s < r && (c = e12[s], f = u(c))) : (m = h, l += 1, l < n && (h = -t[l], d = u(h))), s < r && f < d || l >= n ? (p = c, s += 1, s < r && (c = e12[s], f = u(c))) : (p = h, l += 1, l < n && (h = -t[l], d = u(h)));
  for (var g = p + m, v = g - p, _ = m - v, y = _, b = g, T, E, P, A, I; s < r && l < n; )
    f < d ? (p = c, s += 1, s < r && (c = e12[s], f = u(c))) : (p = h, l += 1, l < n && (h = -t[l], d = u(h))), m = y, g = p + m, v = g - p, _ = m - v, _ && (o[a++] = _), T = b + g, E = T - b, P = T - E, A = g - E, I = b - P, y = I + A, b = T;
  for (; s < r; )
    p = c, m = y, g = p + m, v = g - p, _ = m - v, _ && (o[a++] = _), T = b + g, E = T - b, P = T - E, A = g - E, I = b - P, y = I + A, b = T, s += 1, s < r && (c = e12[s]);
  for (; l < n; )
    p = h, m = y, g = p + m, v = g - p, _ = m - v, _ && (o[a++] = _), T = b + g, E = T - b, P = T - E, A = g - E, I = b - P, y = I + A, b = T, l += 1, l < n && (h = -t[l]);
  return y && (o[a++] = y), b && (o[a++] = b), a || (o[a++] = 0), o.length = a, o;
}
(function(e12) {
  var t = _Z, r = X$e, n = Q$e, i = eHe, o = 5, a = 11102230246251565e-32, s = (3 + 16 * a) * a, l = (7 + 56 * a) * a;
  function u(y, b, T, E) {
    return function(A, I, x) {
      var S = y(y(b(I[1], x[0]), b(-x[1], I[0])), y(b(A[1], I[0]), b(-I[1], A[0]))), N = y(b(A[1], x[0]), b(-x[1], A[0])), B = E(S, N);
      return B[B.length - 1];
    };
  }
  function c(y, b, T, E) {
    return function(A, I, x, S) {
      var N = y(y(T(y(b(x[1], S[0]), b(-S[1], x[0])), I[2]), y(T(y(b(I[1], S[0]), b(-S[1], I[0])), -x[2]), T(y(b(I[1], x[0]), b(-x[1], I[0])), S[2]))), y(T(y(b(I[1], S[0]), b(-S[1], I[0])), A[2]), y(T(y(b(A[1], S[0]), b(-S[1], A[0])), -I[2]), T(y(b(A[1], I[0]), b(-I[1], A[0])), S[2])))), B = y(y(T(y(b(x[1], S[0]), b(-S[1], x[0])), A[2]), y(T(y(b(A[1], S[0]), b(-S[1], A[0])), -x[2]), T(y(b(A[1], x[0]), b(-x[1], A[0])), S[2]))), y(T(y(b(I[1], x[0]), b(-x[1], I[0])), A[2]), y(T(y(b(A[1], x[0]), b(-x[1], A[0])), -I[2]), T(y(b(A[1], I[0]), b(-I[1], A[0])), x[2])))), w = E(N, B);
      return w[w.length - 1];
    };
  }
  function f(y, b, T, E) {
    return function(A, I, x, S, N) {
      var B = y(y(y(T(y(T(y(b(S[1], N[0]), b(-N[1], S[0])), x[2]), y(T(y(b(x[1], N[0]), b(-N[1], x[0])), -S[2]), T(y(b(x[1], S[0]), b(-S[1], x[0])), N[2]))), I[3]), y(T(y(T(y(b(S[1], N[0]), b(-N[1], S[0])), I[2]), y(T(y(b(I[1], N[0]), b(-N[1], I[0])), -S[2]), T(y(b(I[1], S[0]), b(-S[1], I[0])), N[2]))), -x[3]), T(y(T(y(b(x[1], N[0]), b(-N[1], x[0])), I[2]), y(T(y(b(I[1], N[0]), b(-N[1], I[0])), -x[2]), T(y(b(I[1], x[0]), b(-x[1], I[0])), N[2]))), S[3]))), y(T(y(T(y(b(x[1], S[0]), b(-S[1], x[0])), I[2]), y(T(y(b(I[1], S[0]), b(-S[1], I[0])), -x[2]), T(y(b(I[1], x[0]), b(-x[1], I[0])), S[2]))), -N[3]), y(T(y(T(y(b(S[1], N[0]), b(-N[1], S[0])), I[2]), y(T(y(b(I[1], N[0]), b(-N[1], I[0])), -S[2]), T(y(b(I[1], S[0]), b(-S[1], I[0])), N[2]))), A[3]), T(y(T(y(b(S[1], N[0]), b(-N[1], S[0])), A[2]), y(T(y(b(A[1], N[0]), b(-N[1], A[0])), -S[2]), T(y(b(A[1], S[0]), b(-S[1], A[0])), N[2]))), -I[3])))), y(y(T(y(T(y(b(I[1], N[0]), b(-N[1], I[0])), A[2]), y(T(y(b(A[1], N[0]), b(-N[1], A[0])), -I[2]), T(y(b(A[1], I[0]), b(-I[1], A[0])), N[2]))), S[3]), y(T(y(T(y(b(I[1], S[0]), b(-S[1], I[0])), A[2]), y(T(y(b(A[1], S[0]), b(-S[1], A[0])), -I[2]), T(y(b(A[1], I[0]), b(-I[1], A[0])), S[2]))), -N[3]), T(y(T(y(b(x[1], S[0]), b(-S[1], x[0])), I[2]), y(T(y(b(I[1], S[0]), b(-S[1], I[0])), -x[2]), T(y(b(I[1], x[0]), b(-x[1], I[0])), S[2]))), A[3]))), y(T(y(T(y(b(x[1], S[0]), b(-S[1], x[0])), A[2]), y(T(y(b(A[1], S[0]), b(-S[1], A[0])), -x[2]), T(y(b(A[1], x[0]), b(-x[1], A[0])), S[2]))), -I[3]), y(T(y(T(y(b(I[1], S[0]), b(-S[1], I[0])), A[2]), y(T(y(b(A[1], S[0]), b(-S[1], A[0])), -I[2]), T(y(b(A[1], I[0]), b(-I[1], A[0])), S[2]))), x[3]), T(y(T(y(b(I[1], x[0]), b(-x[1], I[0])), A[2]), y(T(y(b(A[1], x[0]), b(-x[1], A[0])), -I[2]), T(y(b(A[1], I[0]), b(-I[1], A[0])), x[2]))), -S[3]))))), w = y(y(y(T(y(T(y(b(S[1], N[0]), b(-N[1], S[0])), x[2]), y(T(y(b(x[1], N[0]), b(-N[1], x[0])), -S[2]), T(y(b(x[1], S[0]), b(-S[1], x[0])), N[2]))), A[3]), T(y(T(y(b(S[1], N[0]), b(-N[1], S[0])), A[2]), y(T(y(b(A[1], N[0]), b(-N[1], A[0])), -S[2]), T(y(b(A[1], S[0]), b(-S[1], A[0])), N[2]))), -x[3])), y(T(y(T(y(b(x[1], N[0]), b(-N[1], x[0])), A[2]), y(T(y(b(A[1], N[0]), b(-N[1], A[0])), -x[2]), T(y(b(A[1], x[0]), b(-x[1], A[0])), N[2]))), S[3]), T(y(T(y(b(x[1], S[0]), b(-S[1], x[0])), A[2]), y(T(y(b(A[1], S[0]), b(-S[1], A[0])), -x[2]), T(y(b(A[1], x[0]), b(-x[1], A[0])), S[2]))), -N[3]))), y(y(T(y(T(y(b(x[1], N[0]), b(-N[1], x[0])), I[2]), y(T(y(b(I[1], N[0]), b(-N[1], I[0])), -x[2]), T(y(b(I[1], x[0]), b(-x[1], I[0])), N[2]))), A[3]), T(y(T(y(b(x[1], N[0]), b(-N[1], x[0])), A[2]), y(T(y(b(A[1], N[0]), b(-N[1], A[0])), -x[2]), T(y(b(A[1], x[0]), b(-x[1], A[0])), N[2]))), -I[3])), y(T(y(T(y(b(I[1], N[0]), b(-N[1], I[0])), A[2]), y(T(y(b(A[1], N[0]), b(-N[1], A[0])), -I[2]), T(y(b(A[1], I[0]), b(-I[1], A[0])), N[2]))), x[3]), T(y(T(y(b(I[1], x[0]), b(-x[1], I[0])), A[2]), y(T(y(b(A[1], x[0]), b(-x[1], A[0])), -I[2]), T(y(b(A[1], I[0]), b(-I[1], A[0])), x[2]))), -N[3])))), R = E(B, w);
      return R[R.length - 1];
    };
  }
  function h(y) {
    var b = y === 3 ? u : y === 4 ? c : f;
    return b(r, t, n, i);
  }
  var d = h(3), p = h(4), m = [function() {
    return 0;
  }, function() {
    return 0;
  }, function(b, T) {
    return T[0] - b[0];
  }, function(b, T, E) {
    var P = (b[1] - E[1]) * (T[0] - E[0]), A = (b[0] - E[0]) * (T[1] - E[1]), I = P - A, x;
    if (P > 0) {
      if (A <= 0)
        return I;
      x = P + A;
    } else if (P < 0) {
      if (A >= 0)
        return I;
      x = -(P + A);
    } else
      return I;
    var S = s * x;
    return I >= S || I <= -S ? I : d(b, T, E);
  }, function(b, T, E, P) {
    var A = b[0] - P[0], I = T[0] - P[0], x = E[0] - P[0], S = b[1] - P[1], N = T[1] - P[1], B = E[1] - P[1], w = b[2] - P[2], R = T[2] - P[2], F = E[2] - P[2], $ = I * B, K = x * N, se = x * S, J = A * B, me = A * N, ae = I * S, Y = w * ($ - K) + R * (se - J) + F * (me - ae), Q = (Math.abs($) + Math.abs(K)) * Math.abs(w) + (Math.abs(se) + Math.abs(J)) * Math.abs(R) + (Math.abs(me) + Math.abs(ae)) * Math.abs(F), le = l * Q;
    return Y > le || -Y > le ? Y : p(b, T, E, P);
  }];
  function g(y) {
    var b = m[y.length];
    return b || (b = m[y.length] = h(y.length)), b.apply(void 0, y);
  }
  function v(y, b, T, E, P, A, I) {
    return function(S, N, B, w, R) {
      switch (arguments.length) {
        case 0:
        case 1:
          return 0;
        case 2:
          return E(S, N);
        case 3:
          return P(S, N, B);
        case 4:
          return A(S, N, B, w);
        case 5:
          return I(S, N, B, w, R);
      }
      for (var F = new Array(arguments.length), $ = 0; $ < arguments.length; ++$)
        F[$] = arguments[$];
      return y(F);
    };
  }
  function _() {
    for (; m.length <= o; )
      m.push(h(m.length));
    e12.exports = v.apply(void 0, [g].concat(m));
    for (var y = 0; y <= o; ++y)
      e12.exports[y] = m[y];
  }
  _();
})(yZ);
var nHe = yZ.exports;
var iHe = oHe;
var N_ = nHe;
function oHe(e12, t) {
  for (var r = t[0], n = t[1], i = e12.length, o = 1, a = i, s = 0, l = i - 1; s < a; l = s++) {
    var u = e12[s], c = e12[l], f = u[1], h = c[1];
    if (h < f) {
      if (h < n && n < f) {
        var d = N_(u, c, t);
        if (d === 0)
          return 0;
        o ^= 0 < d | 0;
      } else if (n === f) {
        var p = e12[(s + 1) % i], m = p[1];
        if (f < m) {
          var d = N_(u, c, t);
          if (d === 0)
            return 0;
          o ^= 0 < d | 0;
        }
      }
    } else if (f < h) {
      if (f < n && n < h) {
        var d = N_(u, c, t);
        if (d === 0)
          return 0;
        o ^= d < 0 | 0;
      } else if (n === f) {
        var p = e12[(s + 1) % i], m = p[1];
        if (m < f) {
          var d = N_(u, c, t);
          if (d === 0)
            return 0;
          o ^= d < 0 | 0;
        }
      }
    } else if (n === f) {
      var g = Math.min(u[0], c[0]), v = Math.max(u[0], c[0]);
      if (s === 0) {
        for (; l > 0; ) {
          var _ = (l + i - 1) % i, y = e12[_];
          if (y[1] !== n)
            break;
          var b = y[0];
          g = Math.min(g, b), v = Math.max(v, b), l = _;
        }
        if (l === 0)
          return g <= r && r <= v ? 0 : 1;
        a = l + 1;
      }
      for (var T = e12[(l + i - 1) % i][1]; s + 1 < a; ) {
        var y = e12[s + 1];
        if (y[1] !== n)
          break;
        var b = y[0];
        g = Math.min(g, b), v = Math.max(v, b), s += 1;
      }
      if (g <= r && r <= v)
        return 0;
      var E = e12[(s + 1) % i][1];
      r < g && T < n != E < n && (o ^= 1);
    }
  }
  return 2 * o - 1;
}
var bZ = Ui(iHe);
function aHe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function sj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, lHe(n.key), n);
  }
}
function sHe(e12, t, r) {
  return t && sj(e12.prototype, t), r && sj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function lHe(e12) {
  var t = cHe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function cHe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function ya() {
  return typeof Reflect < "u" && Reflect.get ? ya = Reflect.get.bind() : ya = function(t, r, n) {
    var i = uHe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, ya.apply(this, arguments);
}
function uHe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = _o(e12), e12 !== null); )
    ;
  return e12;
}
function hHe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && VC(e12, t);
}
function VC(e12, t) {
  return VC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, VC(e12, t);
}
function fHe(e12) {
  var t = mHe();
  return function() {
    var n = _o(e12), i;
    if (t) {
      var o = _o(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return dHe(this, i);
  };
}
function dHe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return pHe(e12);
}
function pHe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function mHe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function _o(e12) {
  return _o = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, _o(e12);
}
var lj = 16;
var cj = 50;
var xO = 5e3;
var uj = 5;
var gHe = 14;
var Pc = {
  fontSize: `${gHe}px`,
  fontFamily: "Arial",
  stroke: "white",
  strokeThickness: 2,
  fontWeight: 400,
  dropShadow: true,
  dropShadowColor: "white",
  dropShadowDistance: 0,
  dropShadowBlur: 2
};
var TZ = function(e12) {
  hHe(r, e12);
  var t = fHe(r);
  function r(n, i) {
    var o;
    return aHe(this, r), o = t.call(this, n, i), o.valueScaleTransform = Sn, o;
  }
  return sHe(r, [{
    key: "initialize",
    value: function() {
      this.initialized || ([this.prevK, this.vertK, this.vertY] = [1, 1, 0], this.drawnRects || (this.drawnRects = {}), this.colorScale || (this.options.colorRange ? this.colorScale = Zl(this.options.colorRange) : this.colorScale = dd), this.initialized = true);
    }
  }, {
    key: "initTile",
    value: function(i) {
      i.texts = {}, i.rectGraphics = new Ue.PIXI.Graphics(), i.textGraphics = new Ue.PIXI.Graphics(), i.graphics.addChild(i.rectGraphics), i.graphics.addChild(i.textGraphics);
      let o = [], a = [];
      if (i.tileData && i.tileData.length) {
        if (i.tileData.sort((s, l) => l.importance - s.importance), !this.options || !this.options.valueColumn) {
          const s = i.tileData.map((l) => {
            const u = +l.chrOffset;
            return {
              from: +l.fields[1] + u,
              to: +l.fields[2] + u,
              value: l,
              text: l.fields[3],
              strand: l.fields.length >= 6 && l.fields[5] === "-" ? "-" : "+"
            };
          });
          o = $0(s.filter((l) => l.strand === "+")), a = $0(s.filter((l) => l.strand === "-"));
        } else
          o = [i.tileData.map((s) => ({
            value: s
          }))];
        i.plusStrandRows = o, i.minusStrandRows = a, this.options.showTexts && i.tileData.forEach((s, l) => {
          const u = s.fields;
          if (s.importance || (s.importance = Math.random()), i.textWidths = {}, i.textHeights = {}, l >= (+this.options.maxTexts || cj))
            return;
          const c = new Ue.PIXI.Text(u[3], {
            ...Pc,
            fontSize: +this.options.fontSize || Pc.fontSize
          });
          this.flipText && (c.scale.x = -1), c.anchor.x = 0.5, c.anchor.y = 0.5, i.texts[s.uid] = c, i.textGraphics.addChild(c);
        });
      }
      i.initialized = true;
    }
    /**
     * Remove the tile's rectangles from the list of drawnRects so that they
     * can be drawn again.
     */
  }, {
    key: "removeTileRects",
    value: function(i) {
      const o = +i.tileId.split(".")[0];
      i.rectGraphics.clear(), i.rendered = false, i.tileData && i.tileData.length && i.tileData.forEach((a, s) => {
        this.drawnRects[o] && this.drawnRects[o][a.uid] && this.drawnRects[o][a.uid][2] === i.tileId && delete this.drawnRects[o][a.uid];
      });
    }
  }, {
    key: "destroyTile",
    value: function(i) {
      this.removeTileRects(i), i.graphics.removeChild(i.textGraphics), i.graphics.removeChild(i.rectGraphics);
    }
  }, {
    key: "removeTiles",
    value: function(i) {
      ya(_o(r.prototype), "removeTiles", this).call(this, i);
    }
  }, {
    key: "drawTile",
    value: function(i) {
      this.options && this.options.valueColumn && this.valueScale && this.drawAxis(this.valueScale);
    }
  }, {
    key: "rerender",
    value: function(i, o) {
      ya(_o(r.prototype), "rerender", this).call(this, i, o), this.valueScale = null, this.drawnRects = {}, this.options.colorRange ? this.colorScale = Zl(this.options.colorRange) : this.colorScale = dd;
      for (const a of this.visibleAndFetchedTiles())
        this.destroyTile(a), this.initTile(a), this.renderTile(a);
    }
  }, {
    key: "updateTile",
    value: function(i) {
      this.areAllVisibleTilesLoaded() && this.renderTile(i);
    }
    /**
     * Use this only when there's one row
     *
     * @return {[type]} [description]
     */
  }, {
    key: "allVisibleRects",
    value: function() {
      const i = {};
      Object.values(this.fetchedTiles).forEach((l) => {
        if (l.plusStrandRows)
          for (const u of l.plusStrandRows[0])
            i[u.value.uid] || (i[u.value.uid] = u);
      });
      const o = Object.values(i).sort((l, u) => l.from - u.from);
      let a = 0, s = 0;
      for (let l = 0; l < o.length; l++)
        if (o[l].staggeredStartPosition !== void 0) {
          a = l, s = o[l].staggeredStartPosition;
          break;
        }
      for (let l = a; l < o.length; l++)
        o[l].staggeredStartPosition = (s + l - a) % 2;
      for (let l = a; l >= 0 && o.length; l--)
        o[l].staggeredStartPosition = (s + a - l) % 2;
      return i;
    }
  }, {
    key: "drawSegmentStyle",
    value: function(i, o, a, s, l, u) {
      const f = s + l / 2, h = [
        o,
        s,
        // upper left
        o + 2 * 0.1,
        s,
        // upper right
        o + 2 * 0.1,
        f - 0.1,
        a - 2 * 0.1,
        f - 0.1,
        a - 2 * 0.1,
        s,
        a,
        s,
        a,
        s + l,
        a - 2 * 0.1,
        s + l,
        a - 2 * 0.1,
        f + 0.1,
        o + 2 * 0.1,
        f + 0.1,
        o + 2 * 0.1,
        s + l,
        o,
        s + l
      ];
      return i.rectGraphics.drawPolygon(h), h;
    }
  }, {
    key: "drawPoly",
    value: function(i, o, a, s, l, u) {
      let c = null;
      return this.options.annotationStyle === "segment" ? this.drawSegmentStyle(i, o, a, s, l, u) : ((u === "+" || u === "-") && a - o < lj / 2 ? (c = [
        o,
        s,
        // top
        o + l / 2,
        s + l / 2,
        // right point
        o,
        s + l
        // bottom
      ], u === "+" || (c = [
        a,
        s,
        // top
        a - l / 2,
        s + l / 2,
        // left point
        a,
        s + l
        // bottom
      ]), i.rectGraphics.drawPolygon(c)) : (u === "+" ? c = [
        o,
        s,
        // left top
        a - l / 2,
        s,
        // right top
        a,
        s + l / 2,
        a - l / 2,
        s + l,
        // right bottom
        o,
        s + l
        // left bottom
      ] : u === "-" ? c = [
        o + l / 2,
        s,
        // left top
        a,
        s,
        // right top
        a,
        s + l,
        // right bottom
        o + l / 2,
        s + l,
        // left bottom
        o,
        s + l / 2
      ] : c = [
        o,
        s,
        // left top
        a,
        s,
        // right top
        a,
        s + l,
        // right bottom
        o,
        s + l
        // left bottom
      ], i.rectGraphics.drawPolygon(c)), c);
    }
    /** The value scale is used to arrange annotations vertically
        based on a value */
  }, {
    key: "setValueScale",
    value: function() {
      if (this.valueScale = null, this.options && this.options.valueColumn) {
        const i = this.options.colorEncodingRange ? +this.options.colorEncodingRange[0] : this.minVisibleValueInTiles(+this.options.valueColumn), o = this.options.colorEncodingRange ? +this.options.colorEncodingRange[1] : this.maxVisibleValueInTiles(+this.options.valueColumn);
        this.options.valueColumn && ([this.valueScale] = this.makeValueScale(i, this.calculateMedianVisibleValue(+this.options.valueColumn), o));
      }
    }
    /** The color value scale is used to map some value to a coloring */
  }, {
    key: "setColorValueScale",
    value: function() {
      if (this.colorValueScale = null, this.options && this.options.colorEncoding && this.options.colorEncoding !== "itemRgb") {
        const i = this.options.colorEncodingRange ? +this.options.colorEncodingRange[0] : this.minVisibleValueInTiles(+this.options.colorEncoding), o = this.options.colorEncodingRange ? +this.options.colorEncodingRange[1] : this.maxVisibleValueInTiles(+this.options.colorEncoding);
        this.colorValueScale = It().domain([i, o]).range([0, 255]);
      }
    }
  }, {
    key: "renderRows",
    value: function(i, o, a, s, l, u) {
      const c = +i.tileId.split(".")[0];
      this.initialize();
      const f = Fv().domain(yi(a)).range([s, l]).paddingInner(0.3);
      this.allVisibleRects();
      let h = null;
      this.options.staggered && (h = this.allVisibleRects());
      for (let d = 0; d < o.length; d++)
        for (let p = 0; p < o[d].length; p++) {
          const m = o[d][p].value, g = m.fields, v = +m.chrOffset, _ = +g[1] + v, y = +g[2] + v, b = (_ + y) / 2;
          let T = f(d) + f.step() / 2, E = this.options.annotationHeight || lj;
          if (E === "scaled" && (E = f.bandwidth(), this.options.maxAnnotationHeight && (E = Math.min(E, +this.options.maxAnnotationHeight))), this.options && this.options.colorEncoding === "itemRgb" && m.fields[8] ? m.fields[8].split(",").length === 3 && (u = `rgb(${m.fields[8]})`) : this.colorValueScale && (u = `rgba(${JR(
            this.colorValueScale,
            this.colorScale,
            0,
            // pseudocounts
            -Number.MIN_VALUE
          )(+g[+this.options.colorEncoding - 1]).join(",")})`), this.valueScale) {
            const w = +g[+this.options.valueColumn - 1];
            T = this.valueScale(w);
          }
          const P = this.options.fillOpacity || 0.3;
          i.rectGraphics.lineStyle(1, ct(u), P), i.rectGraphics.beginFill(ct(u), P);
          let A = T - E / 2;
          const I = this._xScale(_), x = this._xScale(y);
          this.options.staggered && (h[m.uid].staggeredStartPosition ? A -= uj / 2 : A += uj / 2);
          let S = true;
          if (!(c in this.drawnRects && m.uid in this.drawnRects[c])) {
            S = false, this.drawnRects[c] || (this.drawnRects[c] = {});
            const w = this.drawPoly(i, I, x, A * this.prevK, E * this.prevK, g[5]);
            this.drawnRects[c][m.uid] = [w, {
              start: _,
              end: y,
              value: m,
              tile: i,
              fill: u
            }, i.tileId];
          }
          if (!this.options.showTexts)
            continue;
          if (!i.texts)
            return;
          if (p >= (+this.options.maxTexts || cj) || !i.texts[m.uid])
            continue;
          const N = i.texts[m.uid];
          N.position.x = this._xScale(b), N.position.y = A + E / 2, N.nominalY = A + E / 2, S && (N.alreadyDrawn = true);
          const B = this.options.fontColor !== void 0 ? ct(this.options.fontColor) : u;
          if (N.style = {
            ...Pc,
            fill: B,
            fontSize: +this.options.fontSize || Pc.fontSize
          }, !(g[3] in i.textWidths)) {
            N.updateTransform();
            const w = N.getBounds().width, R = N.getBounds().height, F = 5;
            i.textWidths[g[3]] = w, i.textHeights[g[3]] = R - F;
          }
        }
    }
  }, {
    key: "renderTile",
    value: function(i) {
      let o = i.plusStrandRows ? i.plusStrandRows.length : 1, a = i.minusStrandRows ? i.minusStrandRows.length : 1;
      for (const s of this.visibleAndFetchedTiles()) {
        if (!s.initialized)
          return;
        !s.plusStrandRows && !s.minusStrandRows || (o = Math.max(s.plusStrandRows.length, o), a = Math.max(s.minusStrandRows.length, a));
      }
      if (i.rendered && this.removeTileRects(i), i.drawnAtScale = this._xScale.copy(), i.rendered = true, this.setValueScale(), this.setColorValueScale(), i.tileData && i.tileData.length) {
        const s = this.options.plusStrandColor || this.options.fillColor || "blue", l = this.options.minusStrandColor || this.options.fillColor || "purple", u = 0;
        let c = 0;
        this.options.separatePlusMinusStrands ? c = o * this.dimensions[1] / (o + a) - u / 2 : c = this.dimensions[1], this.renderRows(i, i.plusStrandRows, o, 0, c, s), this.renderRows(i, i.minusStrandRows, a, this.options.separatePlusMinusStrands ? c + u / 2 : 0, this.dimensions[1], l);
      }
      iu.stretchRects(this, [(s) => s.rectGraphics]);
    }
  }, {
    key: "calculateZoomLevel",
    value: function() {
      const i = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]);
      let o = Math.min(i, this.maxZoom);
      return o = Math.max(o, 0), o;
    }
  }, {
    key: "minVisibleValueInTiles",
    value: function(i) {
      let o = this.visibleAndFetchedIds();
      o.length === 0 && (o = Object.keys(this.fetchedTiles));
      let a = Math.min.apply(null, o.map((s) => this.fetchedTiles[s]).filter((s) => s.tileData && s.tileData.length).map((s) => Math.min.apply(null, s.tileData.sort((l, u) => u.importance - l.importance).slice(0, xO).map((l) => +l.fields[i - 1]).filter((l) => !Number.isNaN(l)))));
      return a === Number.MAX_SAFE_INTEGER && (a = null), a;
    }
  }, {
    key: "maxVisibleValueInTiles",
    value: function(i) {
      let o = this.visibleAndFetchedIds();
      o.length === 0 && (o = Object.keys(this.fetchedTiles));
      let a = Math.max.apply(null, o.map((s) => this.fetchedTiles[s]).filter((s) => s.tileData && s.tileData.length).map((s) => Math.max.apply(null, s.tileData.sort((l, u) => u.importance - l.importance).slice(0, xO).map((l) => +l.fields[i - 1]).filter((l) => !Number.isNaN(l)))));
      return a === Number.MIN_SAFE_INTEGER && (a = null), a;
    }
  }, {
    key: "calculateMedianVisibleValue",
    value: function(i) {
      this.areAllVisibleTilesLoaded() && this.allTilesLoaded();
      let o = this.visibleAndFetchedIds();
      o.length === 0 && (o = Object.keys(this.fetchedTiles));
      const a = [].concat(...o.map((s) => this.fetchedTiles[s]).filter((s) => s.tileData && s.tileData.length).map((s) => s.tileData.sort((l, u) => u.importance - l.importance).slice(0, xO).map((l) => +l.fields[i - 1]))).filter((s) => s > 0);
      this.medianVisibleValue = UD(a);
    }
  }, {
    key: "draw",
    value: function() {
      ya(_o(r.prototype), "draw", this).call(this), this.allTexts = [], this.allBoxes = [];
      for (const i in this.fetchedTiles) {
        const o = this.fetchedTiles[i];
        if (o.rectGraphics.scale.y = this.vertK, o.rectGraphics.position.y = this.vertY, !o.drawnAtScale)
          return;
        iu.stretchRects(this, [(s) => s.rectGraphics]);
        const a = this.parentInFetched(o);
        o.initialized && o.tileData && o.tileData.length && o.tileData.forEach((s) => {
          if (!o.texts)
            return;
          const l = s.fields, u = l[3], c = o.texts[s.uid];
          if (!c)
            return;
          const f = +s.chrOffset, h = +l[1] + f, d = +l[2] + f, p = (h + d) / 2;
          if (c.position.x = this._xScale(p), c.position.y = c.nominalY * (this.vertK * this.prevK) + this.vertY, !a && !c.alreadyDrawn) {
            c.visible = true;
            const m = 3;
            this.allBoxes.push([c.position.x - m, c.position.y - o.textHeights[l[3]] / 2, c.position.x + o.textWidths[l[3]] + m, c.position.y + o.textHeights[l[3]] / 2]), this.allTexts.push({
              importance: s.importance,
              text: c,
              caption: u,
              strand: l[5]
            });
          } else
            c.visible = false;
        });
      }
      this.hideOverlaps(this.allBoxes, this.allTexts);
    }
  }, {
    key: "hideOverlaps",
    value: function(i, o) {
      vy(i, (a, s) => {
        o[a].importance > o[s].importance ? o[a].text.visible && (o[s].text.visible = false) : o[s].text.visible && (o[a].text.visible = false);
      });
    }
  }, {
    key: "setPosition",
    value: function(i) {
      ya(_o(r.prototype), "setPosition", this).call(this, i), [this.pMain.position.x, this.pMain.position.y] = this.position;
    }
  }, {
    key: "setDimensions",
    value: function(i) {
      ya(_o(r.prototype), "setDimensions", this).call(this, i);
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.refreshTiles(), this.draw();
    }
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      ya(_o(r.prototype), "exportSVG", this) ? [o, i] = ya(_o(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o);
      const a = document.createElement("g");
      a.setAttribute("transform", `translate(${this.position[0]},${this.position[1]})`), i.appendChild(a);
      const s = document.createElement("g"), l = document.createElement("g");
      a.appendChild(s), a.appendChild(l);
      for (const u of this.visibleAndFetchedTiles())
        u.tileData.length && u.tileData.forEach((c) => {
          const f = +u.tileId.split(".")[0], h = document.createElement("g");
          if (h.setAttribute("transform", `translate(${u.rectGraphics.position.x},${u.rectGraphics.position.y})scale(${u.rectGraphics.scale.x},${u.rectGraphics.scale.y})`), s.appendChild(h), this.drawnRects[f] && c.uid in this.drawnRects[f]) {
            const d = this.drawnRects[f][c.uid][0], p = document.createElement("path");
            let m = `M ${d[0]} ${d[1]}`;
            for (let _ = 2; _ < d.length; _ += 2)
              m += ` L ${d[_]} ${d[_ + 1]}`;
            const g = this.drawnRects[f][c.uid][1].fill, v = this.options.fontColor !== void 0 ? ct(this.options.fontColor) : g;
            if (p.setAttribute("d", m), p.setAttribute("fill", g), p.setAttribute("opacity", 0.3), p.style.stroke = g, p.style.strokeWidth = "1px", h.appendChild(p), u.texts[c.uid]) {
              const _ = u.texts[c.uid];
              if (!_.visible)
                return;
              const y = document.createElement("g"), b = document.createElement("text");
              l.appendChild(y), y.appendChild(b), y.setAttribute("transform", `translate(${_.x},${_.y})scale(${_.scale.x},1)`), b.setAttribute("text-anchor", "middle"), b.setAttribute("font-family", Pc.fontFamily), b.setAttribute("font-size", +this.options.fontSize || Pc.fontSize), b.setAttribute("font-weight", "bold"), b.setAttribute("dy", "5px"), b.setAttribute("fill", v), b.setAttribute("stroke", Pc.stroke), b.setAttribute("stroke-width", "0.4"), b.setAttribute("text-shadow", "0px 0px 2px grey"), b.innerHTML = _.text;
            }
          }
        });
      return [o, o];
    }
    /** Move event for the y-axis */
  }, {
    key: "movedY",
    value: function(i) {
      Object.values(this.fetchedTiles).forEach((o) => {
        const a = this.valueScaleTransform, {
          y: s,
          k: l
        } = a, u = this.dimensions[1];
        s + i / l > -(l - 1) * u && s + i / l < 0 && (this.valueScaleTransform = a.translate(0, i / l)), o.rectGraphics.position.y = this.valueScaleTransform.y, this.vertY = this.valueScaleTransform.y;
      }), this.animate();
    }
    /** Zoomed along the y-axis */
  }, {
    key: "zoomedY",
    value: function(i, o) {
      const a = iu.zoomedY(i, o, this.valueScaleTransform, this.dimensions[1]);
      this.valueScaleTransform = a;
      let s = a.k;
      const l = a.y;
      let u = false;
      s /= this.prevK, (s > 1.5 || s < 1 / 1.5) && (this.prevK *= s, s = 1, u = true), this.vertK = s, this.vertY = l, Object.values(this.fetchedTiles).forEach((c) => {
        u && this.renderTile(c), c.rectGraphics.scale.y = s, c.rectGraphics.position.y = l;
      }), this.draw(), this.animate();
    }
  }, {
    key: "getMouseOverHtml",
    value: function(i, o) {
      if (!this.tilesetInfo)
        return "";
      const a = this.calculateZoomLevel(), s = [i, o];
      if (this.drawnRects[a]) {
        const l = Object.values(this.drawnRects[a]);
        for (let u = 0; u < l.length; u++) {
          const c = l[u][0].slice(0), f = l[u][1].tile.rectGraphics.scale.x, h = l[u][1].tile.rectGraphics.position.x, d = l[u][1].tile.rectGraphics.scale.y, p = l[u][1].tile.rectGraphics.position.y, m = [];
          for (; c.length; ) {
            const [v, _] = c.splice(0, 2);
            m.push([v * f + h, _ * d + p]);
          }
          if (bZ(m, s) === -1)
            return l[u][1].value.fields.join(" ");
        }
      }
      return "";
    }
  }]), r;
}(Ep);
function vHe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function hj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, _He(n.key), n);
  }
}
function yHe(e12, t, r) {
  return t && hj(e12.prototype, t), r && hj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function _He(e12) {
  var t = bHe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function bHe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Pl() {
  return typeof Reflect < "u" && Reflect.get ? Pl = Reflect.get.bind() : Pl = function(t, r, n) {
    var i = THe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Pl.apply(this, arguments);
}
function THe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Ia(e12), e12 !== null); )
    ;
  return e12;
}
function EHe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && XC(e12, t);
}
function XC(e12, t) {
  return XC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, XC(e12, t);
}
function SHe(e12) {
  var t = OHe();
  return function() {
    var n = Ia(e12), i;
    if (t) {
      var o = Ia(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return wHe(this, i);
  };
}
function wHe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return AHe(e12);
}
function AHe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function OHe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Ia(e12) {
  return Ia = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Ia(e12);
}
var IHe = (e12, t, r, n, i) => {
  i.drawRect(e12, t, r, n);
};
var PHe = (e12, t, r, n, i, {
  fill: o = 0,
  fillOpacity: a = 0,
  stroke: s = 0,
  strokeWidth: l = 0,
  strokeOpacity: u = 0
} = {}) => {
  const c = document.createElement("rect");
  c.setAttribute("x", e12), c.setAttribute("y", t), c.setAttribute("width", r), c.setAttribute("height", n), c.setAttribute("fill", `#${AP(o)}`), c.setAttribute("fill-opacity", a), c.setAttribute("stroke", `#${AP(s)}`), c.setAttribute("stroke-opacity", u), c.setAttribute("stroke-width", l), i.appendChild(c);
};
var va = (e12, t, r, n, i, o) => {
  i instanceof HTMLElement ? PHe(e12, t, r, n, i, o) : IHe(e12, t, r, n, i);
};
var fj = (e12, t, r, n, i, o, a, s, {
  isVertical: l = false,
  svg: u = null
} = {}) => {
  let c = t, f = r, h = n, d = i;
  const p = s.width * 2 > n ? n / 2 : s.width, m = s.width * 2 > i ? i / 2 : s.width, g = u || e12, v = {
    fill: 0,
    fillOpacity: 0,
    stroke: 0,
    strokeOpacity: 0,
    strokeWidth: 1
  };
  if (s.positions && s.positions.length ? (e12.lineStyle(1, 0, 0), e12.beginFill(s.color, s.opacity), v.fill = s.color, v.fillOpacity = s.opacity, v.stroke = 0, v.strokeOpacity = 0, v.strokeWidth = 1, s.positions.forEach((_) => {
    _ === "top" && !l || _ === "left" && l ? va(t - p, r - m, n + p * 2, m, g, v) : _ === "bottom" && !l || _ === "right" && l ? va(t - p, r + i, n + p * 2, m, g, v) : _ === "left" && !l || _ === "top" && l ? va(t - p, r - m, p, i + m * 2, g, v) : (_ === "right" && !l || _ === "bottom" && l) && va(t + n, r - m, p, i + m * 2, g, v);
  })) : s.width > 0 && s.opacity > 0 && (e12.lineStyle(s.width, s.color, s.opacity), e12.beginFill(0, 0), v.fill = 0, v.fillOpacity = 0, v.stroke = s.color, v.strokeOpacity = s.opacity, v.strokeWidth = s.width, va(t - p, r - m, n + p * 2, i + m * 2, g, v)), a.positions && a.positions.length) {
    e12.lineStyle(1, 0, 0), e12.beginFill(a.color, a.opacity);
    const _ = a.width * 2 > n ? n / 2 : a.width, y = a.width * 2 > i ? i / 2 : a.width;
    v.fill = a.color, v.fillOpacity = a.opacity, v.stroke = 0, v.strokeOpacity = 0, v.strokeWidth = 1, a.positions.forEach((b) => {
      b === "top" && !l || b === "left" && l ? (va(t, r, n, y, g, v), f += y, d -= y) : b === "bottom" && !l || b === "right" && l ? (va(t, r + i - y, n, y, g, v), d -= y) : b === "left" && !l || b === "top" && l ? (va(t, r, _, i, g, v), c += _, h -= _) : (b === "right" && !l || b === "bottom" && l) && (va(t + n - _, r, _, i, g, v), h -= _);
    });
  } else
    e12.lineStyle(a.width, a.color, a.opacity), v.stroke = a.color, v.strokeOpacity = a.opacity, v.strokeWidth = a.width;
  e12.beginFill(o.color, o.opacity), v.fill = o.color, v.fillOpacity = o.opacity, va(c, f, h, d, g, v);
};
var EZ = function(e12) {
  EHe(r, e12);
  var t = SHe(r);
  function r(n, i) {
    var o;
    return vHe(this, r), o = t.call(this, n, i), o.options = i || {}, o.drawnRects = {}, o;
  }
  return yHe(r, [{
    key: "drawHorizontalOverlay",
    value: function(i, o, a, s = 0, l, u, c, f) {
      if (!a || a.length < 2)
        return;
      let h = this.position[0] + o.left + this._xScale(a[0]);
      const d = this.position[1] + o.top, p = o.height;
      let m = this._xScale(a[1]) - this._xScale(a[0]);
      m < s && (h -= (s - m) / 2, m = s), fj(i, h, d, m, p, l, u, c, f);
    }
  }, {
    key: "drawVerticalOverlay",
    value: function(i, o, a, s = 0, l, u, c, f = {}) {
      if (!a || a.length < 2)
        return;
      const h = this.position[0] + o.left;
      let d = this.position[1] + o.top + this._yScale(a.length >= 4 ? a[2] : a[0]);
      const p = this.position[1] + o.top, m = this.position[1] + o.top + o.height;
      if (d > m)
        return;
      d < p && (d = p);
      const g = o.width;
      let v = this._yScale(a.length >= 4 ? a[3] : a[1]) - d + o.top + this.position[1];
      v < 0 || (d + v > m && (v += m - (d + v)), v < s && (d -= (s - v) / 2, v = s), f.isVertical = true, fj(i, h, d, g, v, l, u, c, f));
    }
  }, {
    key: "draw",
    value: function(i) {
      Pl(Ia(r.prototype), "draw", this).call(this);
      const o = this.pMain, a = {
        color: ct(this.options.fill || this.options.fillColor || "blue"),
        opacity: Number.isNaN(+this.options.fillOpacity) ? 0.3 : +this.options.fillOpacity
      }, s = {
        color: ct(this.options.stroke || "blue"),
        opacity: +this.options.strokeOpacity || 1,
        width: +this.options.strokeWidth || 0,
        positions: !this.options.strokePos || Array.isArray(this.options.strokePos) ? this.options.strokePos : [this.options.strokePos]
      }, l = {
        color: ct(this.options.outline || "white"),
        opacity: +this.options.outlineOpacity || 1,
        width: +this.options.outlineWidth || 0,
        positions: !this.options.outlinePos || Array.isArray(this.options.outlinePos) ? this.options.outlinePos : [this.options.outlinePos]
      };
      (!i || !i.svg) && o.clear(), o.lineStyle(s.width, s, +!s.positions * s.opacity), o.beginFill(a.color, a.opacity);
      const u = Math.max(0, +this.options.minWidth || 0), c = Math.max(0, +this.options.minHeight || 0);
      Array.isArray(this.options.extent) && this.options.orientationsAndPositions.forEach((f) => {
        (f.orientation === "1d-horizontal" || f.orientation === "2d") && this.options.extent.forEach((h) => this.drawHorizontalOverlay(o, f.position, h, u, a, s, l, i)), (f.orientation === "1d-vertical" || f.orientation === "2d") && this.options.extent.forEach((h) => this.drawVerticalOverlay(o, f.position, h, c, a, s, l, i));
      });
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.draw();
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Pl(Ia(r.prototype), "setPosition", this).call(this, i), this.draw();
    }
  }, {
    key: "setDimensions",
    value: function(i) {
      Pl(Ia(r.prototype), "setDimensions", this).call(this, i), this.draw();
    }
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      Pl(Ia(r.prototype), "exportSVG", this) ? [o, i] = Pl(Ia(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o);
      const a = document.createElement("g");
      return i.appendChild(a), this.draw({
        svg: a
      }), [o, i];
    }
  }]), r;
}(Oi);
function CHe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function dj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, kHe(n.key), n);
  }
}
function xHe(e12, t, r) {
  return t && dj(e12.prototype, t), r && dj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function kHe(e12) {
  var t = DHe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function DHe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Uo() {
  return typeof Reflect < "u" && Reflect.get ? Uo = Reflect.get.bind() : Uo = function(t, r, n) {
    var i = RHe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Uo.apply(this, arguments);
}
function RHe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = qi(e12), e12 !== null); )
    ;
  return e12;
}
function NHe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && WC(e12, t);
}
function WC(e12, t) {
  return WC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, WC(e12, t);
}
function MHe(e12) {
  var t = FHe();
  return function() {
    var n = qi(e12), i;
    if (t) {
      var o = qi(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return LHe(this, i);
  };
}
function LHe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return BHe(e12);
}
function BHe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function FHe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function qi(e12) {
  return qi = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, qi(e12);
}
var wp = function(e12) {
  NHe(r, e12);
  var t = MHe(r);
  function r() {
    return CHe(this, r), t.apply(this, arguments);
  }
  return xHe(r, [{
    key: "stopHover",
    value: function() {
      this.pMouseOver.clear(), this.animate();
    }
  }, {
    key: "getMouseOverHtml",
    value: function(i) {
      if (!this.tilesetInfo || !this.options.showTooltip || !this.valueScale)
        return "";
      const o = this.getDataAtPos(i);
      let a = "";
      o && (a = oo(".3f")(o));
      const s = this.pMouseOver, l = 0, u = this.valueScale(o);
      s.clear(), s.beginFill(l, 0.5), s.lineStyle(1, l, 1);
      const c = 4;
      return s.drawRect(i - c / 2, u - c / 2, c, c), this.animate(), `${a}`;
    }
    /**
     * Create whatever is needed to draw this tile.
     */
  }, {
    key: "initTile",
    value: function(i) {
      if (Uo(qi(r.prototype), "initTile", this).call(this, i), !i.tileData || !i.tileData.dense) {
        console.warn("emptyTile:", i);
        return;
      }
      if (i.xValues = new Array(i.tileData.dense.length), i.yValues = new Array(i.tileData.dense.length), this.isValueScaleLocked()) {
        const o = this.getLockGroupExtrema();
        o !== null && (this.minValue(o[0]), this.maxValue(o[1]));
      }
      this.drawTile(i);
    }
  }, {
    key: "rerender",
    value: function(i, o) {
      Uo(qi(r.prototype), "rerender", this).call(this, i, o), this.options = i, Uo(qi(r.prototype), "draw", this).call(this), this.visibleAndFetchedTiles().forEach((a) => {
        this.renderTile(a);
      });
    }
  }, {
    key: "renderTile",
    value: function(i) {
      this.drawTile(i), this.drawAxis(this.valueScale);
    }
  }, {
    key: "drawTile",
    value: function(i) {
      if (Uo(qi(r.prototype), "drawTile", this).call(this, i), !i.graphics || !i.tileData || !i.tileData.dense)
        return;
      const o = i.graphics, {
        tileX: a,
        tileWidth: s
      } = this.getTilePosAndDimensions(i.tileData.zoomLevel, i.tileData.tilePos), l = i.tileData.dense;
      if (l.length === 0)
        return;
      const [u, c] = this.makeValueScale(this.minValue(), this.medianVisibleValue, this.maxValue());
      if (this.valueScale = u, o.clear(), this.drawAxis(this.valueScale), this.options.valueScaling === "log" && this.valueScale.domain()[1] < 0) {
        console.warn("Negative values present when using a log scale", this.valueScale.domain());
        return;
      }
      const f = ct(this.options.lineStrokeColor ? this.options.lineStrokeColor : "blue");
      !this.tilesetInfo.tile_size && !this.tilesetInfo.bins_per_dimension && console.warn("No tileset_info.tile_size or tileset_info.bins_per_dimension", this.tilesetInfo);
      const h = this.tilesetInfo.tile_size || this.tilesetInfo.bins_per_dimension, d = It().domain([0, h]).range([a, a + s]), p = this.options.lineStrokeWidth ? this.options.lineStrokeWidth : 1;
      o.lineStyle(p, f, 1), i.segments = [];
      let m = [];
      for (let g = 0; g < l.length; g++) {
        const v = this._xScale(d(g)), _ = this.valueScale(l[g] + c);
        if (this.options.valueScaling === "log" && l[g] === 0 || Number.isNaN(_)) {
          m.length > 1 && i.segments.push(m), m = [];
          continue;
        }
        if (d(g) > this.tilesetInfo.max_pos[0])
          break;
        m.push([v, _]);
      }
      m.length > 1 && i.segments.push(m);
      for (const g of i.segments) {
        const v = g[0], _ = g.slice(1);
        o.moveTo(v[0], v[1]);
        for (const y of _)
          o.lineTo(y[0], y[1]);
      }
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Uo(qi(r.prototype), "setPosition", this).call(this, i), this.pMain.position.y = this.position[1], this.pMain.position.x = this.position[0], this.pMouseOver.position.y = this.position[1], this.pMouseOver.position.x = this.position[0];
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.refreshTiles(), this.draw();
      const a = this.isValueScaleLocked();
      if (this.continuousScaling && this.minValue() !== void 0 && this.maxValue() !== void 0) {
        if (this.valueScaleMin === null && this.valueScaleMax === null && !a) {
          const s = this.minVisibleValue(), l = this.maxVisibleValue(), u = 1e-6;
          s !== null && l !== null && (Math.abs(this.minValue() - s) > u || Math.abs(this.maxValue() - l) > u) && (this.minValue(s), this.maxValue(l), this.scheduleRerender());
        }
        a && this.onValueScaleChanged();
      }
    }
  }, {
    key: "superSVG",
    value: function() {
      return Uo(qi(r.prototype), "exportSVG", this).call(this);
    }
    /**
     * Export an SVG representation of this track
     *
     * @returns {Array} The two returned DOM nodes are both SVG
     * elements [base,track]. Base is a parent which contains track as a
     * child. Track is clipped with a clipping rectangle contained in base.
     *
     */
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      Uo(qi(r.prototype), "exportSVG", this) ? [o, i] = Uo(qi(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o), o.setAttribute("class", "exported-line-track");
      const a = document.createElement("g");
      i.appendChild(a), a.setAttribute("transform", `translate(${this.position[0]},${this.position[1]})`);
      const s = this.options.lineStrokeColor ? this.options.lineStrokeColor : "blue";
      this.visibleAndFetchedTiles().forEach((u) => {
        const c = document.createElement("path");
        c.setAttribute("fill", "transparent"), c.setAttribute("stroke", s);
        let f = "";
        for (const h of u.segments) {
          const d = h[0], p = h.slice(1);
          f += `M${d[0]} ${d[1]}`;
          for (const m of p)
            f += `L${m[0]} ${m[1]}`;
        }
        c.setAttribute("d", f), a.appendChild(c);
      });
      const l = document.createElement("g");
      if (l.setAttribute("id", "axis"), o.appendChild(l), l.setAttribute("transform", `translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`), this.options.axisPositionHorizontal === "left" || this.options.axisPositionVertical === "top") {
        const u = this.axis.exportAxisLeftSVG(this.valueScale, this.dimensions[1]);
        l.appendChild(u);
      } else if (this.options.axisPositionHorizontal === "right" || this.options.axisPositionVertical === "bottom") {
        const u = this.axis.exportAxisRightSVG(this.valueScale, this.dimensions[1]);
        l.appendChild(u);
      }
      return [o, i];
    }
  }, {
    key: "tileToLocalId",
    value: function(i) {
      return this.options.aggregationMode && this.options.aggregationMode !== "mean" ? `${i.join(".")}.${this.options.aggregationMode}` : `${i.join(".")}`;
    }
  }, {
    key: "tileToRemoteId",
    value: function(i) {
      return this.tileToLocalId(i);
    }
  }]), r;
}(Ep);
function $He(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function pj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, UHe(n.key), n);
  }
}
function HHe(e12, t, r) {
  return t && pj(e12.prototype, t), r && pj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function UHe(e12) {
  var t = jHe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function jHe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function qc() {
  return typeof Reflect < "u" && Reflect.get ? qc = Reflect.get.bind() : qc = function(t, r, n) {
    var i = GHe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, qc.apply(this, arguments);
}
function GHe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = ws(e12), e12 !== null); )
    ;
  return e12;
}
function zHe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && YC(e12, t);
}
function YC(e12, t) {
  return YC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, YC(e12, t);
}
function VHe(e12) {
  var t = YHe();
  return function() {
    var n = ws(e12), i;
    if (t) {
      var o = ws(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return XHe(this, i);
  };
}
function XHe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return WHe(e12);
}
function WHe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function YHe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function ws(e12) {
  return ws = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, ws(e12);
}
var SZ = function(e12) {
  zHe(r, e12);
  var t = VHe(r);
  function r() {
    return $He(this, r), t.apply(this, arguments);
  }
  return HHe(r, [{
    key: "initTile",
    value: (
      /**
       * Create whatever is needed to draw this tile.
       */
      function(i) {
        i.barXValues = new Array(i.tileData.dense.length), i.barYValues = new Array(i.tileData.dense.length), i.barWidths = new Array(i.tileData.dense.length), i.barHeights = new Array(i.tileData.dense.length), qc(ws(r.prototype), "initTile", this).call(this, i);
      }
    )
  }, {
    key: "drawTile",
    value: function(i) {
      if (!i.graphics || !i.tileData || !i.tileData.dense)
        return;
      const o = i.graphics, {
        tileX: a,
        tileWidth: s
      } = this.getTilePosAndDimensions(i.tileData.zoomLevel, i.tileData.tilePos), l = i.tileData.dense;
      if (l.length === 0)
        return;
      let u = 0;
      if (this.valueScale = null, this.options.valueScaling === "log") {
        let m = this.medianVisibleValue;
        this.medianVisibleValue || (m = this.minValue()), this.valueScale = nc().domain([m, this.maxValue() + m]).range([this.dimensions[1], 0]), u = m;
      } else
        this.valueScale = It().domain([this.minValue(), this.maxValue()]).range([this.dimensions[1], 0]);
      if (o.clear(), this.drawAxis(this.valueScale), this.options.valueScaling === "log" && this.valueScale.domain()[1] < 0) {
        console.warn("Negative values present when using a log scale", this.valueScale.domain());
        return;
      }
      const c = ct(this.options.lineStrokeColor ? this.options.lineStrokeColor : "blue"), f = It().domain([0, this.tilesetInfo.tile_size]).range([a, a + s]), h = 0;
      o.lineStyle(h, c, 1);
      const d = this.options.pointSize ? this.options.pointSize : 3, p = ct(this.options.pointColor ? this.options.pointColor : "red");
      o.beginFill(p, 1), i.drawnAtScale = this._xScale.copy();
      for (let m = 0; m < l.length; m++) {
        const g = this._xScale(f(m)), v = this.valueScale(l[m] + u);
        if (i.barXValues[m] = g - d / 2 / this.pMain.scale.x, i.barYValues[m] = v - d / 2 / this.pMain.scale.y, i.barWidths[m] = d / this.pMain.scale.x, i.barHeights[m] = d / this.pMain.scale.y, f(m) > this.tilesetInfo.max_pos[0])
          break;
        o.drawRect(g - d / 2 / this.pMain.scale.x, v - d / 2 / this.pMain.scale.y, d / this.pMain.scale.x, d / this.pMain.scale.y);
      }
    }
  }, {
    key: "draw",
    value: function() {
      qc(ws(r.prototype), "draw", this).call(this);
      for (const i of mr(this.fetchedTiles)) {
        const o = (i.drawnAtScale.domain()[1] - i.drawnAtScale.domain()[0]) / (this._xScale.domain()[1] - this._xScale.domain()[0]), s = this._xScale.domain().map(i.drawnAtScale)[0];
        i.graphics.scale.x = o, i.graphics.position.x = -s * o;
      }
    }
  }, {
    key: "zoomed",
    value: function(i, o, a, s, l) {
      qc(ws(r.prototype), "zoomed", this).call(this, i, o);
    }
    /**
     * Export an SVG representation of this track
     *
     * @returns {Array} The two returned DOM nodes are both SVG
     * elements [base,track]. Base is a parent which contains track as a
     * child. Track is clipped with a clipping rectangle contained in base.
     *
     */
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      [o, i] = qc(ws(r.prototype), "superSVG", this).call(this), o.setAttribute("class", "exported-line-track");
      const a = document.createElement("g");
      i.appendChild(a), a.setAttribute("transform", `translate(${this.position[0]},${this.position[1]})`);
      for (const l of this.visibleAndFetchedTiles())
        for (let u = 0; u < l.barXValues.length; u++) {
          const c = document.createElement("rect"), f = this.options.lineStrokeColor || "blue", h = this.options.pointColor || "red";
          c.setAttribute("fill", h), c.setAttribute("stroke", f), c.setAttribute("stroke-width", 0), c.setAttribute("x", l.barXValues[u]), c.setAttribute("y", l.barYValues[u]), c.setAttribute("height", l.barHeights[u]), c.setAttribute("width", l.barWidths[u]), a.appendChild(c);
        }
      const s = document.createElement("g");
      if (s.setAttribute("id", "axis"), o.appendChild(s), s.setAttribute("transform", `translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`), this.options.axisPositionHorizontal === "left" || this.options.axisPositionVertical === "top") {
        const l = this.axis.exportAxisLeftSVG(this.valueScale, this.dimensions[1]);
        s.appendChild(l);
      } else if (this.options.axisPositionHorizontal === "right" || this.options.axisPositionVertical === "bottom") {
        const l = this.axis.exportAxisRightSVG(this.valueScale, this.dimensions[1]);
        s.appendChild(l);
      }
      return [o, i];
    }
  }]), r;
}(wp);
function qHe(e12) {
  let t = 0;
  const r = [];
  return e12.forEach((n) => {
    t += +n || 0, r.push(t);
  }), Float64Array.from(r);
}
var KHe = (e12, t) => {
  const r = av(e12, t);
  return qHe(e12.map((n) => (Array.isArray(n) && t ? n.length : 1) / r));
};
function ZHe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function mj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, JHe(n.key), n);
  }
}
function QHe(e12, t, r) {
  return t && mj(e12.prototype, t), r && mj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function JHe(e12) {
  var t = e3e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function e3e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Ig() {
  return typeof Reflect < "u" && Reflect.get ? Ig = Reflect.get.bind() : Ig = function(t, r, n) {
    var i = t3e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Ig.apply(this, arguments);
}
function t3e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Nu(e12), e12 !== null); )
    ;
  return e12;
}
function r3e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && qC(e12, t);
}
function qC(e12, t) {
  return qC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, qC(e12, t);
}
function n3e(e12) {
  var t = a3e();
  return function() {
    var n = Nu(e12), i;
    if (t) {
      var o = Nu(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return i3e(this, i);
  };
}
function i3e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return o3e(e12);
}
function o3e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function a3e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Nu(e12) {
  return Nu = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Nu(e12);
}
var wZ = function(e12) {
  r3e(r, e12);
  var t = n3e(r);
  function r(n, i) {
    var o;
    return ZHe(this, r), o = t.call(this, n, i), o.pMain = o.pMobile, o.continuousScaling = false, o.updateDataFetcher(i), o;
  }
  return QHe(r, [{
    key: "updateDataFetcher",
    value: function(i) {
      if (i && i.selectRows && i.selectRowsAggregationMethod === "server") {
        const {
          pubSub: o,
          dataFetcher: a
        } = this, s = a.dataConfig.options, l = {
          aggGroups: i.selectRows,
          aggFunc: i.selectRowsAggregationMode
        };
        if (JSON.stringify(s) !== JSON.stringify(l)) {
          const u = {
            ...a.dataConfig,
            options: l
          };
          this.dataFetcher = new a.constructor(u, o), this.dataFetcher.dataConfig.tilesetUid && this.fetchNewTiles(Object.keys(this.fetchedTiles).map((c) => ({
            tileId: c,
            remoteId: c
          })));
        }
      }
    }
  }, {
    key: "rerender",
    value: function(i, o) {
      this.updateDataFetcher(i), Ig(Nu(r.prototype), "rerender", this).call(this, i, o), i.selectRows && (this.selectRowsCumWeights = KHe(i.selectRows, i.selectRowsAggregationWithRelativeHeight));
    }
  }, {
    key: "tileDataToCanvas",
    value: function(i) {
      const o = document.createElement("canvas");
      this.options.selectRows && this.tilesetInfo.shape ? (o.width = this.tilesetInfo.shape[0], o.height = av(this.options.selectRows, this.options.selectRowsAggregationWithRelativeHeight)) : this.tilesetInfo.shape ? (o.width = this.tilesetInfo.shape[0], o.height = this.tilesetInfo.shape[1]) : (o.width = this.tilesetInfo.tile_size, o.height = 1);
      const a = o.getContext("2d");
      if (a.fillStyle = "transparent", a.fillRect(0, 0, o.width, o.height), i.length !== 0 && i.length === 4 * o.width * o.height) {
        const s = new ImageData(i, o.width, o.height);
        a.putImageData(s, 0, 0);
      } else
        console.warn("HorizontalMultivecTrack: pixData has an incorrect length.");
      return o;
    }
  }, {
    key: "setSpriteProperties",
    value: function(i, o, a) {
      const {
        tileX: s,
        tileWidth: l
      } = this.getTilePosAndDimensions(o, a, this.tilesetInfo.tile_size), u = s + l;
      i.width = this._refXScale(u) - this._refXScale(s), i.height = this.dimensions[1], i.x = this._refXScale(s), i.y = 0;
    }
  }, {
    key: "leftTrackZoomed",
    value: function(i, o, a, s, l) {
      const u = this._xScale(0) - a * this._refXScale(0);
      this.pMobile.position.x = u + this.position[0], this.pMobile.position.y = this.position[1], this.pMobile.scale.x = a, this.pMobile.scale.y = 1;
    }
  }, {
    key: "zoomed",
    value: function(i, o, a, s) {
      Ig(Nu(r.prototype), "zoomed", this).call(this, i, o), this.pMain.position.x = s, this.pMain.position.y = this.position[1], this.pMain.scale.x = a, this.pMain.scale.y = 1, this.drawColorbar();
    }
  }, {
    key: "calculateVisibleTiles",
    value: function() {
      if (!this.tilesetInfo)
        return;
      if (this.zoomLevel = this.calculateZoomLevel(), this.tilesetInfo.resolutions) {
        const o = this.tilesetInfo.resolutions.map((a) => +a).sort((a, s) => s - a);
        this.xTiles = Je.calculateTilesFromResolution(o[this.zoomLevel], this._xScale, this.tilesetInfo.min_pos[0], null, this.tilesetInfo.tile_size);
      } else
        this.xTiles = Je.calculateTiles(this.zoomLevel, this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width);
      const i = this.xTiles.map((o) => [this.zoomLevel, o]);
      this.setVisibleTiles(i);
    }
  }, {
    key: "calculateZoomLevel",
    value: function() {
      if (!this.tilesetInfo)
        return;
      const i = this.tilesetInfo.min_pos[0];
      let o = null;
      return this.tilesetInfo.resolutions ? o = Je.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions, this._xScale, i) : o = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]), o;
    }
    /**
     * Create the local tile identifier, which be used with the
     * tile stores in TiledPixiTrack
     *
     * @param {array} tile: [zoomLevel, xPos]
     */
  }, {
    key: "tileToLocalId",
    value: function(i) {
      return i.join(".");
    }
    /**
     * Create the remote tile identifier, which will be used to identify the
     * tile on the server
     *
     * @param {array} tile: [zoomLevel, xPos]
     */
  }, {
    key: "tileToRemoteId",
    value: function(i) {
      return i.join(".");
    }
    /**
     * Calculate the tile position at the given track position
     *
     * @param {Number} trackX: The track's X position
     * @param {Number} trackY: The track's Y position
     *
     * @return {array} [zoomLevel, tilePos]
     */
  }, {
    key: "getTilePosAtPosition",
    value: function(i, o) {
      if (!this.tilesetInfo)
        return;
      const a = this.calculateZoomLevel(), s = Je.calculateTileWidth(this.tilesetInfo, a, this.tilesetInfo.tile_size), l = this._xScale.invert(i) / s;
      return [a, Math.floor(l)];
    }
    /**
     * Return the data currently visible at position X and Y
     *
     * @param {Number} trackX: The x position relative to the track's start and end
     * @param {Number} trakcY: The y position relative to the track's start and end
     */
  }, {
    key: "getVisibleData",
    value: function(i, o) {
      const a = this.calculateZoomLevel(), s = Je.calculateTileWidth(this.tilesetInfo, a, this.tilesetInfo.tile_size), l = this._xScale.invert(i) / s;
      let u = this.tilesetInfo.shape ? this.tilesetInfo.shape[1] : 1;
      this.options.selectRows && (u = av(this.options.selectRows, this.options.selectRowsAggregationWithRelativeHeight));
      let c = this.tilesetInfo.tile_size * (l - Math.floor(l));
      const f = o / this.dimensions[1], h = f * u;
      let d = Math.floor(h), p;
      this.options.selectRows && (this.options.selectRowsAggregationWithRelativeHeight && (d = this.selectRowsCumWeights.findIndex((_, y) => f <= _ && (y === this.selectRowsCumWeights.length - 1 || this.selectRowsCumWeights[y + 1] >= f))), p = this.options.selectRows[d]);
      const m = this.tileToLocalId([a, Math.floor(l)]), g = this.fetchedTiles[m];
      let v = "";
      if (g) {
        this.tilesetInfo.shape || (c = g.tileData.dense.length * (l - Math.floor(l)));
        let _ = null;
        if (this.tilesetInfo.shape ? Array.isArray(p) && this.options.selectRowsAggregationMethod === "client" ? _ = p.map((y) => this.tilesetInfo.shape[0] * y + Math.floor(c)) : p && this.options.selectRowsAggregationMethod === "client" ? _ = this.tilesetInfo.shape[0] * p + Math.floor(c) : _ = this.tilesetInfo.shape[0] * d + Math.floor(c) : _ = g.tileData.dense.length * d + Math.floor(c), Array.isArray(_)) {
          const y = tN(this.options.selectRowsAggregationMode), b = _.map((T) => g.tileData.dense[T]);
          v = oo(".3f")(y(b)), v += "<br/>", v += `${_.length}-item ${this.options.selectRowsAggregationMode}`;
        } else
          v = oo(".3f")(g.tileData.dense[_]), Array.isArray(p) && (v += "<br/>", v += `${p.length}-item ${this.options.selectRowsAggregationMode}`);
      }
      if (this.tilesetInfo.row_infos) {
        v += "<br/>";
        let _ = "";
        this.options.selectRows && !Array.isArray(p) ? _ = this.tilesetInfo.row_infos[p] : d >= 0 && d < this.tilesetInfo.row_infos.length && (_ = this.tilesetInfo.row_infos[d]), typeof _ == "object" ? v += Object.values(_).join("	") : v += _;
      }
      return `${v}`;
    }
    /**
     * Get some information to display when the mouse is over this
     * track
     *
     * @param {Number} trackX: the x position of the mouse over the track
     * @param {Number} trackY: the y position of the mouse over the track
     *
     * @return {string}: A HTML string containing the information to display
     *
     */
  }, {
    key: "getMouseOverHtml",
    value: function(i, o) {
      if (!this.tilesetInfo)
        return "";
      const a = this.getTilePosAtPosition(i, o);
      let s = "";
      if (this.options && this.options.heatmapValueScaling && this.options.heatmapValueScaling === "categorical" && this.options.colorRange) {
        const u = this.getVisibleData(i, o).split("<br/>"), c = this.options.colorRange[parseInt(u[0], 10) - 1], f = u[1];
        if (Number.isNaN(c) || c === "NaN" || typeof c > "u" || c === "undefined")
          return "";
        s = `<svg width="10" height="10" style="position:relative;bottom:1px"><rect width="10" height="10" rx="2" ry="2"
                 style="fill:${c};stroke:black;stroke-width:2;"></svg> ${f}`;
      } else
        s += `Data value: ${this.getVisibleData(i, o)}</br>`, s += `Zoom level: ${a[0]} tile position: ${a[1]}`;
      return s;
    }
  }]), r;
}(gy);
function s3e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function gj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, c3e(n.key), n);
  }
}
function l3e(e12, t, r) {
  return t && gj(e12.prototype, t), r && gj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function c3e(e12) {
  var t = u3e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function u3e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function ds() {
  return typeof Reflect < "u" && Reflect.get ? ds = Reflect.get.bind() : ds = function(t, r, n) {
    var i = h3e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, ds.apply(this, arguments);
}
function h3e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = zo(e12), e12 !== null); )
    ;
  return e12;
}
function f3e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && KC(e12, t);
}
function KC(e12, t) {
  return KC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, KC(e12, t);
}
function d3e(e12) {
  var t = g3e();
  return function() {
    var n = zo(e12), i;
    if (t) {
      var o = zo(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return p3e(this, i);
  };
}
function p3e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return m3e(e12);
}
function m3e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function g3e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function zo(e12) {
  return zo = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, zo(e12);
}
var v3e = ct("#FFFFFF");
var AM = function(e12) {
  f3e(r, e12);
  var t = d3e(r);
  function r(...n) {
    var i;
    return s3e(this, r), i = t.call(this, ...n), i.zeroLine = new Ue.PIXI.Graphics(), i.pMain.addChild(i.zeroLine), i.valueScaleTransform = Sn, i.options && i.options.colorRange && (i.options.colorRangeGradient ? i.setColorGradient(i.options.colorRange) : i.setColorScale(i.options.colorRange)), i.initialized = true, i;
  }
  return l3e(r, [{
    key: "setColorScale",
    value: function(i) {
      i && (this.colorScale = Zl(i), this.colorScale = this.colorScale.map((o) => o.map((a) => a / 255)));
    }
  }, {
    key: "setColorGradient",
    value: function(i) {
      if (!i)
        return;
      const o = i.length - 1;
      this.colorGradientColors = this.options.align === "bottom" ? i.slice().reverse().map((a, s) => ({
        from: s / o,
        color: a
      })) : i.map((a, s) => ({
        from: s / o,
        color: a
      }));
    }
    /**
     * Create whatever is needed to draw this tile.
     */
  }, {
    key: "initTile",
    value: function(i) {
      this.initialized && ds(zo(r.prototype), "initTile", this).call(this, i);
    }
  }, {
    key: "updateTile",
    value: function(i) {
      (!i.valueScale || !this.scale || this.scale.minValue !== i.scale.minValue || this.scale.maxValue !== i.scale.maxValue) && this.renderTile(i);
    }
  }, {
    key: "renderTile",
    value: function(i) {
      this.initialized && ds(zo(r.prototype), "renderTile", this).call(this, i);
    }
  }, {
    key: "drawTile",
    value: function(i) {
      if (!i.graphics || !i.tileData || !i.tileData.dense)
        return;
      const {
        graphics: o
      } = i;
      i.svgData = void 0;
      const {
        tileX: a,
        tileWidth: s
      } = this.getTilePosAndDimensions(i.tileData.zoomLevel, i.tileData.tilePos, this.tilesetInfo.bins_per_dimension || this.tilesetInfo.tile_size), l = i.tileData.dense;
      if (l.length === 0)
        return;
      const [u, c] = this.makeValueScale(this.minValue(), this.medianVisibleValue, this.maxValue(), 0);
      u.clamp(true), this.valueScale = u;
      const f = u.copy();
      if (f.range([254, 0]).clamp(true), o.clear(), this.drawAxis(this.valueScale), this.options.valueScaling === "log" && this.valueScale.domain()[1] < 0) {
        console.warn("Negative values present when using a log scale", this.valueScale.domain());
        return;
      }
      const h = ct(this.options.lineStrokeColor || "blue"), d = It().domain([0, this.tilesetInfo.tile_size || this.tilesetInfo.bins_per_dimension]).range([a, a + s]), p = 0;
      o.lineStyle(p, h, 1);
      const m = this.options.barFillColor || "grey", g = ct(m), v = "barOpacity" in this.options ? this.options.barOpacity : 1;
      o.beginFill(g, v), i.drawnAtScale = this._xScale.copy();
      const _ = this.options.align === "top";
      let y, b, T, E, P, A;
      if (this.colorGradientColors) {
        P = new Ue.PIXI.Graphics(), P.beginFill(v3e, 1);
        const I = UV(
          this.colorGradientColors,
          1,
          this.dimensions[1],
          // width, height
          0,
          0,
          0,
          this.dimensions[1]
          // fromX, fromY, toX, toY
        );
        A = new Ue.PIXI.Sprite(Ue.PIXI.Texture.fromCanvas(I, Ue.PIXI.SCALE_MODES.NEAREST)), A.x = this._xScale(a), A.width = this._xScale(a + s) - A.x;
      }
      for (let I = 0; I < l.length; I++)
        if (y = this._xScale(d(I)), T = this.valueScale(l[I] + c), b = this._xScale(d(I + 1)) - y, E = this.dimensions[1] - T, _ && (T = 0), !(Number.isNaN(E) || E < 0 || T < 0)) {
          if (this.addSVGInfo(i, y, T, b, E, m), d(I) > this.tilesetInfo.max_pos[0])
            break;
          if (this.colorScale && !this.options.colorRangeGradient) {
            const x = Math.round(f(l[I] + c)), S = this.colorScale[x], N = Ue.PIXI.utils.rgb2hex(S);
            o.beginFill(N, v);
          }
          (P || o).drawRect(y, T, b, E);
        }
      this.colorGradientColors && (A.mask = P, o.removeChildren(), o.addChild(A, P));
    }
  }, {
    key: "rerender",
    value: function(i, o) {
      i && i.colorRange && (i.colorRangeGradient ? this.setColorGradient(i.colorRange) : this.setColorScale(i.colorRange)), ds(zo(r.prototype), "rerender", this).call(this, i, o);
    }
  }, {
    key: "drawZeroLine",
    value: function() {
      this.zeroLine.clear();
      const i = ct(this.options.barFillColor || "grey"), o = +this.options.barOpacity || 1, a = this.options.zeroLineColor ? ct(this.options.zeroLineColor) : i, s = Number.isNaN(+this.options.zeroLineOpacity) ? o : +this.options.zeroLineOpacity;
      this.zeroLine.beginFill(a, s), this.zeroLine.drawRect(0, this.dimensions[1] - 1, this.dimensions[0], 1);
    }
  }, {
    key: "drawZeroLineSvg",
    value: function(i) {
      const o = document.createElement("rect");
      o.setAttribute("id", "zero-line"), o.setAttribute("x", 0), o.setAttribute("y", this.dimensions[1] - 1), o.setAttribute("height", 1), o.setAttribute("width", this.dimensions[0]), o.setAttribute("fill", this.options.zeroLineColor || this.options.barFillColor), o.setAttribute("fill-opacity", this.options.zeroLineOpacity || this.options.barOpacity), i.appendChild(o);
    }
  }, {
    key: "getXScaleAndOffset",
    value: function(i) {
      const o = i.domain(), a = this._xScale.domain(), s = (o[1] - o[0]) / (a[1] - a[0]), u = this._xScale.domain().map(i)[0];
      return [s, -u * s];
    }
  }, {
    key: "draw",
    value: function() {
      this.initialized && (ds(zo(r.prototype), "draw", this).call(this), this.options.zeroLineVisible ? this.drawZeroLine() : this.zeroLine.clear(), Object.values(this.fetchedTiles).forEach((i) => {
        const [o, a] = this.getXScaleAndOffset(i.drawnAtScale);
        i.graphics.scale.x = o, i.graphics.position.x = a;
      }));
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      ds(zo(r.prototype), "zoomed", this).call(this, i, o);
    }
  }, {
    key: "movedY",
    value: function(i) {
    }
  }, {
    key: "zoomedY",
    value: function(i, o) {
    }
    /**
     * Adds information to recreate the track in SVG to the tile
     *
     * @param tile
     * @param x x value of bar
     * @param y y value of bar
     * @param width width of bar
     * @param height height of bar
     * @param color color of bar (not converted to hex)
     */
  }, {
    key: "addSVGInfo",
    value: function(i, o, a, s, l, u) {
      i.svgData ? (i.svgData.barXValues.push(o), i.svgData.barYValues.push(a), i.svgData.barWidths.push(s), i.svgData.barHeights.push(l), i.svgData.barColors.push(u)) : i.svgData = {
        barXValues: [o],
        barYValues: [a],
        barWidths: [s],
        barHeights: [l],
        barColors: [u]
      };
    }
    /**
     * Export an SVG representation of this track
     *
     * @returns {Array} The two returned DOM nodes are both SVG
     * elements [base,track]. Base is a parent which contains track as a
     * child. Track is clipped with a clipping rectangle contained in base.
     *
     */
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      [o, i] = ds(zo(r.prototype), "superSVG", this).call(this), o.setAttribute("class", "exported-line-track");
      const a = document.createElement("g");
      i.appendChild(a), a.setAttribute("transform", `translate(${this.position[0]},${this.position[1]})`), this.options.zeroLine && this.drawZeroLineSvg(a), this.visibleAndFetchedTiles().filter((l) => l.svgData && l.svgData.barXValues).forEach((l) => {
        const u = l.svgData;
        for (let c = 0; c < u.barXValues.length; c++) {
          const f = document.createElement("rect");
          f.setAttribute("fill", u.barColors[c]), f.setAttribute("stroke", u.barColors[c]), f.setAttribute("x", u.barXValues[c]), f.setAttribute("y", u.barYValues[c]), f.setAttribute("height", u.barHeights[c]), f.setAttribute("width", u.barWidths[c]), l.barBorders && (f.setAttribute("stroke-width", "0.1"), f.setAttribute("stroke", "black")), a.appendChild(f);
        }
      });
      const s = document.createElement("g");
      if (s.setAttribute("id", "axis"), o.appendChild(s), s.setAttribute("transform", `translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`), this.options.axisPositionHorizontal === "left" || this.options.axisPositionVertical === "top") {
        const l = this.axis.exportAxisLeftSVG(this.valueScale, this.dimensions[1]);
        s.appendChild(l);
      } else if (this.options.axisPositionHorizontal === "right" || this.options.axisPositionVertical === "bottom") {
        const l = this.axis.exportAxisRightSVG(this.valueScale, this.dimensions[1]);
        s.appendChild(l);
      }
      return [o, i];
    }
  }]), r;
}(wp);
function y3e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function vj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, b3e(n.key), n);
  }
}
function _3e(e12, t, r) {
  return t && vj(e12.prototype, t), r && vj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function b3e(e12) {
  var t = T3e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function T3e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function E3e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && ZC(e12, t);
}
function ZC(e12, t) {
  return ZC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, ZC(e12, t);
}
function S3e(e12) {
  var t = O3e();
  return function() {
    var n = mT(e12), i;
    if (t) {
      var o = mT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return w3e(this, i);
  };
}
function w3e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return A3e(e12);
}
function A3e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function O3e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function mT(e12) {
  return mT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, mT(e12);
}
var AZ = function(e12) {
  E3e(r, e12);
  var t = S3e(r);
  function r() {
    return y3e(this, r), t.apply(this, arguments);
  }
  return _3e(r, [{
    key: "drawTile",
    value: function(i) {
      this.renderTile(i);
    }
  }, {
    key: "renderTile",
    value: function(i) {
      if (!i.graphics)
        return;
      const o = i.graphics, {
        tileX: a,
        tileWidth: s
      } = this.getTilePosAndDimensions(i.tileData.zoomLevel, i.tileData.tilePos, this.tilesetInfo.tile_size || this.tilesetInfo.bins_per_dimension), l = i.tileData.dense;
      if (l.length === 0)
        return;
      let u = 0;
      if (this.valueScale = null, this.options.valueScaling === "log") {
        let y = this.medianVisibleValue;
        this.medianVisibleValue || (y = this.minValue()), this.valueScale = nc().domain([y, this.maxValue() + y]).range([this.dimensions[1], 0]), u = y;
      } else
        this.valueScale = It().domain([this.minValue(), this.maxValue()]).range([this.dimensions[1], 0]);
      if (o.clear(), this.drawAxis(this.valueScale), this.options.valueScaling === "log" && this.valueScale.domain()[1] < 0) {
        console.warn("Negative values present when using a log scale", this.valueScale.domain());
        return;
      }
      const c = ct(this.options.lineStrokeColor ? this.options.lineStrokeColor : "blue"), f = It().domain([0, this.tilesetInfo.tile_size]).range([a, a + s]), h = 0;
      o.lineStyle(h, c, 1);
      const d = this.options.barFillColorTop ? this.options.barFillColorTop : "green", p = this.options.barFillColorBottom ? this.options.barFillColorBottom : "red", m = ct(d), g = ct(p), v = "barOpacity" in this.options ? this.options.barOpacity : 1;
      i.drawnAtScale = this._xScale.copy();
      let _ = 0;
      this.options.valueScaling === "log" ? _ = this.valueScale(1) : _ = this.valueScale(0), delete i.svgData;
      for (let y = 0; y < l.length; y++) {
        const b = this._xScale(f(y)), T = this.valueScale(l[y] + u), E = this._xScale(f(y + 1)) - b;
        if (T > _ ? (o.beginFill(g, v), this.addSVGInfo(i, b, _, E, T - _, p)) : (o.beginFill(m, v), this.addSVGInfo(i, b, T, E, _ - T, d)), f(y) > this.tilesetInfo.max_pos[0])
          break;
        o.drawRect(b, i.svgData.barYValues[y], E, i.svgData.barHeights[y]);
      }
    }
  }]), r;
}(AM);
function I3e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function yj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, C3e(n.key), n);
  }
}
function P3e(e12, t, r) {
  return t && yj(e12.prototype, t), r && yj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function C3e(e12) {
  var t = x3e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function x3e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Lb() {
  return typeof Reflect < "u" && Reflect.get ? Lb = Reflect.get.bind() : Lb = function(t, r, n) {
    var i = k3e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Lb.apply(this, arguments);
}
function k3e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Bd(e12), e12 !== null); )
    ;
  return e12;
}
function D3e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && QC(e12, t);
}
function QC(e12, t) {
  return QC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, QC(e12, t);
}
function R3e(e12) {
  var t = L3e();
  return function() {
    var n = Bd(e12), i;
    if (t) {
      var o = Bd(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return N3e(this, i);
  };
}
function N3e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return M3e(e12);
}
function M3e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function L3e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Bd(e12) {
  return Bd = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Bd(e12);
}
var OZ = function(e12) {
  D3e(r, e12);
  var t = R3e(r);
  function r(n, i) {
    var o;
    return I3e(this, r), o = t.call(this, n, i), o.setColorScale(i.colorRange), o.opacity = i.opacity || 1, o;
  }
  return P3e(r, [{
    key: "setColorScale",
    value: function(i) {
      this.colorScale = i ? Zl(i) : dd, this.colorScale = this.colorScale.map((o) => o.map((a) => a / 255));
    }
  }, {
    key: "rerender",
    value: function(i) {
      i && i.colorRange && this.setColorScale(i.colorRange), this.opacity = i.opacity || 1, Lb(Bd(r.prototype), "rerender", this).call(this, i);
    }
  }, {
    key: "drawAxis",
    value: function() {
    }
  }, {
    key: "drawTile",
    value: function(i) {
      if (!i.graphics || !i.tileData || !i.tileData.dense)
        return;
      const o = i.graphics, {
        tileX: a,
        tileWidth: s
      } = this.getTilePosAndDimensions(i.tileData.zoomLevel, i.tileData.tilePos), l = i.tileData.dense;
      if (l.length === 0)
        return;
      const [u, c] = this.makeValueScale(this.minValue(), this.medianVisibleValue, this.maxValue());
      if (u.range([254, 0]).clamp(true), this.valueScale = u, o.clear(), this.options.valueScaling === "log" && this.valueScale.domain()[1] < 0) {
        console.warn("Negative values present when using a log scale", this.valueScale.domain());
        return;
      }
      const f = It().domain([0, this.tilesetInfo.tile_size]).range([a, a + s]);
      o.lineStyle(0, 0, 0);
      for (let h = 0; h < l.length; h++) {
        if (Number.isNaN(l[h]))
          continue;
        const d = Math.round(this.valueScale(l[h] + c));
        if (Number.isNaN(+d))
          continue;
        const p = this._xScale(f(h)), m = this._xScale(f(h + 1)) - p, g = this.dimensions[1];
        i.xValues[h] = p, i.yValues[h] = d;
        const v = this.colorScale[d], _ = Ue.PIXI.utils.rgb2hex(v);
        if (o.beginFill(_, this.opacity), h !== 0) {
          if (f(h) > this.tilesetInfo.max_pos[0])
            break;
          l[h] !== 0 && o.drawRect(p, 0, m, g);
        }
      }
    }
  }]), r;
}(wp);
function B3e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function _j(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, $3e(n.key), n);
  }
}
function F3e(e12, t, r) {
  return t && _j(e12.prototype, t), r && _j(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function $3e(e12) {
  var t = H3e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function H3e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function U3e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && JC(e12, t);
}
function JC(e12, t) {
  return JC = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, JC(e12, t);
}
function j3e(e12) {
  var t = V3e();
  return function() {
    var n = gT(e12), i;
    if (t) {
      var o = gT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return G3e(this, i);
  };
}
function G3e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return z3e(e12);
}
function z3e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function V3e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function gT(e12) {
  return gT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, gT(e12);
}
var IZ = function(e12) {
  U3e(r, e12);
  var t = j3e(r);
  function r(n, i) {
    var o;
    return B3e(this, r), o = t.call(this, n, i), o.seen = /* @__PURE__ */ new Set(), o.pMain = o.pMobile, o.rows = [], o;
  }
  return F3e(r, [{
    key: "uid",
    value: function(i) {
      return i[i.length - 2];
    }
  }, {
    key: "segmentOverlap",
    value: function(i, o) {
    }
  }, {
    key: "drawAll",
    value: function(i) {
      this.pMain.clear();
      const o = /* @__PURE__ */ new Set(), a = i.map((l) => o.has(this.uid(l)) ? null : (o.add(this.uid(l)), {
        from: +l[1],
        to: +l[2],
        type: l[4],
        uid: this.uid(l)
      })).filter((l) => l), s = $0(a);
      this.rows = s, this.draw();
    }
  }, {
    key: "draw",
    value: function() {
      const i = this.rows;
      if (!i)
        return;
      const o = Fv().range([0, this.dimensions[1]]).padding(0.1).domain(yi(0, this.maxRows())), a = this.pMain;
      a.clear(), a.lineStyle(1, 255, 0), a.beginFill(16740363, 0.8);
      for (let s = 0; s < i.length; s++)
        for (let l = 0; l < i[s].length; l++) {
          const u = i[s][l], c = this._refXScale(u.from), f = this._refXScale(u.to), h = o(s), d = h + o.bandwidth(), p = f - c, m = d - h;
          a.drawRect(c, h, p, m);
        }
    }
  }, {
    key: "allTilesLoaded",
    value: function() {
      const o = this.visibleAndFetchedIds().map((s) => this.fetchedTiles[s].tileData.discrete), a = [].concat(...o);
      this.drawAll(a);
    }
  }, {
    key: "initTile",
    value: function(i) {
    }
  }, {
    key: "maxRows",
    value: function() {
      return this.rows.length;
    }
  }, {
    key: "updateTile",
    value: function(i) {
    }
  }, {
    key: "destroyTile",
    value: function(i) {
      i.tileData.discrete.forEach((o) => {
        const a = o[o.length - 2];
        this.seen.has(a) && this.seen.delete(a);
      });
    }
  }, {
    key: "drawTile",
    value: function(i) {
    }
  }]), r;
}(Ep);
function X3e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function bj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, Y3e(n.key), n);
  }
}
function W3e(e12, t, r) {
  return t && bj(e12.prototype, t), r && bj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function Y3e(e12) {
  var t = q3e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function q3e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
var Tj = function() {
  function e12(t) {
    X3e(this, e12), this.scene = t.scene, this.originalTrack = t, this.pBase = new Ue.PIXI.Graphics(), this.scene.removeChild(t.pBase), this.scene.addChild(this.pBase), this.moveToOrigin = new Ue.PIXI.Graphics(), this.moveToOrigin.addChild(t.pBase), this.pBase.addChild(this.moveToOrigin), this.moveToOrigin.rotation = Math.PI / 2, t.isLeftModified = true, t.flipText = true, this.svgOutput = null, t.gBase && t.gMain && (this.originalTrack.gBase.attr("transform", `translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})
                             rotate(90)
                             scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`), this.originalTrack.gMain.attr("transform", `translate(${this.originalTrack.pBase.position.x},${this.originalTrack.pBase.position.y})`));
  }
  return W3e(e12, [{
    key: "remove",
    value: function() {
      this.originalTrack.remove(), this.pBase.clear(), this.scene.removeChild(this.pBase);
    }
  }, {
    key: "setDimensions",
    value: function(r) {
      this.dimensions = r;
      const n = [r[1], r[0]];
      this.originalTrack.setDimensions(n);
    }
  }, {
    key: "setPosition",
    value: function(r) {
      this.position = r, this.originalTrack.setPosition(r), this.originalTrack.pBase.position.x = -this.originalTrack.position[0], this.originalTrack.pBase.position.y = -this.originalTrack.position[1], this.moveToOrigin.scale.y = -1, this.moveToOrigin.scale.x = 1, this.moveToOrigin.position.x = this.originalTrack.position[0], this.moveToOrigin.position.y = this.originalTrack.position[1], this.originalTrack.gMain && (this.originalTrack.gBase.attr("transform", `translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})
                                 rotate(90)
                                 scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`), this.originalTrack.gMain.attr("transform", `translate(${this.originalTrack.pBase.position.x},${this.originalTrack.pBase.position.y})`));
    }
  }, {
    key: "refXScale",
    value: function(r) {
      return arguments.length ? (this.originalTrack._refXScale = r, this) : this.originalTrack._refYScale;
    }
  }, {
    key: "refYScale",
    value: function(r) {
      return arguments.length ? (this.originalTrack._refYScale = r, this) : this.originalTrack._refXScale;
    }
  }, {
    key: "xScale",
    value: function(r) {
      return arguments.length ? (this.originalTrack._yScale = r, this) : this.originalTrack._xScale;
    }
  }, {
    key: "yScale",
    value: function(r) {
      return arguments.length ? (this.originalTrack._xScale = r, this) : this.originalTrack._yScale;
    }
  }, {
    key: "getMouseOverHtml",
    value: function(r, n) {
      return this.originalTrack.getMouseOverHtml(n, r);
    }
  }, {
    key: "clickOutside",
    value: function() {
      this.originalTrack.clickOutside();
    }
  }, {
    key: "click",
    value: function(...r) {
      this.originalTrack.click(...r);
    }
  }, {
    key: "draw",
    value: function() {
      this.originalTrack.draw();
    }
  }, {
    key: "zoomed",
    value: function(r, n, i = 1, o = 0, a = 0, s = 0, l = 0) {
      if (this.xScale(r), this.yScale(n), this.originalTrack.leftTrackZoomed) {
        this.originalTrack.refreshTiles && this.originalTrack.refreshTiles(), this.originalTrack.leftTrackZoomed(r, n, i, o, a), this.originalTrack.draw();
        return;
      }
      const u = this.originalTrack._xScale(0) - i * this.originalTrack._refXScale(0);
      if (this.originalTrack.pMobile.position.x = u + this.originalTrack.position[0], this.originalTrack.pMobile.position.y = this.originalTrack.position[1] + this.originalTrack.dimensions[1], this.originalTrack.pMobile.scale.x = i, this.originalTrack.pMobile.scale.y = i, this.originalTrack.options.oneDHeatmapFlipped && (this.originalTrack.pMobile.scale.y = -i, this.originalTrack.pMobile.position.y = this.originalTrack.position[1]), this.originalTrack.leftTrackDraw) {
        this.originalTrack.refreshTiles && this.originalTrack.refreshTiles(), this.originalTrack.leftTrackDraw();
        return;
      }
      this.originalTrack.zoomed(this.xScale(), this.yScale());
    }
  }, {
    key: "zoomedY",
    value: function(r, n) {
      this.originalTrack.zoomedY(r, n);
    }
  }, {
    key: "movedY",
    value: function(r) {
      this.originalTrack.movedY(r);
    }
  }, {
    key: "refScalesChanged",
    value: function(r, n) {
      this.originalTrack.refScalesChanged(n, r);
    }
  }, {
    key: "rerender",
    value: function(r) {
      this.originalTrack.rerender(r);
    }
  }, {
    key: "exportSVG",
    value: function() {
      const r = document.createElement("g");
      if (r.setAttribute("transform", `translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})
                             rotate(90)
                             scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`), this.originalTrack.exportSVG) {
        const n = document.createElement("g");
        n.setAttribute("transform", `translate(${this.originalTrack.pBase.position.x}, ${this.originalTrack.pBase.position.y})`), n.appendChild(this.originalTrack.exportSVG()[0]), r.appendChild(n);
      }
      return [r, r];
    }
  }, {
    key: "respondsToPosition",
    value: function(r, n) {
      return r >= this.position[0] && r <= this.dimensions[0] + this.position[0] && n >= this.position[1] && n <= this.dimensions[1] + this.position[1];
    }
  }]), e12;
}();
function K3e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Ej(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, Q3e(n.key), n);
  }
}
function Z3e(e12, t, r) {
  return t && Ej(e12.prototype, t), r && Ej(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function Q3e(e12) {
  var t = J3e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function J3e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function ps() {
  return typeof Reflect < "u" && Reflect.get ? ps = Reflect.get.bind() : ps = function(t, r, n) {
    var i = eUe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, ps.apply(this, arguments);
}
function eUe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Vo(e12), e12 !== null); )
    ;
  return e12;
}
function tUe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && ex(e12, t);
}
function ex(e12, t) {
  return ex = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, ex(e12, t);
}
function rUe(e12) {
  var t = oUe();
  return function() {
    var n = Vo(e12), i;
    if (t) {
      var o = Vo(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return nUe(this, i);
  };
}
function nUe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return iUe(e12);
}
function iUe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function oUe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Vo(e12) {
  return Vo = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Vo(e12);
}
var Sj = 11;
var kO = "Arial";
var wj = "outside";
var tx = 10;
var aUe = 4;
var sUe = 20;
var lUe = ct("#ffffff");
var M_ = 2;
var cUe = 2 * tx / 3;
var $h = 2 * cUe / 3;
var uUe = 50;
var hUe = 5e3;
var rx = "blue";
var nx = "red";
var OM = (e12, t, r) => {
  r.type !== "filler" && t.pubSub.publish("app.click", {
    type: "gene-annotation",
    event: e12,
    payload: r
  });
};
var Aj = (e12, t) => {
  const r = e12.concat(t), n = r.map((i) => [i.xStart, 1, i.xEnd, 1]);
  vy(n, (i, o) => {
    let a = null, s = null;
    if (r[i].type === "filler" ? a = r[i] : s = r[i], r[o].type === "filler") {
      if (a)
        return;
      a = r[o];
    } else {
      if (!a)
        return;
      s = r[o];
    }
    a.xStart >= s.xStart && a.xEnd <= s.xEnd && (a.hide = true);
  });
};
function fUe(e12, t, r) {
  const {
    flipText: n,
    fontSize: i,
    fontFamily: o,
    plusStrandColor: a,
    minusStrandColor: s,
    maxGeneEntries: l,
    maxFillerEntries: u,
    maxTexts: c
  } = r;
  if (t.texts = {}, t.rectGraphics = new Ue.PIXI.Graphics(), t.textBgGraphics = new Ue.PIXI.Graphics(), t.textGraphics = new Ue.PIXI.Graphics(), t.rectMaskGraphics = new Ue.PIXI.Graphics(), t.graphics.addChild(t.rectGraphics), t.graphics.addChild(t.textBgGraphics), t.graphics.addChild(t.textGraphics), t.graphics.addChild(t.rectMaskGraphics), t.rectGraphics.mask = t.rectMaskGraphics, !t.tileData.sort)
    return;
  t.tileData.sort((d, p) => p.importance - d.importance);
  const f = t.tileData.filter((d) => d.type !== "filler").slice(0, l), h = t.tileData.filter((d) => d.type === "filler").slice(0, u);
  t.tileData = f.concat(h), t.tileData.forEach((d, p) => {
    if (d.type === "filler")
      return;
    const m = d.fields, g = m[3], v = e12.geneId(m, d.type), _ = d.strand || m[5];
    d.strand = d.strand || _;
    let y = a || rx;
    if (_ === "-" && (y = s || nx), t.textWidths = {}, t.textHeights = {}, p >= c)
      return;
    const b = new Ue.PIXI.Text(g, {
      fontSize: `${i}px`,
      fontFamily: o,
      fill: ct(y)
    });
    b.interactive = true, n && (b.scale.x = -1), b.anchor.x = 0.5, b.anchor.y = 1, t.texts[v] = b, t.texts[v].strand = _, t.textGraphics.addChild(b);
  }), t.initialized = true;
}
function Oj(e12, t, r, n, i, o, a, s, l) {
  const u = s - l / 2, c = 0;
  e12.forEach((f) => {
    const h = new Ue.PIXI.Graphics();
    r.rectGraphics.addChild(h), h.beginFill(o, 0.1), h.lineStyle(0, o);
    const d = [i(f.xStart) - c, u, i(f.xEnd) + c, u, i(f.xEnd) + c, u + l, i(f.xStart) - c, u + l, i(f.xStart) - c, u];
    h.interactive = true, h.buttonMode = true, h.mouseup = (p) => OM(p, t, f), h.drawPolygon(d), r.allRects.push([d, f.strand, f]);
  });
}
function dUe(e12, t, r, n, i, o, a, s, l, u) {
  const c = s - l / 2, f = i.split(",").map((b) => +b + a), h = o.split(",").map((b) => +b + a), d = e12._xScale(r), p = e12._xScale(n), m = p - d, g = s, v = [];
  let _ = [d, g - M_ / 2, d + m, g - M_ / 2, d + m, g + M_ / 2, d, g + M_ / 2];
  t.drawPolygon(_), v.push(_);
  const y = 2 * l;
  for (let b = Math.max(e12.position[0], d) + y; b < Math.min(e12.position[0] + e12.dimensions[0], d + m); b += y)
    u === "+" ? _ = [b, g - $h / 2, b + $h / 2, g, b, g + $h / 2] : _ = [b, g - $h / 2, b - $h / 2, g, b, g + $h / 2], v.push(_), t.drawPolygon(_);
  for (let b = 0; b < f.length; b++) {
    const T = f[b], E = h[b], P = e12._xScale(T), A = Math.max(1, e12._xScale(E) - e12._xScale(T));
    let I = d, x = p;
    const S = e12.geneRectHeight / 2;
    let N = null;
    u === "+" ? (x = p - S, N = [Math.min(P, x), c, Math.min(P + A, x), c, Math.min(P + A, x), c + l, Math.min(P, x), c + l, Math.min(P, x), c]) : (I = d + S, N = [Math.max(P, I), c, Math.max(P + A, I), c, Math.max(P + A, I), c + l, Math.max(P, I), c + l, Math.max(P, I), c]), v.push(N), t.drawPolygon(N);
  }
  return v;
}
function pUe(e12, t, r, n, i, o, a, s, l) {
  const u = s - l / 2;
  e12.forEach((c) => {
    const f = t._xScale(c.xStart), h = t._xScale(c.xEnd), d = new Ue.PIXI.Graphics();
    r.rectGraphics.addChild(d), d.beginFill(o, a), d.interactive = true, d.buttonMode = true, d.mouseup = (g) => OM(g, t, c);
    const p = t.geneRectHeight / 2;
    let m = [];
    if (c.strand === "+" || c.fields[5] === "+") {
      const g = Math.max(f, h - p), v = g + p;
      m = [g, u, v, u + t.geneRectHeight / 2, g, u + t.geneRectHeight];
    } else {
      const g = Math.min(h, f + p), v = g - p;
      m = [g, u, v, u + t.geneRectHeight / 2, g, u + t.geneRectHeight];
    }
    d.drawPolygon(m), r.allRects.push([m, c.strand, c]);
  });
}
function mUe(e12, t, r, n, i, o, a, s, l) {
  e12.forEach((u) => {
    const c = u.fields, f = +u.chrOffset, h = c[12], d = c[13], p = new Ue.PIXI.Graphics();
    r.rectGraphics.addChild(p), p.beginFill(o, a), p.interactive = true, p.buttonMode = true, p.mouseup = (m) => OM(m, t, u), r.allRects = r.allRects.concat(dUe(
      t,
      p,
      u.xStart,
      u.xEnd,
      h,
      d,
      f,
      // not used for now because we have just one chromosome
      s,
      l,
      u.strand || u.fields[5]
    ).map((m) => [m, u.strand, u]));
  });
}
function Ij(e12, t, r, n, i, o, a, s, l) {
  pUe(e12, t, r, n, i, o, a, s, l), mUe(e12, t, r, n, i, o, a, s, l);
}
function gUe(e12, t) {
  const {
    tileX: r,
    tileWidth: n
  } = iu.getTilePosAndDimensions(e12.tilesetInfo, t.tileId);
  t.rectMaskGraphics.clear();
  const i = Math.floor(Math.random() * 16 ** 6);
  t.rectMaskGraphics.beginFill(i, 0.3);
  const o = e12._xScale(r), a = 0, s = e12._xScale(r + n) - e12._xScale(r), l = e12.dimensions[1];
  t.rectMaskGraphics.drawRect(o, a, s, l);
}
var PZ = function(e12) {
  tUe(r, e12);
  var t = rUe(r);
  function r(n, i) {
    var o;
    K3e(this, r), o = t.call(this, n, i);
    const {
      animate: a
    } = n;
    return o.animate = a, o.options = i, o.fontSize = +o.options.fontSize || Sj, o.geneLabelPos = o.options.geneLabelPosition || wj, o.geneRectHeight = +o.options.geneAnnotationHeight || tx, o.geneRectHeight -= 2, o.geneStrandSpacing = +o.options.geneStrandSpacing || aUe, o.geneStrandHSpacing = o.geneStrandSpacing / 2, o.geneRectHHeight = o.geneRectHeight / 2, o;
  }
  return Z3e(r, [{
    key: "initTile",
    value: function(i) {
      fUe(this, i, {
        flipText: this.flipText,
        fontSize: this.fontSize,
        fontFamily: kO,
        plusStrandColor: this.options.plusStrandColor,
        minusStrandColor: this.options.minusStrandColor,
        maxGeneEntries: uUe,
        maxFillerEntries: hUe,
        maxTexts: sUe
      }), this.renderTile(i);
    }
    /** cleanup */
  }, {
    key: "destroyTile",
    value: function(i) {
      i.rectGraphics.destroy(), i.rectMaskGraphics.destroy(), i.textGraphics.destroy(), i.textBgGraphics.destroy(), i.graphics.destroy();
    }
    /*
     * Redraw the track because the options
     * changed
     */
  }, {
    key: "rerender",
    value: function(i, o) {
      const a = JSON.stringify(i);
      !o && a === this.prevOptions || (ps(Vo(r.prototype), "rerender", this).call(this, i, o), this.fontSize = +this.options.fontSize || Sj, this.geneLabelPos = this.options.geneLabelPosition || wj, this.geneRectHeight = +this.options.geneAnnotationHeight || tx, this.geneStrandHSpacing = this.geneStrandSpacing / 2, this.geneRectHHeight = this.geneRectHeight / 2, this.prevOptions = a, this.visibleAndFetchedTiles().forEach((s) => {
        this.renderTile(s);
      }));
    }
  }, {
    key: "drawTile",
    value: function() {
    }
  }, {
    key: "geneId",
    value: function(i, o) {
      return `${o}_${i[0]}_${i[1]}_${i[2]}_${i[3]}`;
    }
  }, {
    key: "renderTile",
    value: function(i) {
      if (!i.initialized)
        return;
      i.allRects = [], i.drawnAtScale = this._xScale.copy(), i.rectGraphics.removeChildren(), i.rectGraphics.clear(), i.textBgGraphics.clear();
      const o = {}, a = 0.3, s = 0.3;
      o["+"] = ct(this.options.plusStrandColor || rx), o["-"] = ct(this.options.minusStrandColor || nx);
      let l = i.tileData.filter((v) => v.type === "filler" && v.strand === "+"), u = i.tileData.filter((v) => v.type === "filler" && v.strand === "-");
      const c = i.tileData.filter((v) => v.type !== "filler" && (v.strand === "+" || v.fields[5] === "+")), f = i.tileData.filter((v) => v.type !== "filler" && (v.strand === "-" || v.fields[5] === "-"));
      Aj(c, l), Aj(f, u), l = l.filter((v) => !v.hide), u = u.filter((v) => !v.hide);
      const h = this.dimensions[1] / 2, d = h - this.geneRectHeight / 2 - this.geneStrandSpacing / 2, p = h + this.geneRectHeight / 2 + this.geneStrandSpacing / 2, m = [this, i, i.rectGraphics, this._xScale, o["+"], a, d, this.geneRectHeight], g = [this, i, i.rectGraphics, this._xScale, o["-"], a, p, this.geneRectHeight];
      Oj(l, ...m), Oj(u, ...g), m[5] = s, g[5] = s, Ij(c, ...m), Ij(f, ...g), gUe(this, i), iu.stretchRects(this, [(v) => v.rectGraphics, (v) => v.rectMaskGraphics]);
      for (const v of Object.values(i.texts))
        v.style = {
          fontSize: `${this.fontSize}px`,
          FONT_FAMILY: kO,
          fill: ct(v.strand === "-" ? this.options.minusStrandColor || nx : this.options.plusStrandColor || rx)
        };
    }
  }, {
    key: "calculateZoomLevel",
    value: function() {
      const i = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]);
      let o = Math.min(i, this.maxZoom);
      return o = Math.max(o, 0), o;
    }
  }, {
    key: "draw",
    value: function() {
      ps(Vo(r.prototype), "draw", this).call(this), this.allTexts = [], this.allBoxes = [];
      const i = [];
      this.geneAreaHeight = this.geneRectHeight;
      const o = this.fontSize / 2;
      iu.stretchRects(this, [(a) => a.rectGraphics, (a) => a.rectMaskGraphics]), Object.values(this.fetchedTiles).filter((a) => a.drawnAtScale).forEach((a) => {
        a.textBgGraphics.clear(), a.textBgGraphics.beginFill(typeof this.options.labelBackgroundColor < "u" ? ct(this.options.labelBackgroundColor) : lUe);
        const s = this.parentInFetched(a);
        a.initialized && a.tileData.forEach((l) => {
          if (!a.texts || l.type === "filler")
            return;
          const u = l.fields, c = u[3], f = this.geneId(u, l.type), h = a.texts[f];
          if (!h)
            return;
          const d = +l.chrOffset, p = +u[1] + d, m = +u[2] + d, g = (p + m) / 2;
          let v = this.dimensions[1] / 2;
          const _ = (this.geneAreaHeight - this.fontSize) / 2;
          if (u[5] === "+" ? v -= this.geneLabelPos === "inside" ? _ + this.geneStrandSpacing - 2 : this.fontSize / 2 + this.geneAreaHeight - 2 : v += this.geneLabelPos === "inside" ? this.fontSize + this.geneStrandSpacing / 2 + _ + 1 : 1.5 * this.fontSize + this.geneAreaHeight + 2, h.position.x = this._xScale(g), h.position.y = v, !a.textWidths[f]) {
            const y = h.getBounds().width, b = h.getBounds().height;
            a.textHeights[f] = b, a.textWidths[f] = y;
          }
          if (s)
            h.visible = false;
          else {
            h.visible = true;
            const y = 2;
            this.flipText ? this.allBoxes.push([h.position.x - a.textHeights[f] / 2 - y, v - o - 1, h.position.x + a.textHeights[f] / 2 + y, v + o - 1, c]) : this.allBoxes.push([h.position.x - a.textWidths[f] / 2 - y, v - o - 1, h.position.x + a.textWidths[f] / 2 + y, v + o - 1, c]), this.allTexts.push({
              importance: +u[4],
              text: h,
              caption: c,
              strand: u[5]
            }), i.push(a.textBgGraphics);
          }
        });
      }), this.hideOverlaps(this.allBoxes, this.allTexts), this.renderTextBg(this.allBoxes, this.allTexts, i);
    }
  }, {
    key: "renderTextBg",
    value: function(i, o, a) {
      o.forEach((s, l) => {
        if (s.text.visible && i[l] && a[l]) {
          const [u, c, f, h] = i[l], d = f - u, p = h - c;
          a[l].drawRect(u - d / 2, c - p / 2, d, p);
        }
      });
    }
  }, {
    key: "hideOverlaps",
    value: function(i, o) {
      vy(i, (a, s) => {
        o[a].importance > o[s].importance ? o[s].text.visible = false : o[a].text.visible = false;
      });
    }
  }, {
    key: "setPosition",
    value: function(i) {
      ps(Vo(r.prototype), "setPosition", this).call(this, i), [this.pMain.position.x, this.pMain.position.y] = this.position;
    }
  }, {
    key: "setDimensions",
    value: function(i) {
      ps(Vo(r.prototype), "setDimensions", this).call(this, i), this.halfRectHHeight = this.dimensions[1] / 2, this.visibleAndFetchedTiles().forEach((o) => {
        this.renderTile(o);
      });
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.refreshTiles(), this.draw();
    }
  }, {
    key: "getMouseOverHtml",
    value: function(i, o) {
      if (!this.tilesetInfo)
        return "";
      const a = [i, o];
      for (const s of this.visibleAndFetchedTiles())
        for (let l = 0; l < s.allRects.length; l++) {
          if (s.allRects[l][2].type === "filler")
            continue;
          const u = s.allRects[l][0].slice(0), c = [];
          for (; u.length; ) {
            const h = u.splice(0, 2);
            h[0] = h[0] * s.rectGraphics.scale.x + s.rectGraphics.position.x, h[1] = h[1] * s.rectGraphics.scale.y + s.rectGraphics.position.y, c.push(h);
          }
          if (bZ(c, a) === -1) {
            const h = s.allRects[l][2];
            return `
            <div>
              <b>${h.fields[3]}</b><br>
              <b>Position:</b> ${h.fields[0]}:${h.fields[1]}-${h.fields[2]}<br>
              <b>Strand:</b> ${h.fields[5]}
            </div>
          `;
          }
        }
      return "";
    }
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      ps(Vo(r.prototype), "exportSVG", this) ? [o, i] = ps(Vo(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o);
      const a = document.createElement("g");
      return a.setAttribute("transform", `translate(${this.position[0]},${this.position[1]})`), i.appendChild(a), this.visibleAndFetchedTiles().filter((s) => s.allRects).forEach((s) => {
        const l = document.createElement("g");
        l.setAttribute("transform", `translate(${s.rectGraphics.position.x},
          ${s.rectGraphics.position.y})
          scale(${s.rectGraphics.scale.x},
          ${s.rectGraphics.scale.y})`), s.allRects.forEach((u) => {
          const c = document.createElement("path"), f = u[0];
          let h = `M ${f[0]} ${f[1]}`;
          for (let d = 2; d < f.length; d += 2)
            h += ` L ${f[d]} ${f[d + 1]}`;
          c.setAttribute("d", h), u[1] === "+" ? c.setAttribute("fill", this.options.plusStrandColor) : c.setAttribute("fill", this.options.minusStrandColor), c.setAttribute("opacity", "0.3"), l.appendChild(c);
        }), a.appendChild(l);
      }), this.allTexts.filter((s) => s.text.visible).forEach((s) => {
        const l = document.createElement("g"), u = document.createElement("text");
        u.setAttribute("text-anchor", "middle"), u.setAttribute("font-family", kO), u.setAttribute("font-size", `${this.fontSize}px`), u.setAttribute("dy", "-.2em"), l.setAttribute("transform", `scale(${s.text.scale.x},1)`), s.strand === "+" ? u.setAttribute("fill", this.options.plusStrandColor) : u.setAttribute("fill", this.options.minusStrandColor), u.innerHTML = s.text.text, l.appendChild(u), l.setAttribute("transform", `translate(${s.text.x},${s.text.y})scale(${s.text.scale.x},1)`), a.appendChild(l);
      }), [o, o];
    }
  }]), r;
}(Ep);
function vUe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Pj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, _Ue(n.key), n);
  }
}
function yUe(e12, t, r) {
  return t && Pj(e12.prototype, t), r && Pj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function _Ue(e12) {
  var t = bUe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function bUe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Kc() {
  return typeof Reflect < "u" && Reflect.get ? Kc = Reflect.get.bind() : Kc = function(t, r, n) {
    var i = TUe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Kc.apply(this, arguments);
}
function TUe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = As(e12), e12 !== null); )
    ;
  return e12;
}
function EUe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && ix(e12, t);
}
function ix(e12, t) {
  return ix = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, ix(e12, t);
}
function SUe(e12) {
  var t = OUe();
  return function() {
    var n = As(e12), i;
    if (t) {
      var o = As(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return wUe(this, i);
  };
}
function wUe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return AUe(e12);
}
function AUe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function OUe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function As(e12) {
  return As = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, As(e12);
}
function Cj(e12, t, r, n, i, o, a, s, l, u) {
  const c = u ? e12._xScale(r.yStart) : e12._xScale(r.xStart), f = u ? e12._xScale(r.yEnd) : e12._xScale(r.xEnd), h = u ? e12._yScale(r.xStart) : e12._yScale(r.yStart), d = u ? e12._yScale(r.xEnd) : e12._yScale(r.yEnd), p = r.uid + u, m = f - c, g = d - h;
  let v = {
    x: c,
    y: h,
    width: m,
    height: g
  };
  n && (m < n || g < n) && (v = {
    x: c - n / 2,
    y: h - n / 2,
    width: n,
    height: n
  }), e12.drawnRects[p] = v;
  const _ = v.x + v.width, y = v.y + v.height;
  (v.x > i && v.x < o || _ > i && _ < o || v.y > a && v.y < s || y > a && y < s) && (v.width > l || v.height > l) && (t.drawRect(v.x, v.y, v.width, v.height), e12.publish("annotationDrawn", {
    trackUuid: e12.uuid,
    annotationUuid: p,
    viewPos: [v.x, v.y, v.width, v.height],
    dataPos: [r.xStart, r.xEnd, r.yStart, r.yEnd],
    importance: r.importance,
    info: {
      patternType: e12.options.patternType
    }
  }));
}
var CZ = function(e12) {
  EUe(r, e12);
  var t = SUe(r);
  function r(...n) {
    var i;
    vUe(this, r), i = t.call(this, ...n), i.drawnRects = {};
    const {
      publish: o,
      subscribe: a,
      unsubscribe: s
    } = g1();
    return i.publish = o, i.subscribe = a, i.unsubscribe = s, i;
  }
  return yUe(r, [{
    key: "tileToLocalId",
    value: function(i) {
      return `${i.join(".")}`;
    }
    /**
     * The tile identifier used on the server
     */
  }, {
    key: "tileToRemoteId",
    value: function(i) {
      return `${i.join(".")}`;
    }
  }, {
    key: "localToRemoteId",
    value: function(i) {
      const o = i.split(".");
      return o.slice(0, o.length - 1).join(".");
    }
  }, {
    key: "calculateZoomLevel",
    value: function() {
      const i = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]), o = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[1], this.tilesetInfo.max_pos[1]);
      let a = Math.max(i, o);
      return a = Math.min(a, this.maxZoom), a;
    }
    /**
     * Set which tiles are visible right now.
     *
     * @param tiles: A set of tiles which will be considered the currently visible
     * tile positions.
     */
  }, {
    key: "setVisibleTiles",
    value: function(i) {
      this.visibleTiles = i.map((o) => ({
        tileId: this.tileToLocalId(o),
        remoteId: this.tileToRemoteId(o)
      })), this.visibleTileIds = new Set(this.visibleTiles.map((o) => o.remoteId));
    }
  }, {
    key: "calculateVisibleTiles",
    value: function() {
      if (!this.tilesetInfo)
        return;
      this.zoomLevel = this.calculateZoomLevel(), this.xTiles = Je.calculateTiles(this.zoomLevel, this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width), this.yTiles = Je.calculateTiles(this.zoomLevel, this._yScale, this.tilesetInfo.min_pos[1], this.tilesetInfo.max_pos[1], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width);
      const i = this.xTiles, o = this.yTiles, a = this.zoomLevel, s = [];
      for (let l = 0; l < i.length; l++)
        for (let u = 0; u < o.length; u++) {
          const c = [a, i[l], o[u]];
          s.push(c);
        }
      this.setVisibleTiles(s);
    }
    /**
     * Create whatever is needed to draw this tile.
     */
  }, {
    key: "initTile",
    value: function() {
    }
  }, {
    key: "destroyTile",
    value: function() {
    }
  }, {
    key: "draw",
    value: function() {
      this.drawnRects = {}, Kc(As(r.prototype), "draw", this).call(this);
    }
  }, {
    key: "drawTile",
    value: function(i) {
      const o = i.graphics;
      if (!o)
        return;
      o.clear();
      const a = ct(this.options.rectangleDomainStrokeColor || "black"), s = ct(this.options.rectangleDomainFillColor || "grey");
      o.lineStyle(typeof this.options.rectangleDomainStrokeWidth < "u" ? this.options.rectangleDomainStrokeWidth : 1, a, typeof this.options.rectangleDomainStrokeOpacity < "u" ? this.options.rectangleDomainStrokeOpacity : 1), o.beginFill(s, typeof this.options.rectangleDomainFillOpacity < "u" ? this.options.rectangleDomainFillOpacity : 0.4), o.alpha = this.options.rectangleDomainOpacity || 0.5;
      const l = this.options.minSquareSize && this.options.minSquareSize !== "none" ? +this.options.minSquareSize : 0, u = this.options.rectangleMinSize ? +this.options.rectangleMinSize : 0, c = this._xScale.range()[0], f = this._xScale.range()[1], h = this._yScale.range()[0], d = this._yScale.range()[1];
      i.tileData.length && i.tileData.filter((p) => !(p.uid in this.drawnRects)).forEach((p) => {
        Cj(this, o, p, l, c, f, h, d, u, this.options.flipDiagonal === "yes"), this.options.flipDiagonal && this.options.flipDiagonal === "copy" && Cj(this, o, p, l, c, f, h, d, u, true);
      });
    }
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      Kc(As(r.prototype), "exportSVG", this) ? [o, i] = Kc(As(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o);
      const a = document.createElement("g");
      a.setAttribute("transform", `translate(${this.position[0]},${this.position[1]})`), i.appendChild(a);
      for (const s of [true, false])
        for (const l of this.visibleAndFetchedTiles())
          !l.tileData || !l.tileData.length || l.tileData.forEach((u) => {
            const c = u.uid + s, f = document.createElement("g");
            if (f.setAttribute("transform", `translate(${l.graphics.position.x},${l.graphics.position.y})scale(${l.graphics.scale.x},${l.graphics.scale.y})`), a.appendChild(f), c in this.drawnRects) {
              const h = this.drawnRects[c], d = document.createElement("rect");
              d.setAttribute("x", h.x), d.setAttribute("y", h.y), d.setAttribute("width", h.width), d.setAttribute("height", h.height), d.setAttribute("fill", this.options.rectangleDomainFillColor ? this.options.rectangleDomainFillColor : "grey"), d.setAttribute("opacity", 0.3), d.style.stroke = "black", d.style.strokeWidth = "1px", f.appendChild(d);
            }
          });
      return [o, o];
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Kc(As(r.prototype), "setPosition", this).call(this, i), this.pMain.position.y = this.position[1], this.pMain.position.x = this.position[0];
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale().domain()[0] === i.domain()[0] && this.xScale().domain()[1] === i.domain()[1] && this.yScale().domain()[0] === o.domain()[0] && this.yScale().domain()[1] === o.domain()[1] || (this.xScale(i), this.yScale(o), this.refreshTiles(), this.draw());
    }
  }, {
    key: "leftTrackDraw",
    value: function() {
      this.draw();
    }
  }]), r;
}(hh);
function IUe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function xj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, CUe(n.key), n);
  }
}
function PUe(e12, t, r) {
  return t && xj(e12.prototype, t), r && xj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function CUe(e12) {
  var t = xUe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function xUe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Zc() {
  return typeof Reflect < "u" && Reflect.get ? Zc = Reflect.get.bind() : Zc = function(t, r, n) {
    var i = kUe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Zc.apply(this, arguments);
}
function kUe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Os(e12), e12 !== null); )
    ;
  return e12;
}
function DUe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && ox(e12, t);
}
function ox(e12, t) {
  return ox = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, ox(e12, t);
}
function RUe(e12) {
  var t = MUe();
  return function() {
    var n = Os(e12), i;
    if (t) {
      var o = Os(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return NUe(this, i);
  };
}
function NUe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return xZ(e12);
}
function xZ(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function MUe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Os(e12) {
  return Os = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Os(e12);
}
var LUe = 250;
var kZ = function(e12) {
  DUe(r, e12);
  var t = RUe(r);
  function r(n, i) {
    var o;
    IUe(this, r), o = t.call(this, n, i);
    const {
      pubSub: a
    } = n;
    o.drawnAnnotations = {}, o.drawnAnnoGfx = {}, o.selectedAnno = null, o.options.minSquareSize = +o.options.minSquareSize;
    const {
      publish: s,
      subscribe: l,
      unsubscribe: u
    } = g1();
    return o.publish = s, o.subscribe = l, o.unsubscribe = u, o.sT = 0, o.annoSelectedBound = o.annoSelected.bind(xZ(o)), o.pubSubs.push(a.subscribe("annoSelected", o.annoSelectedBound)), o;
  }
  return PUe(r, [{
    key: "minX",
    get: function() {
      return this.tilesetInfo && this.tilesetInfo.min_pos ? this.tilesetInfo.min_pos[0] : 0;
    }
  }, {
    key: "maxX",
    get: function() {
      return this.tilesetInfo && this.tilesetInfo.max_pos ? this.tilesetInfo.max_pos[0] : this.tilesetInfo.max_width || this.tilesetInfo.max_size;
    }
  }, {
    key: "minY",
    get: function() {
      return this.minX;
    }
  }, {
    key: "maxY",
    get: function() {
      return this.maxX;
    }
  }, {
    key: "maxSize",
    get: function() {
      const n = this.tilesetInfo.max_pos && Math.max(this.tilesetInfo.max_pos[0] - this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[1] - this.tilesetInfo.min_pos[1]);
      return n || (this.tilesetInfo.max_size ? this.tilesetInfo.max_size : 0);
    }
    /**
     * Point projection from the data to the view (pixel) coordinates
     * @param   {number}  x  Data X coordinate
     * @param   {number}  y  Data Y coordinate
     * @return  {array}  Tuple [x,y] containing the translated view coordinates.
     */
  }, {
    key: "projection",
    value: function([i, o]) {
      return [this._xScale(i), this._yScale(o)];
    }
    /**
     * The local tile identifier
     *
     * @param  {Array}  tile  Array containing [zoomLevel, xPos, yPos]
     * @return  {String}  Joined ID string
     */
  }, {
    key: "tileToLocalId",
    value: function(i) {
      return `${i.join(".")}`;
    }
    /**
     * The tile identifier used on the server
     *
     * @param  {Array}  tile  Array containing [zoomLevel, xPos, yPos]
     * @return  {String}  Joined ID string
     */
  }, {
    key: "tileToRemoteId",
    value: function(i) {
      return `${i.join(".")}`;
    }
  }, {
    key: "localToRemoteId",
    value: function(i) {
      const o = i.split(".");
      return o.slice(0, o.length - 1).join(".");
    }
  }, {
    key: "calculateZoomLevel",
    value: function() {
      const i = Je.calculateZoomLevel(this._xScale, this.minX, this.maxX), o = Je.calculateZoomLevel(this._yScale, this.minY, this.maxY);
      return XV(OP(i, o), this.maxZoom);
    }
    /**
     * Set which tiles are visible right now.
     *
     * @param tiles: A set of tiles which will be considered the currently visible
     * tile positions.
     */
  }, {
    key: "setVisibleTiles",
    value: function(i) {
      this.visibleTiles = i.map((o) => ({
        tileId: this.tileToLocalId(o),
        remoteId: this.tileToRemoteId(o)
      })), this.visibleTileIds = new Set(this.visibleTiles.map((o) => o.tileId));
    }
  }, {
    key: "calculateVisibleTiles",
    value: function() {
      if (!this.tilesetInfo)
        return;
      this.zoomLevel = this.calculateZoomLevel(), this.xTiles = Je.calculateTiles(this.zoomLevel, this._xScale, this.minX, this.maxX, this.tilesetInfo.max_zoom, this.maxSize), this.yTiles = Je.calculateTiles(this.zoomLevel, this._yScale, this.minY, this.maxY, this.tilesetInfo.max_zoom, this.maxSize);
      const i = this.zoomLevel, o = [];
      for (let a = 0; a < this.xTiles.length; a++)
        for (let s = 0; s < this.yTiles.length; s++)
          o.push([i, this.xTiles[a], this.yTiles[s]]);
      this.setVisibleTiles(o);
    }
  }, {
    key: "draw",
    value: function() {
      this.drawnAnnotations = {}, Zc(Os(r.prototype), "draw", this).call(this);
    }
  }, {
    key: "drawTile",
    value: function(i, o = false, a = false) {
      if (!i.graphics)
        return;
      i.graphics.__tile__ = i;
      const s = i.graphics;
      s.clear(), this.setBorderStyle(s), this.setFill(s), s.alpha = +this.options.rectangleDomainOpacity, i.tileData.length && i.tileData.filter((l) => !(l.uid in this.drawnAnnotations) || o).forEach((l) => {
        const [u, c] = this.projection([l.xStart, l.yStart]), [f, h] = this.projection([l.xEnd, l.yEnd]);
        this.options.exclude && this.options.exclude.indexOf(l.uid) >= 0 || this.drawAnnotation(this.prepAnnotation(s, l.uid, u, c, f - u, h - c, l), a);
      });
    }
  }, {
    key: "prepAnnotation",
    value: function(i, o, a, s, l, u, c) {
      let f;
      try {
        f = JSON.parse(c.fields);
      } catch {
      }
      return {
        graphics: i,
        id: c.id,
        uid: o,
        annotation: {
          x: a,
          y: s,
          width: l,
          height: u
        },
        dataPos: [c.xStart, c.xEnd, c.yStart, c.yEnd],
        importance: c.importance,
        info: f
      };
    }
  }, {
    key: "drawAnnotation",
    value: function({
      graphics: i,
      id: o,
      uid: a,
      annotation: s,
      dataPos: l,
      importance: u,
      info: c
    }, f) {
      this.options.minSquareSize && (s.width < this.options.minSquareSize || s.height < this.options.minSquareSize) && (s.x = (s.x + s.width) / 2, s.y = (s.y + s.height) / 2, s.width = this.options.minSquareSize, s.height = this.options.minSquareSize), this.drawnAnnotations[a] = s;
      const h = [s.x, s.y, s.width, s.height];
      let d = this.drawnAnnoGfx[a];
      d || (d = new Ue.PIXI.Graphics(), this.drawnAnnoGfx[a] = d), i.children.indexOf(d) === -1 && i.addChild(d), this._drawRect(d, h, a), i.interactive = true, d.interactive = true, d.buttonMode = true;
      const p = {
        id: o,
        uid: a,
        dataPos: l,
        importance: u,
        info: c,
        viewPos: [
          s.x,
          s.y,
          // To have the same format as `dataPos`, i.e.:
          // a quadruple of [x0, y0, x1, y1]
          s.x + s.width,
          s.y + s.height
        ]
      };
      d.mouseover = () => this.hover(d, h, a), d.mouseout = () => this.blur(d, h, a), d.mousedown = () => this.mouseDown(), d.mouseup = (m) => this.mouseUp(d, h, a, m, p), f || this.publish("annotationDrawn", {
        trackUuids: this.uuid,
        annotationUuid: a,
        annotationId: o,
        viewPos: h,
        dataPos: l,
        importance: u,
        info: c
      });
    }
  }, {
    key: "_drawRect",
    value: function(i, o, a) {
      let s = this.options.rectangleDomainStrokeColor, l = this.options.rectangleDomainStrokeWidth, u = this.options.rectangleDomainStrokeOpacity, c = this.options.rectangleDomainFillColor, f = this.options.rectangleDomainFillOpacity;
      this.hoveredAnno === a && (s = this.options.hoverColor, l = this.options.rectangleDomainStrokeWidth + 1 || 2, u = 1, c = this.options.hoverColor, f = this.options.rectangleDomainFillOpacity), this.selectedAnno && this.selectedAnno.uid === a && (s = this.options.selectColor, l = this.options.rectangleDomainStrokeWidth + 1 || 2, u = 1, c = this.options.selectColor, f = OP(0.33, this.options.rectangleDomainFillOpacity)), i.clear(), this.options.trackBorderBgWidth && (this.setBorderStyle(i, this.options.trackBorderBgColor, this.options.trackBorderBgWidth, this.options.trackBorderBgAlpha), this.setFill(i, c, 0), i.drawRect(...o)), this.setBorderStyle(i, s, l, u), this.setFill(i, c, f), i.drawRect(...o), i.__viewPos__ = o;
    }
  }, {
    key: "context",
    value: function(i, o, a) {
      return (s) => s(i, o, a);
    }
  }, {
    key: "click",
    value: function(i, o, a, s, l) {
      this.select(i, o, a), this.pubSub.publish("app.click", {
        type: "annotation",
        event: s,
        payload: l
      });
    }
  }, {
    key: "mouseDown",
    value: function() {
      this.sT = performance.now();
    }
  }, {
    key: "mouseUp",
    value: function(i, o, a, s, l) {
      performance.now() - this.sT <= LUe && this.click(i, o, a, s, l);
    }
  }, {
    key: "hover",
    value: function(i, o, a) {
      this.hoveredAnno = a, this._drawRect(i, o, a), this.animate();
    }
  }, {
    key: "focus",
    value: function(i, o, a) {
      this._drawRect(i, o, a), this.animate();
    }
  }, {
    key: "blur",
    value: function(i, o, a) {
      this.hoveredAnno = null, this._drawRect(i, o, a), this.animate();
    }
  }, {
    key: "select",
    value: function(i, o, a, s = false) {
      let l = null, u = null;
      this.selectedAnno && (l = this.selectedAnno.graphics, u = this.selectedAnno.uid), this.selectedAnno = {
        graphics: i,
        uid: a
      }, this.focus(i, o, a), this.options.onSelect && !s && (window[this.options.onSelect](a), this.pubSub.publish("annoSelected", a)), l && u && this.blur(l, l.__viewPos__, u);
    }
  }, {
    key: "unselect",
    value: function() {
      const i = this.selectedAnno.graphics, o = this.selectedAnno.uid;
      this.selectedAnno = null, this.blur(i, i.__viewPos__, o);
    }
  }, {
    key: "annoSelected",
    value: function(i) {
      if (!this.selectedAnno || this.selectedAnno.uid !== i) {
        this.selectedAnno && this.unselect();
        const o = this.drawnAnnoGfx[i];
        o && this.select(o, o.__viewPos__, i, true);
      }
    }
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      Zc(Os(r.prototype), "exportSVG", this) ? [o, i] = Zc(Os(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o);
      const a = document.createElement("g");
      return a.setAttribute("transform", `translate(${this.position[0]},${this.position[1]})`), i.appendChild(a), this.visibleAndFetchedTiles().filter((s) => s.tileData && s.tileData.length).map((s) => ({
        graphics: s.graphics,
        td: s.tileData
      })).forEach(({
        td: s,
        graphics: l
      }) => {
        const u = document.createElement("g");
        if (u.setAttribute("transform", `translate(${l.position.x},${l.position.y})scale(${l.scale.x},${l.scale.y})`), a.appendChild(u), s.uid in this.drawnAnnotations) {
          const c = this.drawnAnnotations[s.uid], f = document.createElement("rect");
          f.setAttribute("x", c.x), f.setAttribute("y", c.y), f.setAttribute("width", c.width), f.setAttribute("height", c.height), f.setAttribute("fill", this.options.fillColor || "grey"), f.setAttribute("opacity", 0.3), f.style.stroke = this.options.fillColor || "grey", f.style.strokeWidth = "1px", u.appendChild(f);
        }
      }), [o, o];
    }
  }, {
    key: "setBorderStyle",
    value: function(i, o = this.options.rectangleDomainStrokeColor, a = this.options.rectangleDomainStrokeWidth, s = this.options.rectangleDomainStrokeOpacity) {
      i.lineStyle(typeof a < "u" ? a : 1, ct(o || "black"), typeof s < "u" ? s : 1);
    }
  }, {
    key: "setFill",
    value: function(i, o = this.options.rectangleDomainFillColor, a = this.options.rectangleDomainFillOpacity) {
      i.beginFill(ct(o || "grey"), typeof a < "u" ? a : 0.4);
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Zc(Os(r.prototype), "setPosition", this).call(this, i), this.pMain.position.y = this.position[1], this.pMain.position.x = this.position[0];
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.refreshTiles(), this.draw();
    }
  }]), r;
}(hh);
function BUe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function kj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, $Ue(n.key), n);
  }
}
function FUe(e12, t, r) {
  return t && kj(e12.prototype, t), r && kj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function $Ue(e12) {
  var t = HUe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function HUe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Pg() {
  return typeof Reflect < "u" && Reflect.get ? Pg = Reflect.get.bind() : Pg = function(t, r, n) {
    var i = UUe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Pg.apply(this, arguments);
}
function UUe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Mu(e12), e12 !== null); )
    ;
  return e12;
}
function jUe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && ax(e12, t);
}
function ax(e12, t) {
  return ax = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, ax(e12, t);
}
function GUe(e12) {
  var t = XUe();
  return function() {
    var n = Mu(e12), i;
    if (t) {
      var o = Mu(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return zUe(this, i);
  };
}
function zUe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return VUe(e12);
}
function VUe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function XUe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Mu(e12) {
  return Mu = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Mu(e12);
}
var sx = function(e12) {
  jUe(r, e12);
  var t = GUe(r);
  function r(n, i, o) {
    var a;
    return BUe(this, r), a = t.call(this, n, i), a.pubSub = n.pubSub, a.options = i, a.isVertical = o, a.rects = {}, a.defaultColor = dn("red"), a;
  }
  return FUe(r, [{
    key: "draw",
    value: function() {
      const i = typeof this.options.minRectWidth < "u" ? this.options.minRectWidth : 10, o = typeof this.options.fill < "u" ? dn(this.options.fill) : this.defaultColor, a = typeof this.options.fillOpacity < "u" ? +this.options.fillOpacity : 0.2, s = typeof this.options.stroke < "u" ? dn(this.options.stroke) : this.defaultColor, l = typeof this.options.strokeWidth < "u" ? +this.options.strokeWidth : 1, u = typeof this.options.strokeOpacity < "u" ? +this.options.strokeOpacity : 0;
      let c;
      this.options.strokePos && this.options.strokePos.length && (c = Array.isArray(this.options.strokePos) ? this.options.strokePos : [this.options.strokePos]), Pg(Mu(r.prototype), "draw", this).call(this);
      const f = this.pMain;
      f.clear();
      const h = performance.now();
      this.options.regions.forEach((d) => {
        const p = `${d[0]}-${d[1]}`;
        this.rects[p] || (this.rects[p] = {
          graphics: new Ue.PIXI.Graphics()
        }, f.addChild(this.rects[p].graphics)), this.rects[p].timeStamp = h;
        const m = dn(d[2]) || o;
        let g = dn(d[3]) || s;
        g || (g = m);
        const v = Ue.PIXI.utils.rgb2hex([m.r / 255, m.g / 255, m.b / 255]), _ = Ue.PIXI.utils.rgb2hex([g.r / 255, g.g / 255, g.b / 255]);
        c ? (f.lineStyle(1, _, 0), f.beginFill(_, +d[5] || u)) : (f.lineStyle(l, _, +d[5] || u), f.beginFill(v, +d[4] || a));
        const y = this.isVertical ? this._yScale : this._xScale;
        let b = y(+d[0]);
        const T = y(+d[1]);
        let E = T - b;
        const P = typeof d[6] < "u" ? d[6] : i;
        E < P && (b = (b + T) / 2 - P / 2, E = P), c ? (f.lineStyle(1, _, 0), f.beginFill(_, +d[5] || u), c.forEach((A) => {
          (A === "top" || A === "around") && (this.isVertical ? f.drawRect(0, b, l, E) : f.drawRect(b, 0, E, l)), (A === "right" || A === "around") && (this.isVertical ? f.drawRect(0, b, this.dimensions[0], l) : f.drawRect(b, 0, l, this.dimensions[1])), (A === "bottom" || A === "around") && (this.isVertical ? f.drawRect(this.dimensions[0] - l, b, l, E) : f.drawRect(b, this.dimensions[1] - l, E, l)), (A === "left" || A === "around") && (this.isVertical ? f.drawRect(0, b + E - l, this.dimensions[0], l) : f.drawRect(b + E - l, 0, l, this.dimensions[1]));
        })) : f.lineStyle(l, _, +d[5] || u), this.rects[p].graphics.clear(), this.rects[p].graphics.interactive = true, this.rects[p].graphics.buttonMode = true, f.beginFill(v, +d[4] || a), this.isVertical ? (f.drawRect(0, b, this.dimensions[0], E), this.rects[p].graphics.hitArea = new Ue.PIXI.Rectangle(0, b, this.dimensions[0], E)) : (f.drawRect(b, 0, E, this.dimensions[1]), this.rects[p].graphics.hitArea = new Ue.PIXI.Rectangle(b, 0, E, this.dimensions[1])), this.rects[p].graphics.mousedown = () => {
          this.rects[p].mouseDownTime = performance.now();
        }, this.rects[p].graphics.mouseup = (A) => {
          performance.now() - this.rects[p].mouseDownTime < yV && this.pubSub.publish("app.click", {
            type: "annotation",
            event: A,
            payload: d
          });
        };
      }), Object.values(this.rects).filter((d) => d.timeStamp !== h).forEach((d) => f.removeChild(d.graphics));
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Pg(Mu(r.prototype), "setPosition", this).call(this, i), this.pMain.position.y = this.position[1], this.pMain.position.x = this.position[0];
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.draw();
    }
  }]), r;
}(Oi);
function WUe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Dj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, qUe(n.key), n);
  }
}
function YUe(e12, t, r) {
  return t && Dj(e12.prototype, t), r && Dj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function qUe(e12) {
  var t = KUe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function KUe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Cl() {
  return typeof Reflect < "u" && Reflect.get ? Cl = Reflect.get.bind() : Cl = function(t, r, n) {
    var i = ZUe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Cl.apply(this, arguments);
}
function ZUe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Pa(e12), e12 !== null); )
    ;
  return e12;
}
function QUe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && lx(e12, t);
}
function lx(e12, t) {
  return lx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, lx(e12, t);
}
function JUe(e12) {
  var t = rje();
  return function() {
    var n = Pa(e12), i;
    if (t) {
      var o = Pa(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return eje(this, i);
  };
}
function eje(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return tje(e12);
}
function tje(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function rje() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Pa(e12) {
  return Pa = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Pa(e12);
}
var DZ = function(e12) {
  QUe(r, e12);
  var t = JUe(r);
  function r(n, i) {
    var o;
    return WUe(this, r), o = t.call(this, n, i), o.drawnRects = /* @__PURE__ */ new Set(), o.pMain = o.pMobile, o;
  }
  return YUe(r, [{
    key: "tileToLocalId",
    value: function(i) {
      return `${i.join(".")}`;
    }
  }, {
    key: "tileToRemoteId",
    value: function(i) {
      return `${i.join(".")}`;
    }
  }, {
    key: "localToRemoteId",
    value: function(i) {
      const o = i.split(".");
      return o.slice(0, o.length - 1).join(".");
    }
  }, {
    key: "calculateZoomLevel",
    value: function() {
      const i = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]), o = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[1], this.tilesetInfo.max_pos[1]);
      let a = Math.max(i, o);
      return a = Math.min(a, this.maxZoom), this.options && this.options.maxZoom && (this.options.maxZoom >= 0 ? a = Math.min(this.options.maxZoom, a) : console.error("Invalid maxZoom on track:", this)), a;
    }
  }, {
    key: "setVisibleTiles",
    value: function(i) {
      this.visibleTiles = i.map((o) => ({
        tileId: this.tileToLocalId(o),
        remoteId: this.tileToRemoteId(o)
      })), this.visibleTileIds = new Set(this.visibleTiles.map((o) => o.tileId));
    }
  }, {
    key: "calculateVisibleTiles",
    value: function() {
      if (!this.tilesetInfo)
        return;
      this.zoomLevel = this.calculateZoomLevel();
      const i = this._xScale.copy();
      i.domain([this._xScale.invert(this._xScale.range()[0] - this.dimensions[1] * Math.sqrt(2)), this._xScale.invert(this._xScale.range()[1] + this.dimensions[1] * Math.sqrt(2))]), this.xTiles = Je.calculateTiles(this.zoomLevel, i, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width), this.yTiles = Je.calculateTiles(this.zoomLevel, i, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width);
      const o = this.xTiles, a = this.yTiles, s = this.zoomLevel, u = this.tilesetInfo.max_width / 2 ** s, c = [];
      for (let f = 0; f < o.length; f++)
        for (let h = f; h < a.length; h++) {
          if ((h - f - 2) * (this._xScale(u) - this._xScale(0)) * Math.sqrt(2) / 2 > this.dimensions[1])
            continue;
          const p = [s, o[f], a[h]];
          p.mirrored = false, c.push(p);
        }
      this.setVisibleTiles(c);
    }
  }, {
    key: "initTile",
    value: function(i) {
      Cl(Pa(r.prototype), "initTile", this).call(this, i), this.drawTile(i);
    }
  }, {
    key: "destroyTile",
    value: function(i, o) {
    }
  }, {
    key: "draw",
    value: function() {
      this.delayDrawing || this.drawnRects.clear(), Cl(Pa(r.prototype), "draw", this).call(this);
    }
  }, {
    key: "drawTile",
    value: function(i) {
      if (!i.graphics)
        return;
      const o = i.graphics;
      o.clear();
      const a = ct(this.options.rectangleDomainStrokeColor ? this.options.rectangleDomainStrokeColor : "black"), s = ct(this.options.rectangleDomainFillColor ? this.options.rectangleDomainFillColor : "grey");
      if (o.lineStyle(1 / this.pMain.scale.x, a, 1), o.beginFill(s, 0.4), o.alpha = this.options.rectangleDomainOpacity ? this.options.rectangleDomainOpacity : 0.5, !!i.tileData.sort)
        for (const l of i.tileData) {
          const u = this._refXScale(l.xStart), c = this._refXScale(l.xEnd), f = this._refYScale(l.yStart), h = this._refYScale(l.yEnd), d = l.uid;
          this.drawnRects.has(d) || (this.drawnRects.add(d), o.drawRect(u, f, c - u, h - f), o.pivot.x = this._refXScale(0), o.pivot.y = this._refYScale(0), o.scale.x = -1 / Math.sqrt(2), o.rotation = -3 * Math.PI / 4, o.scale.y = 1 / Math.sqrt(2), o.position.x = this._refXScale(0), o.position.y = 0);
        }
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Cl(Pa(r.prototype), "setPosition", this).call(this, i), this.pMain.position.y = this.position[1], this.pMain.position.x = this.position[0];
    }
  }, {
    key: "refScalesChanged",
    value: function(i, o) {
      Cl(Pa(r.prototype), "refScalesChanged", this).call(this, i, o);
      for (const a in this.fetchedTiles) {
        const s = this.fetchedTiles[a];
        if (s.sprite) {
          const l = s.graphics;
          l.pivot.x = this._refXScale(0), l.pivot.y = this._refYScale(0), l.scale.x = -1 / Math.sqrt(2), l.rotation = -3 * Math.PI / 4, l.scale.y = 1 / Math.sqrt(2), l.position.x = this._refXScale(0), l.position.y = 0;
        }
      }
    }
  }, {
    key: "zoomed",
    value: function(i, o, a, s, l) {
      Cl(Pa(r.prototype), "zoomed", this).call(this, i, o, a, s, l), this.pMain.position.x = s, this.pMain.position.y = this.position[1] + this.dimensions[1], this.pMain.scale.x = a, this.pMain.scale.y = a, this.options.oneDHeatmapFlipped && (this.pMain.scale.y = -a, this.pMain.position.y = this.position[1]), this.draw();
    }
  }, {
    key: "leftTrackDraw",
    value: function() {
      this.draw();
    }
  }]), r;
}(hh);
function nje(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Rj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, oje(n.key), n);
  }
}
function ije(e12, t, r) {
  return t && Rj(e12.prototype, t), r && Rj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function oje(e12) {
  var t = aje(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function aje(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Cg() {
  return typeof Reflect < "u" && Reflect.get ? Cg = Reflect.get.bind() : Cg = function(t, r, n) {
    var i = sje(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Cg.apply(this, arguments);
}
function sje(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Lu(e12), e12 !== null); )
    ;
  return e12;
}
function lje(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && cx(e12, t);
}
function cx(e12, t) {
  return cx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, cx(e12, t);
}
function cje(e12) {
  var t = fje();
  return function() {
    var n = Lu(e12), i;
    if (t) {
      var o = Lu(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return uje(this, i);
  };
}
function uje(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return hje(e12);
}
function hje(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function fje() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Lu(e12) {
  return Lu = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Lu(e12);
}
var RZ = function(e12) {
  lje(r, e12);
  var t = cje(r);
  function r(n, i) {
    var o;
    return nje(this, r), o = t.call(this, n, i), o.drawnRects = /* @__PURE__ */ new Set(), o;
  }
  return ije(r, [{
    key: "tileToLocalId",
    value: function(i) {
      return `${i.join(".")}`;
    }
    /**
     * The tile identifier used on the server
     */
  }, {
    key: "tileToRemoteId",
    value: function(i) {
      return `${i.join(".")}`;
    }
  }, {
    key: "localToRemoteId",
    value: function(i) {
      const o = i.split(".");
      return o.slice(0, o.length - 1).join(".");
    }
  }, {
    key: "calculateZoomLevel",
    value: function() {
      const i = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]), o = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[1], this.tilesetInfo.max_pos[1]);
      let a = Math.max(i, o);
      return a = Math.min(a, this.maxZoom), a;
    }
  }, {
    key: "setVisibleTiles",
    value: function(i) {
      this.visibleTiles = i.map((o) => ({
        tileId: this.tileToLocalId(o),
        remoteId: this.tileToRemoteId(o)
      })), this.visibleTileIds = new Set(this.visibleTiles.map((o) => o.tileId));
    }
  }, {
    key: "calculateVisibleTiles",
    value: function(i = true) {
      if (!this.tilesetInfo)
        return;
      this.zoomLevel = this.calculateZoomLevel(), this.xTiles = Je.calculateTiles(this.zoomLevel, this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width), this.yTiles = Je.calculateTiles(this.zoomLevel, this._yScale, this.tilesetInfo.min_pos[1], this.tilesetInfo.max_pos[1], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width);
      const o = this.xTiles, a = this.yTiles, s = this.zoomLevel, l = [];
      for (let u = 0; u < o.length; u++)
        for (let c = 0; c < a.length; c++) {
          const f = [s, o[u], a[c]];
          l.push(f);
        }
      this.setVisibleTiles(l);
    }
  }, {
    key: "initTile",
    value: function(i) {
    }
  }, {
    key: "destroyTile",
    value: function(i, o) {
    }
  }, {
    key: "draw",
    value: function() {
      this.drawnRects.clear(), Cg(Lu(r.prototype), "draw", this).call(this);
    }
  }, {
    key: "drawTile",
    value: function(i) {
      if (!i.graphics)
        return;
      const o = i.graphics;
      o.clear();
      const a = ct("green");
      o.lineStyle(1, 255, 1), o.beginFill(a, 0.8), o.alpha = 0.5;
      for (const s of i.tileData) {
        const l = this._xScale(s.xStart), u = this._xScale(s.xEnd), c = this._yScale(s.yStart), f = this._yScale(s.yEnd), h = s.uid;
        if (this.drawnRects.has(h))
          continue;
        this.drawnRects.add(h);
        const d = 6, p = 6;
        let m = f - c, g = u - l;
        const v = (l + u) / 2, _ = (c + f) / 2;
        m < d && (m = d), g < p && (g = p), o.drawRect(v - m / 2, _ - g / 2, m, g);
      }
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Cg(Lu(r.prototype), "setPosition", this).call(this, i), this.pMain.position.y = this.position[1], this.pMain.position.x = this.position[0];
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.refreshTiles(), this.draw();
    }
  }]), r;
}(hh);
function Hs(e12, t, r = sM) {
  const n = {};
  return n.absToChr = (i) => n.chrPositions ? pn(i, n) : null, n.chrToAbs = ([i, o] = []) => n.chrPositions ? C0(i, o, n) : null, Je.text(e12, (i, o) => {
    if (i)
      t && t(null);
    else {
      const a = VR(o), s = S1(a);
      Object.keys(s).forEach((l) => {
        n[l] = s[l];
      }), t && t(n);
    }
  }, r).then(() => n);
}
function dje(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Nj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, mje(n.key), n);
  }
}
function pje(e12, t, r) {
  return t && Nj(e12.prototype, t), r && Nj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function mje(e12) {
  var t = gje(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function gje(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
var Fd = function() {
  function e12(t) {
    dje(this, e12), this.chromInfo = t, this.chromInfoBisector = Jd((r) => r.pos).left;
  }
  return pje(e12, [{
    key: "scalesToPositionText",
    value: function(r, n, i = false) {
      if (this.chromInfo === null || !r || !n)
        return "";
      const o = pn(r.domain()[0], this.chromInfo), a = pn(r.domain()[1], this.chromInfo), s = pn(n.domain()[0], this.chromInfo), l = pn(n.domain()[1], this.chromInfo);
      let u = null;
      const c = oo(",d");
      return o[0] !== a[0] ? u = `${o[0]}:${c(Math.floor(o[1]))}-${a[0]}:${c(Math.ceil(a[1]))}` : u = `${o[0]}:${c(Math.floor(o[1]))}-${c(Math.ceil(a[1]))}`, i && (s[0] !== l[0] ? u += ` & ${s[0]}:${c(Math.floor(s[1]))}-${l[0]}:${c(Math.ceil(l[1]))}` : u += ` & ${s[0]}:${c(Math.floor(s[1]))}-${c(Math.ceil(l[1]))}`), (o[2] <= 0 || a[2] > 0 || i && (s[2] <= 0 || l[2] > 0)) && (u += ` [offset ${o[2]},${a[2]}`, i && (u += `:${s[2]},${l[2]}`), u += "]"), u;
    }
  }, {
    key: "convertNumberNotation",
    value: function(r) {
      let n = r;
      if (!n.includes("M", n.length - 1) && !n.includes("K", n.length - 1))
        return n;
      let i = 0, o = 0;
      if (n.includes("M", n.length - 1) ? (i = 6, n = n.replace("M", "")) : (i = 3, n = n.replace("K", "")), Number.isNaN(+n))
        return r;
      n = (+n).toString(), n.includes(".") && (o = n.length - 1 - n.indexOf("."), n = (+n.replace(".", "")).toString());
      const a = i - o;
      return a < 0 ? r : (n += "0".repeat(a), n);
    }
  }, {
    key: "parsePosition",
    value: function(r, n = null) {
      const i = r.split(":");
      let o = null, a = 0;
      i.length > 1 ? (o = i[0], a = +this.convertNumberNotation(i[1].replace(/,/g, ""))) : i[0] in this.chromInfo.chrPositions ? (o = i[0], a = 0, n !== null && (a = +this.chromInfo.chromLengths[o])) : (a = +this.convertNumberNotation(i[0].replace(/,/g, "")), o = null, n && (o = n));
      let s = null;
      return o === null ? (o = n, s = a) : o in this.chromInfo.chrPositions && (s = this.chromInfo.chrPositions[o].pos + a), [o, a, s];
    }
  }, {
    key: "matchRangesToLarger",
    value: function(r, n) {
      if (r[1] - r[0] < n[1] - n[0]) {
        const o = n[1] - n[0] - (r[1] - r[0]);
        return [[r[0] - o / 2, r[1] + o / 2], n];
      }
      const i = r[1] - r[0] - (n[1] - n[0]);
      return [r, [n[0] - i / 2, n[1] + i / 2]];
    }
  }, {
    key: "getSearchRange",
    value: function(r) {
      if (r.length === 0)
        return null;
      let n = r.split("-");
      n = n.filter((o) => o.length > 0);
      let i = null;
      if (n[0].indexOf("-") === 0 && (n[0] = n[0].slice(3, n[0].length)), n.length > 1) {
        let [o, a, s] = this.parsePosition(n[0]), [l, u, c] = this.parsePosition(n[1], o);
        const f = [s, c];
        [o, a, s] = this.parsePosition(n[1]), [l, u, c] = this.parsePosition(n[0], o), o === null && l !== null && ([o, a, s] = this.parsePosition(n[1], l));
        const h = [s, c];
        return h[1] - h[0] > f[1] - f[0] ? h : f;
      }
      if (n[0] in this.chromInfo.chrPositions) {
        const o = +this.chromInfo.chrPositions[n[0]].pos;
        i = [o, o + +this.chromInfo.chromLengths[n[0]]];
      } else {
        const [o, a, s] = this.parsePosition(n[0]);
        i = [s - 8e6, s + 8e6];
      }
      return i[0] > i[1] ? [i[1], i[0]] : i;
    }
  }, {
    key: "parseOffset",
    value: function(r) {
      const n = r.split(":");
      if (n.length === 0)
        return [[0, 0], [0, 0]];
      if (n.length === 1) {
        const a = n[0].split(",");
        return [[+a[0], +a[1]], [0, 0]];
      }
      const i = n[0].split(","), o = n[1].split(",");
      return [[+i[0], +i[1]], [+o[0], +o[1]]];
    }
  }, {
    key: "searchPosition",
    value: function(r) {
      let n = null, i = null;
      r = r.trim();
      const o = /\[offset (.+?)\]/.exec(r);
      let a = [[0, 0], [0, 0]];
      o && (r = r.replace(o[0], ""), a = this.parseOffset(o[1]));
      const s = r.split(" & ");
      return s.length > 1 ? (n = this.getSearchRange(s[0].split(" ")[0]), i = this.getSearchRange(s[1].split(" ")[0])) : n = this.getSearchRange(s[0]), n !== null && i !== null && ([n, i] = this.matchRangesToLarger(n, i)), n && (n[0] += a[0][0], n[1] += a[0][1]), i && (i[0] += a[1][0], i[1] += a[1][1]), [n, i];
    }
  }]), e12;
}();
function vje(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Mj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, _je(n.key), n);
  }
}
function yje(e12, t, r) {
  return t && Mj(e12.prototype, t), r && Mj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function _je(e12) {
  var t = bje(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function bje(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Bb() {
  return typeof Reflect < "u" && Reflect.get ? Bb = Reflect.get.bind() : Bb = function(t, r, n) {
    var i = Tje(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Bb.apply(this, arguments);
}
function Tje(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = $d(e12), e12 !== null); )
    ;
  return e12;
}
function Eje(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && ux(e12, t);
}
function ux(e12, t) {
  return ux = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, ux(e12, t);
}
function Sje(e12) {
  var t = Oje();
  return function() {
    var n = $d(e12), i;
    if (t) {
      var o = $d(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return wje(this, i);
  };
}
function wje(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Aje(e12);
}
function Aje(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function Oje() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function $d(e12) {
  return $d = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, $d(e12);
}
var NZ = function(e12) {
  Eje(r, e12);
  var t = Sje(r);
  function r(n, i) {
    var o;
    vje(this, r), o = t.call(this, n, i);
    const {
      dataConfig: a,
      animate: s,
      pubSub: l
    } = n;
    o.searchField = null, o.chromInfo = null, o.animate = s;
    const u = a.server, c = a.tilesetUid, f = `${u}/chrom-sizes/?id=${c}`;
    return Hs(f, (h) => {
      o.chromInfo = h, o.searchField = new Fd(o.chromInfo), o.draw(), o.texts = [];
      for (let d = 0; d < o.chromInfo.cumPositions.length; d++) {
        const p = [];
        for (let m = 0; m < o.chromInfo.cumPositions.length; m++) {
          const g = `${o.chromInfo.cumPositions[d].chr}/${o.chromInfo.cumPositions[m].chr}`, v = new Ue.PIXI.Text(g, {
            fontSize: "14px",
            fontFamily: "Arial",
            fill: "red"
          });
          v.anchor.x = 0.5, v.anchor.y = 0.5, v.visible = false, v.hashValue = Math.random(), p.push(v), o.pMain.addChild(v);
        }
        o.texts.push(p);
      }
      o.draw(), o.animate();
    }, l), o;
  }
  return yje(r, [{
    key: "draw",
    value: function() {
      const i = [];
      if (!this.texts || !this.searchField)
        return;
      const o = pn(this._xScale.domain()[0], this.chromInfo), a = pn(this._xScale.domain()[1], this.chromInfo), s = pn(this._yScale.domain()[0], this.chromInfo), l = pn(this._yScale.domain()[1], this.chromInfo);
      for (let u = 0; u < this.texts.length; u++)
        for (let c = 0; c < this.texts.length; c++)
          this.texts[u][c].visible = false;
      for (let u = o[3]; u <= a[3]; u++)
        for (let c = s[3]; c <= l[3]; c++) {
          const f = this.chromInfo.cumPositions[u], h = this.chromInfo.cumPositions[c], d = f.pos + this.chromInfo.chromLengths[f.chr] / 2, p = h.pos + this.chromInfo.chromLengths[h.chr] / 2, m = this._xScale(d), g = this._yScale(p), v = this.texts[u][c];
          v.x = m, v.y = g, v.updateTransform();
          const _ = v.getBounds(), y = _.width / 2, b = _.height / 2;
          m + y > this.dimensions[0] ? v.x -= m + y - this.dimensions[0] : m - y < 0 && (v.x -= m - y), g + b > this.dimensions[1] ? v.y -= g + b - this.dimensions[1] : g - b < 0 && (v.y -= g - b), v.visible = true, i.push({
            importance: this.texts[u][c].hashValue,
            text: this.texts[u][c],
            caption: null
          });
        }
      this.hideOverlaps(i);
    }
  }, {
    key: "hideOverlaps",
    value: function(i) {
      let o = [];
      o = i.map((a) => {
        const s = a.text;
        s.updateTransform();
        const l = s.getBounds();
        return [l.x, l.y, l.x + l.width, l.y + l.height];
      }), vy(o, (a, s) => {
        i[a].importance > i[s].importance ? i[s].text.visible = 0 : i[a].text.visible = 0;
      });
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Bb($d(r.prototype), "setPosition", this).call(this, i), this.pMain.position.y = this.position[1], this.pMain.position.x = this.position[0];
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.draw();
    }
  }]), r;
}(Oi);
function Ije(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Lj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, Cje(n.key), n);
  }
}
function Pje(e12, t, r) {
  return t && Lj(e12.prototype, t), r && Lj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function Cje(e12) {
  var t = xje(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function xje(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Gf() {
  return typeof Reflect < "u" && Reflect.get ? Gf = Reflect.get.bind() : Gf = function(t, r, n) {
    var i = kje(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Gf.apply(this, arguments);
}
function kje(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = zl(e12), e12 !== null); )
    ;
  return e12;
}
function Dje(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && hx(e12, t);
}
function hx(e12, t) {
  return hx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, hx(e12, t);
}
function Rje(e12) {
  var t = Lje();
  return function() {
    var n = zl(e12), i;
    if (t) {
      var o = zl(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return Nje(this, i);
  };
}
function Nje(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Mje(e12);
}
function Mje(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function Lje() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function zl(e12) {
  return zl = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, zl(e12);
}
var Bm = function(e12) {
  Dje(r, e12);
  var t = Rje(r);
  function r(n, i) {
    var o;
    Ije(this, r), o = t.call(this, n, i);
    const {
      chromInfoPath: a,
      dataConfig: s,
      animate: l,
      pubSub: u,
      orientation: c = "2d",
      isOverlay: f = false
    } = n;
    o.searchField = null, o.chromInfo = null, o.animate = l, o.orientation = c, o.isOverlay = f;
    let h = a;
    return h || (h = `${s.server}/chrom-sizes/?id=${s.tilesetUid}`), Hs(h, (d) => {
      o.chromInfo = d, o.searchField = new Fd(o.chromInfo), o.texts = [], o.lineGraphics = new Ue.PIXI.Graphics(), o.lineGraphics1dH = new Ue.PIXI.Graphics(), o.lineGraphics1dV = new Ue.PIXI.Graphics(), o.lineGraphics2d = new Ue.PIXI.Graphics(), o.mask1dH = new Ue.PIXI.Graphics(), o.mask1dV = new Ue.PIXI.Graphics(), o.mask2d = new Ue.PIXI.Graphics(), o.lineGraphics.addChild(o.lineGraphics1dH), o.lineGraphics1dH.addChild(o.mask1dH), o.lineGraphics.addChild(o.lineGraphics1dV), o.lineGraphics1dV.addChild(o.mask1dV), o.lineGraphics.addChild(o.lineGraphics2d), o.lineGraphics2d.addChild(o.mask2d), o.pMain.addChild(o.lineGraphics), o.draw(), o.animate();
    }, u), o;
  }
  return Pje(r, [{
    key: "drawLines",
    value: function(i = this.orientation, o = 0, a = 0) {
      let s = this.lineGraphics;
      this.isOverlay && i === "1d-horizontal" && (s = this.lineGraphics1dH), this.isOverlay && i === "1d-vertical" && (s = this.lineGraphics1dV), this.isOverlay && i === "2d" && (s = this.lineGraphics2d);
      const l = ct(this.options.lineStrokeColor ? this.options.lineStrokeColor : "blue"), u = this.options.lineStrokeWidth ? this.options.lineStrokeWidth : 1;
      s.lineStyle(u, l, 1), (i === "2d" || i === "1d-horizontal") && (s.moveTo(this._xScale(0) + o, a), s.lineTo(this._xScale(0) + o, this.dimensions[1] + a)), (i === "2d" || i === "1d-vertical") && (s.moveTo(o, this._yScale(0) + a), s.lineTo(this.dimensions[0] + o, this._yScale(0) + a));
      for (let c = 0; c < this.chromInfo.cumPositions.length; c++) {
        const f = this.chromInfo.cumPositions[c], h = f.pos + +this.chromInfo.chromLengths[f.chr] + 1;
        (i === "2d" || i === "1d-horizontal") && (s.moveTo(this._xScale(h) + o, a), s.lineTo(this._xScale(h) + o, this.dimensions[1] + a)), (i === "2d" || i === "1d-vertical") && (s.moveTo(o, this._yScale(h) + a), s.lineTo(this.dimensions[0] + o, this._yScale(h) + a));
      }
    }
  }, {
    key: "draw",
    value: function() {
      if (this.texts && this.searchField)
        if (this.lineGraphics.clear(), this.isOverlay) {
          this.lineGraphics1dH.clear(), this.lineGraphics1dV.clear(), this.lineGraphics2d.clear(), this.mask1dH.clear(), this.mask1dV.clear(), this.mask2d.clear(), this.mask1dH.beginFill(16777215), this.mask1dV.beginFill(16777215), this.mask2d.beginFill(16711680);
          for (let i = 0; i < this.options.orientationsAndPositions.length; i++) {
            const o = this.options.orientationsAndPositions[i].orientation, {
              left: a,
              top: s,
              width: l,
              height: u
            } = this.options.orientationsAndPositions[i].position;
            o === "1d-horizontal" && this.mask1dH.drawRect(a, s, l, u), o === "1d-vertical" && this.mask1dV.drawRect(a, s, l, u), o === "2d" && this.mask2d.drawRect(a, s, l, u), this.drawLines(o, a, s);
          }
          this.lineGraphics1dH.mask = this.mask1dH, this.lineGraphics1dV.mask = this.mask1dV, this.lineGraphics2d.mask = this.mask2d;
        } else
          this.drawLines();
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Gf(zl(r.prototype), "setPosition", this).call(this, i), [this.pMain.position.x, this.pMain.position.y] = this.position;
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.draw();
    }
  }, {
    key: "createSvgLine",
    value: function(i, o, a, s, l, u) {
      const c = document.createElement("line");
      return c.setAttribute("x1", i), c.setAttribute("x2", o), c.setAttribute("y1", a), c.setAttribute("y2", s), c.setAttribute("stroke", l), c.setAttribute("stroke-width", u), c;
    }
  }, {
    key: "drawLinesSvg",
    value: function(i, o, a, s, l = 0, u = 0) {
      const c = this.options.lineStrokeColor ? this.options.lineStrokeColor : "blue", f = this.options.lineStrokeWidth;
      if (o === "2d" || o === "1d-vertical") {
        const h = this._yScale(0);
        h > 0 && h < u + s && i.appendChild(this.createSvgLine(l, a + l, h + u, h + u, c, f));
      }
      if (o === "2d" || o === "1d-horizontal") {
        const h = this._xScale(0);
        h > 0 && h < l + a && i.appendChild(this.createSvgLine(h + l, h + l, u, s + u, c, f));
      }
      for (let h = 0; h < this.chromInfo.cumPositions.length; h++) {
        const d = this.chromInfo.cumPositions[h], p = d.pos + +this.chromInfo.chromLengths[d.chr] + 1;
        if (o === "2d" || o === "1d-vertical") {
          const m = this._yScale(p);
          m > 0 && m < u + s && i.appendChild(this.createSvgLine(l, a + l, m + u, m + u, c, f));
        }
        if (o === "2d" || o === "1d-horizontal") {
          const m = this._xScale(p);
          m > 0 && m < l + a && i.appendChild(this.createSvgLine(m + l, m + l, u, s + u, c, f));
        }
      }
    }
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      Gf(zl(r.prototype), "exportSVG", this) ? [o, i] = Gf(zl(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o);
      const a = document.createElement("g");
      if (i.appendChild(a), o.setAttribute("id", "ChromosomeGrid"), a.setAttribute("transform", `translate(${this.position[0]},${this.position[1]})`), !this.chromInfo)
        return [o, i];
      if (this.isOverlay)
        for (let s = 0; s < this.options.orientationsAndPositions.length; s++) {
          const l = this.options.orientationsAndPositions[s].orientation, {
            left: u,
            top: c,
            width: f,
            height: h
          } = this.options.orientationsAndPositions[s].position;
          this.drawLinesSvg(a, l, f, h, u, c);
        }
      else
        this.drawLinesSvg(a, this.orientation, ...this.dimensions);
      return [o, i];
    }
  }]), r;
}(Oi);
function Bje(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Bj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, $je(n.key), n);
  }
}
function Fje(e12, t, r) {
  return t && Bj(e12.prototype, t), r && Bj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function $je(e12) {
  var t = Hje(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function Hje(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function xg() {
  return typeof Reflect < "u" && Reflect.get ? xg = Reflect.get.bind() : xg = function(t, r, n) {
    var i = Uje(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, xg.apply(this, arguments);
}
function Uje(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Bu(e12), e12 !== null); )
    ;
  return e12;
}
function jje(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && fx(e12, t);
}
function fx(e12, t) {
  return fx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, fx(e12, t);
}
function Gje(e12) {
  var t = Xje();
  return function() {
    var n = Bu(e12), i;
    if (t) {
      var o = Bu(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return zje(this, i);
  };
}
function zje(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Vje(e12);
}
function Vje(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function Xje() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Bu(e12) {
  return Bu = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Bu(e12);
}
var Wje = 300;
var MZ = function(e12) {
  jje(r, e12);
  var t = Gje(r);
  function r(n, i) {
    var o;
    Bje(this, r), o = t.call(this, n, i);
    const {
      chromInfoPath: a,
      pubSub: s
    } = n;
    return o.pubSub = s, o.rects = {}, Hs(a, (l) => {
      o.chromInfo = l, o.draw();
    }, o.pubSub), o;
  }
  return Fje(r, [{
    key: "draw",
    value: function() {
      if (!this.chromInfo)
        return;
      const i = this.options.minRectWidth ? this.options.minRectWidth : 10, o = this.options.minRectWidth ? this.options.minRectHeight : 10;
      xg(Bu(r.prototype), "draw", this).call(this);
      const a = this.pMain;
      a.clear();
      const s = performance.now();
      this.options.regions.forEach((l) => {
        const u = l.slice(0, 6).join("-");
        this.rects[u] || (this.rects[u] = {
          graphics: new Ue.PIXI.Graphics()
        }, a.addChild(this.rects[u].graphics)), this.rects[u].timeStamp = s;
        const c = dn(l[6]);
        let f = dn(l[7]);
        f || (f = c);
        const h = Ue.PIXI.utils.rgb2hex([c.r / 255, c.g / 255, c.b / 255]), d = Ue.PIXI.utils.rgb2hex([f.r / 255, f.g / 255, f.b / 255]);
        a.lineStyle(1, d, f.opacity), a.beginFill(h, c.opacity);
        let p = this._xScale(this.chromInfo.chrPositions[l[0]].pos + +l[1]);
        const m = this._xScale(this.chromInfo.chrPositions[l[0]].pos + +l[2]);
        let g = this._yScale(this.chromInfo.chrPositions[l[3]].pos + +l[4]);
        const v = this._yScale(this.chromInfo.chrPositions[l[3]].pos + +l[5]);
        let _ = m - p, y = v - g;
        const b = typeof l[8] < "u" ? l[8] : i, T = typeof l[9] < "u" ? l[9] : o;
        _ < b && (p = (p + m) / 2 - b / 2, _ = b), y < T && (g = (g + v) / 2 - T / 2, y = T), a.drawRect(p, g, _, y), this.rects[u].graphics.clear(), this.rects[u].graphics.interactive = true, this.rects[u].graphics.buttonMode = true, this.rects[u].graphics.hitArea = new Ue.PIXI.Rectangle(p, g, _, y), this.rects[u].graphics.mousedown = () => {
          this.rects[u].mouseDownTime = performance.now();
        }, this.rects[u].graphics.mouseup = (E) => {
          performance.now() - this.rects[u].mouseDownTime < Wje && this.pubSub.publish("app.click", {
            type: "annotation",
            event: E,
            payload: l
          });
        };
      });
    }
  }, {
    key: "setPosition",
    value: function(i) {
      xg(Bu(r.prototype), "setPosition", this).call(this, i), this.pMain.position.y = this.position[1], this.pMain.position.x = this.position[0];
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.draw();
    }
  }]), r;
}(Oi);
function Yje(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Fj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, Kje(n.key), n);
  }
}
function qje(e12, t, r) {
  return t && Fj(e12.prototype, t), r && Fj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function Kje(e12) {
  var t = Zje(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function Zje(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Qc() {
  return typeof Reflect < "u" && Reflect.get ? Qc = Reflect.get.bind() : Qc = function(t, r, n) {
    var i = Qje(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Qc.apply(this, arguments);
}
function Qje(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Is(e12), e12 !== null); )
    ;
  return e12;
}
function Jje(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && dx(e12, t);
}
function dx(e12, t) {
  return dx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, dx(e12, t);
}
function e4e(e12) {
  var t = r4e();
  return function() {
    var n = Is(e12), i;
    if (t) {
      var o = Is(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return t4e(this, i);
  };
}
function t4e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return LZ(e12);
}
function LZ(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function r4e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Is(e12) {
  return Is = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Is(e12);
}
var n4e = 200;
var i4e = 6;
var o4e = 2;
var $j = 7829367;
var BZ = function(e12) {
  Jje(r, e12);
  var t = e4e(r);
  function r(n, i) {
    var o;
    Yje(this, r), o = t.call(this, n, i);
    const {
      dataConfig: a,
      animate: s,
      chromInfoPath: l,
      isShowGlobalMousePosition: u
    } = n;
    o.searchField = null, o.chromInfo = null, o.dataConfig = a, o.pTicks = new Ue.PIXI.Graphics(), o.pMain.addChild(o.pTicks), o.gTicks = {}, o.tickTexts = {}, o.options = i, o.isShowGlobalMousePosition = u, o.textFontSize = 12, o.textFontFamily = "Arial", o.textFontColor = "#808080", o.textStrokeColor = o.getTheme() === wr ? "#000000" : "#ffffff", o.pixiTextConfig = {
      fontSize: +o.options.fontSize ? `${+o.options.fontSize}px` : `${o.textFontSize}px`,
      fontFamily: o.textFontFamily,
      fill: o.options.color || o.textFontColor,
      lineJoin: "round",
      stroke: o.options.stroke || o.textStrokeColor,
      strokeThickness: 2
    }, o.stroke = ct(o.pixiTextConfig.stroke), o.tickWidth = n4e, o.tickHeight = i4e, o.tickTextSeparation = o4e, o.tickColor = o.options.tickColor ? ct(o.options.tickColor) : $j, o.animate = s, o.pubSubs = [], o.options.showMousePosition && !o.hideMousePosition && (o.hideMousePosition = _u(LZ(o), o.is2d, o.isShowGlobalMousePosition()));
    let c = l;
    return c || (c = `${a.server}/chrom-sizes/?id=${a.tilesetUid}`), Hs(c, (f) => {
      o.chromInfo = f, o.searchField = new Fd(o.chromInfo), o.rerender(o.options, true), o.draw(), o.animate();
    }, o.pubSub), o;
  }
  return qje(r, [{
    key: "initBoundsTicks",
    value: function() {
      this.pTicks && (this.pMain.removeChild(this.pTicks), this.pTicks = null), this.gBoundTicks || (this.gBoundTicks = new Ue.PIXI.Graphics(), this.leftBoundTick = new Ue.PIXI.Text("", this.pixiTextConfig), this.rightBoundTick = new Ue.PIXI.Text("", this.pixiTextConfig), this.gBoundTicks.addChild(this.leftBoundTick), this.gBoundTicks.addChild(this.rightBoundTick), this.pMain.addChild(this.gBoundTicks)), this.texts = [];
    }
  }, {
    key: "initChromLabels",
    value: function() {
      if (this.chromInfo) {
        this.gBoundTicks && (this.pMain.removeChild(this.gBoundTicks), this.gBoundTicks = null), this.pTicks || (this.pTicks = new Ue.PIXI.Graphics(), this.pMain.addChild(this.pTicks)), this.texts = [], this.pTicks.removeChildren();
        for (let i = 0; i < this.chromInfo.cumPositions.length; i++) {
          const o = this.chromInfo.cumPositions[i].chr;
          this.gTicks[o] = new Ue.PIXI.Graphics(), this.tickTexts[o] || (this.tickTexts[o] = []);
          const a = new Ue.PIXI.Text(o, this.pixiTextConfig);
          a.hashValue = Math.random(), this.pTicks.addChild(a), this.pTicks.addChild(this.gTicks[o]), this.texts.push(a);
        }
      }
    }
  }, {
    key: "rerender",
    value: function(i, o) {
      const a = JSON.stringify(i);
      !o && a === this.prevOptions || (this.prevOptions = a, this.options = i, this.tickTexts = {}, this.pixiTextConfig.fontSize = +this.options.fontSize ? `${+this.options.fontSize}px` : this.pixiTextConfig.fontSize, this.pixiTextConfig.fill = this.options.color || this.pixiTextConfig.fill, this.pixiTextConfig.stroke = this.options.stroke || this.pixiTextConfig.stroke, this.stroke = ct(this.pixiTextConfig.stroke), this.tickColor = this.options.tickColor ? ct(this.options.tickColor) : $j, this.options.tickPositions === "ends" ? this.initBoundsTicks() : this.initChromLabels(), Qc(Is(r.prototype), "rerender", this).call(this, i, o), this.options.showMousePosition && !this.hideMousePosition && (this.hideMousePosition = _u(this, this.is2d, this.isShowGlobalMousePosition())), !this.options.showMousePosition && this.hideMousePosition && (this.hideMousePosition(), this.hideMousePosition = void 0));
    }
  }, {
    key: "formatTick",
    value: function(i) {
      const o = this._xScale.domain(), a = o[1] - o[0], s = rp(i, a), l = oo(","), u = Ku(`,.${s}`, a);
      let c = l;
      return this.options.tickFormat === "si" ? c = u : this.options.tickFormat === "plain" ? c = l : this.options.tickPositions === "ends" && (c = u), c(i);
    }
  }, {
    key: "drawBoundsTicks",
    value: function(i, o) {
      const a = this.gBoundTicks;
      a.clear(), a.lineStyle(1, 0);
      const s = this.options.reverseOrientation ? 0 : this.dimensions[1], l = this.options.reverseOrientation ? this.tickHeight : this.dimensions[1] - this.tickHeight;
      a.moveTo(1, s), a.lineTo(1, l), a.moveTo(this.dimensions[0] - 1, s), a.lineTo(this.dimensions[0] - 1, l), this.leftBoundTick.x = 0, this.leftBoundTick.y = this.options.reverseOrientation ? l + this.tickTextSeparation : l - this.tickTextSeparation, this.leftBoundTick.text = `${i[0]}: ${this.formatTick(i[1])}`, this.leftBoundTick.anchor.y = this.options.reverseOrientation ? 0 : 1, this.rightBoundTick.x = this.dimensions[0], this.rightBoundTick.text = `${o[0]}: ${this.formatTick(o[1])}`, this.rightBoundTick.y = this.options.reverseOrientation ? l + this.tickTextSeparation : l - this.tickTextSeparation, this.rightBoundTick.anchor.y = this.options.reverseOrientation ? 0 : 1, this.rightBoundTick.anchor.x = 1, this.flipText && (this.leftBoundTick.scale.x = -1, this.leftBoundTick.anchor.x = 1, this.rightBoundTick.scale.x = -1, this.rightBoundTick.anchor.x = 0), this.leftBoundTick.tickLine = [1, this.dimensions[1], 1, this.dimensions[1] - this.tickHeight], this.rightBoundTick.tickLine = [this.dimensions[0] - 1, this.dimensions[1], this.dimensions[0] - 1, this.dimensions[1] - this.tickHeight], this.tickTexts = {}, this.tickTexts.all = [this.leftBoundTick, this.rightBoundTick];
    }
  }, {
    key: "drawTicks",
    value: function(i) {
      const o = this.gTicks[i.chr];
      o.visible = true, o.clear();
      const a = +this.chromInfo.chromLengths[i.chr], s = Math.max(this._xScale(i.pos), 0), l = Math.min(this._xScale(i.pos + a), this.dimensions[0]), u = (l - s) / this.tickWidth, f = It().domain([Math.max(1, this._xScale.invert(0) - i.pos), Math.min(a, this._xScale.invert(this.dimensions[0]) - i.pos)]).range(s, l).ticks(u).filter((_) => Number.isInteger(_)), h = this.tickTexts[i.chr], d = this.options.fontIsLeftAligned ? (+this.options.fontSize || this.textFontSize) / 2 : this.tickHeight, p = this.flipText ? -1 : 1, m = this.options.fontIsLeftAligned ? p * 4 : 0;
      let g = this.options.fontIsLeftAligned ? 0 : d + this.tickTextSeparation;
      for (this.options.reverseOrientation && (g = this.dimensions[1] - g); h.length < f.length; ) {
        const _ = new Ue.PIXI.Text("", this.pixiTextConfig);
        h.push(_), this.gTicks[i.chr].addChild(_);
      }
      for (; h.length > f.length; ) {
        const _ = h.pop();
        this.gTicks[i.chr].removeChild(_);
      }
      let v = 0;
      for (; v < f.length; ) {
        h[v].visible = true, h[v].anchor.x = this.options.fontIsLeftAligned ? 0 : 0.5, h[v].anchor.y = this.options.reverseOrientation ? 0 : 1, this.flipText && (h[v].scale.x = -1), h[v].x = this._xScale(i.pos + f[v]) + m, h[v].y = this.dimensions[1] - g, h[v].text = f[v] === 0 ? `${i.chr}: 1` : `${i.chr}: ${this.formatTick(f[v])}`;
        const _ = this._xScale(i.pos + f[v]);
        h[v].tickLine = [_ - 1, this.dimensions[1], _ - 1, this.dimensions[1] - d - 1];
        const y = this.options.reverseOrientation ? 0 : this.dimensions[1], b = this.options.reverseOrientation ? d : this.dimensions[1] - d;
        o.lineStyle(1, this.stroke), o.moveTo(_ - 1, y), o.lineTo(_ - 1, b - 1), this.options.fontIsLeftAligned ? (o.lineTo(_ + 2 * p + 1 * p, b - 1), o.lineTo(_ + 2 * p + 1 * p, b + 1), o.lineTo(_ + 1, b + 1)) : o.lineTo(_ + 1, b - 1), o.lineTo(_ + 1, y), o.lineStyle(1, this.tickColor), o.moveTo(_, y), o.lineTo(_, b), this.options.fontIsLeftAligned && o.lineTo(_ + 2 * p, b), v += 1;
      }
      for (; v < h.length; )
        h[v].visible = false, v += 1;
      return f.length;
    }
  }, {
    key: "draw",
    value: function() {
      if (this.allTexts = [], !this.texts || !this.searchField)
        return;
      const i = pn(this._xScale.domain()[0], this.chromInfo), o = pn(this._xScale.domain()[1], this.chromInfo);
      if (!i || !o) {
        console.warn("Empty chromInfo:", this.dataConfig, this.chromInfo);
        return;
      }
      if (this.options.tickPositions === "ends") {
        if (!this.gBoundTicks)
          return;
        this.gBoundTicks.visible = true, this.drawBoundsTicks(i, o);
        return;
      }
      if (!this.pTicks)
        return;
      for (let s = 0; s < this.texts.length; s++)
        this.texts[s].visible = false, this.gTicks[this.chromInfo.cumPositions[s].chr].visible = false;
      let a = this.options.fontIsLeftAligned ? 0 : this.tickHeight + this.tickTextSeparation;
      this.options.reverseOrientation && (a = this.dimensions[1] - a), Object.keys(this.chromInfo.chrPositions).forEach((s) => {
        if (this.tickTexts[s])
          for (let l = 0; l < this.tickTexts[s].length; l++)
            this.tickTexts[s][l].visible = false;
      });
      for (let s = i[3]; s <= o[3]; s++) {
        const l = this.chromInfo.cumPositions[s], u = l.pos + this.chromInfo.chromLengths[l.chr] / 2, c = this._xScale(u), f = this.texts[s];
        f.anchor.x = this.options.fontIsLeftAligned ? 0 : 0.5, f.anchor.y = this.options.reverseOrientation ? 0 : 1, f.x = c, f.y = this.dimensions[1] - a, f.updateTransform(), this.flipText && (f.scale.x = -1);
        const h = this.drawTicks(l);
        f.visible = h <= 0, this.allTexts.push({
          importance: f.hashValue,
          text: f,
          caption: null
        });
      }
      this.hideOverlaps(this.allTexts);
    }
  }, {
    key: "hideOverlaps",
    value: function(i) {
      let o = [];
      o = i.map(({
        text: a
      }, s) => {
        a.updateTransform();
        const l = a.getBounds();
        return [l.x, l.y, l.x + l.width, l.y + l.height];
      }), vy(o, (a, s) => {
        i[a].importance > i[s].importance ? i[s].text.visible = false : i[a].text.visible = false;
      });
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Qc(Is(r.prototype), "setPosition", this).call(this, i), [this.pMain.position.x, this.pMain.position.y] = this.position;
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.draw();
    }
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      Qc(Is(r.prototype), "exportSVG", this) ? [o, i] = Qc(Is(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o), o.setAttribute("class", "chromosome-labels");
      const a = document.createElement("g");
      return i.appendChild(a), a.setAttribute("transform", `translate(${this.position[0]},${this.position[1]})`), this.allTexts.filter((s) => s.text.visible).forEach((s) => {
        const l = CP(s.text);
        a.appendChild(l);
      }), Object.values(this.tickTexts).forEach((s) => {
        s.filter((l) => l.visible).forEach((l) => {
          let u = CP(l);
          a.appendChild(u), u = JV(l.x, this.options.reverseOrientation ? 0 : this.dimensions[1], l.x, this.options.reverseOrientation ? this.tickHeight : this.dimensions[1] - this.tickHeight, 1, this.tickColor);
          const c = document.createElement("line");
          c.setAttribute("x1", l.tickLine[0]), c.setAttribute("y1", l.tickLine[1]), c.setAttribute("x2", l.tickLine[2]), c.setAttribute("y2", l.tickLine[3]), c.setAttribute("style", "stroke: grey"), a.appendChild(u), a.appendChild(c);
        });
      }), [o, i];
    }
  }]), r;
}(Oi);
function a4e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Hj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, l4e(n.key), n);
  }
}
function s4e(e12, t, r) {
  return t && Hj(e12.prototype, t), r && Hj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function l4e(e12) {
  var t = c4e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function c4e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function xl() {
  return typeof Reflect < "u" && Reflect.get ? xl = Reflect.get.bind() : xl = function(t, r, n) {
    var i = u4e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, xl.apply(this, arguments);
}
function u4e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Ca(e12), e12 !== null); )
    ;
  return e12;
}
function h4e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && px(e12, t);
}
function px(e12, t) {
  return px = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, px(e12, t);
}
function f4e(e12) {
  var t = m4e();
  return function() {
    var n = Ca(e12), i;
    if (t) {
      var o = Ca(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return d4e(this, i);
  };
}
function d4e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return p4e(e12);
}
function p4e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function m4e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Ca(e12) {
  return Ca = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Ca(e12);
}
var FZ = function(e12) {
  h4e(r, e12);
  var t = f4e(r);
  function r(n, i) {
    var o;
    a4e(this, r), o = t.call(this, n, i);
    const {
      animate: a
    } = n;
    return o.pMain = o.pMobile, o.colorScale = dd, o.continuousScaling = false, i && i.colorRange && (o.colorScale = Zl(i.colorRange)), o.animate = a, o.options = i, o.pubSubs = [], o;
  }
  return s4e(r, [{
    key: "rerender",
    value: function(i, o) {
      xl(Ca(r.prototype), "rerender", this).call(this, i, o), this.zoomed(this.xScale(), this.yScale(), this.pMain.scale.x, this.pMain.position.x, this.pMain.position.y);
    }
  }, {
    key: "calculateZoomLevel",
    value: function() {
      let i = null;
      if (this.tilesetInfo.resolutions) {
        const o = Je.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions, this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]), a = Je.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions, this._xScale, this.tilesetInfo.min_pos[1], this.tilesetInfo.max_pos[1]);
        i = Math.min(o, a);
      } else {
        const o = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]), a = Je.calculateZoomLevel(this._xScale, this.tilesetInfo.min_pos[1], this.tilesetInfo.max_pos[1]);
        i = Math.max(o, a), i = Math.min(i, this.maxZoom);
      }
      return this.options && this.options.maxZoom && (this.options.maxZoom >= 0 ? i = Math.min(this.options.maxZoom, i) : console.error("Invalid maxZoom on track:", this)), i;
    }
  }, {
    key: "calculateVisibleTiles",
    value: function() {
      if (!this.tilesetInfo)
        return;
      this.zoomLevel = this.calculateZoomLevel();
      const i = this._xScale.copy();
      if (i.domain([this._xScale.invert(this._xScale.range()[0] - this.dimensions[1] * Math.sqrt(2)), this._xScale.invert(this._xScale.range()[1] + this.dimensions[1] * Math.sqrt(2))]), this.tilesetInfo.resolutions) {
        const f = this.tilesetInfo.resolutions.map((h) => +h).sort((h, d) => d - h);
        this.xTiles = Je.calculateTilesFromResolution(f[this.zoomLevel], i, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]), this.yTiles = Je.calculateTilesFromResolution(f[this.zoomLevel], i, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]);
      } else
        this.xTiles = Je.calculateTiles(this.zoomLevel, i, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width), this.yTiles = Je.calculateTiles(this.zoomLevel, i, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width);
      const o = this.xTiles, a = this.yTiles, s = this.zoomLevel, u = this.tilesetInfo.max_width / 2 ** s, c = [];
      for (let f = 0; f < o.length; f++)
        for (let h = f; h < a.length; h++) {
          if ((h - f - 2) * (this._xScale(u) - this._xScale(0)) * Math.sqrt(2) / 2 > this.dimensions[1])
            continue;
          const p = [s, o[f], a[h]];
          p.mirrored = false, p.dataTransform = this.options.dataTransform ? this.options.dataTransform : "default", c.push(p);
        }
      this.setVisibleTiles(c);
    }
  }, {
    key: "tileDataToCanvas",
    value: function(i) {
      const o = document.createElement("canvas");
      o.width = 256, o.height = 256;
      const a = o.getContext("2d");
      a.fillStyle = "transparent", a.fillRect(0, 0, o.width, o.height);
      const s = new ImageData(i, o.width, o.height);
      return a.putImageData(s, 0, 0), o;
    }
  }, {
    key: "setSpriteProperties",
    value: function(i, o, a, s) {
      const {
        tileX: l,
        tileY: u,
        tileWidth: c,
        tileHeight: f
      } = this.getTilePosAndDimensions(o, a), h = l + c, d = u + f;
      i.width = this._refXScale(h) - this._refXScale(l), i.height = this._refYScale(d) - this._refYScale(u), i.x = this._refXScale(l), i.y = this._refYScale(u);
    }
  }, {
    key: "pixDataFunction",
    value: function(i, o) {
      if (o) {
        const a = i.graphics, s = this.tileDataToCanvas(o.pixData), l = Ue.PIXI.VERSION[0] === "4" ? Ue.PIXI.Texture.fromCanvas(s, Ue.PIXI.SCALE_MODES.NEAREST) : Ue.PIXI.Texture.from(s, {
          scaleMode: Ue.PIXI.SCALE_MODES.NEAREST
        });
        i.sprite = new Ue.PIXI.Sprite(l), i.canvas = s, this.setSpriteProperties(i.sprite, i.tileData.zoomLevel, i.tileData.tilePos, i.mirrored), a.pivot.x = this._refXScale(0), a.pivot.y = this._refYScale(0), a.scale.x = -1 / Math.sqrt(2), a.rotation = -3 * Math.PI / 4, a.scale.y = 1 / Math.sqrt(2), a.position.x = this._refXScale(0), a.position.y = 0, a.removeChildren(), a.addChild(i.sprite);
      }
      this.renderingTiles.delete(i.tileId);
    }
  }, {
    key: "refScalesChanged",
    value: function(i, o) {
      xl(Ca(r.prototype), "refScalesChanged", this).call(this, i, o);
      for (const a in this.fetchedTiles) {
        const s = this.fetchedTiles[a];
        if (s.sprite) {
          this.setSpriteProperties(s.sprite, s.tileData.zoomLevel, s.tileData.tilePos, s.mirrored);
          const l = s.graphics;
          l.pivot.x = this._refXScale(0), l.pivot.y = this._refYScale(0), l.scale.x = -1 / Math.sqrt(2), l.rotation = -3 * Math.PI / 4, l.scale.y = 1 / Math.sqrt(2), l.position.x = this._refXScale(0), l.position.y = 0;
        }
      }
    }
  }, {
    key: "zoomed",
    value: function(i, o, a, s, l) {
      xl(Ca(r.prototype), "zoomed", this).call(this, i, o, a, s, l), xl(Ca(r.prototype), "draw", this).call(this), this.pMain.position.x = s, this.pMain.position.y = this.position[1] + this.dimensions[1], this.pMain.scale.x = a, this.pMain.scale.y = a, this.options.oneDHeatmapFlipped && (this.pMain.scale.y = -a, this.pMain.position.y = this.position[1]);
    }
  }, {
    key: "leftTrackDraw",
    value: function() {
      this.draw();
    }
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      [o, i] = xl(Ca(r.prototype), "superSVG", this).call(this);
      const a = document.createElement("g");
      i.appendChild(a), a.setAttribute("transform", `translate(${this.pMain.position.x},${this.pMain.position.y}) scale(${this.pMain.scale.x},${this.pMain.scale.y})`);
      for (const l of this.visibleAndFetchedTiles()) {
        const u = document.createElement("g"), c = l.graphics, f = c.rotation * 180 / Math.PI, h = `translate(${c.position.x},${c.position.y}) rotate(${f}) scale(${c.scale.x},${c.scale.y}) translate(${-c.pivot.x},${-c.pivot.y})`;
        u.setAttribute("transform", h);
        const d = l.sprite.rotation * 180 / Math.PI, p = document.createElement("g");
        p.setAttribute("transform", `translate(${l.sprite.x},${l.sprite.y}) rotate(${d}) scale(${l.sprite.scale.x},${l.sprite.scale.y})`);
        const m = document.createElement("image");
        m.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", l.canvas.toDataURL()), m.setAttribute("width", 256), m.setAttribute("height", 256), p.appendChild(m), u.appendChild(p), a.appendChild(u);
      }
      const s = this.exportColorBarSVG();
      return i.appendChild(s), [o, o];
    }
  }]), r;
}(gy);
function g4e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Uj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, y4e(n.key), n);
  }
}
function v4e(e12, t, r) {
  return t && Uj(e12.prototype, t), r && Uj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function y4e(e12) {
  var t = _4e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function _4e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function b4e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && mx(e12, t);
}
function mx(e12, t) {
  return mx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, mx(e12, t);
}
function T4e(e12) {
  var t = w4e();
  return function() {
    var n = vT(e12), i;
    if (t) {
      var o = vT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return E4e(this, i);
  };
}
function E4e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return S4e(e12);
}
function S4e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function w4e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function vT(e12) {
  return vT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, vT(e12);
}
var jj = function(e12) {
  b4e(r, e12);
  var t = T4e(r);
  function r(n, i) {
    var o;
    return g4e(this, r), o = t.call(this, n, i), o.tilesetInfo = {}, o.errorTextText = `Unknown track type: ${i.type}`, o;
  }
  return v4e(r, [{
    key: "zoomed",
    value: function() {
      this.draw();
    }
  }]), r;
}(Oi);
function A4e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Gj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, I4e(n.key), n);
  }
}
function O4e(e12, t, r) {
  return t && Gj(e12.prototype, t), r && Gj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function I4e(e12) {
  var t = P4e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function P4e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function C4e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && gx(e12, t);
}
function gx(e12, t) {
  return gx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, gx(e12, t);
}
function x4e(e12) {
  var t = D4e();
  return function() {
    var n = yT(e12), i;
    if (t) {
      var o = yT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return k4e(this, i);
  };
}
function k4e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return $Z(e12);
}
function $Z(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function D4e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function yT(e12) {
  return yT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, yT(e12);
}
var HZ = function(e12) {
  C4e(r, e12);
  var t = x4e(r);
  function r(n, i) {
    var o;
    return A4e(this, r), o = t.call(this, n, i), o.axis = new pS($Z(o)), o.pBase.addChild(o.axis.pAxis), o;
  }
  return O4e(r, [{
    key: "initTile",
    value: function(i) {
      this.scale.minRawValue = this.minVisibleValueInTiles(), this.scale.maxRawValue = this.minVisibleValueInTiles(), this.scale.minValue = this.scale.minRawValue, this.scale.maxValue = this.scale.maxRawValue, this.drawTile(i);
    }
  }, {
    key: "drawTile",
    value: function(i) {
      if (!i.graphics)
        return;
      const o = i.graphics, a = 6, s = 4;
      o.clear(), this.valueScale = nc().domain([this.minValue() + 0.01, this.maxValue()]).range([this.dimensions[1] - a / 2, a / 2]);
      const l = ct("black");
      o.lineStyle(1, l, 0.3), o.beginFill(l, 0.3), this.drawAxis(this.valueScale), i.tileData.forEach((u) => {
        const c = u.fields, f = +u.chrOffset, h = +c[1] + f, d = +c[2] + f, p = +c[3], m = this._xScale(h), g = this._xScale(d), v = Math.max(g - m, s), _ = this.valueScale(p), y = (g + m) / 2;
        o.drawRect(y - v / 2, _ - a / 2, v, a);
      });
    }
  }, {
    key: "minVisibleValueInTiles",
    value: function() {
      let i = this.visibleAndFetchedIds();
      return i.length === 0 && (i = Object.keys(this.fetchedTiles)), Math.min.apply(null, i.map((a) => +Math.min(...this.fetchedTiles[a].tileData.filter((s) => !Number.isNaN(s.fields[3])).map((s) => +s.fields[3]))));
    }
  }, {
    key: "maxVisibleValueInTiles",
    value: function() {
      let i = this.visibleAndFetchedIds();
      return i.length === 0 && (i = Object.keys(this.fetchedTiles)), Math.max.apply(null, i.map((a) => +Math.max(...this.fetchedTiles[a].tileData.filter((s) => !Number.isNaN(s.fields[3])).map((s) => +s.fields[3]))));
    }
  }]), r;
}(wp);
function R4e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function zj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, M4e(n.key), n);
  }
}
function N4e(e12, t, r) {
  return t && zj(e12.prototype, t), r && zj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function M4e(e12) {
  var t = L4e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function L4e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function zf() {
  return typeof Reflect < "u" && Reflect.get ? zf = Reflect.get.bind() : zf = function(t, r, n) {
    var i = B4e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, zf.apply(this, arguments);
}
function B4e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Vl(e12), e12 !== null); )
    ;
  return e12;
}
function F4e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && vx(e12, t);
}
function vx(e12, t) {
  return vx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, vx(e12, t);
}
function $4e(e12) {
  var t = U4e();
  return function() {
    var n = Vl(e12), i;
    if (t) {
      var o = Vl(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return H4e(this, i);
  };
}
function H4e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return yx(e12);
}
function yx(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function U4e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Vl(e12) {
  return Vl = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Vl(e12);
}
var UZ = function(e12) {
  F4e(r, e12);
  var t = $4e(r);
  function r(n, i) {
    var o;
    R4e(this, r), o = t.call(this, n, i);
    const {
      registerViewportChanged: a,
      removeViewportChanged: s,
      setDomainsCallback: l
    } = n, u = Gt.nice();
    return o.uid = u, o.options = i, o.hasFromView = !n.projectionXDomain || !n.projectionYDomain, o.removeViewportChanged = s, o.setDomainsCallback = l, o.viewportXDomain = o.hasFromView ? null : n.projectionXDomain, o.viewportYDomain = o.hasFromView ? null : n.projectionYDomain, o.brush = NR().on("brush", o.brushed.bind(yx(o))), o.gBrush = o.gMain.append("g").attr("id", `brush-${o.uid}`).call(o.brush), o.gBrush.selectAll(".overlay").style("pointer-events", "none"), o.gBrush.selectAll(".handle--n").style("pointer-events", "none"), o.gBrush.selectAll(".handle--s").style("pointer-events", "none"), o.gBrush.selectAll(".handle--w").style("pointer-events", "none"), o.gBrush.selectAll(".handle--e").style("pointer-events", "none"), a(u, o.viewportChanged.bind(yx(o))), o.rerender(), o.draw(), o;
  }
  return N4e(r, [{
    key: "brushed",
    value: function(i) {
      const o = i.selection;
      if (!this._xScale || !this._yScale)
        return;
      const a = [this._xScale.invert(o[0][0]), this._xScale.invert(o[1][0])], s = [this._yScale.invert(o[0][1]), this._yScale.invert(o[1][1])];
      this.hasFromView || (this.viewportXDomain = a, this.viewportYDomain = s), this.setDomainsCallback(a, s);
    }
  }, {
    key: "viewportChanged",
    value: function(i, o) {
      const a = i.domain(), s = o.domain();
      this.viewportXDomain = a, this.viewportYDomain = s, this.draw();
    }
  }, {
    key: "remove",
    value: function() {
      this.removeViewportChanged(this.uid), zf(Vl(r.prototype), "remove", this).call(this);
    }
  }, {
    key: "rerender",
    value: function() {
      this.gBrush.selectAll(".selection").attr("fill", this.options.projectionFillColor).attr("stroke", this.options.projectionStrokeColor).attr("fill-opacity", this.options.projectionFillOpacity).attr("stroke-opacity", this.options.projectionStrokeOpacity).attr("stroke-width", this.options.strokeWidth);
    }
  }, {
    key: "draw",
    value: function() {
      if (!this._xScale || !this.yScale || !this.viewportXDomain || !this.viewportYDomain)
        return;
      const i = this._xScale(this.viewportXDomain[0]), o = this._yScale(this.viewportYDomain[0]), a = this._xScale(this.viewportXDomain[1]), s = this._yScale(this.viewportYDomain[1]), l = [[i, o], [a, s]];
      this.brush.on("brush", null), this.gBrush.call(this.brush.move, l), this.brush.on("brush", this.brushed.bind(this));
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.draw();
    }
  }, {
    key: "setPosition",
    value: function(i) {
      zf(Vl(r.prototype), "setPosition", this).call(this, i), this.draw();
    }
  }, {
    key: "setDimensions",
    value: function(i) {
      zf(Vl(r.prototype), "setDimensions", this).call(this, i);
      const o = this._xScale.range(), a = this._yScale.range(), s = o[1] - o[0], l = a[1] - a[0];
      this.brush.extent([[o[0] - s, a[0] - l], [o[1] + s, a[1] + l]]), this.gBrush.call(this.brush), this.draw();
    }
  }]), r;
}(fh);
function j4e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Vj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, z4e(n.key), n);
  }
}
function G4e(e12, t, r) {
  return t && Vj(e12.prototype, t), r && Vj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function z4e(e12) {
  var t = V4e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function V4e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Vf() {
  return typeof Reflect < "u" && Reflect.get ? Vf = Reflect.get.bind() : Vf = function(t, r, n) {
    var i = X4e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Vf.apply(this, arguments);
}
function X4e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Xl(e12), e12 !== null); )
    ;
  return e12;
}
function W4e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && _x(e12, t);
}
function _x(e12, t) {
  return _x = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, _x(e12, t);
}
function Y4e(e12) {
  var t = K4e();
  return function() {
    var n = Xl(e12), i;
    if (t) {
      var o = Xl(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return q4e(this, i);
  };
}
function q4e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return bx(e12);
}
function bx(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function K4e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Xl(e12) {
  return Xl = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Xl(e12);
}
var jZ = function(e12) {
  W4e(r, e12);
  var t = Y4e(r);
  function r(n, i) {
    var o;
    j4e(this, r), o = t.call(this, n, i);
    const {
      registerViewportChanged: a,
      removeViewportChanged: s,
      setDomainsCallback: l
    } = n, u = Gt.nice();
    return o.uid = u, o.options = i, o.hasFromView = !n.projectionXDomain, o.removeViewportChanged = s, o.setDomainsCallback = l, o.viewportXDomain = o.hasFromView ? null : n.projectionXDomain, o.viewportYDomain = o.hasFromView ? null : [0, 0], o.brush = T1().on("brush", o.brushed.bind(bx(o))), o.gBrush = o.gMain.append("g").attr("id", `brush-${o.uid}`).call(o.brush), o.gBrush.selectAll(".overlay").style("pointer-events", "none"), o.gBrush.selectAll(".handle--ne").style("pointer-events", "none"), o.gBrush.selectAll(".handle--nw").style("pointer-events", "none"), o.gBrush.selectAll(".handle--sw").style("pointer-events", "none"), o.gBrush.selectAll(".handle--se").style("pointer-events", "none"), o.gBrush.selectAll(".handle--n").style("pointer-events", "none"), o.gBrush.selectAll(".handle--s").style("pointer-events", "none"), a(u, o.viewportChanged.bind(bx(o))), o.rerender(), o.draw(), o;
  }
  return G4e(r, [{
    key: "brushed",
    value: function(i) {
      const o = i.selection;
      if (!this._xScale || !this._yScale)
        return;
      const a = [this._xScale.invert(o[0]), this._xScale.invert(o[1])], s = this.viewportYDomain;
      this.hasFromView || (this.viewportXDomain = a), this.setDomainsCallback(a, s);
    }
  }, {
    key: "viewportChanged",
    value: function(i, o, a = true) {
      const s = i.domain(), l = o.domain();
      this.viewportXDomain = s, this.viewportYDomain = l, this.draw();
    }
  }, {
    key: "remove",
    value: function() {
      this.removeViewportChanged(this.uid), Vf(Xl(r.prototype), "remove", this).call(this);
    }
  }, {
    key: "rerender",
    value: function() {
      this.gBrush.selectAll(".selection").attr("fill", this.options.projectionFillColor).attr("stroke", this.options.projectionStrokeColor).attr("fill-opacity", this.options.projectionFillOpacity).attr("stroke-opacity", this.options.projectionStrokeOpacity).attr("stroke-width", this.options.strokeWidth);
    }
  }, {
    key: "draw",
    value: function() {
      if (!this._xScale || !this.yScale || !this.viewportXDomain || !this.viewportYDomain)
        return;
      const i = this._xScale(this.viewportXDomain[0]), o = this._xScale(this.viewportXDomain[1]), a = [i, o];
      this.brush.on("brush", null), this.gBrush.call(this.brush.move, a), this.brush.on("brush", this.brushed.bind(this));
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.draw();
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Vf(Xl(r.prototype), "setPosition", this).call(this, i), this.draw();
    }
  }, {
    key: "setDimensions",
    value: function(i) {
      Vf(Xl(r.prototype), "setDimensions", this).call(this, i);
      const o = this._xScale.range(), a = this._yScale.range(), s = o[1] - o[0];
      this.brush.extent([[o[0] - s, a[0]], [o[1] + s, a[1]]]), this.gBrush.call(this.brush), this.draw();
    }
  }]), r;
}(fh);
function Z4e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Xj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, J4e(n.key), n);
  }
}
function Q4e(e12, t, r) {
  return t && Xj(e12.prototype, t), r && Xj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function J4e(e12) {
  var t = e6e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function e6e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Xf() {
  return typeof Reflect < "u" && Reflect.get ? Xf = Reflect.get.bind() : Xf = function(t, r, n) {
    var i = t6e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Xf.apply(this, arguments);
}
function t6e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Wl(e12), e12 !== null); )
    ;
  return e12;
}
function r6e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Tx(e12, t);
}
function Tx(e12, t) {
  return Tx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Tx(e12, t);
}
function n6e(e12) {
  var t = o6e();
  return function() {
    var n = Wl(e12), i;
    if (t) {
      var o = Wl(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return i6e(this, i);
  };
}
function i6e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Ex(e12);
}
function Ex(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function o6e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Wl(e12) {
  return Wl = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Wl(e12);
}
var GZ = function(e12) {
  r6e(r, e12);
  var t = n6e(r);
  function r(n, i) {
    var o;
    Z4e(this, r), o = t.call(this, n, i);
    const {
      registerViewportChanged: a,
      removeViewportChanged: s,
      setDomainsCallback: l
    } = n, u = Gt.nice();
    return o.uid = u, o.options = i, o.hasFromView = !n.projectionYDomain, o.removeViewportChanged = s, o.setDomainsCallback = l, o.viewportXDomain = o.hasFromView ? null : [0, 0], o.viewportYDomain = o.hasFromView ? null : n.projectionYDomain, o.brush = Xv().on("brush", o.brushed.bind(Ex(o))), o.gBrush = o.gMain.append("g").attr("id", `brush-${o.uid}`).call(o.brush), o.gBrush.selectAll(".overlay").style("pointer-events", "none"), o.gBrush.selectAll(".handle--ne").style("pointer-events", "none"), o.gBrush.selectAll(".handle--nw").style("pointer-events", "none"), o.gBrush.selectAll(".handle--sw").style("pointer-events", "none"), o.gBrush.selectAll(".handle--se").style("pointer-events", "none"), o.gBrush.selectAll(".handle--e").style("pointer-events", "none"), o.gBrush.selectAll(".handle--w").style("pointer-events", "none"), a(u, o.viewportChanged.bind(Ex(o))), o.rerender(), o.draw(), o;
  }
  return Q4e(r, [{
    key: "brushed",
    value: function(i) {
      const o = i.selection;
      if (!this._xScale || !this._yScale)
        return;
      const a = this.viewportXDomain, s = [this._yScale.invert(o[0]), this._yScale.invert(o[1])];
      this.hasFromView || (this.viewportYDomain = s), this.setDomainsCallback(a, s);
    }
  }, {
    key: "viewportChanged",
    value: function(i, o, a = true) {
      const s = i.domain(), l = o.domain();
      this.viewportXDomain = s, this.viewportYDomain = l, this.draw();
    }
  }, {
    key: "remove",
    value: function() {
      this.removeViewportChanged(this.uid), Xf(Wl(r.prototype), "remove", this).call(this);
    }
  }, {
    key: "rerender",
    value: function() {
      this.gBrush.selectAll(".selection").attr("fill", this.options.projectionFillColor).attr("stroke", this.options.projectionStrokeColor).attr("fill-opacity", this.options.projectionFillOpacity).attr("stroke-opacity", this.options.projectionStrokeOpacity).attr("stroke-width", this.options.strokeWidth);
    }
  }, {
    key: "draw",
    value: function() {
      if (!this._xScale || !this.yScale || !this.viewportXDomain || !this.viewportYDomain)
        return;
      const i = this._yScale(this.viewportYDomain[0]), o = this._yScale(this.viewportYDomain[1]), a = [i, o];
      this.brush.on("brush", null), this.gBrush.call(this.brush.move, a), this.brush.on("brush", this.brushed.bind(this));
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.draw();
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Xf(Wl(r.prototype), "setPosition", this).call(this, i), this.draw();
    }
  }, {
    key: "setDimensions",
    value: function(i) {
      Xf(Wl(r.prototype), "setDimensions", this).call(this, i);
      const o = this._xScale.range(), a = this._yScale.range(), s = a[1] - a[0];
      this.brush.extent([[o[0], a[0] - s], [o[1], a[1] + s]]), this.gBrush.call(this.brush), this.draw();
    }
  }]), r;
}(fh);
function Wj(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Yj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, a6e(n.key), n);
  }
}
function qj(e12, t, r) {
  return t && Yj(e12.prototype, t), r && Yj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function a6e(e12) {
  var t = s6e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function s6e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
var Sx = "__mixwith_appliedMixin";
var wx = "__mixwith_wrappedMixin";
var zZ = (e12) => e12[wx] || e12;
var l6e = (e12, t) => {
  const r = t(e12);
  return r.prototype[Sx] = zZ(t), r;
};
var c6e = (e12, t) => e12.hasOwnProperty(Sx) && e12[Sx] === zZ(t);
var u6e = (e12, t) => {
  for (; e12 !== null; ) {
    if (c6e(e12, t))
      return true;
    e12 = Object.getPrototypeOf(e12);
  }
  return false;
};
var IM = (e12, t) => (Object.setPrototypeOf(t, e12), e12[wx] || (e12[wx] = e12), t);
var DO = "__mixwith_cachedApplications";
var h6e = (e12) => IM(e12, (t) => {
  let r = t[DO];
  r || (t[DO] = /* @__PURE__ */ new Map(), r = t[DO]);
  let n = r.get(e12);
  return n || (n = e12(t), r.set(e12, n)), n;
});
var f6e = (e12) => IM(e12, (t) => u6e(t.prototype, e12) ? t : e12(t));
var d6e = (e12) => IM(e12, (t) => l6e(t, e12));
var AS = (e12) => f6e(h6e(d6e(e12)));
var p6e = function() {
  function e12(t) {
    Wj(this, e12), this.superclass = t || function() {
      function r() {
        Wj(this, r);
      }
      return qj(r);
    }();
  }
  return qj(e12, [{
    key: "with",
    value: function(...r) {
      return r.reduce((n, i) => i(n), this.superclass);
    }
  }]), e12;
}();
var Ap = (e12) => new p6e(e12);
function m6e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Kj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, v6e(n.key), n);
  }
}
function g6e(e12, t, r) {
  return t && Kj(e12.prototype, t), r && Kj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function v6e(e12) {
  var t = y6e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function y6e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function kg() {
  return typeof Reflect < "u" && Reflect.get ? kg = Reflect.get.bind() : kg = function(t, r, n) {
    var i = _6e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, kg.apply(this, arguments);
}
function _6e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Fu(e12), e12 !== null); )
    ;
  return e12;
}
function b6e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Ax(e12, t);
}
function Ax(e12, t) {
  return Ax = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Ax(e12, t);
}
function T6e(e12) {
  var t = S6e();
  return function() {
    var n = Fu(e12), i;
    if (t) {
      var o = Fu(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return E6e(this, i);
  };
}
function E6e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return VZ(e12);
}
function VZ(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function S6e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Fu(e12) {
  return Fu = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Fu(e12);
}
var PM = AS((e12) => function(t) {
  b6e(n, t);
  var r = T6e(n);
  function n(i, o) {
    var a;
    m6e(this, n), a = r.call(this, i, o);
    const {
      animate: s
    } = i;
    return a.highlighted = false, a.animate = s, a.MOUSEOVER_RADIUS = 4, a.pubSub = i.pubSub, a.pubSubs.push(a.pubSub.subscribe("app.mouseMove", a.mouseMoveHandler.bind(VZ(a)))), a;
  }
  return g6e(n, [{
    key: "setPosition",
    value: function(o) {
      kg(Fu(n.prototype), "setPosition", this).call(this, o), this.pMain.position.x = this.position[0], this.pMain.position.y = this.position[1];
    }
  }, {
    key: "zoomed",
    value: function(o, a) {
      kg(Fu(n.prototype), "zoomed", this).call(this, o, a), this.draw();
    }
  }, {
    key: "respondsToPosition",
    value: function() {
      return this.highlighted;
    }
  }]), n;
}(e12));
function Dg() {
  return typeof Reflect < "u" && Reflect.get ? Dg = Reflect.get.bind() : Dg = function(t, r, n) {
    var i = w6e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Dg.apply(this, arguments);
}
function w6e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = $u(e12), e12 !== null); )
    ;
  return e12;
}
function XZ(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Zj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, A6e(n.key), n);
  }
}
function WZ(e12, t, r) {
  return t && Zj(e12.prototype, t), r && Zj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function A6e(e12) {
  var t = O6e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function O6e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function YZ(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Ox(e12, t);
}
function Ox(e12, t) {
  return Ox = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Ox(e12, t);
}
function qZ(e12) {
  var t = C6e();
  return function() {
    var n = $u(e12), i;
    if (t) {
      var o = $u(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return I6e(this, i);
  };
}
function I6e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return P6e(e12);
}
function P6e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function C6e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function $u(e12) {
  return $u = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, $u(e12);
}
var x6e = AS((e12) => function(t) {
  YZ(n, t);
  var r = qZ(n);
  function n() {
    return XZ(this, n), r.apply(this, arguments);
  }
  return WZ(n, [{
    key: "drawHorizontalRule",
    value: function(o) {
      let a = ct(this.options.color || "black");
      this.highlighted && (a = ct("red")), o.lineStyle(this.strokeWidth, a, this.strokeOpacity);
      let s = 0;
      for (; s < this.dimensions[0]; )
        o.moveTo(s, this._yScale(this.yPosition)), o.lineTo(s + this.dashLength, this._yScale(this.yPosition)), s += this.dashLength + this.dashGap;
    }
  }, {
    key: "isMouseOverHorizontalLine",
    value: function(o) {
      return Math.abs(o.y - this.position[1] - this._yScale(this.yPosition)) < this.MOUSEOVER_RADIUS;
    }
  }]), n;
}(e12));
var KZ = function(e12) {
  YZ(r, e12);
  var t = qZ(r);
  function r(n, i) {
    var o;
    return XZ(this, r), o = t.call(this, n, i), o.yPosition = n.yPosition, o.strokeWidth = 2, o.strokeOpacity = 1, o.dashLength = 5, o.dashGap = 3, o;
  }
  return WZ(r, [{
    key: "mouseMoveHandler",
    value: function(i) {
      if (this.isWithin(i.x, i.y) && this.isMouseOverHorizontalLine(i)) {
        this.highlighted = true, this.draw();
        return;
      }
      this.highlighted = false, this.draw();
    }
  }, {
    key: "draw",
    value: function() {
      const i = this.pMain;
      i.clear(), this.drawHorizontalRule(i), this.animate();
    }
    /**
     * Export an SVG representation of this track
     *
     * @returns {Array} The two returned DOM nodes are both SVG
     * elements [base,track]. Base is a parent which contains track as a
     * child. Track is clipped with a clipping rectangle contained in base.
     *
     */
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      Dg($u(r.prototype), "exportSVG", this) ? [o, i] = Dg($u(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o);
      const a = document.createElement("g");
      a.setAttribute("class", "horizontal-rule"), a.setAttribute("transform", `translate(${this.position[0]},${this.position[1]})`), i.appendChild(a);
      const s = this.options.color || "black", l = document.createElement("line");
      return l.setAttribute("stroke", s), l.setAttribute("stroke-width", this.strokeWidth), l.setAttribute("stroke-dasharray", `${this.dashLength} ${this.dashGap}`), l.setAttribute("x1", 0), l.setAttribute("y1", this._yScale(this.yPosition)), l.setAttribute("x2", this.dimensions[0]), l.setAttribute("y2", this._yScale(this.yPosition)), a.appendChild(l), [o, i];
    }
  }]), r;
}(Ap(Oi).with(PM, x6e));
function Rg() {
  return typeof Reflect < "u" && Reflect.get ? Rg = Reflect.get.bind() : Rg = function(t, r, n) {
    var i = k6e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Rg.apply(this, arguments);
}
function k6e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Hu(e12), e12 !== null); )
    ;
  return e12;
}
function ZZ(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Qj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, D6e(n.key), n);
  }
}
function QZ(e12, t, r) {
  return t && Qj(e12.prototype, t), r && Qj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function D6e(e12) {
  var t = R6e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function R6e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function JZ(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Ix(e12, t);
}
function Ix(e12, t) {
  return Ix = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Ix(e12, t);
}
function eQ(e12) {
  var t = L6e();
  return function() {
    var n = Hu(e12), i;
    if (t) {
      var o = Hu(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return N6e(this, i);
  };
}
function N6e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return M6e(e12);
}
function M6e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function L6e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Hu(e12) {
  return Hu = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Hu(e12);
}
var tQ = AS((e12) => function(t) {
  JZ(n, t);
  var r = eQ(n);
  function n() {
    return ZZ(this, n), r.apply(this, arguments);
  }
  return QZ(n, [{
    key: "drawVerticalRule",
    value: function(o) {
      let a = ct(this.options.color || "black");
      this.highlighted && (a = ct("red")), o.lineStyle(this.strokeWidth, a, this.strokeOpacity);
      let s = 0;
      for (; s < this.dimensions[1]; )
        o.moveTo(this._xScale(this.xPosition), s), o.lineTo(this._xScale(this.xPosition), s + this.dashLength), s += this.dashLength + this.dashGap;
    }
  }, {
    key: "isMouseOverVerticalLine",
    value: function(o) {
      return Math.abs(o.x - this.position[0] - this._xScale(this.xPosition)) < this.MOUSEOVER_RADIUS;
    }
  }]), n;
}(e12));
var rQ = function(e12) {
  JZ(r, e12);
  var t = eQ(r);
  function r(n, i) {
    var o;
    return ZZ(this, r), o = t.call(this, n, i), o.xPosition = n.xPosition, o.strokeWidth = 2, o.strokeOpacity = 1, o.dashLength = 5, o.dashGap = 3, o;
  }
  return QZ(r, [{
    key: "draw",
    value: function() {
      const i = this.pMain;
      i.clear(), this.drawVerticalRule(i), this.animate();
    }
    /**
     * Export an SVG representation of this track
     *
     * @returns {Array} The two returned DOM nodes are both SVG
     * elements [base,track]. Base is a parent which contains track as a
     * child. Track is clipped with a clipping rectangle contained in base.
     *
     */
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      Rg(Hu(r.prototype), "exportSVG", this) ? [o, i] = Rg(Hu(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o);
      const a = document.createElement("g");
      a.setAttribute("class", "vertical-rule"), a.setAttribute("transform", `translate(${this.position[0]},${this.position[1]})`), i.appendChild(a);
      const s = this.options.color || "black", l = document.createElement("line");
      return l.setAttribute("stroke", s), l.setAttribute("stroke-width", this.strokeWidth), l.setAttribute("stroke-dasharray", `${this.dashLength} ${this.dashGap}`), l.setAttribute("x1", this._xScale(this.xPosition)), l.setAttribute("y1", 0), l.setAttribute("x2", this._xScale(this.xPosition)), l.setAttribute("y2", this.dimensions[1]), a.appendChild(l), [o, i];
    }
  }, {
    key: "mouseMoveHandler",
    value: function(i) {
      this.highlighted = this.isWithin(i.x, i.y) && this.isMouseOverVerticalLine(i), this.draw();
    }
  }]), r;
}(Ap(Oi).with(PM, tQ));
function B6e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Jj(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, $6e(n.key), n);
  }
}
function F6e(e12, t, r) {
  return t && Jj(e12.prototype, t), r && Jj(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function $6e(e12) {
  var t = H6e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function H6e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Ng() {
  return typeof Reflect < "u" && Reflect.get ? Ng = Reflect.get.bind() : Ng = function(t, r, n) {
    var i = U6e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Ng.apply(this, arguments);
}
function U6e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Uu(e12), e12 !== null); )
    ;
  return e12;
}
function j6e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Px(e12, t);
}
function Px(e12, t) {
  return Px = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Px(e12, t);
}
function G6e(e12) {
  var t = X6e();
  return function() {
    var n = Uu(e12), i;
    if (t) {
      var o = Uu(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return z6e(this, i);
  };
}
function z6e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return V6e(e12);
}
function V6e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function X6e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Uu(e12) {
  return Uu = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Uu(e12);
}
var nQ = function(e12) {
  j6e(r, e12);
  var t = G6e(r);
  function r(n, i) {
    var o;
    B6e(this, r), o = t.call(this, n, i);
    const {
      x: a,
      y: s
    } = n;
    return o.xPosition = a, o.yPosition = s, o.strokeWidth = 2, o.strokeOpacity = 1, o.dashLength = 5, o.dashGap = 3, o;
  }
  return F6e(r, [{
    key: "draw",
    value: function() {
      const i = this.pMain;
      i.clear(), this.drawHorizontalRule(i), this.drawVerticalRule(i);
    }
  }, {
    key: "mouseMoveHandler",
    value: function(i) {
      this.highlighted = this.isWithin(i.x, i.y) && (this.isMouseOverHorizontalLine(i) || this.isMouseOverVerticalLine(i)), this.draw();
    }
  }, {
    key: "drawHorizontalRule",
    value: function(i) {
      let o = ct(this.options.color || "black");
      this.highlighted && (o = ct("red")), i.lineStyle(this.strokeWidth, o, this.strokeOpacity);
      let a = 0;
      for (; a < this.dimensions[0]; )
        i.moveTo(a, this._yScale(this.yPosition)), i.lineTo(a + this.dashLength, this._yScale(this.yPosition)), a += this.dashLength + this.dashGap;
    }
  }, {
    key: "isMouseOverHorizontalLine",
    value: function(i) {
      return Math.abs(i.y - this.position[1] - this._yScale(this.yPosition)) < this.MOUSEOVER_RADIUS;
    }
    /**
     * Export an SVG representation of this track
     *
     * @returns {Array} The two returned DOM nodes are both SVG
     * elements [base,track]. Base is a parent which contains track as a
     * child. Track is clipped with a clipping rectangle contained in base.
     *
     */
  }, {
    key: "exportSVG",
    value: function() {
      let i = null, o = null;
      Ng(Uu(r.prototype), "exportSVG", this) ? [o, i] = Ng(Uu(r.prototype), "exportSVG", this).call(this) : (o = document.createElement("g"), i = o);
      const a = document.createElement("g");
      a.setAttribute("class", "cross-rule"), a.setAttribute("transform", `translate(${this.position[0]},${this.position[1]})`), i.appendChild(a);
      const s = this.options.color || "black", l = document.createElement("line");
      l.setAttribute("stroke", s), l.setAttribute("stroke-width", this.strokeWidth), l.setAttribute("stroke-dasharray", `${this.dashLength} ${this.dashGap}`), l.setAttribute("x1", this._xScale(this.xPosition)), l.setAttribute("y1", 0), l.setAttribute("x2", this._xScale(this.xPosition)), l.setAttribute("y2", this.dimensions[1]);
      const u = document.createElement("line");
      return u.setAttribute("stroke", s), u.setAttribute("stroke-width", this.strokeWidth), u.setAttribute("stroke-dasharray", `${this.dashLength} ${this.dashGap}`), u.setAttribute("x1", 0), u.setAttribute("y1", this._yScale(this.yPosition)), u.setAttribute("x2", this.dimensions[0]), u.setAttribute("y2", this._yScale(this.yPosition)), a.appendChild(l), a.appendChild(u), [o, i];
    }
  }]), r;
}(Ap(Oi).with(PM, tQ));
function W6e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function e42(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, q6e(n.key), n);
  }
}
function Y6e(e12, t, r) {
  return t && e42(e12.prototype, t), r && e42(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function q6e(e12) {
  var t = K6e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function K6e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function kl() {
  return typeof Reflect < "u" && Reflect.get ? kl = Reflect.get.bind() : kl = function(t, r, n) {
    var i = Z6e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, kl.apply(this, arguments);
}
function Z6e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = xa(e12), e12 !== null); )
    ;
  return e12;
}
function Q6e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Cx(e12, t);
}
function Cx(e12, t) {
  return Cx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Cx(e12, t);
}
function J6e(e12) {
  var t = tGe();
  return function() {
    var n = xa(e12), i;
    if (t) {
      var o = xa(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return eGe(this, i);
  };
}
function eGe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return iQ(e12);
}
function iQ(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function tGe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function xa(e12) {
  return xa = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, xa(e12);
}
var yy = function(e12) {
  Q6e(r, e12);
  var t = J6e(r);
  function r(n, i) {
    var o;
    W6e(this, r), o = t.call(this, n, i);
    const {
      animate: a
    } = n;
    return o.visibleTiles = /* @__PURE__ */ new Set(), o.visibleTileIds = /* @__PURE__ */ new Set(), o.fetching = /* @__PURE__ */ new Set(), o.fetchedTiles = {}, o.tileGraphics = {}, o.minX = typeof o.options.minPos < "u" && !Number.isNaN(+o.options.minPos) ? +o.options.minPos : -180, o.maxX = +o.options.maxPos || 180, o.maxX = typeof o.options.maxPos < "u" && !Number.isNaN(+o.options.maxPos) ? +o.options.maxPos : 180, o.minY = o.options.minY || o.minX, o.maxY = o.options.maxY || o.maxX, o.maxZoom = 19, o.maxWidth = o.maxX - o.minX, o.animate = a, o.uuid = Gt.nice(), o.refreshTilesDebounced = jR(o.refreshTiles.bind(iQ(o)), k0), o;
  }
  return Y6e(r, [{
    key: "visibleAndFetchedIds",
    value: function() {
      return Object.keys(this.fetchedTiles).filter((i) => this.visibleTileIds.has(i));
    }
  }, {
    key: "visibleAndFetchedTiles",
    value: function() {
      return this.visibleAndFetchedIds().map((i) => this.fetchedTiles[i]);
    }
    /**
     * Set which tiles are visible right now.
     *
     * @param tiles: A set of tiles which will be considered the currently visible
     * tile positions.
     */
  }, {
    key: "setVisibleTiles",
    value: function(i) {
      this.visibleTiles = i.map((o) => ({
        tileId: this.tileToLocalId(o),
        remoteId: this.tileToRemoteId(o),
        mirrored: o.mirrored
      })), this.visibleTileIds = new Set(this.visibleTiles.map((o) => o.tileId));
    }
  }, {
    key: "removeAllTiles",
    value: function() {
      const i = new Set(Object.keys(this.fetchedTiles));
      this.removeTiles([...i]);
    }
  }, {
    key: "refreshTiles",
    value: function() {
      this.calculateVisibleTiles();
      const i = new Set(Object.keys(this.fetchedTiles)), o = [...this.visibleTiles].filter((s) => !this.fetching.has(s.remoteId) && !i.has(s.tileId));
      for (let s = 0; s < o.length; s++)
        this.fetching.add(o[s].remoteId);
      const a = [...i].filter((s) => !this.visibleTileIds.has(s));
      this.removeTiles(a), this.fetchNewTiles(o);
    }
    /**
     * Remove obsolete tiles
     *
     * @param toRemoveIds: An array of tile ids to remove from the list of fetched tiles.
     */
  }, {
    key: "removeTiles",
    value: function(i) {
      i.length && this.areAllVisibleTilesLoaded() && (i.forEach((o) => {
        const a = o;
        this.destroyTile(this.fetchedTiles[a]), a in this.tileGraphics && (this.pMain.removeChild(this.tileGraphics[a]), delete this.tileGraphics[a]), delete this.fetchedTiles[a];
      }), this.synchronizeTilesAndGraphics(), this.draw());
    }
    /*
     * The local tile identifier.
     * @param  {array}  tile  Contains `[zoomLevel, xPos, yPos]`.
     * @return  {string}  Remote ID string
     */
  }, {
    key: "tileToLocalId",
    value: function(i) {
      return i.join(".");
    }
    /**
     * The tile identifier used on the server.
     * @param   {array}  tile  Contains `[zoomLevel, xPos, yPos]`.
     * @return  {string}  Remote ID string
     */
  }, {
    key: "tileToRemoteId",
    value: function(i) {
      return i.join(".");
    }
  }, {
    key: "localToRemoteId",
    value: function(i) {
      const o = i.split(".");
      return o.slice(0, o.length - 1).join(".");
    }
  }, {
    key: "calculateZoomLevel",
    value: function() {
      const i = Je.calculateZoomLevel(this._xScale, this.minX, this.maxX), o = Je.calculateZoomLevel(this._xScale, this.minY, this.maxY);
      let a = Math.min(Math.max(i, o), this.maxZoom);
      return this.options.maxZoom && (this.options.maxZoom >= 0 ? a = Math.min(this.options.maxZoom, a) : console.error("Invalid maxZoom on track:", this)), a;
    }
  }, {
    key: "calculateVisibleTiles",
    value: function() {
      this.zoomLevel = this.calculateZoomLevel(), this.xTiles = Je.calculateTiles(this.zoomLevel, this._xScale, this.minX, this.maxX, this.maxZoom, this.maxWidth), this.yTiles = Je.calculateTiles(this.zoomLevel, this._yScale, this.minY, this.maxY, this.maxZoom, this.maxWidth);
      const i = this.xTiles, o = this.yTiles, a = this.zoomLevel, s = [];
      for (let l = 0; l < i.length; l++)
        for (let u = 0; u < o.length; u++) {
          const c = [a, i[l], o[u]];
          s.push(c);
        }
      this.setVisibleTiles(s);
    }
  }, {
    key: "zoomed",
    value: function(i, o, a, s, l) {
      kl(xa(r.prototype), "zoomed", this).call(this, i, o), this.xScale(i), this.yScale(o), this.pMain.position.x = s, this.pMain.position.y = l, this.pMain.scale.x = a, this.pMain.scale.y = a, this.refreshTilesDebounced(), this.draw();
    }
  }, {
    key: "setPosition",
    value: function(i) {
      kl(xa(r.prototype), "setPosition", this).call(this, i);
    }
  }, {
    key: "setDimensions",
    value: function(i) {
      kl(xa(r.prototype), "setDimensions", this).call(this, i);
    }
    /**
     * Check to see if all the visible tiles are loaded.
     *
     * If they are, remove all other tiles.
     */
  }, {
    key: "areAllVisibleTilesLoaded",
    value: function() {
      const i = new Set(Object.keys(this.fetchedTiles)), o = [...this.visibleTileIds];
      for (let a = 0; a < o.length; a++)
        if (!i.has(o[a]))
          return false;
      return true;
    }
    /**
     * Function is called when all tiles that should be visible have
     * been received.
     */
  }, {
    key: "allTilesLoaded",
    value: function() {
    }
  }, {
    key: "minValue",
    value: function(i) {
      return i && (this.scale.minValue = i), this.scale.minValue;
    }
  }, {
    key: "maxValue",
    value: function(i) {
      return i && (this.scale.maxValue = i), this.scale.maxValue;
    }
  }, {
    key: "minRawValue",
    value: function() {
      return this.scale.minRawValue;
    }
  }, {
    key: "maxRawValue",
    value: function() {
      return this.scale.maxRawValue;
    }
    /**
     * Get the tile's position in its coordinate system.
     */
  }, {
    key: "getTilePosAndDimensions",
    value: function(i, o) {
      const a = this.maxWidth / 2 ** i, s = a, l = this.minX + o[0] * a, u = this.minY + o[1] * s;
      return {
        tileX: l,
        tileY: u,
        tileWidth: a,
        tileHeight: s
      };
    }
  }, {
    key: "setSpriteProperties",
    value: function(i, o, a) {
      const {
        tileX: s,
        tileY: l,
        tileWidth: u,
        tileHeight: c
      } = this.getTilePosAndDimensions(o, a);
      i.x = this._refXScale(s), i.y = this._refYScale(l);
      const f = s + u, h = l + c;
      i.width = this._refXScale(f) - this._refXScale(s), i.height = this._refYScale(h) - this._refYScale(l);
    }
  }, {
    key: "initTile",
    value: function(i) {
      const o = new Ue.PIXI.Texture(new Ue.PIXI.BaseTexture(i.tileData.img)), a = new Ue.PIXI.Sprite(o), s = i.graphics;
      i.sprite = a, this.setSpriteProperties(i.sprite, i.tileData.zoomLevel, i.tileData.tilePos), s.removeChildren(), s.addChild(i.sprite);
    }
  }, {
    key: "updateTile",
    value: function(i) {
    }
  }, {
    key: "destroyTile",
    value: function(i) {
    }
    /**
     * Add graphics for tiles that have no graphics
     */
  }, {
    key: "addMissingGraphics",
    value: function() {
      const i = Object.keys(this.fetchedTiles);
      for (let o = 0; o < i.length; o++)
        if (!(i[o] in this.tileGraphics)) {
          const a = new Ue.PIXI.Graphics();
          this.pMain.addChild(a), this.fetchedTiles[i[o]].graphics = a, this.initTile(this.fetchedTiles[i[o]]), this.tileGraphics[i[o]] = a;
        }
    }
    /**
     * Change the graphics for existing tiles
     */
  }, {
    key: "updateExistingGraphics",
    value: function() {
      const i = Object.keys(this.fetchedTiles);
      for (let o = 0; o < i.length; o++)
        this.updateTile(this.fetchedTiles[i[o]]);
    }
    /**
     * Make sure that we have a one to one mapping between tiles
     * and graphics objects
     */
  }, {
    key: "synchronizeTilesAndGraphics",
    value: function() {
      this.addMissingGraphics(), this.updateExistingGraphics();
    }
    /**
     * Extract drawable data from a tile loaded by a generic tile loader
     *
     * @param tile: A tile returned by a TiledArea.
     * @param dataLoader: A function for extracting drawable data from a tile. This
     *                    usually means differentiating the between dense and sparse
     *                    tiles and putting the data into an array.
     */
  }, {
    key: "loadTileData",
    value: function(i, o) {
      let a = this.lruCache.get(i.tileId);
      return a || (a = o(i.data, i.type), this.lruCache.put(i.tileId, a)), a;
    }
    /**
     * Get the url used to fetch the tile data
     */
  }, {
    key: "getTileUrl",
    value: function(i) {
      const o = ["a", "b", "c"], a = Math.floor(Math.random() * o.length);
      return `https://${o[a]}.tile.openstreetmap.org/${i[0]}/${i[1]}/${i[2]}.png`;
    }
  }, {
    key: "fetchNewTiles",
    value: function(i) {
      if (i.length > 0) {
        const o = [...new Set(i.map((a) => a.remoteId))];
        for (const a of o) {
          const s = a.split("."), l = this.getTileUrl(s), u = new Image();
          u.crossOrigin = "Anonymous", u.src = l, u.onload = () => {
            const c = {};
            c[a] = {
              tileId: a,
              img: u,
              zoomLevel: +s[0],
              tilePos: [+s[1], +s[2]],
              tileSrc: l
            }, this.receivedTiles(c);
          };
        }
      }
    }
    /**
     * We've gotten a bunch of tiles from the server in
     * response to a request from fetchTiles.
     */
  }, {
    key: "receivedTiles",
    value: function(i) {
      for (let o = 0; o < this.visibleTiles.length; o++) {
        const a = this.visibleTiles[o].tileId;
        i[this.visibleTiles[o].remoteId] && this.visibleTiles[o].remoteId in i && (a in this.fetchedTiles || (this.fetchedTiles[a] = this.visibleTiles[o]), this.fetchedTiles[a].tileData = i[this.visibleTiles[o].remoteId]);
      }
      for (const o in i)
        i[o] && this.fetching.has(o) && this.fetching.delete(o);
      this.synchronizeTilesAndGraphics(), this.refreshTiles(), this.draw(), this.animate();
    }
  }, {
    key: "draw",
    value: function() {
      this.delayDrawing || kl(xa(r.prototype), "draw", this).call(this);
    }
    /**
     * Draw a tile on some graphics
     */
  }, {
    key: "drawTile",
    value: function() {
    }
  }, {
    key: "refScalesChanged",
    value: function(i, o) {
      kl(xa(r.prototype), "refScalesChanged", this).call(this, i, o);
      for (const a in this.fetchedTiles) {
        const s = this.fetchedTiles[a];
        s.sprite && this.setSpriteProperties(s.sprite, s.tileData.zoomLevel, s.tileData.tilePos);
      }
    }
  }]), r;
}(Oi);
function rGe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function t4(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, iGe(n.key), n);
  }
}
function nGe(e12, t, r) {
  return t && t4(e12.prototype, t), r && t4(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function iGe(e12) {
  var t = oGe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function oGe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Fb() {
  return typeof Reflect < "u" && Reflect.get ? Fb = Reflect.get.bind() : Fb = function(t, r, n) {
    var i = aGe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Fb.apply(this, arguments);
}
function aGe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Hd(e12), e12 !== null); )
    ;
  return e12;
}
function sGe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && xx(e12, t);
}
function xx(e12, t) {
  return xx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, xx(e12, t);
}
function lGe(e12) {
  var t = hGe();
  return function() {
    var n = Hd(e12), i;
    if (t) {
      var o = Hd(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return cGe(this, i);
  };
}
function cGe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return uGe(e12);
}
function uGe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function hGe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Hd(e12) {
  return Hd = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Hd(e12);
}
var oQ = function(e12) {
  sGe(r, e12);
  var t = lGe(r);
  function r() {
    return rGe(this, r), t.apply(this, arguments);
  }
  return nGe(r, [{
    key: "initTile",
    value: function(i) {
      MK.bind(this)(i), this.drawTile(i);
    }
  }, {
    key: "drawTile",
    value: function(i) {
      NK.bind(this)(i);
    }
  }, {
    key: "areAllVisibleTilesLoaded",
    value: function() {
      return true;
    }
  }, {
    key: "fetchNewTiles",
    value: function(i) {
      i.forEach((o) => {
        const s = o.remoteId.split("."), l = {
          zoomLevel: s[0],
          tilePos: s.slice(1, s.length).map((u) => +u)
        };
        this.fetchedTiles[o.tileId] = o, this.fetchedTiles[o.tileId].tileData = l, this.fetching.has(o.remoteId) && this.fetching.delete(o.remoteId);
      }), this.synchronizeTilesAndGraphics(), this.draw(), this.animate();
    }
  }, {
    key: "draw",
    value: function() {
      Fb(Hd(r.prototype), "draw", this).call(this);
    }
  }]), r;
}(yy);
function fGe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function r4(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, pGe(n.key), n);
  }
}
function dGe(e12, t, r) {
  return t && r4(e12.prototype, t), r && r4(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function pGe(e12) {
  var t = mGe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function mGe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function $b() {
  return typeof Reflect < "u" && Reflect.get ? $b = Reflect.get.bind() : $b = function(t, r, n) {
    var i = gGe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, $b.apply(this, arguments);
}
function gGe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Ud(e12), e12 !== null); )
    ;
  return e12;
}
function vGe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && kx(e12, t);
}
function kx(e12, t) {
  return kx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, kx(e12, t);
}
function yGe(e12) {
  var t = TGe();
  return function() {
    var n = Ud(e12), i;
    if (t) {
      var o = Ud(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return _Ge(this, i);
  };
}
function _Ge(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return bGe(e12);
}
function bGe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function TGe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Ud(e12) {
  return Ud = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Ud(e12);
}
var aQ = function(e12) {
  vGe(r, e12);
  var t = yGe(r);
  function r(n, i) {
    var o;
    return fGe(this, r), o = t.call(this, n, i), o.style = i.style, o.options.accessToken || (o.errorTextText = "No access token provided in the viewconf's track options ('accessToken' option).", o.drawError()), o;
  }
  return dGe(r, [{
    key: "rerender",
    value: function(i) {
      $b(Ud(r.prototype), "rerender", this).call(this, i), i.style !== this.style && (this.style = i.style, this.removeAllTiles(), this.refreshTiles());
    }
    /**
     * Get the url used to fetch the tile data
     */
  }, {
    key: "getTileUrl",
    value: function(i) {
      const o = this.options && this.options.style ? this.options.style : "streets-v10", a = this.options && +this.options.tileSize ? +this.options.tileSize : 256;
      return `https://api.mapbox.com/styles/v1/mapbox/${o}/tiles/${a}/${i[0]}/${i[1]}/${i[2]}?access_token=${this.options.accessToken}`;
    }
  }]), r;
}(yy);
function EGe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function n4(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, wGe(n.key), n);
  }
}
function SGe(e12, t, r) {
  return t && n4(e12.prototype, t), r && n4(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function wGe(e12) {
  var t = AGe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function AGe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function OGe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Dx(e12, t);
}
function Dx(e12, t) {
  return Dx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Dx(e12, t);
}
function IGe(e12) {
  var t = xGe();
  return function() {
    var n = _T(e12), i;
    if (t) {
      var o = _T(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return PGe(this, i);
  };
}
function PGe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return CGe(e12);
}
function CGe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function xGe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function _T(e12) {
  return _T = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, _T(e12);
}
var sQ = function(e12) {
  OGe(r, e12);
  var t = IGe(r);
  function r(n, i) {
    var o;
    return EGe(this, r), o = t.call(this, n, i), o.style = i.style, o.options.tileSource || (o.errorTextText = "No tile source string provided in the options. It should be in the form of http://a.com/{z}/{x}/{y}", o.drawError()), o;
  }
  return SGe(r, [{
    key: "getTileUrl",
    value: function(i) {
      let o = this.options.tileSource.replace("{z}", i[0]);
      return o = o.replace("{x}", i[1]), o = o.replace("{y}", i[2]), o;
    }
  }]), r;
}(yy);
var kGe = (e12, t, r, n = sE) => {
  const i = r[e12.type];
  return i ? new i.dataFetcher(n, e12, t) : e12.type === "genbank" ? new DK(e12, t) : e12.type === "local-tiles" ? new RK(e12, t) : new gS(e12, t);
};
var ht = 1e-6;
var Tv = 1e-12;
var Bt = Math.PI;
var Yr = Bt / 2;
var bT = Bt / 4;
var Ti = Bt * 2;
var Sr = 180 / Bt;
var mt = Bt / 180;
var rr = Math.abs;
var Op = Math.atan;
var Ei = Math.atan2;
var st = Math.cos;
var L_ = Math.ceil;
var lQ = Math.exp;
var Rx = Math.hypot;
var TT = Math.log;
var RO = Math.pow;
var et = Math.sin;
var Oo = Math.sign || function(e12) {
  return e12 > 0 ? 1 : e12 < 0 ? -1 : 0;
};
var Pn = Math.sqrt;
var CM = Math.tan;
function cQ(e12) {
  return e12 > 1 ? 0 : e12 < -1 ? Bt : Math.acos(e12);
}
function Si(e12) {
  return e12 > 1 ? Yr : e12 < -1 ? -Yr : Math.asin(e12);
}
function i4(e12) {
  return (e12 = et(e12 / 2)) * e12;
}
function zr() {
}
function ET(e12, t) {
  e12 && a4.hasOwnProperty(e12.type) && a4[e12.type](e12, t);
}
var o4 = {
  Feature: function(e12, t) {
    ET(e12.geometry, t);
  },
  FeatureCollection: function(e12, t) {
    for (var r = e12.features, n = -1, i = r.length; ++n < i; )
      ET(r[n].geometry, t);
  }
};
var a4 = {
  Sphere: function(e12, t) {
    t.sphere();
  },
  Point: function(e12, t) {
    e12 = e12.coordinates, t.point(e12[0], e12[1], e12[2]);
  },
  MultiPoint: function(e12, t) {
    for (var r = e12.coordinates, n = -1, i = r.length; ++n < i; )
      e12 = r[n], t.point(e12[0], e12[1], e12[2]);
  },
  LineString: function(e12, t) {
    Nx(e12.coordinates, t, 0);
  },
  MultiLineString: function(e12, t) {
    for (var r = e12.coordinates, n = -1, i = r.length; ++n < i; )
      Nx(r[n], t, 0);
  },
  Polygon: function(e12, t) {
    s4(e12.coordinates, t);
  },
  MultiPolygon: function(e12, t) {
    for (var r = e12.coordinates, n = -1, i = r.length; ++n < i; )
      s4(r[n], t);
  },
  GeometryCollection: function(e12, t) {
    for (var r = e12.geometries, n = -1, i = r.length; ++n < i; )
      ET(r[n], t);
  }
};
function Nx(e12, t, r) {
  var n = -1, i = e12.length - r, o;
  for (t.lineStart(); ++n < i; )
    o = e12[n], t.point(o[0], o[1], o[2]);
  t.lineEnd();
}
function s4(e12, t) {
  var r = -1, n = e12.length;
  for (t.polygonStart(); ++r < n; )
    Nx(e12[r], t, 1);
  t.polygonEnd();
}
function Xo(e12, t) {
  e12 && o4.hasOwnProperty(e12.type) ? o4[e12.type](e12, t) : ET(e12, t);
}
var ST = new gn();
var wT = new gn();
var uQ;
var hQ;
var Mx;
var Lx;
var Bx;
var Wa = {
  point: zr,
  lineStart: zr,
  lineEnd: zr,
  polygonStart: function() {
    ST = new gn(), Wa.lineStart = DGe, Wa.lineEnd = RGe;
  },
  polygonEnd: function() {
    var e12 = +ST;
    wT.add(e12 < 0 ? Ti + e12 : e12), this.lineStart = this.lineEnd = this.point = zr;
  },
  sphere: function() {
    wT.add(Ti);
  }
};
function DGe() {
  Wa.point = NGe;
}
function RGe() {
  fQ(uQ, hQ);
}
function NGe(e12, t) {
  Wa.point = fQ, uQ = e12, hQ = t, e12 *= mt, t *= mt, Mx = e12, Lx = st(t = t / 2 + bT), Bx = et(t);
}
function fQ(e12, t) {
  e12 *= mt, t *= mt, t = t / 2 + bT;
  var r = e12 - Mx, n = r >= 0 ? 1 : -1, i = n * r, o = st(t), a = et(t), s = Bx * a, l = Lx * o + s * st(i), u = s * n * et(i);
  ST.add(Ei(u, l)), Mx = e12, Lx = o, Bx = a;
}
function MGe(e12) {
  return wT = new gn(), Xo(e12, Wa), wT * 2;
}
function AT(e12) {
  return [Ei(e12[1], e12[0]), Si(e12[2])];
}
function ju(e12) {
  var t = e12[0], r = e12[1], n = st(r);
  return [n * st(t), n * et(t), et(r)];
}
function B_(e12, t) {
  return e12[0] * t[0] + e12[1] * t[1] + e12[2] * t[2];
}
function jd(e12, t) {
  return [e12[1] * t[2] - e12[2] * t[1], e12[2] * t[0] - e12[0] * t[2], e12[0] * t[1] - e12[1] * t[0]];
}
function NO(e12, t) {
  e12[0] += t[0], e12[1] += t[1], e12[2] += t[2];
}
function F_(e12, t) {
  return [e12[0] * t, e12[1] * t, e12[2] * t];
}
function OT(e12) {
  var t = Pn(e12[0] * e12[0] + e12[1] * e12[1] + e12[2] * e12[2]);
  e12[0] /= t, e12[1] /= t, e12[2] /= t;
}
var Gr;
var Bi;
var Xr;
var Ji;
var Fc;
var dQ;
var pQ;
var Wf;
var Mg;
var Al;
var Us;
var ms = {
  point: Fx,
  lineStart: l4,
  lineEnd: c4,
  polygonStart: function() {
    ms.point = gQ, ms.lineStart = LGe, ms.lineEnd = BGe, Mg = new gn(), Wa.polygonStart();
  },
  polygonEnd: function() {
    Wa.polygonEnd(), ms.point = Fx, ms.lineStart = l4, ms.lineEnd = c4, ST < 0 ? (Gr = -(Xr = 180), Bi = -(Ji = 90)) : Mg > ht ? Ji = 90 : Mg < -ht && (Bi = -90), Us[0] = Gr, Us[1] = Xr;
  },
  sphere: function() {
    Gr = -(Xr = 180), Bi = -(Ji = 90);
  }
};
function Fx(e12, t) {
  Al.push(Us = [Gr = e12, Xr = e12]), t < Bi && (Bi = t), t > Ji && (Ji = t);
}
function mQ(e12, t) {
  var r = ju([e12 * mt, t * mt]);
  if (Wf) {
    var n = jd(Wf, r), i = [n[1], -n[0], 0], o = jd(i, n);
    OT(o), o = AT(o);
    var a = e12 - Fc, s = a > 0 ? 1 : -1, l = o[0] * Sr * s, u, c = rr(a) > 180;
    c ^ (s * Fc < l && l < s * e12) ? (u = o[1] * Sr, u > Ji && (Ji = u)) : (l = (l + 360) % 360 - 180, c ^ (s * Fc < l && l < s * e12) ? (u = -o[1] * Sr, u < Bi && (Bi = u)) : (t < Bi && (Bi = t), t > Ji && (Ji = t))), c ? e12 < Fc ? Ki(Gr, e12) > Ki(Gr, Xr) && (Xr = e12) : Ki(e12, Xr) > Ki(Gr, Xr) && (Gr = e12) : Xr >= Gr ? (e12 < Gr && (Gr = e12), e12 > Xr && (Xr = e12)) : e12 > Fc ? Ki(Gr, e12) > Ki(Gr, Xr) && (Xr = e12) : Ki(e12, Xr) > Ki(Gr, Xr) && (Gr = e12);
  } else
    Al.push(Us = [Gr = e12, Xr = e12]);
  t < Bi && (Bi = t), t > Ji && (Ji = t), Wf = r, Fc = e12;
}
function l4() {
  ms.point = mQ;
}
function c4() {
  Us[0] = Gr, Us[1] = Xr, ms.point = Fx, Wf = null;
}
function gQ(e12, t) {
  if (Wf) {
    var r = e12 - Fc;
    Mg.add(rr(r) > 180 ? r + (r > 0 ? 360 : -360) : r);
  } else
    dQ = e12, pQ = t;
  Wa.point(e12, t), mQ(e12, t);
}
function LGe() {
  Wa.lineStart();
}
function BGe() {
  gQ(dQ, pQ), Wa.lineEnd(), rr(Mg) > ht && (Gr = -(Xr = 180)), Us[0] = Gr, Us[1] = Xr, Wf = null;
}
function Ki(e12, t) {
  return (t -= e12) < 0 ? t + 360 : t;
}
function FGe(e12, t) {
  return e12[0] - t[0];
}
function u4(e12, t) {
  return e12[0] <= e12[1] ? e12[0] <= t && t <= e12[1] : t < e12[0] || e12[1] < t;
}
function $Ge(e12) {
  var t, r, n, i, o, a, s;
  if (Ji = Xr = -(Gr = Bi = 1 / 0), Al = [], Xo(e12, ms), r = Al.length) {
    for (Al.sort(FGe), t = 1, n = Al[0], o = [n]; t < r; ++t)
      i = Al[t], u4(n, i[0]) || u4(n, i[1]) ? (Ki(n[0], i[1]) > Ki(n[0], n[1]) && (n[1] = i[1]), Ki(i[0], n[1]) > Ki(n[0], n[1]) && (n[0] = i[0])) : o.push(n = i);
    for (a = -1 / 0, r = o.length - 1, t = 0, n = o[r]; t <= r; n = i, ++t)
      i = o[t], (s = Ki(n[1], i[0])) > a && (a = s, Gr = i[0], Xr = n[1]);
  }
  return Al = Us = null, Gr === 1 / 0 || Bi === 1 / 0 ? [[NaN, NaN], [NaN, NaN]] : [[Gr, Bi], [Xr, Ji]];
}
var Fm;
var IT;
var PT;
var CT;
var xT;
var kT;
var DT;
var RT;
var $x;
var Hx;
var Ux;
var vQ;
var yQ;
var mi;
var gi;
var vi;
var Ko = {
  sphere: zr,
  point: xM,
  lineStart: h4,
  lineEnd: f4,
  polygonStart: function() {
    Ko.lineStart = jGe, Ko.lineEnd = GGe;
  },
  polygonEnd: function() {
    Ko.lineStart = h4, Ko.lineEnd = f4;
  }
};
function xM(e12, t) {
  e12 *= mt, t *= mt;
  var r = st(t);
  _y(r * st(e12), r * et(e12), et(t));
}
function _y(e12, t, r) {
  ++Fm, PT += (e12 - PT) / Fm, CT += (t - CT) / Fm, xT += (r - xT) / Fm;
}
function h4() {
  Ko.point = HGe;
}
function HGe(e12, t) {
  e12 *= mt, t *= mt;
  var r = st(t);
  mi = r * st(e12), gi = r * et(e12), vi = et(t), Ko.point = UGe, _y(mi, gi, vi);
}
function UGe(e12, t) {
  e12 *= mt, t *= mt;
  var r = st(t), n = r * st(e12), i = r * et(e12), o = et(t), a = Ei(Pn((a = gi * o - vi * i) * a + (a = vi * n - mi * o) * a + (a = mi * i - gi * n) * a), mi * n + gi * i + vi * o);
  IT += a, kT += a * (mi + (mi = n)), DT += a * (gi + (gi = i)), RT += a * (vi + (vi = o)), _y(mi, gi, vi);
}
function f4() {
  Ko.point = xM;
}
function jGe() {
  Ko.point = zGe;
}
function GGe() {
  _Q(vQ, yQ), Ko.point = xM;
}
function zGe(e12, t) {
  vQ = e12, yQ = t, e12 *= mt, t *= mt, Ko.point = _Q;
  var r = st(t);
  mi = r * st(e12), gi = r * et(e12), vi = et(t), _y(mi, gi, vi);
}
function _Q(e12, t) {
  e12 *= mt, t *= mt;
  var r = st(t), n = r * st(e12), i = r * et(e12), o = et(t), a = gi * o - vi * i, s = vi * n - mi * o, l = mi * i - gi * n, u = Rx(a, s, l), c = Si(u), f = u && -c / u;
  $x.add(f * a), Hx.add(f * s), Ux.add(f * l), IT += c, kT += c * (mi + (mi = n)), DT += c * (gi + (gi = i)), RT += c * (vi + (vi = o)), _y(mi, gi, vi);
}
function VGe(e12) {
  Fm = IT = PT = CT = xT = kT = DT = RT = 0, $x = new gn(), Hx = new gn(), Ux = new gn(), Xo(e12, Ko);
  var t = +$x, r = +Hx, n = +Ux, i = Rx(t, r, n);
  return i < Tv && (t = kT, r = DT, n = RT, IT < ht && (t = PT, r = CT, n = xT), i = Rx(t, r, n), i < Tv) ? [NaN, NaN] : [Ei(r, t) * Sr, Si(n / i) * Sr];
}
function Hh(e12) {
  return function() {
    return e12;
  };
}
function jx(e12, t) {
  function r(n, i) {
    return n = e12(n, i), t(n[0], n[1]);
  }
  return e12.invert && t.invert && (r.invert = function(n, i) {
    return n = t.invert(n, i), n && e12.invert(n[0], n[1]);
  }), r;
}
function Gx(e12, t) {
  return [rr(e12) > Bt ? e12 + Math.round(-e12 / Ti) * Ti : e12, t];
}
Gx.invert = Gx;
function kM(e12, t, r) {
  return (e12 %= Ti) ? t || r ? jx(p4(e12), m4(t, r)) : p4(e12) : t || r ? m4(t, r) : Gx;
}
function d4(e12) {
  return function(t, r) {
    return t += e12, [t > Bt ? t - Ti : t < -Bt ? t + Ti : t, r];
  };
}
function p4(e12) {
  var t = d4(e12);
  return t.invert = d4(-e12), t;
}
function m4(e12, t) {
  var r = st(e12), n = et(e12), i = st(t), o = et(t);
  function a(s, l) {
    var u = st(l), c = st(s) * u, f = et(s) * u, h = et(l), d = h * r + c * n;
    return [Ei(f * i - d * o, c * r - h * n), Si(d * i + f * o)];
  }
  return a.invert = function(s, l) {
    var u = st(l), c = st(s) * u, f = et(s) * u, h = et(l), d = h * i - f * o;
    return [Ei(f * i + h * o, c * r + d * n), Si(d * r - c * n)];
  }, a;
}
function bQ(e12) {
  e12 = kM(e12[0] * mt, e12[1] * mt, e12.length > 2 ? e12[2] * mt : 0);
  function t(r) {
    return r = e12(r[0] * mt, r[1] * mt), r[0] *= Sr, r[1] *= Sr, r;
  }
  return t.invert = function(r) {
    return r = e12.invert(r[0] * mt, r[1] * mt), r[0] *= Sr, r[1] *= Sr, r;
  }, t;
}
function TQ(e12, t, r, n, i, o) {
  if (r) {
    var a = st(t), s = et(t), l = n * r;
    i == null ? (i = t + n * Ti, o = t - l / 2) : (i = g4(a, i), o = g4(a, o), (n > 0 ? i < o : i > o) && (i += n * Ti));
    for (var u, c = i; n > 0 ? c > o : c < o; c -= l)
      u = AT([a, -s * st(c), -s * et(c)]), e12.point(u[0], u[1]);
  }
}
function g4(e12, t) {
  t = ju(t), t[0] -= e12, OT(t);
  var r = cQ(-t[1]);
  return ((-t[2] < 0 ? -r : r) + Ti - ht) % Ti;
}
function XGe() {
  var e12 = Hh([0, 0]), t = Hh(90), r = Hh(6), n, i, o = {
    point: a
  };
  function a(l, u) {
    n.push(l = i(l, u)), l[0] *= Sr, l[1] *= Sr;
  }
  function s() {
    var l = e12.apply(this, arguments), u = t.apply(this, arguments) * mt, c = r.apply(this, arguments) * mt;
    return n = [], i = kM(-l[0] * mt, -l[1] * mt, 0).invert, TQ(o, u, c, 1), l = {
      type: "Polygon",
      coordinates: [n]
    }, n = i = null, l;
  }
  return s.center = function(l) {
    return arguments.length ? (e12 = typeof l == "function" ? l : Hh([+l[0], +l[1]]), s) : e12;
  }, s.radius = function(l) {
    return arguments.length ? (t = typeof l == "function" ? l : Hh(+l), s) : t;
  }, s.precision = function(l) {
    return arguments.length ? (r = typeof l == "function" ? l : Hh(+l), s) : r;
  }, s;
}
function EQ() {
  var e12 = [], t;
  return {
    point: function(r, n, i) {
      t.push([r, n, i]);
    },
    lineStart: function() {
      e12.push(t = []);
    },
    lineEnd: zr,
    rejoin: function() {
      e12.length > 1 && e12.push(e12.pop().concat(e12.shift()));
    },
    result: function() {
      var r = e12;
      return e12 = [], t = null, r;
    }
  };
}
function Hb(e12, t) {
  return rr(e12[0] - t[0]) < ht && rr(e12[1] - t[1]) < ht;
}
function $_(e12, t, r, n) {
  this.x = e12, this.z = t, this.o = r, this.e = n, this.v = false, this.n = this.p = null;
}
function SQ(e12, t, r, n, i) {
  var o = [], a = [], s, l;
  if (e12.forEach(function(p) {
    if (!((m = p.length - 1) <= 0)) {
      var m, g = p[0], v = p[m], _;
      if (Hb(g, v)) {
        if (!g[2] && !v[2]) {
          for (i.lineStart(), s = 0; s < m; ++s)
            i.point((g = p[s])[0], g[1]);
          i.lineEnd();
          return;
        }
        v[0] += 2 * ht;
      }
      o.push(_ = new $_(g, p, null, true)), a.push(_.o = new $_(g, null, _, false)), o.push(_ = new $_(v, p, null, false)), a.push(_.o = new $_(v, null, _, true));
    }
  }), !!o.length) {
    for (a.sort(t), v4(o), v4(a), s = 0, l = a.length; s < l; ++s)
      a[s].e = r = !r;
    for (var u = o[0], c, f; ; ) {
      for (var h = u, d = true; h.v; )
        if ((h = h.n) === u)
          return;
      c = h.z, i.lineStart();
      do {
        if (h.v = h.o.v = true, h.e) {
          if (d)
            for (s = 0, l = c.length; s < l; ++s)
              i.point((f = c[s])[0], f[1]);
          else
            n(h.x, h.n.x, 1, i);
          h = h.n;
        } else {
          if (d)
            for (c = h.p.z, s = c.length - 1; s >= 0; --s)
              i.point((f = c[s])[0], f[1]);
          else
            n(h.x, h.p.x, -1, i);
          h = h.p;
        }
        h = h.o, c = h.z, d = !d;
      } while (!h.v);
      i.lineEnd();
    }
  }
}
function v4(e12) {
  if (t = e12.length) {
    for (var t, r = 0, n = e12[0], i; ++r < t; )
      n.n = i = e12[r], i.p = n, n = i;
    n.n = i = e12[0], i.p = n;
  }
}
function MO(e12) {
  return rr(e12[0]) <= Bt ? e12[0] : Oo(e12[0]) * ((rr(e12[0]) + Bt) % Ti - Bt);
}
function wQ(e12, t) {
  var r = MO(t), n = t[1], i = et(n), o = [et(r), -st(r), 0], a = 0, s = 0, l = new gn();
  i === 1 ? n = Yr + ht : i === -1 && (n = -Yr - ht);
  for (var u = 0, c = e12.length; u < c; ++u)
    if (h = (f = e12[u]).length)
      for (var f, h, d = f[h - 1], p = MO(d), m = d[1] / 2 + bT, g = et(m), v = st(m), _ = 0; _ < h; ++_, p = b, g = E, v = P, d = y) {
        var y = f[_], b = MO(y), T = y[1] / 2 + bT, E = et(T), P = st(T), A = b - p, I = A >= 0 ? 1 : -1, x = I * A, S = x > Bt, N = g * E;
        if (l.add(Ei(N * I * et(x), v * P + N * st(x))), a += S ? A + I * Ti : A, S ^ p >= r ^ b >= r) {
          var B = jd(ju(d), ju(y));
          OT(B);
          var w = jd(o, B);
          OT(w);
          var R = (S ^ A >= 0 ? -1 : 1) * Si(w[2]);
          (n > R || n === R && (B[0] || B[1])) && (s += S ^ A >= 0 ? 1 : -1);
        }
      }
  return (a < -ht || a < ht && l < -Tv) ^ s & 1;
}
function AQ(e12, t, r, n) {
  return function(i) {
    var o = t(i), a = EQ(), s = t(a), l = false, u, c, f, h = {
      point: d,
      lineStart: m,
      lineEnd: g,
      polygonStart: function() {
        h.point = v, h.lineStart = _, h.lineEnd = y, c = [], u = [];
      },
      polygonEnd: function() {
        h.point = d, h.lineStart = m, h.lineEnd = g, c = jD(c);
        var b = wQ(u, n);
        c.length ? (l || (i.polygonStart(), l = true), SQ(c, YGe, b, r, i)) : b && (l || (i.polygonStart(), l = true), i.lineStart(), r(null, null, 1, i), i.lineEnd()), l && (i.polygonEnd(), l = false), c = u = null;
      },
      sphere: function() {
        i.polygonStart(), i.lineStart(), r(null, null, 1, i), i.lineEnd(), i.polygonEnd();
      }
    };
    function d(b, T) {
      e12(b, T) && i.point(b, T);
    }
    function p(b, T) {
      o.point(b, T);
    }
    function m() {
      h.point = p, o.lineStart();
    }
    function g() {
      h.point = d, o.lineEnd();
    }
    function v(b, T) {
      f.push([b, T]), s.point(b, T);
    }
    function _() {
      s.lineStart(), f = [];
    }
    function y() {
      v(f[0][0], f[0][1]), s.lineEnd();
      var b = s.clean(), T = a.result(), E, P = T.length, A, I, x;
      if (f.pop(), u.push(f), f = null, !!P) {
        if (b & 1) {
          if (I = T[0], (A = I.length - 1) > 0) {
            for (l || (i.polygonStart(), l = true), i.lineStart(), E = 0; E < A; ++E)
              i.point((x = I[E])[0], x[1]);
            i.lineEnd();
          }
          return;
        }
        P > 1 && b & 2 && T.push(T.pop().concat(T.shift())), c.push(T.filter(WGe));
      }
    }
    return h;
  };
}
function WGe(e12) {
  return e12.length > 1;
}
function YGe(e12, t) {
  return ((e12 = e12.x)[0] < 0 ? e12[1] - Yr - ht : Yr - e12[1]) - ((t = t.x)[0] < 0 ? t[1] - Yr - ht : Yr - t[1]);
}
var zx = AQ(function() {
  return true;
}, qGe, ZGe, [-Bt, -Yr]);
function qGe(e12) {
  var t = NaN, r = NaN, n = NaN, i;
  return {
    lineStart: function() {
      e12.lineStart(), i = 1;
    },
    point: function(o, a) {
      var s = o > 0 ? Bt : -Bt, l = rr(o - t);
      rr(l - Bt) < ht ? (e12.point(t, r = (r + a) / 2 > 0 ? Yr : -Yr), e12.point(n, r), e12.lineEnd(), e12.lineStart(), e12.point(s, r), e12.point(o, r), i = 0) : n !== s && l >= Bt && (rr(t - n) < ht && (t -= n * ht), rr(o - s) < ht && (o -= s * ht), r = KGe(t, r, o, a), e12.point(n, r), e12.lineEnd(), e12.lineStart(), e12.point(s, r), i = 0), e12.point(t = o, r = a), n = s;
    },
    lineEnd: function() {
      e12.lineEnd(), t = r = NaN;
    },
    clean: function() {
      return 2 - i;
    }
  };
}
function KGe(e12, t, r, n) {
  var i, o, a = et(e12 - r);
  return rr(a) > ht ? Op((et(t) * (o = st(n)) * et(r) - et(n) * (i = st(t)) * et(e12)) / (i * o * a)) : (t + n) / 2;
}
function ZGe(e12, t, r, n) {
  var i;
  if (e12 == null)
    i = r * Yr, n.point(-Bt, i), n.point(0, i), n.point(Bt, i), n.point(Bt, 0), n.point(Bt, -i), n.point(0, -i), n.point(-Bt, -i), n.point(-Bt, 0), n.point(-Bt, i);
  else if (rr(e12[0] - t[0]) > ht) {
    var o = e12[0] < t[0] ? Bt : -Bt;
    i = r * o / 2, n.point(-o, i), n.point(0, i), n.point(o, i);
  } else
    n.point(t[0], t[1]);
}
function OQ(e12) {
  var t = st(e12), r = 6 * mt, n = t > 0, i = rr(t) > ht;
  function o(c, f, h, d) {
    TQ(d, e12, r, h, c, f);
  }
  function a(c, f) {
    return st(c) * st(f) > t;
  }
  function s(c) {
    var f, h, d, p, m;
    return {
      lineStart: function() {
        p = d = false, m = 1;
      },
      point: function(g, v) {
        var _ = [g, v], y, b = a(g, v), T = n ? b ? 0 : u(g, v) : b ? u(g + (g < 0 ? Bt : -Bt), v) : 0;
        if (!f && (p = d = b) && c.lineStart(), b !== d && (y = l(f, _), (!y || Hb(f, y) || Hb(_, y)) && (_[2] = 1)), b !== d)
          m = 0, b ? (c.lineStart(), y = l(_, f), c.point(y[0], y[1])) : (y = l(f, _), c.point(y[0], y[1], 2), c.lineEnd()), f = y;
        else if (i && f && n ^ b) {
          var E;
          !(T & h) && (E = l(_, f, true)) && (m = 0, n ? (c.lineStart(), c.point(E[0][0], E[0][1]), c.point(E[1][0], E[1][1]), c.lineEnd()) : (c.point(E[1][0], E[1][1]), c.lineEnd(), c.lineStart(), c.point(E[0][0], E[0][1], 3)));
        }
        b && (!f || !Hb(f, _)) && c.point(_[0], _[1]), f = _, d = b, h = T;
      },
      lineEnd: function() {
        d && c.lineEnd(), f = null;
      },
      // Rejoin first and last segments if there were intersections and the first
      // and last points were visible.
      clean: function() {
        return m | (p && d) << 1;
      }
    };
  }
  function l(c, f, h) {
    var d = ju(c), p = ju(f), m = [1, 0, 0], g = jd(d, p), v = B_(g, g), _ = g[0], y = v - _ * _;
    if (!y)
      return !h && c;
    var b = t * v / y, T = -t * _ / y, E = jd(m, g), P = F_(m, b), A = F_(g, T);
    NO(P, A);
    var I = E, x = B_(P, I), S = B_(I, I), N = x * x - S * (B_(P, P) - 1);
    if (!(N < 0)) {
      var B = Pn(N), w = F_(I, (-x - B) / S);
      if (NO(w, P), w = AT(w), !h)
        return w;
      var R = c[0], F = f[0], $ = c[1], K = f[1], se;
      F < R && (se = R, R = F, F = se);
      var J = F - R, me = rr(J - Bt) < ht, ae = me || J < ht;
      if (!me && K < $ && (se = $, $ = K, K = se), ae ? me ? $ + K > 0 ^ w[1] < (rr(w[0] - R) < ht ? $ : K) : $ <= w[1] && w[1] <= K : J > Bt ^ (R <= w[0] && w[0] <= F)) {
        var Y = F_(I, (-x + B) / S);
        return NO(Y, P), [w, AT(Y)];
      }
    }
  }
  function u(c, f) {
    var h = n ? e12 : Bt - e12, d = 0;
    return c < -h ? d |= 1 : c > h && (d |= 2), f < -h ? d |= 4 : f > h && (d |= 8), d;
  }
  return AQ(a, s, o, n ? [0, -e12] : [-Bt, e12 - Bt]);
}
function QGe(e12, t, r, n, i, o) {
  var a = e12[0], s = e12[1], l = t[0], u = t[1], c = 0, f = 1, h = l - a, d = u - s, p;
  if (p = r - a, !(!h && p > 0)) {
    if (p /= h, h < 0) {
      if (p < c)
        return;
      p < f && (f = p);
    } else if (h > 0) {
      if (p > f)
        return;
      p > c && (c = p);
    }
    if (p = i - a, !(!h && p < 0)) {
      if (p /= h, h < 0) {
        if (p > f)
          return;
        p > c && (c = p);
      } else if (h > 0) {
        if (p < c)
          return;
        p < f && (f = p);
      }
      if (p = n - s, !(!d && p > 0)) {
        if (p /= d, d < 0) {
          if (p < c)
            return;
          p < f && (f = p);
        } else if (d > 0) {
          if (p > f)
            return;
          p > c && (c = p);
        }
        if (p = o - s, !(!d && p < 0)) {
          if (p /= d, d < 0) {
            if (p > f)
              return;
            p > c && (c = p);
          } else if (d > 0) {
            if (p < c)
              return;
            p < f && (f = p);
          }
          return c > 0 && (e12[0] = a + c * h, e12[1] = s + c * d), f < 1 && (t[0] = a + f * h, t[1] = s + f * d), true;
        }
      }
    }
  }
}
var $m = 1e9;
var H_ = -$m;
function OS(e12, t, r, n) {
  function i(u, c) {
    return e12 <= u && u <= r && t <= c && c <= n;
  }
  function o(u, c, f, h) {
    var d = 0, p = 0;
    if (u == null || (d = a(u, f)) !== (p = a(c, f)) || l(u, c) < 0 ^ f > 0)
      do
        h.point(d === 0 || d === 3 ? e12 : r, d > 1 ? n : t);
      while ((d = (d + f + 4) % 4) !== p);
    else
      h.point(c[0], c[1]);
  }
  function a(u, c) {
    return rr(u[0] - e12) < ht ? c > 0 ? 0 : 3 : rr(u[0] - r) < ht ? c > 0 ? 2 : 1 : rr(u[1] - t) < ht ? c > 0 ? 1 : 0 : c > 0 ? 3 : 2;
  }
  function s(u, c) {
    return l(u.x, c.x);
  }
  function l(u, c) {
    var f = a(u, 1), h = a(c, 1);
    return f !== h ? f - h : f === 0 ? c[1] - u[1] : f === 1 ? u[0] - c[0] : f === 2 ? u[1] - c[1] : c[0] - u[0];
  }
  return function(u) {
    var c = u, f = EQ(), h, d, p, m, g, v, _, y, b, T, E, P = {
      point: A,
      lineStart: N,
      lineEnd: B,
      polygonStart: x,
      polygonEnd: S
    };
    function A(R, F) {
      i(R, F) && c.point(R, F);
    }
    function I() {
      for (var R = 0, F = 0, $ = d.length; F < $; ++F)
        for (var K = d[F], se = 1, J = K.length, me = K[0], ae, Y, Q = me[0], le = me[1]; se < J; ++se)
          ae = Q, Y = le, me = K[se], Q = me[0], le = me[1], Y <= n ? le > n && (Q - ae) * (n - Y) > (le - Y) * (e12 - ae) && ++R : le <= n && (Q - ae) * (n - Y) < (le - Y) * (e12 - ae) && --R;
      return R;
    }
    function x() {
      c = f, h = [], d = [], E = true;
    }
    function S() {
      var R = I(), F = E && R, $ = (h = jD(h)).length;
      (F || $) && (u.polygonStart(), F && (u.lineStart(), o(null, null, 1, u), u.lineEnd()), $ && SQ(h, s, R, o, u), u.polygonEnd()), c = u, h = d = p = null;
    }
    function N() {
      P.point = w, d && d.push(p = []), T = true, b = false, _ = y = NaN;
    }
    function B() {
      h && (w(m, g), v && b && f.rejoin(), h.push(f.result())), P.point = A, b && c.lineEnd();
    }
    function w(R, F) {
      var $ = i(R, F);
      if (d && p.push([R, F]), T)
        m = R, g = F, v = $, T = false, $ && (c.lineStart(), c.point(R, F));
      else if ($ && b)
        c.point(R, F);
      else {
        var K = [_ = Math.max(H_, Math.min($m, _)), y = Math.max(H_, Math.min($m, y))], se = [R = Math.max(H_, Math.min($m, R)), F = Math.max(H_, Math.min($m, F))];
        QGe(K, se, e12, t, r, n) ? (b || (c.lineStart(), c.point(K[0], K[1])), c.point(se[0], se[1]), $ || c.lineEnd(), E = false) : $ && (c.lineStart(), c.point(R, F), E = false);
      }
      _ = R, y = F, b = $;
    }
    return P;
  };
}
function JGe() {
  var e12 = 0, t = 0, r = 960, n = 500, i, o, a;
  return a = {
    stream: function(s) {
      return i && o === s ? i : i = OS(e12, t, r, n)(o = s);
    },
    extent: function(s) {
      return arguments.length ? (e12 = +s[0][0], t = +s[0][1], r = +s[1][0], n = +s[1][1], i = o = null, a) : [[e12, t], [r, n]];
    }
  };
}
var Vx;
var Xx;
var Ub;
var jb;
var Gd = {
  sphere: zr,
  point: zr,
  lineStart: eze,
  lineEnd: zr,
  polygonStart: zr,
  polygonEnd: zr
};
function eze() {
  Gd.point = rze, Gd.lineEnd = tze;
}
function tze() {
  Gd.point = Gd.lineEnd = zr;
}
function rze(e12, t) {
  e12 *= mt, t *= mt, Xx = e12, Ub = et(t), jb = st(t), Gd.point = nze;
}
function nze(e12, t) {
  e12 *= mt, t *= mt;
  var r = et(t), n = st(t), i = rr(e12 - Xx), o = st(i), a = et(i), s = n * a, l = jb * r - Ub * n * o, u = Ub * r + jb * n * o;
  Vx.add(Ei(Pn(s * s + l * l), u)), Xx = e12, Ub = r, jb = n;
}
function IQ(e12) {
  return Vx = new gn(), Xo(e12, Gd), +Vx;
}
var Wx = [null, null];
var ize = {
  type: "LineString",
  coordinates: Wx
};
function NT(e12, t) {
  return Wx[0] = e12, Wx[1] = t, IQ(ize);
}
var y4 = {
  Feature: function(e12, t) {
    return MT(e12.geometry, t);
  },
  FeatureCollection: function(e12, t) {
    for (var r = e12.features, n = -1, i = r.length; ++n < i; )
      if (MT(r[n].geometry, t))
        return true;
    return false;
  }
};
var _4 = {
  Sphere: function() {
    return true;
  },
  Point: function(e12, t) {
    return b4(e12.coordinates, t);
  },
  MultiPoint: function(e12, t) {
    for (var r = e12.coordinates, n = -1, i = r.length; ++n < i; )
      if (b4(r[n], t))
        return true;
    return false;
  },
  LineString: function(e12, t) {
    return T4(e12.coordinates, t);
  },
  MultiLineString: function(e12, t) {
    for (var r = e12.coordinates, n = -1, i = r.length; ++n < i; )
      if (T4(r[n], t))
        return true;
    return false;
  },
  Polygon: function(e12, t) {
    return E4(e12.coordinates, t);
  },
  MultiPolygon: function(e12, t) {
    for (var r = e12.coordinates, n = -1, i = r.length; ++n < i; )
      if (E4(r[n], t))
        return true;
    return false;
  },
  GeometryCollection: function(e12, t) {
    for (var r = e12.geometries, n = -1, i = r.length; ++n < i; )
      if (MT(r[n], t))
        return true;
    return false;
  }
};
function MT(e12, t) {
  return e12 && _4.hasOwnProperty(e12.type) ? _4[e12.type](e12, t) : false;
}
function b4(e12, t) {
  return NT(e12, t) === 0;
}
function T4(e12, t) {
  for (var r, n, i, o = 0, a = e12.length; o < a; o++) {
    if (n = NT(e12[o], t), n === 0 || o > 0 && (i = NT(e12[o], e12[o - 1]), i > 0 && r <= i && n <= i && (r + n - i) * (1 - Math.pow((r - n) / i, 2)) < Tv * i))
      return true;
    r = n;
  }
  return false;
}
function E4(e12, t) {
  return !!wQ(e12.map(oze), PQ(t));
}
function oze(e12) {
  return e12 = e12.map(PQ), e12.pop(), e12;
}
function PQ(e12) {
  return [e12[0] * mt, e12[1] * mt];
}
function aze(e12, t) {
  return (e12 && y4.hasOwnProperty(e12.type) ? y4[e12.type] : MT)(e12, t);
}
function S4(e12, t, r) {
  var n = yi(e12, t - ht, r).concat(t);
  return function(i) {
    return n.map(function(o) {
      return [i, o];
    });
  };
}
function w4(e12, t, r) {
  var n = yi(e12, t - ht, r).concat(t);
  return function(i) {
    return n.map(function(o) {
      return [o, i];
    });
  };
}
function CQ() {
  var e12, t, r, n, i, o, a, s, l = 10, u = l, c = 90, f = 360, h, d, p, m, g = 2.5;
  function v() {
    return {
      type: "MultiLineString",
      coordinates: _()
    };
  }
  function _() {
    return yi(L_(n / c) * c, r, c).map(p).concat(yi(L_(s / f) * f, a, f).map(m)).concat(yi(L_(t / l) * l, e12, l).filter(function(y) {
      return rr(y % c) > ht;
    }).map(h)).concat(yi(L_(o / u) * u, i, u).filter(function(y) {
      return rr(y % f) > ht;
    }).map(d));
  }
  return v.lines = function() {
    return _().map(function(y) {
      return {
        type: "LineString",
        coordinates: y
      };
    });
  }, v.outline = function() {
    return {
      type: "Polygon",
      coordinates: [p(n).concat(m(a).slice(1), p(r).reverse().slice(1), m(s).reverse().slice(1))]
    };
  }, v.extent = function(y) {
    return arguments.length ? v.extentMajor(y).extentMinor(y) : v.extentMinor();
  }, v.extentMajor = function(y) {
    return arguments.length ? (n = +y[0][0], r = +y[1][0], s = +y[0][1], a = +y[1][1], n > r && (y = n, n = r, r = y), s > a && (y = s, s = a, a = y), v.precision(g)) : [[n, s], [r, a]];
  }, v.extentMinor = function(y) {
    return arguments.length ? (t = +y[0][0], e12 = +y[1][0], o = +y[0][1], i = +y[1][1], t > e12 && (y = t, t = e12, e12 = y), o > i && (y = o, o = i, i = y), v.precision(g)) : [[t, o], [e12, i]];
  }, v.step = function(y) {
    return arguments.length ? v.stepMajor(y).stepMinor(y) : v.stepMinor();
  }, v.stepMajor = function(y) {
    return arguments.length ? (c = +y[0], f = +y[1], v) : [c, f];
  }, v.stepMinor = function(y) {
    return arguments.length ? (l = +y[0], u = +y[1], v) : [l, u];
  }, v.precision = function(y) {
    return arguments.length ? (g = +y, h = S4(o, i, 90), d = w4(t, e12, g), p = S4(s, a, 90), m = w4(n, r, g), v) : g;
  }, v.extentMajor([[-180, -90 + ht], [180, 90 - ht]]).extentMinor([[-180, -80 - ht], [180, 80 + ht]]);
}
function sze() {
  return CQ()();
}
function lze(e12, t) {
  var r = e12[0] * mt, n = e12[1] * mt, i = t[0] * mt, o = t[1] * mt, a = st(n), s = et(n), l = st(o), u = et(o), c = a * st(r), f = a * et(r), h = l * st(i), d = l * et(i), p = 2 * Si(Pn(i4(o - n) + a * l * i4(i - r))), m = et(p), g = p ? function(v) {
    var _ = et(v *= p) / m, y = et(p - v) / m, b = y * c + _ * h, T = y * f + _ * d, E = y * s + _ * u;
    return [Ei(T, b) * Sr, Ei(E, Pn(b * b + T * T)) * Sr];
  } : function() {
    return [r * Sr, n * Sr];
  };
  return g.distance = p, g;
}
var Ev = (e12) => e12;
var LO = new gn();
var Yx = new gn();
var xQ;
var kQ;
var qx;
var Kx;
var Dl = {
  point: zr,
  lineStart: zr,
  lineEnd: zr,
  polygonStart: function() {
    Dl.lineStart = cze, Dl.lineEnd = hze;
  },
  polygonEnd: function() {
    Dl.lineStart = Dl.lineEnd = Dl.point = zr, LO.add(rr(Yx)), Yx = new gn();
  },
  result: function() {
    var e12 = LO / 2;
    return LO = new gn(), e12;
  }
};
function cze() {
  Dl.point = uze;
}
function uze(e12, t) {
  Dl.point = DQ, xQ = qx = e12, kQ = Kx = t;
}
function DQ(e12, t) {
  Yx.add(Kx * e12 - qx * t), qx = e12, Kx = t;
}
function hze() {
  DQ(xQ, kQ);
}
var A4 = Dl;
var zd = 1 / 0;
var LT = zd;
var Sv = -zd;
var BT = Sv;
var fze = {
  point: dze,
  lineStart: zr,
  lineEnd: zr,
  polygonStart: zr,
  polygonEnd: zr,
  result: function() {
    var e12 = [[zd, LT], [Sv, BT]];
    return Sv = BT = -(LT = zd = 1 / 0), e12;
  }
};
function dze(e12, t) {
  e12 < zd && (zd = e12), e12 > Sv && (Sv = e12), t < LT && (LT = t), t > BT && (BT = t);
}
var FT = fze;
var Zx = 0;
var Qx = 0;
var Hm = 0;
var $T = 0;
var HT = 0;
var bf = 0;
var Jx = 0;
var ek = 0;
var Um = 0;
var RQ;
var NQ;
var ka;
var Da;
var Wo = {
  point: Gu,
  lineStart: O4,
  lineEnd: I4,
  polygonStart: function() {
    Wo.lineStart = gze, Wo.lineEnd = vze;
  },
  polygonEnd: function() {
    Wo.point = Gu, Wo.lineStart = O4, Wo.lineEnd = I4;
  },
  result: function() {
    var e12 = Um ? [Jx / Um, ek / Um] : bf ? [$T / bf, HT / bf] : Hm ? [Zx / Hm, Qx / Hm] : [NaN, NaN];
    return Zx = Qx = Hm = $T = HT = bf = Jx = ek = Um = 0, e12;
  }
};
function Gu(e12, t) {
  Zx += e12, Qx += t, ++Hm;
}
function O4() {
  Wo.point = pze;
}
function pze(e12, t) {
  Wo.point = mze, Gu(ka = e12, Da = t);
}
function mze(e12, t) {
  var r = e12 - ka, n = t - Da, i = Pn(r * r + n * n);
  $T += i * (ka + e12) / 2, HT += i * (Da + t) / 2, bf += i, Gu(ka = e12, Da = t);
}
function I4() {
  Wo.point = Gu;
}
function gze() {
  Wo.point = yze;
}
function vze() {
  MQ(RQ, NQ);
}
function yze(e12, t) {
  Wo.point = MQ, Gu(RQ = ka = e12, NQ = Da = t);
}
function MQ(e12, t) {
  var r = e12 - ka, n = t - Da, i = Pn(r * r + n * n);
  $T += i * (ka + e12) / 2, HT += i * (Da + t) / 2, bf += i, i = Da * e12 - ka * t, Jx += i * (ka + e12), ek += i * (Da + t), Um += i * 3, Gu(ka = e12, Da = t);
}
var P4 = Wo;
function LQ(e12) {
  this._context = e12;
}
LQ.prototype = {
  _radius: 4.5,
  pointRadius: function(e12) {
    return this._radius = e12, this;
  },
  polygonStart: function() {
    this._line = 0;
  },
  polygonEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._point = 0;
  },
  lineEnd: function() {
    this._line === 0 && this._context.closePath(), this._point = NaN;
  },
  point: function(e12, t) {
    switch (this._point) {
      case 0: {
        this._context.moveTo(e12, t), this._point = 1;
        break;
      }
      case 1: {
        this._context.lineTo(e12, t);
        break;
      }
      default: {
        this._context.moveTo(e12 + this._radius, t), this._context.arc(e12, t, this._radius, 0, Ti);
        break;
      }
    }
  },
  result: zr
};
var tk = new gn();
var BO;
var BQ;
var FQ;
var jm;
var Gm;
var UT = {
  point: zr,
  lineStart: function() {
    UT.point = _ze;
  },
  lineEnd: function() {
    BO && $Q(BQ, FQ), UT.point = zr;
  },
  polygonStart: function() {
    BO = true;
  },
  polygonEnd: function() {
    BO = null;
  },
  result: function() {
    var e12 = +tk;
    return tk = new gn(), e12;
  }
};
function _ze(e12, t) {
  UT.point = $Q, BQ = jm = e12, FQ = Gm = t;
}
function $Q(e12, t) {
  jm -= e12, Gm -= t, tk.add(Pn(jm * jm + Gm * Gm)), jm = e12, Gm = t;
}
var C4 = UT;
function HQ() {
  this._string = [];
}
HQ.prototype = {
  _radius: 4.5,
  _circle: x4(4.5),
  pointRadius: function(e12) {
    return (e12 = +e12) !== this._radius && (this._radius = e12, this._circle = null), this;
  },
  polygonStart: function() {
    this._line = 0;
  },
  polygonEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._point = 0;
  },
  lineEnd: function() {
    this._line === 0 && this._string.push("Z"), this._point = NaN;
  },
  point: function(e12, t) {
    switch (this._point) {
      case 0: {
        this._string.push("M", e12, ",", t), this._point = 1;
        break;
      }
      case 1: {
        this._string.push("L", e12, ",", t);
        break;
      }
      default: {
        this._circle == null && (this._circle = x4(this._radius)), this._string.push("M", e12, ",", t, this._circle);
        break;
      }
    }
  },
  result: function() {
    if (this._string.length) {
      var e12 = this._string.join("");
      return this._string = [], e12;
    } else
      return null;
  }
};
function x4(e12) {
  return "m0," + e12 + "a" + e12 + "," + e12 + " 0 1,1 0," + -2 * e12 + "a" + e12 + "," + e12 + " 0 1,1 0," + 2 * e12 + "z";
}
function bze(e12, t) {
  var r = 4.5, n, i;
  function o(a) {
    return a && (typeof r == "function" && i.pointRadius(+r.apply(this, arguments)), Xo(a, n(i))), i.result();
  }
  return o.area = function(a) {
    return Xo(a, n(A4)), A4.result();
  }, o.measure = function(a) {
    return Xo(a, n(C4)), C4.result();
  }, o.bounds = function(a) {
    return Xo(a, n(FT)), FT.result();
  }, o.centroid = function(a) {
    return Xo(a, n(P4)), P4.result();
  }, o.projection = function(a) {
    return arguments.length ? (n = a == null ? (e12 = null, Ev) : (e12 = a).stream, o) : e12;
  }, o.context = function(a) {
    return arguments.length ? (i = a == null ? (t = null, new HQ()) : new LQ(t = a), typeof r != "function" && i.pointRadius(r), o) : t;
  }, o.pointRadius = function(a) {
    return arguments.length ? (r = typeof a == "function" ? a : (i.pointRadius(+a), +a), o) : r;
  }, o.projection(e12).context(t);
}
function Tze(e12) {
  return {
    stream: by(e12)
  };
}
function by(e12) {
  return function(t) {
    var r = new rk();
    for (var n in e12)
      r[n] = e12[n];
    return r.stream = t, r;
  };
}
function rk() {
}
rk.prototype = {
  constructor: rk,
  point: function(e12, t) {
    this.stream.point(e12, t);
  },
  sphere: function() {
    this.stream.sphere();
  },
  lineStart: function() {
    this.stream.lineStart();
  },
  lineEnd: function() {
    this.stream.lineEnd();
  },
  polygonStart: function() {
    this.stream.polygonStart();
  },
  polygonEnd: function() {
    this.stream.polygonEnd();
  }
};
function DM(e12, t, r) {
  var n = e12.clipExtent && e12.clipExtent();
  return e12.scale(150).translate([0, 0]), n != null && e12.clipExtent(null), Xo(r, e12.stream(FT)), t(FT.result()), n != null && e12.clipExtent(n), e12;
}
function IS(e12, t, r) {
  return DM(e12, function(n) {
    var i = t[1][0] - t[0][0], o = t[1][1] - t[0][1], a = Math.min(i / (n[1][0] - n[0][0]), o / (n[1][1] - n[0][1])), s = +t[0][0] + (i - a * (n[1][0] + n[0][0])) / 2, l = +t[0][1] + (o - a * (n[1][1] + n[0][1])) / 2;
    e12.scale(150 * a).translate([s, l]);
  }, r);
}
function RM(e12, t, r) {
  return IS(e12, [[0, 0], t], r);
}
function NM(e12, t, r) {
  return DM(e12, function(n) {
    var i = +t, o = i / (n[1][0] - n[0][0]), a = (i - o * (n[1][0] + n[0][0])) / 2, s = -o * n[0][1];
    e12.scale(150 * o).translate([a, s]);
  }, r);
}
function MM(e12, t, r) {
  return DM(e12, function(n) {
    var i = +t, o = i / (n[1][1] - n[0][1]), a = -o * n[0][0], s = (i - o * (n[1][1] + n[0][1])) / 2;
    e12.scale(150 * o).translate([a, s]);
  }, r);
}
var k4 = 16;
var Eze = st(30 * mt);
function D4(e12, t) {
  return +t ? wze(e12, t) : Sze(e12);
}
function Sze(e12) {
  return by({
    point: function(t, r) {
      t = e12(t, r), this.stream.point(t[0], t[1]);
    }
  });
}
function wze(e12, t) {
  function r(n, i, o, a, s, l, u, c, f, h, d, p, m, g) {
    var v = u - n, _ = c - i, y = v * v + _ * _;
    if (y > 4 * t && m--) {
      var b = a + h, T = s + d, E = l + p, P = Pn(b * b + T * T + E * E), A = Si(E /= P), I = rr(rr(E) - 1) < ht || rr(o - f) < ht ? (o + f) / 2 : Ei(T, b), x = e12(I, A), S = x[0], N = x[1], B = S - n, w = N - i, R = _ * B - v * w;
      (R * R / y > t || rr((v * B + _ * w) / y - 0.5) > 0.3 || a * h + s * d + l * p < Eze) && (r(n, i, o, a, s, l, S, N, I, b /= P, T /= P, E, m, g), g.point(S, N), r(S, N, I, b, T, E, u, c, f, h, d, p, m, g));
    }
  }
  return function(n) {
    var i, o, a, s, l, u, c, f, h, d, p, m, g = {
      point: v,
      lineStart: _,
      lineEnd: b,
      polygonStart: function() {
        n.polygonStart(), g.lineStart = T;
      },
      polygonEnd: function() {
        n.polygonEnd(), g.lineStart = _;
      }
    };
    function v(A, I) {
      A = e12(A, I), n.point(A[0], A[1]);
    }
    function _() {
      f = NaN, g.point = y, n.lineStart();
    }
    function y(A, I) {
      var x = ju([A, I]), S = e12(A, I);
      r(f, h, c, d, p, m, f = S[0], h = S[1], c = A, d = x[0], p = x[1], m = x[2], k4, n), n.point(f, h);
    }
    function b() {
      g.point = v, n.lineEnd();
    }
    function T() {
      _(), g.point = E, g.lineEnd = P;
    }
    function E(A, I) {
      y(i = A, I), o = f, a = h, s = d, l = p, u = m, g.point = y;
    }
    function P() {
      r(f, h, c, d, p, m, o, a, i, s, l, u, k4, n), g.lineEnd = b, b();
    }
    return g;
  };
}
var Aze = by({
  point: function(e12, t) {
    this.stream.point(e12 * mt, t * mt);
  }
});
function Oze(e12) {
  return by({
    point: function(t, r) {
      var n = e12(t, r);
      return this.stream.point(n[0], n[1]);
    }
  });
}
function Ize(e12, t, r, n, i) {
  function o(a, s) {
    return a *= n, s *= i, [t + e12 * a, r - e12 * s];
  }
  return o.invert = function(a, s) {
    return [(a - t) / e12 * n, (r - s) / e12 * i];
  }, o;
}
function R4(e12, t, r, n, i, o) {
  if (!o)
    return Ize(e12, t, r, n, i);
  var a = st(o), s = et(o), l = a * e12, u = s * e12, c = a / e12, f = s / e12, h = (s * r - a * t) / e12, d = (s * t + a * r) / e12;
  function p(m, g) {
    return m *= n, g *= i, [l * m - u * g + t, r - u * m - l * g];
  }
  return p.invert = function(m, g) {
    return [n * (c * m - f * g + h), i * (d - f * m - c * g)];
  }, p;
}
function es(e12) {
  return LM(function() {
    return e12;
  })();
}
function LM(e12) {
  var t, r = 150, n = 480, i = 250, o = 0, a = 0, s = 0, l = 0, u = 0, c, f = 0, h = 1, d = 1, p = null, m = zx, g = null, v, _, y, b = Ev, T = 0.5, E, P, A, I, x;
  function S(R) {
    return A(R[0] * mt, R[1] * mt);
  }
  function N(R) {
    return R = A.invert(R[0], R[1]), R && [R[0] * Sr, R[1] * Sr];
  }
  S.stream = function(R) {
    return I && x === R ? I : I = Aze(Oze(c)(m(E(b(x = R)))));
  }, S.preclip = function(R) {
    return arguments.length ? (m = R, p = void 0, w()) : m;
  }, S.postclip = function(R) {
    return arguments.length ? (b = R, g = v = _ = y = null, w()) : b;
  }, S.clipAngle = function(R) {
    return arguments.length ? (m = +R ? OQ(p = R * mt) : (p = null, zx), w()) : p * Sr;
  }, S.clipExtent = function(R) {
    return arguments.length ? (b = R == null ? (g = v = _ = y = null, Ev) : OS(g = +R[0][0], v = +R[0][1], _ = +R[1][0], y = +R[1][1]), w()) : g == null ? null : [[g, v], [_, y]];
  }, S.scale = function(R) {
    return arguments.length ? (r = +R, B()) : r;
  }, S.translate = function(R) {
    return arguments.length ? (n = +R[0], i = +R[1], B()) : [n, i];
  }, S.center = function(R) {
    return arguments.length ? (o = R[0] % 360 * mt, a = R[1] % 360 * mt, B()) : [o * Sr, a * Sr];
  }, S.rotate = function(R) {
    return arguments.length ? (s = R[0] % 360 * mt, l = R[1] % 360 * mt, u = R.length > 2 ? R[2] % 360 * mt : 0, B()) : [s * Sr, l * Sr, u * Sr];
  }, S.angle = function(R) {
    return arguments.length ? (f = R % 360 * mt, B()) : f * Sr;
  }, S.reflectX = function(R) {
    return arguments.length ? (h = R ? -1 : 1, B()) : h < 0;
  }, S.reflectY = function(R) {
    return arguments.length ? (d = R ? -1 : 1, B()) : d < 0;
  }, S.precision = function(R) {
    return arguments.length ? (E = D4(P, T = R * R), w()) : Pn(T);
  }, S.fitExtent = function(R, F) {
    return IS(S, R, F);
  }, S.fitSize = function(R, F) {
    return RM(S, R, F);
  }, S.fitWidth = function(R, F) {
    return NM(S, R, F);
  }, S.fitHeight = function(R, F) {
    return MM(S, R, F);
  };
  function B() {
    var R = R4(r, 0, 0, h, d, f).apply(null, t(o, a)), F = R4(r, n - R[0], i - R[1], h, d, f);
    return c = kM(s, l, u), P = jx(t, F), A = jx(c, P), E = D4(P, T), w();
  }
  function w() {
    return I = x = null, S;
  }
  return function() {
    return t = e12.apply(this, arguments), S.invert = t.invert && N, B();
  };
}
function BM(e12) {
  var t = 0, r = Bt / 3, n = LM(e12), i = n(t, r);
  return i.parallels = function(o) {
    return arguments.length ? n(t = o[0] * mt, r = o[1] * mt) : [t * Sr, r * Sr];
  }, i;
}
function Pze(e12) {
  var t = st(e12);
  function r(n, i) {
    return [n * t, et(i) / t];
  }
  return r.invert = function(n, i) {
    return [n / t, Si(i * t)];
  }, r;
}
function UQ(e12, t) {
  var r = et(e12), n = (r + et(t)) / 2;
  if (rr(n) < ht)
    return Pze(e12);
  var i = 1 + r * (2 * n - r), o = Pn(i) / n;
  function a(s, l) {
    var u = Pn(i - 2 * n * et(l)) / n;
    return [u * et(s *= n), o - u * st(s)];
  }
  return a.invert = function(s, l) {
    var u = o - l, c = Ei(s, rr(u)) * Oo(u);
    return u * n < 0 && (c -= Bt * Oo(s) * Oo(u)), [c / n, Si((i - (s * s + u * u) * n * n) / (2 * n))];
  }, a;
}
function jT() {
  return BM(UQ).scale(155.424).center([0, 33.6442]);
}
function jQ() {
  return jT().parallels([29.5, 45.5]).scale(1070).translate([480, 250]).rotate([96, 0]).center([-0.6, 38.7]);
}
function Cze(e12) {
  var t = e12.length;
  return {
    point: function(r, n) {
      for (var i = -1; ++i < t; )
        e12[i].point(r, n);
    },
    sphere: function() {
      for (var r = -1; ++r < t; )
        e12[r].sphere();
    },
    lineStart: function() {
      for (var r = -1; ++r < t; )
        e12[r].lineStart();
    },
    lineEnd: function() {
      for (var r = -1; ++r < t; )
        e12[r].lineEnd();
    },
    polygonStart: function() {
      for (var r = -1; ++r < t; )
        e12[r].polygonStart();
    },
    polygonEnd: function() {
      for (var r = -1; ++r < t; )
        e12[r].polygonEnd();
    }
  };
}
function xze() {
  var e12, t, r = jQ(), n, i = jT().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]), o, a = jT().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]), s, l, u = {
    point: function(h, d) {
      l = [h, d];
    }
  };
  function c(h) {
    var d = h[0], p = h[1];
    return l = null, n.point(d, p), l || (o.point(d, p), l) || (s.point(d, p), l);
  }
  c.invert = function(h) {
    var d = r.scale(), p = r.translate(), m = (h[0] - p[0]) / d, g = (h[1] - p[1]) / d;
    return (g >= 0.12 && g < 0.234 && m >= -0.425 && m < -0.214 ? i : g >= 0.166 && g < 0.234 && m >= -0.214 && m < -0.115 ? a : r).invert(h);
  }, c.stream = function(h) {
    return e12 && t === h ? e12 : e12 = Cze([r.stream(t = h), i.stream(h), a.stream(h)]);
  }, c.precision = function(h) {
    return arguments.length ? (r.precision(h), i.precision(h), a.precision(h), f()) : r.precision();
  }, c.scale = function(h) {
    return arguments.length ? (r.scale(h), i.scale(h * 0.35), a.scale(h), c.translate(r.translate())) : r.scale();
  }, c.translate = function(h) {
    if (!arguments.length)
      return r.translate();
    var d = r.scale(), p = +h[0], m = +h[1];
    return n = r.translate(h).clipExtent([[p - 0.455 * d, m - 0.238 * d], [p + 0.455 * d, m + 0.238 * d]]).stream(u), o = i.translate([p - 0.307 * d, m + 0.201 * d]).clipExtent([[p - 0.425 * d + ht, m + 0.12 * d + ht], [p - 0.214 * d - ht, m + 0.234 * d - ht]]).stream(u), s = a.translate([p - 0.205 * d, m + 0.212 * d]).clipExtent([[p - 0.214 * d + ht, m + 0.166 * d + ht], [p - 0.115 * d - ht, m + 0.234 * d - ht]]).stream(u), f();
  }, c.fitExtent = function(h, d) {
    return IS(c, h, d);
  }, c.fitSize = function(h, d) {
    return RM(c, h, d);
  }, c.fitWidth = function(h, d) {
    return NM(c, h, d);
  }, c.fitHeight = function(h, d) {
    return MM(c, h, d);
  };
  function f() {
    return e12 = t = null, c;
  }
  return c.scale(1070);
}
function GQ(e12) {
  return function(t, r) {
    var n = st(t), i = st(r), o = e12(n * i);
    return o === 1 / 0 ? [2, 0] : [o * i * et(t), o * et(r)];
  };
}
function Ty(e12) {
  return function(t, r) {
    var n = Pn(t * t + r * r), i = e12(n), o = et(i), a = st(i);
    return [Ei(t * o, n * a), Si(n && r * o / n)];
  };
}
var FM = GQ(function(e12) {
  return Pn(2 / (1 + e12));
});
FM.invert = Ty(function(e12) {
  return 2 * Si(e12 / 2);
});
function kze() {
  return es(FM).scale(124.75).clipAngle(180 - 1e-3);
}
var $M = GQ(function(e12) {
  return (e12 = cQ(e12)) && e12 / et(e12);
});
$M.invert = Ty(function(e12) {
  return e12;
});
function Dze() {
  return es($M).scale(79.4188).clipAngle(180 - 1e-3);
}
function Ey(e12, t) {
  return [e12, TT(CM((Yr + t) / 2))];
}
Ey.invert = function(e12, t) {
  return [e12, 2 * Op(lQ(t)) - Yr];
};
function Rze() {
  return zQ(Ey).scale(961 / Ti);
}
function zQ(e12) {
  var t = es(e12), r = t.center, n = t.scale, i = t.translate, o = t.clipExtent, a = null, s, l, u;
  t.scale = function(f) {
    return arguments.length ? (n(f), c()) : n();
  }, t.translate = function(f) {
    return arguments.length ? (i(f), c()) : i();
  }, t.center = function(f) {
    return arguments.length ? (r(f), c()) : r();
  }, t.clipExtent = function(f) {
    return arguments.length ? (f == null ? a = s = l = u = null : (a = +f[0][0], s = +f[0][1], l = +f[1][0], u = +f[1][1]), c()) : a == null ? null : [[a, s], [l, u]];
  };
  function c() {
    var f = Bt * n(), h = t(bQ(t.rotate()).invert([0, 0]));
    return o(a == null ? [[h[0] - f, h[1] - f], [h[0] + f, h[1] + f]] : e12 === Ey ? [[Math.max(h[0] - f, a), s], [Math.min(h[0] + f, l), u]] : [[a, Math.max(h[1] - f, s)], [l, Math.min(h[1] + f, u)]]);
  }
  return c();
}
function U_(e12) {
  return CM((Yr + e12) / 2);
}
function VQ(e12, t) {
  var r = st(e12), n = e12 === t ? et(e12) : TT(r / st(t)) / TT(U_(t) / U_(e12)), i = r * RO(U_(e12), n) / n;
  if (!n)
    return Ey;
  function o(a, s) {
    i > 0 ? s < -Yr + ht && (s = -Yr + ht) : s > Yr - ht && (s = Yr - ht);
    var l = i / RO(U_(s), n);
    return [l * et(n * a), i - l * st(n * a)];
  }
  return o.invert = function(a, s) {
    var l = i - s, u = Oo(n) * Pn(a * a + l * l), c = Ei(a, rr(l)) * Oo(l);
    return l * n < 0 && (c -= Bt * Oo(a) * Oo(l)), [c / n, 2 * Op(RO(i / u, 1 / n)) - Yr];
  }, o;
}
function Nze() {
  return BM(VQ).scale(109.5).parallels([30, 30]);
}
function wv(e12, t) {
  return [e12, t];
}
wv.invert = wv;
function Mze() {
  return es(wv).scale(152.63);
}
function XQ(e12, t) {
  var r = st(e12), n = e12 === t ? et(e12) : (r - st(t)) / (t - e12), i = r / n + e12;
  if (rr(n) < ht)
    return wv;
  function o(a, s) {
    var l = i - s, u = n * a;
    return [l * et(u), i - l * st(u)];
  }
  return o.invert = function(a, s) {
    var l = i - s, u = Ei(a, rr(l)) * Oo(l);
    return l * n < 0 && (u -= Bt * Oo(a) * Oo(l)), [u / n, i - Oo(n) * Pn(a * a + l * l)];
  }, o;
}
function Lze() {
  return BM(XQ).scale(131.154).center([0, 13.9389]);
}
var Lg = 1.340264;
var Bg = -0.081106;
var Fg = 893e-6;
var $g = 3796e-6;
var GT = Pn(3) / 2;
var Bze = 12;
function HM(e12, t) {
  var r = Si(GT * et(t)), n = r * r, i = n * n * n;
  return [e12 * st(r) / (GT * (Lg + 3 * Bg * n + i * (7 * Fg + 9 * $g * n))), r * (Lg + Bg * n + i * (Fg + $g * n))];
}
HM.invert = function(e12, t) {
  for (var r = t, n = r * r, i = n * n * n, o = 0, a, s, l; o < Bze && (s = r * (Lg + Bg * n + i * (Fg + $g * n)) - t, l = Lg + 3 * Bg * n + i * (7 * Fg + 9 * $g * n), r -= a = s / l, n = r * r, i = n * n * n, !(rr(a) < Tv)); ++o)
    ;
  return [GT * e12 * (Lg + 3 * Bg * n + i * (7 * Fg + 9 * $g * n)) / st(r), Si(et(r) / GT)];
};
function Fze() {
  return es(HM).scale(177.158);
}
function UM(e12, t) {
  var r = st(t), n = st(e12) * r;
  return [r * et(e12) / n, et(t) / n];
}
UM.invert = Ty(Op);
function $ze() {
  return es(UM).scale(144.049).clipAngle(60);
}
function Hze() {
  var e12 = 1, t = 0, r = 0, n = 1, i = 1, o = 0, a, s, l = null, u, c, f, h = 1, d = 1, p = by({
    point: function(b, T) {
      var E = y([b, T]);
      this.stream.point(E[0], E[1]);
    }
  }), m = Ev, g, v;
  function _() {
    return h = e12 * n, d = e12 * i, g = v = null, y;
  }
  function y(b) {
    var T = b[0] * h, E = b[1] * d;
    if (o) {
      var P = E * a - T * s;
      T = T * a + E * s, E = P;
    }
    return [T + t, E + r];
  }
  return y.invert = function(b) {
    var T = b[0] - t, E = b[1] - r;
    if (o) {
      var P = E * a + T * s;
      T = T * a - E * s, E = P;
    }
    return [T / h, E / d];
  }, y.stream = function(b) {
    return g && v === b ? g : g = p(m(v = b));
  }, y.postclip = function(b) {
    return arguments.length ? (m = b, l = u = c = f = null, _()) : m;
  }, y.clipExtent = function(b) {
    return arguments.length ? (m = b == null ? (l = u = c = f = null, Ev) : OS(l = +b[0][0], u = +b[0][1], c = +b[1][0], f = +b[1][1]), _()) : l == null ? null : [[l, u], [c, f]];
  }, y.scale = function(b) {
    return arguments.length ? (e12 = +b, _()) : e12;
  }, y.translate = function(b) {
    return arguments.length ? (t = +b[0], r = +b[1], _()) : [t, r];
  }, y.angle = function(b) {
    return arguments.length ? (o = b % 360 * mt, s = et(o), a = st(o), _()) : o * Sr;
  }, y.reflectX = function(b) {
    return arguments.length ? (n = b ? -1 : 1, _()) : n < 0;
  }, y.reflectY = function(b) {
    return arguments.length ? (i = b ? -1 : 1, _()) : i < 0;
  }, y.fitExtent = function(b, T) {
    return IS(y, b, T);
  }, y.fitSize = function(b, T) {
    return RM(y, b, T);
  }, y.fitWidth = function(b, T) {
    return NM(y, b, T);
  }, y.fitHeight = function(b, T) {
    return MM(y, b, T);
  }, y;
}
function jM(e12, t) {
  var r = t * t, n = r * r;
  return [e12 * (0.8707 - 0.131979 * r + n * (-0.013791 + n * (3971e-6 * r - 1529e-6 * n))), t * (1.007226 + r * (0.015085 + n * (-0.044475 + 0.028874 * r - 5916e-6 * n)))];
}
jM.invert = function(e12, t) {
  var r = t, n = 25, i;
  do {
    var o = r * r, a = o * o;
    r -= i = (r * (1.007226 + o * (0.015085 + a * (-0.044475 + 0.028874 * o - 5916e-6 * a))) - t) / (1.007226 + o * (0.015085 * 3 + a * (-0.044475 * 7 + 0.028874 * 9 * o - 5916e-6 * 11 * a)));
  } while (rr(i) > ht && --n > 0);
  return [e12 / (0.8707 + (o = r * r) * (-0.131979 + o * (-0.013791 + o * o * o * (3971e-6 - 1529e-6 * o)))), r];
};
function Uze() {
  return es(jM).scale(175.295);
}
function GM(e12, t) {
  return [st(t) * et(e12), et(t)];
}
GM.invert = Ty(Si);
function jze() {
  return es(GM).scale(249.5).clipAngle(90 + ht);
}
function zM(e12, t) {
  var r = st(t), n = 1 + st(e12) * r;
  return [r * et(e12) / n, et(t) / n];
}
zM.invert = Ty(function(e12) {
  return 2 * Op(e12);
});
function Gze() {
  return es(zM).scale(250).clipAngle(142);
}
function VM(e12, t) {
  return [TT(CM((Yr + t) / 2)), -e12];
}
VM.invert = function(e12, t) {
  return [-t, 2 * Op(lQ(e12)) - Yr];
};
function zze() {
  var e12 = zQ(VM), t = e12.center, r = e12.rotate;
  return e12.center = function(n) {
    return arguments.length ? t([-n[1], n[0]]) : (n = t(), [n[1], -n[0]]);
  }, e12.rotate = function(n) {
    return arguments.length ? r([n[0], n[1], n.length > 2 ? n[2] + 90 : 90]) : (n = r(), [n[0], n[1], n[2] - 90]);
  }, r([0, 0, 90]).scale(159.155);
}
var Vze = Object.freeze(Object.defineProperty({
  __proto__: null,
  geoAlbers: jQ,
  geoAlbersUsa: xze,
  geoArea: MGe,
  geoAzimuthalEqualArea: kze,
  geoAzimuthalEqualAreaRaw: FM,
  geoAzimuthalEquidistant: Dze,
  geoAzimuthalEquidistantRaw: $M,
  geoBounds: $Ge,
  geoCentroid: VGe,
  geoCircle: XGe,
  geoClipAntimeridian: zx,
  geoClipCircle: OQ,
  geoClipExtent: JGe,
  geoClipRectangle: OS,
  geoConicConformal: Nze,
  geoConicConformalRaw: VQ,
  geoConicEqualArea: jT,
  geoConicEqualAreaRaw: UQ,
  geoConicEquidistant: Lze,
  geoConicEquidistantRaw: XQ,
  geoContains: aze,
  geoDistance: NT,
  geoEqualEarth: Fze,
  geoEqualEarthRaw: HM,
  geoEquirectangular: Mze,
  geoEquirectangularRaw: wv,
  geoGnomonic: $ze,
  geoGnomonicRaw: UM,
  geoGraticule: CQ,
  geoGraticule10: sze,
  geoIdentity: Hze,
  geoInterpolate: lze,
  geoLength: IQ,
  geoMercator: Rze,
  geoMercatorRaw: Ey,
  geoNaturalEarth1: Uze,
  geoNaturalEarth1Raw: jM,
  geoOrthographic: jze,
  geoOrthographicRaw: GM,
  geoPath: bze,
  geoProjection: es,
  geoProjectionMutator: LM,
  geoRotation: bQ,
  geoStereographic: Gze,
  geoStereographicRaw: zM,
  geoStream: Xo,
  geoTransform: Tze,
  geoTransverseMercator: zze,
  geoTransverseMercatorRaw: VM
}, Symbol.toStringTag, { value: "Module" }));
var Xze = [].slice;
var Wze = {};
function nk(e12) {
  this._size = e12, this._call = this._error = null, this._tasks = [], this._data = [], this._waiting = this._active = this._ended = this._start = 0;
}
nk.prototype = YQ.prototype = {
  constructor: nk,
  defer: function(e12) {
    if (typeof e12 != "function")
      throw new Error("invalid callback");
    if (this._call)
      throw new Error("defer after await");
    if (this._error != null)
      return this;
    var t = Xze.call(arguments, 1);
    return t.push(e12), ++this._waiting, this._tasks.push(t), WQ(this), this;
  },
  abort: function() {
    return this._error == null && XM(this, new Error("abort")), this;
  },
  await: function(e12) {
    if (typeof e12 != "function")
      throw new Error("invalid callback");
    if (this._call)
      throw new Error("multiple await");
    return this._call = function(t, r) {
      e12.apply(null, [t].concat(r));
    }, zT(this), this;
  },
  awaitAll: function(e12) {
    if (typeof e12 != "function")
      throw new Error("invalid callback");
    if (this._call)
      throw new Error("multiple await");
    return this._call = e12, zT(this), this;
  }
};
function WQ(e12) {
  if (!e12._start)
    try {
      Yze(e12);
    } catch (t) {
      if (e12._tasks[e12._ended + e12._active - 1])
        XM(e12, t);
      else if (!e12._data)
        throw t;
    }
}
function Yze(e12) {
  for (; e12._start = e12._waiting && e12._active < e12._size; ) {
    var t = e12._ended + e12._active, r = e12._tasks[t], n = r.length - 1, i = r[n];
    r[n] = qze(e12, t), --e12._waiting, ++e12._active, r = i.apply(null, r), e12._tasks[t] && (e12._tasks[t] = r || Wze);
  }
}
function qze(e12, t) {
  return function(r, n) {
    e12._tasks[t] && (--e12._active, ++e12._ended, e12._tasks[t] = null, e12._error == null && (r != null ? XM(e12, r) : (e12._data[t] = n, e12._waiting ? WQ(e12) : zT(e12))));
  };
}
function XM(e12, t) {
  var r = e12._tasks.length, n;
  for (e12._error = t, e12._data = void 0, e12._waiting = NaN; --r >= 0; )
    if ((n = e12._tasks[r]) && (e12._tasks[r] = null, n.abort))
      try {
        n.abort();
      } catch {
      }
  e12._active = NaN, zT(e12);
}
function zT(e12) {
  if (!e12._active && e12._call) {
    var t = e12._data;
    e12._data = void 0, e12._call(e12._error, t);
  }
}
function YQ(e12) {
  if (e12 == null)
    e12 = 1 / 0;
  else if (!((e12 = +e12) >= 1))
    throw new Error("invalid concurrency");
  return new nk(e12);
}
var Kze = Object.freeze(Object.defineProperty({
  __proto__: null,
  queue: YQ
}, Symbol.toStringTag, { value: "Module" }));
var fo = "$";
function VT() {
}
VT.prototype = WM.prototype = {
  constructor: VT,
  has: function(e12) {
    return fo + e12 in this;
  },
  get: function(e12) {
    return this[fo + e12];
  },
  set: function(e12, t) {
    return this[fo + e12] = t, this;
  },
  remove: function(e12) {
    var t = fo + e12;
    return t in this && delete this[t];
  },
  clear: function() {
    for (var e12 in this)
      e12[0] === fo && delete this[e12];
  },
  keys: function() {
    var e12 = [];
    for (var t in this)
      t[0] === fo && e12.push(t.slice(1));
    return e12;
  },
  values: function() {
    var e12 = [];
    for (var t in this)
      t[0] === fo && e12.push(this[t]);
    return e12;
  },
  entries: function() {
    var e12 = [];
    for (var t in this)
      t[0] === fo && e12.push({
        key: t.slice(1),
        value: this[t]
      });
    return e12;
  },
  size: function() {
    var e12 = 0;
    for (var t in this)
      t[0] === fo && ++e12;
    return e12;
  },
  empty: function() {
    for (var e12 in this)
      if (e12[0] === fo)
        return false;
    return true;
  },
  each: function(e12) {
    for (var t in this)
      t[0] === fo && e12(this[t], t.slice(1), this);
  }
};
function WM(e12, t) {
  var r = new VT();
  if (e12 instanceof VT)
    e12.each(function(s, l) {
      r.set(l, s);
    });
  else if (Array.isArray(e12)) {
    var n = -1, i = e12.length, o;
    if (t == null)
      for (; ++n < i; )
        r.set(n, e12[n]);
    else
      for (; ++n < i; )
        r.set(t(o = e12[n], n, e12), o);
  } else if (e12)
    for (var a in e12)
      r.set(a, e12[a]);
  return r;
}
function N4() {
}
var Cc = WM.prototype;
N4.prototype = {
  constructor: N4,
  has: Cc.has,
  add: function(e12) {
    return e12 += "", this[fo + e12] = e12, this;
  },
  remove: Cc.remove,
  clear: Cc.clear,
  values: Cc.keys,
  size: Cc.size,
  empty: Cc.empty,
  each: Cc.each
};
var Zze = {
  value: function() {
  }
};
function qQ() {
  for (var e12 = 0, t = arguments.length, r = {}, n; e12 < t; ++e12) {
    if (!(n = arguments[e12] + "") || n in r || /[\s.]/.test(n))
      throw new Error("illegal type: " + n);
    r[n] = [];
  }
  return new Gb(r);
}
function Gb(e12) {
  this._ = e12;
}
function Qze(e12, t) {
  return e12.trim().split(/^|\s+/).map(function(r) {
    var n = "", i = r.indexOf(".");
    if (i >= 0 && (n = r.slice(i + 1), r = r.slice(0, i)), r && !t.hasOwnProperty(r))
      throw new Error("unknown type: " + r);
    return {
      type: r,
      name: n
    };
  });
}
Gb.prototype = qQ.prototype = {
  constructor: Gb,
  on: function(e12, t) {
    var r = this._, n = Qze(e12 + "", r), i, o = -1, a = n.length;
    if (arguments.length < 2) {
      for (; ++o < a; )
        if ((i = (e12 = n[o]).type) && (i = Jze(r[i], e12.name)))
          return i;
      return;
    }
    if (t != null && typeof t != "function")
      throw new Error("invalid callback: " + t);
    for (; ++o < a; )
      if (i = (e12 = n[o]).type)
        r[i] = M4(r[i], e12.name, t);
      else if (t == null)
        for (i in r)
          r[i] = M4(r[i], e12.name, null);
    return this;
  },
  copy: function() {
    var e12 = {}, t = this._;
    for (var r in t)
      e12[r] = t[r].slice();
    return new Gb(e12);
  },
  call: function(e12, t) {
    if ((i = arguments.length - 2) > 0)
      for (var r = new Array(i), n = 0, i, o; n < i; ++n)
        r[n] = arguments[n + 2];
    if (!this._.hasOwnProperty(e12))
      throw new Error("unknown type: " + e12);
    for (o = this._[e12], n = 0, i = o.length; n < i; ++n)
      o[n].value.apply(t, r);
  },
  apply: function(e12, t, r) {
    if (!this._.hasOwnProperty(e12))
      throw new Error("unknown type: " + e12);
    for (var n = this._[e12], i = 0, o = n.length; i < o; ++i)
      n[i].value.apply(t, r);
  }
};
function Jze(e12, t) {
  for (var r = 0, n = e12.length, i; r < n; ++r)
    if ((i = e12[r]).name === t)
      return i.value;
}
function M4(e12, t, r) {
  for (var n = 0, i = e12.length; n < i; ++n)
    if (e12[n].name === t) {
      e12[n] = Zze, e12 = e12.slice(0, n).concat(e12.slice(n + 1));
      break;
    }
  return r != null && e12.push({
    name: t,
    value: r
  }), e12;
}
function YM(e12, t) {
  var r, n = qQ("beforesend", "progress", "load", "error"), i, o = WM(), a = new XMLHttpRequest(), s = null, l = null, u, c, f = 0;
  typeof XDomainRequest < "u" && !("withCredentials" in a) && /^(http(s)?:)?\/\//.test(e12) && (a = new XDomainRequest()), "onload" in a ? a.onload = a.onerror = a.ontimeout = h : a.onreadystatechange = function(d) {
    a.readyState > 3 && h(d);
  };
  function h(d) {
    var p = a.status, m;
    if (!p && t8e(a) || p >= 200 && p < 300 || p === 304) {
      if (u)
        try {
          m = u.call(r, a);
        } catch (g) {
          n.call("error", r, g);
          return;
        }
      else
        m = a;
      n.call("load", r, m);
    } else
      n.call("error", r, d);
  }
  if (a.onprogress = function(d) {
    n.call("progress", r, d);
  }, r = {
    header: function(d, p) {
      return d = (d + "").toLowerCase(), arguments.length < 2 ? o.get(d) : (p == null ? o.remove(d) : o.set(d, p + ""), r);
    },
    // If mimeType is non-null and no Accept header is set, a default is used.
    mimeType: function(d) {
      return arguments.length ? (i = d == null ? null : d + "", r) : i;
    },
    // Specifies what type the response value should take;
    // for instance, arraybuffer, blob, document, or text.
    responseType: function(d) {
      return arguments.length ? (c = d, r) : c;
    },
    timeout: function(d) {
      return arguments.length ? (f = +d, r) : f;
    },
    user: function(d) {
      return arguments.length < 1 ? s : (s = d == null ? null : d + "", r);
    },
    password: function(d) {
      return arguments.length < 1 ? l : (l = d == null ? null : d + "", r);
    },
    // Specify how to convert the response content to a specific type;
    // changes the callback value on "load" events.
    response: function(d) {
      return u = d, r;
    },
    // Alias for send("GET", …).
    get: function(d, p) {
      return r.send("GET", d, p);
    },
    // Alias for send("POST", …).
    post: function(d, p) {
      return r.send("POST", d, p);
    },
    // If callback is non-null, it will be used for error and load events.
    send: function(d, p, m) {
      return a.open(d, e12, true, s, l), i != null && !o.has("accept") && o.set("accept", i + ",*/*"), a.setRequestHeader && o.each(function(g, v) {
        a.setRequestHeader(v, g);
      }), i != null && a.overrideMimeType && a.overrideMimeType(i), c != null && (a.responseType = c), f > 0 && (a.timeout = f), m == null && typeof p == "function" && (m = p, p = null), m != null && m.length === 1 && (m = e8e(m)), m != null && r.on("error", m).on("load", function(g) {
        m(null, g);
      }), n.call("beforesend", r, a), a.send(p ?? null), r;
    },
    abort: function() {
      return a.abort(), r;
    },
    on: function() {
      var d = n.on.apply(n, arguments);
      return d === n ? r : d;
    }
  }, t != null) {
    if (typeof t != "function")
      throw new Error("invalid callback: " + t);
    return r.get(t);
  }
  return r;
}
function e8e(e12) {
  return function(t, r) {
    e12(t == null ? r : null);
  };
}
function t8e(e12) {
  var t = e12.responseType;
  return t && t !== "text" ? e12.response : e12.responseText;
}
function PS(e12, t) {
  return function(r, n) {
    var i = YM(r).mimeType(e12).response(t);
    if (n != null) {
      if (typeof n != "function")
        throw new Error("invalid callback: " + n);
      return i.get(n);
    }
    return i;
  };
}
var r8e = PS("text/html", function(e12) {
  return document.createRange().createContextualFragment(e12.responseText);
});
var n8e = PS("application/json", function(e12) {
  return JSON.parse(e12.responseText);
});
var i8e = PS("text/plain", function(e12) {
  return e12.responseText;
});
var o8e = PS("application/xml", function(e12) {
  var t = e12.responseXML;
  if (!t)
    throw new Error("parse error");
  return t;
});
var L4 = {};
var FO = {};
var $O = 34;
var um = 10;
var HO = 13;
function KQ(e12) {
  return new Function("d", "return {" + e12.map(function(t, r) {
    return JSON.stringify(t) + ": d[" + r + '] || ""';
  }).join(",") + "}");
}
function a8e(e12, t) {
  var r = KQ(e12);
  return function(n, i) {
    return t(r(n), i, e12);
  };
}
function B4(e12) {
  var t = /* @__PURE__ */ Object.create(null), r = [];
  return e12.forEach(function(n) {
    for (var i in n)
      i in t || r.push(t[i] = i);
  }), r;
}
function Di(e12, t) {
  var r = e12 + "", n = r.length;
  return n < t ? new Array(t - n + 1).join(0) + r : r;
}
function s8e(e12) {
  return e12 < 0 ? "-" + Di(-e12, 6) : e12 > 9999 ? "+" + Di(e12, 6) : Di(e12, 4);
}
function l8e(e12) {
  var t = e12.getUTCHours(), r = e12.getUTCMinutes(), n = e12.getUTCSeconds(), i = e12.getUTCMilliseconds();
  return isNaN(e12) ? "Invalid Date" : s8e(e12.getUTCFullYear()) + "-" + Di(e12.getUTCMonth() + 1, 2) + "-" + Di(e12.getUTCDate(), 2) + (i ? "T" + Di(t, 2) + ":" + Di(r, 2) + ":" + Di(n, 2) + "." + Di(i, 3) + "Z" : n ? "T" + Di(t, 2) + ":" + Di(r, 2) + ":" + Di(n, 2) + "Z" : r || t ? "T" + Di(t, 2) + ":" + Di(r, 2) + "Z" : "");
}
function ZQ(e12) {
  var t = new RegExp('["' + e12 + `
\r]`), r = e12.charCodeAt(0);
  function n(f, h) {
    var d, p, m = i(f, function(g, v) {
      if (d)
        return d(g, v - 1);
      p = g, d = h ? a8e(g, h) : KQ(g);
    });
    return m.columns = p || [], m;
  }
  function i(f, h) {
    var d = [], p = f.length, m = 0, g = 0, v, _ = p <= 0, y = false;
    f.charCodeAt(p - 1) === um && --p, f.charCodeAt(p - 1) === HO && --p;
    function b() {
      if (_)
        return FO;
      if (y)
        return y = false, L4;
      var E, P = m, A;
      if (f.charCodeAt(P) === $O) {
        for (; m++ < p && f.charCodeAt(m) !== $O || f.charCodeAt(++m) === $O; )
          ;
        return (E = m) >= p ? _ = true : (A = f.charCodeAt(m++)) === um ? y = true : A === HO && (y = true, f.charCodeAt(m) === um && ++m), f.slice(P + 1, E - 1).replace(/""/g, '"');
      }
      for (; m < p; ) {
        if ((A = f.charCodeAt(E = m++)) === um)
          y = true;
        else if (A === HO)
          y = true, f.charCodeAt(m) === um && ++m;
        else if (A !== r)
          continue;
        return f.slice(P, E);
      }
      return _ = true, f.slice(P, p);
    }
    for (; (v = b()) !== FO; ) {
      for (var T = []; v !== L4 && v !== FO; )
        T.push(v), v = b();
      h && (T = h(T, g++)) == null || d.push(T);
    }
    return d;
  }
  function o(f, h) {
    return f.map(function(d) {
      return h.map(function(p) {
        return c(d[p]);
      }).join(e12);
    });
  }
  function a(f, h) {
    return h == null && (h = B4(f)), [h.map(c).join(e12)].concat(o(f, h)).join(`
`);
  }
  function s(f, h) {
    return h == null && (h = B4(f)), o(f, h).join(`
`);
  }
  function l(f) {
    return f.map(u).join(`
`);
  }
  function u(f) {
    return f.map(c).join(e12);
  }
  function c(f) {
    return f == null ? "" : f instanceof Date ? l8e(f) : t.test(f += "") ? '"' + f.replace(/"/g, '""') + '"' : f;
  }
  return {
    parse: n,
    parseRows: i,
    format: a,
    formatBody: s,
    formatRows: l,
    formatRow: u,
    formatValue: c
  };
}
var c8e = ZQ(",");
var u8e = c8e.parse;
var h8e = ZQ("	");
var f8e = h8e.parse;
function QQ(e12, t) {
  return function(r, n, i) {
    arguments.length < 3 && (i = n, n = null);
    var o = YM(r).mimeType(e12);
    return o.row = function(a) {
      return arguments.length ? o.response(d8e(t, n = a)) : n;
    }, o.row(n), i ? o.get(i) : o;
  };
}
function d8e(e12, t) {
  return function(r) {
    return e12(r.responseText, t);
  };
}
var p8e = QQ("text/csv", u8e);
var m8e = QQ("text/tab-separated-values", f8e);
var g8e = Object.freeze(Object.defineProperty({
  __proto__: null,
  csv: p8e,
  html: r8e,
  json: n8e,
  request: YM,
  text: i8e,
  tsv: m8e,
  xml: o8e
}, Symbol.toStringTag, { value: "Module" }));
function ik() {
  return ik = Object.assign ? Object.assign.bind() : function(e12) {
    for (var t = 1; t < arguments.length; t++) {
      var r = arguments[t];
      for (var n in r)
        Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
    }
    return e12;
  }, ik.apply(this, arguments);
}
function v8e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function F4(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, _8e(n.key), n);
  }
}
function y8e(e12, t, r) {
  return t && F4(e12.prototype, t), r && F4(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function _8e(e12) {
  var t = b8e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function b8e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function T8e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && ok(e12, t);
}
function ok(e12, t) {
  return ok = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, ok(e12, t);
}
function E8e(e12) {
  var t = A8e();
  return function() {
    var n = XT(e12), i;
    if (t) {
      var o = XT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return S8e(this, i);
  };
}
function S8e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return w8e(e12);
}
function w8e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function A8e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function XT(e12) {
  return XT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, XT(e12);
}
var CS = function(e12) {
  T8e(r, e12);
  var t = E8e(r);
  function r({
    items: n
  }) {
    var i;
    return v8e(this, r), i = t.call(this), i.state = {
      items: n,
      isSorting: false
    }, i;
  }
  return y8e(r, [{
    key: "UNSAFE_componentWillReceiveProps",
    value: function(i) {
      this.setState({
        items: i.items
      });
    }
  }, {
    key: "onSortStart",
    value: function({
      node: i,
      index: o,
      collection: a
    }, s) {
      s.stopImmediatePropagation();
      const {
        onSortStart: l
      } = this.props;
      this.setState({
        isSorting: true
      }), l && l(this.ref), this.sortingIndex = o, this.sortStartTop = s.offsetTop, this.sortStartLeft = s.offsetLeft;
    }
  }, {
    key: "onSortMove",
    value: function() {
    }
  }, {
    key: "onSortEnd",
    value: function({
      oldIndex: i,
      newIndex: o
    }) {
      const {
        onSortEnd: a
      } = this.props, {
        items: s
      } = this.state;
      this.setState({
        items: Spe(s, i, o),
        isSorting: false
      }), a && a(this.state.items), this.sortingIndex = null;
    }
  }, {
    key: "render",
    value: function() {
      const i = this.props.component, {
        items: o,
        isSorting: a
      } = this.state, s = {
        isSorting: a,
        items: o,
        onSortEnd: this.onSortEnd.bind(this),
        onSortStart: this.onSortStart.bind(this),
        onSortMove: this.onSortMove.bind(this)
      };
      return import_react.default.createElement(i, ik({}, this.props, s, {
        ref: (l) => {
          this.ref = l;
        }
      }));
    }
  }]), r;
}(import_react.default.Component);
CS.propTypes = {
  axis: L.string,
  className: L.string,
  component: L.func,
  editable: L.bool,
  handleConfigTrack: L.func,
  handleResizeTrack: L.func,
  height: L.number,
  helperClass: L.string,
  itemClass: L.string,
  itemControlAlignLeft: L.bool,
  itemReactClass: L.func,
  items: L.array,
  onAddSeries: L.func,
  onCloseTrack: L.func,
  onCloseTrackMenuOpened: L.func,
  onConfigTrackMenuOpened: L.func,
  onSortEnd: L.func,
  onSortStart: L.func,
  referenceAncestor: L.string,
  resizeHandles: L.object,
  useDragHandle: L.bool,
  width: L.number
};
CS.defaultProps = {
  className: "list stylizedList",
  itemClass: "item stylizedItem",
  width: 400,
  height: 600
};
var UO = {
  "top-right-handle": "_top-right-handle_cizw2_1",
  "bottom-right-handle": "_bottom-right-handle_cizw2_2",
  "top-left-handle": "_top-left-handle_cizw2_7",
  "bottom-left-handle": "_bottom-left-handle_cizw2_8",
  "top-draggable-handle": "_top-draggable-handle_cizw2_13",
  "bottom-draggable-handle": "_bottom-draggable-handle_cizw2_14",
  "left-draggable-handle": "_left-draggable-handle_cizw2_15",
  "right-draggable-handle": "_right-draggable-handle_cizw2_16",
  "draggable-div": "_draggable-div_cizw2_22",
  "top-draggable-handle-grabber": "_top-draggable-handle-grabber_cizw2_27",
  "bottom-draggable-handle-grabber": "_bottom-draggable-handle-grabber_cizw2_28",
  "left-draggable-handle-grabber": "_left-draggable-handle-grabber_cizw2_43",
  "right-draggable-handle-grabber": "_right-draggable-handle-grabber_cizw2_44"
};
function O8e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function $4(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, P8e(n.key), n);
  }
}
function I8e(e12, t, r) {
  return t && $4(e12.prototype, t), r && $4(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function P8e(e12) {
  var t = C8e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function C8e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function x8e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && ak(e12, t);
}
function ak(e12, t) {
  return ak = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, ak(e12, t);
}
function k8e(e12) {
  var t = R8e();
  return function() {
    var n = WT(e12), i;
    if (t) {
      var o = WT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return D8e(this, i);
  };
}
function D8e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Rn(e12);
}
function Rn(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function R8e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function WT(e12) {
  return WT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, WT(e12);
}
var JQ = function(e12) {
  x8e(r, e12);
  var t = k8e(r);
  function r(n) {
    var i;
    return O8e(this, r), i = t.call(this, n), i.dragTopRight = cs().on("start", i.dragStart.bind(Rn(i))).on("drag", i.dragTopRightFunc.bind(Rn(i))), i.dragTopLeft = cs().on("start", i.dragStart.bind(Rn(i))).on("drag", i.dragTopLeftFunc.bind(Rn(i))), i.dragBottomRight = cs().on("start", i.dragStart.bind(Rn(i))).on("drag", i.dragBottomRightFunc.bind(Rn(i))), i.dragBottomLeft = cs().on("start", i.dragStart.bind(Rn(i))).on("drag", i.dragBottomLeftFunc.bind(Rn(i))), i.dragBottom = cs().on("start", i.dragStart.bind(Rn(i))).on("drag", i.dragBottomFunc.bind(Rn(i))), i.dragTop = cs().on("start", i.dragStart.bind(Rn(i))).on("drag", i.dragTopFunc.bind(Rn(i))), i.dragLeft = cs().on("start", i.dragStart.bind(Rn(i))).on("drag", i.dragLeftFunc.bind(Rn(i))), i.dragRight = cs().on("start", i.dragStart.bind(Rn(i))).on("drag", i.dragRightFunc.bind(Rn(i))), i.minWidth = 10, i.minHeight = 10, i.bottomHandleWidth = 20, i.state = {
      uid: i.props.uid,
      width: i.props.width,
      height: i.props.height,
      top: i.props.top,
      left: i.props.left
    }, i.domBody = Wt("body").node(), i;
  }
  return I8e(r, [{
    key: "componentDidMount",
    value: function() {
      Wt(this.bottomHandle).call(this.dragBottom), Wt(this.topHandle).call(this.dragTop), Wt(this.leftHandle).call(this.dragLeft), Wt(this.rightHandle).call(this.dragRight);
    }
    // eslint-disable-next-line camelcase
  }, {
    key: "UNSAFE_componentWillReceiveProps",
    value: function(i) {
      "width" in i && this.setState({
        width: i.width
      }), "height" in i && this.setState({
        height: i.height
      });
    }
    /* ---------------------------- Custom Methods ---------------------------- */
  }, {
    key: "dragBottomFunc",
    value: function(i) {
      const o = vr(i, this.domBody);
      let a = this.dragStartHeight + (o[1] - this.dragStartMousePos[1]);
      a = a > this.minHeight ? a : this.minHeight, this.setState({
        height: a
      }), i.sourceEvent.stopPropagation(), this.sizeChanged();
    }
  }, {
    key: "dragLeftFunc",
    value: function(i) {
      const o = vr(i, this.domBody);
      let a = this.dragStartWidth - (o[0] - this.dragStartMousePos[0]);
      a = a > this.minWidth ? a : this.minWidth;
      let s = this.dragStartLeft + o[0] - this.dragStartMousePos[0];
      s = a > this.minWidth ? s : this.dragStartLeft + this.dragStartWidth - this.minWidth, this.setState({
        left: s,
        width: a
      }), i.sourceEvent.stopPropagation(), this.sizeChanged();
    }
  }, {
    key: "dragTopFunc",
    value: function(i) {
      const o = vr(i, this.domBody);
      let a = this.dragStartHeight - (o[1] - this.dragStartMousePos[1]);
      a = a > this.minHeight ? a : this.minHeight;
      let s = this.dragStartTop + o[1] - this.dragStartMousePos[1];
      s = a > this.minHeight ? s : this.dragStartTop + this.dragStartHeight - this.minHeight, this.setState({
        top: s,
        height: a
      }), i.sourceEvent.stopPropagation(), this.sizeChanged();
    }
  }, {
    key: "dragRightFunc",
    value: function(i) {
      const o = vr(i, this.domBody);
      let a = this.dragStartWidth + (o[0] - this.dragStartMousePos[0]);
      a = a > this.minWidth ? a : this.minWidth, this.setState({
        width: a
      }), i.sourceEvent.stopPropagation(), this.sizeChanged();
    }
  }, {
    key: "dragBottomLeftFunc",
    value: function(i) {
      const o = vr(i, this.domBody);
      let a = this.dragStartHeight + (o[1] - this.dragStartMousePos[1]);
      a = a > this.minHeight ? a : this.minHeight;
      let s = this.dragStartWidth - (o[0] - this.dragStartMousePos[0]);
      s = s > this.minWidth ? s : this.minWidth;
      let l = this.dragStartLeft + o[0] - this.dragStartMousePos[0];
      l = s > this.minWidth ? l : this.dragStartLeft + this.dragStartWidth - this.minWidth, this.setState({
        left: l,
        width: s,
        height: a
      }), i.sourceEvent.stopPropagation(), this.sizeChanged();
    }
  }, {
    key: "dragBottomRightFunc",
    value: function(i) {
      const o = vr(i, this.domBody);
      let a = this.dragStartWidth + (o[0] - this.dragStartMousePos[0]);
      a = a > this.minWidth ? a : this.minWidth;
      let s = this.dragStartHeight + (o[1] - this.dragStartMousePos[1]);
      s = s > this.minHeight ? s : this.minHeight, this.setState({
        width: a,
        height: s
      }), i.sourceEvent.stopPropagation(), this.sizeChanged();
    }
  }, {
    key: "dragTopRightFunc",
    value: function(i) {
      const o = vr(i, this.domBody);
      let a = this.dragStartHeight - (o[1] - this.dragStartMousePos[1]);
      a = a > this.minHeight ? a : this.minHeight;
      let s = this.dragStartTop + o[1] - this.dragStartMousePos[1];
      s = a > this.minHeight ? s : this.dragStartTop + this.dragStartHeight - this.minHeight;
      let l = this.dragStartWidth + (o[0] - this.dragStartMousePos[0]);
      l = l > this.minWidth ? l : this.minWidth, this.setState({
        top: s,
        width: l,
        height: a
      }), i.sourceEvent.stopPropagation(), this.sizeChanged();
    }
  }, {
    key: "dragTopLeftFunc",
    value: function(i) {
      const o = vr(i, this.domBody);
      let a = this.dragStartWidth - (o[0] - this.dragStartMousePos[0]);
      a = a > this.minWidth ? a : this.minWidth;
      let s = this.dragStartLeft + o[0] - this.dragStartMousePos[0];
      s = a > this.minWidth ? s : this.dragStartLeft + this.dragStartWidth - this.minWidth;
      let l = this.dragStartHeight - (o[1] - this.dragStartMousePos[1]);
      l = l > this.minHeight ? l : this.minHeight;
      let u = this.dragStartTop + o[1] - this.dragStartMousePos[1];
      u = l > this.minHeight ? u : this.dragStartTop + this.dragStartHeight - this.minHeight, this.setState({
        top: u,
        left: s,
        width: a,
        height: l
      }), i.sourceEvent.stopPropagation(), this.sizeChanged();
    }
  }, {
    key: "dragStart",
    value: function(i) {
      this.dragStartMousePos = vr(i, this.domBody), this.dragStartWidth = this.state.width, this.dragStartHeight = this.state.height, this.dragStartTop = this.state.top, this.dragStartLeft = this.state.left, i.sourceEvent.stopPropagation();
    }
  }, {
    key: "sizeChanged",
    value: function() {
      this.props.sizeChanged && this.props.sizeChanged(this.state);
    }
  }, {
    key: "rotateClicked",
    value: function() {
      this.props.trackRotated(this.state.uid);
    }
  }, {
    key: "closeClicked",
    value: function() {
      this.props.trackClosed(this.state.uid);
    }
    /* ------------------------------ Rendering ------------------------------- */
  }, {
    key: "render",
    value: function() {
      const i = this.props.theme === wr ? "white" : "black", o = {
        top: this.state.top,
        left: this.state.left,
        width: this.state.width,
        height: this.state.height,
        opacity: this.props.opacity
      }, a = 24, s = 24, l = {
        left: this.state.width / 2 - a / 2,
        width: a
      }, u = {
        top: this.state.height / 2 - s / 2,
        height: s
      }, c = {
        bottom: {
          ...l,
          bottom: 1
        },
        top: {
          ...l,
          top: 1
        },
        left: {
          ...u,
          left: 1
        },
        right: {
          ...u,
          right: 1
        }
      }, f = [...this.props.resizeHandles].map((h) => import_react.default.createElement("div", {
        key: h,
        ref: (d) => {
          this[`${h}Handle`] = d;
        },
        className: UO[`${h}-draggable-handle`],
        style: c[h],
        title: "Resize track"
      }, import_react.default.createElement("div", {
        className: UO[`${h}-draggable-handle-grabber`],
        style: {
          borderColor: i
        }
      })));
      return import_react.default.createElement("div", {
        ref: (h) => {
          this.divContainer = h;
        },
        className: nr(this.props.className, UO["draggable-div"]),
        style: o
      }, f);
    }
  }]), r;
}(import_react.default.Component);
JQ.propTypes = {
  className: L.string,
  height: L.number,
  left: L.number,
  opacity: L.number,
  resizeHandles: L.object,
  sizeChanged: L.func,
  top: L.number,
  trackClosed: L.func,
  trackRotated: L.func,
  uid: L.string,
  width: L.number,
  theme: L.symbol
};
var N8e = lh(JQ);
function M8e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function H4(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, B8e(n.key), n);
  }
}
function L8e(e12, t, r) {
  return t && H4(e12.prototype, t), r && H4(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function B8e(e12) {
  var t = F8e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function F8e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function $8e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && sk(e12, t);
}
function sk(e12, t) {
  return sk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, sk(e12, t);
}
function H8e(e12) {
  var t = G8e();
  return function() {
    var n = YT(e12), i;
    if (t) {
      var o = YT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return U8e(this, i);
  };
}
function U8e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return j8e(e12);
}
function j8e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function G8e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function YT(e12) {
  return YT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, YT(e12);
}
var eJ = function(e12) {
  $8e(r, e12);
  var t = H8e(r);
  function r(n) {
    var i;
    return M8e(this, r), i = t.call(this, n), i.state = {
      controlsVisible: false
    }, i;
  }
  return L8e(r, [{
    key: "shouldComponentUpdate",
    value: function() {
      return !this.resizing;
    }
  }, {
    key: "handleMouseEnter",
    value: function() {
      this.setState({
        controlsVisible: true
      });
    }
  }, {
    key: "handleMouseLeave",
    value: function() {
      this.setState({
        controlsVisible: false
      });
    }
  }, {
    key: "handleMouseMove",
    value: function() {
      this.setState({
        controlsVisible: true
      });
    }
  }, {
    key: "getControls",
    value: function() {
      let i = null;
      return this.moveable ? i = TP(() => import_react.default.createElement("svg", {
        className: "no-zoom",
        height: "10px",
        onClick: () => {
        },
        style: this.getMoveImgStyle(),
        width: "10px"
      }, import_react.default.createElement("use", {
        xlinkHref: "#move"
      }))) : i = TP(() => import_react.default.createElement("div", null)), import_react.default.createElement("div", {
        style: {
          position: "absolute",
          backgroundColor: "rgba(255,255,255,0.7)",
          right: "3px",
          top: "3px",
          pointerEvents: "none",
          paddingLeft: "5px",
          paddingRight: "5px",
          borderRadius: "5px",
          border: "1px solid #dddddd"
        }
      }, import_react.default.createElement(i, null), import_react.default.createElement("svg", {
        ref: (o) => {
          this.imgConfig = o;
        },
        className: "no-zoom",
        height: "10px",
        onClick: () => {
          const a = import_react_dom.default.findDOMNode(this.imgConfig).getBoundingClientRect();
          this.props.onConfigTrackMenuOpened(this.props.uid, a);
        },
        style: this.getSettingsImgStyle(),
        width: "10px"
      }, import_react.default.createElement("use", {
        xlinkHref: "#cog"
      })), import_react.default.createElement("svg", {
        ref: (o) => {
          this.imgAdd = o;
        },
        className: "no-zoom",
        height: "10px",
        onClick: () => this.props.onAddSeries(this.props.uid),
        style: this.getAddImgStyle(),
        width: "10px"
      }, import_react.default.createElement("use", {
        xlinkHref: "#plus"
      })), import_react.default.createElement("svg", {
        ref: (o) => {
          this.imgClose = o;
        },
        className: "no-zoom",
        height: "10px",
        onClick: () => {
          const a = import_react_dom.default.findDOMNode(this.imgClose).getBoundingClientRect();
          this.props.onCloseTrackMenuOpened(this.props.uid, a);
        },
        style: this.getCloseImgStyle(),
        width: "10px"
      }, import_react.default.createElement("use", {
        xlinkHref: "#cross"
      })));
    }
  }]), r;
}(import_react.default.Component);
eJ.propTypes = {
  configMenuOpen: L.bool,
  onConfigTrackMenuOpened: L.func,
  onCloseTrackMenuOpened: L.func,
  onAddSeries: L.func,
  uid: L.string
};
function z8e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function U4(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, X8e(n.key), n);
  }
}
function V8e(e12, t, r) {
  return t && U4(e12.prototype, t), r && U4(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function X8e(e12) {
  var t = W8e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function W8e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Y8e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && lk(e12, t);
}
function lk(e12, t) {
  return lk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, lk(e12, t);
}
function q8e(e12) {
  var t = Q8e();
  return function() {
    var n = qT(e12), i;
    if (t) {
      var o = qT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return K8e(this, i);
  };
}
function K8e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Z8e(e12);
}
function Z8e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function Q8e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function qT(e12) {
  return qT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, qT(e12);
}
var xS = function(e12) {
  Y8e(r, e12);
  var t = q8e(r);
  function r(n) {
    var i;
    return z8e(this, r), i = t.call(this, n), i.moveable = true, i;
  }
  return V8e(r, [{
    key: "render",
    value: function() {
      return import_react.default.createElement("div", {
        ref: (i) => {
          this.el = i;
        },
        className: this.props.className,
        onMouseEnter: this.handleMouseEnter.bind(this),
        onMouseLeave: () => {
          this.handleMouseLeave();
        },
        style: {
          height: this.props.height,
          width: this.props.width
        }
      }, import_react.default.createElement(N8e, {
        key: this.props.uid,
        height: this.props.height,
        resizeHandles: this.props.editable ? this.props.resizeHandles : /* @__PURE__ */ new Set(),
        sizeChanged: (i) => this.props.handleResizeTrack(this.props.uid, i.width, i.height),
        style: {
          background: "transparent"
        },
        uid: this.props.uid,
        width: this.props.width
      }), this.props.editable && this.getControls(this.state.controlsVisible || this.props.item.configMenuVisible));
    }
  }]), r;
}(eJ);
xS.propTypes = {
  className: L.string,
  uid: L.string,
  item: L.object,
  height: L.number,
  width: L.number
};
function J8e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function j4(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, t9e(n.key), n);
  }
}
function e9e(e12, t, r) {
  return t && j4(e12.prototype, t), r && j4(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function t9e(e12) {
  var t = r9e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function r9e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function n9e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && ck(e12, t);
}
function ck(e12, t) {
  return ck = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, ck(e12, t);
}
function i9e(e12) {
  var t = s9e();
  return function() {
    var n = KT(e12), i;
    if (t) {
      var o = KT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return o9e(this, i);
  };
}
function o9e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return a9e(e12);
}
function a9e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function s9e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function KT(e12) {
  return KT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, KT(e12);
}
var j_ = {
  pointerEvents: "all"
};
var tJ = function(e12) {
  n9e(r, e12);
  var t = i9e(r);
  function r() {
    return J8e(this, r), t.apply(this, arguments);
  }
  return e9e(r, [{
    key: "getControls",
    value: function(i) {
      return import_react.default.createElement(mS, {
        configMenuVisible: this.props.item.configMenuVisible,
        imgStyleAdd: j_,
        imgStyleClose: j_,
        imgStyleMove: j_,
        imgStyleSettings: j_,
        isMoveable: this.moveable,
        isVisible: i,
        onAddSeries: this.props.onAddSeries,
        onCloseTrackMenuOpened: this.props.onCloseTrackMenuOpened,
        onConfigTrackMenuOpened: this.props.onConfigTrackMenuOpened,
        uid: this.props.uid
      });
    }
  }]), r;
}(xS);
var l9e = hV((e12) => import_react.default.createElement(tJ, {
  className: e12.className,
  editable: e12.editable,
  handleConfigTrack: e12.handleConfigTrack,
  handleResizeTrack: e12.handleResizeTrack,
  height: e12.height,
  item: e12.item,
  onAddSeries: e12.onAddSeries,
  onCloseTrack: e12.onCloseTrack,
  onCloseTrackMenuOpened: e12.onCloseTrackMenuOpened,
  onConfigTrackMenuOpened: e12.onConfigTrackMenuOpened,
  resizeHandles: e12.resizeHandles,
  uid: e12.uid,
  width: e12.width
}));
function uk() {
  return uk = Object.assign ? Object.assign.bind() : function(e12) {
    for (var t = 1; t < arguments.length; t++) {
      var r = arguments[t];
      for (var n in r)
        Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
    }
    return e12;
  }, uk.apply(this, arguments);
}
var rJ = Fpe(({
  className: e12,
  items: t,
  itemClass: r,
  itemControlAlignLeft: n,
  sortingIndex: i,
  useDragHandle: o,
  sortableHandlers: a,
  height: s,
  width: l,
  onCloseTrack: u,
  onCloseTrackMenuOpened: c,
  onConfigTrackMenuOpened: f,
  onAddSeries: h,
  handleConfigTrack: d,
  editable: p,
  itemReactClass: m,
  handleResizeTrack: g,
  resizeHandles: v
}) => {
  const _ = t.map((y, b) => import_react.default.createElement(m, {
    key: `sci-${y.uid}`,
    className: r,
    controlAlignLeft: n,
    sortingIndex: i,
    index: b,
    uid: y.uid,
    height: y.height,
    width: y.width,
    item: y,
    useDragHandle: o,
    onCloseTrack: u,
    onCloseTrackMenuOpened: c,
    onConfigTrackMenuOpened: f,
    onAddSeries: h,
    handleConfigTrack: d,
    editable: p,
    handleResizeTrack: g,
    resizeHandles: v
  }));
  return import_react.default.createElement("div", uk({
    className: e12,
    style: {
      height: s,
      width: l,
      background: "transparent"
    }
  }, a), _);
});
var c9e = {
  "horizontal-tiled-plot": "_horizontal-tiled-plot_1bqkg_1"
};
function u9e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function G4(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, f9e(n.key), n);
  }
}
function h9e(e12, t, r) {
  return t && G4(e12.prototype, t), r && G4(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function f9e(e12) {
  var t = d9e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function d9e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function p9e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && hk(e12, t);
}
function hk(e12, t) {
  return hk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, hk(e12, t);
}
function m9e(e12) {
  var t = v9e();
  return function() {
    var n = ZT(e12), i;
    if (t) {
      var o = ZT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return g9e(this, i);
  };
}
function g9e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return zb(e12);
}
function zb(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function v9e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function ZT(e12) {
  return ZT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, ZT(e12);
}
function z4(e12) {
  return e12 && e12.sourceEvent;
}
var QT = function(e12) {
  p9e(r, e12);
  var t = m9e(r);
  function r(n) {
    var i;
    return u9e(this, r), i = t.call(this, n), i.brushBehavior = T1().on("start", i.brushStarted.bind(zb(i))).on("brush", i.brushed.bind(zb(i))).on("end", i.brushedEnded.bind(zb(i))), i;
  }
  return h9e(r, [{
    key: "componentDidMount",
    value: function() {
      this.props.isRangeSelectionActive && this.addBrush();
    }
  }, {
    key: "shouldComponentUpdate",
    value: function(i, o) {
      return this.rangeSelectionTriggered ? (this.rangeSelectionTriggered = false, this.rangeSelectionTriggeredEnd && this.props.rangeSelection !== i.rangeSelection && this.moveBrush(i.rangeSelection[0] ? i.rangeSelection[0] : null, true), this.rangeSelectionTriggeredEnd = false, this.state !== o) : this.props.rangeSelection !== i.rangeSelection ? (this.moveBrush(i.rangeSelection[0] ? i.rangeSelection[0] : null, i.rangeSelectionEnd), this.state !== o) : true;
    }
  }, {
    key: "componentDidUpdate",
    value: function() {
      this.props.isRangeSelectionActive ? this.addBrush() : this.removeBrush();
    }
    /* ---------------------------- Custom Methods ---------------------------- */
  }, {
    key: "addBrush",
    value: function() {
      !this.brushEl || this.brushElAddedBefore === this.brushEl || (this.brushElAddedBefore && this.brushElAddedBefore.on(".brush", null), this.brushEl.call(this.brushBehavior), this.brushElAddedBefore = this.brushEl, Df(this.brushEl, jo["track-range-selection-group-brush-selection"]));
    }
  }, {
    key: "brushed",
    value: function(i) {
      const o = this.rangeSelectionMoved;
      this.rangeSelectionMoved = false, !(!z4(i) || !this.props.onRangeSelection || o) && (this.rangeSelectionTriggered = true, this.props.onRangeSelection(i.selection));
    }
  }, {
    key: "brushStarted",
    value: function(i) {
      !z4(i) || !i.selection || this.props.onRangeSelectionStart();
    }
  }, {
    key: "brushedEnded",
    value: function(i) {
      if (!this.props.is1dRangeSelection)
        return;
      const o = this.rangeSelectionMovedEnd;
      this.rangeSelectionMovedEnd = false, i.selection && i.sourceEvent && this.props.onRangeSelection && !o && (this.rangeSelectionTriggered = true, this.rangeSelectionTriggeredEnd = true, this.props.onRangeSelectionEnd(i.selection)), i.selection || (this.rangeSelectionTriggered = true, this.props.onRangeSelectionReset());
    }
  }, {
    key: "moveBrush",
    value: function(i, o = false) {
      if (!this.brushEl)
        return;
      const a = i ? [this.props.scale(i[0]), this.props.scale(i[1])] : null;
      this.rangeSelectionMoved = true, this.rangeSelectionMovedEnd = true, o ? this.brushEl.transition().call(this.brushBehavior.move, a) : this.brushEl.call(this.brushBehavior.move, a);
    }
  }, {
    key: "removeBrush",
    value: function() {
      this.brushElAddedBefore && (this.brushElAddedBefore.call(this.brushBehavior.move, null), this.brushElAddedBefore.on(".brush", null), this.brushElAddedBefore = void 0, this.props.onRangeSelectionReset());
    }
    /* ------------------------------ Rendering ------------------------------- */
  }, {
    key: "render",
    value: function() {
      const i = this.props.tracks.map((s) => s.height).reduce(Ol, 0), o = this.props.tracks.map((s) => ip(s)).reduce(qv, false), a = this.props.isRangeSelectionActive ? jo["track-range-selection-active"] : jo["track-range-selection"];
      return import_react.default.createElement("div", {
        className: nr("horizontal-tiled-plot", c9e["horizontal-tiled-plot"])
      }, o && import_react.default.createElement("svg", {
        ref: (s) => {
          this.brushEl = Wt(s);
        },
        className: a,
        style: {
          height: i,
          width: this.props.width
        },
        xmlns: "http://www.w3.org/2000/svg"
      }), import_react.default.createElement(CS, {
        className: nr(Go.list, Go.stylizedList),
        component: rJ,
        editable: this.props.editable,
        handleConfigTrack: this.props.handleConfigTrack,
        handleResizeTrack: this.props.handleResizeTrack,
        height: i,
        helperClass: Go.stylizedHelper,
        itemClass: Go.stylizedItem,
        itemReactClass: l9e,
        items: this.props.tracks.map((s) => ({
          configMenuVisible: s.uid === this.props.configTrackMenuId,
          uid: s.uid || Gt.nice(),
          width: this.props.width,
          height: s.height,
          value: s.value
        })),
        onAddSeries: this.props.onAddSeries,
        onCloseTrack: this.props.onCloseTrack,
        onCloseTrackMenuOpened: this.props.onCloseTrackMenuOpened,
        onConfigTrackMenuOpened: this.props.onConfigTrackMenuOpened,
        onSortEnd: this.props.handleSortEnd,
        referenceAncestor: this.props.referenceAncestor,
        resizeHandles: this.props.resizeHandles,
        useDragHandle: true,
        width: this.props.width
      }));
    }
  }]), r;
}(import_react.default.Component);
QT.propTypes = {
  configTrackMenuId: L.string,
  editable: L.bool,
  handleConfigTrack: L.func,
  handleResizeTrack: L.func,
  handleSortEnd: L.func,
  is1dRangeSelection: L.bool,
  isRangeSelectionActive: L.bool,
  onAddSeries: L.func,
  onCloseTrack: L.func,
  onCloseTrackMenuOpened: L.func,
  onConfigTrackMenuOpened: L.func,
  onRangeSelection: L.func,
  onRangeSelectionEnd: L.func,
  onRangeSelectionReset: L.func,
  onRangeSelectionStart: L.func,
  rangeSelection: L.array,
  rangeSelectionEnd: L.bool,
  referenceAncestor: L.func,
  resizeHandles: L.object,
  scale: L.func,
  tracks: L.array,
  width: L.number
};
function y9e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function V4(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, b9e(n.key), n);
  }
}
function _9e(e12, t, r) {
  return t && V4(e12.prototype, t), r && V4(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function b9e(e12) {
  var t = T9e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function T9e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function E9e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && fk(e12, t);
}
function fk(e12, t) {
  return fk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, fk(e12, t);
}
function S9e(e12) {
  var t = O9e();
  return function() {
    var n = JT(e12), i;
    if (t) {
      var o = JT(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return w9e(this, i);
  };
}
function w9e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return A9e(e12);
}
function A9e(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function O9e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function JT(e12) {
  return JT = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, JT(e12);
}
var G_ = {
  pointerEvents: "all"
};
var nJ = function(e12) {
  E9e(r, e12);
  var t = S9e(r);
  function r() {
    return y9e(this, r), t.apply(this, arguments);
  }
  return _9e(r, [{
    key: "getControls",
    value: function(i) {
      return import_react.default.createElement(mS, {
        imgStyleAdd: G_,
        imgStyleClose: G_,
        imgStyleMove: G_,
        imgStyleSettings: G_,
        isAlignLeft: this.props.controlAlignLeft,
        isMoveable: this.moveable,
        isVertical: true,
        isVisible: i,
        onAddSeries: this.props.onAddSeries,
        onCloseTrackMenuOpened: this.props.onCloseTrackMenuOpened,
        onConfigTrackMenuOpened: this.props.onConfigTrackMenuOpened,
        uid: this.props.uid
      });
    }
  }]), r;
}(xS);
function I9e(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function X4(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, C9e(n.key), n);
  }
}
function P9e(e12, t, r) {
  return t && X4(e12.prototype, t), r && X4(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function C9e(e12) {
  var t = x9e(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function x9e(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Vb() {
  return typeof Reflect < "u" && Reflect.get ? Vb = Reflect.get.bind() : Vb = function(t, r, n) {
    var i = k9e(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Vb.apply(this, arguments);
}
function k9e(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Vd(e12), e12 !== null); )
    ;
  return e12;
}
function D9e(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && dk(e12, t);
}
function dk(e12, t) {
  return dk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, dk(e12, t);
}
function R9e(e12) {
  var t = M9e();
  return function() {
    var n = Vd(e12), i;
    if (t) {
      var o = Vd(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return N9e(this, i);
  };
}
function N9e(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return iJ(e12);
}
function iJ(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function M9e() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Vd(e12) {
  return Vd = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Vd(e12);
}
var L9e = function(e12) {
  D9e(r, e12);
  var t = R9e(r);
  function r(n, i) {
    var o;
    I9e(this, r), o = t.call(this, n, i);
    const {
      registerViewportChanged: a,
      removeViewportChanged: s
    } = n, l = Gt.nice();
    return o.uid = l, o.removeViewportChanged = s, o.viewportXDomain = null, o.viewportYDomain = null, a(l, o.viewportChanged.bind(iJ(o))), o;
  }
  return P9e(r, [{
    key: "viewportChanged",
    value: function(i, o) {
      const a = i.domain(), s = o.domain();
      this.viewportXDomain = a, this.viewportYDomain = s, this.draw();
    }
  }, {
    key: "draw",
    value: function() {
      const i = this.pMain;
      if (!this.viewportXDomain || !this.viewportYDomain)
        return;
      i.clear(), i.lineStyle(1, 255, 1), i.beginFill(16740363, 1);
      const o = this._xScale(this.viewportXDomain[0]), a = this._yScale(this.viewportYDomain[0]), s = this._xScale(this.viewportXDomain[1]) - this._xScale(this.viewportXDomain[0]), l = this._yScale(this.viewportYDomain[1]) - this._yScale(this.viewportYDomain[0]);
      this.pMain.drawRect(o, a, s, l);
    }
  }, {
    key: "zoomed",
    value: function(i, o) {
      this.xScale(i), this.yScale(o), this.draw();
    }
  }, {
    key: "setPosition",
    value: function(i) {
      Vb(Vd(r.prototype), "setPosition", this).call(this, i), this.pMain.position.y = this.position[1], this.pMain.position.x = this.position[0], this.draw();
    }
  }]), r;
}(Oi);
function oJ(e12) {
  this.size = 0, this.limit = e12, this._keymap = {};
}
function B9e(e12, t) {
  const r = {
    key: e12,
    value: t
  };
  if (this._keymap[e12] = r, this.tail ? (this.tail.newer = r, r.older = this.tail) : this.head = r, this.tail = r, this.size === this.limit)
    return this.shift();
  this.size += 1;
}
function F9e() {
  const e12 = this.head;
  return e12 && (this.head.newer ? (this.head = this.head.newer, this.head.older = void 0) : (this.head = void 0, this.tail = void 0), e12.newer = void 0, e12.older = void 0, delete this._keymap[e12.key], this.size -= 1), e12;
}
function $9e(e12, t) {
  const r = this._keymap[e12];
  if (r !== void 0)
    return r === this.tail || (r.newer && (r === this.head && (this.head = r.newer), r.newer.older = r.older), r.older && (r.older.newer = r.newer), r.newer = void 0, r.older = this.tail, this.tail && (this.tail.newer = r), this.tail = r), t ? r : r.value;
}
function H9e(e12) {
  return this._keymap[e12];
}
function U9e(e12, t) {
  const r = this.get(e12, true);
  let n;
  return r ? (n = r.value, r.value = t) : (n = this.put(e12, t), n && (n = n.value)), n;
}
function j9e(e12) {
  const t = this._keymap[e12];
  if (t)
    return delete this._keymap[t.key], t.newer && t.older ? (t.older.newer = t.newer, t.newer.older = t.older) : t.newer ? (t.newer.older = void 0, this.head = t.newer) : t.older ? (t.older.newer = void 0, this.tail = t.older) : (this.head = void 0, this.tail = void 0), this.size -= 1, t.value;
}
function G9e() {
  this.head = void 0, this.tail = void 0, this.size = 0, this._keymap = {};
}
function z9e() {
  return Object.keys(this._keymap);
}
function V9e(e12, t, r) {
  let n;
  if (t === true ? (r = true, t = void 0) : typeof t != "object" && (t = this), r)
    for (n = this.tail; n; )
      e12.call(t, n.key, n.value, this), n = n.older;
  else
    for (n = this.head; n; )
      e12.call(t, n.key, n.value, this), n = n.newer;
}
function X9e() {
  const e12 = [];
  let t = this.head;
  for (; t; )
    e12.push({
      key: t.key.toJSON(),
      value: t.value.toJSON()
    }), t = t.newer;
  return e12;
}
function W9e() {
  let e12 = "", t = this.head;
  for (; t; )
    e12 += `${String(t.key)}:${t.value}`, t = t.newer, t && (e12 += " < ");
  return e12;
}
Object.assign(oJ.prototype, {
  put: B9e,
  get: $9e,
  find: H9e,
  keys: z9e,
  set: U9e,
  shift: F9e,
  remove: j9e,
  removeAll: G9e,
  forEach: V9e,
  toJSON: X9e,
  toString: W9e
});
var aJ = "1.13.4";
var Y9e = "_button_1wnjn_1";
var jO = {
  button: Y9e,
  "button-shortcut": "_button-shortcut_1wnjn_35"
};
var Ds = import_react.default.forwardRef((e12, t) => import_react.default.createElement("button", {
  ref: t,
  className: jO[e12.styleName] ?? jO.button,
  disabled: e12.disable,
  onBlur: e12.onBlur,
  onClick: e12.onClick,
  onMouseDown: e12.onMouseDown,
  onMouseOut: e12.onMouseOut,
  onMouseUp: e12.onMouseUp,
  type: "button"
}, e12.children, e12.shortcut && import_react.default.createElement("span", {
  className: jO["button-shortcut"]
}, e12.shortcut)));
Ds.defaultProps = {
  onClick: () => {
  },
  styleName: "",
  type: "button"
};
Ds.propTypes = {
  children: L.any,
  disable: L.bool,
  onBlur: L.func,
  onClick: L.func,
  onMouseDown: L.func,
  onMouseOut: L.func,
  onMouseUp: L.func,
  shortcut: L.string,
  type: L.string,
  styleName: L.string
};
var q9e = "_cross_2ke8w_1";
var K9e = {
  cross: q9e
};
function sJ() {
  return import_react.default.createElement("div", {
    className: K9e.cross
  });
}
function pk() {
  return pk = Object.assign ? Object.assign.bind() : function(e12) {
    for (var t = 1; t < arguments.length; t++) {
      var r = arguments[t];
      for (var n in r)
        Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
    }
    return e12;
  }, pk.apply(this, arguments);
}
var {
  Provider: Z9e,
  Consumer: Q9e
} = import_react.default.createContext({
  close: qo,
  open: qo
});
var kS = (e12) => import_react.default.forwardRef((t, r) => import_react.default.createElement(Q9e, null, (n) => import_react.default.createElement(e12, pk({
  ref: r
}, t, {
  modal: n
}))));
var Uh = {
  "modal-background": "_modal-background_zzhoe_1",
  "fade-in": "_fade-in_zzhoe_1",
  "modal-hide": "_modal-hide_zzhoe_13",
  "modal-wrap": "_modal-wrap_zzhoe_17",
  "modal-window": "_modal-window_zzhoe_25",
  "fade-scale-in": "_fade-scale-in_zzhoe_1",
  "modal-window-max-height": "_modal-window-max-height_zzhoe_38",
  "modal-content": "_modal-content_zzhoe_42"
};
function qM(e12) {
  const t = () => {
    e12.modal.close(), e12.onClose && e12.onClose();
  };
  return import_react.default.createElement("div", {
    className: nr(Uh["modal-background"], {
      [Uh["modal-hide"]]: e12.hide
    })
  }, import_react.default.createElement("div", {
    className: Uh["modal-wrap"]
  }, import_react.default.createElement("div", {
    className: nr(Uh["modal-window"], {
      [Uh["modal-window-max-height"]]: e12.maxHeight
    })
  }, e12.closeButton && import_react.default.createElement(Ds, {
    onClick: t
  }, import_react.default.createElement(sJ, null)), import_react.default.createElement("div", {
    className: Uh["modal-content"]
  }, e12.children))));
}
qM.defaultProps = {
  closeButton: true,
  hide: false,
  maxHeight: false
};
qM.propTypes = {
  children: L.element.isRequired,
  closeButton: L.bool,
  hide: L.bool,
  maxHeight: L.bool,
  modal: L.object.isRequired,
  onClose: L.func
};
var J9e = kS(qM);
var GO = {
  "dialog-header": "_dialog-header_wp50s_1",
  "dialog-main-max-height": "_dialog-main-max-height_wp50s_20",
  "dialog-footer": "_dialog-footer_wp50s_31",
  "dialog-footer-max-height": "_dialog-footer-max-height_wp50s_31"
};
function KM(e12) {
  const t = () => {
    e12.modal.close(), e12.onCancel && e12.onCancel();
  }, r = () => {
    e12.modal.close(), e12.onOkay && e12.onOkay();
  };
  return import_react.default.createElement(J9e, {
    closeButton: false,
    hide: e12.hide,
    maxHeight: e12.maxHeight
  }, import_react.default.createElement(import_react.default.Fragment, null, import_react.default.createElement("header", {
    className: GO["dialog-header"]
  }, import_react.default.createElement("h3", null, e12.title), import_react.default.createElement(Ds, {
    onClick: t
  }, import_react.default.createElement(sJ, null))), e12.maxHeight ? import_react.default.createElement("main", {
    className: nr(e12.maxHeight && GO["dialog-main-max-height"])
  }, e12.children) : import_react.default.createElement("main", null, e12.children), import_react.default.createElement("footer", {
    className: GO[e12.maxHeight ? "dialog-footer-max-height" : "dialog-footer"]
  }, e12.okayOnly ? import_react.default.createElement("div", null) : import_react.default.createElement(Ds, {
    onClick: t,
    shortcut: e12.cancelShortcut
  }, e12.cancelTitle), import_react.default.createElement(Ds, {
    onClick: r,
    shortcut: e12.okayShortcut
  }, e12.okayTitle))));
}
KM.defaultProps = {
  cancelTitle: "Cancel",
  hide: false,
  maxHeight: false,
  okayOnly: false,
  okayTitle: "Ok"
};
KM.propTypes = {
  cancelShortcut: L.string,
  cancelTitle: L.string,
  children: L.object,
  hide: L.bool,
  maxHeight: L.bool,
  modal: L.object.isRequired,
  okayShortcut: L.string,
  okayTitle: L.string,
  okayOnly: L.bool,
  onCancel: L.func.isRequired,
  onOkay: L.func.isRequired,
  title: L.string.isRequired
};
var Sy = kS(KM);
var Eo = {};
var wy = {};
var e7e = typeof globalThis == "object" && globalThis && globalThis.Object === Object && globalThis;
var lJ = e7e;
var t7e = typeof self == "object" && self && self.Object === Object && self;
var r7e = lJ || t7e || Function("return this")();
var fa = r7e;
var n7e = fa.Symbol;
var Ya = n7e;
var cJ = Object.prototype;
var i7e = cJ.hasOwnProperty;
var o7e = cJ.toString;
var hm = Ya ? Ya.toStringTag : void 0;
function a7e(e12) {
  var t = i7e.call(e12, hm), r = e12[hm];
  try {
    e12[hm] = void 0;
    var n = true;
  } catch {
  }
  var i = o7e.call(e12);
  return n && (t ? e12[hm] = r : delete e12[hm]), i;
}
var s7e = Object.prototype;
var l7e = s7e.toString;
function c7e(e12) {
  return l7e.call(e12);
}
var u7e = "[object Null]";
var h7e = "[object Undefined]";
var W4 = Ya ? Ya.toStringTag : void 0;
function fc(e12) {
  return e12 == null ? e12 === void 0 ? h7e : u7e : W4 && W4 in Object(e12) ? a7e(e12) : c7e(e12);
}
var f7e = Array.isArray;
var wi = f7e;
function ia(e12) {
  return e12 != null && typeof e12 == "object";
}
var d7e = "[object String]";
function p7e(e12) {
  return typeof e12 == "string" || !wi(e12) && ia(e12) && fc(e12) == d7e;
}
var m7e = Object.freeze(Object.defineProperty({
  __proto__: null,
  default: p7e
}, Symbol.toStringTag, { value: "Module" }));
var g7e = zs(m7e);
function v7e(e12) {
  return function(t, r, n) {
    for (var i = -1, o = Object(t), a = n(t), s = a.length; s--; ) {
      var l = a[e12 ? s : ++i];
      if (r(o[l], l, o) === false)
        break;
    }
    return t;
  };
}
var y7e = v7e();
var uJ = y7e;
function _7e(e12, t) {
  for (var r = -1, n = Array(e12); ++r < e12; )
    n[r] = t(r);
  return n;
}
var b7e = "[object Arguments]";
function Y4(e12) {
  return ia(e12) && fc(e12) == b7e;
}
var hJ = Object.prototype;
var T7e = hJ.hasOwnProperty;
var E7e = hJ.propertyIsEnumerable;
var S7e = Y4(/* @__PURE__ */ function() {
  return arguments;
}()) ? Y4 : function(e12) {
  return ia(e12) && T7e.call(e12, "callee") && !E7e.call(e12, "callee");
};
var eE = S7e;
function w7e() {
  return false;
}
var fJ = typeof exports == "object" && exports && !exports.nodeType && exports;
var q4 = fJ && typeof module == "object" && module && !module.nodeType && module;
var A7e = q4 && q4.exports === fJ;
var K4 = A7e ? fa.Buffer : void 0;
var O7e = K4 ? K4.isBuffer : void 0;
var I7e = O7e || w7e;
var Av = I7e;
var P7e = 9007199254740991;
var C7e = /^(?:0|[1-9]\d*)$/;
function ZM(e12, t) {
  var r = typeof e12;
  return t = t ?? P7e, !!t && (r == "number" || r != "symbol" && C7e.test(e12)) && e12 > -1 && e12 % 1 == 0 && e12 < t;
}
var x7e = 9007199254740991;
function QM(e12) {
  return typeof e12 == "number" && e12 > -1 && e12 % 1 == 0 && e12 <= x7e;
}
var k7e = "[object Arguments]";
var D7e = "[object Array]";
var R7e = "[object Boolean]";
var N7e = "[object Date]";
var M7e = "[object Error]";
var L7e = "[object Function]";
var B7e = "[object Map]";
var F7e = "[object Number]";
var $7e = "[object Object]";
var H7e = "[object RegExp]";
var U7e = "[object Set]";
var j7e = "[object String]";
var G7e = "[object WeakMap]";
var z7e = "[object ArrayBuffer]";
var V7e = "[object DataView]";
var X7e = "[object Float32Array]";
var W7e = "[object Float64Array]";
var Y7e = "[object Int8Array]";
var q7e = "[object Int16Array]";
var K7e = "[object Int32Array]";
var Z7e = "[object Uint8Array]";
var Q7e = "[object Uint8ClampedArray]";
var J7e = "[object Uint16Array]";
var eVe = "[object Uint32Array]";
var Rr = {};
Rr[X7e] = Rr[W7e] = Rr[Y7e] = Rr[q7e] = Rr[K7e] = Rr[Z7e] = Rr[Q7e] = Rr[J7e] = Rr[eVe] = true;
Rr[k7e] = Rr[D7e] = Rr[z7e] = Rr[R7e] = Rr[V7e] = Rr[N7e] = Rr[M7e] = Rr[L7e] = Rr[B7e] = Rr[F7e] = Rr[$7e] = Rr[H7e] = Rr[U7e] = Rr[j7e] = Rr[G7e] = false;
function tVe(e12) {
  return ia(e12) && QM(e12.length) && !!Rr[fc(e12)];
}
function JM(e12) {
  return function(t) {
    return e12(t);
  };
}
var dJ = typeof exports == "object" && exports && !exports.nodeType && exports;
var Hg = dJ && typeof module == "object" && module && !module.nodeType && module;
var rVe = Hg && Hg.exports === dJ;
var zO = rVe && lJ.process;
var nVe = function() {
  try {
    var e12 = Hg && Hg.require && Hg.require("util").types;
    return e12 || zO && zO.binding && zO.binding("util");
  } catch {
  }
}();
var Xd = nVe;
var Z4 = Xd && Xd.isTypedArray;
var iVe = Z4 ? JM(Z4) : tVe;
var eL = iVe;
var oVe = Object.prototype;
var aVe = oVe.hasOwnProperty;
function pJ(e12, t) {
  var r = wi(e12), n = !r && eE(e12), i = !r && !n && Av(e12), o = !r && !n && !i && eL(e12), a = r || n || i || o, s = a ? _7e(e12.length, String) : [], l = s.length;
  for (var u in e12)
    (t || aVe.call(e12, u)) && !(a && // Safari 9 has enumerable `arguments.length` in strict mode.
    (u == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
    i && (u == "offset" || u == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
    o && (u == "buffer" || u == "byteLength" || u == "byteOffset") || // Skip index properties.
    ZM(u, l))) && s.push(u);
  return s;
}
var sVe = Object.prototype;
function tL(e12) {
  var t = e12 && e12.constructor, r = typeof t == "function" && t.prototype || sVe;
  return e12 === r;
}
function mJ(e12, t) {
  return function(r) {
    return e12(t(r));
  };
}
var lVe = mJ(Object.keys, Object);
var cVe = lVe;
var uVe = Object.prototype;
var hVe = uVe.hasOwnProperty;
function fVe(e12) {
  if (!tL(e12))
    return cVe(e12);
  var t = [];
  for (var r in Object(e12))
    hVe.call(e12, r) && r != "constructor" && t.push(r);
  return t;
}
function so(e12) {
  var t = typeof e12;
  return e12 != null && (t == "object" || t == "function");
}
var dVe = "[object AsyncFunction]";
var pVe = "[object Function]";
var mVe = "[object GeneratorFunction]";
var gVe = "[object Proxy]";
function rL(e12) {
  if (!so(e12))
    return false;
  var t = fc(e12);
  return t == pVe || t == mVe || t == dVe || t == gVe;
}
function Ip(e12) {
  return e12 != null && QM(e12.length) && !rL(e12);
}
function Ay(e12) {
  return Ip(e12) ? pJ(e12) : fVe(e12);
}
function gJ(e12, t) {
  return e12 && uJ(e12, t, Ay);
}
function DS(e12) {
  return e12;
}
function vJ(e12) {
  return typeof e12 == "function" ? e12 : DS;
}
function vVe(e12, t) {
  return e12 && gJ(e12, vJ(t));
}
var yVe = Object.freeze(Object.defineProperty({
  __proto__: null,
  default: vVe
}, Symbol.toStringTag, { value: "Module" }));
var nL = zs(yVe);
var _Ve = mJ(Object.getPrototypeOf, Object);
var iL = _Ve;
var bVe = "[object Object]";
var TVe = Function.prototype;
var EVe = Object.prototype;
var yJ = TVe.toString;
var SVe = EVe.hasOwnProperty;
var wVe = yJ.call(Object);
function _J(e12) {
  if (!ia(e12) || fc(e12) != bVe)
    return false;
  var t = iL(e12);
  if (t === null)
    return true;
  var r = SVe.call(t, "constructor") && t.constructor;
  return typeof r == "function" && r instanceof r && yJ.call(r) == wVe;
}
var AVe = Object.freeze(Object.defineProperty({
  __proto__: null,
  default: _J
}, Symbol.toStringTag, { value: "Module" }));
var OVe = zs(AVe);
function bJ(e12, t) {
  for (var r = -1, n = e12 == null ? 0 : e12.length, i = Array(n); ++r < n; )
    i[r] = t(e12[r], r, e12);
  return i;
}
function IVe() {
  this.__data__ = [], this.size = 0;
}
function Oy(e12, t) {
  return e12 === t || e12 !== e12 && t !== t;
}
function RS(e12, t) {
  for (var r = e12.length; r--; )
    if (Oy(e12[r][0], t))
      return r;
  return -1;
}
var PVe = Array.prototype;
var CVe = PVe.splice;
function xVe(e12) {
  var t = this.__data__, r = RS(t, e12);
  if (r < 0)
    return false;
  var n = t.length - 1;
  return r == n ? t.pop() : CVe.call(t, r, 1), --this.size, true;
}
function kVe(e12) {
  var t = this.__data__, r = RS(t, e12);
  return r < 0 ? void 0 : t[r][1];
}
function DVe(e12) {
  return RS(this.__data__, e12) > -1;
}
function RVe(e12, t) {
  var r = this.__data__, n = RS(r, e12);
  return n < 0 ? (++this.size, r.push([e12, t])) : r[n][1] = t, this;
}
function el(e12) {
  var t = -1, r = e12 == null ? 0 : e12.length;
  for (this.clear(); ++t < r; ) {
    var n = e12[t];
    this.set(n[0], n[1]);
  }
}
el.prototype.clear = IVe;
el.prototype.delete = xVe;
el.prototype.get = kVe;
el.prototype.has = DVe;
el.prototype.set = RVe;
function NVe() {
  this.__data__ = new el(), this.size = 0;
}
function MVe(e12) {
  var t = this.__data__, r = t.delete(e12);
  return this.size = t.size, r;
}
function LVe(e12) {
  return this.__data__.get(e12);
}
function BVe(e12) {
  return this.__data__.has(e12);
}
var FVe = fa["__core-js_shared__"];
var VO = FVe;
var Q4 = function() {
  var e12 = /[^.]+$/.exec(VO && VO.keys && VO.keys.IE_PROTO || "");
  return e12 ? "Symbol(src)_1." + e12 : "";
}();
function $Ve(e12) {
  return !!Q4 && Q4 in e12;
}
var HVe = Function.prototype;
var UVe = HVe.toString;
function ph(e12) {
  if (e12 != null) {
    try {
      return UVe.call(e12);
    } catch {
    }
    try {
      return e12 + "";
    } catch {
    }
  }
  return "";
}
var jVe = /[\\^$.*+?()[\]{}|]/g;
var GVe = /^\[object .+?Constructor\]$/;
var zVe = Function.prototype;
var VVe = Object.prototype;
var XVe = zVe.toString;
var WVe = VVe.hasOwnProperty;
var YVe = RegExp("^" + XVe.call(WVe).replace(jVe, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
function qVe(e12) {
  if (!so(e12) || $Ve(e12))
    return false;
  var t = rL(e12) ? YVe : GVe;
  return t.test(ph(e12));
}
function KVe(e12, t) {
  return e12 == null ? void 0 : e12[t];
}
function mh(e12, t) {
  var r = KVe(e12, t);
  return qVe(r) ? r : void 0;
}
var ZVe = mh(fa, "Map");
var Ov = ZVe;
var QVe = mh(Object, "create");
var Iv = QVe;
function JVe() {
  this.__data__ = Iv ? Iv(null) : {}, this.size = 0;
}
function e2e(e12) {
  var t = this.has(e12) && delete this.__data__[e12];
  return this.size -= t ? 1 : 0, t;
}
var t2e = "__lodash_hash_undefined__";
var r2e = Object.prototype;
var n2e = r2e.hasOwnProperty;
function i2e(e12) {
  var t = this.__data__;
  if (Iv) {
    var r = t[e12];
    return r === t2e ? void 0 : r;
  }
  return n2e.call(t, e12) ? t[e12] : void 0;
}
var o2e = Object.prototype;
var a2e = o2e.hasOwnProperty;
function s2e(e12) {
  var t = this.__data__;
  return Iv ? t[e12] !== void 0 : a2e.call(t, e12);
}
var l2e = "__lodash_hash_undefined__";
function c2e(e12, t) {
  var r = this.__data__;
  return this.size += this.has(e12) ? 0 : 1, r[e12] = Iv && t === void 0 ? l2e : t, this;
}
function zu(e12) {
  var t = -1, r = e12 == null ? 0 : e12.length;
  for (this.clear(); ++t < r; ) {
    var n = e12[t];
    this.set(n[0], n[1]);
  }
}
zu.prototype.clear = JVe;
zu.prototype.delete = e2e;
zu.prototype.get = i2e;
zu.prototype.has = s2e;
zu.prototype.set = c2e;
function u2e() {
  this.size = 0, this.__data__ = {
    hash: new zu(),
    map: new (Ov || el)(),
    string: new zu()
  };
}
function h2e(e12) {
  var t = typeof e12;
  return t == "string" || t == "number" || t == "symbol" || t == "boolean" ? e12 !== "__proto__" : e12 === null;
}
function NS(e12, t) {
  var r = e12.__data__;
  return h2e(t) ? r[typeof t == "string" ? "string" : "hash"] : r.map;
}
function f2e(e12) {
  var t = NS(this, e12).delete(e12);
  return this.size -= t ? 1 : 0, t;
}
function d2e(e12) {
  return NS(this, e12).get(e12);
}
function p2e(e12) {
  return NS(this, e12).has(e12);
}
function m2e(e12, t) {
  var r = NS(this, e12), n = r.size;
  return r.set(e12, t), this.size += r.size == n ? 0 : 1, this;
}
function tl(e12) {
  var t = -1, r = e12 == null ? 0 : e12.length;
  for (this.clear(); ++t < r; ) {
    var n = e12[t];
    this.set(n[0], n[1]);
  }
}
tl.prototype.clear = u2e;
tl.prototype.delete = f2e;
tl.prototype.get = d2e;
tl.prototype.has = p2e;
tl.prototype.set = m2e;
var g2e = 200;
function v2e(e12, t) {
  var r = this.__data__;
  if (r instanceof el) {
    var n = r.__data__;
    if (!Ov || n.length < g2e - 1)
      return n.push([e12, t]), this.size = ++r.size, this;
    r = this.__data__ = new tl(n);
  }
  return r.set(e12, t), this.size = r.size, this;
}
function ta(e12) {
  var t = this.__data__ = new el(e12);
  this.size = t.size;
}
ta.prototype.clear = NVe;
ta.prototype.delete = MVe;
ta.prototype.get = LVe;
ta.prototype.has = BVe;
ta.prototype.set = v2e;
var y2e = "__lodash_hash_undefined__";
function _2e(e12) {
  return this.__data__.set(e12, y2e), this;
}
function b2e(e12) {
  return this.__data__.has(e12);
}
function tE(e12) {
  var t = -1, r = e12 == null ? 0 : e12.length;
  for (this.__data__ = new tl(); ++t < r; )
    this.add(e12[t]);
}
tE.prototype.add = tE.prototype.push = _2e;
tE.prototype.has = b2e;
function T2e(e12, t) {
  for (var r = -1, n = e12 == null ? 0 : e12.length; ++r < n; )
    if (t(e12[r], r, e12))
      return true;
  return false;
}
function E2e(e12, t) {
  return e12.has(t);
}
var S2e = 1;
var w2e = 2;
function TJ(e12, t, r, n, i, o) {
  var a = r & S2e, s = e12.length, l = t.length;
  if (s != l && !(a && l > s))
    return false;
  var u = o.get(e12), c = o.get(t);
  if (u && c)
    return u == t && c == e12;
  var f = -1, h = true, d = r & w2e ? new tE() : void 0;
  for (o.set(e12, t), o.set(t, e12); ++f < s; ) {
    var p = e12[f], m = t[f];
    if (n)
      var g = a ? n(m, p, f, t, e12, o) : n(p, m, f, e12, t, o);
    if (g !== void 0) {
      if (g)
        continue;
      h = false;
      break;
    }
    if (d) {
      if (!T2e(t, function(v, _) {
        if (!E2e(d, _) && (p === v || i(p, v, r, n, o)))
          return d.push(_);
      })) {
        h = false;
        break;
      }
    } else if (!(p === m || i(p, m, r, n, o))) {
      h = false;
      break;
    }
  }
  return o.delete(e12), o.delete(t), h;
}
var A2e = fa.Uint8Array;
var rE = A2e;
function O2e(e12) {
  var t = -1, r = Array(e12.size);
  return e12.forEach(function(n, i) {
    r[++t] = [i, n];
  }), r;
}
function I2e(e12) {
  var t = -1, r = Array(e12.size);
  return e12.forEach(function(n) {
    r[++t] = n;
  }), r;
}
var P2e = 1;
var C2e = 2;
var x2e = "[object Boolean]";
var k2e = "[object Date]";
var D2e = "[object Error]";
var R2e = "[object Map]";
var N2e = "[object Number]";
var M2e = "[object RegExp]";
var L2e = "[object Set]";
var B2e = "[object String]";
var F2e = "[object Symbol]";
var $2e = "[object ArrayBuffer]";
var H2e = "[object DataView]";
var J4 = Ya ? Ya.prototype : void 0;
var XO = J4 ? J4.valueOf : void 0;
function U2e(e12, t, r, n, i, o, a) {
  switch (r) {
    case H2e:
      if (e12.byteLength != t.byteLength || e12.byteOffset != t.byteOffset)
        return false;
      e12 = e12.buffer, t = t.buffer;
    case $2e:
      return !(e12.byteLength != t.byteLength || !o(new rE(e12), new rE(t)));
    case x2e:
    case k2e:
    case N2e:
      return Oy(+e12, +t);
    case D2e:
      return e12.name == t.name && e12.message == t.message;
    case M2e:
    case B2e:
      return e12 == t + "";
    case R2e:
      var s = O2e;
    case L2e:
      var l = n & P2e;
      if (s || (s = I2e), e12.size != t.size && !l)
        return false;
      var u = a.get(e12);
      if (u)
        return u == t;
      n |= C2e, a.set(e12, t);
      var c = TJ(s(e12), s(t), n, i, o, a);
      return a.delete(e12), c;
    case F2e:
      if (XO)
        return XO.call(e12) == XO.call(t);
  }
  return false;
}
function EJ(e12, t) {
  for (var r = -1, n = t.length, i = e12.length; ++r < n; )
    e12[i + r] = t[r];
  return e12;
}
function SJ(e12, t, r) {
  var n = t(e12);
  return wi(e12) ? n : EJ(n, r(e12));
}
function j2e(e12, t) {
  for (var r = -1, n = e12 == null ? 0 : e12.length, i = 0, o = []; ++r < n; ) {
    var a = e12[r];
    t(a, r, e12) && (o[i++] = a);
  }
  return o;
}
function wJ() {
  return [];
}
var G2e = Object.prototype;
var z2e = G2e.propertyIsEnumerable;
var e62 = Object.getOwnPropertySymbols;
var V2e = e62 ? function(e12) {
  return e12 == null ? [] : (e12 = Object(e12), j2e(e62(e12), function(t) {
    return z2e.call(e12, t);
  }));
} : wJ;
var oL = V2e;
function mk(e12) {
  return SJ(e12, Ay, oL);
}
var X2e = 1;
var W2e = Object.prototype;
var Y2e = W2e.hasOwnProperty;
function q2e(e12, t, r, n, i, o) {
  var a = r & X2e, s = mk(e12), l = s.length, u = mk(t), c = u.length;
  if (l != c && !a)
    return false;
  for (var f = l; f--; ) {
    var h = s[f];
    if (!(a ? h in t : Y2e.call(t, h)))
      return false;
  }
  var d = o.get(e12), p = o.get(t);
  if (d && p)
    return d == t && p == e12;
  var m = true;
  o.set(e12, t), o.set(t, e12);
  for (var g = a; ++f < l; ) {
    h = s[f];
    var v = e12[h], _ = t[h];
    if (n)
      var y = a ? n(_, v, h, t, e12, o) : n(v, _, h, e12, t, o);
    if (!(y === void 0 ? v === _ || i(v, _, r, n, o) : y)) {
      m = false;
      break;
    }
    g || (g = h == "constructor");
  }
  if (m && !g) {
    var b = e12.constructor, T = t.constructor;
    b != T && "constructor" in e12 && "constructor" in t && !(typeof b == "function" && b instanceof b && typeof T == "function" && T instanceof T) && (m = false);
  }
  return o.delete(e12), o.delete(t), m;
}
var K2e = mh(fa, "DataView");
var gk = K2e;
var Z2e = mh(fa, "Promise");
var vk = Z2e;
var Q2e = mh(fa, "Set");
var yk = Q2e;
var J2e = mh(fa, "WeakMap");
var _k = J2e;
var t6 = "[object Map]";
var eXe = "[object Object]";
var r6 = "[object Promise]";
var n6 = "[object Set]";
var i6 = "[object WeakMap]";
var o6 = "[object DataView]";
var tXe = ph(gk);
var rXe = ph(Ov);
var nXe = ph(vk);
var iXe = ph(yk);
var oXe = ph(_k);
var $c = fc;
(gk && $c(new gk(new ArrayBuffer(1))) != o6 || Ov && $c(new Ov()) != t6 || vk && $c(vk.resolve()) != r6 || yk && $c(new yk()) != n6 || _k && $c(new _k()) != i6) && ($c = function(e12) {
  var t = fc(e12), r = t == eXe ? e12.constructor : void 0, n = r ? ph(r) : "";
  if (n)
    switch (n) {
      case tXe:
        return o6;
      case rXe:
        return t6;
      case nXe:
        return r6;
      case iXe:
        return n6;
      case oXe:
        return i6;
    }
  return t;
});
var Pv = $c;
var aXe = 1;
var a6 = "[object Arguments]";
var s6 = "[object Array]";
var z_ = "[object Object]";
var sXe = Object.prototype;
var l6 = sXe.hasOwnProperty;
function lXe(e12, t, r, n, i, o) {
  var a = wi(e12), s = wi(t), l = a ? s6 : Pv(e12), u = s ? s6 : Pv(t);
  l = l == a6 ? z_ : l, u = u == a6 ? z_ : u;
  var c = l == z_, f = u == z_, h = l == u;
  if (h && Av(e12)) {
    if (!Av(t))
      return false;
    a = true, c = false;
  }
  if (h && !c)
    return o || (o = new ta()), a || eL(e12) ? TJ(e12, t, r, n, i, o) : U2e(e12, t, l, r, n, i, o);
  if (!(r & aXe)) {
    var d = c && l6.call(e12, "__wrapped__"), p = f && l6.call(t, "__wrapped__");
    if (d || p) {
      var m = d ? e12.value() : e12, g = p ? t.value() : t;
      return o || (o = new ta()), i(m, g, r, n, o);
    }
  }
  return h ? (o || (o = new ta()), q2e(e12, t, r, n, i, o)) : false;
}
function aL(e12, t, r, n, i) {
  return e12 === t ? true : e12 == null || t == null || !ia(e12) && !ia(t) ? e12 !== e12 && t !== t : lXe(e12, t, r, n, aL, i);
}
var cXe = 1;
var uXe = 2;
function hXe(e12, t, r, n) {
  var i = r.length, o = i, a = !n;
  if (e12 == null)
    return !o;
  for (e12 = Object(e12); i--; ) {
    var s = r[i];
    if (a && s[2] ? s[1] !== e12[s[0]] : !(s[0] in e12))
      return false;
  }
  for (; ++i < o; ) {
    s = r[i];
    var l = s[0], u = e12[l], c = s[1];
    if (a && s[2]) {
      if (u === void 0 && !(l in e12))
        return false;
    } else {
      var f = new ta();
      if (n)
        var h = n(u, c, l, e12, t, f);
      if (!(h === void 0 ? aL(c, u, cXe | uXe, n, f) : h))
        return false;
    }
  }
  return true;
}
function AJ(e12) {
  return e12 === e12 && !so(e12);
}
function fXe(e12) {
  for (var t = Ay(e12), r = t.length; r--; ) {
    var n = t[r], i = e12[n];
    t[r] = [n, i, AJ(i)];
  }
  return t;
}
function OJ(e12, t) {
  return function(r) {
    return r == null ? false : r[e12] === t && (t !== void 0 || e12 in Object(r));
  };
}
function dXe(e12) {
  var t = fXe(e12);
  return t.length == 1 && t[0][2] ? OJ(t[0][0], t[0][1]) : function(r) {
    return r === e12 || hXe(r, e12, t);
  };
}
var pXe = "[object Symbol]";
function MS(e12) {
  return typeof e12 == "symbol" || ia(e12) && fc(e12) == pXe;
}
var mXe = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/;
var gXe = /^\w*$/;
function sL(e12, t) {
  if (wi(e12))
    return false;
  var r = typeof e12;
  return r == "number" || r == "symbol" || r == "boolean" || e12 == null || MS(e12) ? true : gXe.test(e12) || !mXe.test(e12) || t != null && e12 in Object(t);
}
var vXe = "Expected a function";
function lL(e12, t) {
  if (typeof e12 != "function" || t != null && typeof t != "function")
    throw new TypeError(vXe);
  var r = function() {
    var n = arguments, i = t ? t.apply(this, n) : n[0], o = r.cache;
    if (o.has(i))
      return o.get(i);
    var a = e12.apply(this, n);
    return r.cache = o.set(i, a) || o, a;
  };
  return r.cache = new (lL.Cache || tl)(), r;
}
lL.Cache = tl;
var yXe = 500;
function _Xe(e12) {
  var t = lL(e12, function(n) {
    return r.size === yXe && r.clear(), n;
  }), r = t.cache;
  return t;
}
var bXe = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
var TXe = /\\(\\)?/g;
var EXe = _Xe(function(e12) {
  var t = [];
  return e12.charCodeAt(0) === 46 && t.push(""), e12.replace(bXe, function(r, n, i, o) {
    t.push(i ? o.replace(TXe, "$1") : n || r);
  }), t;
});
var SXe = EXe;
var wXe = 1 / 0;
var c6 = Ya ? Ya.prototype : void 0;
var u6 = c6 ? c6.toString : void 0;
function IJ(e12) {
  if (typeof e12 == "string")
    return e12;
  if (wi(e12))
    return bJ(e12, IJ) + "";
  if (MS(e12))
    return u6 ? u6.call(e12) : "";
  var t = e12 + "";
  return t == "0" && 1 / e12 == -wXe ? "-0" : t;
}
function AXe(e12) {
  return e12 == null ? "" : IJ(e12);
}
function PJ(e12, t) {
  return wi(e12) ? e12 : sL(e12, t) ? [e12] : SXe(AXe(e12));
}
var OXe = 1 / 0;
function LS(e12) {
  if (typeof e12 == "string" || MS(e12))
    return e12;
  var t = e12 + "";
  return t == "0" && 1 / e12 == -OXe ? "-0" : t;
}
function CJ(e12, t) {
  t = PJ(t, e12);
  for (var r = 0, n = t.length; e12 != null && r < n; )
    e12 = e12[LS(t[r++])];
  return r && r == n ? e12 : void 0;
}
function IXe(e12, t, r) {
  var n = e12 == null ? void 0 : CJ(e12, t);
  return n === void 0 ? r : n;
}
function PXe(e12, t) {
  return e12 != null && t in Object(e12);
}
function CXe(e12, t, r) {
  t = PJ(t, e12);
  for (var n = -1, i = t.length, o = false; ++n < i; ) {
    var a = LS(t[n]);
    if (!(o = e12 != null && r(e12, a)))
      break;
    e12 = e12[a];
  }
  return o || ++n != i ? o : (i = e12 == null ? 0 : e12.length, !!i && QM(i) && ZM(a, i) && (wi(e12) || eE(e12)));
}
function xXe(e12, t) {
  return e12 != null && CXe(e12, t, PXe);
}
var kXe = 1;
var DXe = 2;
function RXe(e12, t) {
  return sL(e12) && AJ(t) ? OJ(LS(e12), t) : function(r) {
    var n = IXe(r, e12);
    return n === void 0 && n === t ? xXe(r, e12) : aL(t, n, kXe | DXe);
  };
}
function NXe(e12) {
  return function(t) {
    return t == null ? void 0 : t[e12];
  };
}
function MXe(e12) {
  return function(t) {
    return CJ(t, e12);
  };
}
function LXe(e12) {
  return sL(e12) ? NXe(LS(e12)) : MXe(e12);
}
function BXe(e12) {
  return typeof e12 == "function" ? e12 : e12 == null ? DS : typeof e12 == "object" ? wi(e12) ? RXe(e12[0], e12[1]) : dXe(e12) : LXe(e12);
}
function FXe(e12, t) {
  return function(r, n) {
    if (r == null)
      return r;
    if (!Ip(r))
      return e12(r, n);
    for (var i = r.length, o = t ? i : -1, a = Object(r); (t ? o-- : ++o < i) && n(a[o], o, a) !== false; )
      ;
    return r;
  };
}
var $Xe = FXe(gJ);
var xJ = $Xe;
function HXe(e12, t) {
  var r = -1, n = Ip(e12) ? Array(e12.length) : [];
  return xJ(e12, function(i, o, a) {
    n[++r] = t(i, o, a);
  }), n;
}
function dc(e12, t) {
  var r = wi(e12) ? bJ : HXe;
  return r(e12, BXe(t));
}
var UXe = Object.freeze(Object.defineProperty({
  __proto__: null,
  default: dc
}, Symbol.toStringTag, { value: "Module" }));
var jXe = zs(UXe);
Object.defineProperty(wy, "__esModule", {
  value: true
});
wy.flattenNames = void 0;
var GXe = g7e;
var zXe = BS(GXe);
var VXe = nL;
var XXe = BS(VXe);
var WXe = OVe;
var YXe = BS(WXe);
var qXe = jXe;
var KXe = BS(qXe);
function BS(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
var ZXe = wy.flattenNames = function e10() {
  var t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [], r = [];
  return (0, KXe.default)(t, function(n) {
    Array.isArray(n) ? e10(n).map(function(i) {
      return r.push(i);
    }) : (0, YXe.default)(n) ? (0, XXe.default)(n, function(i, o) {
      i === true && r.push(o), r.push(o + "-" + i);
    }) : (0, zXe.default)(n) && r.push(n);
  }), r;
};
wy.default = ZXe;
var Iy = {};
function kJ(e12, t) {
  for (var r = -1, n = e12 == null ? 0 : e12.length; ++r < n && t(e12[r], r, e12) !== false; )
    ;
  return e12;
}
var QXe = function() {
  try {
    var e12 = mh(Object, "defineProperty");
    return e12({}, "", {}), e12;
  } catch {
  }
}();
var nE = QXe;
function cL(e12, t, r) {
  t == "__proto__" && nE ? nE(e12, t, {
    configurable: true,
    enumerable: true,
    value: r,
    writable: true
  }) : e12[t] = r;
}
var JXe = Object.prototype;
var eWe = JXe.hasOwnProperty;
function DJ(e12, t, r) {
  var n = e12[t];
  (!(eWe.call(e12, t) && Oy(n, r)) || r === void 0 && !(t in e12)) && cL(e12, t, r);
}
function Py(e12, t, r, n) {
  var i = !r;
  r || (r = {});
  for (var o = -1, a = t.length; ++o < a; ) {
    var s = t[o], l = n ? n(r[s], e12[s], s, r, e12) : void 0;
    l === void 0 && (l = e12[s]), i ? cL(r, s, l) : DJ(r, s, l);
  }
  return r;
}
function tWe(e12, t) {
  return e12 && Py(t, Ay(t), e12);
}
function rWe(e12) {
  var t = [];
  if (e12 != null)
    for (var r in Object(e12))
      t.push(r);
  return t;
}
var nWe = Object.prototype;
var iWe = nWe.hasOwnProperty;
function oWe(e12) {
  if (!so(e12))
    return rWe(e12);
  var t = tL(e12), r = [];
  for (var n in e12)
    n == "constructor" && (t || !iWe.call(e12, n)) || r.push(n);
  return r;
}
function Cy(e12) {
  return Ip(e12) ? pJ(e12, true) : oWe(e12);
}
function aWe(e12, t) {
  return e12 && Py(t, Cy(t), e12);
}
var RJ = typeof exports == "object" && exports && !exports.nodeType && exports;
var h6 = RJ && typeof module == "object" && module && !module.nodeType && module;
var sWe = h6 && h6.exports === RJ;
var f6 = sWe ? fa.Buffer : void 0;
var d6 = f6 ? f6.allocUnsafe : void 0;
function NJ(e12, t) {
  if (t)
    return e12.slice();
  var r = e12.length, n = d6 ? d6(r) : new e12.constructor(r);
  return e12.copy(n), n;
}
function MJ(e12, t) {
  var r = -1, n = e12.length;
  for (t || (t = Array(n)); ++r < n; )
    t[r] = e12[r];
  return t;
}
function lWe(e12, t) {
  return Py(e12, oL(e12), t);
}
var cWe = Object.getOwnPropertySymbols;
var uWe = cWe ? function(e12) {
  for (var t = []; e12; )
    EJ(t, oL(e12)), e12 = iL(e12);
  return t;
} : wJ;
var LJ = uWe;
function hWe(e12, t) {
  return Py(e12, LJ(e12), t);
}
function fWe(e12) {
  return SJ(e12, Cy, LJ);
}
var dWe = Object.prototype;
var pWe = dWe.hasOwnProperty;
function mWe(e12) {
  var t = e12.length, r = new e12.constructor(t);
  return t && typeof e12[0] == "string" && pWe.call(e12, "index") && (r.index = e12.index, r.input = e12.input), r;
}
function uL(e12) {
  var t = new e12.constructor(e12.byteLength);
  return new rE(t).set(new rE(e12)), t;
}
function gWe(e12, t) {
  var r = t ? uL(e12.buffer) : e12.buffer;
  return new e12.constructor(r, e12.byteOffset, e12.byteLength);
}
var vWe = /\w*$/;
function yWe(e12) {
  var t = new e12.constructor(e12.source, vWe.exec(e12));
  return t.lastIndex = e12.lastIndex, t;
}
var p6 = Ya ? Ya.prototype : void 0;
var m6 = p6 ? p6.valueOf : void 0;
function _We(e12) {
  return m6 ? Object(m6.call(e12)) : {};
}
function BJ(e12, t) {
  var r = t ? uL(e12.buffer) : e12.buffer;
  return new e12.constructor(r, e12.byteOffset, e12.length);
}
var bWe = "[object Boolean]";
var TWe = "[object Date]";
var EWe = "[object Map]";
var SWe = "[object Number]";
var wWe = "[object RegExp]";
var AWe = "[object Set]";
var OWe = "[object String]";
var IWe = "[object Symbol]";
var PWe = "[object ArrayBuffer]";
var CWe = "[object DataView]";
var xWe = "[object Float32Array]";
var kWe = "[object Float64Array]";
var DWe = "[object Int8Array]";
var RWe = "[object Int16Array]";
var NWe = "[object Int32Array]";
var MWe = "[object Uint8Array]";
var LWe = "[object Uint8ClampedArray]";
var BWe = "[object Uint16Array]";
var FWe = "[object Uint32Array]";
function $We(e12, t, r) {
  var n = e12.constructor;
  switch (t) {
    case PWe:
      return uL(e12);
    case bWe:
    case TWe:
      return new n(+e12);
    case CWe:
      return gWe(e12, r);
    case xWe:
    case kWe:
    case DWe:
    case RWe:
    case NWe:
    case MWe:
    case LWe:
    case BWe:
    case FWe:
      return BJ(e12, r);
    case EWe:
      return new n();
    case SWe:
    case OWe:
      return new n(e12);
    case wWe:
      return yWe(e12);
    case AWe:
      return new n();
    case IWe:
      return _We(e12);
  }
}
var g6 = Object.create;
var HWe = /* @__PURE__ */ function() {
  function e12() {
  }
  return function(t) {
    if (!so(t))
      return {};
    if (g6)
      return g6(t);
    e12.prototype = t;
    var r = new e12();
    return e12.prototype = void 0, r;
  };
}();
var UWe = HWe;
function FJ(e12) {
  return typeof e12.constructor == "function" && !tL(e12) ? UWe(iL(e12)) : {};
}
var jWe = "[object Map]";
function GWe(e12) {
  return ia(e12) && Pv(e12) == jWe;
}
var v6 = Xd && Xd.isMap;
var zWe = v6 ? JM(v6) : GWe;
var VWe = zWe;
var XWe = "[object Set]";
function WWe(e12) {
  return ia(e12) && Pv(e12) == XWe;
}
var y6 = Xd && Xd.isSet;
var YWe = y6 ? JM(y6) : WWe;
var qWe = YWe;
var KWe = 1;
var ZWe = 2;
var QWe = 4;
var $J = "[object Arguments]";
var JWe = "[object Array]";
var eYe = "[object Boolean]";
var tYe = "[object Date]";
var rYe = "[object Error]";
var HJ = "[object Function]";
var nYe = "[object GeneratorFunction]";
var iYe = "[object Map]";
var oYe = "[object Number]";
var UJ = "[object Object]";
var aYe = "[object RegExp]";
var sYe = "[object Set]";
var lYe = "[object String]";
var cYe = "[object Symbol]";
var uYe = "[object WeakMap]";
var hYe = "[object ArrayBuffer]";
var fYe = "[object DataView]";
var dYe = "[object Float32Array]";
var pYe = "[object Float64Array]";
var mYe = "[object Int8Array]";
var gYe = "[object Int16Array]";
var vYe = "[object Int32Array]";
var yYe = "[object Uint8Array]";
var _Ye = "[object Uint8ClampedArray]";
var bYe = "[object Uint16Array]";
var TYe = "[object Uint32Array]";
var Or = {};
Or[$J] = Or[JWe] = Or[hYe] = Or[fYe] = Or[eYe] = Or[tYe] = Or[dYe] = Or[pYe] = Or[mYe] = Or[gYe] = Or[vYe] = Or[iYe] = Or[oYe] = Or[UJ] = Or[aYe] = Or[sYe] = Or[lYe] = Or[cYe] = Or[yYe] = Or[_Ye] = Or[bYe] = Or[TYe] = true;
Or[rYe] = Or[HJ] = Or[uYe] = false;
function Xb(e12, t, r, n, i, o) {
  var a, s = t & KWe, l = t & ZWe, u = t & QWe;
  if (r && (a = i ? r(e12, n, i, o) : r(e12)), a !== void 0)
    return a;
  if (!so(e12))
    return e12;
  var c = wi(e12);
  if (c) {
    if (a = mWe(e12), !s)
      return MJ(e12, a);
  } else {
    var f = Pv(e12), h = f == HJ || f == nYe;
    if (Av(e12))
      return NJ(e12, s);
    if (f == UJ || f == $J || h && !i) {
      if (a = l || h ? {} : FJ(e12), !s)
        return l ? hWe(e12, aWe(a, e12)) : lWe(e12, tWe(a, e12));
    } else {
      if (!Or[f])
        return i ? e12 : {};
      a = $We(e12, f, s);
    }
  }
  o || (o = new ta());
  var d = o.get(e12);
  if (d)
    return d;
  o.set(e12, a), qWe(e12) ? e12.forEach(function(g) {
    a.add(Xb(g, t, r, g, e12, o));
  }) : VWe(e12) && e12.forEach(function(g, v) {
    a.set(v, Xb(g, t, r, v, e12, o));
  });
  var p = u ? l ? fWe : mk : l ? Cy : Ay, m = c ? void 0 : p(e12);
  return kJ(m || e12, function(g, v) {
    m && (v = g, g = e12[v]), DJ(a, v, Xb(g, t, r, v, e12, o));
  }), a;
}
var EYe = 1;
var SYe = 4;
function wYe(e12) {
  return Xb(e12, EYe | SYe);
}
var AYe = Object.freeze(Object.defineProperty({
  __proto__: null,
  default: wYe
}, Symbol.toStringTag, { value: "Module" }));
var OYe = zs(AYe);
Object.defineProperty(Iy, "__esModule", {
  value: true
});
Iy.mergeClasses = void 0;
var IYe = nL;
var PYe = jJ(IYe);
var CYe = OYe;
var xYe = jJ(CYe);
var kYe = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
function jJ(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
var DYe = Iy.mergeClasses = function(t) {
  var r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [], n = t.default && (0, xYe.default)(t.default) || {};
  return r.map(function(i) {
    var o = t[i];
    return o && (0, PYe.default)(o, function(a, s) {
      n[s] || (n[s] = {}), n[s] = kYe({}, n[s], o[s]);
    }), i;
  }), n;
};
Iy.default = DYe;
var xy = {};
Object.defineProperty(xy, "__esModule", {
  value: true
});
xy.autoprefix = void 0;
var RYe = nL;
var _6 = MYe(RYe);
var NYe = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
function MYe(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
var LYe = {
  borderRadius: function(t) {
    return {
      msBorderRadius: t,
      MozBorderRadius: t,
      OBorderRadius: t,
      WebkitBorderRadius: t,
      borderRadius: t
    };
  },
  boxShadow: function(t) {
    return {
      msBoxShadow: t,
      MozBoxShadow: t,
      OBoxShadow: t,
      WebkitBoxShadow: t,
      boxShadow: t
    };
  },
  userSelect: function(t) {
    return {
      WebkitTouchCallout: t,
      KhtmlUserSelect: t,
      MozUserSelect: t,
      msUserSelect: t,
      WebkitUserSelect: t,
      userSelect: t
    };
  },
  flex: function(t) {
    return {
      WebkitBoxFlex: t,
      MozBoxFlex: t,
      WebkitFlex: t,
      msFlex: t,
      flex: t
    };
  },
  flexBasis: function(t) {
    return {
      WebkitFlexBasis: t,
      flexBasis: t
    };
  },
  justifyContent: function(t) {
    return {
      WebkitJustifyContent: t,
      justifyContent: t
    };
  },
  transition: function(t) {
    return {
      msTransition: t,
      MozTransition: t,
      OTransition: t,
      WebkitTransition: t,
      transition: t
    };
  },
  transform: function(t) {
    return {
      msTransform: t,
      MozTransform: t,
      OTransform: t,
      WebkitTransform: t,
      transform: t
    };
  },
  absolute: function(t) {
    var r = t && t.split(" ");
    return {
      position: "absolute",
      top: r && r[0],
      right: r && r[1],
      bottom: r && r[2],
      left: r && r[3]
    };
  },
  extend: function(t, r) {
    var n = r[t];
    return n || {
      extend: t
    };
  }
};
var BYe = xy.autoprefix = function(t) {
  var r = {};
  return (0, _6.default)(t, function(n, i) {
    var o = {};
    (0, _6.default)(n, function(a, s) {
      var l = LYe[s];
      l ? o = NYe({}, o, l(a)) : o[s] = a;
    }), r[i] = o;
  }), r;
};
xy.default = BYe;
var ky = {};
Object.defineProperty(ky, "__esModule", {
  value: true
});
ky.hover = void 0;
var FYe = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var $Ye = import_react.default;
var WO = HYe($Ye);
function HYe(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function UYe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function b6(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function jYe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var GYe = ky.hover = function(t) {
  var r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "span";
  return function(n) {
    jYe(i, n);
    function i() {
      var o, a, s, l;
      UYe(this, i);
      for (var u = arguments.length, c = Array(u), f = 0; f < u; f++)
        c[f] = arguments[f];
      return l = (a = (s = b6(this, (o = i.__proto__ || Object.getPrototypeOf(i)).call.apply(o, [this].concat(c))), s), s.state = {
        hover: false
      }, s.handleMouseOver = function() {
        return s.setState({
          hover: true
        });
      }, s.handleMouseOut = function() {
        return s.setState({
          hover: false
        });
      }, s.render = function() {
        return WO.default.createElement(r, {
          onMouseOver: s.handleMouseOver,
          onMouseOut: s.handleMouseOut
        }, WO.default.createElement(t, FYe({}, s.props, s.state)));
      }, a), b6(s, l);
    }
    return i;
  }(WO.default.Component);
};
ky.default = GYe;
var Dy = {};
Object.defineProperty(Dy, "__esModule", {
  value: true
});
Dy.active = void 0;
var zYe = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var VYe = import_react.default;
var YO = XYe(VYe);
function XYe(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function WYe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function T6(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function YYe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var qYe = Dy.active = function(t) {
  var r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "span";
  return function(n) {
    YYe(i, n);
    function i() {
      var o, a, s, l;
      WYe(this, i);
      for (var u = arguments.length, c = Array(u), f = 0; f < u; f++)
        c[f] = arguments[f];
      return l = (a = (s = T6(this, (o = i.__proto__ || Object.getPrototypeOf(i)).call.apply(o, [this].concat(c))), s), s.state = {
        active: false
      }, s.handleMouseDown = function() {
        return s.setState({
          active: true
        });
      }, s.handleMouseUp = function() {
        return s.setState({
          active: false
        });
      }, s.render = function() {
        return YO.default.createElement(r, {
          onMouseDown: s.handleMouseDown,
          onMouseUp: s.handleMouseUp
        }, YO.default.createElement(t, zYe({}, s.props, s.state)));
      }, a), T6(s, l);
    }
    return i;
  }(YO.default.Component);
};
Dy.default = qYe;
var hL = {};
Object.defineProperty(hL, "__esModule", {
  value: true
});
var KYe = function(t, r) {
  var n = {}, i = function(a) {
    var s = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
    n[a] = s;
  };
  return t === 0 && i("first-child"), t === r - 1 && i("last-child"), (t === 0 || t % 2 === 0) && i("even"), Math.abs(t % 2) === 1 && i("odd"), i("nth-child", t), n;
};
hL.default = KYe;
Object.defineProperty(Eo, "__esModule", {
  value: true
});
Eo.ReactCSS = Eo.loop = Eo.handleActive = fL = Eo.handleHover = Eo.hover = void 0;
var ZYe = wy;
var QYe = Pp(ZYe);
var JYe = Iy;
var eqe = Pp(JYe);
var tqe = xy;
var rqe = Pp(tqe);
var nqe = ky;
var GJ = Pp(nqe);
var iqe = Dy;
var oqe = Pp(iqe);
var aqe = hL;
var sqe = Pp(aqe);
function Pp(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
Eo.hover = GJ.default;
var fL = Eo.handleHover = GJ.default;
Eo.handleActive = oqe.default;
Eo.loop = sqe.default;
var lqe = Eo.ReactCSS = function(t) {
  for (var r = arguments.length, n = Array(r > 1 ? r - 1 : 0), i = 1; i < r; i++)
    n[i - 1] = arguments[i];
  var o = (0, QYe.default)(n), a = (0, eqe.default)(t, o);
  return (0, rqe.default)(a);
};
var wt = Eo.default = lqe;
var cqe = function(t, r, n, i, o) {
  var a = o.clientWidth, s = o.clientHeight, l = typeof t.pageX == "number" ? t.pageX : t.touches[0].pageX, u = typeof t.pageY == "number" ? t.pageY : t.touches[0].pageY, c = l - (o.getBoundingClientRect().left + window.pageXOffset), f = u - (o.getBoundingClientRect().top + window.pageYOffset);
  if (n === "vertical") {
    var h = void 0;
    if (f < 0 ? h = 0 : f > s ? h = 1 : h = Math.round(f * 100 / s) / 100, r.a !== h)
      return {
        h: r.h,
        s: r.s,
        l: r.l,
        a: h,
        source: "rgb"
      };
  } else {
    var d = void 0;
    if (c < 0 ? d = 0 : c > a ? d = 1 : d = Math.round(c * 100 / a) / 100, i !== d)
      return {
        h: r.h,
        s: r.s,
        l: r.l,
        a: d,
        source: "rgb"
      };
  }
  return null;
};
var qO = {};
var uqe = function(t, r, n, i) {
  if (typeof document > "u" && !i)
    return null;
  var o = i ? new i() : document.createElement("canvas");
  o.width = n * 2, o.height = n * 2;
  var a = o.getContext("2d");
  return a ? (a.fillStyle = t, a.fillRect(0, 0, o.width, o.height), a.fillStyle = r, a.fillRect(0, 0, n, n), a.translate(n, n), a.fillRect(0, 0, n, n), o.toDataURL()) : null;
};
var hqe = function(t, r, n, i) {
  var o = t + "-" + r + "-" + n + (i ? "-server" : "");
  if (qO[o])
    return qO[o];
  var a = uqe(t, r, n, i);
  return qO[o] = a, a;
};
var E6 = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var Cp = function(t) {
  var r = t.white, n = t.grey, i = t.size, o = t.renderers, a = t.borderRadius, s = t.boxShadow, l = t.children, u = wt({
    default: {
      grid: {
        borderRadius: a,
        boxShadow: s,
        absolute: "0px 0px 0px 0px",
        background: "url(" + hqe(r, n, i, o.canvas) + ") center left"
      }
    }
  });
  return (0, import_react.isValidElement)(l) ? import_react.default.cloneElement(l, E6({}, l.props, {
    style: E6({}, l.props.style, u.grid)
  })) : import_react.default.createElement("div", {
    style: u.grid
  });
};
Cp.defaultProps = {
  size: 8,
  white: "transparent",
  grey: "rgba(0,0,0,.08)",
  renderers: {}
};
var fqe = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var dqe = /* @__PURE__ */ function() {
  function e12(t, r) {
    for (var n = 0; n < r.length; n++) {
      var i = r[n];
      i.enumerable = i.enumerable || false, i.configurable = true, "value" in i && (i.writable = true), Object.defineProperty(t, i.key, i);
    }
  }
  return function(t, r, n) {
    return r && e12(t.prototype, r), n && e12(t, n), t;
  };
}();
function pqe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function S6(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function mqe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var dL = function(e12) {
  mqe(t, e12);
  function t() {
    var r, n, i, o;
    pqe(this, t);
    for (var a = arguments.length, s = Array(a), l = 0; l < a; l++)
      s[l] = arguments[l];
    return o = (n = (i = S6(this, (r = t.__proto__ || Object.getPrototypeOf(t)).call.apply(r, [this].concat(s))), i), i.handleChange = function(u) {
      var c = cqe(u, i.props.hsl, i.props.direction, i.props.a, i.container);
      c && typeof i.props.onChange == "function" && i.props.onChange(c, u);
    }, i.handleMouseDown = function(u) {
      i.handleChange(u), window.addEventListener("mousemove", i.handleChange), window.addEventListener("mouseup", i.handleMouseUp);
    }, i.handleMouseUp = function() {
      i.unbindEventListeners();
    }, i.unbindEventListeners = function() {
      window.removeEventListener("mousemove", i.handleChange), window.removeEventListener("mouseup", i.handleMouseUp);
    }, n), S6(i, o);
  }
  return dqe(t, [{
    key: "componentWillUnmount",
    value: function() {
      this.unbindEventListeners();
    }
  }, {
    key: "render",
    value: function() {
      var n = this, i = this.props.rgb, o = wt({
        default: {
          alpha: {
            absolute: "0px 0px 0px 0px",
            borderRadius: this.props.radius
          },
          checkboard: {
            absolute: "0px 0px 0px 0px",
            overflow: "hidden",
            borderRadius: this.props.radius
          },
          gradient: {
            absolute: "0px 0px 0px 0px",
            background: "linear-gradient(to right, rgba(" + i.r + "," + i.g + "," + i.b + `, 0) 0%,
           rgba(` + i.r + "," + i.g + "," + i.b + ", 1) 100%)",
            boxShadow: this.props.shadow,
            borderRadius: this.props.radius
          },
          container: {
            position: "relative",
            height: "100%",
            margin: "0 3px"
          },
          pointer: {
            position: "absolute",
            left: i.a * 100 + "%"
          },
          slider: {
            width: "4px",
            borderRadius: "1px",
            height: "8px",
            boxShadow: "0 0 2px rgba(0, 0, 0, .6)",
            background: "#fff",
            marginTop: "1px",
            transform: "translateX(-2px)"
          }
        },
        vertical: {
          gradient: {
            background: "linear-gradient(to bottom, rgba(" + i.r + "," + i.g + "," + i.b + `, 0) 0%,
           rgba(` + i.r + "," + i.g + "," + i.b + ", 1) 100%)"
          },
          pointer: {
            left: 0,
            top: i.a * 100 + "%"
          }
        },
        overwrite: fqe({}, this.props.style)
      }, {
        vertical: this.props.direction === "vertical",
        overwrite: true
      });
      return import_react.default.createElement("div", {
        style: o.alpha
      }, import_react.default.createElement("div", {
        style: o.checkboard
      }, import_react.default.createElement(Cp, {
        renderers: this.props.renderers
      })), import_react.default.createElement("div", {
        style: o.gradient
      }), import_react.default.createElement("div", {
        style: o.container,
        ref: function(s) {
          return n.container = s;
        },
        onMouseDown: this.handleMouseDown,
        onTouchMove: this.handleChange,
        onTouchStart: this.handleChange
      }, import_react.default.createElement("div", {
        style: o.pointer
      }, this.props.pointer ? import_react.default.createElement(this.props.pointer, this.props) : import_react.default.createElement("div", {
        style: o.slider
      }))));
    }
  }]), t;
}(import_react.PureComponent || import_react.Component);
var gqe = /* @__PURE__ */ function() {
  function e12(t, r) {
    for (var n = 0; n < r.length; n++) {
      var i = r[n];
      i.enumerable = i.enumerable || false, i.configurable = true, "value" in i && (i.writable = true), Object.defineProperty(t, i.key, i);
    }
  }
  return function(t, r, n) {
    return r && e12(t.prototype, r), n && e12(t, n), t;
  };
}();
function vqe(e12, t, r) {
  return t in e12 ? Object.defineProperty(e12, t, {
    value: r,
    enumerable: true,
    configurable: true,
    writable: true
  }) : e12[t] = r, e12;
}
function yqe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function _qe(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function bqe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var Tqe = 1;
var zJ = 38;
var Eqe = 40;
var Sqe = [zJ, Eqe];
var wqe = function(t) {
  return Sqe.indexOf(t) > -1;
};
var Aqe = function(t) {
  return Number(String(t).replace(/%/g, ""));
};
var Oqe = 1;
var tr = function(e12) {
  bqe(t, e12);
  function t(r) {
    yqe(this, t);
    var n = _qe(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
    return n.handleBlur = function() {
      n.state.blurValue && n.setState({
        value: n.state.blurValue,
        blurValue: null
      });
    }, n.handleChange = function(i) {
      n.setUpdatedValue(i.target.value, i);
    }, n.handleKeyDown = function(i) {
      var o = Aqe(i.target.value);
      if (!isNaN(o) && wqe(i.keyCode)) {
        var a = n.getArrowOffset(), s = i.keyCode === zJ ? o + a : o - a;
        n.setUpdatedValue(s, i);
      }
    }, n.handleDrag = function(i) {
      if (n.props.dragLabel) {
        var o = Math.round(n.props.value + i.movementX);
        o >= 0 && o <= n.props.dragMax && n.props.onChange && n.props.onChange(n.getValueObjectWithLabel(o), i);
      }
    }, n.handleMouseDown = function(i) {
      n.props.dragLabel && (i.preventDefault(), n.handleDrag(i), window.addEventListener("mousemove", n.handleDrag), window.addEventListener("mouseup", n.handleMouseUp));
    }, n.handleMouseUp = function() {
      n.unbindEventListeners();
    }, n.unbindEventListeners = function() {
      window.removeEventListener("mousemove", n.handleDrag), window.removeEventListener("mouseup", n.handleMouseUp);
    }, n.state = {
      value: String(r.value).toUpperCase(),
      blurValue: String(r.value).toUpperCase()
    }, n.inputId = "rc-editable-input-" + Oqe++, n;
  }
  return gqe(t, [{
    key: "componentDidUpdate",
    value: function(n, i) {
      this.props.value !== this.state.value && (n.value !== this.props.value || i.value !== this.state.value) && (this.input === document.activeElement ? this.setState({
        blurValue: String(this.props.value).toUpperCase()
      }) : this.setState({
        value: String(this.props.value).toUpperCase(),
        blurValue: !this.state.blurValue && String(this.props.value).toUpperCase()
      }));
    }
  }, {
    key: "componentWillUnmount",
    value: function() {
      this.unbindEventListeners();
    }
  }, {
    key: "getValueObjectWithLabel",
    value: function(n) {
      return vqe({}, this.props.label, n);
    }
  }, {
    key: "getArrowOffset",
    value: function() {
      return this.props.arrowOffset || Tqe;
    }
  }, {
    key: "setUpdatedValue",
    value: function(n, i) {
      var o = this.props.label ? this.getValueObjectWithLabel(n) : n;
      this.props.onChange && this.props.onChange(o, i), this.setState({
        value: n
      });
    }
  }, {
    key: "render",
    value: function() {
      var n = this, i = wt({
        default: {
          wrap: {
            position: "relative"
          }
        },
        "user-override": {
          wrap: this.props.style && this.props.style.wrap ? this.props.style.wrap : {},
          input: this.props.style && this.props.style.input ? this.props.style.input : {},
          label: this.props.style && this.props.style.label ? this.props.style.label : {}
        },
        "dragLabel-true": {
          label: {
            cursor: "ew-resize"
          }
        }
      }, {
        "user-override": true
      }, this.props);
      return import_react.default.createElement("div", {
        style: i.wrap
      }, import_react.default.createElement("input", {
        id: this.inputId,
        style: i.input,
        ref: function(a) {
          return n.input = a;
        },
        value: this.state.value,
        onKeyDown: this.handleKeyDown,
        onChange: this.handleChange,
        onBlur: this.handleBlur,
        placeholder: this.props.placeholder,
        spellCheck: "false"
      }), this.props.label && !this.props.hideLabel ? import_react.default.createElement("label", {
        htmlFor: this.inputId,
        style: i.label,
        onMouseDown: this.handleMouseDown
      }, this.props.label) : null);
    }
  }]), t;
}(import_react.PureComponent || import_react.Component);
var Iqe = function(t, r, n, i) {
  var o = i.clientWidth, a = i.clientHeight, s = typeof t.pageX == "number" ? t.pageX : t.touches[0].pageX, l = typeof t.pageY == "number" ? t.pageY : t.touches[0].pageY, u = s - (i.getBoundingClientRect().left + window.pageXOffset), c = l - (i.getBoundingClientRect().top + window.pageYOffset);
  if (r === "vertical") {
    var f = void 0;
    if (c < 0)
      f = 359;
    else if (c > a)
      f = 0;
    else {
      var h = -(c * 100 / a) + 100;
      f = 360 * h / 100;
    }
    if (n.h !== f)
      return {
        h: f,
        s: n.s,
        l: n.l,
        a: n.a,
        source: "hsl"
      };
  } else {
    var d = void 0;
    if (u < 0)
      d = 0;
    else if (u > o)
      d = 359;
    else {
      var p = u * 100 / o;
      d = 360 * p / 100;
    }
    if (n.h !== d)
      return {
        h: d,
        s: n.s,
        l: n.l,
        a: n.a,
        source: "hsl"
      };
  }
  return null;
};
var Pqe = /* @__PURE__ */ function() {
  function e12(t, r) {
    for (var n = 0; n < r.length; n++) {
      var i = r[n];
      i.enumerable = i.enumerable || false, i.configurable = true, "value" in i && (i.writable = true), Object.defineProperty(t, i.key, i);
    }
  }
  return function(t, r, n) {
    return r && e12(t.prototype, r), n && e12(t, n), t;
  };
}();
function Cqe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function w6(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function xqe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var xp = function(e12) {
  xqe(t, e12);
  function t() {
    var r, n, i, o;
    Cqe(this, t);
    for (var a = arguments.length, s = Array(a), l = 0; l < a; l++)
      s[l] = arguments[l];
    return o = (n = (i = w6(this, (r = t.__proto__ || Object.getPrototypeOf(t)).call.apply(r, [this].concat(s))), i), i.handleChange = function(u) {
      var c = Iqe(u, i.props.direction, i.props.hsl, i.container);
      c && typeof i.props.onChange == "function" && i.props.onChange(c, u);
    }, i.handleMouseDown = function(u) {
      i.handleChange(u), window.addEventListener("mousemove", i.handleChange), window.addEventListener("mouseup", i.handleMouseUp);
    }, i.handleMouseUp = function() {
      i.unbindEventListeners();
    }, n), w6(i, o);
  }
  return Pqe(t, [{
    key: "componentWillUnmount",
    value: function() {
      this.unbindEventListeners();
    }
  }, {
    key: "unbindEventListeners",
    value: function() {
      window.removeEventListener("mousemove", this.handleChange), window.removeEventListener("mouseup", this.handleMouseUp);
    }
  }, {
    key: "render",
    value: function() {
      var n = this, i = this.props.direction, o = i === void 0 ? "horizontal" : i, a = wt({
        default: {
          hue: {
            absolute: "0px 0px 0px 0px",
            borderRadius: this.props.radius,
            boxShadow: this.props.shadow
          },
          container: {
            padding: "0 2px",
            position: "relative",
            height: "100%",
            borderRadius: this.props.radius
          },
          pointer: {
            position: "absolute",
            left: this.props.hsl.h * 100 / 360 + "%"
          },
          slider: {
            marginTop: "1px",
            width: "4px",
            borderRadius: "1px",
            height: "8px",
            boxShadow: "0 0 2px rgba(0, 0, 0, .6)",
            background: "#fff",
            transform: "translateX(-2px)"
          }
        },
        vertical: {
          pointer: {
            left: "0px",
            top: -(this.props.hsl.h * 100 / 360) + 100 + "%"
          }
        }
      }, {
        vertical: o === "vertical"
      });
      return import_react.default.createElement("div", {
        style: a.hue
      }, import_react.default.createElement("div", {
        className: "hue-" + o,
        style: a.container,
        ref: function(l) {
          return n.container = l;
        },
        onMouseDown: this.handleMouseDown,
        onTouchMove: this.handleChange,
        onTouchStart: this.handleChange
      }, import_react.default.createElement("style", null, `
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `), import_react.default.createElement("div", {
        style: a.pointer
      }, this.props.pointer ? import_react.default.createElement(this.props.pointer, this.props) : import_react.default.createElement("div", {
        style: a.slider
      }))));
    }
  }]), t;
}(import_react.PureComponent || import_react.Component);
function bk(e12, t, r) {
  (r !== void 0 && !Oy(e12[t], r) || r === void 0 && !(t in e12)) && cL(e12, t, r);
}
function kqe(e12) {
  return ia(e12) && Ip(e12);
}
function Tk(e12, t) {
  if (!(t === "constructor" && typeof e12[t] == "function") && t != "__proto__")
    return e12[t];
}
function Dqe(e12) {
  return Py(e12, Cy(e12));
}
function Rqe(e12, t, r, n, i, o, a) {
  var s = Tk(e12, r), l = Tk(t, r), u = a.get(l);
  if (u) {
    bk(e12, r, u);
    return;
  }
  var c = o ? o(s, l, r + "", e12, t, a) : void 0, f = c === void 0;
  if (f) {
    var h = wi(l), d = !h && Av(l), p = !h && !d && eL(l);
    c = l, h || d || p ? wi(s) ? c = s : kqe(s) ? c = MJ(s) : d ? (f = false, c = NJ(l, true)) : p ? (f = false, c = BJ(l, true)) : c = [] : _J(l) || eE(l) ? (c = s, eE(s) ? c = Dqe(s) : (!so(s) || rL(s)) && (c = FJ(l))) : f = false;
  }
  f && (a.set(l, c), i(c, l, n, o, a), a.delete(l)), bk(e12, r, c);
}
function VJ(e12, t, r, n, i) {
  e12 !== t && uJ(t, function(o, a) {
    if (i || (i = new ta()), so(o))
      Rqe(e12, t, a, r, VJ, n, i);
    else {
      var s = n ? n(Tk(e12, a), o, a + "", e12, t, i) : void 0;
      s === void 0 && (s = o), bk(e12, a, s);
    }
  }, Cy);
}
function Nqe(e12, t, r) {
  switch (r.length) {
    case 0:
      return e12.call(t);
    case 1:
      return e12.call(t, r[0]);
    case 2:
      return e12.call(t, r[0], r[1]);
    case 3:
      return e12.call(t, r[0], r[1], r[2]);
  }
  return e12.apply(t, r);
}
var A6 = Math.max;
function Mqe(e12, t, r) {
  return t = A6(t === void 0 ? e12.length - 1 : t, 0), function() {
    for (var n = arguments, i = -1, o = A6(n.length - t, 0), a = Array(o); ++i < o; )
      a[i] = n[t + i];
    i = -1;
    for (var s = Array(t + 1); ++i < t; )
      s[i] = n[i];
    return s[t] = r(a), Nqe(e12, this, s);
  };
}
function Lqe(e12) {
  return function() {
    return e12;
  };
}
var Bqe = nE ? function(e12, t) {
  return nE(e12, "toString", {
    configurable: true,
    enumerable: false,
    value: Lqe(t),
    writable: true
  });
} : DS;
var Fqe = Bqe;
var $qe = 800;
var Hqe = 16;
var Uqe = Date.now;
function jqe(e12) {
  var t = 0, r = 0;
  return function() {
    var n = Uqe(), i = Hqe - (n - r);
    if (r = n, i > 0) {
      if (++t >= $qe)
        return arguments[0];
    } else
      t = 0;
    return e12.apply(void 0, arguments);
  };
}
var Gqe = jqe(Fqe);
var zqe = Gqe;
function Vqe(e12, t) {
  return zqe(Mqe(e12, t, DS), e12 + "");
}
function Xqe(e12, t, r) {
  if (!so(r))
    return false;
  var n = typeof t;
  return (n == "number" ? Ip(r) && ZM(t, r.length) : n == "string" && t in r) ? Oy(r[t], e12) : false;
}
function Wqe(e12) {
  return Vqe(function(t, r) {
    var n = -1, i = r.length, o = i > 1 ? r[i - 1] : void 0, a = i > 2 ? r[2] : void 0;
    for (o = e12.length > 3 && typeof o == "function" ? (i--, o) : void 0, a && Xqe(r[0], r[1], a) && (o = i < 3 ? void 0 : o, i = 1), t = Object(t); ++n < i; ) {
      var s = r[n];
      s && e12(t, s, n, o);
    }
    return t;
  });
}
var Yqe = Wqe(function(e12, t, r) {
  VJ(e12, t, r);
});
var Gi = Yqe;
var Ry = function(t) {
  var r = t.zDepth, n = t.radius, i = t.background, o = t.children, a = t.styles, s = a === void 0 ? {} : a, l = wt(Gi({
    default: {
      wrap: {
        position: "relative",
        display: "inline-block"
      },
      content: {
        position: "relative"
      },
      bg: {
        absolute: "0px 0px 0px 0px",
        boxShadow: "0 " + r + "px " + r * 4 + "px rgba(0,0,0,.24)",
        borderRadius: n,
        background: i
      }
    },
    "zDepth-0": {
      bg: {
        boxShadow: "none"
      }
    },
    "zDepth-1": {
      bg: {
        boxShadow: "0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"
      }
    },
    "zDepth-2": {
      bg: {
        boxShadow: "0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"
      }
    },
    "zDepth-3": {
      bg: {
        boxShadow: "0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"
      }
    },
    "zDepth-4": {
      bg: {
        boxShadow: "0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"
      }
    },
    "zDepth-5": {
      bg: {
        boxShadow: "0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"
      }
    },
    square: {
      bg: {
        borderRadius: "0"
      }
    },
    circle: {
      bg: {
        borderRadius: "50%"
      }
    }
  }, s), {
    "zDepth-1": r === 1
  });
  return import_react.default.createElement("div", {
    style: l.wrap
  }, import_react.default.createElement("div", {
    style: l.bg
  }), import_react.default.createElement("div", {
    style: l.content
  }, o));
};
Ry.propTypes = {
  background: L.string,
  zDepth: L.oneOf([0, 1, 2, 3, 4, 5]),
  radius: L.number,
  styles: L.object
};
Ry.defaultProps = {
  background: "#fff",
  zDepth: 1,
  radius: 2,
  styles: {}
};
var qqe = function() {
  return fa.Date.now();
};
var KO = qqe;
var Kqe = /\s/;
function Zqe(e12) {
  for (var t = e12.length; t-- && Kqe.test(e12.charAt(t)); )
    ;
  return t;
}
var Qqe = /^\s+/;
function Jqe(e12) {
  return e12 && e12.slice(0, Zqe(e12) + 1).replace(Qqe, "");
}
var O6 = 0 / 0;
var eKe = /^[-+]0x[0-9a-f]+$/i;
var tKe = /^0b[01]+$/i;
var rKe = /^0o[0-7]+$/i;
var nKe = parseInt;
function I6(e12) {
  if (typeof e12 == "number")
    return e12;
  if (MS(e12))
    return O6;
  if (so(e12)) {
    var t = typeof e12.valueOf == "function" ? e12.valueOf() : e12;
    e12 = so(t) ? t + "" : t;
  }
  if (typeof e12 != "string")
    return e12 === 0 ? e12 : +e12;
  e12 = Jqe(e12);
  var r = tKe.test(e12);
  return r || rKe.test(e12) ? nKe(e12.slice(2), r ? 2 : 8) : eKe.test(e12) ? O6 : +e12;
}
var iKe = "Expected a function";
var oKe = Math.max;
var aKe = Math.min;
function XJ(e12, t, r) {
  var n, i, o, a, s, l, u = 0, c = false, f = false, h = true;
  if (typeof e12 != "function")
    throw new TypeError(iKe);
  t = I6(t) || 0, so(r) && (c = !!r.leading, f = "maxWait" in r, o = f ? oKe(I6(r.maxWait) || 0, t) : o, h = "trailing" in r ? !!r.trailing : h);
  function d(E) {
    var P = n, A = i;
    return n = i = void 0, u = E, a = e12.apply(A, P), a;
  }
  function p(E) {
    return u = E, s = setTimeout(v, t), c ? d(E) : a;
  }
  function m(E) {
    var P = E - l, A = E - u, I = t - P;
    return f ? aKe(I, o - A) : I;
  }
  function g(E) {
    var P = E - l, A = E - u;
    return l === void 0 || P >= t || P < 0 || f && A >= o;
  }
  function v() {
    var E = KO();
    if (g(E))
      return _(E);
    s = setTimeout(v, m(E));
  }
  function _(E) {
    return s = void 0, h && n ? d(E) : (n = i = void 0, a);
  }
  function y() {
    s !== void 0 && clearTimeout(s), u = 0, n = l = i = s = void 0;
  }
  function b() {
    return s === void 0 ? a : _(KO());
  }
  function T() {
    var E = KO(), P = g(E);
    if (n = arguments, i = this, l = E, P) {
      if (s === void 0)
        return p(l);
      if (f)
        return clearTimeout(s), s = setTimeout(v, t), d(l);
    }
    return s === void 0 && (s = setTimeout(v, t)), a;
  }
  return T.cancel = y, T.flush = b, T;
}
var sKe = "Expected a function";
function lKe(e12, t, r) {
  var n = true, i = true;
  if (typeof e12 != "function")
    throw new TypeError(sKe);
  return so(r) && (n = "leading" in r ? !!r.leading : n, i = "trailing" in r ? !!r.trailing : i), XJ(e12, t, {
    leading: n,
    maxWait: t,
    trailing: i
  });
}
var cKe = function(t, r, n) {
  var i = n.getBoundingClientRect(), o = i.width, a = i.height, s = typeof t.pageX == "number" ? t.pageX : t.touches[0].pageX, l = typeof t.pageY == "number" ? t.pageY : t.touches[0].pageY, u = s - (n.getBoundingClientRect().left + window.pageXOffset), c = l - (n.getBoundingClientRect().top + window.pageYOffset);
  u < 0 ? u = 0 : u > o && (u = o), c < 0 ? c = 0 : c > a && (c = a);
  var f = u / o, h = 1 - c / a;
  return {
    h: r.h,
    s: f,
    v: h,
    a: r.a,
    source: "hsv"
  };
};
var uKe = /* @__PURE__ */ function() {
  function e12(t, r) {
    for (var n = 0; n < r.length; n++) {
      var i = r[n];
      i.enumerable = i.enumerable || false, i.configurable = true, "value" in i && (i.writable = true), Object.defineProperty(t, i.key, i);
    }
  }
  return function(t, r, n) {
    return r && e12(t.prototype, r), n && e12(t, n), t;
  };
}();
function hKe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function fKe(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function dKe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var FS = function(e12) {
  dKe(t, e12);
  function t(r) {
    hKe(this, t);
    var n = fKe(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, r));
    return n.handleChange = function(i) {
      typeof n.props.onChange == "function" && n.throttle(n.props.onChange, cKe(i, n.props.hsl, n.container), i);
    }, n.handleMouseDown = function(i) {
      n.handleChange(i);
      var o = n.getContainerRenderWindow();
      o.addEventListener("mousemove", n.handleChange), o.addEventListener("mouseup", n.handleMouseUp);
    }, n.handleMouseUp = function() {
      n.unbindEventListeners();
    }, n.throttle = lKe(function(i, o, a) {
      i(o, a);
    }, 50), n;
  }
  return uKe(t, [{
    key: "componentWillUnmount",
    value: function() {
      this.throttle.cancel(), this.unbindEventListeners();
    }
  }, {
    key: "getContainerRenderWindow",
    value: function() {
      for (var n = this.container, i = window; !i.document.contains(n) && i.parent !== i; )
        i = i.parent;
      return i;
    }
  }, {
    key: "unbindEventListeners",
    value: function() {
      var n = this.getContainerRenderWindow();
      n.removeEventListener("mousemove", this.handleChange), n.removeEventListener("mouseup", this.handleMouseUp);
    }
  }, {
    key: "render",
    value: function() {
      var n = this, i = this.props.style || {}, o = i.color, a = i.white, s = i.black, l = i.pointer, u = i.circle, c = wt({
        default: {
          color: {
            absolute: "0px 0px 0px 0px",
            background: "hsl(" + this.props.hsl.h + ",100%, 50%)",
            borderRadius: this.props.radius
          },
          white: {
            absolute: "0px 0px 0px 0px",
            borderRadius: this.props.radius
          },
          black: {
            absolute: "0px 0px 0px 0px",
            boxShadow: this.props.shadow,
            borderRadius: this.props.radius
          },
          pointer: {
            position: "absolute",
            top: -(this.props.hsv.v * 100) + 100 + "%",
            left: this.props.hsv.s * 100 + "%",
            cursor: "default"
          },
          circle: {
            width: "4px",
            height: "4px",
            boxShadow: `0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,
            borderRadius: "50%",
            cursor: "hand",
            transform: "translate(-2px, -2px)"
          }
        },
        custom: {
          color: o,
          white: a,
          black: s,
          pointer: l,
          circle: u
        }
      }, {
        custom: !!this.props.style
      });
      return import_react.default.createElement("div", {
        style: c.color,
        ref: function(h) {
          return n.container = h;
        },
        onMouseDown: this.handleMouseDown,
        onTouchMove: this.handleChange,
        onTouchStart: this.handleChange
      }, import_react.default.createElement("style", null, `
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `), import_react.default.createElement("div", {
        style: c.white,
        className: "saturation-white"
      }, import_react.default.createElement("div", {
        style: c.black,
        className: "saturation-black"
      }), import_react.default.createElement("div", {
        style: c.pointer
      }, this.props.pointer ? import_react.default.createElement(this.props.pointer, this.props) : import_react.default.createElement("div", {
        style: c.circle
      }))));
    }
  }]), t;
}(import_react.PureComponent || import_react.Component);
function pKe(e12, t) {
  var r = wi(e12) ? kJ : xJ;
  return r(e12, vJ(t));
}
function iE(e12) {
  "@babel/helpers - typeof";
  return iE = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, iE(e12);
}
var mKe = /^\s+/;
var gKe = /\s+$/;
function lt(e12, t) {
  if (e12 = e12 || "", t = t || {}, e12 instanceof lt)
    return e12;
  if (!(this instanceof lt))
    return new lt(e12, t);
  var r = vKe(e12);
  this._originalInput = e12, this._r = r.r, this._g = r.g, this._b = r.b, this._a = r.a, this._roundA = Math.round(100 * this._a) / 100, this._format = t.format || r.format, this._gradientType = t.gradientType, this._r < 1 && (this._r = Math.round(this._r)), this._g < 1 && (this._g = Math.round(this._g)), this._b < 1 && (this._b = Math.round(this._b)), this._ok = r.ok;
}
lt.prototype = {
  isDark: function() {
    return this.getBrightness() < 128;
  },
  isLight: function() {
    return !this.isDark();
  },
  isValid: function() {
    return this._ok;
  },
  getOriginalInput: function() {
    return this._originalInput;
  },
  getFormat: function() {
    return this._format;
  },
  getAlpha: function() {
    return this._a;
  },
  getBrightness: function() {
    var t = this.toRgb();
    return (t.r * 299 + t.g * 587 + t.b * 114) / 1e3;
  },
  getLuminance: function() {
    var t = this.toRgb(), r, n, i, o, a, s;
    return r = t.r / 255, n = t.g / 255, i = t.b / 255, r <= 0.03928 ? o = r / 12.92 : o = Math.pow((r + 0.055) / 1.055, 2.4), n <= 0.03928 ? a = n / 12.92 : a = Math.pow((n + 0.055) / 1.055, 2.4), i <= 0.03928 ? s = i / 12.92 : s = Math.pow((i + 0.055) / 1.055, 2.4), 0.2126 * o + 0.7152 * a + 0.0722 * s;
  },
  setAlpha: function(t) {
    return this._a = WJ(t), this._roundA = Math.round(100 * this._a) / 100, this;
  },
  toHsv: function() {
    var t = C6(this._r, this._g, this._b);
    return {
      h: t.h * 360,
      s: t.s,
      v: t.v,
      a: this._a
    };
  },
  toHsvString: function() {
    var t = C6(this._r, this._g, this._b), r = Math.round(t.h * 360), n = Math.round(t.s * 100), i = Math.round(t.v * 100);
    return this._a == 1 ? "hsv(" + r + ", " + n + "%, " + i + "%)" : "hsva(" + r + ", " + n + "%, " + i + "%, " + this._roundA + ")";
  },
  toHsl: function() {
    var t = P6(this._r, this._g, this._b);
    return {
      h: t.h * 360,
      s: t.s,
      l: t.l,
      a: this._a
    };
  },
  toHslString: function() {
    var t = P6(this._r, this._g, this._b), r = Math.round(t.h * 360), n = Math.round(t.s * 100), i = Math.round(t.l * 100);
    return this._a == 1 ? "hsl(" + r + ", " + n + "%, " + i + "%)" : "hsla(" + r + ", " + n + "%, " + i + "%, " + this._roundA + ")";
  },
  toHex: function(t) {
    return x6(this._r, this._g, this._b, t);
  },
  toHexString: function(t) {
    return "#" + this.toHex(t);
  },
  toHex8: function(t) {
    return TKe(this._r, this._g, this._b, this._a, t);
  },
  toHex8String: function(t) {
    return "#" + this.toHex8(t);
  },
  toRgb: function() {
    return {
      r: Math.round(this._r),
      g: Math.round(this._g),
      b: Math.round(this._b),
      a: this._a
    };
  },
  toRgbString: function() {
    return this._a == 1 ? "rgb(" + Math.round(this._r) + ", " + Math.round(this._g) + ", " + Math.round(this._b) + ")" : "rgba(" + Math.round(this._r) + ", " + Math.round(this._g) + ", " + Math.round(this._b) + ", " + this._roundA + ")";
  },
  toPercentageRgb: function() {
    return {
      r: Math.round(Br(this._r, 255) * 100) + "%",
      g: Math.round(Br(this._g, 255) * 100) + "%",
      b: Math.round(Br(this._b, 255) * 100) + "%",
      a: this._a
    };
  },
  toPercentageRgbString: function() {
    return this._a == 1 ? "rgb(" + Math.round(Br(this._r, 255) * 100) + "%, " + Math.round(Br(this._g, 255) * 100) + "%, " + Math.round(Br(this._b, 255) * 100) + "%)" : "rgba(" + Math.round(Br(this._r, 255) * 100) + "%, " + Math.round(Br(this._g, 255) * 100) + "%, " + Math.round(Br(this._b, 255) * 100) + "%, " + this._roundA + ")";
  },
  toName: function() {
    return this._a === 0 ? "transparent" : this._a < 1 ? false : RKe[x6(this._r, this._g, this._b, true)] || false;
  },
  toFilter: function(t) {
    var r = "#" + k6(this._r, this._g, this._b, this._a), n = r, i = this._gradientType ? "GradientType = 1, " : "";
    if (t) {
      var o = lt(t);
      n = "#" + k6(o._r, o._g, o._b, o._a);
    }
    return "progid:DXImageTransform.Microsoft.gradient(" + i + "startColorstr=" + r + ",endColorstr=" + n + ")";
  },
  toString: function(t) {
    var r = !!t;
    t = t || this._format;
    var n = false, i = this._a < 1 && this._a >= 0, o = !r && i && (t === "hex" || t === "hex6" || t === "hex3" || t === "hex4" || t === "hex8" || t === "name");
    return o ? t === "name" && this._a === 0 ? this.toName() : this.toRgbString() : (t === "rgb" && (n = this.toRgbString()), t === "prgb" && (n = this.toPercentageRgbString()), (t === "hex" || t === "hex6") && (n = this.toHexString()), t === "hex3" && (n = this.toHexString(true)), t === "hex4" && (n = this.toHex8String(true)), t === "hex8" && (n = this.toHex8String()), t === "name" && (n = this.toName()), t === "hsl" && (n = this.toHslString()), t === "hsv" && (n = this.toHsvString()), n || this.toHexString());
  },
  clone: function() {
    return lt(this.toString());
  },
  _applyModification: function(t, r) {
    var n = t.apply(null, [this].concat([].slice.call(r)));
    return this._r = n._r, this._g = n._g, this._b = n._b, this.setAlpha(n._a), this;
  },
  lighten: function() {
    return this._applyModification(AKe, arguments);
  },
  brighten: function() {
    return this._applyModification(OKe, arguments);
  },
  darken: function() {
    return this._applyModification(IKe, arguments);
  },
  desaturate: function() {
    return this._applyModification(EKe, arguments);
  },
  saturate: function() {
    return this._applyModification(SKe, arguments);
  },
  greyscale: function() {
    return this._applyModification(wKe, arguments);
  },
  spin: function() {
    return this._applyModification(PKe, arguments);
  },
  _applyCombination: function(t, r) {
    return t.apply(null, [this].concat([].slice.call(r)));
  },
  analogous: function() {
    return this._applyCombination(kKe, arguments);
  },
  complement: function() {
    return this._applyCombination(CKe, arguments);
  },
  monochromatic: function() {
    return this._applyCombination(DKe, arguments);
  },
  splitcomplement: function() {
    return this._applyCombination(xKe, arguments);
  },
  // Disabled until https://github.com/bgrins/TinyColor/issues/254
  // polyad: function (number) {
  //   return this._applyCombination(polyad, [number]);
  // },
  triad: function() {
    return this._applyCombination(D6, [3]);
  },
  tetrad: function() {
    return this._applyCombination(D6, [4]);
  }
};
lt.fromRatio = function(e12, t) {
  if (iE(e12) == "object") {
    var r = {};
    for (var n in e12)
      e12.hasOwnProperty(n) && (n === "a" ? r[n] = e12[n] : r[n] = zm(e12[n]));
    e12 = r;
  }
  return lt(e12, t);
};
function vKe(e12) {
  var t = {
    r: 0,
    g: 0,
    b: 0
  }, r = 1, n = null, i = null, o = null, a = false, s = false;
  return typeof e12 == "string" && (e12 = BKe(e12)), iE(e12) == "object" && (ls(e12.r) && ls(e12.g) && ls(e12.b) ? (t = yKe(e12.r, e12.g, e12.b), a = true, s = String(e12.r).substr(-1) === "%" ? "prgb" : "rgb") : ls(e12.h) && ls(e12.s) && ls(e12.v) ? (n = zm(e12.s), i = zm(e12.v), t = bKe(e12.h, n, i), a = true, s = "hsv") : ls(e12.h) && ls(e12.s) && ls(e12.l) && (n = zm(e12.s), o = zm(e12.l), t = _Ke(e12.h, n, o), a = true, s = "hsl"), e12.hasOwnProperty("a") && (r = e12.a)), r = WJ(r), {
    ok: a,
    format: e12.format || s,
    r: Math.min(255, Math.max(t.r, 0)),
    g: Math.min(255, Math.max(t.g, 0)),
    b: Math.min(255, Math.max(t.b, 0)),
    a: r
  };
}
function yKe(e12, t, r) {
  return {
    r: Br(e12, 255) * 255,
    g: Br(t, 255) * 255,
    b: Br(r, 255) * 255
  };
}
function P6(e12, t, r) {
  e12 = Br(e12, 255), t = Br(t, 255), r = Br(r, 255);
  var n = Math.max(e12, t, r), i = Math.min(e12, t, r), o, a, s = (n + i) / 2;
  if (n == i)
    o = a = 0;
  else {
    var l = n - i;
    switch (a = s > 0.5 ? l / (2 - n - i) : l / (n + i), n) {
      case e12:
        o = (t - r) / l + (t < r ? 6 : 0);
        break;
      case t:
        o = (r - e12) / l + 2;
        break;
      case r:
        o = (e12 - t) / l + 4;
        break;
    }
    o /= 6;
  }
  return {
    h: o,
    s: a,
    l: s
  };
}
function _Ke(e12, t, r) {
  var n, i, o;
  e12 = Br(e12, 360), t = Br(t, 100), r = Br(r, 100);
  function a(u, c, f) {
    return f < 0 && (f += 1), f > 1 && (f -= 1), f < 1 / 6 ? u + (c - u) * 6 * f : f < 1 / 2 ? c : f < 2 / 3 ? u + (c - u) * (2 / 3 - f) * 6 : u;
  }
  if (t === 0)
    n = i = o = r;
  else {
    var s = r < 0.5 ? r * (1 + t) : r + t - r * t, l = 2 * r - s;
    n = a(l, s, e12 + 1 / 3), i = a(l, s, e12), o = a(l, s, e12 - 1 / 3);
  }
  return {
    r: n * 255,
    g: i * 255,
    b: o * 255
  };
}
function C6(e12, t, r) {
  e12 = Br(e12, 255), t = Br(t, 255), r = Br(r, 255);
  var n = Math.max(e12, t, r), i = Math.min(e12, t, r), o, a, s = n, l = n - i;
  if (a = n === 0 ? 0 : l / n, n == i)
    o = 0;
  else {
    switch (n) {
      case e12:
        o = (t - r) / l + (t < r ? 6 : 0);
        break;
      case t:
        o = (r - e12) / l + 2;
        break;
      case r:
        o = (e12 - t) / l + 4;
        break;
    }
    o /= 6;
  }
  return {
    h: o,
    s: a,
    v: s
  };
}
function bKe(e12, t, r) {
  e12 = Br(e12, 360) * 6, t = Br(t, 100), r = Br(r, 100);
  var n = Math.floor(e12), i = e12 - n, o = r * (1 - t), a = r * (1 - i * t), s = r * (1 - (1 - i) * t), l = n % 6, u = [r, a, o, o, s, r][l], c = [s, r, r, a, o, o][l], f = [o, o, s, r, r, a][l];
  return {
    r: u * 255,
    g: c * 255,
    b: f * 255
  };
}
function x6(e12, t, r, n) {
  var i = [Zo(Math.round(e12).toString(16)), Zo(Math.round(t).toString(16)), Zo(Math.round(r).toString(16))];
  return n && i[0].charAt(0) == i[0].charAt(1) && i[1].charAt(0) == i[1].charAt(1) && i[2].charAt(0) == i[2].charAt(1) ? i[0].charAt(0) + i[1].charAt(0) + i[2].charAt(0) : i.join("");
}
function TKe(e12, t, r, n, i) {
  var o = [Zo(Math.round(e12).toString(16)), Zo(Math.round(t).toString(16)), Zo(Math.round(r).toString(16)), Zo(YJ(n))];
  return i && o[0].charAt(0) == o[0].charAt(1) && o[1].charAt(0) == o[1].charAt(1) && o[2].charAt(0) == o[2].charAt(1) && o[3].charAt(0) == o[3].charAt(1) ? o[0].charAt(0) + o[1].charAt(0) + o[2].charAt(0) + o[3].charAt(0) : o.join("");
}
function k6(e12, t, r, n) {
  var i = [Zo(YJ(n)), Zo(Math.round(e12).toString(16)), Zo(Math.round(t).toString(16)), Zo(Math.round(r).toString(16))];
  return i.join("");
}
lt.equals = function(e12, t) {
  return !e12 || !t ? false : lt(e12).toRgbString() == lt(t).toRgbString();
};
lt.random = function() {
  return lt.fromRatio({
    r: Math.random(),
    g: Math.random(),
    b: Math.random()
  });
};
function EKe(e12, t) {
  t = t === 0 ? 0 : t || 10;
  var r = lt(e12).toHsl();
  return r.s -= t / 100, r.s = $S(r.s), lt(r);
}
function SKe(e12, t) {
  t = t === 0 ? 0 : t || 10;
  var r = lt(e12).toHsl();
  return r.s += t / 100, r.s = $S(r.s), lt(r);
}
function wKe(e12) {
  return lt(e12).desaturate(100);
}
function AKe(e12, t) {
  t = t === 0 ? 0 : t || 10;
  var r = lt(e12).toHsl();
  return r.l += t / 100, r.l = $S(r.l), lt(r);
}
function OKe(e12, t) {
  t = t === 0 ? 0 : t || 10;
  var r = lt(e12).toRgb();
  return r.r = Math.max(0, Math.min(255, r.r - Math.round(255 * -(t / 100)))), r.g = Math.max(0, Math.min(255, r.g - Math.round(255 * -(t / 100)))), r.b = Math.max(0, Math.min(255, r.b - Math.round(255 * -(t / 100)))), lt(r);
}
function IKe(e12, t) {
  t = t === 0 ? 0 : t || 10;
  var r = lt(e12).toHsl();
  return r.l -= t / 100, r.l = $S(r.l), lt(r);
}
function PKe(e12, t) {
  var r = lt(e12).toHsl(), n = (r.h + t) % 360;
  return r.h = n < 0 ? 360 + n : n, lt(r);
}
function CKe(e12) {
  var t = lt(e12).toHsl();
  return t.h = (t.h + 180) % 360, lt(t);
}
function D6(e12, t) {
  if (isNaN(t) || t <= 0)
    throw new Error("Argument to polyad must be a positive number");
  for (var r = lt(e12).toHsl(), n = [lt(e12)], i = 360 / t, o = 1; o < t; o++)
    n.push(lt({
      h: (r.h + o * i) % 360,
      s: r.s,
      l: r.l
    }));
  return n;
}
function xKe(e12) {
  var t = lt(e12).toHsl(), r = t.h;
  return [lt(e12), lt({
    h: (r + 72) % 360,
    s: t.s,
    l: t.l
  }), lt({
    h: (r + 216) % 360,
    s: t.s,
    l: t.l
  })];
}
function kKe(e12, t, r) {
  t = t || 6, r = r || 30;
  var n = lt(e12).toHsl(), i = 360 / r, o = [lt(e12)];
  for (n.h = (n.h - (i * t >> 1) + 720) % 360; --t; )
    n.h = (n.h + i) % 360, o.push(lt(n));
  return o;
}
function DKe(e12, t) {
  t = t || 6;
  for (var r = lt(e12).toHsv(), n = r.h, i = r.s, o = r.v, a = [], s = 1 / t; t--; )
    a.push(lt({
      h: n,
      s: i,
      v: o
    })), o = (o + s) % 1;
  return a;
}
lt.mix = function(e12, t, r) {
  r = r === 0 ? 0 : r || 50;
  var n = lt(e12).toRgb(), i = lt(t).toRgb(), o = r / 100, a = {
    r: (i.r - n.r) * o + n.r,
    g: (i.g - n.g) * o + n.g,
    b: (i.b - n.b) * o + n.b,
    a: (i.a - n.a) * o + n.a
  };
  return lt(a);
};
lt.readability = function(e12, t) {
  var r = lt(e12), n = lt(t);
  return (Math.max(r.getLuminance(), n.getLuminance()) + 0.05) / (Math.min(r.getLuminance(), n.getLuminance()) + 0.05);
};
lt.isReadable = function(e12, t, r) {
  var n = lt.readability(e12, t), i, o;
  switch (o = false, i = FKe(r), i.level + i.size) {
    case "AAsmall":
    case "AAAlarge":
      o = n >= 4.5;
      break;
    case "AAlarge":
      o = n >= 3;
      break;
    case "AAAsmall":
      o = n >= 7;
      break;
  }
  return o;
};
lt.mostReadable = function(e12, t, r) {
  var n = null, i = 0, o, a, s, l;
  r = r || {}, a = r.includeFallbackColors, s = r.level, l = r.size;
  for (var u = 0; u < t.length; u++)
    o = lt.readability(e12, t[u]), o > i && (i = o, n = lt(t[u]));
  return lt.isReadable(e12, n, {
    level: s,
    size: l
  }) || !a ? n : (r.includeFallbackColors = false, lt.mostReadable(e12, ["#fff", "#000"], r));
};
var Ek = lt.names = {
  aliceblue: "f0f8ff",
  antiquewhite: "faebd7",
  aqua: "0ff",
  aquamarine: "7fffd4",
  azure: "f0ffff",
  beige: "f5f5dc",
  bisque: "ffe4c4",
  black: "000",
  blanchedalmond: "ffebcd",
  blue: "00f",
  blueviolet: "8a2be2",
  brown: "a52a2a",
  burlywood: "deb887",
  burntsienna: "ea7e5d",
  cadetblue: "5f9ea0",
  chartreuse: "7fff00",
  chocolate: "d2691e",
  coral: "ff7f50",
  cornflowerblue: "6495ed",
  cornsilk: "fff8dc",
  crimson: "dc143c",
  cyan: "0ff",
  darkblue: "00008b",
  darkcyan: "008b8b",
  darkgoldenrod: "b8860b",
  darkgray: "a9a9a9",
  darkgreen: "006400",
  darkgrey: "a9a9a9",
  darkkhaki: "bdb76b",
  darkmagenta: "8b008b",
  darkolivegreen: "556b2f",
  darkorange: "ff8c00",
  darkorchid: "9932cc",
  darkred: "8b0000",
  darksalmon: "e9967a",
  darkseagreen: "8fbc8f",
  darkslateblue: "483d8b",
  darkslategray: "2f4f4f",
  darkslategrey: "2f4f4f",
  darkturquoise: "00ced1",
  darkviolet: "9400d3",
  deeppink: "ff1493",
  deepskyblue: "00bfff",
  dimgray: "696969",
  dimgrey: "696969",
  dodgerblue: "1e90ff",
  firebrick: "b22222",
  floralwhite: "fffaf0",
  forestgreen: "228b22",
  fuchsia: "f0f",
  gainsboro: "dcdcdc",
  ghostwhite: "f8f8ff",
  gold: "ffd700",
  goldenrod: "daa520",
  gray: "808080",
  green: "008000",
  greenyellow: "adff2f",
  grey: "808080",
  honeydew: "f0fff0",
  hotpink: "ff69b4",
  indianred: "cd5c5c",
  indigo: "4b0082",
  ivory: "fffff0",
  khaki: "f0e68c",
  lavender: "e6e6fa",
  lavenderblush: "fff0f5",
  lawngreen: "7cfc00",
  lemonchiffon: "fffacd",
  lightblue: "add8e6",
  lightcoral: "f08080",
  lightcyan: "e0ffff",
  lightgoldenrodyellow: "fafad2",
  lightgray: "d3d3d3",
  lightgreen: "90ee90",
  lightgrey: "d3d3d3",
  lightpink: "ffb6c1",
  lightsalmon: "ffa07a",
  lightseagreen: "20b2aa",
  lightskyblue: "87cefa",
  lightslategray: "789",
  lightslategrey: "789",
  lightsteelblue: "b0c4de",
  lightyellow: "ffffe0",
  lime: "0f0",
  limegreen: "32cd32",
  linen: "faf0e6",
  magenta: "f0f",
  maroon: "800000",
  mediumaquamarine: "66cdaa",
  mediumblue: "0000cd",
  mediumorchid: "ba55d3",
  mediumpurple: "9370db",
  mediumseagreen: "3cb371",
  mediumslateblue: "7b68ee",
  mediumspringgreen: "00fa9a",
  mediumturquoise: "48d1cc",
  mediumvioletred: "c71585",
  midnightblue: "191970",
  mintcream: "f5fffa",
  mistyrose: "ffe4e1",
  moccasin: "ffe4b5",
  navajowhite: "ffdead",
  navy: "000080",
  oldlace: "fdf5e6",
  olive: "808000",
  olivedrab: "6b8e23",
  orange: "ffa500",
  orangered: "ff4500",
  orchid: "da70d6",
  palegoldenrod: "eee8aa",
  palegreen: "98fb98",
  paleturquoise: "afeeee",
  palevioletred: "db7093",
  papayawhip: "ffefd5",
  peachpuff: "ffdab9",
  peru: "cd853f",
  pink: "ffc0cb",
  plum: "dda0dd",
  powderblue: "b0e0e6",
  purple: "800080",
  rebeccapurple: "663399",
  red: "f00",
  rosybrown: "bc8f8f",
  royalblue: "4169e1",
  saddlebrown: "8b4513",
  salmon: "fa8072",
  sandybrown: "f4a460",
  seagreen: "2e8b57",
  seashell: "fff5ee",
  sienna: "a0522d",
  silver: "c0c0c0",
  skyblue: "87ceeb",
  slateblue: "6a5acd",
  slategray: "708090",
  slategrey: "708090",
  snow: "fffafa",
  springgreen: "00ff7f",
  steelblue: "4682b4",
  tan: "d2b48c",
  teal: "008080",
  thistle: "d8bfd8",
  tomato: "ff6347",
  turquoise: "40e0d0",
  violet: "ee82ee",
  wheat: "f5deb3",
  white: "fff",
  whitesmoke: "f5f5f5",
  yellow: "ff0",
  yellowgreen: "9acd32"
};
var RKe = lt.hexNames = NKe(Ek);
function NKe(e12) {
  var t = {};
  for (var r in e12)
    e12.hasOwnProperty(r) && (t[e12[r]] = r);
  return t;
}
function WJ(e12) {
  return e12 = parseFloat(e12), (isNaN(e12) || e12 < 0 || e12 > 1) && (e12 = 1), e12;
}
function Br(e12, t) {
  MKe(e12) && (e12 = "100%");
  var r = LKe(e12);
  return e12 = Math.min(t, Math.max(0, parseFloat(e12))), r && (e12 = parseInt(e12 * t, 10) / 100), Math.abs(e12 - t) < 1e-6 ? 1 : e12 % t / parseFloat(t);
}
function $S(e12) {
  return Math.min(1, Math.max(0, e12));
}
function Yi(e12) {
  return parseInt(e12, 16);
}
function MKe(e12) {
  return typeof e12 == "string" && e12.indexOf(".") != -1 && parseFloat(e12) === 1;
}
function LKe(e12) {
  return typeof e12 == "string" && e12.indexOf("%") != -1;
}
function Zo(e12) {
  return e12.length == 1 ? "0" + e12 : "" + e12;
}
function zm(e12) {
  return e12 <= 1 && (e12 = e12 * 100 + "%"), e12;
}
function YJ(e12) {
  return Math.round(parseFloat(e12) * 255).toString(16);
}
function R6(e12) {
  return Yi(e12) / 255;
}
var Fo = function() {
  var e12 = "[-\\+]?\\d+%?", t = "[-\\+]?\\d*\\.\\d+%?", r = "(?:" + t + ")|(?:" + e12 + ")", n = "[\\s|\\(]+(" + r + ")[,|\\s]+(" + r + ")[,|\\s]+(" + r + ")\\s*\\)?", i = "[\\s|\\(]+(" + r + ")[,|\\s]+(" + r + ")[,|\\s]+(" + r + ")[,|\\s]+(" + r + ")\\s*\\)?";
  return {
    CSS_UNIT: new RegExp(r),
    rgb: new RegExp("rgb" + n),
    rgba: new RegExp("rgba" + i),
    hsl: new RegExp("hsl" + n),
    hsla: new RegExp("hsla" + i),
    hsv: new RegExp("hsv" + n),
    hsva: new RegExp("hsva" + i),
    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
  };
}();
function ls(e12) {
  return !!Fo.CSS_UNIT.exec(e12);
}
function BKe(e12) {
  e12 = e12.replace(mKe, "").replace(gKe, "").toLowerCase();
  var t = false;
  if (Ek[e12])
    e12 = Ek[e12], t = true;
  else if (e12 == "transparent")
    return {
      r: 0,
      g: 0,
      b: 0,
      a: 0,
      format: "name"
    };
  var r;
  return (r = Fo.rgb.exec(e12)) ? {
    r: r[1],
    g: r[2],
    b: r[3]
  } : (r = Fo.rgba.exec(e12)) ? {
    r: r[1],
    g: r[2],
    b: r[3],
    a: r[4]
  } : (r = Fo.hsl.exec(e12)) ? {
    h: r[1],
    s: r[2],
    l: r[3]
  } : (r = Fo.hsla.exec(e12)) ? {
    h: r[1],
    s: r[2],
    l: r[3],
    a: r[4]
  } : (r = Fo.hsv.exec(e12)) ? {
    h: r[1],
    s: r[2],
    v: r[3]
  } : (r = Fo.hsva.exec(e12)) ? {
    h: r[1],
    s: r[2],
    v: r[3],
    a: r[4]
  } : (r = Fo.hex8.exec(e12)) ? {
    r: Yi(r[1]),
    g: Yi(r[2]),
    b: Yi(r[3]),
    a: R6(r[4]),
    format: t ? "name" : "hex8"
  } : (r = Fo.hex6.exec(e12)) ? {
    r: Yi(r[1]),
    g: Yi(r[2]),
    b: Yi(r[3]),
    format: t ? "name" : "hex"
  } : (r = Fo.hex4.exec(e12)) ? {
    r: Yi(r[1] + "" + r[1]),
    g: Yi(r[2] + "" + r[2]),
    b: Yi(r[3] + "" + r[3]),
    a: R6(r[4] + "" + r[4]),
    format: t ? "name" : "hex8"
  } : (r = Fo.hex3.exec(e12)) ? {
    r: Yi(r[1] + "" + r[1]),
    g: Yi(r[2] + "" + r[2]),
    b: Yi(r[3] + "" + r[3]),
    format: t ? "name" : "hex"
  } : false;
}
function FKe(e12) {
  var t, r;
  return e12 = e12 || {
    level: "AA",
    size: "small"
  }, t = (e12.level || "AA").toUpperCase(), r = (e12.size || "small").toLowerCase(), t !== "AA" && t !== "AAA" && (t = "AA"), r !== "small" && r !== "large" && (r = "small"), {
    level: t,
    size: r
  };
}
var N6 = function(t) {
  var r = ["r", "g", "b", "a", "h", "s", "l", "v"], n = 0, i = 0;
  return pKe(r, function(o) {
    if (t[o] && (n += 1, isNaN(t[o]) || (i += 1), o === "s" || o === "l")) {
      var a = /^\d+%$/;
      a.test(t[o]) && (i += 1);
    }
  }), n === i ? t : false;
};
var Vm = function(t, r) {
  var n = t.hex ? lt(t.hex) : lt(t), i = n.toHsl(), o = n.toHsv(), a = n.toRgb(), s = n.toHex();
  i.s === 0 && (i.h = r || 0, o.h = r || 0);
  var l = s === "000000" && a.a === 0;
  return {
    hsl: i,
    hex: l ? "transparent" : "#" + s,
    rgb: a,
    hsv: o,
    oldHue: t.h || r || i.h,
    source: t.source
  };
};
var pc = function(t) {
  if (t === "transparent")
    return true;
  var r = String(t).charAt(0) === "#" ? 1 : 0;
  return t.length !== 4 + r && t.length < 7 + r && lt(t).isValid();
};
var pL = function(t) {
  if (!t)
    return "#fff";
  var r = Vm(t);
  if (r.hex === "transparent")
    return "rgba(0,0,0,0.4)";
  var n = (r.rgb.r * 299 + r.rgb.g * 587 + r.rgb.b * 114) / 1e3;
  return n >= 128 ? "#000" : "#fff";
};
var ZO = function(t, r) {
  var n = t.replace("°", "");
  return lt(r + " (" + n + ")")._ok;
};
var fm = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var $Ke = /* @__PURE__ */ function() {
  function e12(t, r) {
    for (var n = 0; n < r.length; n++) {
      var i = r[n];
      i.enumerable = i.enumerable || false, i.configurable = true, "value" in i && (i.writable = true), Object.defineProperty(t, i.key, i);
    }
  }
  return function(t, r, n) {
    return r && e12(t.prototype, r), n && e12(t, n), t;
  };
}();
function HKe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function UKe(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function jKe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var zi = function(t) {
  var r = function(n) {
    jKe(i, n);
    function i(o) {
      HKe(this, i);
      var a = UKe(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this));
      return a.handleChange = function(s, l) {
        var u = N6(s);
        if (u) {
          var c = Vm(s, s.h || a.state.oldHue);
          a.setState(c), a.props.onChangeComplete && a.debounce(a.props.onChangeComplete, c, l), a.props.onChange && a.props.onChange(c, l);
        }
      }, a.handleSwatchHover = function(s, l) {
        var u = N6(s);
        if (u) {
          var c = Vm(s, s.h || a.state.oldHue);
          a.props.onSwatchHover && a.props.onSwatchHover(c, l);
        }
      }, a.state = fm({}, Vm(o.color, 0)), a.debounce = XJ(function(s, l, u) {
        s(l, u);
      }, 100), a;
    }
    return $Ke(i, [{
      key: "render",
      value: function() {
        var a = {};
        return this.props.onSwatchHover && (a.onSwatchHover = this.handleSwatchHover), import_react.default.createElement(t, fm({}, this.props, this.state, {
          onChange: this.handleChange
        }, a));
      }
    }], [{
      key: "getDerivedStateFromProps",
      value: function(a, s) {
        return fm({}, Vm(a.color, s.oldHue));
      }
    }]), i;
  }(import_react.PureComponent || import_react.Component);
  return r.propTypes = fm({}, t.propTypes), r.defaultProps = fm({}, t.defaultProps, {
    color: {
      h: 250,
      s: 0.5,
      l: 0.2,
      a: 1
    }
  }), r;
};
var GKe = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var zKe = /* @__PURE__ */ function() {
  function e12(t, r) {
    for (var n = 0; n < r.length; n++) {
      var i = r[n];
      i.enumerable = i.enumerable || false, i.configurable = true, "value" in i && (i.writable = true), Object.defineProperty(t, i.key, i);
    }
  }
  return function(t, r, n) {
    return r && e12(t.prototype, r), n && e12(t, n), t;
  };
}();
function VKe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function M6(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function XKe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var WKe = function(t) {
  var r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "span";
  return function(n) {
    XKe(i, n);
    function i() {
      var o, a, s, l;
      VKe(this, i);
      for (var u = arguments.length, c = Array(u), f = 0; f < u; f++)
        c[f] = arguments[f];
      return l = (a = (s = M6(this, (o = i.__proto__ || Object.getPrototypeOf(i)).call.apply(o, [this].concat(c))), s), s.state = {
        focus: false
      }, s.handleFocus = function() {
        return s.setState({
          focus: true
        });
      }, s.handleBlur = function() {
        return s.setState({
          focus: false
        });
      }, a), M6(s, l);
    }
    return zKe(i, [{
      key: "render",
      value: function() {
        return import_react.default.createElement(r, {
          onFocus: this.handleFocus,
          onBlur: this.handleBlur
        }, import_react.default.createElement(t, GKe({}, this.props, this.state)));
      }
    }]), i;
  }(import_react.default.Component);
};
var L6 = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var YKe = 13;
var qKe = function(t) {
  var r = t.color, n = t.style, i = t.onClick, o = i === void 0 ? function() {
  } : i, a = t.onHover, s = t.title, l = s === void 0 ? r : s, u = t.children, c = t.focus, f = t.focusStyle, h = f === void 0 ? {} : f, d = r === "transparent", p = wt({
    default: {
      swatch: L6({
        background: r,
        height: "100%",
        width: "100%",
        cursor: "pointer",
        position: "relative",
        outline: "none"
      }, n, c ? h : {})
    }
  }), m = function(b) {
    return o(r, b);
  }, g = function(b) {
    return b.keyCode === YKe && o(r, b);
  }, v = function(b) {
    return a(r, b);
  }, _ = {};
  return a && (_.onMouseOver = v), import_react.default.createElement("div", L6({
    style: p.swatch,
    onClick: m,
    title: l,
    tabIndex: 0,
    onKeyDown: g
  }, _), u, d && import_react.default.createElement(Cp, {
    borderRadius: p.swatch.borderRadius,
    boxShadow: "inset 0 0 0 1px rgba(0,0,0,0.1)"
  }));
};
var gh = WKe(qKe);
var KKe = function(t) {
  var r = t.direction, n = wt({
    default: {
      picker: {
        width: "18px",
        height: "18px",
        borderRadius: "50%",
        transform: "translate(-9px, -1px)",
        backgroundColor: "rgb(248, 248, 248)",
        boxShadow: "0 1px 4px 0 rgba(0, 0, 0, 0.37)"
      }
    },
    vertical: {
      picker: {
        transform: "translate(-3px, -9px)"
      }
    }
  }, {
    vertical: r === "vertical"
  });
  return import_react.default.createElement("div", {
    style: n.picker
  });
};
var ZKe = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var qJ = function(t) {
  var r = t.rgb, n = t.hsl, i = t.width, o = t.height, a = t.onChange, s = t.direction, l = t.style, u = t.renderers, c = t.pointer, f = t.className, h = f === void 0 ? "" : f, d = wt({
    default: {
      picker: {
        position: "relative",
        width: i,
        height: o
      },
      alpha: {
        radius: "2px",
        style: l
      }
    }
  });
  return import_react.default.createElement("div", {
    style: d.picker,
    className: "alpha-picker " + h
  }, import_react.default.createElement(dL, ZKe({}, d.alpha, {
    rgb: r,
    hsl: n,
    pointer: c,
    renderers: u,
    onChange: a,
    direction: s
  })));
};
qJ.defaultProps = {
  width: "316px",
  height: "16px",
  direction: "horizontal",
  pointer: KKe
};
zi(qJ);
var QKe = function(t) {
  var r = t.colors, n = t.onClick, i = t.onSwatchHover, o = wt({
    default: {
      swatches: {
        marginRight: "-10px"
      },
      swatch: {
        width: "22px",
        height: "22px",
        float: "left",
        marginRight: "10px",
        marginBottom: "10px",
        borderRadius: "4px"
      },
      clear: {
        clear: "both"
      }
    }
  });
  return import_react.default.createElement("div", {
    style: o.swatches
  }, dc(r, function(a) {
    return import_react.default.createElement(gh, {
      key: a,
      color: a,
      style: o.swatch,
      onClick: n,
      onHover: i,
      focusStyle: {
        boxShadow: "0 0 4px " + a
      }
    });
  }), import_react.default.createElement("div", {
    style: o.clear
  }));
};
var mL = function(t) {
  var r = t.onChange, n = t.onSwatchHover, i = t.hex, o = t.colors, a = t.width, s = t.triangle, l = t.styles, u = l === void 0 ? {} : l, c = t.className, f = c === void 0 ? "" : c, h = i === "transparent", d = function(g, v) {
    pc(g) && r({
      hex: g,
      source: "hex"
    }, v);
  }, p = wt(Gi({
    default: {
      card: {
        width: a,
        background: "#fff",
        boxShadow: "0 1px rgba(0,0,0,.1)",
        borderRadius: "6px",
        position: "relative"
      },
      head: {
        height: "110px",
        background: i,
        borderRadius: "6px 6px 0 0",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        position: "relative"
      },
      body: {
        padding: "10px"
      },
      label: {
        fontSize: "18px",
        color: pL(i),
        position: "relative"
      },
      triangle: {
        width: "0px",
        height: "0px",
        borderStyle: "solid",
        borderWidth: "0 10px 10px 10px",
        borderColor: "transparent transparent " + i + " transparent",
        position: "absolute",
        top: "-10px",
        left: "50%",
        marginLeft: "-10px"
      },
      input: {
        width: "100%",
        fontSize: "12px",
        color: "#666",
        border: "0px",
        outline: "none",
        height: "22px",
        boxShadow: "inset 0 0 0 1px #ddd",
        borderRadius: "4px",
        padding: "0 7px",
        boxSizing: "border-box"
      }
    },
    "hide-triangle": {
      triangle: {
        display: "none"
      }
    }
  }, u), {
    "hide-triangle": s === "hide"
  });
  return import_react.default.createElement("div", {
    style: p.card,
    className: "block-picker " + f
  }, import_react.default.createElement("div", {
    style: p.triangle
  }), import_react.default.createElement("div", {
    style: p.head
  }, h && import_react.default.createElement(Cp, {
    borderRadius: "6px 6px 0 0"
  }), import_react.default.createElement("div", {
    style: p.label
  }, i)), import_react.default.createElement("div", {
    style: p.body
  }, import_react.default.createElement(QKe, {
    colors: o,
    onClick: d,
    onSwatchHover: n
  }), import_react.default.createElement(tr, {
    style: {
      input: p.input
    },
    value: i,
    onChange: d
  })));
};
mL.propTypes = {
  width: L.oneOfType([L.string, L.number]),
  colors: L.arrayOf(L.string),
  triangle: L.oneOf(["top", "hide"]),
  styles: L.object
};
mL.defaultProps = {
  width: 170,
  colors: ["#D9E3F0", "#F47373", "#697689", "#37D67A", "#2CCCE4", "#555555", "#dce775", "#ff8a65", "#ba68c8"],
  triangle: "top",
  styles: {}
};
zi(mL);
var Yh = {
  50: "#ffebee",
  100: "#ffcdd2",
  200: "#ef9a9a",
  300: "#e57373",
  400: "#ef5350",
  500: "#f44336",
  600: "#e53935",
  700: "#d32f2f",
  800: "#c62828",
  900: "#b71c1c",
  a100: "#ff8a80",
  a200: "#ff5252",
  a400: "#ff1744",
  a700: "#d50000"
};
var qh = {
  50: "#fce4ec",
  100: "#f8bbd0",
  200: "#f48fb1",
  300: "#f06292",
  400: "#ec407a",
  500: "#e91e63",
  600: "#d81b60",
  700: "#c2185b",
  800: "#ad1457",
  900: "#880e4f",
  a100: "#ff80ab",
  a200: "#ff4081",
  a400: "#f50057",
  a700: "#c51162"
};
var Kh = {
  50: "#f3e5f5",
  100: "#e1bee7",
  200: "#ce93d8",
  300: "#ba68c8",
  400: "#ab47bc",
  500: "#9c27b0",
  600: "#8e24aa",
  700: "#7b1fa2",
  800: "#6a1b9a",
  900: "#4a148c",
  a100: "#ea80fc",
  a200: "#e040fb",
  a400: "#d500f9",
  a700: "#aa00ff"
};
var Zh = {
  50: "#ede7f6",
  100: "#d1c4e9",
  200: "#b39ddb",
  300: "#9575cd",
  400: "#7e57c2",
  500: "#673ab7",
  600: "#5e35b1",
  700: "#512da8",
  800: "#4527a0",
  900: "#311b92",
  a100: "#b388ff",
  a200: "#7c4dff",
  a400: "#651fff",
  a700: "#6200ea"
};
var Qh = {
  50: "#e8eaf6",
  100: "#c5cae9",
  200: "#9fa8da",
  300: "#7986cb",
  400: "#5c6bc0",
  500: "#3f51b5",
  600: "#3949ab",
  700: "#303f9f",
  800: "#283593",
  900: "#1a237e",
  a100: "#8c9eff",
  a200: "#536dfe",
  a400: "#3d5afe",
  a700: "#304ffe"
};
var Jh = {
  50: "#e3f2fd",
  100: "#bbdefb",
  200: "#90caf9",
  300: "#64b5f6",
  400: "#42a5f5",
  500: "#2196f3",
  600: "#1e88e5",
  700: "#1976d2",
  800: "#1565c0",
  900: "#0d47a1",
  a100: "#82b1ff",
  a200: "#448aff",
  a400: "#2979ff",
  a700: "#2962ff"
};
var ef = {
  50: "#e1f5fe",
  100: "#b3e5fc",
  200: "#81d4fa",
  300: "#4fc3f7",
  400: "#29b6f6",
  500: "#03a9f4",
  600: "#039be5",
  700: "#0288d1",
  800: "#0277bd",
  900: "#01579b",
  a100: "#80d8ff",
  a200: "#40c4ff",
  a400: "#00b0ff",
  a700: "#0091ea"
};
var tf = {
  50: "#e0f7fa",
  100: "#b2ebf2",
  200: "#80deea",
  300: "#4dd0e1",
  400: "#26c6da",
  500: "#00bcd4",
  600: "#00acc1",
  700: "#0097a7",
  800: "#00838f",
  900: "#006064",
  a100: "#84ffff",
  a200: "#18ffff",
  a400: "#00e5ff",
  a700: "#00b8d4"
};
var rf = {
  50: "#e0f2f1",
  100: "#b2dfdb",
  200: "#80cbc4",
  300: "#4db6ac",
  400: "#26a69a",
  500: "#009688",
  600: "#00897b",
  700: "#00796b",
  800: "#00695c",
  900: "#004d40",
  a100: "#a7ffeb",
  a200: "#64ffda",
  a400: "#1de9b6",
  a700: "#00bfa5"
};
var Xm = {
  50: "#e8f5e9",
  100: "#c8e6c9",
  200: "#a5d6a7",
  300: "#81c784",
  400: "#66bb6a",
  500: "#4caf50",
  600: "#43a047",
  700: "#388e3c",
  800: "#2e7d32",
  900: "#1b5e20",
  a100: "#b9f6ca",
  a200: "#69f0ae",
  a400: "#00e676",
  a700: "#00c853"
};
var nf = {
  50: "#f1f8e9",
  100: "#dcedc8",
  200: "#c5e1a5",
  300: "#aed581",
  400: "#9ccc65",
  500: "#8bc34a",
  600: "#7cb342",
  700: "#689f38",
  800: "#558b2f",
  900: "#33691e",
  a100: "#ccff90",
  a200: "#b2ff59",
  a400: "#76ff03",
  a700: "#64dd17"
};
var of = {
  50: "#f9fbe7",
  100: "#f0f4c3",
  200: "#e6ee9c",
  300: "#dce775",
  400: "#d4e157",
  500: "#cddc39",
  600: "#c0ca33",
  700: "#afb42b",
  800: "#9e9d24",
  900: "#827717",
  a100: "#f4ff81",
  a200: "#eeff41",
  a400: "#c6ff00",
  a700: "#aeea00"
};
var af = {
  50: "#fffde7",
  100: "#fff9c4",
  200: "#fff59d",
  300: "#fff176",
  400: "#ffee58",
  500: "#ffeb3b",
  600: "#fdd835",
  700: "#fbc02d",
  800: "#f9a825",
  900: "#f57f17",
  a100: "#ffff8d",
  a200: "#ffff00",
  a400: "#ffea00",
  a700: "#ffd600"
};
var sf = {
  50: "#fff8e1",
  100: "#ffecb3",
  200: "#ffe082",
  300: "#ffd54f",
  400: "#ffca28",
  500: "#ffc107",
  600: "#ffb300",
  700: "#ffa000",
  800: "#ff8f00",
  900: "#ff6f00",
  a100: "#ffe57f",
  a200: "#ffd740",
  a400: "#ffc400",
  a700: "#ffab00"
};
var lf = {
  50: "#fff3e0",
  100: "#ffe0b2",
  200: "#ffcc80",
  300: "#ffb74d",
  400: "#ffa726",
  500: "#ff9800",
  600: "#fb8c00",
  700: "#f57c00",
  800: "#ef6c00",
  900: "#e65100",
  a100: "#ffd180",
  a200: "#ffab40",
  a400: "#ff9100",
  a700: "#ff6d00"
};
var cf = {
  50: "#fbe9e7",
  100: "#ffccbc",
  200: "#ffab91",
  300: "#ff8a65",
  400: "#ff7043",
  500: "#ff5722",
  600: "#f4511e",
  700: "#e64a19",
  800: "#d84315",
  900: "#bf360c",
  a100: "#ff9e80",
  a200: "#ff6e40",
  a400: "#ff3d00",
  a700: "#dd2c00"
};
var uf = {
  50: "#efebe9",
  100: "#d7ccc8",
  200: "#bcaaa4",
  300: "#a1887f",
  400: "#8d6e63",
  500: "#795548",
  600: "#6d4c41",
  700: "#5d4037",
  800: "#4e342e",
  900: "#3e2723"
};
var hf = {
  50: "#eceff1",
  100: "#cfd8dc",
  200: "#b0bec5",
  300: "#90a4ae",
  400: "#78909c",
  500: "#607d8b",
  600: "#546e7a",
  700: "#455a64",
  800: "#37474f",
  900: "#263238"
};
var KJ = function(t) {
  var r = t.color, n = t.onClick, i = t.onSwatchHover, o = t.hover, a = t.active, s = t.circleSize, l = t.circleSpacing, u = wt({
    default: {
      swatch: {
        width: s,
        height: s,
        marginRight: l,
        marginBottom: l,
        transform: "scale(1)",
        transition: "100ms transform ease"
      },
      Swatch: {
        borderRadius: "50%",
        background: "transparent",
        boxShadow: "inset 0 0 0 " + (s / 2 + 1) + "px " + r,
        transition: "100ms box-shadow ease"
      }
    },
    hover: {
      swatch: {
        transform: "scale(1.2)"
      }
    },
    active: {
      Swatch: {
        boxShadow: "inset 0 0 0 3px " + r
      }
    }
  }, {
    hover: o,
    active: a
  });
  return import_react.default.createElement("div", {
    style: u.swatch
  }, import_react.default.createElement(gh, {
    style: u.Swatch,
    color: r,
    onClick: n,
    onHover: i,
    focusStyle: {
      boxShadow: u.Swatch.boxShadow + ", 0 0 5px " + r
    }
  }));
};
KJ.defaultProps = {
  circleSize: 28,
  circleSpacing: 14
};
var JKe = fL(KJ);
var gL = function(t) {
  var r = t.width, n = t.onChange, i = t.onSwatchHover, o = t.colors, a = t.hex, s = t.circleSize, l = t.styles, u = l === void 0 ? {} : l, c = t.circleSpacing, f = t.className, h = f === void 0 ? "" : f, d = wt(Gi({
    default: {
      card: {
        width: r,
        display: "flex",
        flexWrap: "wrap",
        marginRight: -c,
        marginBottom: -c
      }
    }
  }, u)), p = function(g, v) {
    return n({
      hex: g,
      source: "hex"
    }, v);
  };
  return import_react.default.createElement("div", {
    style: d.card,
    className: "circle-picker " + h
  }, dc(o, function(m) {
    return import_react.default.createElement(JKe, {
      key: m,
      color: m,
      onClick: p,
      onSwatchHover: i,
      active: a === m.toLowerCase(),
      circleSize: s,
      circleSpacing: c
    });
  }));
};
gL.propTypes = {
  width: L.oneOfType([L.string, L.number]),
  circleSize: L.number,
  circleSpacing: L.number,
  styles: L.object
};
gL.defaultProps = {
  width: 252,
  circleSize: 28,
  circleSpacing: 14,
  colors: [Yh[500], qh[500], Kh[500], Zh[500], Qh[500], Jh[500], ef[500], tf[500], rf[500], Xm[500], nf[500], of[500], af[500], sf[500], lf[500], cf[500], uf[500], hf[500]],
  styles: {}
};
zi(gL);
function B6(e12) {
  return e12 === void 0;
}
var ZJ = {};
Object.defineProperty(ZJ, "__esModule", {
  value: true
});
var F6 = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var eZe = import_react.default;
var $6 = tZe(eZe);
function tZe(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function rZe(e12, t) {
  var r = {};
  for (var n in e12)
    t.indexOf(n) >= 0 || Object.prototype.hasOwnProperty.call(e12, n) && (r[n] = e12[n]);
  return r;
}
var V_ = 24;
var nZe = ZJ.default = function(e12) {
  var t = e12.fill, r = t === void 0 ? "currentColor" : t, n = e12.width, i = n === void 0 ? V_ : n, o = e12.height, a = o === void 0 ? V_ : o, s = e12.style, l = s === void 0 ? {} : s, u = rZe(e12, ["fill", "width", "height", "style"]);
  return $6.default.createElement("svg", F6({
    viewBox: "0 0 " + V_ + " " + V_,
    style: F6({
      fill: r,
      width: i,
      height: a
    }, l)
  }, u), $6.default.createElement("path", {
    d: "M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"
  }));
};
var iZe = /* @__PURE__ */ function() {
  function e12(t, r) {
    for (var n = 0; n < r.length; n++) {
      var i = r[n];
      i.enumerable = i.enumerable || false, i.configurable = true, "value" in i && (i.writable = true), Object.defineProperty(t, i.key, i);
    }
  }
  return function(t, r, n) {
    return r && e12(t.prototype, r), n && e12(t, n), t;
  };
}();
function oZe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function aZe(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function sZe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var QJ = function(e12) {
  sZe(t, e12);
  function t(r) {
    oZe(this, t);
    var n = aZe(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
    return n.toggleViews = function() {
      n.state.view === "hex" ? n.setState({
        view: "rgb"
      }) : n.state.view === "rgb" ? n.setState({
        view: "hsl"
      }) : n.state.view === "hsl" && (n.props.hsl.a === 1 ? n.setState({
        view: "hex"
      }) : n.setState({
        view: "rgb"
      }));
    }, n.handleChange = function(i, o) {
      i.hex ? pc(i.hex) && n.props.onChange({
        hex: i.hex,
        source: "hex"
      }, o) : i.r || i.g || i.b ? n.props.onChange({
        r: i.r || n.props.rgb.r,
        g: i.g || n.props.rgb.g,
        b: i.b || n.props.rgb.b,
        source: "rgb"
      }, o) : i.a ? (i.a < 0 ? i.a = 0 : i.a > 1 && (i.a = 1), n.props.onChange({
        h: n.props.hsl.h,
        s: n.props.hsl.s,
        l: n.props.hsl.l,
        a: Math.round(i.a * 100) / 100,
        source: "rgb"
      }, o)) : (i.h || i.s || i.l) && (typeof i.s == "string" && i.s.includes("%") && (i.s = i.s.replace("%", "")), typeof i.l == "string" && i.l.includes("%") && (i.l = i.l.replace("%", "")), i.s == 1 ? i.s = 0.01 : i.l == 1 && (i.l = 0.01), n.props.onChange({
        h: i.h || n.props.hsl.h,
        s: Number(B6(i.s) ? n.props.hsl.s : i.s),
        l: Number(B6(i.l) ? n.props.hsl.l : i.l),
        source: "hsl"
      }, o));
    }, n.showHighlight = function(i) {
      i.currentTarget.style.background = "#eee";
    }, n.hideHighlight = function(i) {
      i.currentTarget.style.background = "transparent";
    }, r.hsl.a !== 1 && r.view === "hex" ? n.state = {
      view: "rgb"
    } : n.state = {
      view: r.view
    }, n;
  }
  return iZe(t, [{
    key: "render",
    value: function() {
      var n = this, i = wt({
        default: {
          wrap: {
            paddingTop: "16px",
            display: "flex"
          },
          fields: {
            flex: "1",
            display: "flex",
            marginLeft: "-6px"
          },
          field: {
            paddingLeft: "6px",
            width: "100%"
          },
          alpha: {
            paddingLeft: "6px",
            width: "100%"
          },
          toggle: {
            width: "32px",
            textAlign: "right",
            position: "relative"
          },
          icon: {
            marginRight: "-4px",
            marginTop: "12px",
            cursor: "pointer",
            position: "relative"
          },
          iconHighlight: {
            position: "absolute",
            width: "24px",
            height: "28px",
            background: "#eee",
            borderRadius: "4px",
            top: "10px",
            left: "12px",
            display: "none"
          },
          input: {
            fontSize: "11px",
            color: "#333",
            width: "100%",
            borderRadius: "2px",
            border: "none",
            boxShadow: "inset 0 0 0 1px #dadada",
            height: "21px",
            textAlign: "center"
          },
          label: {
            textTransform: "uppercase",
            fontSize: "11px",
            lineHeight: "11px",
            color: "#969696",
            textAlign: "center",
            display: "block",
            marginTop: "12px"
          },
          svg: {
            fill: "#333",
            width: "24px",
            height: "24px",
            border: "1px transparent solid",
            borderRadius: "5px"
          }
        },
        disableAlpha: {
          alpha: {
            display: "none"
          }
        }
      }, this.props, this.state), o = void 0;
      return this.state.view === "hex" ? o = import_react.default.createElement("div", {
        style: i.fields,
        className: "flexbox-fix"
      }, import_react.default.createElement("div", {
        style: i.field
      }, import_react.default.createElement(tr, {
        style: {
          input: i.input,
          label: i.label
        },
        label: "hex",
        value: this.props.hex,
        onChange: this.handleChange
      }))) : this.state.view === "rgb" ? o = import_react.default.createElement("div", {
        style: i.fields,
        className: "flexbox-fix"
      }, import_react.default.createElement("div", {
        style: i.field
      }, import_react.default.createElement(tr, {
        style: {
          input: i.input,
          label: i.label
        },
        label: "r",
        value: this.props.rgb.r,
        onChange: this.handleChange
      })), import_react.default.createElement("div", {
        style: i.field
      }, import_react.default.createElement(tr, {
        style: {
          input: i.input,
          label: i.label
        },
        label: "g",
        value: this.props.rgb.g,
        onChange: this.handleChange
      })), import_react.default.createElement("div", {
        style: i.field
      }, import_react.default.createElement(tr, {
        style: {
          input: i.input,
          label: i.label
        },
        label: "b",
        value: this.props.rgb.b,
        onChange: this.handleChange
      })), import_react.default.createElement("div", {
        style: i.alpha
      }, import_react.default.createElement(tr, {
        style: {
          input: i.input,
          label: i.label
        },
        label: "a",
        value: this.props.rgb.a,
        arrowOffset: 0.01,
        onChange: this.handleChange
      }))) : this.state.view === "hsl" && (o = import_react.default.createElement("div", {
        style: i.fields,
        className: "flexbox-fix"
      }, import_react.default.createElement("div", {
        style: i.field
      }, import_react.default.createElement(tr, {
        style: {
          input: i.input,
          label: i.label
        },
        label: "h",
        value: Math.round(this.props.hsl.h),
        onChange: this.handleChange
      })), import_react.default.createElement("div", {
        style: i.field
      }, import_react.default.createElement(tr, {
        style: {
          input: i.input,
          label: i.label
        },
        label: "s",
        value: Math.round(this.props.hsl.s * 100) + "%",
        onChange: this.handleChange
      })), import_react.default.createElement("div", {
        style: i.field
      }, import_react.default.createElement(tr, {
        style: {
          input: i.input,
          label: i.label
        },
        label: "l",
        value: Math.round(this.props.hsl.l * 100) + "%",
        onChange: this.handleChange
      })), import_react.default.createElement("div", {
        style: i.alpha
      }, import_react.default.createElement(tr, {
        style: {
          input: i.input,
          label: i.label
        },
        label: "a",
        value: this.props.hsl.a,
        arrowOffset: 0.01,
        onChange: this.handleChange
      })))), import_react.default.createElement("div", {
        style: i.wrap,
        className: "flexbox-fix"
      }, o, import_react.default.createElement("div", {
        style: i.toggle
      }, import_react.default.createElement("div", {
        style: i.icon,
        onClick: this.toggleViews,
        ref: function(s) {
          return n.icon = s;
        }
      }, import_react.default.createElement(nZe, {
        style: i.svg,
        onMouseOver: this.showHighlight,
        onMouseEnter: this.showHighlight,
        onMouseOut: this.hideHighlight
      }))));
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function(n, i) {
      return n.hsl.a !== 1 && i.view === "hex" ? {
        view: "rgb"
      } : null;
    }
  }]), t;
}(import_react.default.Component);
QJ.defaultProps = {
  view: "hex"
};
var H6 = function() {
  var t = wt({
    default: {
      picker: {
        width: "12px",
        height: "12px",
        borderRadius: "6px",
        transform: "translate(-6px, -1px)",
        backgroundColor: "rgb(248, 248, 248)",
        boxShadow: "0 1px 4px 0 rgba(0, 0, 0, 0.37)"
      }
    }
  });
  return import_react.default.createElement("div", {
    style: t.picker
  });
};
var lZe = function() {
  var t = wt({
    default: {
      picker: {
        width: "12px",
        height: "12px",
        borderRadius: "6px",
        boxShadow: "inset 0 0 0 1px #fff",
        transform: "translate(-6px, -6px)"
      }
    }
  });
  return import_react.default.createElement("div", {
    style: t.picker
  });
};
var vL = function(t) {
  var r = t.width, n = t.onChange, i = t.disableAlpha, o = t.rgb, a = t.hsl, s = t.hsv, l = t.hex, u = t.renderers, c = t.styles, f = c === void 0 ? {} : c, h = t.className, d = h === void 0 ? "" : h, p = t.defaultView, m = wt(Gi({
    default: {
      picker: {
        width: r,
        background: "#fff",
        borderRadius: "2px",
        boxShadow: "0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",
        boxSizing: "initial",
        fontFamily: "Menlo"
      },
      saturation: {
        width: "100%",
        paddingBottom: "55%",
        position: "relative",
        borderRadius: "2px 2px 0 0",
        overflow: "hidden"
      },
      Saturation: {
        radius: "2px 2px 0 0"
      },
      body: {
        padding: "16px 16px 12px"
      },
      controls: {
        display: "flex"
      },
      color: {
        width: "32px"
      },
      swatch: {
        marginTop: "6px",
        width: "16px",
        height: "16px",
        borderRadius: "8px",
        position: "relative",
        overflow: "hidden"
      },
      active: {
        absolute: "0px 0px 0px 0px",
        borderRadius: "8px",
        boxShadow: "inset 0 0 0 1px rgba(0,0,0,.1)",
        background: "rgba(" + o.r + ", " + o.g + ", " + o.b + ", " + o.a + ")",
        zIndex: "2"
      },
      toggles: {
        flex: "1"
      },
      hue: {
        height: "10px",
        position: "relative",
        marginBottom: "8px"
      },
      Hue: {
        radius: "2px"
      },
      alpha: {
        height: "10px",
        position: "relative"
      },
      Alpha: {
        radius: "2px"
      }
    },
    disableAlpha: {
      color: {
        width: "22px"
      },
      alpha: {
        display: "none"
      },
      hue: {
        marginBottom: "0px"
      },
      swatch: {
        width: "10px",
        height: "10px",
        marginTop: "0px"
      }
    }
  }, f), {
    disableAlpha: i
  });
  return import_react.default.createElement("div", {
    style: m.picker,
    className: "chrome-picker " + d
  }, import_react.default.createElement("div", {
    style: m.saturation
  }, import_react.default.createElement(FS, {
    style: m.Saturation,
    hsl: a,
    hsv: s,
    pointer: lZe,
    onChange: n
  })), import_react.default.createElement("div", {
    style: m.body
  }, import_react.default.createElement("div", {
    style: m.controls,
    className: "flexbox-fix"
  }, import_react.default.createElement("div", {
    style: m.color
  }, import_react.default.createElement("div", {
    style: m.swatch
  }, import_react.default.createElement("div", {
    style: m.active
  }), import_react.default.createElement(Cp, {
    renderers: u
  }))), import_react.default.createElement("div", {
    style: m.toggles
  }, import_react.default.createElement("div", {
    style: m.hue
  }, import_react.default.createElement(xp, {
    style: m.Hue,
    hsl: a,
    pointer: H6,
    onChange: n
  })), import_react.default.createElement("div", {
    style: m.alpha
  }, import_react.default.createElement(dL, {
    style: m.Alpha,
    rgb: o,
    hsl: a,
    pointer: H6,
    renderers: u,
    onChange: n
  })))), import_react.default.createElement(QJ, {
    rgb: o,
    hsl: a,
    hex: l,
    view: p,
    onChange: n,
    disableAlpha: i
  })));
};
vL.propTypes = {
  width: L.oneOfType([L.string, L.number]),
  disableAlpha: L.bool,
  styles: L.object,
  defaultView: L.oneOf(["hex", "rgb", "hsl"])
};
vL.defaultProps = {
  width: 225,
  disableAlpha: false,
  styles: {}
};
zi(vL);
var cZe = function(t) {
  var r = t.color, n = t.onClick, i = n === void 0 ? function() {
  } : n, o = t.onSwatchHover, a = t.active, s = wt({
    default: {
      color: {
        background: r,
        width: "15px",
        height: "15px",
        float: "left",
        marginRight: "5px",
        marginBottom: "5px",
        position: "relative",
        cursor: "pointer"
      },
      dot: {
        absolute: "5px 5px 5px 5px",
        background: pL(r),
        borderRadius: "50%",
        opacity: "0"
      }
    },
    active: {
      dot: {
        opacity: "1"
      }
    },
    "color-#FFFFFF": {
      color: {
        boxShadow: "inset 0 0 0 1px #ddd"
      },
      dot: {
        background: "#000"
      }
    },
    transparent: {
      dot: {
        background: "#000"
      }
    }
  }, {
    active: a,
    "color-#FFFFFF": r === "#FFFFFF",
    transparent: r === "transparent"
  });
  return import_react.default.createElement(gh, {
    style: s.color,
    color: r,
    onClick: i,
    onHover: o,
    focusStyle: {
      boxShadow: "0 0 4px " + r
    }
  }, import_react.default.createElement("div", {
    style: s.dot
  }));
};
var uZe = function(t) {
  var r = t.hex, n = t.rgb, i = t.onChange, o = wt({
    default: {
      fields: {
        display: "flex",
        paddingBottom: "6px",
        paddingRight: "5px",
        position: "relative"
      },
      active: {
        position: "absolute",
        top: "6px",
        left: "5px",
        height: "9px",
        width: "9px",
        background: r
      },
      HEXwrap: {
        flex: "6",
        position: "relative"
      },
      HEXinput: {
        width: "80%",
        padding: "0px",
        paddingLeft: "20%",
        border: "none",
        outline: "none",
        background: "none",
        fontSize: "12px",
        color: "#333",
        height: "16px"
      },
      HEXlabel: {
        display: "none"
      },
      RGBwrap: {
        flex: "3",
        position: "relative"
      },
      RGBinput: {
        width: "70%",
        padding: "0px",
        paddingLeft: "30%",
        border: "none",
        outline: "none",
        background: "none",
        fontSize: "12px",
        color: "#333",
        height: "16px"
      },
      RGBlabel: {
        position: "absolute",
        top: "3px",
        left: "0px",
        lineHeight: "16px",
        textTransform: "uppercase",
        fontSize: "12px",
        color: "#999"
      }
    }
  }), a = function(l, u) {
    l.r || l.g || l.b ? i({
      r: l.r || n.r,
      g: l.g || n.g,
      b: l.b || n.b,
      source: "rgb"
    }, u) : i({
      hex: l.hex,
      source: "hex"
    }, u);
  };
  return import_react.default.createElement("div", {
    style: o.fields,
    className: "flexbox-fix"
  }, import_react.default.createElement("div", {
    style: o.active
  }), import_react.default.createElement(tr, {
    style: {
      wrap: o.HEXwrap,
      input: o.HEXinput,
      label: o.HEXlabel
    },
    label: "hex",
    value: r,
    onChange: a
  }), import_react.default.createElement(tr, {
    style: {
      wrap: o.RGBwrap,
      input: o.RGBinput,
      label: o.RGBlabel
    },
    label: "r",
    value: n.r,
    onChange: a
  }), import_react.default.createElement(tr, {
    style: {
      wrap: o.RGBwrap,
      input: o.RGBinput,
      label: o.RGBlabel
    },
    label: "g",
    value: n.g,
    onChange: a
  }), import_react.default.createElement(tr, {
    style: {
      wrap: o.RGBwrap,
      input: o.RGBinput,
      label: o.RGBlabel
    },
    label: "b",
    value: n.b,
    onChange: a
  }));
};
var yL = function(t) {
  var r = t.onChange, n = t.onSwatchHover, i = t.colors, o = t.hex, a = t.rgb, s = t.styles, l = s === void 0 ? {} : s, u = t.className, c = u === void 0 ? "" : u, f = wt(Gi({
    default: {
      Compact: {
        background: "#f6f6f6",
        radius: "4px"
      },
      compact: {
        paddingTop: "5px",
        paddingLeft: "5px",
        boxSizing: "initial",
        width: "240px"
      },
      clear: {
        clear: "both"
      }
    }
  }, l)), h = function(p, m) {
    p.hex ? pc(p.hex) && r({
      hex: p.hex,
      source: "hex"
    }, m) : r(p, m);
  };
  return import_react.default.createElement(Ry, {
    style: f.Compact,
    styles: l
  }, import_react.default.createElement("div", {
    style: f.compact,
    className: "compact-picker " + c
  }, import_react.default.createElement("div", null, dc(i, function(d) {
    return import_react.default.createElement(cZe, {
      key: d,
      color: d,
      active: d.toLowerCase() === o,
      onClick: h,
      onSwatchHover: n
    });
  }), import_react.default.createElement("div", {
    style: f.clear
  })), import_react.default.createElement(uZe, {
    hex: o,
    rgb: a,
    onChange: h
  })));
};
yL.propTypes = {
  colors: L.arrayOf(L.string),
  styles: L.object
};
yL.defaultProps = {
  colors: ["#4D4D4D", "#999999", "#FFFFFF", "#F44E3B", "#FE9200", "#FCDC00", "#DBDF00", "#A4DD00", "#68CCCA", "#73D8FF", "#AEA1FF", "#FDA1FF", "#333333", "#808080", "#cccccc", "#D33115", "#E27300", "#FCC400", "#B0BC00", "#68BC00", "#16A5A5", "#009CE0", "#7B64FF", "#FA28FF", "#000000", "#666666", "#B3B3B3", "#9F0500", "#C45100", "#FB9E00", "#808900", "#194D33", "#0C797D", "#0062B1", "#653294", "#AB149E"],
  styles: {}
};
zi(yL);
var hZe = function(t) {
  var r = t.hover, n = t.color, i = t.onClick, o = t.onSwatchHover, a = {
    position: "relative",
    zIndex: "2",
    outline: "2px solid #fff",
    boxShadow: "0 0 5px 2px rgba(0,0,0,0.25)"
  }, s = wt({
    default: {
      swatch: {
        width: "25px",
        height: "25px",
        fontSize: "0"
      }
    },
    hover: {
      swatch: a
    }
  }, {
    hover: r
  });
  return import_react.default.createElement("div", {
    style: s.swatch
  }, import_react.default.createElement(gh, {
    color: n,
    onClick: i,
    onHover: o,
    focusStyle: a
  }));
};
var fZe = fL(hZe);
var _L = function(t) {
  var r = t.width, n = t.colors, i = t.onChange, o = t.onSwatchHover, a = t.triangle, s = t.styles, l = s === void 0 ? {} : s, u = t.className, c = u === void 0 ? "" : u, f = wt(Gi({
    default: {
      card: {
        width: r,
        background: "#fff",
        border: "1px solid rgba(0,0,0,0.2)",
        boxShadow: "0 3px 12px rgba(0,0,0,0.15)",
        borderRadius: "4px",
        position: "relative",
        padding: "5px",
        display: "flex",
        flexWrap: "wrap"
      },
      triangle: {
        position: "absolute",
        border: "7px solid transparent",
        borderBottomColor: "#fff"
      },
      triangleShadow: {
        position: "absolute",
        border: "8px solid transparent",
        borderBottomColor: "rgba(0,0,0,0.15)"
      }
    },
    "hide-triangle": {
      triangle: {
        display: "none"
      },
      triangleShadow: {
        display: "none"
      }
    },
    "top-left-triangle": {
      triangle: {
        top: "-14px",
        left: "10px"
      },
      triangleShadow: {
        top: "-16px",
        left: "9px"
      }
    },
    "top-right-triangle": {
      triangle: {
        top: "-14px",
        right: "10px"
      },
      triangleShadow: {
        top: "-16px",
        right: "9px"
      }
    },
    "bottom-left-triangle": {
      triangle: {
        top: "35px",
        left: "10px",
        transform: "rotate(180deg)"
      },
      triangleShadow: {
        top: "37px",
        left: "9px",
        transform: "rotate(180deg)"
      }
    },
    "bottom-right-triangle": {
      triangle: {
        top: "35px",
        right: "10px",
        transform: "rotate(180deg)"
      },
      triangleShadow: {
        top: "37px",
        right: "9px",
        transform: "rotate(180deg)"
      }
    }
  }, l), {
    "hide-triangle": a === "hide",
    "top-left-triangle": a === "top-left",
    "top-right-triangle": a === "top-right",
    "bottom-left-triangle": a === "bottom-left",
    "bottom-right-triangle": a === "bottom-right"
  }), h = function(p, m) {
    return i({
      hex: p,
      source: "hex"
    }, m);
  };
  return import_react.default.createElement("div", {
    style: f.card,
    className: "github-picker " + c
  }, import_react.default.createElement("div", {
    style: f.triangleShadow
  }), import_react.default.createElement("div", {
    style: f.triangle
  }), dc(n, function(d) {
    return import_react.default.createElement(fZe, {
      color: d,
      key: d,
      onClick: h,
      onSwatchHover: o
    });
  }));
};
_L.propTypes = {
  width: L.oneOfType([L.string, L.number]),
  colors: L.arrayOf(L.string),
  triangle: L.oneOf(["hide", "top-left", "top-right", "bottom-left", "bottom-right"]),
  styles: L.object
};
_L.defaultProps = {
  width: 200,
  colors: ["#B80000", "#DB3E00", "#FCCB00", "#008B02", "#006B76", "#1273DE", "#004DCF", "#5300EB", "#EB9694", "#FAD0C3", "#FEF3BD", "#C1E1C5", "#BEDADC", "#C4DEF6", "#BED3F3", "#D4C4FB"],
  triangle: "top-left",
  styles: {}
};
zi(_L);
var dZe = function(t) {
  var r = t.direction, n = wt({
    default: {
      picker: {
        width: "18px",
        height: "18px",
        borderRadius: "50%",
        transform: "translate(-9px, -1px)",
        backgroundColor: "rgb(248, 248, 248)",
        boxShadow: "0 1px 4px 0 rgba(0, 0, 0, 0.37)"
      }
    },
    vertical: {
      picker: {
        transform: "translate(-3px, -9px)"
      }
    }
  }, {
    vertical: r === "vertical"
  });
  return import_react.default.createElement("div", {
    style: n.picker
  });
};
var pZe = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var bL = function(t) {
  var r = t.width, n = t.height, i = t.onChange, o = t.hsl, a = t.direction, s = t.pointer, l = t.styles, u = l === void 0 ? {} : l, c = t.className, f = c === void 0 ? "" : c, h = wt(Gi({
    default: {
      picker: {
        position: "relative",
        width: r,
        height: n
      },
      hue: {
        radius: "2px"
      }
    }
  }, u)), d = function(m) {
    return i({
      a: 1,
      h: m.h,
      l: 0.5,
      s: 1
    });
  };
  return import_react.default.createElement("div", {
    style: h.picker,
    className: "hue-picker " + f
  }, import_react.default.createElement(xp, pZe({}, h.hue, {
    hsl: o,
    pointer: s,
    onChange: d,
    direction: a
  })));
};
bL.propTypes = {
  styles: L.object
};
bL.defaultProps = {
  width: "316px",
  height: "16px",
  direction: "horizontal",
  pointer: dZe,
  styles: {}
};
zi(bL);
var mZe = function(t) {
  var r = t.onChange, n = t.hex, i = t.rgb, o = t.styles, a = o === void 0 ? {} : o, s = t.className, l = s === void 0 ? "" : s, u = wt(Gi({
    default: {
      material: {
        width: "98px",
        height: "98px",
        padding: "16px",
        fontFamily: "Roboto"
      },
      HEXwrap: {
        position: "relative"
      },
      HEXinput: {
        width: "100%",
        marginTop: "12px",
        fontSize: "15px",
        color: "#333",
        padding: "0px",
        border: "0px",
        borderBottom: "2px solid " + n,
        outline: "none",
        height: "30px"
      },
      HEXlabel: {
        position: "absolute",
        top: "0px",
        left: "0px",
        fontSize: "11px",
        color: "#999999",
        textTransform: "capitalize"
      },
      Hex: {
        style: {}
      },
      RGBwrap: {
        position: "relative"
      },
      RGBinput: {
        width: "100%",
        marginTop: "12px",
        fontSize: "15px",
        color: "#333",
        padding: "0px",
        border: "0px",
        borderBottom: "1px solid #eee",
        outline: "none",
        height: "30px"
      },
      RGBlabel: {
        position: "absolute",
        top: "0px",
        left: "0px",
        fontSize: "11px",
        color: "#999999",
        textTransform: "capitalize"
      },
      split: {
        display: "flex",
        marginRight: "-10px",
        paddingTop: "11px"
      },
      third: {
        flex: "1",
        paddingRight: "10px"
      }
    }
  }, a)), c = function(h, d) {
    h.hex ? pc(h.hex) && r({
      hex: h.hex,
      source: "hex"
    }, d) : (h.r || h.g || h.b) && r({
      r: h.r || i.r,
      g: h.g || i.g,
      b: h.b || i.b,
      source: "rgb"
    }, d);
  };
  return import_react.default.createElement(Ry, {
    styles: a
  }, import_react.default.createElement("div", {
    style: u.material,
    className: "material-picker " + l
  }, import_react.default.createElement(tr, {
    style: {
      wrap: u.HEXwrap,
      input: u.HEXinput,
      label: u.HEXlabel
    },
    label: "hex",
    value: n,
    onChange: c
  }), import_react.default.createElement("div", {
    style: u.split,
    className: "flexbox-fix"
  }, import_react.default.createElement("div", {
    style: u.third
  }, import_react.default.createElement(tr, {
    style: {
      wrap: u.RGBwrap,
      input: u.RGBinput,
      label: u.RGBlabel
    },
    label: "r",
    value: i.r,
    onChange: c
  })), import_react.default.createElement("div", {
    style: u.third
  }, import_react.default.createElement(tr, {
    style: {
      wrap: u.RGBwrap,
      input: u.RGBinput,
      label: u.RGBlabel
    },
    label: "g",
    value: i.g,
    onChange: c
  })), import_react.default.createElement("div", {
    style: u.third
  }, import_react.default.createElement(tr, {
    style: {
      wrap: u.RGBwrap,
      input: u.RGBinput,
      label: u.RGBlabel
    },
    label: "b",
    value: i.b,
    onChange: c
  })))));
};
zi(mZe);
var gZe = function(t) {
  var r = t.onChange, n = t.rgb, i = t.hsv, o = t.hex, a = wt({
    default: {
      fields: {
        paddingTop: "5px",
        paddingBottom: "9px",
        width: "80px",
        position: "relative"
      },
      divider: {
        height: "5px"
      },
      RGBwrap: {
        position: "relative"
      },
      RGBinput: {
        marginLeft: "40%",
        width: "40%",
        height: "18px",
        border: "1px solid #888888",
        boxShadow: "inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",
        marginBottom: "5px",
        fontSize: "13px",
        paddingLeft: "3px",
        marginRight: "10px"
      },
      RGBlabel: {
        left: "0px",
        top: "0px",
        width: "34px",
        textTransform: "uppercase",
        fontSize: "13px",
        height: "18px",
        lineHeight: "22px",
        position: "absolute"
      },
      HEXwrap: {
        position: "relative"
      },
      HEXinput: {
        marginLeft: "20%",
        width: "80%",
        height: "18px",
        border: "1px solid #888888",
        boxShadow: "inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",
        marginBottom: "6px",
        fontSize: "13px",
        paddingLeft: "3px"
      },
      HEXlabel: {
        position: "absolute",
        top: "0px",
        left: "0px",
        width: "14px",
        textTransform: "uppercase",
        fontSize: "13px",
        height: "18px",
        lineHeight: "22px"
      },
      fieldSymbols: {
        position: "absolute",
        top: "5px",
        right: "-7px",
        fontSize: "13px"
      },
      symbol: {
        height: "20px",
        lineHeight: "22px",
        paddingBottom: "7px"
      }
    }
  }), s = function(u, c) {
    u["#"] ? pc(u["#"]) && r({
      hex: u["#"],
      source: "hex"
    }, c) : u.r || u.g || u.b ? r({
      r: u.r || n.r,
      g: u.g || n.g,
      b: u.b || n.b,
      source: "rgb"
    }, c) : (u.h || u.s || u.v) && r({
      h: u.h || i.h,
      s: u.s || i.s,
      v: u.v || i.v,
      source: "hsv"
    }, c);
  };
  return import_react.default.createElement("div", {
    style: a.fields
  }, import_react.default.createElement(tr, {
    style: {
      wrap: a.RGBwrap,
      input: a.RGBinput,
      label: a.RGBlabel
    },
    label: "h",
    value: Math.round(i.h),
    onChange: s
  }), import_react.default.createElement(tr, {
    style: {
      wrap: a.RGBwrap,
      input: a.RGBinput,
      label: a.RGBlabel
    },
    label: "s",
    value: Math.round(i.s * 100),
    onChange: s
  }), import_react.default.createElement(tr, {
    style: {
      wrap: a.RGBwrap,
      input: a.RGBinput,
      label: a.RGBlabel
    },
    label: "v",
    value: Math.round(i.v * 100),
    onChange: s
  }), import_react.default.createElement("div", {
    style: a.divider
  }), import_react.default.createElement(tr, {
    style: {
      wrap: a.RGBwrap,
      input: a.RGBinput,
      label: a.RGBlabel
    },
    label: "r",
    value: n.r,
    onChange: s
  }), import_react.default.createElement(tr, {
    style: {
      wrap: a.RGBwrap,
      input: a.RGBinput,
      label: a.RGBlabel
    },
    label: "g",
    value: n.g,
    onChange: s
  }), import_react.default.createElement(tr, {
    style: {
      wrap: a.RGBwrap,
      input: a.RGBinput,
      label: a.RGBlabel
    },
    label: "b",
    value: n.b,
    onChange: s
  }), import_react.default.createElement("div", {
    style: a.divider
  }), import_react.default.createElement(tr, {
    style: {
      wrap: a.HEXwrap,
      input: a.HEXinput,
      label: a.HEXlabel
    },
    label: "#",
    value: o.replace("#", ""),
    onChange: s
  }), import_react.default.createElement("div", {
    style: a.fieldSymbols
  }, import_react.default.createElement("div", {
    style: a.symbol
  }, "°"), import_react.default.createElement("div", {
    style: a.symbol
  }, "%"), import_react.default.createElement("div", {
    style: a.symbol
  }, "%")));
};
var vZe = function(t) {
  var r = t.hsl, n = wt({
    default: {
      picker: {
        width: "12px",
        height: "12px",
        borderRadius: "6px",
        boxShadow: "inset 0 0 0 1px #fff",
        transform: "translate(-6px, -6px)"
      }
    },
    "black-outline": {
      picker: {
        boxShadow: "inset 0 0 0 1px #000"
      }
    }
  }, {
    "black-outline": r.l > 0.5
  });
  return import_react.default.createElement("div", {
    style: n.picker
  });
};
var yZe = function() {
  var t = wt({
    default: {
      triangle: {
        width: 0,
        height: 0,
        borderStyle: "solid",
        borderWidth: "4px 0 4px 6px",
        borderColor: "transparent transparent transparent #fff",
        position: "absolute",
        top: "1px",
        left: "1px"
      },
      triangleBorder: {
        width: 0,
        height: 0,
        borderStyle: "solid",
        borderWidth: "5px 0 5px 8px",
        borderColor: "transparent transparent transparent #555"
      },
      left: {
        Extend: "triangleBorder",
        transform: "translate(-13px, -4px)"
      },
      leftInside: {
        Extend: "triangle",
        transform: "translate(-8px, -5px)"
      },
      right: {
        Extend: "triangleBorder",
        transform: "translate(20px, -14px) rotate(180deg)"
      },
      rightInside: {
        Extend: "triangle",
        transform: "translate(-8px, -5px)"
      }
    }
  });
  return import_react.default.createElement("div", {
    style: t.pointer
  }, import_react.default.createElement("div", {
    style: t.left
  }, import_react.default.createElement("div", {
    style: t.leftInside
  })), import_react.default.createElement("div", {
    style: t.right
  }, import_react.default.createElement("div", {
    style: t.rightInside
  })));
};
var U6 = function(t) {
  var r = t.onClick, n = t.label, i = t.children, o = t.active, a = wt({
    default: {
      button: {
        backgroundImage: "linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",
        border: "1px solid #878787",
        borderRadius: "2px",
        height: "20px",
        boxShadow: "0 1px 0 0 #EAEAEA",
        fontSize: "14px",
        color: "#000",
        lineHeight: "20px",
        textAlign: "center",
        marginBottom: "10px",
        cursor: "pointer"
      }
    },
    active: {
      button: {
        boxShadow: "0 0 0 1px #878787"
      }
    }
  }, {
    active: o
  });
  return import_react.default.createElement("div", {
    style: a.button,
    onClick: r
  }, n || i);
};
var _Ze = function(t) {
  var r = t.rgb, n = t.currentColor, i = wt({
    default: {
      swatches: {
        border: "1px solid #B3B3B3",
        borderBottom: "1px solid #F0F0F0",
        marginBottom: "2px",
        marginTop: "1px"
      },
      new: {
        height: "34px",
        background: "rgb(" + r.r + "," + r.g + ", " + r.b + ")",
        boxShadow: "inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"
      },
      current: {
        height: "34px",
        background: n,
        boxShadow: "inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"
      },
      label: {
        fontSize: "14px",
        color: "#000",
        textAlign: "center"
      }
    }
  });
  return import_react.default.createElement("div", null, import_react.default.createElement("div", {
    style: i.label
  }, "new"), import_react.default.createElement("div", {
    style: i.swatches
  }, import_react.default.createElement("div", {
    style: i.new
  }), import_react.default.createElement("div", {
    style: i.current
  })), import_react.default.createElement("div", {
    style: i.label
  }, "current"));
};
var bZe = /* @__PURE__ */ function() {
  function e12(t, r) {
    for (var n = 0; n < r.length; n++) {
      var i = r[n];
      i.enumerable = i.enumerable || false, i.configurable = true, "value" in i && (i.writable = true), Object.defineProperty(t, i.key, i);
    }
  }
  return function(t, r, n) {
    return r && e12(t.prototype, r), n && e12(t, n), t;
  };
}();
function TZe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function EZe(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function SZe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var TL = function(e12) {
  SZe(t, e12);
  function t(r) {
    TZe(this, t);
    var n = EZe(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
    return n.state = {
      currentColor: r.hex
    }, n;
  }
  return bZe(t, [{
    key: "render",
    value: function() {
      var n = this.props, i = n.styles, o = i === void 0 ? {} : i, a = n.className, s = a === void 0 ? "" : a, l = wt(Gi({
        default: {
          picker: {
            background: "#DCDCDC",
            borderRadius: "4px",
            boxShadow: "0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",
            boxSizing: "initial",
            width: "513px"
          },
          head: {
            backgroundImage: "linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",
            borderBottom: "1px solid #B1B1B1",
            boxShadow: "inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",
            height: "23px",
            lineHeight: "24px",
            borderRadius: "4px 4px 0 0",
            fontSize: "13px",
            color: "#4D4D4D",
            textAlign: "center"
          },
          body: {
            padding: "15px 15px 0",
            display: "flex"
          },
          saturation: {
            width: "256px",
            height: "256px",
            position: "relative",
            border: "2px solid #B3B3B3",
            borderBottom: "2px solid #F0F0F0",
            overflow: "hidden"
          },
          hue: {
            position: "relative",
            height: "256px",
            width: "19px",
            marginLeft: "10px",
            border: "2px solid #B3B3B3",
            borderBottom: "2px solid #F0F0F0"
          },
          controls: {
            width: "180px",
            marginLeft: "10px"
          },
          top: {
            display: "flex"
          },
          previews: {
            width: "60px"
          },
          actions: {
            flex: "1",
            marginLeft: "20px"
          }
        }
      }, o));
      return import_react.default.createElement("div", {
        style: l.picker,
        className: "photoshop-picker " + s
      }, import_react.default.createElement("div", {
        style: l.head
      }, this.props.header), import_react.default.createElement("div", {
        style: l.body,
        className: "flexbox-fix"
      }, import_react.default.createElement("div", {
        style: l.saturation
      }, import_react.default.createElement(FS, {
        hsl: this.props.hsl,
        hsv: this.props.hsv,
        pointer: vZe,
        onChange: this.props.onChange
      })), import_react.default.createElement("div", {
        style: l.hue
      }, import_react.default.createElement(xp, {
        direction: "vertical",
        hsl: this.props.hsl,
        pointer: yZe,
        onChange: this.props.onChange
      })), import_react.default.createElement("div", {
        style: l.controls
      }, import_react.default.createElement("div", {
        style: l.top,
        className: "flexbox-fix"
      }, import_react.default.createElement("div", {
        style: l.previews
      }, import_react.default.createElement(_Ze, {
        rgb: this.props.rgb,
        currentColor: this.state.currentColor
      })), import_react.default.createElement("div", {
        style: l.actions
      }, import_react.default.createElement(U6, {
        label: "OK",
        onClick: this.props.onAccept,
        active: true
      }), import_react.default.createElement(U6, {
        label: "Cancel",
        onClick: this.props.onCancel
      }), import_react.default.createElement(gZe, {
        onChange: this.props.onChange,
        rgb: this.props.rgb,
        hsv: this.props.hsv,
        hex: this.props.hex
      }))))));
    }
  }]), t;
}(import_react.default.Component);
TL.propTypes = {
  header: L.string,
  styles: L.object
};
TL.defaultProps = {
  header: "Color Picker",
  styles: {}
};
zi(TL);
var wZe = function(t) {
  var r = t.onChange, n = t.rgb, i = t.hsl, o = t.hex, a = t.disableAlpha, s = wt({
    default: {
      fields: {
        display: "flex",
        paddingTop: "4px"
      },
      single: {
        flex: "1",
        paddingLeft: "6px"
      },
      alpha: {
        flex: "1",
        paddingLeft: "6px"
      },
      double: {
        flex: "2"
      },
      input: {
        width: "80%",
        padding: "4px 10% 3px",
        border: "none",
        boxShadow: "inset 0 0 0 1px #ccc",
        fontSize: "11px"
      },
      label: {
        display: "block",
        textAlign: "center",
        fontSize: "11px",
        color: "#222",
        paddingTop: "3px",
        paddingBottom: "4px",
        textTransform: "capitalize"
      }
    },
    disableAlpha: {
      alpha: {
        display: "none"
      }
    }
  }, {
    disableAlpha: a
  }), l = function(c, f) {
    c.hex ? pc(c.hex) && r({
      hex: c.hex,
      source: "hex"
    }, f) : c.r || c.g || c.b ? r({
      r: c.r || n.r,
      g: c.g || n.g,
      b: c.b || n.b,
      a: n.a,
      source: "rgb"
    }, f) : c.a && (c.a < 0 ? c.a = 0 : c.a > 100 && (c.a = 100), c.a /= 100, r({
      h: i.h,
      s: i.s,
      l: i.l,
      a: c.a,
      source: "rgb"
    }, f));
  };
  return import_react.default.createElement("div", {
    style: s.fields,
    className: "flexbox-fix"
  }, import_react.default.createElement("div", {
    style: s.double
  }, import_react.default.createElement(tr, {
    style: {
      input: s.input,
      label: s.label
    },
    label: "hex",
    value: o.replace("#", ""),
    onChange: l
  })), import_react.default.createElement("div", {
    style: s.single
  }, import_react.default.createElement(tr, {
    style: {
      input: s.input,
      label: s.label
    },
    label: "r",
    value: n.r,
    onChange: l,
    dragLabel: "true",
    dragMax: "255"
  })), import_react.default.createElement("div", {
    style: s.single
  }, import_react.default.createElement(tr, {
    style: {
      input: s.input,
      label: s.label
    },
    label: "g",
    value: n.g,
    onChange: l,
    dragLabel: "true",
    dragMax: "255"
  })), import_react.default.createElement("div", {
    style: s.single
  }, import_react.default.createElement(tr, {
    style: {
      input: s.input,
      label: s.label
    },
    label: "b",
    value: n.b,
    onChange: l,
    dragLabel: "true",
    dragMax: "255"
  })), import_react.default.createElement("div", {
    style: s.alpha
  }, import_react.default.createElement(tr, {
    style: {
      input: s.input,
      label: s.label
    },
    label: "a",
    value: Math.round(n.a * 100),
    onChange: l,
    dragLabel: "true",
    dragMax: "100"
  })));
};
var AZe = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var JJ = function(t) {
  var r = t.colors, n = t.onClick, i = n === void 0 ? function() {
  } : n, o = t.onSwatchHover, a = wt({
    default: {
      colors: {
        margin: "0 -10px",
        padding: "10px 0 0 10px",
        borderTop: "1px solid #eee",
        display: "flex",
        flexWrap: "wrap",
        position: "relative"
      },
      swatchWrap: {
        width: "16px",
        height: "16px",
        margin: "0 10px 10px 0"
      },
      swatch: {
        borderRadius: "3px",
        boxShadow: "inset 0 0 0 1px rgba(0,0,0,.15)"
      }
    },
    "no-presets": {
      colors: {
        display: "none"
      }
    }
  }, {
    "no-presets": !r || !r.length
  }), s = function(u, c) {
    i({
      hex: u,
      source: "hex"
    }, c);
  };
  return import_react.default.createElement("div", {
    style: a.colors,
    className: "flexbox-fix"
  }, r.map(function(l) {
    var u = typeof l == "string" ? {
      color: l
    } : l, c = "" + u.color + (u.title || "");
    return import_react.default.createElement("div", {
      key: c,
      style: a.swatchWrap
    }, import_react.default.createElement(gh, AZe({}, u, {
      style: a.swatch,
      onClick: s,
      onHover: o,
      focusStyle: {
        boxShadow: "inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px " + u.color
      }
    })));
  }));
};
JJ.propTypes = {
  colors: L.arrayOf(L.oneOfType([L.string, L.shape({
    color: L.string,
    title: L.string
  })])).isRequired
};
var OZe = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var EL = function(t) {
  var r = t.width, n = t.rgb, i = t.hex, o = t.hsv, a = t.hsl, s = t.onChange, l = t.onSwatchHover, u = t.disableAlpha, c = t.presetColors, f = t.renderers, h = t.styles, d = h === void 0 ? {} : h, p = t.className, m = p === void 0 ? "" : p, g = wt(Gi({
    default: OZe({
      picker: {
        width: r,
        padding: "10px 10px 0",
        boxSizing: "initial",
        background: "#fff",
        borderRadius: "4px",
        boxShadow: "0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"
      },
      saturation: {
        width: "100%",
        paddingBottom: "75%",
        position: "relative",
        overflow: "hidden"
      },
      Saturation: {
        radius: "3px",
        shadow: "inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"
      },
      controls: {
        display: "flex"
      },
      sliders: {
        padding: "4px 0",
        flex: "1"
      },
      color: {
        width: "24px",
        height: "24px",
        position: "relative",
        marginTop: "4px",
        marginLeft: "4px",
        borderRadius: "3px"
      },
      activeColor: {
        absolute: "0px 0px 0px 0px",
        borderRadius: "2px",
        background: "rgba(" + n.r + "," + n.g + "," + n.b + "," + n.a + ")",
        boxShadow: "inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"
      },
      hue: {
        position: "relative",
        height: "10px",
        overflow: "hidden"
      },
      Hue: {
        radius: "2px",
        shadow: "inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"
      },
      alpha: {
        position: "relative",
        height: "10px",
        marginTop: "4px",
        overflow: "hidden"
      },
      Alpha: {
        radius: "2px",
        shadow: "inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"
      }
    }, d),
    disableAlpha: {
      color: {
        height: "10px"
      },
      hue: {
        height: "10px"
      },
      alpha: {
        display: "none"
      }
    }
  }, d), {
    disableAlpha: u
  });
  return import_react.default.createElement("div", {
    style: g.picker,
    className: "sketch-picker " + m
  }, import_react.default.createElement("div", {
    style: g.saturation
  }, import_react.default.createElement(FS, {
    style: g.Saturation,
    hsl: a,
    hsv: o,
    onChange: s
  })), import_react.default.createElement("div", {
    style: g.controls,
    className: "flexbox-fix"
  }, import_react.default.createElement("div", {
    style: g.sliders
  }, import_react.default.createElement("div", {
    style: g.hue
  }, import_react.default.createElement(xp, {
    style: g.Hue,
    hsl: a,
    onChange: s
  })), import_react.default.createElement("div", {
    style: g.alpha
  }, import_react.default.createElement(dL, {
    style: g.Alpha,
    rgb: n,
    hsl: a,
    renderers: f,
    onChange: s
  }))), import_react.default.createElement("div", {
    style: g.color
  }, import_react.default.createElement(Cp, null), import_react.default.createElement("div", {
    style: g.activeColor
  }))), import_react.default.createElement(wZe, {
    rgb: n,
    hsl: a,
    hex: i,
    onChange: s,
    disableAlpha: u
  }), import_react.default.createElement(JJ, {
    colors: c,
    onClick: s,
    onSwatchHover: l
  }));
};
EL.propTypes = {
  disableAlpha: L.bool,
  width: L.oneOfType([L.string, L.number]),
  styles: L.object
};
EL.defaultProps = {
  disableAlpha: false,
  width: 200,
  styles: {},
  presetColors: ["#D0021B", "#F5A623", "#F8E71C", "#8B572A", "#7ED321", "#417505", "#BD10E0", "#9013FE", "#4A90E2", "#50E3C2", "#B8E986", "#000000", "#4A4A4A", "#9B9B9B", "#FFFFFF"]
};
var IZe = zi(EL);
var dm = function(t) {
  var r = t.hsl, n = t.offset, i = t.onClick, o = i === void 0 ? function() {
  } : i, a = t.active, s = t.first, l = t.last, u = wt({
    default: {
      swatch: {
        height: "12px",
        background: "hsl(" + r.h + ", 50%, " + n * 100 + "%)",
        cursor: "pointer"
      }
    },
    first: {
      swatch: {
        borderRadius: "2px 0 0 2px"
      }
    },
    last: {
      swatch: {
        borderRadius: "0 2px 2px 0"
      }
    },
    active: {
      swatch: {
        transform: "scaleY(1.8)",
        borderRadius: "3.6px/2px"
      }
    }
  }, {
    active: a,
    first: s,
    last: l
  }), c = function(h) {
    return o({
      h: r.h,
      s: 0.5,
      l: n,
      source: "hsl"
    }, h);
  };
  return import_react.default.createElement("div", {
    style: u.swatch,
    onClick: c
  });
};
var PZe = function(t) {
  var r = t.onClick, n = t.hsl, i = wt({
    default: {
      swatches: {
        marginTop: "20px"
      },
      swatch: {
        boxSizing: "border-box",
        width: "20%",
        paddingRight: "1px",
        float: "left"
      },
      clear: {
        clear: "both"
      }
    }
  }), o = 0.1;
  return import_react.default.createElement("div", {
    style: i.swatches
  }, import_react.default.createElement("div", {
    style: i.swatch
  }, import_react.default.createElement(dm, {
    hsl: n,
    offset: ".80",
    active: Math.abs(n.l - 0.8) < o && Math.abs(n.s - 0.5) < o,
    onClick: r,
    first: true
  })), import_react.default.createElement("div", {
    style: i.swatch
  }, import_react.default.createElement(dm, {
    hsl: n,
    offset: ".65",
    active: Math.abs(n.l - 0.65) < o && Math.abs(n.s - 0.5) < o,
    onClick: r
  })), import_react.default.createElement("div", {
    style: i.swatch
  }, import_react.default.createElement(dm, {
    hsl: n,
    offset: ".50",
    active: Math.abs(n.l - 0.5) < o && Math.abs(n.s - 0.5) < o,
    onClick: r
  })), import_react.default.createElement("div", {
    style: i.swatch
  }, import_react.default.createElement(dm, {
    hsl: n,
    offset: ".35",
    active: Math.abs(n.l - 0.35) < o && Math.abs(n.s - 0.5) < o,
    onClick: r
  })), import_react.default.createElement("div", {
    style: i.swatch
  }, import_react.default.createElement(dm, {
    hsl: n,
    offset: ".20",
    active: Math.abs(n.l - 0.2) < o && Math.abs(n.s - 0.5) < o,
    onClick: r,
    last: true
  })), import_react.default.createElement("div", {
    style: i.clear
  }));
};
var CZe = function() {
  var t = wt({
    default: {
      picker: {
        width: "14px",
        height: "14px",
        borderRadius: "6px",
        transform: "translate(-7px, -1px)",
        backgroundColor: "rgb(248, 248, 248)",
        boxShadow: "0 1px 4px 0 rgba(0, 0, 0, 0.37)"
      }
    }
  });
  return import_react.default.createElement("div", {
    style: t.picker
  });
};
var SL = function(t) {
  var r = t.hsl, n = t.onChange, i = t.pointer, o = t.styles, a = o === void 0 ? {} : o, s = t.className, l = s === void 0 ? "" : s, u = wt(Gi({
    default: {
      hue: {
        height: "12px",
        position: "relative"
      },
      Hue: {
        radius: "2px"
      }
    }
  }, a));
  return import_react.default.createElement("div", {
    style: u.wrap || {},
    className: "slider-picker " + l
  }, import_react.default.createElement("div", {
    style: u.hue
  }, import_react.default.createElement(xp, {
    style: u.Hue,
    hsl: r,
    pointer: i,
    onChange: n
  })), import_react.default.createElement("div", {
    style: u.swatches
  }, import_react.default.createElement(PZe, {
    hsl: r,
    onClick: n
  })));
};
SL.propTypes = {
  styles: L.object
};
SL.defaultProps = {
  pointer: CZe,
  styles: {}
};
zi(SL);
var eee = {};
Object.defineProperty(eee, "__esModule", {
  value: true
});
var j6 = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var xZe = import_react.default;
var G6 = kZe(xZe);
function kZe(e12) {
  return e12 && e12.__esModule ? e12 : {
    default: e12
  };
}
function DZe(e12, t) {
  var r = {};
  for (var n in e12)
    t.indexOf(n) >= 0 || Object.prototype.hasOwnProperty.call(e12, n) && (r[n] = e12[n]);
  return r;
}
var X_ = 24;
var RZe = eee.default = function(e12) {
  var t = e12.fill, r = t === void 0 ? "currentColor" : t, n = e12.width, i = n === void 0 ? X_ : n, o = e12.height, a = o === void 0 ? X_ : o, s = e12.style, l = s === void 0 ? {} : s, u = DZe(e12, ["fill", "width", "height", "style"]);
  return G6.default.createElement("svg", j6({
    viewBox: "0 0 " + X_ + " " + X_,
    style: j6({
      fill: r,
      width: i,
      height: a
    }, l)
  }, u), G6.default.createElement("path", {
    d: "M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"
  }));
};
var NZe = function(t) {
  var r = t.color, n = t.onClick, i = n === void 0 ? function() {
  } : n, o = t.onSwatchHover, a = t.first, s = t.last, l = t.active, u = wt({
    default: {
      color: {
        width: "40px",
        height: "24px",
        cursor: "pointer",
        background: r,
        marginBottom: "1px"
      },
      check: {
        color: pL(r),
        marginLeft: "8px",
        display: "none"
      }
    },
    first: {
      color: {
        overflow: "hidden",
        borderRadius: "2px 2px 0 0"
      }
    },
    last: {
      color: {
        overflow: "hidden",
        borderRadius: "0 0 2px 2px"
      }
    },
    active: {
      check: {
        display: "block"
      }
    },
    "color-#FFFFFF": {
      color: {
        boxShadow: "inset 0 0 0 1px #ddd"
      },
      check: {
        color: "#333"
      }
    },
    transparent: {
      check: {
        color: "#333"
      }
    }
  }, {
    first: a,
    last: s,
    active: l,
    "color-#FFFFFF": r === "#FFFFFF",
    transparent: r === "transparent"
  });
  return import_react.default.createElement(gh, {
    color: r,
    style: u.color,
    onClick: i,
    onHover: o,
    focusStyle: {
      boxShadow: "0 0 4px " + r
    }
  }, import_react.default.createElement("div", {
    style: u.check
  }, import_react.default.createElement(RZe, null)));
};
var MZe = function(t) {
  var r = t.onClick, n = t.onSwatchHover, i = t.group, o = t.active, a = wt({
    default: {
      group: {
        paddingBottom: "10px",
        width: "40px",
        float: "left",
        marginRight: "10px"
      }
    }
  });
  return import_react.default.createElement("div", {
    style: a.group
  }, dc(i, function(s, l) {
    return import_react.default.createElement(NZe, {
      key: s,
      color: s,
      active: s.toLowerCase() === o,
      first: l === 0,
      last: l === i.length - 1,
      onClick: r,
      onSwatchHover: n
    });
  }));
};
var wL = function(t) {
  var r = t.width, n = t.height, i = t.onChange, o = t.onSwatchHover, a = t.colors, s = t.hex, l = t.styles, u = l === void 0 ? {} : l, c = t.className, f = c === void 0 ? "" : c, h = wt(Gi({
    default: {
      picker: {
        width: r,
        height: n
      },
      overflow: {
        height: n,
        overflowY: "scroll"
      },
      body: {
        padding: "16px 0 6px 16px"
      },
      clear: {
        clear: "both"
      }
    }
  }, u)), d = function(m, g) {
    return i({
      hex: m,
      source: "hex"
    }, g);
  };
  return import_react.default.createElement("div", {
    style: h.picker,
    className: "swatches-picker " + f
  }, import_react.default.createElement(Ry, null, import_react.default.createElement("div", {
    style: h.overflow
  }, import_react.default.createElement("div", {
    style: h.body
  }, dc(a, function(p) {
    return import_react.default.createElement(MZe, {
      key: p.toString(),
      group: p,
      active: s,
      onClick: d,
      onSwatchHover: o
    });
  }), import_react.default.createElement("div", {
    style: h.clear
  })))));
};
wL.propTypes = {
  width: L.oneOfType([L.string, L.number]),
  height: L.oneOfType([L.string, L.number]),
  colors: L.arrayOf(L.arrayOf(L.string)),
  styles: L.object
  /* eslint-disable max-len */
};
wL.defaultProps = {
  width: 320,
  height: 240,
  colors: [[Yh[900], Yh[700], Yh[500], Yh[300], Yh[100]], [qh[900], qh[700], qh[500], qh[300], qh[100]], [Kh[900], Kh[700], Kh[500], Kh[300], Kh[100]], [Zh[900], Zh[700], Zh[500], Zh[300], Zh[100]], [Qh[900], Qh[700], Qh[500], Qh[300], Qh[100]], [Jh[900], Jh[700], Jh[500], Jh[300], Jh[100]], [ef[900], ef[700], ef[500], ef[300], ef[100]], [tf[900], tf[700], tf[500], tf[300], tf[100]], [rf[900], rf[700], rf[500], rf[300], rf[100]], ["#194D33", Xm[700], Xm[500], Xm[300], Xm[100]], [nf[900], nf[700], nf[500], nf[300], nf[100]], [of[900], of[700], of[500], of[300], of[100]], [af[900], af[700], af[500], af[300], af[100]], [sf[900], sf[700], sf[500], sf[300], sf[100]], [lf[900], lf[700], lf[500], lf[300], lf[100]], [cf[900], cf[700], cf[500], cf[300], cf[100]], [uf[900], uf[700], uf[500], uf[300], uf[100]], [hf[900], hf[700], hf[500], hf[300], hf[100]], ["#000000", "#525252", "#969696", "#D9D9D9", "#FFFFFF"]],
  styles: {}
};
zi(wL);
var AL = function(t) {
  var r = t.onChange, n = t.onSwatchHover, i = t.hex, o = t.colors, a = t.width, s = t.triangle, l = t.styles, u = l === void 0 ? {} : l, c = t.className, f = c === void 0 ? "" : c, h = wt(Gi({
    default: {
      card: {
        width: a,
        background: "#fff",
        border: "0 solid rgba(0,0,0,0.25)",
        boxShadow: "0 1px 4px rgba(0,0,0,0.25)",
        borderRadius: "4px",
        position: "relative"
      },
      body: {
        padding: "15px 9px 9px 15px"
      },
      label: {
        fontSize: "18px",
        color: "#fff"
      },
      triangle: {
        width: "0px",
        height: "0px",
        borderStyle: "solid",
        borderWidth: "0 9px 10px 9px",
        borderColor: "transparent transparent #fff transparent",
        position: "absolute"
      },
      triangleShadow: {
        width: "0px",
        height: "0px",
        borderStyle: "solid",
        borderWidth: "0 9px 10px 9px",
        borderColor: "transparent transparent rgba(0,0,0,.1) transparent",
        position: "absolute"
      },
      hash: {
        background: "#F0F0F0",
        height: "30px",
        width: "30px",
        borderRadius: "4px 0 0 4px",
        float: "left",
        color: "#98A1A4",
        display: "flex",
        alignItems: "center",
        justifyContent: "center"
      },
      input: {
        width: "100px",
        fontSize: "14px",
        color: "#666",
        border: "0px",
        outline: "none",
        height: "28px",
        boxShadow: "inset 0 0 0 1px #F0F0F0",
        boxSizing: "content-box",
        borderRadius: "0 4px 4px 0",
        float: "left",
        paddingLeft: "8px"
      },
      swatch: {
        width: "30px",
        height: "30px",
        float: "left",
        borderRadius: "4px",
        margin: "0 6px 6px 0"
      },
      clear: {
        clear: "both"
      }
    },
    "hide-triangle": {
      triangle: {
        display: "none"
      },
      triangleShadow: {
        display: "none"
      }
    },
    "top-left-triangle": {
      triangle: {
        top: "-10px",
        left: "12px"
      },
      triangleShadow: {
        top: "-11px",
        left: "12px"
      }
    },
    "top-right-triangle": {
      triangle: {
        top: "-10px",
        right: "12px"
      },
      triangleShadow: {
        top: "-11px",
        right: "12px"
      }
    }
  }, u), {
    "hide-triangle": s === "hide",
    "top-left-triangle": s === "top-left",
    "top-right-triangle": s === "top-right"
  }), d = function(m, g) {
    pc(m) && r({
      hex: m,
      source: "hex"
    }, g);
  };
  return import_react.default.createElement("div", {
    style: h.card,
    className: "twitter-picker " + f
  }, import_react.default.createElement("div", {
    style: h.triangleShadow
  }), import_react.default.createElement("div", {
    style: h.triangle
  }), import_react.default.createElement("div", {
    style: h.body
  }, dc(o, function(p, m) {
    return import_react.default.createElement(gh, {
      key: m,
      color: p,
      hex: p,
      style: h.swatch,
      onClick: d,
      onHover: n,
      focusStyle: {
        boxShadow: "0 0 4px " + p
      }
    });
  }), import_react.default.createElement("div", {
    style: h.hash
  }, "#"), import_react.default.createElement(tr, {
    label: null,
    style: {
      input: h.input
    },
    value: i.replace("#", ""),
    onChange: d
  }), import_react.default.createElement("div", {
    style: h.clear
  })));
};
AL.propTypes = {
  width: L.oneOfType([L.string, L.number]),
  triangle: L.oneOf(["hide", "top-left", "top-right"]),
  colors: L.arrayOf(L.string),
  styles: L.object
};
AL.defaultProps = {
  width: 276,
  colors: ["#FF6900", "#FCB900", "#7BDCB5", "#00D084", "#8ED1FC", "#0693E3", "#ABB8C3", "#EB144C", "#F78DA7", "#9900EF"],
  triangle: "top-left",
  styles: {}
};
zi(AL);
var OL = function(t) {
  var r = wt({
    default: {
      picker: {
        width: "20px",
        height: "20px",
        borderRadius: "22px",
        border: "2px #fff solid",
        transform: "translate(-12px, -13px)",
        background: "hsl(" + Math.round(t.hsl.h) + ", " + Math.round(t.hsl.s * 100) + "%, " + Math.round(t.hsl.l * 100) + "%)"
      }
    }
  });
  return import_react.default.createElement("div", {
    style: r.picker
  });
};
OL.propTypes = {
  hsl: L.shape({
    h: L.number,
    s: L.number,
    l: L.number,
    a: L.number
  })
};
OL.defaultProps = {
  hsl: {
    a: 1,
    h: 249.94,
    l: 0.2,
    s: 0.5
  }
};
var IL = function(t) {
  var r = wt({
    default: {
      picker: {
        width: "20px",
        height: "20px",
        borderRadius: "22px",
        transform: "translate(-10px, -7px)",
        background: "hsl(" + Math.round(t.hsl.h) + ", 100%, 50%)",
        border: "2px white solid"
      }
    }
  });
  return import_react.default.createElement("div", {
    style: r.picker
  });
};
IL.propTypes = {
  hsl: L.shape({
    h: L.number,
    s: L.number,
    l: L.number,
    a: L.number
  })
};
IL.defaultProps = {
  hsl: {
    a: 1,
    h: 249.94,
    l: 0.2,
    s: 0.5
  }
};
var LZe = function(t) {
  var r = t.onChange, n = t.rgb, i = t.hsl, o = t.hex, a = t.hsv, s = function(d, p) {
    if (d.hex)
      pc(d.hex) && r({
        hex: d.hex,
        source: "hex"
      }, p);
    else if (d.rgb) {
      var m = d.rgb.split(",");
      ZO(d.rgb, "rgb") && r({
        r: m[0],
        g: m[1],
        b: m[2],
        a: 1,
        source: "rgb"
      }, p);
    } else if (d.hsv) {
      var g = d.hsv.split(",");
      ZO(d.hsv, "hsv") && (g[2] = g[2].replace("%", ""), g[1] = g[1].replace("%", ""), g[0] = g[0].replace("°", ""), g[1] == 1 ? g[1] = 0.01 : g[2] == 1 && (g[2] = 0.01), r({
        h: Number(g[0]),
        s: Number(g[1]),
        v: Number(g[2]),
        source: "hsv"
      }, p));
    } else if (d.hsl) {
      var v = d.hsl.split(",");
      ZO(d.hsl, "hsl") && (v[2] = v[2].replace("%", ""), v[1] = v[1].replace("%", ""), v[0] = v[0].replace("°", ""), f[1] == 1 ? f[1] = 0.01 : f[2] == 1 && (f[2] = 0.01), r({
        h: Number(v[0]),
        s: Number(v[1]),
        v: Number(v[2]),
        source: "hsl"
      }, p));
    }
  }, l = wt({
    default: {
      wrap: {
        display: "flex",
        height: "100px",
        marginTop: "4px"
      },
      fields: {
        width: "100%"
      },
      column: {
        paddingTop: "10px",
        display: "flex",
        justifyContent: "space-between"
      },
      double: {
        padding: "0px 4.4px",
        boxSizing: "border-box"
      },
      input: {
        width: "100%",
        height: "38px",
        boxSizing: "border-box",
        padding: "4px 10% 3px",
        textAlign: "center",
        border: "1px solid #dadce0",
        fontSize: "11px",
        textTransform: "lowercase",
        borderRadius: "5px",
        outline: "none",
        fontFamily: "Roboto,Arial,sans-serif"
      },
      input2: {
        height: "38px",
        width: "100%",
        border: "1px solid #dadce0",
        boxSizing: "border-box",
        fontSize: "11px",
        textTransform: "lowercase",
        borderRadius: "5px",
        outline: "none",
        paddingLeft: "10px",
        fontFamily: "Roboto,Arial,sans-serif"
      },
      label: {
        textAlign: "center",
        fontSize: "12px",
        background: "#fff",
        position: "absolute",
        textTransform: "uppercase",
        color: "#3c4043",
        width: "35px",
        top: "-6px",
        left: "0",
        right: "0",
        marginLeft: "auto",
        marginRight: "auto",
        fontFamily: "Roboto,Arial,sans-serif"
      },
      label2: {
        left: "10px",
        textAlign: "center",
        fontSize: "12px",
        background: "#fff",
        position: "absolute",
        textTransform: "uppercase",
        color: "#3c4043",
        width: "32px",
        top: "-6px",
        fontFamily: "Roboto,Arial,sans-serif"
      },
      single: {
        flexGrow: "1",
        margin: "0px 4.4px"
      }
    }
  }), u = n.r + ", " + n.g + ", " + n.b, c = Math.round(i.h) + "°, " + Math.round(i.s * 100) + "%, " + Math.round(i.l * 100) + "%", f = Math.round(a.h) + "°, " + Math.round(a.s * 100) + "%, " + Math.round(a.v * 100) + "%";
  return import_react.default.createElement("div", {
    style: l.wrap,
    className: "flexbox-fix"
  }, import_react.default.createElement("div", {
    style: l.fields
  }, import_react.default.createElement("div", {
    style: l.double
  }, import_react.default.createElement(tr, {
    style: {
      input: l.input,
      label: l.label
    },
    label: "hex",
    value: o,
    onChange: s
  })), import_react.default.createElement("div", {
    style: l.column
  }, import_react.default.createElement("div", {
    style: l.single
  }, import_react.default.createElement(tr, {
    style: {
      input: l.input2,
      label: l.label2
    },
    label: "rgb",
    value: u,
    onChange: s
  })), import_react.default.createElement("div", {
    style: l.single
  }, import_react.default.createElement(tr, {
    style: {
      input: l.input2,
      label: l.label2
    },
    label: "hsv",
    value: f,
    onChange: s
  })), import_react.default.createElement("div", {
    style: l.single
  }, import_react.default.createElement(tr, {
    style: {
      input: l.input2,
      label: l.label2
    },
    label: "hsl",
    value: c,
    onChange: s
  })))));
};
var PL = function(t) {
  var r = t.width, n = t.onChange, i = t.rgb, o = t.hsl, a = t.hsv, s = t.hex, l = t.header, u = t.styles, c = u === void 0 ? {} : u, f = t.className, h = f === void 0 ? "" : f, d = wt(Gi({
    default: {
      picker: {
        width: r,
        background: "#fff",
        border: "1px solid #dfe1e5",
        boxSizing: "initial",
        display: "flex",
        flexWrap: "wrap",
        borderRadius: "8px 8px 0px 0px"
      },
      head: {
        height: "57px",
        width: "100%",
        paddingTop: "16px",
        paddingBottom: "16px",
        paddingLeft: "16px",
        fontSize: "20px",
        boxSizing: "border-box",
        fontFamily: "Roboto-Regular,HelveticaNeue,Arial,sans-serif"
      },
      saturation: {
        width: "70%",
        padding: "0px",
        position: "relative",
        overflow: "hidden"
      },
      swatch: {
        width: "30%",
        height: "228px",
        padding: "0px",
        background: "rgba(" + i.r + ", " + i.g + ", " + i.b + ", 1)",
        position: "relative",
        overflow: "hidden"
      },
      body: {
        margin: "auto",
        width: "95%"
      },
      controls: {
        display: "flex",
        boxSizing: "border-box",
        height: "52px",
        paddingTop: "22px"
      },
      color: {
        width: "32px"
      },
      hue: {
        height: "8px",
        position: "relative",
        margin: "0px 16px 0px 16px",
        width: "100%"
      },
      Hue: {
        radius: "2px"
      }
    }
  }, c));
  return import_react.default.createElement("div", {
    style: d.picker,
    className: "google-picker " + h
  }, import_react.default.createElement("div", {
    style: d.head
  }, l), import_react.default.createElement("div", {
    style: d.swatch
  }), import_react.default.createElement("div", {
    style: d.saturation
  }, import_react.default.createElement(FS, {
    hsl: o,
    hsv: a,
    pointer: OL,
    onChange: n
  })), import_react.default.createElement("div", {
    style: d.body
  }, import_react.default.createElement("div", {
    style: d.controls,
    className: "flexbox-fix"
  }, import_react.default.createElement("div", {
    style: d.hue
  }, import_react.default.createElement(xp, {
    style: d.Hue,
    hsl: o,
    radius: "4px",
    pointer: IL,
    onChange: n
  }))), import_react.default.createElement(LZe, {
    rgb: i,
    hsl: o,
    hex: s,
    hsv: a,
    onChange: n
  })));
};
PL.propTypes = {
  width: L.oneOfType([L.string, L.number]),
  styles: L.object,
  header: L.string
};
PL.defaultProps = {
  width: 652,
  styles: {},
  header: "Color picker"
};
zi(PL);
function BZe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function z6(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, $Ze(n.key), n);
  }
}
function FZe(e12, t, r) {
  return t && z6(e12.prototype, t), r && z6(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function $Ze(e12) {
  var t = HZe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function HZe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function UZe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Sk(e12, t);
}
function Sk(e12, t) {
  return Sk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Sk(e12, t);
}
function jZe(e12) {
  var t = VZe();
  return function() {
    var n = oE(e12), i;
    if (t) {
      var o = oE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return GZe(this, i);
  };
}
function GZe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return zZe(e12);
}
function zZe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function VZe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function oE(e12) {
  return oE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, oE(e12);
}
var tee = function(e12) {
  UZe(r, e12);
  var t = jZe(r);
  function r(n) {
    var i;
    BZe(this, r), i = t.call(this, n);
    const o = od(n.color);
    return i.state = {
      displayColorPicker: false,
      color: {
        r: o.r,
        g: o.g,
        b: o.b,
        a: o.opacity
      }
    }, i;
  }
  return FZe(r, [{
    key: "handleClick",
    value: function() {
      this.setState((i) => ({
        displayColorPicker: !i.displayColorPicker
      }));
    }
  }, {
    key: "handleClose",
    value: function() {
      this.setState({
        displayColorPicker: false
      });
    }
  }, {
    key: "handleChange",
    value: function(i) {
      const o = i.rgb, a = `rgba(${o.r},${o.g},${o.b},${o.a})`;
      this.props.onChange(a), this.setState({
        color: i.rgb
      });
    }
  }, {
    key: "render",
    value: function() {
      const i = wt({
        default: {
          color: {
            width: "32px",
            height: "14px",
            borderRadius: "2px",
            background: `rgba(${this.state.color.r}, ${this.state.color.g}, ${this.state.color.b}, ${this.state.color.a})`
          },
          swatch: {
            padding: "5px",
            background: "#fff",
            cursor: "pointer",
            borderRadius: "1px"
          },
          popover: {
            position: "absolute",
            zIndex: "2"
          },
          cover: {
            position: "fixed",
            top: "0px",
            right: "0px",
            bottom: "0px",
            left: "0px"
          }
        }
      });
      return import_react.default.createElement("div", null, import_react.default.createElement("div", {
        onClick: this.handleClick.bind(this),
        style: i.swatch
      }, import_react.default.createElement("div", {
        style: i.color
      })), this.state.displayColorPicker ? import_react.default.createElement("div", {
        style: i.popover
      }, import_react.default.createElement("div", {
        onClick: this.handleClose.bind(this),
        style: i.cover
      }), import_react.default.createElement(IZe, {
        color: this.state.color,
        onChange: this.handleChange.bind(this)
      })) : null);
    }
  }]), r;
}(import_react.default.Component);
tee.propTypes = {
  color: L.string,
  onChange: L.func
};
function XZe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function V6(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, YZe(n.key), n);
  }
}
function WZe(e12, t, r) {
  return t && V6(e12.prototype, t), r && V6(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function YZe(e12) {
  var t = qZe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function qZe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function KZe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && wk(e12, t);
}
function wk(e12, t) {
  return wk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, wk(e12, t);
}
function ZZe(e12) {
  var t = eQe();
  return function() {
    var n = aE(e12), i;
    if (t) {
      var o = aE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return QZe(this, i);
  };
}
function QZe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return JZe(e12);
}
function JZe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function eQe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function aE(e12) {
  return aE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, aE(e12);
}
var Ak = function(e12) {
  KZe(r, e12);
  var t = ZZe(r);
  function r(n) {
    var i;
    return XZe(this, r), i = t.call(this, n), i.state = {
      colors: n.track.options.colorRange.slice()
    }, i;
  }
  return WZe(r, [{
    key: "handleColorsChanged",
    value: function(i) {
      this.setState({
        colors: i
      });
    }
  }, {
    key: "handleSubmit",
    value: function() {
      const i = this.props.track.options;
      i.colorRange = this.state.colors, this.props.onSubmit(this.props.track.options);
    }
    /**
     * Add a color to the end
     */
  }, {
    key: "handleAddColor",
    value: function() {
      this.setState((i) => ({
        colors: i.colors.concat(i.colors[i.colors.length - 1])
      }));
    }
    /**
     * Remove one of the colors from the color map
     */
  }, {
    key: "handleRemoveColor",
    value: function(i) {
      this.setState((o) => ({
        colors: o.colors.slice(0, i).concat(o.colors.slice(i + 1))
      }));
    }
  }, {
    key: "render",
    value: function() {
      const i = JSON.parse(JSON.stringify(this.props.track)), o = Object.assign(i, {
        options: {
          colorRange: this.state.colors
        }
      }), a = {
        editable: false,
        zoomFixed: true,
        views: [{
          uid: `hmo-${this.props.track.uid}`,
          initialXDomain: this.props.xScale ? this.props.xScale.domain() : [0, 1],
          initialYDomain: this.props.yScale ? this.props.yScale.domain() : [0, 1],
          tracks: {
            center: [o]
          },
          layout: {
            x: 0,
            y: 0,
            h: 12,
            w: 12,
            i: `hmo-${this.props.track.id}`
          }
        }]
      }, s = this.state.colors.map((u, c) => {
        const f = this.state.colors.length > 2 && c === this.state.colors.length - 1 ? import_react.default.createElement("div", {
          onClick: () => this.handleRemoveColor(c),
          style: {
            background: "white",
            position: "absolute",
            top: 0,
            right: 0,
            opacity: 1,
            width: 14,
            height: 14,
            borderRadius: 2,
            cursor: "pointer"
          }
        }, import_react.default.createElement("svg", {
          height: "10px",
          style: {
            position: "absolute",
            top: 2,
            right: 2,
            opacity: 0.5,
            width: 10,
            height: 10
          }
        }, import_react.default.createElement("use", {
          xlinkHref: "#cross"
        }))) : null;
        return (
          /* eslint-disable react/no-array-index-key */
          // Colors may be repeated, so the array index is the best choice here.
          import_react.default.createElement("div", {
            key: `l${c}`,
            style: {
              borderRadius: "1px",
              boxShadow: "0 0 0 1px #E5E5E5",
              position: "relative",
              outline: "none"
            }
          }, f, import_react.default.createElement(tee, {
            key: c,
            color: this.state.colors[c],
            onChange: (h) => {
              this.setState((d) => {
                const p = d.colors.slice();
                return p[c] = h, {
                  colors: p
                };
              }, () => {
                this.handleColorsChanged(this.state.colors);
              });
            }
          }))
        );
      }).reverse(), l = this.state.colors.length < 10 ? import_react.default.createElement("div", {
        onClick: this.handleAddColor.bind(this),
        style: {
          position: "relative",
          outline: "none",
          height: "25px",
          padding: "5px",
          background: "#fff",
          borderRadius: "1px",
          boxShadow: "0 0 0 1px #E5E5E5",
          cursor: "pointer"
        }
      }, import_react.default.createElement("div", {
        style: {
          textAlign: "center",
          width: "32px",
          height: "14px"
        }
      }, import_react.default.createElement("svg", {
        height: "100%",
        style: {
          opacity: 0.5,
          margin: "auto",
          display: "block"
        },
        width: "10px"
      }, import_react.default.createElement("use", {
        xlinkHref: "#plus"
      })))) : null;
      return import_react.default.createElement(Sy, {
        okayTitle: "Submit",
        onCancel: this.props.onCancel,
        onOkay: this.handleSubmit.bind(this),
        title: "Custom Color Map"
      }, import_react.default.createElement("table", {
        className: "table-track-options"
      }, import_react.default.createElement("thead", null), import_react.default.createElement("tbody", {
        style: {
          verticalAlign: "top"
        }
      }, import_react.default.createElement("tr", null, import_react.default.createElement("td", {
        className: "td-track-options"
      }, import_react.default.createElement("table", null, import_react.default.createElement("tbody", null, import_react.default.createElement("tr", null, import_react.default.createElement("td", {
        className: "td-track-options"
      }, "Preview")), import_react.default.createElement("tr", null, import_react.default.createElement("td", {
        className: "td-track-options"
      }, import_react.default.createElement("div", {
        style: {
          width: 200
        }
      }, import_react.default.createElement(My, {
        options: {
          bounded: false
        },
        viewConfig: a
      }))))))), import_react.default.createElement("td", {
        className: "td-track-options"
      }, import_react.default.createElement("table", null, import_react.default.createElement("tbody", null, import_react.default.createElement("tr", null, import_react.default.createElement("td", {
        className: "td-track-options"
      }, "Colors")), import_react.default.createElement("tr", null, import_react.default.createElement("td", {
        className: "td-track-options"
      }, l, import_react.default.createElement("div", {
        style: {
          position: "relative"
        }
      }, s))))))))));
    }
  }]), r;
}(import_react.default.Component);
Ak.propTypes = {
  handleCancel: L.func,
  onCancel: L.func,
  onSubmit: L.func,
  track: L.object,
  xScale: L.object,
  yScale: L.object
};
var X6 = (e12) => {
  if (!e12.header)
    return [];
  const t = e12.header.split("	"), r = [];
  for (let n = 0; n < t.length; n++)
    r.push({
      name: t[n],
      value: n + 1
    });
  return r;
};
var Wd = (e12, t = "", r = 1) => e12.reduce((n, i) => (n[i] = {
  name: `${i * r}${t}`,
  value: i
}, n), {});
var Xi = {
  yes: {
    name: "Yes",
    value: true
  },
  no: {
    name: "No",
    value: false
  }
};
var Ur = {
  black: {
    name: "Black",
    value: "black"
  },
  blue: {
    name: "Blue",
    value: "blue"
  },
  brown: {
    name: "Brown",
    value: "brown"
  },
  cyan: {
    name: "Cyan",
    value: "cyan"
  },
  green: {
    name: "Green",
    value: "green"
  },
  grey: {
    name: "Grey",
    value: "grey"
  },
  orange: {
    name: "Orange",
    value: "orange"
  },
  purple: {
    name: "Purple",
    value: "purple"
  },
  turquoise: {
    name: "Turquoise",
    value: "turquoise"
  },
  red: {
    name: "Red",
    value: "red"
  },
  white: {
    name: "White",
    value: "white"
  }
};
var tQe = {
  use_stroke: {
    name: "Glyph color",
    value: "[glyph-color]"
  }
};
var Wm = Wd([1, 2, 3, 5, 8, 13, 21]);
var rQe = Object.assign(Wm, {
  none: {
    name: "none",
    value: "none"
  }
});
var W_ = Wd([0, 2, 4, 8, 16, 32, 64, 128, 256]);
var hl = Wd([0, 0.2, 0.4, 0.6, 0.8, 1], "%", 100);
var nQe = Wd([0.2, 0.4, 0.6, 0.8, 1], "%", 100);
var Ln = {
  axisLabelFormatting: {
    name: "Axis Label Formatting",
    inlineOptions: {
      normal: {
        name: "normal",
        value: "normal"
      },
      scientific: {
        name: "scientific",
        value: "scientific"
      }
    }
  },
  flipDiagonal: {
    name: "Flip Across Diagonal",
    inlineOptions: {
      none: {
        name: "No",
        value: "none"
      },
      yes: {
        name: "Yes",
        value: "yes"
      },
      copy: {
        name: "Copy",
        value: "copy"
      }
    }
  },
  heatmapValueScaling: {
    name: "Value Scaling",
    inlineOptions: {
      linear: {
        name: "Linear",
        value: "linear"
      },
      log: {
        name: "Log",
        value: "log"
      }
    }
  },
  valueScaling: {
    name: "Value Scaling",
    inlineOptions: {
      linear: {
        name: "Linear",
        value: "linear"
      },
      log: {
        name: "Log",
        value: "log"
      }
    }
  },
  extent: {
    name: "Extent",
    inlineOptions: {
      full: {
        name: "Full",
        value: "full"
      },
      upperRight: {
        name: "Upper Right",
        value: "upper-right"
      },
      lowerLeft: {
        name: "Lower Left",
        value: "lower-left"
      }
    }
  },
  labelLeftMargin: {
    name: "Label Left Margin",
    inlineOptions: W_
  },
  labelRightMargin: {
    name: "Label Right Margin",
    inlineOptions: W_
  },
  labelTopMargin: {
    name: "Label Top Margin",
    inlineOptions: W_
  },
  labelBottomMargin: {
    name: "Label Bottom Margin",
    inlineOptions: W_
  },
  labelShowResolution: {
    name: "Label Show Resolution",
    inlineOptions: Xi
  },
  labelShowAssembly: {
    name: "Label Show Assembly",
    inlineOptions: Xi
  },
  lineStrokeWidth: {
    name: "Stroke Width",
    inlineOptions: Wm
  },
  strokeWidth: {
    name: "Stroke Width",
    inlineOptions: Wm
  },
  trackBorderWidth: {
    name: "Track Border Width",
    inlineOptions: Wm
  },
  separatePlusMinusStrands: {
    name: "Separate +/- strands",
    inlineOptions: Xi
  },
  sortLargestOnTop: {
    name: "Sort Largest On Top",
    inlineOptions: Xi
  },
  showTexts: {
    name: "Show texts",
    inlineOptions: Xi
  },
  staggered: {
    name: "Staggered",
    inlineOptions: Xi
  },
  minSquareSize: {
    name: "Minimum size",
    inlineOptions: rQe
  },
  pointSize: {
    name: "Point Size",
    inlineOptions: Wm
  },
  pointColor: {
    name: "Point Color",
    inlineOptions: Ur
  },
  trackBorderColor: {
    name: "Track Border Color",
    inlineOptions: Ur
  },
  backgroundColor: {
    name: "Background Color",
    inlineOptions: {
      white: {
        name: "White",
        value: "white"
      },
      lightGrey: {
        name: "Light Grey",
        value: "#eeeeee"
      },
      grey: {
        name: "Grey",
        value: "#cccccc"
      },
      black: {
        name: "Black",
        value: "black"
      },
      transparent: {
        name: "Transparent",
        value: "transparent"
      }
    }
  },
  colorScale: {
    name: "Color Scale",
    inlineOptions: {
      epilogos: {
        name: "Epilogos",
        values: ["#FF0000", "#FF4500", "#32CD32", "#008000", "#006400", "#C2E105", "#FFFF00", "#66CDAA", "#8A91D0", "#CD5C5C", "#E9967A", "#BDB76B", "#808080", "#C0C0C0", "#FFFFFF"]
      },
      category10: {
        name: "D3 Category10",
        values: ["#1F77B4", "#FF7F0E", "#2CA02C", "#D62728", "#9467BD", "#8C564B", "#E377C2", "#7F7F7F", "#BCBD22", "#17BECF"]
      }
    }
  },
  minusStrandColor: {
    name: "- Strand Color",
    inlineOptions: Ur
  },
  plusStrandColor: {
    name: "+ Strand Color",
    inlineOptions: Ur
  },
  lineStrokeColor: {
    name: "Stroke color",
    inlineOptions: Ur
  },
  projectionStrokeColor: {
    name: "Stroke color",
    inlineOptions: Ur
  },
  projectionFillColor: {
    name: "Fill color",
    inlineOptions: Ur
  },
  stroke: {
    name: "Stroke Color",
    inlineOptions: Ur
  },
  strokeColor: {
    name: "Stroke color",
    inlineOptions: Ur
  },
  fill: {
    name: "Fill Color",
    inlineOptions: Ur
  },
  color: {
    name: "Color",
    inlineOptions: Ur
  },
  fontColor: {
    name: "Font color",
    inlineOptions: Ur
  },
  fillColor: {
    name: "Fill color",
    inlineOptions: Ur
  },
  barFillColor: {
    name: "Fill color",
    inlineOptions: Ur
  },
  barFillColorTop: {
    name: "Top Fill color",
    inlineOptions: Ur
  },
  barFillColorBottom: {
    name: "Bottom Fill color",
    inlineOptions: Ur
  },
  barOpacity: {
    name: "Bar opacity",
    inlineOptions: hl
  },
  zeroLineVisible: {
    name: "Zero line visible",
    inlineOptions: Xi
  },
  zeroLineColor: {
    name: "Zero line color",
    inlineOptions: Ur
  },
  zeroLineOpacity: {
    name: "Zero line opacity",
    inlineOptions: nQe
  },
  fillOpacity: {
    name: "Fill Opacity",
    inlineOptions: hl
  },
  strokeOpacity: {
    name: "Stroke Opacity",
    inlineOptions: hl
  },
  strokePos: {
    name: "Stroke Position",
    inlineOptions: {
      aroundInner: {
        name: "Around Inner",
        value: "around"
      },
      aroundCenter: {
        name: "Around Center",
        value: null
      },
      hidden: {
        name: "Hidden",
        value: "hidden"
      },
      top: {
        name: "Top",
        value: "top"
      },
      right: {
        name: "Right",
        value: "right"
      },
      bottom: {
        name: "Bottom",
        value: "bottom"
      },
      left: {
        name: "Left",
        value: "left"
      }
    }
  },
  barBorder: {
    name: "Bar border",
    inlineOptions: Xi
  },
  scaledHeight: {
    name: "Scaled height",
    inlineOptions: Xi
  },
  rectangleDomainStrokeColor: {
    name: "Stroke color",
    inlineOptions: Ur
  },
  rectangleDomainFillColor: {
    name: "Fill color",
    inlineOptions: Ur
  },
  rectangleDomainFillOpacity: {
    name: "Fill opacity",
    inlineOptions: hl
  },
  rectangleDomainOpacity: {
    name: "Opacity",
    inlineOptions: hl
  },
  mapboxStyle: {
    name: "Map style",
    inlineOptions: {
      streets: {
        name: "streets",
        value: "mapbox.streets"
      },
      light: {
        name: "light",
        value: "mapbox.light"
      },
      dark: {
        name: "dark",
        value: "mapbox.dark"
      },
      satellite: {
        name: "satellite",
        value: "mapbox.satellite"
      },
      "streets-satellite": {
        name: "streets-satellite",
        value: "mapbox.streets-satellite"
      },
      wheatpaste: {
        name: "wheatpaste",
        value: "mapbox.wheatpaste"
      },
      "streets-basic": {
        name: "streets-basic",
        value: "mapbox.streets-basic"
      },
      comic: {
        name: "comic",
        value: "mapbox.comic"
      },
      outdoors: {
        name: "outdoors",
        value: "mapbox.outdoors"
      },
      "run-bike-hike": {
        name: "run-bike-hike",
        value: "mapbox.run-bike-hike"
      },
      pencil: {
        name: "pencil",
        value: "mapbox.pencil"
      },
      pirates: {
        name: "pirates",
        value: "mapbox.pirates"
      },
      emerald: {
        name: "emerald",
        value: "mapbox.emerald"
      },
      "high-contrast": {
        name: "high-contrast",
        value: "mapbox.high-contrast"
      }
    }
  },
  oneDHeatmapFlipped: {
    name: "Flip Heatmap",
    inlineOptions: {
      yes: {
        name: "Yes",
        value: "yes"
      },
      no: {
        name: "No",
        value: null
      }
    }
  },
  showMousePosition: {
    name: "Show Mouse Position",
    inlineOptions: Xi
  },
  showTooltip: {
    name: "Show Tooltip",
    inlineOptions: Xi
  },
  fontSize: {
    name: "Font Size",
    inlineOptions: Wd([8, 9, 10, 11, 12, 14, 16, 18, 24], "px")
  },
  tickPositions: {
    name: "Tick Positions",
    inlineOptions: {
      even: {
        name: "Even",
        value: "even"
      },
      ends: {
        name: "Ends",
        value: "ends"
      }
    }
  },
  tickFormat: {
    name: "Tick Format",
    inlineOptions: {
      plain: {
        name: "Plain",
        value: "plain"
      },
      si: {
        name: "SI",
        value: "si"
      }
    }
  },
  colorEncoding: {
    name: "Color Encode Annotations",
    inlineOptions: {
      none: {
        name: "None",
        value: null
      },
      itemRgb: {
        name: "itemRgb",
        value: "itemRgb"
      }
    },
    generateOptions: X6
  },
  fontIsAligned: {
    name: "Left-Align Font",
    inlineOptions: Xi
  },
  axisPositionHorizontal: {
    name: "Axis Position",
    inlineOptions: {
      left: {
        name: "Left",
        value: "left"
      },
      outsideLeft: {
        name: "Outside left",
        value: "outsideLeft"
      },
      right: {
        name: "Right",
        value: "right"
      },
      outsideRight: {
        name: "Outside right",
        value: "outsideRight"
      },
      hidden: {
        name: "Hidden",
        value: null
      }
    }
  },
  axisPositionVertical: {
    name: "Axis Position",
    inlineOptions: {
      top: {
        name: "Top",
        value: "top"
      },
      outsideTop: {
        name: "Outside top",
        value: "outsideTop"
      },
      bottom: {
        name: "Bottom",
        value: "bottom"
      },
      outsideBottom: {
        name: "Outside bottom",
        value: "outsideBottom"
      },
      hidden: {
        name: "Hidden",
        value: null
      }
    }
  },
  axisMargin: {
    name: "Axis Margin",
    inlineOptions: Wd([0, 10, 20, 30, 40, 50, 100, 200, 400], "px")
  },
  colorbarPosition: {
    name: "Colorbar Position",
    inlineOptions: {
      topLeft: {
        name: "Top Left",
        value: "topLeft"
      },
      topRight: {
        name: "Top Right",
        value: "topRight"
      },
      bottomLeft: {
        name: "Bottom Left",
        value: "bottomLeft"
      },
      bottomRight: {
        name: "Bottom Right",
        value: "bottomRight"
      },
      hidden: {
        name: "Hidden",
        value: null
      }
    }
  },
  colorbarBackgroundColor: {
    name: "Colorbar Background Color",
    inlineOptions: Ur
  },
  colorbarBackgroundOpacity: {
    name: "Colorbar Background Opacity",
    inlineOptions: hl
  },
  /*
  colorbarOrientation: {
    name: 'Colorbar Orientation',
    inlineOptions: {
      'horizontal': { name: 'Horizontal', value: 'horizontal' },
      'vertical': { name: 'Vertical', value: 'vertical' },
    }
  },
  */
  // This will default to 'inside' if it's not set when colorbarPosition
  // is set
  colorbarLabelsPosition: {
    name: "Colorbar Labels Position",
    inlineOptions: {
      inside: {
        name: "Inside",
        value: "inside"
      },
      outside: {
        name: "Outside",
        value: "outside"
      }
    }
  },
  labelColor: {
    name: "Label Color",
    inlineOptions: {
      ...Ur,
      ...tQe
    }
  },
  labelPosition: {
    name: "Label Position",
    inlineOptions: {
      ol: {
        name: "Outer left",
        value: "outerLeft"
      },
      or: {
        name: "Outer right",
        value: "outerRight"
      },
      ot: {
        name: "Outer top",
        value: "outerTop"
      },
      ob: {
        name: "Outer bottom",
        value: "outerBottom"
      },
      tl: {
        name: "Top left",
        value: "topLeft"
      },
      tr: {
        name: "Top right",
        value: "topRight"
      },
      bl: {
        name: "Bottom left",
        value: "bottomLeft"
      },
      br: {
        name: "Bottom right",
        value: "bottomRight"
      },
      hidden: {
        name: "Hidden",
        value: "hidden"
      }
    }
  },
  labelTextOpacity: {
    name: "Label Text Opacity",
    inlineOptions: hl
  },
  geneAnnotationHeight: {
    name: "Gene Annotation Height",
    inlineOptions: {
      8: {
        name: "8px",
        value: 8
      },
      10: {
        name: "10px",
        value: 10
      },
      12: {
        name: "12px",
        value: 12
      },
      16: {
        name: "16px",
        value: 16
      }
    }
  },
  annotationHeight: {
    name: "Annotation Height",
    inlineOptions: {
      5: {
        name: "5px",
        value: 5
      },
      8: {
        name: "8px",
        value: 8
      },
      10: {
        name: "10px",
        value: 10
      },
      12: {
        name: "12px",
        value: 12
      },
      16: {
        name: "16px",
        value: 16
      },
      20: {
        name: "20px",
        value: 20
      },
      scaled: {
        name: "scaled",
        value: "scaled"
      }
    }
  },
  maxAnnotationHeight: {
    name: "Max Annotation Height",
    inlineOptions: {
      5: {
        name: "5px",
        value: 5
      },
      8: {
        name: "8px",
        value: 8
      },
      10: {
        name: "10px",
        value: 10
      },
      12: {
        name: "12px",
        value: 12
      },
      16: {
        name: "16px",
        value: 16
      },
      20: {
        name: "20px",
        value: 20
      },
      none: {
        name: "none",
        value: null
      }
    }
  },
  annotationStyle: {
    name: "Annotation Style",
    inlineOptions: {
      box: {
        name: "Box",
        value: "box"
      },
      segment: {
        name: "Segment",
        value: "segment"
      }
    }
  },
  geneLabelPosition: {
    name: "Gene Label Position",
    inlineOptions: {
      inside: {
        name: "Inside",
        value: "inside"
      },
      outside: {
        name: "Outside",
        value: "outside"
      }
    }
  },
  geneStrandSpacing: {
    name: "Gene Strand Spacing",
    inlineOptions: {
      2: {
        name: "2px",
        value: 2
      },
      4: {
        name: "4px",
        value: 4
      },
      8: {
        name: "8px",
        value: 8
      }
    }
  },
  labelBackgroundColor: {
    name: "Label Background Color",
    inlineOptions: Ur
  },
  labelBackgroundOpacity: {
    name: "Label Background Opacity",
    inlineOptions: hl
  },
  viewResolution: {
    name: "View Resolution",
    inlineOptions: {
      high: {
        name: "High",
        value: 384
      },
      medium: {
        name: "Medium",
        value: 1024
      },
      low: {
        name: "Low",
        value: 2048
      }
    }
  },
  // colormaps are mostly taken from here:
  // http://matplotlib.org/api/pyplot_summary.html?highlight=colormaps#matplotlib.pyplot.colormaps
  colorRange: {
    name: "Color map",
    inlineOptions: {
      afmhot: {
        name: "afmhot",
        value: ["rgba(0,0,0,1.0)", "rgba(128,0,0,1.0)", "rgba(256,129,1,1.0)", "rgba(256,256,129,1.0)", "rgba(256,256,256,1.0)"]
      },
      fall: {
        name: "fall",
        value: ["white", "rgba(245,166,35,1.0)", "rgba(208,2,27,1.0)", "black"]
      },
      hot: {
        name: "hot",
        value: ["rgba(10,0,0,1.0)", "rgba(179,0,0,1.0)", "rgba(256,91,0,1.0)", "rgba(256,256,6,1.0)", "rgba(256,256,256,1.0)"]
      },
      jet: {
        name: "jet",
        value: ["rgba(0,0,128,1.0)", "rgba(0,129,256,1.0)", "rgba(125,256,122,1.0)", "rgba(256,148,0,1.0)", "rgba(128,0,0,1.0)"]
      },
      bwr: {
        name: "bwr",
        value: ["rgba(0,0,256,1.0)", "rgba(128,128,256,1.0)", "rgba(256,254,254,1.0)", "rgba(256,126,126,1.0)", "rgba(256,0,0,1.0)"]
      },
      cubehelix: {
        name: "cubehelix",
        value: ["rgba(0,0,0,1.0)", "rgba(21,83,76,1.0)", "rgba(162,121,74,1.0)", "rgba(199,180,238,1.0)", "rgba(256,256,256,1.0)"]
      },
      rainbow: {
        name: "rainbow",
        value: ["rgba(128,0,256,1.0)", "rgba(0,181,236,1.0)", "rgba(129,255,180,1.0)", "rgba(256,179,96,1.0)", "rgba(256,0,0,1.0)"]
      },
      gray: {
        name: "greys",
        value: ["rgba(255,255,255,1)", "rgba(0,0,0,1)"]
      },
      red: {
        name: "White to red",
        value: ["rgba(255,255,255,1)", "rgba(255,0,0,1)"]
      },
      green: {
        name: "White to green",
        value: ["rgba(255,255,255,1)", "rgba(0,255,0,1)"]
      },
      blue: {
        name: "White to blue",
        value: ["rgba(255,255,255,1)", "rgba(0,0,255,1)"]
      },
      custard: {
        name: "custard",
        value: ["#FFFFFF", "#F8E71C", "rgba(245,166,35,1)", "rgba(0,0,0,1)"]
      },
      magma: {
        name: "magma",
        value: ["rgba(0,0,3,1)", "rgba(0,0,4,1)", "rgba(0,0,6,1)", "rgba(1,0,7,1)", "rgba(1,1,9,1)", "rgba(1,1,11,1)", "rgba(2,2,13,1)", "rgba(2,2,15,1)", "rgba(3,3,17,1)", "rgba(4,3,19,1)", "rgba(4,4,21,1)", "rgba(5,4,23,1)", "rgba(6,5,25,1)", "rgba(7,5,27,1)", "rgba(8,6,29,1)", "rgba(9,7,32,1)", "rgba(10,7,34,1)", "rgba(11,8,36,1)", "rgba(12,9,38,1)", "rgba(13,10,40,1)", "rgba(14,10,42,1)", "rgba(15,11,45,1)", "rgba(16,12,47,1)", "rgba(17,12,49,1)", "rgba(19,13,51,1)", "rgba(20,13,54,1)", "rgba(21,14,56,1)", "rgba(22,14,58,1)", "rgba(23,15,61,1)", "rgba(25,15,63,1)", "rgba(26,16,66,1)", "rgba(27,16,68,1)", "rgba(28,16,70,1)", "rgba(30,17,73,1)", "rgba(31,17,75,1)", "rgba(33,17,78,1)", "rgba(34,17,80,1)", "rgba(36,17,83,1)", "rgba(37,17,85,1)", "rgba(39,17,87,1)", "rgba(40,17,90,1)", "rgba(42,17,92,1)", "rgba(43,17,94,1)", "rgba(45,17,97,1)", "rgba(47,16,99,1)", "rgba(49,16,101,1)", "rgba(50,16,103,1)", "rgba(52,16,105,1)", "rgba(54,15,107,1)", "rgba(55,15,108,1)", "rgba(57,15,110,1)", "rgba(59,15,112,1)", "rgba(61,15,113,1)", "rgba(62,15,114,1)", "rgba(64,15,116,1)", "rgba(66,15,117,1)", "rgba(67,15,118,1)", "rgba(69,15,119,1)", "rgba(71,15,120,1)", "rgba(72,16,120,1)", "rgba(74,16,121,1)", "rgba(76,16,122,1)", "rgba(77,17,123,1)", "rgba(79,17,123,1)", "rgba(81,18,124,1)", "rgba(82,18,124,1)", "rgba(84,19,125,1)", "rgba(85,20,125,1)", "rgba(87,20,126,1)", "rgba(88,21,126,1)", "rgba(90,21,126,1)", "rgba(92,22,127,1)", "rgba(93,23,127,1)", "rgba(95,23,127,1)", "rgba(96,24,128,1)", "rgba(98,25,128,1)", "rgba(99,25,128,1)", "rgba(101,26,128,1)", "rgba(103,26,128,1)", "rgba(104,27,129,1)", "rgba(106,28,129,1)", "rgba(107,28,129,1)", "rgba(109,29,129,1)", "rgba(110,30,129,1)", "rgba(112,30,129,1)", "rgba(113,31,129,1)", "rgba(115,32,129,1)", "rgba(117,32,129,1)", "rgba(118,33,129,1)", "rgba(120,33,129,1)", "rgba(121,34,130,1)", "rgba(123,35,130,1)", "rgba(124,35,130,1)", "rgba(126,36,130,1)", "rgba(128,36,130,1)", "rgba(129,37,129,1)", "rgba(131,37,129,1)", "rgba(132,38,129,1)", "rgba(134,39,129,1)", "rgba(136,39,129,1)", "rgba(137,40,129,1)", "rgba(139,40,129,1)", "rgba(140,41,129,1)", "rgba(142,41,129,1)", "rgba(144,42,129,1)", "rgba(145,42,129,1)", "rgba(147,43,128,1)", "rgba(148,43,128,1)", "rgba(150,44,128,1)", "rgba(152,44,128,1)", "rgba(153,45,128,1)", "rgba(155,46,127,1)", "rgba(157,46,127,1)", "rgba(158,47,127,1)", "rgba(160,47,127,1)", "rgba(161,48,126,1)", "rgba(163,48,126,1)", "rgba(165,49,126,1)", "rgba(166,49,125,1)", "rgba(168,50,125,1)", "rgba(170,50,125,1)", "rgba(171,51,124,1)", "rgba(173,51,124,1)", "rgba(175,52,123,1)", "rgba(176,52,123,1)", "rgba(178,53,123,1)", "rgba(180,53,122,1)", "rgba(181,54,122,1)", "rgba(183,55,121,1)", "rgba(185,55,121,1)", "rgba(186,56,120,1)", "rgba(188,56,120,1)", "rgba(189,57,119,1)", "rgba(191,57,118,1)", "rgba(193,58,118,1)", "rgba(194,59,117,1)", "rgba(196,59,117,1)", "rgba(198,60,116,1)", "rgba(199,61,115,1)", "rgba(201,61,115,1)", "rgba(202,62,114,1)", "rgba(204,63,113,1)", "rgba(206,63,113,1)", "rgba(207,64,112,1)", "rgba(209,65,111,1)", "rgba(210,66,110,1)", "rgba(212,67,110,1)", "rgba(213,67,109,1)", "rgba(215,68,108,1)", "rgba(216,69,107,1)", "rgba(218,70,107,1)", "rgba(219,71,106,1)", "rgba(221,72,105,1)", "rgba(222,73,104,1)", "rgba(223,74,103,1)", "rgba(225,75,103,1)", "rgba(226,76,102,1)", "rgba(227,78,101,1)", "rgba(229,79,100,1)", "rgba(230,80,100,1)", "rgba(231,81,99,1)", "rgba(232,83,98,1)", "rgba(233,84,97,1)", "rgba(234,85,97,1)", "rgba(236,87,96,1)", "rgba(237,88,95,1)", "rgba(238,90,95,1)", "rgba(239,91,94,1)", "rgba(239,93,94,1)", "rgba(240,95,93,1)", "rgba(241,96,93,1)", "rgba(242,98,93,1)", "rgba(243,100,92,1)", "rgba(243,101,92,1)", "rgba(244,103,92,1)", "rgba(245,105,92,1)", "rgba(246,107,92,1)", "rgba(246,108,92,1)", "rgba(247,110,92,1)", "rgba(247,112,92,1)", "rgba(248,114,92,1)", "rgba(248,116,92,1)", "rgba(249,118,92,1)", "rgba(249,120,92,1)", "rgba(250,121,93,1)", "rgba(250,123,93,1)", "rgba(250,125,94,1)", "rgba(251,127,94,1)", "rgba(251,129,95,1)", "rgba(251,131,95,1)", "rgba(252,133,96,1)", "rgba(252,135,97,1)", "rgba(252,137,97,1)", "rgba(252,139,98,1)", "rgba(253,140,99,1)", "rgba(253,142,100,1)", "rgba(253,144,101,1)", "rgba(253,146,102,1)", "rgba(253,148,103,1)", "rgba(254,150,104,1)", "rgba(254,152,105,1)", "rgba(254,154,106,1)", "rgba(254,156,107,1)", "rgba(254,157,108,1)", "rgba(254,159,109,1)", "rgba(254,161,110,1)", "rgba(254,163,111,1)", "rgba(254,165,112,1)", "rgba(255,167,114,1)", "rgba(255,169,115,1)", "rgba(255,171,116,1)", "rgba(255,172,118,1)", "rgba(255,174,119,1)", "rgba(255,176,120,1)", "rgba(255,178,122,1)", "rgba(255,180,123,1)", "rgba(255,182,124,1)", "rgba(255,184,126,1)", "rgba(255,185,127,1)", "rgba(255,187,129,1)", "rgba(255,189,130,1)", "rgba(255,191,132,1)", "rgba(255,193,133,1)", "rgba(255,195,135,1)", "rgba(255,197,136,1)", "rgba(255,198,138,1)", "rgba(255,200,140,1)", "rgba(255,202,141,1)", "rgba(255,204,143,1)", "rgba(254,206,144,1)", "rgba(254,208,146,1)", "rgba(254,209,148,1)", "rgba(254,211,149,1)", "rgba(254,213,151,1)", "rgba(254,215,153,1)", "rgba(254,217,155,1)", "rgba(254,219,156,1)", "rgba(254,220,158,1)", "rgba(254,222,160,1)", "rgba(254,224,162,1)", "rgba(254,226,163,1)", "rgba(253,228,165,1)", "rgba(253,230,167,1)", "rgba(253,231,169,1)", "rgba(253,233,171,1)", "rgba(253,235,172,1)", "rgba(253,237,174,1)", "rgba(253,239,176,1)", "rgba(253,241,178,1)", "rgba(253,242,180,1)", "rgba(253,244,182,1)", "rgba(253,246,184,1)", "rgba(252,248,186,1)", "rgba(252,250,188,1)", "rgba(252,251,189,1)", "rgba(252,253,191,1)"]
      },
      viridis: {
        name: "viridis",
        value: ["rgba(68,1,84,1)", "rgba(68,2,85,1)", "rgba(69,3,87,1)", "rgba(69,5,88,1)", "rgba(69,6,90,1)", "rgba(70,8,91,1)", "rgba(70,9,93,1)", "rgba(70,11,94,1)", "rgba(70,12,96,1)", "rgba(71,14,97,1)", "rgba(71,15,98,1)", "rgba(71,17,100,1)", "rgba(71,18,101,1)", "rgba(71,20,102,1)", "rgba(72,21,104,1)", "rgba(72,22,105,1)", "rgba(72,24,106,1)", "rgba(72,25,108,1)", "rgba(72,26,109,1)", "rgba(72,28,110,1)", "rgba(72,29,111,1)", "rgba(72,30,112,1)", "rgba(72,32,113,1)", "rgba(72,33,115,1)", "rgba(72,34,116,1)", "rgba(72,36,117,1)", "rgba(72,37,118,1)", "rgba(72,38,119,1)", "rgba(72,39,120,1)", "rgba(71,41,121,1)", "rgba(71,42,121,1)", "rgba(71,43,122,1)", "rgba(71,44,123,1)", "rgba(71,46,124,1)", "rgba(70,47,125,1)", "rgba(70,48,126,1)", "rgba(70,49,126,1)", "rgba(70,51,127,1)", "rgba(69,52,128,1)", "rgba(69,53,129,1)", "rgba(69,54,129,1)", "rgba(68,56,130,1)", "rgba(68,57,131,1)", "rgba(68,58,131,1)", "rgba(67,59,132,1)", "rgba(67,60,132,1)", "rgba(67,62,133,1)", "rgba(66,63,133,1)", "rgba(66,64,134,1)", "rgba(65,65,134,1)", "rgba(65,66,135,1)", "rgba(65,67,135,1)", "rgba(64,69,136,1)", "rgba(64,70,136,1)", "rgba(63,71,136,1)", "rgba(63,72,137,1)", "rgba(62,73,137,1)", "rgba(62,74,137,1)", "rgba(61,75,138,1)", "rgba(61,77,138,1)", "rgba(60,78,138,1)", "rgba(60,79,138,1)", "rgba(59,80,139,1)", "rgba(59,81,139,1)", "rgba(58,82,139,1)", "rgba(58,83,139,1)", "rgba(57,84,140,1)", "rgba(57,85,140,1)", "rgba(56,86,140,1)", "rgba(56,87,140,1)", "rgba(55,88,140,1)", "rgba(55,89,140,1)", "rgba(54,91,141,1)", "rgba(54,92,141,1)", "rgba(53,93,141,1)", "rgba(53,94,141,1)", "rgba(52,95,141,1)", "rgba(52,96,141,1)", "rgba(51,97,141,1)", "rgba(51,98,141,1)", "rgba(51,99,141,1)", "rgba(50,100,142,1)", "rgba(50,101,142,1)", "rgba(49,102,142,1)", "rgba(49,103,142,1)", "rgba(48,104,142,1)", "rgba(48,105,142,1)", "rgba(47,106,142,1)", "rgba(47,107,142,1)", "rgba(47,108,142,1)", "rgba(46,109,142,1)", "rgba(46,110,142,1)", "rgba(45,111,142,1)", "rgba(45,112,142,1)", "rgba(45,112,142,1)", "rgba(44,113,142,1)", "rgba(44,114,142,1)", "rgba(43,115,142,1)", "rgba(43,116,142,1)", "rgba(43,117,142,1)", "rgba(42,118,142,1)", "rgba(42,119,142,1)", "rgba(41,120,142,1)", "rgba(41,121,142,1)", "rgba(41,122,142,1)", "rgba(40,123,142,1)", "rgba(40,124,142,1)", "rgba(40,125,142,1)", "rgba(39,126,142,1)", "rgba(39,127,142,1)", "rgba(38,128,142,1)", "rgba(38,129,142,1)", "rgba(38,130,142,1)", "rgba(37,131,142,1)", "rgba(37,131,142,1)", "rgba(37,132,142,1)", "rgba(36,133,142,1)", "rgba(36,134,142,1)", "rgba(35,135,142,1)", "rgba(35,136,142,1)", "rgba(35,137,142,1)", "rgba(34,138,141,1)", "rgba(34,139,141,1)", "rgba(34,140,141,1)", "rgba(33,141,141,1)", "rgba(33,142,141,1)", "rgba(33,143,141,1)", "rgba(32,144,141,1)", "rgba(32,145,140,1)", "rgba(32,146,140,1)", "rgba(32,147,140,1)", "rgba(31,147,140,1)", "rgba(31,148,140,1)", "rgba(31,149,139,1)", "rgba(31,150,139,1)", "rgba(31,151,139,1)", "rgba(30,152,139,1)", "rgba(30,153,138,1)", "rgba(30,154,138,1)", "rgba(30,155,138,1)", "rgba(30,156,137,1)", "rgba(30,157,137,1)", "rgba(30,158,137,1)", "rgba(30,159,136,1)", "rgba(30,160,136,1)", "rgba(31,161,136,1)", "rgba(31,162,135,1)", "rgba(31,163,135,1)", "rgba(31,163,134,1)", "rgba(32,164,134,1)", "rgba(32,165,134,1)", "rgba(33,166,133,1)", "rgba(33,167,133,1)", "rgba(34,168,132,1)", "rgba(35,169,131,1)", "rgba(35,170,131,1)", "rgba(36,171,130,1)", "rgba(37,172,130,1)", "rgba(38,173,129,1)", "rgba(39,174,129,1)", "rgba(40,175,128,1)", "rgba(41,175,127,1)", "rgba(42,176,127,1)", "rgba(43,177,126,1)", "rgba(44,178,125,1)", "rgba(46,179,124,1)", "rgba(47,180,124,1)", "rgba(48,181,123,1)", "rgba(50,182,122,1)", "rgba(51,183,121,1)", "rgba(53,183,121,1)", "rgba(54,184,120,1)", "rgba(56,185,119,1)", "rgba(57,186,118,1)", "rgba(59,187,117,1)", "rgba(61,188,116,1)", "rgba(62,189,115,1)", "rgba(64,190,114,1)", "rgba(66,190,113,1)", "rgba(68,191,112,1)", "rgba(70,192,111,1)", "rgba(72,193,110,1)", "rgba(73,194,109,1)", "rgba(75,194,108,1)", "rgba(77,195,107,1)", "rgba(79,196,106,1)", "rgba(81,197,105,1)", "rgba(83,198,104,1)", "rgba(85,198,102,1)", "rgba(88,199,101,1)", "rgba(90,200,100,1)", "rgba(92,201,99,1)", "rgba(94,201,98,1)", "rgba(96,202,96,1)", "rgba(98,203,95,1)", "rgba(101,204,94,1)", "rgba(103,204,92,1)", "rgba(105,205,91,1)", "rgba(108,206,90,1)", "rgba(110,206,88,1)", "rgba(112,207,87,1)", "rgba(115,208,85,1)", "rgba(117,208,84,1)", "rgba(119,209,82,1)", "rgba(122,210,81,1)", "rgba(124,210,79,1)", "rgba(127,211,78,1)", "rgba(129,212,76,1)", "rgba(132,212,75,1)", "rgba(134,213,73,1)", "rgba(137,213,72,1)", "rgba(139,214,70,1)", "rgba(142,215,68,1)", "rgba(144,215,67,1)", "rgba(147,216,65,1)", "rgba(149,216,63,1)", "rgba(152,217,62,1)", "rgba(155,217,60,1)", "rgba(157,218,58,1)", "rgba(160,218,57,1)", "rgba(163,219,55,1)", "rgba(165,219,53,1)", "rgba(168,220,51,1)", "rgba(171,220,50,1)", "rgba(173,221,48,1)", "rgba(176,221,46,1)", "rgba(179,221,45,1)", "rgba(181,222,43,1)", "rgba(184,222,41,1)", "rgba(187,223,39,1)", "rgba(189,223,38,1)", "rgba(192,223,36,1)", "rgba(195,224,35,1)", "rgba(197,224,33,1)", "rgba(200,225,32,1)", "rgba(203,225,30,1)", "rgba(205,225,29,1)", "rgba(208,226,28,1)", "rgba(211,226,27,1)", "rgba(213,226,26,1)", "rgba(216,227,25,1)", "rgba(219,227,24,1)", "rgba(221,227,24,1)", "rgba(224,228,24,1)", "rgba(226,228,24,1)", "rgba(229,228,24,1)", "rgba(232,229,25,1)", "rgba(234,229,25,1)", "rgba(237,229,26,1)", "rgba(239,230,27,1)", "rgba(242,230,28,1)", "rgba(244,230,30,1)", "rgba(247,230,31,1)", "rgba(249,231,33,1)", "rgba(251,231,35,1)", "rgba(254,231,36,1)"]
      },
      custom: {
        name: "Custom...",
        componentPickers: {
          heatmap: Ak,
          "horizontal-heatmap": Ak
        }
      }
    }
  },
  align: {
    name: "Align",
    inlineOptions: {
      white: {
        name: "Top",
        value: "top"
      },
      lightGrey: {
        name: "Bottom",
        value: "bottom"
      }
    }
  },
  colorRangeGradient: {
    name: "Color Gradient",
    inlineOptions: Xi
  },
  dataTransform: {
    name: "Transforms",
    inlineOptions: {
      default: {
        name: "Default",
        value: "default"
      },
      None: {
        name: "None",
        value: "None"
      }
    },
    generateOptions: (e12) => {
      const t = [];
      if (e12.transforms)
        for (const r of e12.transforms)
          t.push({
            name: r.name,
            value: r.value
          });
      return t;
    }
  },
  aggregationMode: {
    name: "Aggregation Mode",
    inlineOptions: {},
    generateOptions: (e12) => {
      const t = [];
      return e12.aggregationModes ? Object.values(e12.aggregationModes).forEach(({
        name: r,
        value: n
      }) => {
        t.push({
          name: r,
          value: n
        });
      }) : t.push({
        name: "Default",
        value: "default"
      }), t;
    }
  },
  maxZoom: {
    name: "Zoom limit",
    inlineOptions: {
      none: {
        name: "None",
        value: null
      }
    },
    generateOptions: (e12) => {
      if (e12.maxZoom) {
        const t = [];
        for (let r = 0; r <= e12.maxZoom; r++) {
          const {
            maxWidth: n,
            binsPerDimension: i,
            maxZoom: o
          } = e12;
          let a = 1, s = 1;
          if (e12.resolutions) {
            const f = e12.resolutions.map((h) => +h).sort((h, d) => d - h);
            [a] = f, s = f[r];
          } else
            s = e12.maxWidth / (2 ** r * e12.binsPerDimension), a = n / (2 ** o * i);
          const l = rp(a, s), c = Ku(`.${l}`, s)(s);
          t.push({
            name: c,
            value: r.toString()
          });
        }
        return t;
      }
      return [];
    }
  },
  valueColumn: {
    name: "Value column",
    inlineOptions: {
      none: {
        name: "None",
        value: null
      }
    },
    generateOptions: X6
  },
  zeroValueColor: {
    name: "Zero Value Color",
    inlineOptions: Ur
  }
};
var ree = {
  ...wme,
  IS_TRACK_RANGE_SELECTABLE: ip,
  OPTIONS_INFO: Ln
};
var iQe = {
  d3Array: pse,
  d3Axis: vFe,
  d3Brush: upe,
  d3Color: Pse,
  d3Drag: jfe,
  d3Dsv: Wme,
  d3Format: rle,
  d3Geo: Vze,
  d3Queue: Kze,
  d3Request: g8e,
  d3Scale: kce,
  d3Selection: dae,
  d3Transition: GRe,
  d3Zoom: KRe,
  PIXI: ree.GLOBALS.PIXI,
  mix: Ap,
  slugid: Gt
};
var oQe = {
  Annotations1dTrack: sx,
  Annotations2dTrack: kZ,
  ArrowheadDomainsTrack: CZ,
  BarTrack: AM,
  BedLikeTrack: TZ,
  CNVIntervalTrack: IZ,
  Chromosome2DAnnotations: MZ,
  Chromosome2DLabels: NZ,
  ChromosomeGrid: Bm,
  CombinedTrack: KR,
  CrossRule: nQ,
  DivergentBarTrack: AZ,
  HeatmapTiledPixiTrack: gy,
  Horizontal1dHeatmapTrack: OZ,
  Horizontal2DDomainsTrack: DZ,
  HorizontalChromosomeLabels: BZ,
  HorizontalGeneAnnotationsTrack: PZ,
  HorizontalHeatmapTrack: FZ,
  HorizontalLine1DPixiTrack: wp,
  HorizontalMultivecTrack: wZ,
  HorizontalPoint1DPixiTrack: SZ,
  HorizontalRule: KZ,
  HorizontalTiled1DPixiTrack: Ep,
  HorizontalTiledPlot: QT,
  HorizontalTrack: tJ,
  Id2DTiledPixiTrack: LK,
  IdHorizontal1DTiledPixiTrack: FK,
  IdVertical1DTiledPixiTrack: HK,
  LeftAxisTrack: zK,
  MapboxTilesTrack: aQ,
  MoveableTrack: xS,
  OSMTileIdsTrack: oQ,
  OSMTilesTrack: yy,
  OverlayTrack: EZ,
  PixiTrack: Oi,
  RasterTilesTrack: sQ,
  SVGTrack: fh,
  SquareMarkersTrack: RZ,
  Tiled1DPixiTrack: gM,
  TiledPixiTrack: hh,
  TopAxisTrack: GK,
  Track: Lf,
  ValueIntervalTrack: HZ,
  VerticalRule: rQ,
  VerticalTiled1DPixiTrack: $K,
  VerticalTrack: nJ,
  ViewportTracker2D: UZ,
  ViewportTracker2DPixi: L9e,
  ViewportTrackerHorizontal: jZ,
  ViewportTrackerVertical: GZ
};
var aQe = {
  ContextMenuItem: Ct,
  DataFetcher: gS,
  LruCache: oJ
};
var sQe = {
  ChromosomeInfo: Hs,
  SearchField: Fd
};
var lQe = {
  DataFetcher: gS,
  GBKDataFetcher: DK,
  LocalDataFetcher: RK,
  getDataFetcher: kGe
};
var sE = {
  chromosomes: sQe,
  libraries: iQe,
  tracks: oQe,
  dataFetchers: lQe,
  factories: aQe,
  services: Age,
  utils: fNe,
  configs: ree,
  VERSION: aJ
};
var QO = {
  "track-renderer": "_track-renderer_11dwb_1",
  "track-renderer-element": "_track-renderer-element_11dwb_5",
  "track-renderer-events": "_track-renderer-events_11dwb_6"
};
function cQe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function W6(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, hQe(n.key), n);
  }
}
function uQe(e12, t, r) {
  return t && W6(e12.prototype, t), r && W6(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function hQe(e12) {
  var t = fQe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function fQe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function dQe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Ok(e12, t);
}
function Ok(e12, t) {
  return Ok = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Ok(e12, t);
}
function pQe(e12) {
  var t = gQe();
  return function() {
    var n = lE(e12), i;
    if (t) {
      var o = lE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return mQe(this, i);
  };
}
function mQe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return $o(e12);
}
function $o(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function gQe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function lE(e12) {
  return lE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, lE(e12);
}
var {
  getDataFetcher: vQe
} = sE.dataFetchers;
var yQe = 100;
var CL = function(e12) {
  dQe(r, e12);
  var t = pQe(r);
  function r(n) {
    var i;
    if (cQe(this, r), i = t.call(this, n), i.dragging = false, i.element = null, i.eventTracker = null, i.eventTrackerOld = null, i.closing = false, i.yPositionOffset = 0, i.xPositionOffset = 0, i.scrollTop = 0, i.scrollTimeout = null, i.activeTransitions = 0, i.zoomTransform = Sn, i.windowScrolledBound = i.windowScrolled.bind($o(i)), i.zoomStartedBound = i.zoomStarted.bind($o(i)), i.zoomedBound = i.zoomed.bind($o(i)), i.zoomEndedBound = i.zoomEnded.bind($o(i)), i.uid = Gt.nice(), i.viewUid = i.props.uid, i.availableForPlugins = {
      ...sE,
      services: {
        ...sE.services,
        pubSub: i.props.pubSub,
        pixiRenderer: i.props.pixiRenderer
      }
    }, i.mounted = false, i.emptyZoomBehavior = pC(), i.currentProps = n, i.prevPropsStr = "", i.zoomBehavior = /** @type {import("d3-zoom").ZoomBehavior<HTMLElement, any>} */
    pC().filter((o) => !(o.target.classList.contains("no-zoom") || o.target.classList.contains("react-resizable-handle"))).on("start", i.zoomStartedBound).on("zoom", i.zoomedBound).on("end", i.zoomEndedBound), i.zoomTransform = Sn, i.prevZoomTransform = Sn, i.initialXDomain = [0, 1], i.initialYDomain = [0, 1], i.xDomainLimits = [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER], i.yDomainLimits = [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER], i.zoomLimits = [0, Number.MAX_SAFE_INTEGER], i.prevCenterX = i.currentProps.paddingLeft + i.currentProps.leftWidth + i.currentProps.centerWidth / 2, i.prevCenterY = i.currentProps.paddingTop + i.currentProps.topHeight + i.currentProps.centerHeight / 2, i.cumCenterXOffset = 0, i.cumCenterYOffset = 0, i.setUpInitialScales(i.currentProps.initialXDomain, i.currentProps.initialYDomain, i.currentProps.xDomainLimits, i.currentProps.yDomainLimits, i.currentProps.zoomLimits), i.setUpScales(), i.trackDefObjects = {}, i.metaTracks = {}, i.pubSubs = [], window.higlassTracksByType)
      for (const o in window.higlassTracksByType)
        Tr[o] = window.higlassTracksByType[o].config;
    return i.boundForwardEvent = i.forwardEvent.bind($o(i)), i.boundScrollEvent = i.scrollEvent.bind($o(i)), i.boundForwardContextMenu = i.forwardContextMenu.bind($o(i)), i.dispatchEventBound = i.dispatchEvent.bind($o(i)), i.zoomToDataPosHandlerBound = i.zoomToDataPosHandler.bind($o(i)), i.onScrollHandlerBound = i.onScrollHandler.bind($o(i)), i.elementPos = {
      height: 0,
      width: 0,
      left: 0,
      top: 0
    }, i.elementSelection = null, i;
  }
  return uQe(r, [{
    key: "xScale",
    get: function() {
      if (!this._xScale)
        throw new Error("xScale is not defined");
      return this._xScale;
    }
  }, {
    key: "yScale",
    get: function() {
      if (!this._yScale)
        throw new Error("yScale is not defined");
      return this._yScale;
    }
    // eslint-disable-next-line camelcase
  }, {
    key: "UNSAFE_componentWillMount",
    value: function() {
      this.pubSubs = [], this.pubSubs.push(this.props.pubSub.subscribe("scroll", this.windowScrolledBound)), this.pubSubs.push(this.props.pubSub.subscribe("app.event", this.dispatchEventBound)), this.pubSubs.push(this.props.pubSub.subscribe("zoomToDataPos", this.zoomToDataPosHandlerBound)), this.pubSubs.push(this.props.pubSub.subscribe("app.scroll", this.onScrollHandlerBound));
    }
  }, {
    key: "componentDidMount",
    value: function() {
      if (!this.element)
        throw new Error("Component did not mount, this.element is not defined.");
      if (this.elementPos = this.element.getBoundingClientRect(), this.elementSelection = Wt(this.element), this.pStage = new Ue.PIXI.Graphics(), this.pMask = new Ue.PIXI.Graphics(), this.pOutline = new Ue.PIXI.Graphics(), this.pBackground = new Ue.PIXI.Graphics(), this.pStage.addChild(this.pMask), this.pStage.addChild(this.pOutline), this.currentProps.pixiStage.addChild(this.pStage), this.pStage.mask = this.pMask, this.props.isRangeSelection || this.addZoom(), !this.currentProps.svgElement || !this.currentProps.canvasElement)
        return;
      this.svgElement = this.currentProps.svgElement, this.syncTrackObjects(this.currentProps.positionedTracks), this.syncMetaTracks(this.currentProps.metaTracks), this.currentProps.setCentersFunction(this.setCenter.bind(this)), this.currentProps.registerDraggingChangedListener(this.draggingChanged.bind(this)), this.draggingChanged(true), this.addEventTracker();
      const i = [[this.xScale(this.xDomainLimits[0]), this.yScale(this.yDomainLimits[0])], [this.xScale(this.xDomainLimits[1]), this.yScale(this.yDomainLimits[1])]], o = this.svgElement.getBoundingClientRect(), a = [[Math.max(i[0][0], 0), Math.max(i[0][1], 0)], [Math.min(i[1][0], o.width), Math.min(i[1][1], o.height)]];
      this.zoomBehavior.extent(a).translateExtent(i).scaleExtent(this.zoomLimits);
    }
    // eslint-disable-next-line camelcase
    /** @param {TrackRendererProps} nextProps */
  }, {
    key: "UNSAFE_componentWillReceiveProps",
    value: function(i) {
      if (!i.svgElement || !i.canvasElement)
        return;
      const o = this.updatablePropsToString(i);
      if (this.currentProps = i, this.prevPropsStr === o)
        return;
      this.setBackground();
      for (const u in this.trackDefObjects) {
        const c = this.trackDefObjects[u].trackObject;
        c.delayDrawing = true;
      }
      this.prevPropsStr = o, this.setUpInitialScales(i.initialXDomain, i.initialYDomain, i.xDomainLimits, i.yDomainLimits, i.zoomLimits), this.setUpScales(i.width !== this.props.width || i.height !== this.props.height), this.svgElement = i.svgElement;
      const a = [[this.xScale(this.xDomainLimits[0]), this.yScale(this.yDomainLimits[0])], [this.xScale(this.xDomainLimits[1]), this.yScale(this.yDomainLimits[1])]], s = this.svgElement.getBoundingClientRect(), l = [[Math.max(a[0][0], 0), Math.max(a[0][1], 0)], [Math.min(a[1][0], s.width), Math.min(a[1][1], s.height)]];
      this.zoomBehavior.extent(l).translateExtent(a).scaleExtent(this.zoomLimits), this.syncTrackObjects(i.positionedTracks), this.syncMetaTracks(i.metaTracks);
      for (const u of i.positionedTracks) {
        const c = u.track.options, f = this.trackDefObjects[u.track.uid].trackObject;
        if (f.rerender(c), ub(u.track)) {
          const h = {};
          for (const d of u.track.contents)
            h[d.uid] = d;
          for (const d in f.createdTracks)
            f.createdTracks[d].rerender(h[d].options);
        }
      }
      this.props.onNewTilesLoaded();
      for (const u in this.trackDefObjects) {
        const c = this.trackDefObjects[u].trackObject;
        c.delayDrawing = false, c.draw();
      }
    }
    /** @param {TrackRendererProps} prevProps */
  }, {
    key: "componentDidUpdate",
    value: function(i) {
      (this.props.initialXDomain[0] !== i.initialXDomain[0] || this.props.initialXDomain[1] !== i.initialXDomain[1] || this.props.initialYDomain[0] !== i.initialYDomain[0] || this.props.initialYDomain[1] !== i.initialYDomain[1]) && this.element && (this.element.__zoom = Sn), i.isRangeSelection !== this.props.isRangeSelection && (this.props.isRangeSelection ? this.removeZoom() : this.addZoom()), i.zoomable !== this.props.zoomable && (this.props.zoomable ? this.addZoom() : this.removeZoom()), this.addEventTracker();
    }
  }, {
    key: "componentWillUnmount",
    value: function() {
      var i, o;
      this.mounted = false, this.removeTracks(Object.keys(this.trackDefObjects)), this.removeMetaTracks(Object.keys(this.metaTracks)), this.currentProps.removeDraggingChangedListener(this.draggingChanged), this.pStage && this.currentProps.pixiStage.removeChild(this.pStage), (i = this.pMask) == null || i.destroy(true), (o = this.pStage) == null || o.destroy(true), this.pubSubs.forEach((a) => this.props.pubSub.unsubscribe(a)), this.pubSubs = [], this.removeEventTracker();
    }
    /* --------------------------- Custom Methods ----------------------------- */
    /**
     * Dispatch a forwarded event on the main DOM element
     *
     * @param  {Event & { sourceUid: string, type: string }} event Event to be dispatched.
     */
  }, {
    key: "dispatchEvent",
    value: function(i) {
      i.sourceUid === this.uid && i.type !== "contextmenu" && this.element && M0(i, this.element);
    }
    /**
     * Check of a view position (i.e., pixel coords) is within this view
     *
     * @param {number} x - X position to be tested.
     * @param {number} y - Y position to be tested.
     * @return {boolean} If `true` position is within this view.
     */
  }, {
    key: "isWithin",
    value: function(i, o) {
      const a = i >= this.elementPos.left && i <= this.elementPos.width + this.elementPos.left, s = o >= this.elementPos.top && o <= this.elementPos.height + this.elementPos.top;
      return a && s;
    }
    /** @param {{ pos: [number, number, number, number], animateTime: number }} opts */
  }, {
    key: "zoomToDataPosHandler",
    value: function({
      pos: i,
      animateTime: o
    }) {
      this.zoomToDataPos(...i, o);
    }
  }, {
    key: "addZoom",
    value: function() {
      !this.elementSelection || !this.currentProps.zoomable || (this.elementSelection.call(this.zoomBehavior), this.zoomBehavior.transform(this.elementSelection, this.zoomTransform));
    }
  }, {
    key: "removeZoom",
    value: function() {
      this.elementSelection && (this.zoomEnded(), this.elementSelection.on(".zoom", null));
    }
    /*
     * Add a mask to make sure that the tracks displayed in this view
     * don't overflow its bounds.
     */
  }, {
    key: "setMask",
    value: function() {
      var i, o, a, s;
      (i = this.pMask) == null || i.clear(), (o = this.pMask) == null || o.beginFill(), (a = this.pMask) == null || a.drawRect(this.xPositionOffset, this.yPositionOffset, this.currentProps.width, this.currentProps.height), (s = this.pMask) == null || s.endFill();
    }
  }, {
    key: "setBackground",
    value: function() {
      var i, o, a, s, l;
      const u = this.props.theme === wr ? "black" : "white", c = ct(((i = this.currentProps.viewOptions) == null ? void 0 : i.backgroundColor) ?? u);
      (o = this.pBackground) == null || o.clear(), (a = this.pBackground) == null || a.beginFill(c), (s = this.pBackground) == null || s.drawRect(this.xPositionOffset, this.yPositionOffset, this.currentProps.width, this.currentProps.height), (l = this.pBackground) == null || l.endFill();
    }
  }, {
    key: "windowScrolled",
    value: function() {
      this.removeZoom(), this.scrollTimeout && clearTimeout(this.scrollTimeout), this.scrollTimeout = setTimeout(() => {
        this.addZoom();
      }, yQe);
    }
    /**
     * @param {[number, number]} initialXDomain
     * @param {[number, number]} initialYDomain
     * @param {[number, number]} xDomainLimits
     * @param {[number, number]} yDomainLimits
     * @param {[number, number]} zoomLimits
     */
  }, {
    key: "setUpInitialScales",
    value: function(i = [0, 1], o = [0, 1], a = [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER], s = [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER], l = [0, Number.MAX_SAFE_INTEGER]) {
      l[0] = l[0] === null ? 0 : l[0], l[1] = l[1] === null ? 1 / 0 : l[1];
      const u = i[1] - i[0], c = (o[0] + o[1]) / 2;
      if (o[0] = c - u / 2, o[1] = c + u / 2, i[0] === this.initialXDomain[0] && i[1] === this.initialXDomain[1] && o[0] === this.initialYDomain[0] && o[1] === this.initialYDomain[1] && a[0] === this.xDomainLimits[0] && a[1] === this.xDomainLimits[1] && s[0] === this.yDomainLimits[0] && s[1] === this.yDomainLimits[1] && l[0] === this.zoomLimits[0] && l[1] === this.zoomLimits[1])
        return;
      this.initialXDomain = i, this.initialYDomain = o, this.xDomainLimits = a, this.yDomainLimits = s, this.zoomLimits = l, this.zoomTransform = Sn, this.prevZoomTransform = Sn, this.cumCenterYOffset = 0, this.cumCenterXOffset = 0, this.drawableToDomainX = It().domain([this.currentProps.paddingLeft + this.currentProps.leftWidth, this.currentProps.paddingLeft + this.currentProps.leftWidth + this.currentProps.centerWidth]).range([i[0], i[1]]);
      let f, h;
      this.currentProps.centerWidth === 0 ? (f = this.currentProps.paddingTop + this.currentProps.topHeight, h = this.currentProps.paddingTop + this.currentProps.topHeight + this.currentProps.centerHeight) : (f = this.currentProps.paddingTop + this.currentProps.topHeight + this.currentProps.centerHeight / 2 - this.currentProps.centerWidth / 2, h = this.currentProps.paddingTop + this.currentProps.topHeight + this.currentProps.centerHeight / 2 + this.currentProps.centerWidth / 2), this.drawableToDomainY = It().domain([f, h]).range([o[0], o[1]]), this.prevCenterX = this.currentProps.paddingLeft + this.currentProps.leftWidth + this.currentProps.centerWidth / 2, this.prevCenterY = this.currentProps.paddingTop + this.currentProps.topHeight + this.currentProps.centerHeight / 2;
    }
    /** @param {TrackRendererProps} props */
  }, {
    key: "updatablePropsToString",
    value: function(i) {
      return JSON.stringify({
        positionedTracks: i.positionedTracks,
        initialXDomain: i.initialXDomain,
        initialYDomain: i.initialYDomain,
        width: i.width,
        height: i.height,
        paddingLeft: i.paddingLeft,
        paddingTop: i.paddingTop,
        leftWidth: i.leftWidth,
        topHeight: i.topHeight,
        dragging: i.dragging,
        viewOptions: i.viewOptions
      });
    }
    /** @param {boolean} draggingStatus */
  }, {
    key: "draggingChanged",
    value: function(i) {
      this.dragging = i, this.timedUpdatePositionAndDimensions();
    }
  }, {
    key: "setUpScales",
    value: function(i = false) {
      const o = this.currentProps.paddingLeft + this.currentProps.leftWidth + this.currentProps.centerWidth / 2, a = this.currentProps.paddingTop + this.currentProps.topHeight + this.currentProps.centerHeight / 2;
      if (!this.drawableToDomainX || !this.drawableToDomainY)
        return;
      const s = (this.drawableToDomainX(o) - this.drawableToDomainX(this.prevCenterX)) / this.zoomTransform.k, l = (this.drawableToDomainY(a) - this.drawableToDomainY(this.prevCenterY)) / this.zoomTransform.k;
      this.cumCenterYOffset += l, this.cumCenterXOffset += s, this.prevCenterY = a, this.prevCenterX = o;
      const u = [this.drawableToDomainX(0) - this.cumCenterXOffset, this.drawableToDomainX(this.currentProps.width) - this.cumCenterXOffset], c = [this.drawableToDomainY(0) - this.cumCenterYOffset, this.drawableToDomainY(this.currentProps.height) - this.cumCenterYOffset];
      this._xScale = It().domain(u).range([0, this.currentProps.width]), this._yScale = It().domain(c).range([0, this.currentProps.height]);
      for (const f in this.trackDefObjects)
        this.trackDefObjects[f].trackObject.refScalesChanged(this.xScale, this.yScale);
      this.applyZoomTransform(i);
    }
    /**
     * Get a track's viewconf definition by its object
     *
     * @param {TrackObject} trackObjectIn
     */
  }, {
    key: "getTrackDef",
    value: function(i) {
      const o = vo(this.trackDefObjects);
      for (const [, {
        trackDef: a,
        trackObject: s
      }] of o) {
        if (s === i)
          return a.track;
        if (ub(a.track)) {
          for (const l of a.track.contents)
            if (s.createdTracks[l.uid] === i)
              return l;
        }
      }
      return null;
    }
    /**
     * Fetch the trackObject for a track with a given ID
     *
     * @param {string} trackId
     * @return {TrackObject | undefined}
     */
  }, {
    key: "getTrackObject",
    value: function(i) {
      const o = vo(this.trackDefObjects);
      for (let a = 0; a < o.length; a++) {
        const s = o[a][0], l = o[a][1].trackObject;
        if (s === i)
          return l;
        if (l.createdTracks) {
          const u = vo(l.createdTracks);
          for (let c = 0; c < u.length; c++) {
            const f = u[c][0], h = u[c][1];
            if (f === i)
              return h;
          }
        }
      }
    }
  }, {
    key: "timedUpdatePositionAndDimensions",
    value: function() {
      this.closing || !this.element || (this.elementPos = this.element.getBoundingClientRect(), this.dragging && (this.yPositionOffset = this.element.getBoundingClientRect().top - this.currentProps.canvasElement.getBoundingClientRect().top + this.scrollTop, this.xPositionOffset = this.element.getBoundingClientRect().left - this.currentProps.canvasElement.getBoundingClientRect().left, this.setMask(), this.setBackground(), this.updateTrackPositions() && this.applyZoomTransform(true), requestAnimationFrame(this.timedUpdatePositionAndDimensions.bind(this))));
    }
    /**
     * @param {Array<TrackConfig>} trackDefinitions
     */
  }, {
    key: "syncMetaTracks",
    value: function(i) {
      const o = Object.keys(this.metaTracks), a = new Set(i.map((s) => s.uid));
      this.addMetaTracks(i.filter((s) => !this.metaTracks[s.uid])), this.updateMetaTracks(i.filter((s) => this.metaTracks[s.uid])), this.removeMetaTracks(o.filter((s) => !a.has(s)));
    }
    /**
     * @param {Array<TrackDefinition>} trackDefinitions
     */
  }, {
    key: "syncTrackObjects",
    value: function(i) {
      this.prevTrackDefinitions = JSON.stringify(i);
      const o = {};
      for (let f = 0; f < i.length; f++)
        o[i[f].track.uid] = i[f];
      const a = new Set(Object.keys(this.trackDefObjects)), s = new Set(Object.keys(o)), l = new Set([...s].filter((f) => !a.has(f))), u = new Set([...a].filter((f) => !s.has(f))), c = new Set([...s].filter((f) => a.has(f)));
      this.updateExistingTrackDefs([...c].map((f) => o[f])), this.addNewTracks([...l].map((f) => o[f])), this.updateExistingTrackDefs([...l].map((f) => o[f])), this.removeTracks([...u]);
    }
    /**
     * Add new meta tracks
     *
     * @param {Array<TrackConfig>} metaTrackDefs  Definitions of meta tracks to be added.
     */
  }, {
    key: "addMetaTracks",
    value: function(i) {
      i.filter((o) => !this.metaTracks[o.uid]).forEach((o) => {
        this.metaTracks[o.uid] = {
          trackDef: o,
          trackObject: this.createMetaTrack(o)
        };
      });
    }
    /**
     * @param {Array<TrackDefinition>} newTrackDefinitions
     */
  }, {
    key: "addNewTracks",
    value: function(i) {
      if (this.currentProps.pixiStage) {
        for (let o = 0; o < i.length; o++) {
          const a = i[o], s = this.createTrackObject(a.track);
          s.refScalesChanged(this.xScale, this.yScale), this.trackDefObjects[a.track.uid] = {
            trackDef: a,
            trackObject: s
          };
          const l = this.zoomTransform.rescaleX(this.xScale), u = this.zoomTransform.rescaleY(this.yScale);
          s.setDimensions([a.width, a.height]), s.zoomed(l, u);
        }
        this.applyZoomTransform(false);
      }
    }
    /** @param {unknown} _unused */
  }, {
    key: "updateMetaTracks",
    value: function(i) {
    }
    /** @param {Array<TrackDefinition>} newTrackDefs */
  }, {
    key: "updateExistingTrackDefs",
    value: function(i) {
      for (const a of i) {
        const s = this.trackDefObjects[a.track.uid];
        s.trackDef = a, ub(a.track) && s.trackObject.updateContents(a.track.contents, this.createTrackObject.bind(this)).refScalesChanged(this.xScale, this.yScale);
      }
      this.updateTrackPositions() && this.applyZoomTransform(false);
    }
  }, {
    key: "updateTrackPositions",
    value: function() {
      let i = false;
      for (const o in this.trackDefObjects) {
        const a = this.trackDefObjects[o].trackDef, s = this.trackDefObjects[o].trackObject, l = s.position, u = s.dimensions, c = [this.xPositionOffset + a.left, this.yPositionOffset + a.top], f = [a.width, a.height];
        (!l || c[0] !== l[0] || c[1] !== l[1]) && (s.setPosition(c), i = true), (!u || f[0] !== u[0] || f[1] !== u[1]) && (s.setDimensions(f), i = true);
      }
      return i;
    }
    /** @param {string[]} trackIds */
  }, {
    key: "removeMetaTracks",
    value: function(i) {
      i.forEach((o) => {
        this.metaTracks[o].trackObject.remove(), this.metaTracks[o] = void 0, delete this.metaTracks[o];
      });
    }
    /** @param {string[]} trackUids */
  }, {
    key: "removeTracks",
    value: function(i) {
      for (let o = 0; o < i.length; o++)
        this.trackDefObjects[i[o]].trackObject.remove(), delete this.trackDefObjects[i[o]];
    }
    /**
     * Set the center of this view to a paticular X and Y coordinate
     * @param  {number}  centerX  Centeral X data? position.
     * @param  {number}  centerY  Central Y data? position.
     * @param  {number}  sourceK  Source zoom level? @Pete what's the source?
     * @param  {boolean}  notify  If `true` notify listeners that the scales
     *   have changed. This can be turned off to prevent circular updates when
     *   scales are locked.
     * @param  {number}  animateTime  Animation time in milliseconds. Only used
     *   when `animate` is true.
     * @param  {Scale}  xScale  The scale to use for the X axis.
     * @param  {Scale}  yScale  The scale to use for the Y axis.
     */
  }, {
    key: "setCenter",
    value: function(i, o, a, s = false, l = 0, u = this.xScale, c = this.yScale) {
      const h = (this.xScale.invert(1) - this.xScale.invert(0)) / a, d = this.currentProps.paddingLeft + this.currentProps.leftWidth + this.currentProps.centerWidth / 2, p = this.currentProps.paddingTop + this.currentProps.topHeight + this.currentProps.centerHeight / 2, m = d - u(i) * h, g = p - c(o) * h;
      let v;
      const _ = () => {
        const y = Sn.translate(m, g).scale(h);
        this.zoomTransform = y, this.elementSelection && this.emptyZoomBehavior.transform(this.elementSelection, y), v = this.applyZoomTransform(s);
      };
      if (l && this.elementSelection) {
        let y = this.elementSelection;
        this.activeTransitions += 1, document.hidden || (y = y.transition().duration(l)), y.call(this.zoomBehavior.transform, Sn.translate(m, g).scale(h)).on("end", () => {
          _(), this.activeTransitions -= 1;
        });
      } else
        _();
      return v;
    }
    /** @param {number} movement */
  }, {
    key: "valueScaleMove",
    value: function(i) {
      if (this.zoomStartPos) {
        for (const o of this.getTracksAtPosition(...this.zoomStartPos))
          o.movedY(i);
        this.zoomStartTransform && (this.zoomTransform = this.zoomStartTransform);
      }
    }
    /**
     * @param {{ sourceEvent: Event }} event
     * @param {string | null} orientation
     */
  }, {
    key: "valueScaleZoom",
    value: function(i, o) {
      if (!Ige(i.sourceEvent))
        return;
      const a = i.sourceEvent.deltaY, s = i.sourceEvent.deltaMode, u = ((f, h) => f * (h ? 120 : 1) / 500)(a, s), c = vr(i.sourceEvent, this.props.canvasElement);
      for (const f of this.getTracksAtPosition(...c)) {
        const h = o === "1d-horizontal" ? c[1] - f.position[1] : c[0] - f.position[0];
        f.zoomedY(h, 2 ** u);
      }
      this.zoomStartTransform && (this.zoomTransform = this.zoomStartTransform);
    }
    /**
     * Respond to a zoom event.
     *
     * We need to update our local record of the zoom transform and apply it
     * to all the tracks.
     *
     * @param {import("d3-zoom").D3ZoomEvent<HTMLElement, unknown> & { shiftKey?: boolean }} event
     */
  }, {
    key: "zoomed",
    value: function(i) {
      var o;
      let a = null;
      if (this.zoomStartPos) {
        const l = this.getTracksAtPosition(...this.zoomStartPos);
        if (l.length) {
          const u = l[0], c = this.getTrackDef(u);
          if (!c)
            return;
          (o = Tr[c.type]) != null && o.orientation && (a = Tr[c.type].orientation), u instanceof Tj && (a = "1d-vertical");
        }
      }
      if (a && i.sourceEvent) {
        if (i.shiftKey || this.valueScaleZooming) {
          if (i.sourceEvent.deltaY !== void 0) {
            this.valueScaleZoom(i, a);
            return;
          }
          a === "1d-horizontal" ? this.valueScaleMove(i.sourceEvent.movementY) : a === "1d-vertical" && this.valueScaleMove(i.sourceEvent.movementX);
        }
        a === "1d-horizontal" && i.sourceEvent.movementY ? this.valueScaleMove(i.sourceEvent.movementY) : a === "1d-vertical" && i.sourceEvent.movementX && this.valueScaleMove(i.sourceEvent.movementX);
      }
      this.zoomTransform = this.currentProps.zoomable ? i.transform : Sn, this.prevZoomTransform.k !== this.zoomTransform.k || (a === "1d-horizontal" ? this.zoomTransform = Sn.translate(this.zoomTransform.x, this.prevZoomTransform.y).scale(this.zoomTransform.k) : a === "1d-vertical" && (this.zoomTransform = Sn.translate(this.prevZoomTransform.x, this.zoomTransform.y).scale(this.zoomTransform.k)), this.element && (this.element.__zoom = this.zoomTransform)), this.applyZoomTransform(true), this.prevZoomTransform = this.zoomTransform, this.props.pubSub.publish("app.zoom", i), i.sourceEvent && (i.sourceEvent.stopPropagation(), i.sourceEvent.preventDefault());
    }
    /**
     * Return a list of tracks under this position.
     *
     * The position should be relative to this.props.canvasElement.
     *
     * @param {number} x The query x position
     * @param {number} y The query y position
     * @return {Array<TrackObject>}  An array of tracks at this position
     */
  }, {
    key: "getTracksAtPosition",
    value: function(i, o) {
      const a = [];
      let s = [];
      for (const l in this.trackDefObjects) {
        const u = this.trackDefObjects[l].trackObject;
        u.childTracks ? s = s.concat(u.childTracks) : s.push(u);
      }
      for (const l of s) {
        const u = l.position[0] <= i && i <= l.position[0] + l.dimensions[0], c = l.position[1] <= o && o <= l.position[1] + l.dimensions[1];
        u && c && a.push(l);
      }
      return a;
    }
    /** @param {import('d3-zoom').D3ZoomEvent<HTMLElement, unknown>=} event */
  }, {
    key: "zoomStarted",
    value: function(i) {
      this.zooming = true, i && i.sourceEvent && (this.zoomStartPos = vr(i.sourceEvent, this.props.canvasElement), i.sourceEvent.shiftKey && (this.valueScaleZooming = true)), this.zoomStartTransform = this.zoomTransform, this.props.pubSub.publish("app.zoomStart");
    }
  }, {
    key: "zoomEnded",
    value: function() {
      this.zooming = false, this.zoomStartPos = null, this.valueScaleZooming && (this.valueScaleZooming = false, this.element && (this.element.__zoom = this.zoomStartTransform)), this.props.pubSub.publish("app.zoomEnd");
    }
    /**
     * @param {boolean=} notify
     * @returns {[Scale, Scale] | undefined}
     */
  }, {
    key: "applyZoomTransform",
    value: function(i = true) {
      const o = this.currentProps, a = o.paddingLeft + o.leftWidth, s = o.paddingTop + o.topHeight;
      if (!this.xScale || !this.yScale)
        return;
      this.zoomedXScale = this.zoomTransform.rescaleX(this.xScale), this.zoomedYScale = this.zoomTransform.rescaleY(this.yScale);
      const l = It().domain([a, a + o.centerWidth].map(this.zoomedXScale.invert)).range([0, o.centerWidth]), u = It().domain([s, s + o.centerHeight].map(this.zoomedYScale.invert)).range([0, o.centerHeight]);
      for (const c in this.trackDefObjects) {
        const f = this.trackDefObjects[c].trackObject, h = this.trackDefObjects[c].trackDef;
        let d = "unknown";
        if (Tr[h.track.type] && (d = Tr[h.track.type].orientation), d === "whole") {
          const p = It().domain([o.paddingLeft, o.width - o.paddingLeft].map(this.zoomedXScale.invert)).range([0, o.width - 2 * o.paddingLeft]), m = It().domain([o.paddingTop, o.height - o.paddingTop].map(this.zoomedYScale.invert)).range([0, o.height - 2 * o.paddingTop]);
          f.zoomed(p, m);
          continue;
        }
        if (this.trackDefObjects[c].trackDef.track.position === "gallery") {
          const p = It().domain([o.paddingLeft + o.leftWidthNoGallery, o.paddingLeft + o.leftWidth + o.centerWidth + o.galleryDim].map(this.zoomedXScale.invert)).range([0, o.centerWidth + 2 * o.galleryDim]), m = It().domain([o.paddingTop + o.topHeightNoGallery, o.paddingTop + o.topHeight + o.centerHeight + o.galleryDim].map(this.zoomedYScale.invert)).range([0, o.centerHeight - 2 * o.galleryDim]);
          f.zoomed(p.copy(), m.copy(), this.zoomTransform.k);
          continue;
        }
        f.zoomed(l.copy(), u.copy(), this.zoomTransform.k, this.zoomTransform.x + this.xPositionOffset, this.zoomTransform.y + this.yPositionOffset, o.paddingLeft + o.leftWidth, o.paddingTop + o.topHeight);
      }
      return this.currentXScale = l, this.currentYScale = u, i && this.currentProps.onScalesChanged(l, u), [l, u];
    }
    /** @param {TrackConfig} track */
  }, {
    key: "createMetaTrack",
    value: function(i) {
      switch (i.type) {
        default: {
          const o = this.props.pluginTracks[i.type];
          if (o == null ? void 0 : o.isMetaTrack) {
            const a = {
              getTrackObject: this.getTrackObject.bind(this),
              onNewTilesLoaded: () => {
                this.currentProps.onNewTilesLoaded(i.uid);
              },
              definition: i
            };
            try {
              return new o.track(
                // eslint-disable-line new-cap
                this.availableForPlugins,
                a,
                i.options
              );
            } catch (s) {
              console.error("Plugin meta track", i.type, "failed to instantiate.", s);
            }
          }
          return console.warn(`Unknown meta track of type: ${i.type}`), new jj(this.pStage, {
            name: "Unknown Track Type",
            type: i.type
          });
        }
      }
    }
    /** @param {TrackConfig} track */
  }, {
    key: "createTrackObject",
    value: function(i) {
      const o = this.createLocationAgnosticTrackObject(i);
      return (i.position === "left" || i.position === "right") && Tr[i.type].orientation === "1d-horizontal" ? new Tj(o) : o;
    }
    /** @param {TrackConfig} track */
  }, {
    key: "createLocationAgnosticTrackObject",
    value: function(i) {
      let o = i.data;
      o || (o = {
        server: w1(i.server),
        tilesetUid: i.tilesetUid
      }), i.coordSystem && (o.coordSystem = i.coordSystem);
      const a = vQe(o, this.props.pubSub, this.props.pluginDataFetchers, this.availableForPlugins);
      if (!this.pStage || !this.svgElement)
        throw new Error("No PIXI stage or svg element");
      const s = {
        id: i.uid,
        trackUid: i.uid,
        trackType: i.type,
        viewUid: this.viewUid,
        pubSub: this.props.pubSub,
        scene: this.pStage,
        dataConfig: o,
        dataFetcher: a,
        getLockGroupExtrema: () => this.currentProps.getLockGroupExtrema(i.uid),
        handleTilesetInfoReceived: (l) => {
          this.currentProps.onTilesetInfoReceived(i.uid, l);
        },
        animate: () => {
          this.currentProps.onNewTilesLoaded(i.uid);
        },
        svgElement: this.svgElement,
        isValueScaleLocked: () => this.currentProps.isValueScaleLocked(i.uid),
        onValueScaleChanged: () => {
          this.currentProps.onValueScaleChanged(i.uid);
        },
        onTrackOptionsChanged: (l) => {
          this.currentProps.onTrackOptionsChanged(i.uid, l);
        },
        onMouseMoveZoom: this.props.onMouseMoveZoom,
        chromInfoPath: i.chromInfoPath,
        isShowGlobalMousePosition: () => this.props.isShowGlobalMousePosition,
        getTheme: () => this.props.theme
      };
      switch (i.y && (s.yPosition = i.y), i.x && (s.xPosition = i.x), i.projectionXDomain && (s.projectionXDomain = i.projectionXDomain), i.projectionYDomain && (s.projectionYDomain = i.projectionYDomain), i.type) {
        case "left-axis":
          return new zK(s, i.options);
        case "top-axis":
          return new GK(s, i.options);
        case "heatmap":
          return new gy(s, i.options);
        case "multivec":
        case "vector-heatmap":
        case "horizontal-multivec":
        case "horizontal-vector-heatmap":
        case "vertical-multivec":
        case "vertical-vector-heatmap":
          return new wZ(s, i.options);
        case "1d-heatmap":
        case "horizontal-1d-heatmap":
        case "vertical-1d-heatmap":
          return new OZ(s, i.options);
        case "line":
        case "horizontal-line":
        case "vertical-line":
          return new wp(s, i.options);
        case "point":
        case "horizontal-point":
        case "vertical-point":
          return new SZ(s, i.options);
        case "bar":
        case "horizontal-bar":
        case "vertical-bar":
          return new AM(s, i.options);
        case "divergent-bar":
        case "horizontal-divergent-bar":
        case "vertical-divergent-bar":
          return new AZ(s, i.options);
        case "horizontal-1d-tiles":
          return new FK(s, i.options);
        case "vertical-1d-tiles":
          return new HK(s, i.options);
        case "2d-tiles":
          return new LK(s, i.options);
        case "stacked-interval":
        case "top-stacked-interval":
        case "left-stacked-interval":
          return new IZ(s, i.options);
        case "viewport-projection-center":
          return i.registerViewportChanged && i.removeViewportChanged && i.setDomainsCallback ? (s.registerViewportChanged = i.registerViewportChanged, s.removeViewportChanged = i.removeViewportChanged, s.setDomainsCallback = i.setDomainsCallback, new UZ(s, i.options)) : new Lf(s, {});
        case "viewport-projection-horizontal":
          return i.registerViewportChanged && i.removeViewportChanged && i.setDomainsCallback ? (s.registerViewportChanged = i.registerViewportChanged, s.removeViewportChanged = i.removeViewportChanged, s.setDomainsCallback = i.setDomainsCallback, new jZ(s, i.options)) : new Lf(s, {});
        case "viewport-projection-vertical":
          return i.registerViewportChanged && i.removeViewportChanged && i.setDomainsCallback ? (s.registerViewportChanged = i.registerViewportChanged, s.removeViewportChanged = i.removeViewportChanged, s.setDomainsCallback = i.setDomainsCallback, new GZ(s, i.options)) : new Lf(s, {});
        case "gene-annotations":
        case "horizontal-gene-annotations":
        case "vertical-gene-annotations":
          return new PZ(s, i.options);
        case "2d-rectangle-domains":
        case "arrowhead-domains":
          return new CZ(s, i.options);
        case "horizontal-1d-annotations":
          return new sx(s, i.options);
        case "vertical-1d-annotations":
          return new sx(s, i.options, true);
        case "2d-annotations":
          return new kZ(s, i.options);
        case "linear-2d-rectangle-domains":
        case "horizontal-2d-rectangle-domains":
        case "vertical-2d-rectangle-domains":
          return new DZ(s, i.options);
        case "square-markers":
          return new RZ(s, i.options);
        case "combined":
          return s.tracks = i.contents, s.createTrackObject = this.createTrackObject.bind(this), new KR(s);
        case "2d-chromosome-labels":
          return new NZ(s, i.options);
        case "horizontal-chromosome-grid":
          return s.orientation = "1d-horizontal", new Bm(s, i.options);
        case "vertical-chromosome-grid":
          return s.orientation = "1d-vertical", new Bm(s, i.options);
        case "2d-chromosome-grid":
          return new Bm(s, i.options);
        case "chromosome-labels":
        case "horizontal-chromosome-labels":
        case "vertical-chromosome-labels":
          return new BZ(s, i.options);
        case "linear-heatmap":
        case "horizontal-heatmap":
        case "vertical-heatmap":
          return new FZ(s, i.options);
        case "2d-chromosome-annotations":
          return new MZ(s, i.options);
        case "1d-value-interval":
        case "horizontal-1d-value-interval":
        case "vertical-1d-value-interval":
          return new HZ(s, i.options);
        case "osm":
        case "osm-tiles":
          return new yy(s, i.options);
        case "osm-2d-tile-ids":
          return new oQ(s, i.options);
        case "mapbox":
        case "mapbox-tiles":
          return new aQ(s, i.options);
        case "raster-tiles":
          return new sQ(s, i.options);
        case "bedlike":
        case "vertical-bedlike":
          return new TZ(s, i.options);
        case "overlay-track":
          return new EZ(s, i.options);
        case "overlay-chromosome-grid-track":
          return s.isOverlay = true, new Bm(s, i.options);
        case "horizontal-rule":
          return new KZ(s, i.options);
        case "vertical-rule":
          return new rQ(s, i.options);
        case "cross-rule":
          return s.x = i.x, s.y = i.y, new nQ(s, i.options);
        case "simple-svg":
          return new fh(s, i.options);
        case "empty": {
          const l = i.options;
          return new Oi(s, l);
        }
        default: {
          const l = this.props.pluginTracks[i.type];
          if (l && !l.isMetaTrack) {
            s.AVAILABLE_FOR_PLUGINS = this.availableForPlugins, s.baseEl = this.baseEl, s.definition = i, i.registerViewportChanged && i.removeViewportChanged && i.setDomainsCallback && (s.registerViewportChanged = i.registerViewportChanged, s.removeViewportChanged = i.removeViewportChanged, s.setDomainsCallback = i.setDomainsCallback);
            try {
              return new l.track(
                // eslint-disable-line new-cap
                this.availableForPlugins,
                s,
                i.options
              );
            } catch (u) {
              console.error("Plugin track", i.type, "failed to instantiate.", u);
            }
          }
          return console.warn("Unknown track type:", i.type), new jj(s, {
            name: "Unknown Track Type",
            type: i.type
          });
        }
      }
    }
    /**
     * Zoom to a location given the data coordinates
     * @param   {number}  dataXStart  Data start X coordinate.
     * @param   {number}  dataXEnd  Data end X coordinate.
     * @param   {number}  dataYStart  Data start Y coordinate.
     * @param   {number}  dataYEnd  Data end Y coordinate.
     * @param   {number}  animateTime  Animation time in milliseconds.
     * @param   {ProjectorFunction | null}  projector  If not `null` a projector function that
     *   provides adjusted x and y scales.
     */
  }, {
    key: "zoomToDataPos",
    value: function(i, o, a, s, l = 3e3, u = null) {
      const [c, f, h] = un(this.xScale.copy().domain([i, o]), this.yScale.copy().domain([a, s])), d = u ? u(this.xScale, this.yScale) : [this.xScale, this.yScale];
      this.setCenter(c, f, h, false, l, d[0], d[1]);
    }
    /**
     * @param {{ altKey: boolean, preventDefault: () => void }} e
     */
  }, {
    key: "forwardContextMenu",
    value: function(i) {
      this.props.disableTrackMenu || i.altKey || (i.preventDefault(), setTimeout(() => {
        this.props.pubSub.publish("contextmenu", i);
      }, 0));
    }
  }, {
    key: "addEventTracker",
    value: function() {
      !this.eventTracker || this.eventTracker === this.eventTrackerOld || (this.eventTrackerOld || (this.eventTrackerOld = this.eventTracker), this.eventTracker = this.eventTrackerOld, this.eventTracker.addEventListener("click", this.boundForwardEvent), this.eventTracker.addEventListener("contextmenu", this.boundForwardContextMenu), this.eventTracker.addEventListener("dblclick", this.boundForwardEvent), this.eventTracker.addEventListener("wheel", this.boundForwardEvent), this.eventTracker.addEventListener("dragstart", this.boundForwardEvent), this.eventTracker.addEventListener("selectstart", this.boundForwardEvent), this.eventTracker.addEventListener("mouseover", this.boundForwardEvent), this.eventTracker.addEventListener("mouseenter", this.boundForwardEvent), this.eventTracker.addEventListener("mousedown", this.boundForwardEvent), this.eventTracker.addEventListener("mouseup", this.boundForwardEvent), this.eventTracker.addEventListener("mouseout", this.boundForwardEvent), this.eventTracker.addEventListener("mouseleave", this.boundForwardEvent), this.eventTracker.addEventListener("touchstart", this.boundForwardEvent), this.eventTracker.addEventListener("touchend", this.boundForwardEvent), this.eventTracker.addEventListener("touchmove", this.boundForwardEvent), this.eventTracker.addEventListener("touchcancel", this.boundForwardEvent), this.eventTracker.addEventListener("pointerover", this.boundForwardEvent), this.eventTracker.addEventListener("pointerenter", this.boundForwardEvent), this.eventTracker.addEventListener("pointerdown", this.boundForwardEvent), this.eventTracker.addEventListener("pointerup", this.boundForwardEvent), this.eventTracker.addEventListener("pointercancel", this.boundForwardEvent), this.eventTracker.addEventListener("pointerout", this.boundForwardEvent), this.eventTracker.addEventListener("pointerleave", this.boundForwardEvent), window.addEventListener("scroll", this.boundScrollEvent));
    }
  }, {
    key: "removeEventTracker",
    value: function() {
      this.eventTracker && (this.eventTracker.removeEventListener("click", this.boundForwardEvent), this.eventTracker.removeEventListener("contextmenu", this.boundForwardContextMenu), this.eventTracker.removeEventListener("dblclick", this.boundForwardEvent), this.eventTracker.removeEventListener("wheel", this.boundForwardEvent), this.eventTracker.removeEventListener("dragstart", this.boundForwardEvent), this.eventTracker.removeEventListener("selectstart", this.boundForwardEvent), this.eventTracker.removeEventListener("mouseover", this.boundForwardEvent), this.eventTracker.removeEventListener("mouseenter", this.boundForwardEvent), this.eventTracker.removeEventListener("mousedown", this.boundForwardEvent), this.eventTracker.removeEventListener("mouseup", this.boundForwardEvent), this.eventTracker.removeEventListener("mouseout", this.boundForwardEvent), this.eventTracker.removeEventListener("mouseleave", this.boundForwardEvent), this.eventTracker.removeEventListener("touchstart", this.boundForwardEvent), this.eventTracker.removeEventListener("touchend", this.boundForwardEvent), this.eventTracker.removeEventListener("touchcancel", this.boundForwardEvent), this.eventTracker.removeEventListener("pointerover", this.boundForwardEvent), this.eventTracker.removeEventListener("pointerenter", this.boundForwardEvent), this.eventTracker.removeEventListener("pointerdown", this.boundForwardEvent), this.eventTracker.removeEventListener("pointerup", this.boundForwardEvent), this.eventTracker.removeEventListener("pointercancel", this.boundForwardEvent), this.eventTracker.removeEventListener("pointerout", this.boundForwardEvent), this.eventTracker.removeEventListener("pointerleave", this.boundForwardEvent), window.removeEventListener("scroll", this.boundScrollEvent));
    }
  }, {
    key: "scrollEvent",
    value: function() {
      this.element && (this.elementPos = this.element.getBoundingClientRect());
    }
    /**
     * Publishes an event to the pubSub channel, first overriding the
     * sourceUid to be the uid of this track renderer.
     *
     * @template {Event} T
     * @param {T & { sourceUid?: string; forwarded?: boolean }} event
     */
  }, {
    key: "forwardEvent",
    value: function(i) {
      i.sourceUid = this.uid, i.forwarded = true, this.props.pubSub.publish("app.event", i);
    }
    /** @param {number} scrollTop */
  }, {
    key: "onScrollHandler",
    value: function(i) {
      this.scrollTop = i;
    }
    /* ------------------------------- Render ------------------------------- */
  }, {
    key: "render",
    value: function() {
      return import_react.default.createElement("div", {
        ref: (i) => {
          this.baseEl = i;
        },
        className: nr("track-renderer-div", QO["track-renderer"]),
        style: {
          height: this.currentProps.height,
          width: this.currentProps.width
        }
      }, import_react.default.createElement("div", {
        ref: (i) => {
          this.element = i;
        },
        className: nr("track-renderer-element", QO["track-renderer-element"])
      }), import_react.default.createElement("div", {
        ref: (i) => {
          this.eventTracker = i;
        },
        className: nr("track-renderer-events", QO["track-renderer-events"])
      }, this.currentProps.children));
    }
  }]), r;
}(import_react.default.Component);
CL.defaultProps = {
  pluginDataFetchers: {},
  pluginTracks: {},
  canvasElement: null,
  centerHeight: 0,
  centerWidth: 0,
  children: [],
  galleryDim: 0,
  height: 0,
  initialXDomain: [],
  initialYDomain: [],
  isShowGlobalMousePosition: false,
  isRangeSelection: false,
  leftWidth: 0,
  leftWidthNoGallery: 0,
  paddingLeft: 0,
  paddingTop: 0,
  positionedTracks: [],
  topHeight: 0,
  topHeightNoGallery: 0,
  width: 0,
  metaTracks: []
};
CL.propTypes = {
  canvasElement: L.object,
  centerHeight: L.number,
  centerWidth: L.number,
  children: L.array,
  disableTrackMenu: L.bool,
  galleryDim: L.number,
  height: L.number,
  initialXDomain: L.array,
  initialYDomain: L.array,
  isShowGlobalMousePosition: L.bool,
  isRangeSelection: L.bool,
  leftWidth: L.number,
  leftWidthNoGallery: L.number,
  paddingLeft: L.number,
  paddingTop: L.number,
  metaTracks: L.array,
  onMouseMoveZoom: L.func,
  onNewTilesLoaded: L.func.isRequired,
  onScalesChanged: L.func.isRequired,
  pixiRenderer: L.object.isRequired,
  pixiStage: L.object.isRequired,
  pluginDataFetchers: L.object,
  pluginTracks: L.object,
  positionedTracks: L.array,
  pubSub: L.object.isRequired,
  setCentersFunction: L.func,
  svgElement: L.object.isRequired,
  theme: L.symbol.isRequired,
  topHeight: L.number,
  topHeightNoGallery: L.number,
  viewOptions: L.object,
  width: L.number,
  xDomainLimits: L.array,
  yDomainLimits: L.array,
  valueScaleZoom: L.bool,
  zoomable: L.bool.isRequired,
  zoomDomain: L.array,
  uid: L.string,
  zoomLimits: L.array
};
var _Qe = yp(lh(CL));
var nee = { exports: {} };
(function(e12, t) {
  (function(r, n) {
    e12.exports = n(import_react.default);
  })(self, (r) => (() => {
    var n = {
      4184: (s, l) => {
        var u;
        (function() {
          var c = {}.hasOwnProperty;
          function f() {
            for (var h = [], d = 0; d < arguments.length; d++) {
              var p = arguments[d];
              if (p) {
                var m = typeof p;
                if (m === "string" || m === "number")
                  h.push(p);
                else if (Array.isArray(p)) {
                  if (p.length) {
                    var g = f.apply(null, p);
                    g && h.push(g);
                  }
                } else if (m === "object")
                  if (p.toString === Object.prototype.toString)
                    for (var v in p)
                      c.call(p, v) && p[v] && h.push(v);
                  else
                    h.push(p.toString());
              }
            }
            return h.join(" ");
          }
          s.exports ? (f.default = f, s.exports = f) : (u = (function() {
            return f;
          }).apply(l, [])) === void 0 || (s.exports = u);
        })();
      },
      8552: (s, l, u) => {
        var c = u(852)(u(5639), "DataView");
        s.exports = c;
      },
      1989: (s, l, u) => {
        var c = u(1789), f = u(401), h = u(7667), d = u(1327), p = u(1866);
        function m(g) {
          var v = -1, _ = g == null ? 0 : g.length;
          for (this.clear(); ++v < _; ) {
            var y = g[v];
            this.set(y[0], y[1]);
          }
        }
        m.prototype.clear = c, m.prototype.delete = f, m.prototype.get = h, m.prototype.has = d, m.prototype.set = p, s.exports = m;
      },
      8407: (s, l, u) => {
        var c = u(7040), f = u(4125), h = u(2117), d = u(7518), p = u(4705);
        function m(g) {
          var v = -1, _ = g == null ? 0 : g.length;
          for (this.clear(); ++v < _; ) {
            var y = g[v];
            this.set(y[0], y[1]);
          }
        }
        m.prototype.clear = c, m.prototype.delete = f, m.prototype.get = h, m.prototype.has = d, m.prototype.set = p, s.exports = m;
      },
      7071: (s, l, u) => {
        var c = u(852)(u(5639), "Map");
        s.exports = c;
      },
      3369: (s, l, u) => {
        var c = u(4785), f = u(1285), h = u(6e3), d = u(9916), p = u(5265);
        function m(g) {
          var v = -1, _ = g == null ? 0 : g.length;
          for (this.clear(); ++v < _; ) {
            var y = g[v];
            this.set(y[0], y[1]);
          }
        }
        m.prototype.clear = c, m.prototype.delete = f, m.prototype.get = h, m.prototype.has = d, m.prototype.set = p, s.exports = m;
      },
      3818: (s, l, u) => {
        var c = u(852)(u(5639), "Promise");
        s.exports = c;
      },
      8525: (s, l, u) => {
        var c = u(852)(u(5639), "Set");
        s.exports = c;
      },
      8668: (s, l, u) => {
        var c = u(3369), f = u(619), h = u(2385);
        function d(p) {
          var m = -1, g = p == null ? 0 : p.length;
          for (this.__data__ = new c(); ++m < g; )
            this.add(p[m]);
        }
        d.prototype.add = d.prototype.push = f, d.prototype.has = h, s.exports = d;
      },
      6384: (s, l, u) => {
        var c = u(8407), f = u(7465), h = u(3779), d = u(7599), p = u(4758), m = u(4309);
        function g(v) {
          var _ = this.__data__ = new c(v);
          this.size = _.size;
        }
        g.prototype.clear = f, g.prototype.delete = h, g.prototype.get = d, g.prototype.has = p, g.prototype.set = m, s.exports = g;
      },
      2705: (s, l, u) => {
        var c = u(5639).Symbol;
        s.exports = c;
      },
      1149: (s, l, u) => {
        var c = u(5639).Uint8Array;
        s.exports = c;
      },
      577: (s, l, u) => {
        var c = u(852)(u(5639), "WeakMap");
        s.exports = c;
      },
      4963: (s) => {
        s.exports = function(l, u) {
          for (var c = -1, f = l == null ? 0 : l.length, h = 0, d = []; ++c < f; ) {
            var p = l[c];
            u(p, c, l) && (d[h++] = p);
          }
          return d;
        };
      },
      4636: (s, l, u) => {
        var c = u(2545), f = u(5694), h = u(1469), d = u(4144), p = u(5776), m = u(6719), g = Object.prototype.hasOwnProperty;
        s.exports = function(v, _) {
          var y = h(v), b = !y && f(v), T = !y && !b && d(v), E = !y && !b && !T && m(v), P = y || b || T || E, A = P ? c(v.length, String) : [], I = A.length;
          for (var x in v)
            !_ && !g.call(v, x) || P && (x == "length" || T && (x == "offset" || x == "parent") || E && (x == "buffer" || x == "byteLength" || x == "byteOffset") || p(x, I)) || A.push(x);
          return A;
        };
      },
      2488: (s) => {
        s.exports = function(l, u) {
          for (var c = -1, f = u.length, h = l.length; ++c < f; )
            l[h + c] = u[c];
          return l;
        };
      },
      2908: (s) => {
        s.exports = function(l, u) {
          for (var c = -1, f = l == null ? 0 : l.length; ++c < f; )
            if (u(l[c], c, l))
              return true;
          return false;
        };
      },
      8470: (s, l, u) => {
        var c = u(7813);
        s.exports = function(f, h) {
          for (var d = f.length; d--; )
            if (c(f[d][0], h))
              return d;
          return -1;
        };
      },
      8866: (s, l, u) => {
        var c = u(2488), f = u(1469);
        s.exports = function(h, d, p) {
          var m = d(h);
          return f(h) ? m : c(m, p(h));
        };
      },
      4239: (s, l, u) => {
        var c = u(2705), f = u(9607), h = u(2333), d = c ? c.toStringTag : void 0;
        s.exports = function(p) {
          return p == null ? p === void 0 ? "[object Undefined]" : "[object Null]" : d && d in Object(p) ? f(p) : h(p);
        };
      },
      9454: (s, l, u) => {
        var c = u(4239), f = u(7005);
        s.exports = function(h) {
          return f(h) && c(h) == "[object Arguments]";
        };
      },
      939: (s, l, u) => {
        var c = u(2492), f = u(7005);
        s.exports = function h(d, p, m, g, v) {
          return d === p || (d == null || p == null || !f(d) && !f(p) ? d != d && p != p : c(d, p, m, g, h, v));
        };
      },
      2492: (s, l, u) => {
        var c = u(6384), f = u(7114), h = u(8351), d = u(6096), p = u(4160), m = u(1469), g = u(4144), v = u(6719), _ = "[object Arguments]", y = "[object Array]", b = "[object Object]", T = Object.prototype.hasOwnProperty;
        s.exports = function(E, P, A, I, x, S) {
          var N = m(E), B = m(P), w = N ? y : p(E), R = B ? y : p(P), F = (w = w == _ ? b : w) == b, $ = (R = R == _ ? b : R) == b, K = w == R;
          if (K && g(E)) {
            if (!g(P))
              return false;
            N = true, F = false;
          }
          if (K && !F)
            return S || (S = new c()), N || v(E) ? f(E, P, A, I, x, S) : h(E, P, w, A, I, x, S);
          if (!(1 & A)) {
            var se = F && T.call(E, "__wrapped__"), J = $ && T.call(P, "__wrapped__");
            if (se || J) {
              var me = se ? E.value() : E, ae = J ? P.value() : P;
              return S || (S = new c()), x(me, ae, A, I, S);
            }
          }
          return !!K && (S || (S = new c()), d(E, P, A, I, x, S));
        };
      },
      8458: (s, l, u) => {
        var c = u(3560), f = u(5346), h = u(3218), d = u(346), p = /^\[object .+?Constructor\]$/, m = Function.prototype, g = Object.prototype, v = m.toString, _ = g.hasOwnProperty, y = RegExp("^" + v.call(_).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
        s.exports = function(b) {
          return !(!h(b) || f(b)) && (c(b) ? y : p).test(d(b));
        };
      },
      8749: (s, l, u) => {
        var c = u(4239), f = u(1780), h = u(7005), d = {};
        d["[object Float32Array]"] = d["[object Float64Array]"] = d["[object Int8Array]"] = d["[object Int16Array]"] = d["[object Int32Array]"] = d["[object Uint8Array]"] = d["[object Uint8ClampedArray]"] = d["[object Uint16Array]"] = d["[object Uint32Array]"] = true, d["[object Arguments]"] = d["[object Array]"] = d["[object ArrayBuffer]"] = d["[object Boolean]"] = d["[object DataView]"] = d["[object Date]"] = d["[object Error]"] = d["[object Function]"] = d["[object Map]"] = d["[object Number]"] = d["[object Object]"] = d["[object RegExp]"] = d["[object Set]"] = d["[object String]"] = d["[object WeakMap]"] = false, s.exports = function(p) {
          return h(p) && f(p.length) && !!d[c(p)];
        };
      },
      280: (s, l, u) => {
        var c = u(5726), f = u(6916), h = Object.prototype.hasOwnProperty;
        s.exports = function(d) {
          if (!c(d))
            return f(d);
          var p = [];
          for (var m in Object(d))
            h.call(d, m) && m != "constructor" && p.push(m);
          return p;
        };
      },
      2545: (s) => {
        s.exports = function(l, u) {
          for (var c = -1, f = Array(l); ++c < l; )
            f[c] = u(c);
          return f;
        };
      },
      1717: (s) => {
        s.exports = function(l) {
          return function(u) {
            return l(u);
          };
        };
      },
      4757: (s) => {
        s.exports = function(l, u) {
          return l.has(u);
        };
      },
      4429: (s, l, u) => {
        var c = u(5639)["__core-js_shared__"];
        s.exports = c;
      },
      7114: (s, l, u) => {
        var c = u(8668), f = u(2908), h = u(4757);
        s.exports = function(d, p, m, g, v, _) {
          var y = 1 & m, b = d.length, T = p.length;
          if (b != T && !(y && T > b))
            return false;
          var E = _.get(d), P = _.get(p);
          if (E && P)
            return E == p && P == d;
          var A = -1, I = true, x = 2 & m ? new c() : void 0;
          for (_.set(d, p), _.set(p, d); ++A < b; ) {
            var S = d[A], N = p[A];
            if (g)
              var B = y ? g(N, S, A, p, d, _) : g(S, N, A, d, p, _);
            if (B !== void 0) {
              if (B)
                continue;
              I = false;
              break;
            }
            if (x) {
              if (!f(p, function(w, R) {
                if (!h(x, R) && (S === w || v(S, w, m, g, _)))
                  return x.push(R);
              })) {
                I = false;
                break;
              }
            } else if (S !== N && !v(S, N, m, g, _)) {
              I = false;
              break;
            }
          }
          return _.delete(d), _.delete(p), I;
        };
      },
      8351: (s, l, u) => {
        var c = u(2705), f = u(1149), h = u(7813), d = u(7114), p = u(8776), m = u(1814), g = c ? c.prototype : void 0, v = g ? g.valueOf : void 0;
        s.exports = function(_, y, b, T, E, P, A) {
          switch (b) {
            case "[object DataView]":
              if (_.byteLength != y.byteLength || _.byteOffset != y.byteOffset)
                return false;
              _ = _.buffer, y = y.buffer;
            case "[object ArrayBuffer]":
              return !(_.byteLength != y.byteLength || !P(new f(_), new f(y)));
            case "[object Boolean]":
            case "[object Date]":
            case "[object Number]":
              return h(+_, +y);
            case "[object Error]":
              return _.name == y.name && _.message == y.message;
            case "[object RegExp]":
            case "[object String]":
              return _ == y + "";
            case "[object Map]":
              var I = p;
            case "[object Set]":
              var x = 1 & T;
              if (I || (I = m), _.size != y.size && !x)
                return false;
              var S = A.get(_);
              if (S)
                return S == y;
              T |= 2, A.set(_, y);
              var N = d(I(_), I(y), T, E, P, A);
              return A.delete(_), N;
            case "[object Symbol]":
              if (v)
                return v.call(_) == v.call(y);
          }
          return false;
        };
      },
      6096: (s, l, u) => {
        var c = u(8234), f = Object.prototype.hasOwnProperty;
        s.exports = function(h, d, p, m, g, v) {
          var _ = 1 & p, y = c(h), b = y.length;
          if (b != c(d).length && !_)
            return false;
          for (var T = b; T--; ) {
            var E = y[T];
            if (!(_ ? E in d : f.call(d, E)))
              return false;
          }
          var P = v.get(h), A = v.get(d);
          if (P && A)
            return P == d && A == h;
          var I = true;
          v.set(h, d), v.set(d, h);
          for (var x = _; ++T < b; ) {
            var S = h[E = y[T]], N = d[E];
            if (m)
              var B = _ ? m(N, S, E, d, h, v) : m(S, N, E, h, d, v);
            if (!(B === void 0 ? S === N || g(S, N, p, m, v) : B)) {
              I = false;
              break;
            }
            x || (x = E == "constructor");
          }
          if (I && !x) {
            var w = h.constructor, R = d.constructor;
            w == R || !("constructor" in h) || !("constructor" in d) || typeof w == "function" && w instanceof w && typeof R == "function" && R instanceof R || (I = false);
          }
          return v.delete(h), v.delete(d), I;
        };
      },
      1957: (s, l, u) => {
        var c = typeof u.g == "object" && u.g && u.g.Object === Object && u.g;
        s.exports = c;
      },
      8234: (s, l, u) => {
        var c = u(8866), f = u(9551), h = u(3674);
        s.exports = function(d) {
          return c(d, h, f);
        };
      },
      5050: (s, l, u) => {
        var c = u(7019);
        s.exports = function(f, h) {
          var d = f.__data__;
          return c(h) ? d[typeof h == "string" ? "string" : "hash"] : d.map;
        };
      },
      852: (s, l, u) => {
        var c = u(8458), f = u(7801);
        s.exports = function(h, d) {
          var p = f(h, d);
          return c(p) ? p : void 0;
        };
      },
      9607: (s, l, u) => {
        var c = u(2705), f = Object.prototype, h = f.hasOwnProperty, d = f.toString, p = c ? c.toStringTag : void 0;
        s.exports = function(m) {
          var g = h.call(m, p), v = m[p];
          try {
            m[p] = void 0;
            var _ = true;
          } catch {
          }
          var y = d.call(m);
          return _ && (g ? m[p] = v : delete m[p]), y;
        };
      },
      9551: (s, l, u) => {
        var c = u(4963), f = u(479), h = Object.prototype.propertyIsEnumerable, d = Object.getOwnPropertySymbols, p = d ? function(m) {
          return m == null ? [] : (m = Object(m), c(d(m), function(g) {
            return h.call(m, g);
          }));
        } : f;
        s.exports = p;
      },
      4160: (s, l, u) => {
        var c = u(8552), f = u(7071), h = u(3818), d = u(8525), p = u(577), m = u(4239), g = u(346), v = "[object Map]", _ = "[object Promise]", y = "[object Set]", b = "[object WeakMap]", T = "[object DataView]", E = g(c), P = g(f), A = g(h), I = g(d), x = g(p), S = m;
        (c && S(new c(new ArrayBuffer(1))) != T || f && S(new f()) != v || h && S(h.resolve()) != _ || d && S(new d()) != y || p && S(new p()) != b) && (S = function(N) {
          var B = m(N), w = B == "[object Object]" ? N.constructor : void 0, R = w ? g(w) : "";
          if (R)
            switch (R) {
              case E:
                return T;
              case P:
                return v;
              case A:
                return _;
              case I:
                return y;
              case x:
                return b;
            }
          return B;
        }), s.exports = S;
      },
      7801: (s) => {
        s.exports = function(l, u) {
          return l == null ? void 0 : l[u];
        };
      },
      1789: (s, l, u) => {
        var c = u(4536);
        s.exports = function() {
          this.__data__ = c ? c(null) : {}, this.size = 0;
        };
      },
      401: (s) => {
        s.exports = function(l) {
          var u = this.has(l) && delete this.__data__[l];
          return this.size -= u ? 1 : 0, u;
        };
      },
      7667: (s, l, u) => {
        var c = u(4536), f = Object.prototype.hasOwnProperty;
        s.exports = function(h) {
          var d = this.__data__;
          if (c) {
            var p = d[h];
            return p === "__lodash_hash_undefined__" ? void 0 : p;
          }
          return f.call(d, h) ? d[h] : void 0;
        };
      },
      1327: (s, l, u) => {
        var c = u(4536), f = Object.prototype.hasOwnProperty;
        s.exports = function(h) {
          var d = this.__data__;
          return c ? d[h] !== void 0 : f.call(d, h);
        };
      },
      1866: (s, l, u) => {
        var c = u(4536);
        s.exports = function(f, h) {
          var d = this.__data__;
          return this.size += this.has(f) ? 0 : 1, d[f] = c && h === void 0 ? "__lodash_hash_undefined__" : h, this;
        };
      },
      5776: (s) => {
        var l = /^(?:0|[1-9]\d*)$/;
        s.exports = function(u, c) {
          var f = typeof u;
          return !!(c = c ?? 9007199254740991) && (f == "number" || f != "symbol" && l.test(u)) && u > -1 && u % 1 == 0 && u < c;
        };
      },
      7019: (s) => {
        s.exports = function(l) {
          var u = typeof l;
          return u == "string" || u == "number" || u == "symbol" || u == "boolean" ? l !== "__proto__" : l === null;
        };
      },
      5346: (s, l, u) => {
        var c, f = u(4429), h = (c = /[^.]+$/.exec(f && f.keys && f.keys.IE_PROTO || "")) ? "Symbol(src)_1." + c : "";
        s.exports = function(d) {
          return !!h && h in d;
        };
      },
      5726: (s) => {
        var l = Object.prototype;
        s.exports = function(u) {
          var c = u && u.constructor;
          return u === (typeof c == "function" && c.prototype || l);
        };
      },
      7040: (s) => {
        s.exports = function() {
          this.__data__ = [], this.size = 0;
        };
      },
      4125: (s, l, u) => {
        var c = u(8470), f = Array.prototype.splice;
        s.exports = function(h) {
          var d = this.__data__, p = c(d, h);
          return !(p < 0 || (p == d.length - 1 ? d.pop() : f.call(d, p, 1), --this.size, 0));
        };
      },
      2117: (s, l, u) => {
        var c = u(8470);
        s.exports = function(f) {
          var h = this.__data__, d = c(h, f);
          return d < 0 ? void 0 : h[d][1];
        };
      },
      7518: (s, l, u) => {
        var c = u(8470);
        s.exports = function(f) {
          return c(this.__data__, f) > -1;
        };
      },
      4705: (s, l, u) => {
        var c = u(8470);
        s.exports = function(f, h) {
          var d = this.__data__, p = c(d, f);
          return p < 0 ? (++this.size, d.push([f, h])) : d[p][1] = h, this;
        };
      },
      4785: (s, l, u) => {
        var c = u(1989), f = u(8407), h = u(7071);
        s.exports = function() {
          this.size = 0, this.__data__ = {
            hash: new c(),
            map: new (h || f)(),
            string: new c()
          };
        };
      },
      1285: (s, l, u) => {
        var c = u(5050);
        s.exports = function(f) {
          var h = c(this, f).delete(f);
          return this.size -= h ? 1 : 0, h;
        };
      },
      6e3: (s, l, u) => {
        var c = u(5050);
        s.exports = function(f) {
          return c(this, f).get(f);
        };
      },
      9916: (s, l, u) => {
        var c = u(5050);
        s.exports = function(f) {
          return c(this, f).has(f);
        };
      },
      5265: (s, l, u) => {
        var c = u(5050);
        s.exports = function(f, h) {
          var d = c(this, f), p = d.size;
          return d.set(f, h), this.size += d.size == p ? 0 : 1, this;
        };
      },
      8776: (s) => {
        s.exports = function(l) {
          var u = -1, c = Array(l.size);
          return l.forEach(function(f, h) {
            c[++u] = [h, f];
          }), c;
        };
      },
      4536: (s, l, u) => {
        var c = u(852)(Object, "create");
        s.exports = c;
      },
      6916: (s, l, u) => {
        var c = u(5569)(Object.keys, Object);
        s.exports = c;
      },
      1167: (s, l, u) => {
        s = u.nmd(s);
        var c = u(1957), f = l && !l.nodeType && l, h = f && s && !s.nodeType && s, d = h && h.exports === f && c.process, p = function() {
          try {
            return h && h.require && h.require("util").types || d && d.binding && d.binding("util");
          } catch {
          }
        }();
        s.exports = p;
      },
      2333: (s) => {
        var l = Object.prototype.toString;
        s.exports = function(u) {
          return l.call(u);
        };
      },
      5569: (s) => {
        s.exports = function(l, u) {
          return function(c) {
            return l(u(c));
          };
        };
      },
      5639: (s, l, u) => {
        var c = u(1957), f = typeof self == "object" && self && self.Object === Object && self, h = c || f || Function("return this")();
        s.exports = h;
      },
      619: (s) => {
        s.exports = function(l) {
          return this.__data__.set(l, "__lodash_hash_undefined__"), this;
        };
      },
      2385: (s) => {
        s.exports = function(l) {
          return this.__data__.has(l);
        };
      },
      1814: (s) => {
        s.exports = function(l) {
          var u = -1, c = Array(l.size);
          return l.forEach(function(f) {
            c[++u] = f;
          }), c;
        };
      },
      7465: (s, l, u) => {
        var c = u(8407);
        s.exports = function() {
          this.__data__ = new c(), this.size = 0;
        };
      },
      3779: (s) => {
        s.exports = function(l) {
          var u = this.__data__, c = u.delete(l);
          return this.size = u.size, c;
        };
      },
      7599: (s) => {
        s.exports = function(l) {
          return this.__data__.get(l);
        };
      },
      4758: (s) => {
        s.exports = function(l) {
          return this.__data__.has(l);
        };
      },
      4309: (s, l, u) => {
        var c = u(8407), f = u(7071), h = u(3369);
        s.exports = function(d, p) {
          var m = this.__data__;
          if (m instanceof c) {
            var g = m.__data__;
            if (!f || g.length < 199)
              return g.push([d, p]), this.size = ++m.size, this;
            m = this.__data__ = new h(g);
          }
          return m.set(d, p), this.size = m.size, this;
        };
      },
      346: (s) => {
        var l = Function.prototype.toString;
        s.exports = function(u) {
          if (u != null) {
            try {
              return l.call(u);
            } catch {
            }
            try {
              return u + "";
            } catch {
            }
          }
          return "";
        };
      },
      7813: (s) => {
        s.exports = function(l, u) {
          return l === u || l != l && u != u;
        };
      },
      5694: (s, l, u) => {
        var c = u(9454), f = u(7005), h = Object.prototype, d = h.hasOwnProperty, p = h.propertyIsEnumerable, m = c(/* @__PURE__ */ function() {
          return arguments;
        }()) ? c : function(g) {
          return f(g) && d.call(g, "callee") && !p.call(g, "callee");
        };
        s.exports = m;
      },
      1469: (s) => {
        var l = Array.isArray;
        s.exports = l;
      },
      8612: (s, l, u) => {
        var c = u(3560), f = u(1780);
        s.exports = function(h) {
          return h != null && f(h.length) && !c(h);
        };
      },
      4144: (s, l, u) => {
        s = u.nmd(s);
        var c = u(5639), f = u(5062), h = l && !l.nodeType && l, d = h && s && !s.nodeType && s, p = d && d.exports === h ? c.Buffer : void 0, m = (p ? p.isBuffer : void 0) || f;
        s.exports = m;
      },
      8446: (s, l, u) => {
        var c = u(939);
        s.exports = function(f, h) {
          return c(f, h);
        };
      },
      3560: (s, l, u) => {
        var c = u(4239), f = u(3218);
        s.exports = function(h) {
          if (!f(h))
            return false;
          var d = c(h);
          return d == "[object Function]" || d == "[object GeneratorFunction]" || d == "[object AsyncFunction]" || d == "[object Proxy]";
        };
      },
      1780: (s) => {
        s.exports = function(l) {
          return typeof l == "number" && l > -1 && l % 1 == 0 && l <= 9007199254740991;
        };
      },
      3218: (s) => {
        s.exports = function(l) {
          var u = typeof l;
          return l != null && (u == "object" || u == "function");
        };
      },
      7005: (s) => {
        s.exports = function(l) {
          return l != null && typeof l == "object";
        };
      },
      6719: (s, l, u) => {
        var c = u(8749), f = u(1717), h = u(1167), d = h && h.isTypedArray, p = d ? f(d) : c;
        s.exports = p;
      },
      3674: (s, l, u) => {
        var c = u(4636), f = u(280), h = u(8612);
        s.exports = function(d) {
          return h(d) ? c(d) : f(d);
        };
      },
      8306: (s, l, u) => {
        var c = u(3369);
        function f(h, d) {
          if (typeof h != "function" || d != null && typeof d != "function")
            throw new TypeError("Expected a function");
          var p = function() {
            var m = arguments, g = d ? d.apply(this, m) : m[0], v = p.cache;
            if (v.has(g))
              return v.get(g);
            var _ = h.apply(this, m);
            return p.cache = v.set(g, _) || v, _;
          };
          return p.cache = new (f.Cache || c)(), p;
        }
        f.Cache = c, s.exports = f;
      },
      479: (s) => {
        s.exports = function() {
          return [];
        };
      },
      5062: (s) => {
        s.exports = function() {
          return false;
        };
      },
      2703: (s, l, u) => {
        var c = u(414);
        function f() {
        }
        function h() {
        }
        h.resetWarningCache = f, s.exports = function() {
          function d(g, v, _, y, b, T) {
            if (T !== c) {
              var E = new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");
              throw E.name = "Invariant Violation", E;
            }
          }
          function p() {
            return d;
          }
          d.isRequired = d;
          var m = {
            array: d,
            bigint: d,
            bool: d,
            func: d,
            number: d,
            object: d,
            string: d,
            symbol: d,
            any: d,
            arrayOf: p,
            element: d,
            elementType: d,
            instanceOf: p,
            node: d,
            objectOf: p,
            oneOf: p,
            oneOfType: p,
            shape: p,
            exact: p,
            checkPropTypes: h,
            resetWarningCache: f
          };
          return m.PropTypes = m, m;
        };
      },
      5697: (s, l, u) => {
        s.exports = u(2703)();
      },
      414: (s) => {
        s.exports = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";
      },
      9787: (s) => {
        s.exports = r;
      }
    }, i = {};
    function o(s) {
      var l = i[s];
      if (l !== void 0)
        return l.exports;
      var u = i[s] = {
        id: s,
        loaded: false,
        exports: {}
      };
      return n[s](u, u.exports, o), u.loaded = true, u.exports;
    }
    o.n = (s) => {
      var l = s && s.__esModule ? () => s.default : () => s;
      return o.d(l, {
        a: l
      }), l;
    }, o.d = (s, l) => {
      for (var u in l)
        o.o(l, u) && !o.o(s, u) && Object.defineProperty(s, u, {
          enumerable: true,
          get: l[u]
        });
    }, o.g = function() {
      if (typeof globalThis == "object")
        return globalThis;
      try {
        return this || new Function("return this")();
      } catch {
        if (typeof window == "object")
          return window;
      }
    }(), o.o = (s, l) => Object.prototype.hasOwnProperty.call(s, l), o.r = (s) => {
      typeof Symbol < "u" && Symbol.toStringTag && Object.defineProperty(s, Symbol.toStringTag, {
        value: "Module"
      }), Object.defineProperty(s, "__esModule", {
        value: true
      });
    }, o.nmd = (s) => (s.paths = [], s.children || (s.children = []), s);
    var a = {};
    return (() => {
      o.r(a), o.d(a, {
        default: () => ge,
        expandNodesToLevel: () => Z
      });
      var s = o(4184), l = o.n(s), u = o(8446), c = o.n(u), f = o(8306), h = o.n(f);
      let d = (q = 21) => crypto.getRandomValues(new Uint8Array(q)).reduce((W, j) => W + ((j &= 63) < 36 ? j.toString(36) : j < 62 ? (j - 26).toString(36).toUpperCase() : j > 62 ? "-" : "_"), "");
      var p = o(5697), m = o.n(p), g = o(9787), v = o.n(g);
      function _(q) {
        return _ = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(W) {
          return typeof W;
        } : function(W) {
          return W && typeof Symbol == "function" && W.constructor === Symbol && W !== Symbol.prototype ? "symbol" : typeof W;
        }, _(q);
      }
      var y = ["children", "title"];
      function b() {
        return b = Object.assign ? Object.assign.bind() : function(q) {
          for (var W = 1; W < arguments.length; W++) {
            var j = arguments[W];
            for (var G in j)
              Object.prototype.hasOwnProperty.call(j, G) && (q[G] = j[G]);
          }
          return q;
        }, b.apply(this, arguments);
      }
      function T(q, W) {
        if (!(q instanceof W))
          throw new TypeError("Cannot call a class as a function");
      }
      function E(q, W) {
        for (var j = 0; j < W.length; j++) {
          var G = W[j];
          G.enumerable = G.enumerable || false, G.configurable = true, "value" in G && (G.writable = true), Object.defineProperty(q, G.key, G);
        }
      }
      function P(q, W) {
        return P = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(j, G) {
          return j.__proto__ = G, j;
        }, P(q, W);
      }
      function A(q, W) {
        if (W && (_(W) === "object" || typeof W == "function"))
          return W;
        if (W !== void 0)
          throw new TypeError("Derived constructors may only return object or undefined");
        return function(j) {
          if (j === void 0)
            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return j;
        }(q);
      }
      function I(q) {
        return I = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(W) {
          return W.__proto__ || Object.getPrototypeOf(W);
        }, I(q);
      }
      function x(q, W, j) {
        return W in q ? Object.defineProperty(q, W, {
          value: j,
          enumerable: true,
          configurable: true,
          writable: true
        }) : q[W] = j, q;
      }
      var S = function(q) {
        (function(Te, pe) {
          if (typeof pe != "function" && pe !== null)
            throw new TypeError("Super expression must either be null or a function");
          Te.prototype = Object.create(pe && pe.prototype, {
            constructor: {
              value: Te,
              writable: true,
              configurable: true
            }
          }), Object.defineProperty(Te, "prototype", {
            writable: false
          }), pe && P(Te, pe);
        })(ve, q);
        var W, j, G, ue, ye = (G = ve, ue = function() {
          if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
            })), true;
          } catch {
            return false;
          }
        }(), function() {
          var Te, pe = I(G);
          if (ue) {
            var be = I(this).constructor;
            Te = Reflect.construct(pe, arguments, be);
          } else
            Te = pe.apply(this, arguments);
          return A(this, Te);
        });
        function ve() {
          return T(this, ve), ye.apply(this, arguments);
        }
        return W = ve, (j = [{
          key: "render",
          value: function() {
            var Te = this.props, pe = Te.children, be = Te.title, z = function(U, ie) {
              if (U == null)
                return {};
              var Ee, Oe, Ye = function(dt, At) {
                if (dt == null)
                  return {};
                var Yt, Tt, Ut = {}, or = Object.keys(dt);
                for (Tt = 0; Tt < or.length; Tt++)
                  Yt = or[Tt], At.indexOf(Yt) >= 0 || (Ut[Yt] = dt[Yt]);
                return Ut;
              }(U, ie);
              if (Object.getOwnPropertySymbols) {
                var qe = Object.getOwnPropertySymbols(U);
                for (Oe = 0; Oe < qe.length; Oe++)
                  Ee = qe[Oe], ie.indexOf(Ee) >= 0 || Object.prototype.propertyIsEnumerable.call(U, Ee) && (Ye[Ee] = U[Ee]);
              }
              return Ye;
            }(Te, y);
            return v().createElement("button", b({
              "aria-label": be,
              title: be,
              type: "button"
            }, z), pe);
          }
        }]) && E(W.prototype, j), Object.defineProperty(W, "prototype", {
          writable: false
        }), ve;
      }(v().PureComponent);
      x(S, "propTypes", {
        children: m().node.isRequired,
        title: m().string
      }), x(S, "defaultProps", {
        title: null
      });
      const N = S, B = {
        ALL: "all",
        PARENT: "parent",
        LEAF: "leaf"
      };
      function w(q) {
        this.message = q, this.stack = Error().stack;
      }
      w.prototype = Object.create(Error.prototype), w.prototype.name = "CheckboxTreeError";
      const R = w;
      function F(q, W) {
        var j = Object.keys(q);
        if (Object.getOwnPropertySymbols) {
          var G = Object.getOwnPropertySymbols(q);
          W && (G = G.filter(function(ue) {
            return Object.getOwnPropertyDescriptor(q, ue).enumerable;
          })), j.push.apply(j, G);
        }
        return j;
      }
      function $(q, W, j) {
        return W in q ? Object.defineProperty(q, W, {
          value: j,
          enumerable: true,
          configurable: true,
          writable: true
        }) : q[W] = j, q;
      }
      function K(q, W) {
        if (!(q instanceof W))
          throw new TypeError("Cannot call a class as a function");
      }
      function se(q, W) {
        for (var j = 0; j < W.length; j++) {
          var G = W[j];
          G.enumerable = G.enumerable || false, G.configurable = true, "value" in G && (G.writable = true), Object.defineProperty(q, G.key, G);
        }
      }
      var J = B;
      const me = function() {
        function q(G) {
          var ue = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
          K(this, q), this.props = G, this.flatNodes = ue;
        }
        var W, j;
        return W = q, j = [{
          key: "setProps",
          value: function(G) {
            this.props = G;
          }
        }, {
          key: "clone",
          value: function() {
            var G = this, ue = {};
            return Object.keys(this.flatNodes).forEach(function(ye) {
              var ve = G.flatNodes[ye];
              ue[ye] = function(Te) {
                for (var pe = 1; pe < arguments.length; pe++) {
                  var be = arguments[pe] != null ? arguments[pe] : {};
                  pe % 2 ? F(Object(be), true).forEach(function(z) {
                    $(Te, z, be[z]);
                  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(Te, Object.getOwnPropertyDescriptors(be)) : F(Object(be)).forEach(function(z) {
                    Object.defineProperty(Te, z, Object.getOwnPropertyDescriptor(be, z));
                  });
                }
                return Te;
              }({}, ve);
            }), new q(this.props, ue);
          }
        }, {
          key: "getNode",
          value: function(G) {
            return this.flatNodes[G];
          }
        }, {
          key: "reset",
          value: function() {
            this.flatNodes = {};
          }
        }, {
          key: "flattenNodes",
          value: function(G) {
            var ue = this, ye = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, ve = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;
            if (Array.isArray(G) && G.length !== 0) {
              var Te = this.props, pe = Te.disabled, be = Te.noCascade;
              G.forEach(function(z, U) {
                var ie = ue.nodeHasChildren(z);
                if (ue.flatNodes[z.value] !== void 0)
                  throw new R("Duplicate value '".concat(z.value, "' detected. All node values must be unique."));
                ue.flatNodes[z.value] = {
                  label: z.label,
                  value: z.value,
                  children: z.children,
                  parent: ye,
                  isChild: ye.value !== void 0,
                  isParent: ie,
                  isLeaf: !ie,
                  showCheckbox: z.showCheckbox === void 0 || z.showCheckbox,
                  disabled: ue.getDisabledState(z, ye, pe, be),
                  treeDepth: ve,
                  index: U
                }, ue.flattenNodes(z.children, z, ve + 1);
              });
            }
          }
        }, {
          key: "nodeHasChildren",
          value: function(G) {
            return Array.isArray(G.children);
          }
        }, {
          key: "getDisabledState",
          value: function(G, ue, ye, ve) {
            return !!ye || !(ve || !ue.disabled) || !!G.disabled;
          }
        }, {
          key: "deserializeLists",
          value: function(G) {
            var ue = this, ye = ["checked", "expanded"];
            Object.keys(this.flatNodes).forEach(function(ve) {
              ye.forEach(function(Te) {
                ue.flatNodes[ve][Te] = false;
              });
            }), ye.forEach(function(ve) {
              G[ve].forEach(function(Te) {
                ue.flatNodes[Te] !== void 0 && (ue.flatNodes[Te][ve] = true);
              });
            });
          }
        }, {
          key: "serializeList",
          value: function(G) {
            var ue = this, ye = [];
            return Object.keys(this.flatNodes).forEach(function(ve) {
              ue.flatNodes[ve][G] && ye.push(ve);
            }), ye;
          }
        }, {
          key: "expandAllNodes",
          value: function(G) {
            var ue = this;
            return Object.keys(this.flatNodes).forEach(function(ye) {
              ue.flatNodes[ye].isParent && (ue.flatNodes[ye].expanded = G);
            }), this;
          }
        }, {
          key: "toggleChecked",
          value: function(G, ue, ye, ve) {
            var Te = this, pe = !(arguments.length > 4 && arguments[4] !== void 0) || arguments[4], be = this.flatNodes[G.value], z = [J.PARENT, J.ALL].indexOf(ye) > -1, U = [J.LEAF, J.ALL].indexOf(ye) > -1;
            if (be.isLeaf || ve) {
              if (G.disabled)
                return this;
              this.toggleNode(G.value, "checked", ue);
            } else
              (z || be.children.length === 0) && this.toggleNode(G.value, "checked", ue), U && be.children.forEach(function(ie) {
                Te.toggleChecked(ie, ue, ye, ve, false);
              });
            return pe && !ve && be.isChild && z && this.toggleParentStatus(be.parent, ye), this;
          }
        }, {
          key: "toggleParentStatus",
          value: function(G, ue) {
            var ye = this.flatNodes[G.value];
            ye.isChild ? (ue === J.ALL && this.toggleNode(G.value, "checked", this.isEveryChildChecked(ye)), this.toggleParentStatus(ye.parent, ue)) : this.toggleNode(G.value, "checked", this.isEveryChildChecked(ye));
          }
        }, {
          key: "isEveryChildChecked",
          value: function(G) {
            var ue = this;
            return G.children.every(function(ye) {
              return ue.getNode(ye.value).checked;
            });
          }
        }, {
          key: "toggleNode",
          value: function(G, ue, ye) {
            return this.flatNodes[G][ue] = ye, this;
          }
        }], j && se(W.prototype, j), Object.defineProperty(W, "prototype", {
          writable: false
        }), q;
      }();
      function ae(q) {
        return ae = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(W) {
          return typeof W;
        } : function(W) {
          return W && typeof Symbol == "function" && W.constructor === Symbol && W !== Symbol.prototype ? "symbol" : typeof W;
        }, ae(q);
      }
      function Y() {
        return Y = Object.assign ? Object.assign.bind() : function(q) {
          for (var W = 1; W < arguments.length; W++) {
            var j = arguments[W];
            for (var G in j)
              Object.prototype.hasOwnProperty.call(j, G) && (q[G] = j[G]);
          }
          return q;
        }, Y.apply(this, arguments);
      }
      function Q(q, W) {
        var j = Object.keys(q);
        if (Object.getOwnPropertySymbols) {
          var G = Object.getOwnPropertySymbols(q);
          W && (G = G.filter(function(ue) {
            return Object.getOwnPropertyDescriptor(q, ue).enumerable;
          })), j.push.apply(j, G);
        }
        return j;
      }
      function le(q, W) {
        if (!(q instanceof W))
          throw new TypeError("Cannot call a class as a function");
      }
      function Se(q, W) {
        for (var j = 0; j < W.length; j++) {
          var G = W[j];
          G.enumerable = G.enumerable || false, G.configurable = true, "value" in G && (G.writable = true), Object.defineProperty(q, G.key, G);
        }
      }
      function Pe(q, W) {
        return Pe = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(j, G) {
          return j.__proto__ = G, j;
        }, Pe(q, W);
      }
      function Re(q, W) {
        if (W && (ae(W) === "object" || typeof W == "function"))
          return W;
        if (W !== void 0)
          throw new TypeError("Derived constructors may only return object or undefined");
        return function(j) {
          if (j === void 0)
            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return j;
        }(q);
      }
      function we(q) {
        return we = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(W) {
          return W.__proto__ || Object.getPrototypeOf(W);
        }, we(q);
      }
      function Ne(q, W, j) {
        return W in q ? Object.defineProperty(q, W, {
          value: j,
          enumerable: true,
          configurable: true,
          writable: true
        }) : q[W] = j, q;
      }
      var Me = function(q) {
        (function(Te, pe) {
          if (typeof pe != "function" && pe !== null)
            throw new TypeError("Super expression must either be null or a function");
          Te.prototype = Object.create(pe && pe.prototype, {
            constructor: {
              value: Te,
              writable: true,
              configurable: true
            }
          }), Object.defineProperty(Te, "prototype", {
            writable: false
          }), pe && Pe(Te, pe);
        })(ve, q);
        var W, j, G, ue, ye = (G = ve, ue = function() {
          if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
            })), true;
          } catch {
            return false;
          }
        }(), function() {
          var Te, pe = we(G);
          if (ue) {
            var be = we(this).constructor;
            Te = Reflect.construct(pe, arguments, be);
          } else
            Te = pe.apply(this, arguments);
          return Re(this, Te);
        });
        function ve() {
          return le(this, ve), ye.apply(this, arguments);
        }
        return W = ve, j = [{
          key: "componentDidMount",
          value: function() {
            this.updateDeterminateProperty();
          }
        }, {
          key: "componentDidUpdate",
          value: function() {
            this.updateDeterminateProperty();
          }
        }, {
          key: "updateDeterminateProperty",
          value: function() {
            var Te = this.props.indeterminate;
            this.checkbox.indeterminate = Te;
          }
        }, {
          key: "render",
          value: function() {
            var Te = this, pe = function(be) {
              for (var z = 1; z < arguments.length; z++) {
                var U = arguments[z] != null ? arguments[z] : {};
                z % 2 ? Q(Object(U), true).forEach(function(ie) {
                  Ne(be, ie, U[ie]);
                }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(be, Object.getOwnPropertyDescriptors(U)) : Q(Object(U)).forEach(function(ie) {
                  Object.defineProperty(be, ie, Object.getOwnPropertyDescriptor(U, ie));
                });
              }
              return be;
            }({}, this.props);
            return delete pe.indeterminate, v().createElement("input", Y({}, pe, {
              ref: function(be) {
                Te.checkbox = be;
              },
              type: "checkbox"
            }));
          }
        }], j && Se(W.prototype, j), Object.defineProperty(W, "prototype", {
          writable: false
        }), ve;
      }(v().PureComponent);
      Ne(Me, "propTypes", {
        indeterminate: m().bool
      }), Ne(Me, "defaultProps", {
        indeterminate: false
      });
      const Ie = Me, Ge = m().shape({
        check: m().node,
        uncheck: m().node,
        halfCheck: m().node,
        expandClose: m().node,
        expandOpen: m().node,
        expandAll: m().node,
        collapseAll: m().node,
        parentClose: m().node,
        parentOpen: m().node,
        leaf: m().node
      }), je = m().shape({
        collapseAll: m().string.isRequired,
        expandAll: m().string.isRequired,
        toggle: m().string.isRequired
      });
      function ot(q) {
        return ot = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(W) {
          return typeof W;
        } : function(W) {
          return W && typeof Symbol == "function" && W.constructor === Symbol && W !== Symbol.prototype ? "symbol" : typeof W;
        }, ot(q);
      }
      function at(q, W) {
        for (var j = 0; j < W.length; j++) {
          var G = W[j];
          G.enumerable = G.enumerable || false, G.configurable = true, "value" in G && (G.writable = true), Object.defineProperty(q, G.key, G);
        }
      }
      function Qe(q, W) {
        return Qe = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(j, G) {
          return j.__proto__ = G, j;
        }, Qe(q, W);
      }
      function bt(q, W) {
        if (W && (ot(W) === "object" || typeof W == "function"))
          return W;
        if (W !== void 0)
          throw new TypeError("Derived constructors may only return object or undefined");
        return Et(q);
      }
      function Et(q) {
        if (q === void 0)
          throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return q;
      }
      function $t(q) {
        return $t = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(W) {
          return W.__proto__ || Object.getPrototypeOf(W);
        }, $t(q);
      }
      function rn(q, W, j) {
        return W in q ? Object.defineProperty(q, W, {
          value: j,
          enumerable: true,
          configurable: true,
          writable: true
        }) : q[W] = j, q;
      }
      var Ht = function(q) {
        (function(Te, pe) {
          if (typeof pe != "function" && pe !== null)
            throw new TypeError("Super expression must either be null or a function");
          Te.prototype = Object.create(pe && pe.prototype, {
            constructor: {
              value: Te,
              writable: true,
              configurable: true
            }
          }), Object.defineProperty(Te, "prototype", {
            writable: false
          }), pe && Qe(Te, pe);
        })(ve, q);
        var W, j, G, ue, ye = (G = ve, ue = function() {
          if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
            })), true;
          } catch {
            return false;
          }
        }(), function() {
          var Te, pe = $t(G);
          if (ue) {
            var be = $t(this).constructor;
            Te = Reflect.construct(pe, arguments, be);
          } else
            Te = pe.apply(this, arguments);
          return bt(this, Te);
        });
        function ve(Te) {
          var pe;
          return function(be, z) {
            if (!(be instanceof z))
              throw new TypeError("Cannot call a class as a function");
          }(this, ve), (pe = ye.call(this, Te)).onCheck = pe.onCheck.bind(Et(pe)), pe.onCheckboxKeyPress = pe.onCheckboxKeyPress.bind(Et(pe)), pe.onCheckboxKeyUp = pe.onCheckboxKeyUp.bind(Et(pe)), pe.onClick = pe.onClick.bind(Et(pe)), pe.onExpand = pe.onExpand.bind(Et(pe)), pe;
        }
        return W = ve, (j = [{
          key: "onCheck",
          value: function() {
            var Te = this.props, pe = Te.value;
            (0, Te.onCheck)({
              value: pe,
              checked: this.getCheckState({
                toggle: true
              })
            });
          }
        }, {
          key: "onCheckboxKeyPress",
          value: function(Te) {
            Te.which === 32 && Te.preventDefault();
          }
        }, {
          key: "onCheckboxKeyUp",
          value: function(Te) {
            var pe = Te.keyCode;
            [13, 32].includes(pe) && this.onCheck();
          }
        }, {
          key: "onClick",
          value: function() {
            var Te = this.props, pe = Te.expandOnClick, be = Te.isParent, z = Te.value, U = Te.onClick;
            be && pe && this.onExpand(), U({
              value: z,
              checked: this.getCheckState({
                toggle: false
              })
            });
          }
        }, {
          key: "onExpand",
          value: function() {
            var Te = this.props, pe = Te.expanded, be = Te.value;
            (0, Te.onExpand)({
              value: be,
              expanded: !pe
            });
          }
        }, {
          key: "getCheckState",
          value: function(Te) {
            var pe = Te.toggle, be = this.props, z = be.checked, U = be.optimisticToggle;
            return !(z !== 0 || !pe) || z === 1 && !pe || z === 2 && U;
          }
        }, {
          key: "renderCollapseButton",
          value: function() {
            var Te = this.props, pe = Te.expandDisabled, be = Te.isLeaf, z = Te.lang;
            return be ? v().createElement("span", {
              className: "rct-collapse"
            }, v().createElement("span", {
              className: "rct-icon"
            })) : v().createElement(N, {
              className: "rct-collapse rct-collapse-btn",
              disabled: pe,
              title: z.toggle,
              onClick: this.onExpand
            }, this.renderCollapseIcon());
          }
        }, {
          key: "renderCollapseIcon",
          value: function() {
            var Te = this.props, pe = Te.expanded, be = Te.icons, z = be.expandClose, U = be.expandOpen;
            return pe ? U : z;
          }
        }, {
          key: "renderCheckboxIcon",
          value: function() {
            var Te = this.props, pe = Te.checked, be = Te.icons, z = be.uncheck, U = be.check, ie = be.halfCheck;
            return pe === 0 ? z : pe === 1 ? U : ie;
          }
        }, {
          key: "renderNodeIcon",
          value: function() {
            var Te = this.props, pe = Te.expanded, be = Te.icon, z = Te.icons, U = z.leaf, ie = z.parentClose, Ee = z.parentOpen, Oe = Te.isLeaf;
            return be !== null ? be : Oe ? U : pe ? Ee : ie;
          }
        }, {
          key: "renderBareLabel",
          value: function(Te) {
            var pe = this.props, be = pe.onClick, z = pe.title, U = be !== null;
            return v().createElement("span", {
              className: "rct-bare-label",
              title: z
            }, U ? v().createElement("span", {
              className: "rct-node-clickable",
              onClick: this.onClick,
              onKeyPress: this.onClick,
              role: "button",
              tabIndex: 0
            }, Te) : Te);
          }
        }, {
          key: "renderCheckboxLabel",
          value: function(Te) {
            var pe = this.props, be = pe.checked, z = pe.disabled, U = pe.title, ie = pe.treeId, Ee = pe.value, Oe = pe.onClick !== null, Ye = "".concat(ie, "-").concat(String(Ee).split(" ").join("_")), qe = [v().createElement("label", {
              key: 0,
              htmlFor: Ye,
              title: U
            }, v().createElement(Ie, {
              checked: be === 1,
              disabled: z,
              id: Ye,
              indeterminate: be === 2,
              onClick: this.onCheck,
              onChange: function() {
              }
            }), v().createElement("span", {
              "aria-checked": be === 1,
              "aria-disabled": z,
              className: "rct-checkbox",
              role: "checkbox",
              tabIndex: 0,
              onKeyPress: this.onCheckboxKeyPress,
              onKeyUp: this.onCheckboxKeyUp
            }, this.renderCheckboxIcon()), Oe ? null : Te)];
            return Oe && qe.push(v().createElement("span", {
              key: 1,
              className: "rct-node-clickable",
              onClick: this.onClick,
              onKeyPress: this.onClick,
              role: "link",
              tabIndex: 0
            }, Te)), qe;
          }
        }, {
          key: "renderLabel",
          value: function() {
            var Te = this.props, pe = Te.label, be = Te.showCheckbox, z = [Te.showNodeIcon ? v().createElement("span", {
              key: 0,
              className: "rct-node-icon"
            }, this.renderNodeIcon()) : null, v().createElement("span", {
              key: 1,
              className: "rct-title"
            }, pe)];
            return be ? this.renderCheckboxLabel(z) : this.renderBareLabel(z);
          }
        }, {
          key: "renderChildren",
          value: function() {
            return this.props.expanded ? this.props.children : null;
          }
        }, {
          key: "render",
          value: function() {
            var Te = this.props, pe = Te.className, be = Te.disabled, z = Te.expanded, U = Te.isLeaf, ie = l()({
              "rct-node": true,
              "rct-node-leaf": U,
              "rct-node-parent": !U,
              "rct-node-expanded": !U && z,
              "rct-node-collapsed": !U && !z,
              "rct-disabled": be
            }, pe);
            return v().createElement("li", {
              className: ie
            }, v().createElement("span", {
              className: "rct-text"
            }, this.renderCollapseButton(), this.renderLabel()), this.renderChildren());
          }
        }]) && at(W.prototype, j), Object.defineProperty(W, "prototype", {
          writable: false
        }), ve;
      }(v().PureComponent);
      rn(Ht, "propTypes", {
        checked: m().number.isRequired,
        disabled: m().bool.isRequired,
        expandDisabled: m().bool.isRequired,
        expanded: m().bool.isRequired,
        icons: Ge.isRequired,
        isLeaf: m().bool.isRequired,
        isParent: m().bool.isRequired,
        label: m().node.isRequired,
        lang: je.isRequired,
        optimisticToggle: m().bool.isRequired,
        showNodeIcon: m().bool.isRequired,
        treeId: m().string.isRequired,
        value: m().oneOfType([m().string, m().number]).isRequired,
        onCheck: m().func.isRequired,
        onExpand: m().func.isRequired,
        children: m().node,
        className: m().string,
        expandOnClick: m().bool,
        icon: m().node,
        showCheckbox: m().bool,
        title: m().string,
        onClick: m().func
      }), rn(Ht, "defaultProps", {
        children: null,
        className: null,
        expandOnClick: false,
        icon: null,
        showCheckbox: true,
        title: null,
        onClick: function() {
        }
      });
      const xe = Ht, ne = m().oneOfType([m().arrayOf(m().string), m().arrayOf(m().number)]);
      function ce(q, W) {
        var j = Object.keys(q);
        if (Object.getOwnPropertySymbols) {
          var G = Object.getOwnPropertySymbols(q);
          W && (G = G.filter(function(ue) {
            return Object.getOwnPropertyDescriptor(q, ue).enumerable;
          })), j.push.apply(j, G);
        }
        return j;
      }
      function _e(q) {
        for (var W = 1; W < arguments.length; W++) {
          var j = arguments[W] != null ? arguments[W] : {};
          W % 2 ? ce(Object(j), true).forEach(function(G) {
            ee(q, G, j[G]);
          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(q, Object.getOwnPropertyDescriptors(j)) : ce(Object(j)).forEach(function(G) {
            Object.defineProperty(q, G, Object.getOwnPropertyDescriptor(j, G));
          });
        }
        return q;
      }
      function ee(q, W, j) {
        return W in q ? Object.defineProperty(q, W, {
          value: j,
          enumerable: true,
          configurable: true,
          writable: true
        }) : q[W] = j, q;
      }
      var de = {
        label: m().node.isRequired,
        value: m().oneOfType([m().string, m().number]).isRequired,
        disabled: m().bool,
        icon: m().node,
        showCheckbox: m().bool,
        title: m().string
      };
      const Ce = m().oneOfType([m().shape(de), m().shape(_e(_e({}, de), {}, {
        children: m().arrayOf(de).isRequired
      }))]);
      function ke(q) {
        return ke = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(W) {
          return typeof W;
        } : function(W) {
          return W && typeof Symbol == "function" && W.constructor === Symbol && W !== Symbol.prototype ? "symbol" : typeof W;
        }, ke(q);
      }
      function Ve(q, W) {
        var j = Object.keys(q);
        if (Object.getOwnPropertySymbols) {
          var G = Object.getOwnPropertySymbols(q);
          W && (G = G.filter(function(ue) {
            return Object.getOwnPropertyDescriptor(q, ue).enumerable;
          })), j.push.apply(j, G);
        }
        return j;
      }
      function We(q) {
        for (var W = 1; W < arguments.length; W++) {
          var j = arguments[W] != null ? arguments[W] : {};
          W % 2 ? Ve(Object(j), true).forEach(function(G) {
            pr(q, G, j[G]);
          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(q, Object.getOwnPropertyDescriptors(j)) : Ve(Object(j)).forEach(function(G) {
            Object.defineProperty(q, G, Object.getOwnPropertyDescriptor(j, G));
          });
        }
        return q;
      }
      function Ke(q, W) {
        for (var j = 0; j < W.length; j++) {
          var G = W[j];
          G.enumerable = G.enumerable || false, G.configurable = true, "value" in G && (G.writable = true), Object.defineProperty(q, G.key, G);
        }
      }
      function tt(q, W) {
        return tt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(j, G) {
          return j.__proto__ = G, j;
        }, tt(q, W);
      }
      function ut(q, W) {
        if (W && (ke(W) === "object" || typeof W == "function"))
          return W;
        if (W !== void 0)
          throw new TypeError("Derived constructors may only return object or undefined");
        return Dt(q);
      }
      function Dt(q) {
        if (q === void 0)
          throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return q;
      }
      function gt(q) {
        return gt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(W) {
          return W.__proto__ || Object.getPrototypeOf(W);
        }, gt(q);
      }
      function pr(q, W, j) {
        return W in q ? Object.defineProperty(q, W, {
          value: j,
          enumerable: true,
          configurable: true,
          writable: true
        }) : q[W] = j, q;
      }
      var H = function(q) {
        (function(pe, be) {
          if (typeof be != "function" && be !== null)
            throw new TypeError("Super expression must either be null or a function");
          pe.prototype = Object.create(be && be.prototype, {
            constructor: {
              value: pe,
              writable: true,
              configurable: true
            }
          }), Object.defineProperty(pe, "prototype", {
            writable: false
          }), be && tt(pe, be);
        })(Te, q);
        var W, j, G, ue, ye, ve = (ue = Te, ye = function() {
          if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
            })), true;
          } catch {
            return false;
          }
        }(), function() {
          var pe, be = gt(ue);
          if (ye) {
            var z = gt(this).constructor;
            pe = Reflect.construct(be, arguments, z);
          } else
            pe = be.apply(this, arguments);
          return ut(this, pe);
        });
        function Te(pe) {
          var be;
          (function(U, ie) {
            if (!(U instanceof ie))
              throw new TypeError("Cannot call a class as a function");
          })(this, Te), be = ve.call(this, pe);
          var z = new me(pe);
          return z.flattenNodes(pe.nodes), z.deserializeLists({
            checked: pe.checked,
            expanded: pe.expanded
          }), be.state = {
            id: pe.id || "rct-".concat(d()),
            model: z,
            prevProps: pe
          }, be.onCheck = be.onCheck.bind(Dt(be)), be.onExpand = be.onExpand.bind(Dt(be)), be.onNodeClick = be.onNodeClick.bind(Dt(be)), be.onExpandAll = be.onExpandAll.bind(Dt(be)), be.onCollapseAll = be.onCollapseAll.bind(Dt(be)), be.combineMemorized = h()(function(U, ie) {
            return We(We({}, U), ie);
          }).bind(Dt(be)), be;
        }
        return W = Te, j = [{
          key: "onCheck",
          value: function(pe) {
            var be = this.props, z = be.checkModel, U = be.noCascade, ie = be.onCheck, Ee = this.state.model.clone(), Oe = Ee.getNode(pe.value);
            Ee.toggleChecked(pe, pe.checked, z, U), ie(Ee.serializeList("checked"), We(We({}, Oe), pe));
          }
        }, {
          key: "onExpand",
          value: function(pe) {
            var be = this.props.onExpand, z = this.state.model.clone(), U = z.getNode(pe.value);
            z.toggleNode(pe.value, "expanded", pe.expanded), be(z.serializeList("expanded"), We(We({}, U), pe));
          }
        }, {
          key: "onNodeClick",
          value: function(pe) {
            (0, this.props.onClick)(We(We({}, this.state.model.getNode(pe.value)), pe));
          }
        }, {
          key: "onExpandAll",
          value: function() {
            this.expandAllNodes();
          }
        }, {
          key: "onCollapseAll",
          value: function() {
            this.expandAllNodes(false);
          }
        }, {
          key: "expandAllNodes",
          value: function() {
            var pe = !(arguments.length > 0 && arguments[0] !== void 0) || arguments[0], be = this.props.onExpand;
            be(this.state.model.clone().expandAllNodes(pe).serializeList("expanded"));
          }
        }, {
          key: "determineShallowCheckState",
          value: function(pe, be) {
            var z = this.state.model.getNode(pe.value);
            return z.isLeaf || be || pe.children.length === 0 ? z.checked ? 1 : 0 : this.isEveryChildChecked(pe) ? 1 : this.isSomeChildChecked(pe) ? 2 : 0;
          }
        }, {
          key: "isEveryChildChecked",
          value: function(pe) {
            var be = this;
            return pe.children.every(function(z) {
              return be.state.model.getNode(z.value).checkState === 1;
            });
          }
        }, {
          key: "isSomeChildChecked",
          value: function(pe) {
            var be = this;
            return pe.children.some(function(z) {
              return be.state.model.getNode(z.value).checkState > 0;
            });
          }
        }, {
          key: "renderTreeNodes",
          value: function(pe) {
            var be = this, z = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, U = this.props, ie = U.expandDisabled, Ee = U.expandOnClick, Oe = U.icons, Ye = U.lang, qe = U.noCascade, dt = U.onClick, At = U.onlyLeafCheckboxes, Yt = U.optimisticToggle, Tt = U.showNodeTitle, Ut = U.showNodeIcon, or = this.state, pt = or.id, zt = or.model, ar = Te.defaultProps.icons, cr = pe.map(function(Cr) {
              var Vn = Cr.value, Xe = zt.getNode(Cr.value), nt = Xe.isParent ? be.renderTreeNodes(Cr.children, Cr) : null;
              Xe.checkState = be.determineShallowCheckState(Cr, qe);
              var Rt = At ? Xe.isLeaf : Xe.showCheckbox;
              return !z.value || zt.getNode(z.value).expanded ? v().createElement(xe, {
                key: Vn,
                checked: Xe.checkState,
                className: Cr.className,
                disabled: Xe.disabled,
                expandDisabled: ie,
                expandOnClick: Ee,
                expanded: Xe.expanded,
                icon: Cr.icon,
                icons: be.combineMemorized(ar, Oe),
                label: Cr.label,
                lang: Ye,
                optimisticToggle: Yt,
                isLeaf: Xe.isLeaf,
                isParent: Xe.isParent,
                showCheckbox: Rt,
                showNodeIcon: Ut,
                title: Tt ? Cr.title || Cr.label : Cr.title,
                treeId: pt,
                value: Cr.value,
                onCheck: be.onCheck,
                onClick: dt && be.onNodeClick,
                onExpand: be.onExpand
              }, nt) : null;
            });
            return v().createElement("ol", null, cr);
          }
        }, {
          key: "renderExpandAll",
          value: function() {
            var pe = this.props, be = pe.icons, z = be.expandAll, U = be.collapseAll, ie = pe.lang;
            return pe.showExpandAll ? v().createElement("div", {
              className: "rct-options"
            }, v().createElement(N, {
              className: "rct-option rct-option-expand-all",
              title: ie.expandAll,
              onClick: this.onExpandAll
            }, z), v().createElement(N, {
              className: "rct-option rct-option-collapse-all",
              title: ie.collapseAll,
              onClick: this.onCollapseAll
            }, U)) : null;
          }
        }, {
          key: "renderHiddenInput",
          value: function() {
            var pe = this.props, be = pe.name, z = pe.nameAsArray;
            return be === void 0 ? null : z ? this.renderArrayHiddenInput() : this.renderJoinedHiddenInput();
          }
        }, {
          key: "renderArrayHiddenInput",
          value: function() {
            var pe = this.props, be = pe.checked, z = pe.name;
            return be.map(function(U) {
              var ie = "".concat(z, "[]");
              return v().createElement("input", {
                key: U,
                name: ie,
                type: "hidden",
                value: U
              });
            });
          }
        }, {
          key: "renderJoinedHiddenInput",
          value: function() {
            var pe = this.props, be = pe.checked, z = pe.name, U = be.join(",");
            return v().createElement("input", {
              name: z,
              type: "hidden",
              value: U
            });
          }
        }, {
          key: "render",
          value: function() {
            var pe, be = this.props, z = be.direction, U = be.disabled, ie = be.iconsClass, Ee = be.nodes, Oe = be.nativeCheckboxes, Ye = this.state.id, qe = this.renderTreeNodes(Ee), dt = l()((pr(pe = {
              "react-checkbox-tree": true,
              "rct-disabled": U
            }, "rct-icons-".concat(ie), true), pr(pe, "rct-native-display", Oe), pr(pe, "rct-direction-rtl", z === "rtl"), pe));
            return v().createElement("div", {
              className: dt,
              id: Ye
            }, this.renderExpandAll(), this.renderHiddenInput(), qe);
          }
        }], G = [{
          key: "getDerivedStateFromProps",
          value: function(pe, be) {
            var z = be.model, U = be.prevProps, ie = pe.disabled, Ee = pe.id, Oe = pe.nodes, Ye = We(We({}, be), {}, {
              prevProps: pe
            });
            return z.setProps(pe), c()(U.nodes, Oe) && U.disabled === ie || (z.reset(), z.flattenNodes(Oe)), Ee !== null && (Ye = We(We({}, Ye), {}, {
              id: Ee
            })), z.deserializeLists({
              checked: pe.checked,
              expanded: pe.expanded
            }), Ye;
          }
        }], j && Ke(W.prototype, j), G && Ke(W, G), Object.defineProperty(W, "prototype", {
          writable: false
        }), Te;
      }(v().Component);
      function C(q) {
        return function(W) {
          if (Array.isArray(W))
            return M(W);
        }(q) || function(W) {
          if (typeof Symbol < "u" && W[Symbol.iterator] != null || W["@@iterator"] != null)
            return Array.from(W);
        }(q) || function(W, j) {
          if (W) {
            if (typeof W == "string")
              return M(W, j);
            var G = Object.prototype.toString.call(W).slice(8, -1);
            return G === "Object" && W.constructor && (G = W.constructor.name), G === "Map" || G === "Set" ? Array.from(W) : G === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G) ? M(W, j) : void 0;
          }
        }(q) || function() {
          throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
        }();
      }
      function M(q, W) {
        (W == null || W > q.length) && (W = q.length);
        for (var j = 0, G = new Array(W); j < W; j++)
          G[j] = q[j];
        return G;
      }
      function Z(q, W) {
        var j = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;
        if (j > W)
          return [];
        var G = [];
        return q.forEach(function(ue) {
          ue.children && (G = [].concat(C(G), [ue.value], C(Z(ue.children, W, j + 1))));
        }), G;
      }
      pr(H, "propTypes", {
        nodes: m().arrayOf(Ce).isRequired,
        checkModel: m().oneOf([B.LEAF, B.ALL]),
        checked: ne,
        direction: m().string,
        disabled: m().bool,
        expandDisabled: m().bool,
        expandOnClick: m().bool,
        expanded: ne,
        icons: Ge,
        iconsClass: m().string,
        id: m().string,
        lang: je,
        name: m().string,
        nameAsArray: m().bool,
        nativeCheckboxes: m().bool,
        noCascade: m().bool,
        onlyLeafCheckboxes: m().bool,
        optimisticToggle: m().bool,
        showExpandAll: m().bool,
        showNodeIcon: m().bool,
        showNodeTitle: m().bool,
        onCheck: m().func,
        onClick: m().func,
        onExpand: m().func
      }), pr(H, "defaultProps", {
        checkModel: B.LEAF,
        checked: [],
        direction: "ltr",
        disabled: false,
        expandDisabled: false,
        expandOnClick: false,
        expanded: [],
        icons: {
          check: v().createElement("span", {
            className: "rct-icon rct-icon-check"
          }),
          uncheck: v().createElement("span", {
            className: "rct-icon rct-icon-uncheck"
          }),
          halfCheck: v().createElement("span", {
            className: "rct-icon rct-icon-half-check"
          }),
          expandClose: v().createElement("span", {
            className: "rct-icon rct-icon-expand-close"
          }),
          expandOpen: v().createElement("span", {
            className: "rct-icon rct-icon-expand-open"
          }),
          expandAll: v().createElement("span", {
            className: "rct-icon rct-icon-expand-all"
          }),
          collapseAll: v().createElement("span", {
            className: "rct-icon rct-icon-collapse-all"
          }),
          parentClose: v().createElement("span", {
            className: "rct-icon rct-icon-parent-close"
          }),
          parentOpen: v().createElement("span", {
            className: "rct-icon rct-icon-parent-open"
          }),
          leaf: v().createElement("span", {
            className: "rct-icon rct-icon-leaf"
          })
        },
        iconsClass: "fa4",
        id: null,
        lang: {
          collapseAll: "Collapse all",
          expandAll: "Expand all",
          toggle: "Toggle"
        },
        name: void 0,
        nameAsArray: false,
        nativeCheckboxes: false,
        noCascade: false,
        onlyLeafCheckboxes: false,
        optimisticToggle: true,
        showExpandAll: false,
        showNodeIcon: true,
        showNodeTitle: false,
        onCheck: function() {
        },
        onClick: null,
        onExpand: function() {
        }
      });
      const ge = H;
    })(), a;
  })());
})(nee);
var bQe = nee.exports;
var TQe = Ui(bQe);
function EQe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Y6(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, wQe(n.key), n);
  }
}
function SQe(e12, t, r) {
  return t && Y6(e12.prototype, t), r && Y6(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function wQe(e12) {
  var t = AQe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function AQe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function OQe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Ik(e12, t);
}
function Ik(e12, t) {
  return Ik = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Ik(e12, t);
}
function IQe(e12) {
  var t = xQe();
  return function() {
    var n = cE(e12), i;
    if (t) {
      var o = cE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return PQe(this, i);
  };
}
function PQe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return CQe(e12);
}
function CQe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function xQe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function cE(e12) {
  return cE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, cE(e12);
}
var iee = function(e12) {
  OQe(r, e12);
  var t = IQe(r);
  function r(n) {
    var i;
    EQe(this, r), i = t.call(this, n), i.localTracks = yu.filter((l) => l.local && !l.hidden).map((l) => {
      const u = {
        ...l
      };
      return u.datatype = l.datatype[0], u;
    }), i.augmentedTracksInfo = yu, window.higlassTracksByType && Object.keys(window.higlassTracksByType).forEach((l) => {
      i.augmentedTracksInfo.push(window.higlassTracksByType[l].config);
    }), n.datatype ? i.localTracks = i.localTracks.filter((l) => l.datatype[0] === n.datatype) : i.localTracks = i.localTracks.filter((l) => l.orientation === i.props.orientation), i.localTracks.forEach((l) => {
      l.uuid = Gt.nice();
    });
    const o = i.prepareNewEntries("", i.localTracks, {}), a = Object.keys(o), s = a.length ? [a[0]] : null;
    return i.mounted = false, i.state = {
      selectedUuid: s,
      options: o,
      filter: "",
      checked: [],
      expanded: []
    }, i.requestTilesetLists(), i;
  }
  return SQe(r, [{
    key: "componentDidMount",
    value: function() {
      this.mounted = true, this.requestTilesetLists(), this.searchBox.focus();
    }
  }, {
    key: "componentWillUnmount",
    value: function() {
      this.mounted = false;
    }
  }, {
    key: "prepareNewEntries",
    value: function(i, o, a) {
      const s = a;
      return o.map((u) => ({
        ...u,
        server: i,
        tilesetUid: u.uuid,
        serverUidKey: this.serverUidKey(i, u.uuid),
        datatype: u.datatype,
        name: u.name,
        uid: Gt.nice()
      })).forEach((u) => {
        s[u.serverUidKey] = u;
      }), s;
    }
  }, {
    key: "serverUidKey",
    value: function(i, o) {
      return `${i}/${o}`;
    }
  }, {
    key: "requestTilesetLists",
    value: function() {
      let i = null;
      if (this.props.datatype ? i = `dt=${this.props.datatype}` : i = [...new Set([].concat(...this.augmentedTracksInfo.filter((a) => a.datatype).filter((a) => a.orientation === this.props.orientation || this.props.orientation === "1d-vertical" && a.orientation === "1d-horizontal").map((a) => a.datatype)))].map((a) => `dt=${a}`).join("&"), !this.props.trackSourceServers) {
        console.warn("No track source servers specified in the viewconf");
        return;
      }
      this.props.trackSourceServers.forEach((o) => {
        Je.json(`${o}/tilesets/?limit=10000&${i}`, (a, s) => {
          if (a)
            console.error("ERROR:", a);
          else {
            const l = this.prepareNewEntries(o, s.results, this.state.options), u = Object.keys(l);
            let {
              selectedUuid: c
            } = this.state;
            if (!c) {
              c = u.length ? [u[0]] : null;
              const f = this.state.options[c[0]];
              this.props.selectedTilesetChanged([f]);
            }
            this.mounted && this.setState({
              selectedUuid: c,
              options: l
            });
          }
        }, this.props.pubSub);
      });
    }
    /**
     * Double clicked on an element. Should be selected
     * and this window will be closed.
     */
  }, {
    key: "handleOptionDoubleClick",
    value: function(i) {
      const o = this.state.options[i.target.value];
      this.props.onDoubleClick(o);
    }
  }, {
    key: "handleSelectedOptions",
    value: function(i) {
      const o = [], a = [];
      for (let s = 0; s < i.length; s++)
        o.push(i[s]), a.push(this.state.options[i[s]]);
      this.props.selectedTilesetChanged(a), this.setState({
        selectedUuid: o
      });
    }
  }, {
    key: "handleSelect",
    value: function() {
      const {
        selectedOptions: i
      } = this.multiSelect, o = [];
      for (let a = 0; a < i.length; a++) {
        const s = i[a];
        o.push(s.value);
      }
      this.handleSelectedOptions(o);
    }
  }, {
    key: "handleSearchChange",
    value: function() {
      const i = this.searchBox;
      this.setState({
        filter: i.value
      });
    }
    /*
     * Create the nested checkbox tree by partitioning the
     * list of available datasets according to their group
     *
     * @param {object} datasetsDict A dictionary of id -> tileset
     *  def mappings
     * @param {string} filter A string to filter the results by
     * @returns {array} A list of items that define the nested checkbox
     *  structure
     *  {
     *    'name': 'blah',
     *    'value': 'blah',
     *    'children': [],
     *  }
     */
  }, {
    key: "partitionByGroup",
    value: function(i, o) {
      const a = {
        "": {
          name: "",
          value: "",
          children: []
        }
      };
      for (const l of Object.keys(i)) {
        const u = i[l];
        if (u.name.toLowerCase().includes(o))
          if ("project_name" in u) {
            const c = u.project_name;
            c in a || (a[c] = {
              value: c,
              label: c,
              children: []
            }), a[c].children.push({
              label: u.name,
              value: l
            });
          } else
            a[""].children.push({
              label: u.name,
              value: l
            });
      }
      const s = a[""].children;
      for (const l of Object.keys(a))
        l !== "" && (a[l].children.sort((u, c) => u.label.toLowerCase().localeCompare(c.label.toLowerCase(), "en")), s.push(a[l]));
      return s.sort((l, u) => l.label.toLowerCase().localeCompare(u.label.toLowerCase(), "en")), s;
    }
  }, {
    key: "handleChecked",
    value: function(i) {
      this.handleSelectedOptions(i), this.setState({
        checked: i
      });
    }
  }, {
    key: "handleExpanded",
    value: function(i) {
      this.setState({
        expanded: i
      });
    }
  }, {
    key: "render",
    value: function() {
      const i = [];
      for (const u in this.state.options)
        i.push(this.state.options[u]);
      const o = this.partitionByGroup(this.state.options, this.state.filter), a = {
        width: 15,
        height: 15,
        top: 2,
        right: 2,
        position: "relative"
      }, s = JSON.parse(JSON.stringify(a));
      s.opacity = 0.5;
      const l = import_react.default.createElement("form", {
        onSubmit: (u) => {
          u.preventDefault();
        }
      }, import_react.default.createElement("div", {
        className: "tileset-finder-search-bar"
      }, import_react.default.createElement("span", {
        className: "tileset-finder-label"
      }, "Select tileset:"), import_react.default.createElement("input", {
        ref: (u) => {
          this.searchBox = u;
        },
        className: "tileset-finder-search-box",
        onChange: this.handleSearchChange.bind(this),
        placeholder: "Search Term",
        type: "text"
      })), import_react.default.createElement("div", {
        className: "tileset-finder-checkbox-tree"
      }, import_react.default.createElement(TQe, {
        checked: this.state.checked,
        expanded: this.state.expanded,
        icons: {
          uncheck: import_react.default.createElement("svg", {
            style: a
          }, import_react.default.createElement("use", {
            xlinkHref: "#square_o"
          })),
          check: import_react.default.createElement("svg", {
            style: a
          }, import_react.default.createElement("use", {
            xlinkHref: "#check_square_o"
          })),
          halfCheck: import_react.default.createElement("svg", {
            style: s
          }, import_react.default.createElement("use", {
            xlinkHref: "#check_square_o"
          })),
          leaf: import_react.default.createElement("svg", {
            style: a
          }, import_react.default.createElement("use", {
            xlinkHref: "#file_o"
          })),
          expandClose: import_react.default.createElement("svg", {
            style: a
          }, import_react.default.createElement("use", {
            xlinkHref: "#chevron_right"
          })),
          expandOpen: import_react.default.createElement("svg", {
            style: a
          }, import_react.default.createElement("use", {
            xlinkHref: "#chevron_down"
          })),
          parentClose: import_react.default.createElement("svg", {
            style: a
          }, import_react.default.createElement("use", {
            xlinkHref: "#folder_o"
          })),
          parentOpen: import_react.default.createElement("svg", {
            style: a
          }, import_react.default.createElement("use", {
            xlinkHref: "#folder_open_o"
          }))
        },
        nodes: o,
        onCheck: this.handleChecked.bind(this),
        onExpand: this.handleExpanded.bind(this)
      })));
      return import_react.default.createElement("div", null, l);
    }
  }]), r;
}(import_react.default.Component);
iee.propTypes = {
  datatype: L.string,
  orientation: L.string,
  onDoubleClick: L.func,
  pubSub: L.object.isRequired,
  selectedTilesetChanged: L.func,
  trackSourceServers: L.array
};
var kQe = yp(iee);
function DQe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function q6(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, NQe(n.key), n);
  }
}
function RQe(e12, t, r) {
  return t && q6(e12.prototype, t), r && q6(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function NQe(e12) {
  var t = MQe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function MQe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function LQe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Pk(e12, t);
}
function Pk(e12, t) {
  return Pk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Pk(e12, t);
}
function BQe(e12) {
  var t = HQe();
  return function() {
    var n = uE(e12), i;
    if (t) {
      var o = uE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return FQe(this, i);
  };
}
function FQe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return $Qe(e12);
}
function $Qe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function HQe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function uE(e12) {
  return uE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, uE(e12);
}
var oee = function(e12) {
  LQe(r, e12);
  var t = BQe(r);
  function r(n) {
    var i;
    return DQe(this, r), i = t.call(this, n), i.DATATYPE_TO_TRACK_TYPE = HR(i.props.orientation), i.AVAILABLE_TRACK_TYPES = R0(i.props.datatypes, i.props.orientation), i.state = {
      selectedPlotType: i.AVAILABLE_TRACK_TYPES[0]
    }, i;
  }
  return RQe(r, [{
    key: "UNSAFE_componentWillReceiveProps",
    value: function(i) {
      if (this.AVAILABLE_TRACK_TYPES = R0(i.datatypes, this.props.orientation), !!this.AVAILABLE_TRACK_TYPES && i.allTracksSameDatatype && this.AVAILABLE_TRACK_TYPES.length > 0 && !this.AVAILABLE_TRACK_TYPES.includes(this.state.selectedPlotType)) {
        const o = GR(i.datatypes[0][0], this.props.position, this.AVAILABLE_TRACK_TYPES);
        this.handlePlotTypeSelected(o);
      }
    }
  }, {
    key: "handlePlotTypeSelected",
    value: function(i) {
      this.setState({
        selectedPlotType: i
      }), this.props.onPlotTypeSelected(i.type);
    }
  }, {
    key: "render",
    value: function() {
      let i = "No plot types available for track";
      const o = {};
      return yu.forEach((a) => {
        o[a.type] = a;
      }), this.AVAILABLE_TRACK_TYPES && (i = this.AVAILABLE_TRACK_TYPES.sort((a, s) => a.type < s.type).map((a) => {
        const s = o[a.type].thumbnail, l = this.state.selectedPlotType.type === a.type ? "plot-type-item plot-type-selected" : "plot-type-item", u = o[a.type].thumbnail ? import_react.default.createElement("div", {
          className: "track-thumbnail",
          dangerouslySetInnerHTML: {
            __html: s.outerHTML
          }
        }) : import_react.default.createElement("div", {
          className: "track-thumbnail"
        }, import_react.default.createElement("svg", {
          height: 20,
          width: 30
        }));
        return import_react.default.createElement("li", {
          key: a.type,
          className: l,
          onClick: (c) => {
            this.setState({
              selectedPlotType: a
            }), this.props.onPlotTypeSelected(a.type);
          },
          style: {
            listStyle: "none",
            paddingLeft: 5,
            paddingBottom: 0
          }
        }, u, import_react.default.createElement("span", {
          style: {
            verticalAlign: "middle"
          }
        }, a.type));
      })), import_react.default.createElement("div", null, i.length > 0 && this.props.allTracksSameDatatype && import_react.default.createElement("div", {
        className: "plot-type-container"
      }, i), !this.props.allTracksSameDatatype && import_react.default.createElement("div", {
        className: "plot-type-container-empty"
      }, "Datasets with multiple datatypes chosen. They will be added with their default track types."));
    }
  }]), r;
}(import_react.default.Component);
oee.propTypes = {
  allTracksSameDatatype: L.bool,
  datatypes: L.array,
  orientation: L.string,
  onPlotTypeSelected: L.func,
  position: L.string
};
function UQe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function K6(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, GQe(n.key), n);
  }
}
function jQe(e12, t, r) {
  return t && K6(e12.prototype, t), r && K6(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function GQe(e12) {
  var t = zQe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function zQe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function VQe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Ck(e12, t);
}
function Ck(e12, t) {
  return Ck = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Ck(e12, t);
}
function XQe(e12) {
  var t = YQe();
  return function() {
    var n = hE(e12), i;
    if (t) {
      var o = hE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return WQe(this, i);
  };
}
function WQe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Wb(e12);
}
function Wb(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function YQe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function hE(e12) {
  return hE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, hE(e12);
}
var fE = function(e12) {
  VQe(r, e12);
  var t = XQe(r);
  function r(n) {
    var i;
    return UQe(this, r), i = t.call(this, n), i.options = {}, i.state = {
      selectedTilesets: [{
        datatype: "none"
      }],
      allTracksSameDatatype: true
      // Do all selected tracks have the same datatype
    }, i.handleSubmitBound = i.handleSubmit.bind(Wb(i)), i.handleTilesetPickerDoubleClickBound = i.handleTilesetPickerDoubleClick.bind(Wb(i)), i.selectedTilesetsChangedBound = i.selectedTilesetsChanged.bind(Wb(i)), i;
  }
  return jQe(r, [{
    key: "getOrientation",
    value: function(i) {
      let o = null;
      return i === "top" || i === "bottom" ? o = "1d-horizontal" : i === "left" || i === "right" ? o = "1d-vertical" : o = "2d", o;
    }
  }, {
    key: "handleSubmit",
    value: function(i) {
      i && i.preventDefault(), this.props.onTracksChosen(this.state.selectedTilesets, this.props.position, this.props.host);
    }
    /**
     * The user double clicked a tileset in the tileset finder dialog.
     * This means that only one is selected.
     *
     * Arguments
     * ---------
     *  tileset: { uuid: 'CXCX', filetype: 'cooler' ....}
     */
  }, {
    key: "handleTilesetPickerDoubleClick",
    value: function(i) {
      this.selectedTilesetsChanged([i]), this.props.onTracksChosen(this.state.selectedTilesets, this.props.position, this.props.host);
    }
  }, {
    key: "handleOptionsChanged",
    value: function(i) {
      this.options = i;
    }
  }, {
    key: "handlePlotTypeSelected",
    value: function(i) {
      const {
        selectedTilesets: o
      } = this.state;
      for (const a of o)
        a.type = i;
      this.selectedPlotType = i, this.setState({
        selectedTilesets: o
      });
    }
  }, {
    key: "selectedTilesetsChanged",
    value: function(i) {
      let o = null;
      i.length === 0 ? o = [{
        datatype: "none"
      }] : o = i;
      let a = true;
      const s = o[0].datatype;
      for (const l of o)
        l.datatype !== s && (a = false);
      if (a)
        for (const l of o)
          l.type = this.selectedPlotType;
      else
        for (const l of o) {
          let u = [l.datatype];
          const c = this.getOrientation(this.props.position);
          l.filetype === "cooler" && (u = [l.datatype, "chromsizes"]);
          const f = R0([u], c), h = GR(u[0], this.props.position, f);
          l.type = h.type;
        }
      this.setState({
        selectedTilesets: o,
        allTracksSameDatatype: a
      });
    }
  }, {
    key: "render",
    value: function() {
      const i = this.getOrientation(this.props.position), o = import_react.default.createElement("div", null, import_react.default.createElement(
        kQe,
        {
          ref: (a) => {
            this.tilesetFinder = a;
          },
          datatype: this.props.datatype,
          onDoubleClick: this.handleTilesetPickerDoubleClick.bind(this),
          onTracksChosen: (a) => this.props.onTracksChosen(a, this.props.position),
          orientation: i,
          selectedTilesetChanged: this.selectedTilesetsChanged.bind(this),
          trackSourceServers: this.props.trackSourceServers
        }
      ));
      return import_react.default.createElement(Sy, {
        maxHeight: true,
        okayTitle: "Submit",
        onCancel: this.props.onCancel,
        onOkay: this.handleSubmitBound,
        title: "Add Track"
      }, import_react.default.createElement(import_react.default.Fragment, null, o, import_react.default.createElement(
        oee,
        {
          ref: (a) => {
            this.plotTypeChooser = a;
          },
          allTracksSameDatatype: this.state.allTracksSameDatatype,
          datatypes: this.state.selectedTilesets.map((a) => a.filetype === "cooler" ? [a.datatype, "chromsizes"] : [a.datatype]),
          onPlotTypeSelected: this.handlePlotTypeSelected.bind(this),
          orientation: i,
          position: this.props.position
        }
      )));
    }
  }]), r;
}(import_react.default.Component);
fE.defaultProps = {
  position: "top"
};
fE.propTypes = {
  datatype: L.string,
  host: L.string,
  onCancel: L.func.isRequired,
  onTracksChosen: L.func.isRequired,
  position: L.string,
  trackSourceServers: L.array.isRequired
};
function xk() {
  return xk = Object.assign ? Object.assign.bind() : function(e12) {
    for (var t = 1; t < arguments.length; t++) {
      var r = arguments[t];
      for (var n in r)
        Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
    }
    return e12;
  }, xk.apply(this, arguments);
}
function qQe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Z6(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, ZQe(n.key), n);
  }
}
function KQe(e12, t, r) {
  return t && Z6(e12.prototype, t), r && Z6(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function ZQe(e12) {
  var t = QQe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function QQe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function JQe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && kk(e12, t);
}
function kk(e12, t) {
  return kk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, kk(e12, t);
}
function eJe(e12) {
  var t = nJe();
  return function() {
    var n = dE(e12), i;
    if (t) {
      var o = dE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return tJe(this, i);
  };
}
function tJe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return rJe(e12);
}
function rJe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function nJe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function dE(e12) {
  return dE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, dE(e12);
}
var xL = function(e12) {
  JQe(r, e12);
  var t = eJe(r);
  function r() {
    return qQe(this, r), t.apply(this, arguments);
  }
  return KQe(r, [{
    key: "render",
    value: function() {
      const i = [];
      return this.props.children.forEach((o, a) => {
        const s = `customTrackDialog_${a}`;
        i.push(import_react.default.createElement(o, xk({
          key: s
        }, this.props.bodyProps[a])));
      }), import_react.default.createElement(Sy, {
        maxHeight: true,
        okayOnly: true,
        okayTitle: "Close",
        onCancel: this.props.onCancel,
        onOkay: this.props.onCancel,
        title: this.props.title
      }, i);
    }
  }]), r;
}(import_react.default.PureComponent);
xL.defaultProps = {};
xL.propTypes = {
  onCancel: L.func.isRequired,
  title: L.string,
  bodyProps: L.array,
  children: L.array
};
function iJe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Q6(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, aJe(n.key), n);
  }
}
function oJe(e12, t, r) {
  return t && Q6(e12.prototype, t), r && Q6(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function aJe(e12) {
  var t = sJe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function sJe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function lJe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Dk(e12, t);
}
function Dk(e12, t) {
  return Dk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Dk(e12, t);
}
function cJe(e12) {
  var t = fJe();
  return function() {
    var n = pE(e12), i;
    if (t) {
      var o = pE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return uJe(this, i);
  };
}
function uJe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return hJe(e12);
}
function hJe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function fJe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function pE(e12) {
  return pE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, pE(e12);
}
var J6 = 20;
var mc = function(e12) {
  lJe(r, e12);
  var t = cJe(r);
  function r(n) {
    var i;
    return iJe(this, r), i = t.call(this, n), i.adjusted = false, i.state = {
      orientation: i.props.orientation ? i.props.orientation : "right",
      left: i.props.position.left,
      top: i.props.position.top,
      submenuShown: null
    }, i;
  }
  return oJe(r, [{
    key: "componentDidMount",
    value: function() {
      this.updateOrientation();
    }
    // eslint-disable-next-line camelcase
  }, {
    key: "UNSAFE_componentWillReceiveProps",
    value: function(i) {
      this.adjusted = false, this.setState({
        left: i.position.left,
        top: i.position.top
      });
    }
  }, {
    key: "componentDidUpdate",
    value: function() {
      this.updateOrientation();
    }
    /* ---------------------------- Custom Methods ---------------------------- */
  }, {
    key: "handleItemMouseEnterWithRect",
    value: function(i, o) {
      this.setState({
        submenuShown: o,
        submenuSourceBbox: i
      });
    }
  }, {
    key: "handleItemMouseEnter",
    value: function(i, o) {
      this.handleItemMouseEnterWithRect(i.currentTarget.getBoundingClientRect(), o);
    }
  }, {
    key: "handleMouseLeave",
    value: function() {
    }
  }, {
    key: "handleOtherMouseEnter",
    value: function() {
      this.setState({
        submenuShown: null
      });
    }
    /*
    handleSeriesMouseEnter(evt, uid) {
      let domNode = evt.currentTarget;
       this.setState({
        submenuShown: uid,
        submenuSourceBbox: domNode.getBoundingClientRect()
      });
    }
     handleMouseLeave(evt) {
      return;
    }
     handleOtherMouseEnter(evt) {
      this.setState({
        submenuShown: null
      });
    }
    */
  }, {
    key: "updateOrientation",
    value: function() {
      if (this.adjusted)
        return;
      this.adjusted = true, this.divDom = import_react_dom.default.findDOMNode(this.div);
      const i = this.divDom.getBoundingClientRect(), o = this.props.parentBbox ? this.props.parentBbox : {
        top: this.props.position.top,
        left: this.props.position.left,
        width: 0,
        height: 0
      };
      let a = this.state.orientation, s = o.top;
      if (o.top + i.height > window.innerHeight && (o.top - i.height > 0 ? s = o.top - i.height + J6 : (s = o.top - i.height + J6, s -= s + i.height - window.innerHeight)), this.state.orientation === "left") {
        let l = o.left - i.width;
        l < 0 && (o.left + o.width + i.width > window.innerWidth ? l = 0 : (l = o.left + o.width, a = "right")), this.setState({
          left: l,
          top: s,
          orientation: a
        });
      } else {
        let l = o.left + o.width;
        o.left + o.width + i.width > window.innerWidth && (o.left - i.width < 0 ? (l = 0, a = "right") : (l = o.left - i.width, a = "left")), this.setState({
          left: l,
          top: s,
          orientation: a
        });
      }
    }
    /* ------------------------------ Rendering ------------------------------- */
  }, {
    key: "render",
    value: function() {
      const i = this.state.left ? {
        left: this.state.left
      } : {
        right: this.state.right
      }, o = {
        top: this.state.top
      }, a = Object.assign(i, o);
      return import_react.default.createElement("div", {
        ref: (s) => {
          this.div = s;
        },
        className: nr("context-menu-item", St["context-menu"], {
          [St["context-menu-dark"]]: this.props.theme === wr
        }),
        style: a
      }, this.props.children);
    }
  }]), r;
}(import_react.default.Component);
mc.propTypes = {
  children: L.node,
  orientation: L.string,
  parentBbox: L.object,
  position: L.object,
  theme: L.symbol.isRequired
};
function dJe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function eG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, mJe(n.key), n);
  }
}
function pJe(e12, t, r) {
  return t && eG(e12.prototype, t), r && eG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function mJe(e12) {
  var t = gJe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function gJe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function vJe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Rk(e12, t);
}
function Rk(e12, t) {
  return Rk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Rk(e12, t);
}
function yJe(e12) {
  var t = TJe();
  return function() {
    var n = mE(e12), i;
    if (t) {
      var o = mE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return _Je(this, i);
  };
}
function _Je(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return bJe(e12);
}
function bJe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function TJe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function mE(e12) {
  return mE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, mE(e12);
}
var Nk = function(e12) {
  vJe(r, e12);
  var t = yJe(r);
  function r() {
    return dJe(this, r), t.apply(this, arguments);
  }
  return pJe(r, [{
    key: "getSubmenu",
    value: function() {
      if (this.state.submenuShown) {
        const i = this.state.submenuSourceBbox, o = this.state.orientation === "left" ? {
          left: this.state.left,
          top: i.top
        } : {
          left: this.state.left + i.width + 7,
          top: i.top
        }, a = this.state.submenuShown;
        return import_react.default.createElement(r, {
          menuItems: a.children,
          orientation: this.state.orientation,
          parentBbox: i,
          position: o,
          theme: this.props.theme
        });
      }
      return import_react.default.createElement("div", null);
    }
  }, {
    key: "componentWillUnmount",
    value: function() {
    }
  }, {
    key: "render",
    value: function() {
      const i = [];
      for (const o in this.props.menuItems) {
        const a = this.props.menuItems[o];
        i.push(import_react.default.createElement(Ct, {
          key: o,
          onClick: a.handler ? a.handler : () => null,
          onMouseEnter: a.children ? (s) => this.handleItemMouseEnter(s, a) : this.handleOtherMouseEnter.bind(this),
          onMouseLeave: this.handleMouseLeave
        }, a.name, a.children && import_react.default.createElement("svg", {
          className: St["play-icon"]
        }, import_react.default.createElement("use", {
          xlinkHref: "#play"
        }))));
      }
      return import_react.default.createElement("div", {
        ref: (o) => {
          this.div = o;
        },
        className: nr(St["context-menu"], {
          [St["context-menu-dark"]]: this.props.theme === wr
        }),
        style: {
          left: this.state.left,
          top: this.state.top
        }
      }, i, this.getSubmenu());
    }
  }]), r;
}(mc);
function EJe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function tG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, wJe(n.key), n);
  }
}
function SJe(e12, t, r) {
  return t && tG(e12.prototype, t), r && tG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function wJe(e12) {
  var t = AJe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function AJe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function OJe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Mk(e12, t);
}
function Mk(e12, t) {
  return Mk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Mk(e12, t);
}
function IJe(e12) {
  var t = xJe();
  return function() {
    var n = gE(e12), i;
    if (t) {
      var o = gE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return PJe(this, i);
  };
}
function PJe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return CJe(e12);
}
function CJe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function xJe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function gE(e12) {
  return gE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, gE(e12);
}
var kJe = function(e12) {
  OJe(r, e12);
  var t = IJe(r);
  function r() {
    return EJe(this, r), t.apply(this, arguments);
  }
  return SJe(r, [{
    key: "getConfigureSeriesMenu",
    value: function(i, o, a) {
      const s = {}, l = window.higlassTracksByType && window.higlassTracksByType[a.type] && window.higlassTracksByType[a.type].config && window.higlassTracksByType[a.type].config.optionsInfo;
      if (l)
        for (const u of Object.keys(l))
          Ln[u] = l[u];
      if (!Tr[a.type] || !Tr[a.type].availableOptions)
        return null;
      for (const u of Tr[a.type].availableOptions)
        if (u in Ln) {
          if (s[u] = {
            name: Ln[u].name
          }, Ln[u].generateOptions) {
            const c = Ln[u].generateOptions(a);
            s[u].children || (s[u].children = {});
            for (const f of c) {
              const h = {
                name: f.name,
                value: f.value,
                handler: () => {
                  a.options[u] = f.value, this.props.onTrackOptionsChanged(a.uid, a.options), this.props.closeMenu();
                }
              };
              s[u].children[f.value] = h;
            }
          }
          if (Ln[u].inlineOptions)
            for (const c in Ln[u].inlineOptions) {
              const f = Ln[u].inlineOptions[c];
              s[u].children || (s[u].children = {});
              const h = {
                name: f.name,
                value: f.value
                // missing handler to be filled in below
              };
              f.componentPickers && f.componentPickers[a.type] ? h.handler = () => {
                this.props.onConfigureTrack(a, f.componentPickers[a.type]), this.props.closeMenu();
              } : h.handler = () => {
                a.options[u] = f.value, this.props.onTrackOptionsChanged(a.uid, a.options), this.props.closeMenu();
              }, s[u].children[c] = h;
            }
          else
            Ln[u].componentPickers && Ln[u].componentPickers[a.type] && (s[u].handler = () => {
              this.props.onConfigureTrack(a, Ln[u].componentPickers[a.type]), this.props.closeMenu();
            });
        }
      return import_react.default.createElement(Nk, {
        key: "config-series-menu",
        closeMenu: this.props.closeMenu,
        menuItems: s,
        orientation: this.state.orientation,
        parentBbox: o,
        position: i,
        theme: this.props.theme
      });
    }
    /**
     * Return a list of track types that can be used
     * with the data for this track
     *
     * @param {Object} position The position where to draw ths menu (e.g. {left: 42, top: 88})
     *
     * @param (Object) bbox
     *  The bounding box of the parent menu, used to determine whether
     *  to draw the child menu on the left or the right
     *
     * @param (Object) track The track definition for this series (as in the viewconf)
     */
  }, {
    key: "getTrackTypeItems",
    value: function(i, o, a) {
      window.higlassTracksByType && Object.keys(window.higlassTracksByType).forEach((f) => {
        Tr[f] = window.higlassTracksByType[f].config;
      });
      let {
        datatype: s
      } = a, l = null;
      a.type in Tr && (s || (s = Tr[a.type].datatype[0]), {
        orientation: l
      } = Tr[a.type]);
      const u = Object.values(Tr).filter((f) => f.datatype).filter((f) => f.orientation).filter((f) => f.datatype.includes(s)).filter((f) => f.orientation === l).map((f) => f.type), c = {};
      for (let f = 0; f < u.length; f++)
        c[u[f]] = {
          value: u[f],
          name: u[f],
          handler: () => {
            this.props.onChangeTrackType(a.uid, u[f]);
          }
        };
      return import_react.default.createElement(Nk, {
        key: "track-type-items",
        closeMenu: this.props.closeMenu,
        menuItems: c,
        orientation: this.state.orientation,
        parentBbox: o,
        position: i,
        theme: this.props.theme
      });
    }
  }, {
    key: "getSubmenu",
    value: function() {
      if (this.state.submenuShown) {
        const i = this.state.submenuSourceBbox, o = this.state.orientation === "left" ? {
          left: this.state.left,
          top: i.top
        } : {
          left: this.state.left + i.width + 7,
          top: i.top
        }, a = this.state.submenuShown, s = a.value;
        return a.option === "track-type" ? this.getTrackTypeItems(o, i, s) : this.getConfigureSeriesMenu(o, i, s);
      }
      return import_react.default.createElement("div", null);
    }
  }, {
    key: "getDivideByMenuItem",
    value: function() {
      if (this.props.series.data && this.props.series.data.type === "divided") {
        const i = {
          tilesetUid: this.props.series.data.children[0].tilesetUid,
          server: this.props.series.data.children[0].server
        };
        return import_react.default.createElement(Ct, {
          className: St["context-menu-item"],
          onClick: () => this.props.onChangeTrackData(this.props.series.uid, i),
          onMouseEnter: (o) => this.handleOtherMouseEnter(o)
        }, import_react.default.createElement("span", {
          className: St["context-menu-span"]
        }, "Remove divisor"));
      }
      return import_react.default.createElement(Ct, {
        className: St["context-menu-item"],
        onClick: () => this.props.onAddDivisor(this.props.series),
        onMouseEnter: (i) => this.handleOtherMouseEnter(i)
      }, import_react.default.createElement("span", {
        className: St["context-menu-span"]
      }, "Divide by"));
    }
  }, {
    key: "componentWillUnmount",
    value: function() {
    }
  }, {
    key: "render",
    value: function() {
      let i = null;
      Tr[this.props.series.type] && Tr[this.props.series.type].exportable && (i = import_react.default.createElement(Ct, {
        className: St["context-menu-item"],
        onClick: () => this.props.onExportData(this.props.hostTrack.uid, this.props.track.uid),
        onMouseEnter: (a) => this.handleOtherMouseEnter(a)
      }, import_react.default.createElement("span", {
        className: St["context-menu-span"]
      }, "Export Data")));
      const o = this.props.onAddSeries ? import_react.default.createElement(Ct, {
        className: St["context-menu-item"],
        onClick: () => {
          this.props.onCloseTrack(this.props.series.uid), this.props.onAddSeries(this.props.hostTrack.uid);
        },
        onMouseEnter: (a) => this.handleOtherMouseEnter(a)
      }, import_react.default.createElement("span", {
        className: St["context-menu-span"]
      }, "Replace Series")) : null;
      return import_react.default.createElement("div", {
        ref: (a) => {
          this.div = a;
        },
        className: nr(St["context-menu"], {
          [St["context-menu-dark"]]: this.props.theme === wr
        }),
        "data-menu-type": "SeriesListMenu",
        onMouseLeave: this.props.handleMouseLeave,
        style: {
          left: this.state.left,
          top: this.state.top
        }
      }, import_react.default.createElement(Ct, {
        onClick: () => {
        },
        onMouseEnter: (a) => this.handleItemMouseEnter(a, {
          option: "configure-series",
          value: this.props.track
        }),
        onMouseLeave: (a) => this.handleMouseLeave(a)
      }, "Configure Series", import_react.default.createElement("svg", {
        className: St["play-icon"]
      }, import_react.default.createElement("use", {
        xlinkHref: "#play"
      }))), import_react.default.createElement(Ct, {
        className: St["context-menu-item"],
        onClick: () => {
        },
        onMouseEnter: (a) => this.handleItemMouseEnter(a, {
          option: "track-type",
          value: this.props.track
        }),
        onMouseLeave: (a) => this.handleMouseLeave(a)
      }, import_react.default.createElement("span", {
        className: St["context-menu-span"]
      }, "Track Type", import_react.default.createElement("svg", {
        className: St["play-icon"]
      }, import_react.default.createElement("use", {
        xlinkHref: "#play"
      })))), i, this.getDivideByMenuItem(), import_react.default.createElement(Ct, {
        className: St["context-menu-item"],
        onClick: this.props.onCloseTrack,
        onMouseEnter: (a) => this.handleOtherMouseEnter(a)
      }, import_react.default.createElement("span", {
        className: St["context-menu-span"]
      }, "Close Series")), o, this.getSubmenu());
    }
  }]), r;
}(mc);
var aee = (e12) => {
  let t = [];
  for (const r of e12)
    r.contents ? t = t.concat(r.contents) : t.push(r);
  return t;
};
var kL = (e12, t, r, n) => e12 ? (window.higlassTracksByType && Object.keys(window.higlassTracksByType).forEach((i) => {
  Tr[i] = window.higlassTracksByType[i].config;
}), aee(e12).map((i) => {
  const o = Tr[i.type] ? Tr[i.type].thumbnail : null, a = o ? import_react.default.createElement("div", {
    className: St["context-menu-icon"],
    dangerouslySetInnerHTML: {
      __html: o.outerHTML
    }
  }) : import_react.default.createElement("div", {
    className: St["context-menu-icon"]
  }, import_react.default.createElement("svg", null));
  return import_react.default.createElement(Ct, {
    key: i.uid,
    className: St["context-menu-item"],
    onClick: () => {
      n && n(i.uid);
    },
    onMouseEnter: (s) => {
      t && t(s, i);
    },
    onMouseLeave: (s) => {
      r && r(s);
    }
  }, a, import_react.default.createElement("span", {
    className: St["context-menu-span"]
  }, i.options && i.options.name && i.options.name.length ? i.options.name : i.type, t && r ? import_react.default.createElement("svg", {
    className: St["play-icon"]
  }, import_react.default.createElement("use", {
    xlinkHref: "#play"
  })) : null));
})) : null;
function DJe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function rG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, NJe(n.key), n);
  }
}
function RJe(e12, t, r) {
  return t && rG(e12.prototype, t), r && rG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function NJe(e12) {
  var t = MJe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function MJe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function LJe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Lk(e12, t);
}
function Lk(e12, t) {
  return Lk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Lk(e12, t);
}
function BJe(e12) {
  var t = HJe();
  return function() {
    var n = vE(e12), i;
    if (t) {
      var o = vE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return FJe(this, i);
  };
}
function FJe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return $Je(e12);
}
function $Je(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function HJe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function vE(e12) {
  return vE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, vE(e12);
}
var see = AS((e12) => function(t) {
  LJe(n, t);
  var r = BJe(n);
  function n() {
    return DJe(this, n), r.apply(this, arguments);
  }
  return RJe(n, [{
    key: "getSubmenu",
    value: function() {
      if (this.state.submenuShown) {
        const o = this.state.submenuSourceBbox;
        let a = null;
        this.state.orientation === "left" ? a = {
          left: this.state.left,
          top: o.top
        } : a = {
          left: this.state.left + o.width + 7,
          top: o.top
        };
        const l = aee(this.props.tracks).filter((c) => c.uid === this.state.submenuShown.uid)[0], u = l && l.position !== "whole";
        return import_react.default.createElement(kJe, {
          key: `series-list-menu-${l.uid}`,
          ref: (c) => {
            this.seriesListMenu = c;
          },
          closeMenu: this.props.closeMenu,
          hostTrack: this.props.tracks[0],
          onAddDivisor: this.props.onAddDivisor,
          onAddSeries: u ? this.props.onAddSeries : null,
          onChangeTrackData: this.props.onChangeTrackData,
          onChangeTrackType: this.props.onChangeTrackType,
          onCloseTrack: () => this.props.onCloseTrack(this.state.submenuShown.uid),
          onConfigureTrack: this.props.onConfigureTrack,
          onDivideSeries: this.props.onDivideSeries,
          onExportData: this.props.onExportData,
          onLockScales: this.props.onLockScales,
          onTrackOptionsChanged: this.props.onTrackOptionsChanged,
          orientation: this.state.orientation,
          parentBbox: o,
          position: a,
          series: this.state.submenuShown,
          theme: this.props.theme,
          track: l,
          trackOrientation: this.props.trackOrientation,
          trackSourceServers: this.props.trackSourceServers
        });
      }
      return import_react.default.createElement("div", null);
    }
  }]), n;
}(e12));
function UJe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function nG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, GJe(n.key), n);
  }
}
function jJe(e12, t, r) {
  return t && nG(e12.prototype, t), r && nG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function GJe(e12) {
  var t = zJe(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function zJe(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Yb() {
  return typeof Reflect < "u" && Reflect.get ? Yb = Reflect.get.bind() : Yb = function(t, r, n) {
    var i = VJe(t, r);
    if (i) {
      var o = Object.getOwnPropertyDescriptor(i, r);
      return o.get ? o.get.call(arguments.length < 3 ? t : n) : o.value;
    }
  }, Yb.apply(this, arguments);
}
function VJe(e12, t) {
  for (; !Object.prototype.hasOwnProperty.call(e12, t) && (e12 = Yd(e12), e12 !== null); )
    ;
  return e12;
}
function XJe(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Bk(e12, t);
}
function Bk(e12, t) {
  return Bk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Bk(e12, t);
}
function WJe(e12) {
  var t = KJe();
  return function() {
    var n = Yd(e12), i;
    if (t) {
      var o = Yd(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return YJe(this, i);
  };
}
function YJe(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return qJe(e12);
}
function qJe(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function KJe() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function Yd(e12) {
  return Yd = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, Yd(e12);
}
var ZJe = function(e12) {
  XJe(r, e12);
  var t = WJe(r);
  function r(n) {
    var i;
    return UJe(this, r), i = t.call(this, n), i.seriesRefs = {}, i.seriesListMenu = null, i;
  }
  return jJe(r, [{
    key: "componentDidMount",
    value: function() {
      Yb(Yd(r.prototype), "componentDidMount", this).call(this);
    }
  }, {
    key: "render",
    value: function() {
      return import_react.default.createElement("div", {
        ref: (i) => {
          this.div = i;
        },
        className: nr(St["context-menu"], {
          [St["context-menu-dark"]]: this.props.theme === wr
        }),
        "data-menu-type": "ConfigTrackMenu",
        style: {
          left: this.state.left,
          top: this.state.top
        }
      }, kL(this.props.tracks, this.handleItemMouseEnter.bind(this), this.handleMouseLeave.bind(this), null), import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), import_react.default.createElement(Ct, {
        contextMenu: this,
        onClick: () => this.props.onLockValueScale(this.props.tracks[0].uid),
        onMouseEnter: (i) => this.handleOtherMouseEnter(i)
      }, "Lock Value Scale With"), import_react.default.createElement(Ct, {
        contextMenu: this,
        onClick: () => this.props.onUnlockValueScale(this.props.tracks[0].uid),
        onMouseEnter: (i) => this.handleOtherMouseEnter(i)
      }, "Unlock Value Scale"), import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), import_react.default.createElement(Ct, {
        contextMenu: this,
        onClick: () => this.props.onAddSeries(this.props.tracks[0].uid),
        onMouseEnter: (i) => this.handleOtherMouseEnter(i)
      }, "Add Series"), import_react.default.createElement(Ct, {
        onClick: () => this.props.onCloseTrack(this.props.tracks[0].uid)
      }, "Close Track"), import_react.default.createElement(Ct, {
        onClick: () => {
          this.props.onReplaceTrack(this.props.tracks[0].uid, this.props.trackOrientation);
        }
      }, "Replace Track"), this.getSubmenu());
    }
  }]), r;
}(Ap(mc).with(see));
function lee(e12) {
  return import_react.default.createElement("div", null, kL(e12.tracks, null, null, e12.onCloseTrack), import_react.default.createElement("hr", {
    className: St["context-menu-hr"]
  }), import_react.default.createElement(Ct, {
    onClick: () => e12.onCloseTrack(e12.tracks[0].uid)
  }, "Close all series"));
}
lee.propTypes = {
  onCloseTrack: L.func.isRequired,
  tracks: L.array.isRequired
};
function QJe(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function iG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, eet(n.key), n);
  }
}
function JJe(e12, t, r) {
  return t && iG(e12.prototype, t), r && iG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function eet(e12) {
  var t = tet(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function tet(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function ret(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Fk(e12, t);
}
function Fk(e12, t) {
  return Fk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Fk(e12, t);
}
function net(e12) {
  var t = oet();
  return function() {
    var n = yE(e12), i;
    if (t) {
      var o = yE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return iet(this, i);
  };
}
function iet(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return qb(e12);
}
function qb(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function oet() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function yE(e12) {
  return yE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, yE(e12);
}
var Yl = function(e12) {
  ret(r, e12);
  var t = net(r);
  function r(n) {
    var i;
    return QJe(this, r), i = t.call(this, n), i.clickHandlerBound = i.clickHandler.bind(qb(i)), i.contextMenuHandlerBound = i.contextMenuHandler.bind(qb(i)), i.resizeHandlerBound = i.resizeHandler.bind(qb(i)), i;
  }
  return JJe(r, [{
    key: "componentDidMount",
    value: function() {
      this.popup = document.createElement("div"), document.body.appendChild(this.popup), this.popup.style.zIndex = 99, this.popup.style.position = "absolute", this.popup.className = "hg-popup", document.addEventListener("click", this.clickHandlerBound, true), document.addEventListener("contextmenu", this.contextMenuHandlerBound, true), window.addEventListener("resize", this.resizeHandlerBound, true), this._renderLayer();
    }
  }, {
    key: "componentDidUpdate",
    value: function() {
      this._renderLayer();
    }
  }, {
    key: "componentWillUnmount",
    value: function() {
      document.removeEventListener("click", this.clickHandlerBound, true), document.removeEventListener("contextmenu", this.contextMenuHandlerBound, true), window.removeEventListener("resize", this.resizeHandlerBound, true), import_react_dom.default.unmountComponentAtNode(this.popup), document.body.removeChild(this.popup);
    }
  }, {
    key: "_renderLayer",
    value: function() {
      import_react_dom.default.render(this.props.children, this.popup);
    }
  }, {
    key: "clickHandler",
    value: function(i) {
      this.popup.contains(i.target) || this.props.onMenuClosed && this.props.onMenuClosed(i);
    }
  }, {
    key: "contextMenuHandler",
    value: function(i) {
      i.altKey || (i.preventDefault(), this.clickHandler(i));
    }
  }, {
    key: "resizeHandler",
    value: function() {
      this.props.onMenuClosed(null);
    }
  }, {
    key: "render",
    value: function() {
      return import_react.default.createElement("div", null);
    }
  }]), r;
}(import_react.default.Component);
Yl.defaultProps = {
  onMenuClosed: zV
};
Yl.propTypes = {
  children: L.node.isRequired,
  onMenuClosed: L.func
};
var aet = hV((e12) => import_react.default.createElement(nJ, {
  className: e12.className,
  controlAlignLeft: e12.controlAlignLeft,
  editable: e12.editable,
  handleConfigTrack: e12.handleConfigTrack,
  handleResizeTrack: e12.handleResizeTrack,
  height: e12.height,
  item: e12.item,
  onAddSeries: e12.onAddSeries,
  onCloseTrack: e12.onCloseTrack,
  onCloseTrackMenuOpened: e12.onCloseTrackMenuOpened,
  onConfigTrackMenuOpened: e12.onConfigTrackMenuOpened,
  resizeHandles: e12.resizeHandles,
  uid: e12.uid,
  width: e12.width
}));
var set = {
  "vertical-tiled-plot": "_vertical-tiled-plot_f3ho8_1"
};
function cet(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function oG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, het(n.key), n);
  }
}
function uet(e12, t, r) {
  return t && oG(e12.prototype, t), r && oG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function het(e12) {
  var t = fet(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function fet(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function det(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && $k(e12, t);
}
function $k(e12, t) {
  return $k = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, $k(e12, t);
}
function pet(e12) {
  var t = get();
  return function() {
    var n = _E(e12), i;
    if (t) {
      var o = _E(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return met(this, i);
  };
}
function met(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Kb(e12);
}
function Kb(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function get() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function _E(e12) {
  return _E = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, _E(e12);
}
function aG(e12) {
  return e12 && e12.sourceEvent;
}
var Hk = function(e12) {
  det(r, e12);
  var t = pet(r);
  function r(n) {
    var i;
    return cet(this, r), i = t.call(this, n), i.brushBehavior = Xv().on("start", i.brushStarted.bind(Kb(i))).on("brush", i.brushed.bind(Kb(i))).on("end", i.brushedEnded.bind(Kb(i))), i;
  }
  return uet(r, [{
    key: "componentDidMount",
    value: function() {
      this.props.isRangeSelectionActive && this.addBrush();
    }
  }, {
    key: "shouldComponentUpdate",
    value: function(i, o) {
      if (this.rangeSelectionTriggered)
        return this.rangeSelectionTriggered = false, this.rangeSelectionTriggeredEnd && this.props.rangeSelection !== i.rangeSelection && this.moveBrush(i.rangeSelection[0] ? i.rangeSelection[0] : null, true), this.rangeSelectionTriggeredEnd = false, this.state !== o;
      if (this.props.rangeSelection !== i.rangeSelection) {
        const a = this.props.is1dRangeSelection ? 0 : 1;
        return this.moveBrush(i.rangeSelection[a] ? i.rangeSelection[a] : null, i.rangeSelectionEnd), this.state !== o;
      }
      return true;
    }
  }, {
    key: "componentDidUpdate",
    value: function() {
      this.props.isRangeSelectionActive ? this.addBrush() : this.removeBrush();
    }
    /* --------------------------- Getter / Setter ---------------------------- */
    /* ---------------------------- Custom Methods ---------------------------- */
  }, {
    key: "addBrush",
    value: function() {
      !this.brushEl || this.brushElAddedBefore === this.brushEl || (this.brushElAddedBefore && this.brushElAddedBefore.on(".brush", null), this.brushEl.call(this.brushBehavior), this.brushElAddedBefore = this.brushEl, Df(this.brushEl, jo["track-range-selection-group-brush-selection"]));
    }
  }, {
    key: "brushed",
    value: function(i) {
      const o = this.rangeSelectionMoved;
      this.rangeSelectionMoved = false, !(!aG(i) || !this.props.onRangeSelection || o) && (this.rangeSelectionTriggered = true, this.props.onRangeSelection(i.selection));
    }
  }, {
    key: "brushStarted",
    value: function(i) {
      !aG(i) || !i.selection || this.props.onRangeSelectionStart();
    }
  }, {
    key: "brushedEnded",
    value: function(i) {
      if (!this.props.is1dRangeSelection)
        return;
      const o = this.rangeSelectionMovedEnd;
      this.rangeSelectionMovedEnd = false, i.selection && i.sourceEvent && this.props.onRangeSelection && !o && (this.rangeSelectionTriggered = true, this.rangeSelectionTriggeredEnd = true, this.props.onRangeSelectionEnd(i.selection)), i.selection || (this.rangeSelectionTriggered = true, this.props.onRangeSelectionReset());
    }
  }, {
    key: "moveBrush",
    value: function(i, o = false) {
      if (!this.brushEl)
        return;
      const a = i ? [this.props.scale(i[0]), this.props.scale(i[1])] : null;
      this.rangeSelectionMoved = true, this.rangeSelectionMovedEnd = true, o ? this.brushEl.transition().call(this.brushBehavior.move, a) : this.brushEl.call(this.brushBehavior.move, a);
    }
  }, {
    key: "removeBrush",
    value: function() {
      this.brushElAddedBefore && (this.brushElAddedBefore.call(this.brushBehavior.move, null), this.brushElAddedBefore.on(".brush", null), this.brushElAddedBefore = void 0, this.props.onRangeSelectionReset());
    }
    /* ------------------------------ Rendering ------------------------------- */
  }, {
    key: "render",
    value: function() {
      const i = this.props.tracks.map((s) => s.width).reduce(Ol, 0), o = this.props.tracks.map((s) => ip(s)).reduce(qv, false), a = jo[this.props.isRangeSelectionActive ? "track-range-selection-active" : "track-range-selection"];
      return import_react.default.createElement("div", {
        className: set["vertical-tiled-plot"]
      }, o && import_react.default.createElement("svg", {
        ref: (s) => {
          this.brushEl = Wt(s);
        },
        className: a,
        style: {
          height: this.props.height,
          width: i
        },
        xmlns: "http://www.w3.org/2000/svg"
      }), import_react.default.createElement(CS, {
        axis: "x",
        className: nr(Go.list, Go.stylizedList, Go.horizontalList),
        component: rJ,
        editable: this.props.editable,
        handleConfigTrack: this.props.handleConfigTrack,
        handleResizeTrack: this.props.handleResizeTrack,
        height: this.props.height,
        helperClass: Go.stylizedHelper,
        itemClass: nr(Go.stylizedItem, Go.horizontalItem),
        itemControlAlignLeft: this.props.tracksControlAlignLeft,
        itemReactClass: aet,
        items: this.props.tracks.map((s) => ({
          configMenuVisible: s.uid === this.props.configTrackMenuId,
          uid: s.uid || Gt.nice(),
          height: this.props.height,
          width: s.width,
          value: s.value
        })),
        onAddSeries: this.props.onAddSeries,
        onCloseTrack: this.props.onCloseTrack,
        onCloseTrackMenuOpened: this.props.onCloseTrackMenuOpened,
        onConfigTrackMenuOpened: this.props.onConfigTrackMenuOpened,
        onSortEnd: this.props.handleSortEnd,
        referenceAncestor: this.props.referenceAncestor,
        resizeHandles: this.props.resizeHandles,
        useDragHandle: true,
        width: i
      }));
    }
  }]), r;
}(import_react.default.Component);
Hk.propTypes = {
  configTrackMenuId: L.string,
  editable: L.bool,
  handleConfigTrack: L.func,
  handleResizeTrack: L.func,
  handleSortEnd: L.func,
  is1dRangeSelection: L.bool,
  isRangeSelectionActive: L.bool,
  height: L.number,
  onAddSeries: L.func,
  onCloseTrack: L.func,
  onCloseTrackMenuOpened: L.func,
  onConfigTrackMenuOpened: L.func,
  onRangeSelection: L.func,
  onRangeSelectionEnd: L.func,
  onRangeSelectionReset: L.func,
  onRangeSelectionStart: L.func,
  rangeSelection: L.array,
  rangeSelectionEnd: L.bool,
  referenceAncestor: L.func,
  resizeHandles: L.object,
  scale: L.func,
  tracks: L.array,
  tracksControlAlignLeft: L.bool
};
function vet(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function sG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, _et(n.key), n);
  }
}
function yet(e12, t, r) {
  return t && sG(e12.prototype, t), r && sG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function _et(e12) {
  var t = bet(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function bet(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Tet(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Uk(e12, t);
}
function Uk(e12, t) {
  return Uk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Uk(e12, t);
}
function Eet(e12) {
  var t = Oet();
  return function() {
    var n = bE(e12), i;
    if (t) {
      var o = bE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return wet(this, i);
  };
}
function wet(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Aet(e12);
}
function Aet(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function Oet() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function bE(e12) {
  return bE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, bE(e12);
}
var cee = function(e12) {
  Tet(r, e12);
  var t = Eet(r);
  function r() {
    return vet(this, r), t.apply(this, arguments);
  }
  return yet(r, [{
    key: "render",
    value: function() {
      const i = kL(this.props.tracks, this.handleItemMouseEnter.bind(this), this.handleMouseLeave.bind(this)), o = this.props.customItems ? import_react.default.Children.map(this.props.customItems, (a) => import_react.default.cloneElement(a, {
        onMouseEnter: (s) => {
          this.handleOtherMouseEnter(s);
        }
      })) : null;
      return import_react.default.createElement("div", {
        ref: (a) => {
          this.div = a;
        },
        className: nr(St["context-menu"], {
          [St["context-menu-dark"]]: this.props.theme === wr
        }),
        "data-menu-type": "ViewContextMenu",
        style: {
          left: this.state.left,
          top: this.state.top
        }
      }, o, o && import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), i, i && import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), import_react.default.createElement(Ct, {
        onClick: () => this.props.onAddTrack({
          type: "horizontal-rule",
          y: this.props.coords[1],
          position: "whole"
        }),
        onMouseEnter: (a) => this.handleOtherMouseEnter(a)
      }, "Add Horizontal Rule"), import_react.default.createElement(Ct, {
        onClick: () => this.props.onAddTrack({
          type: "vertical-rule",
          x: this.props.coords[0],
          position: "whole"
        }),
        onMouseEnter: (a) => this.handleOtherMouseEnter(a)
      }, "Add Vertical Rule"), import_react.default.createElement(Ct, {
        onClick: () => this.props.onAddTrack({
          type: "cross-rule",
          x: this.props.coords[0],
          y: this.props.coords[1],
          position: "whole"
        }),
        onMouseEnter: (a) => this.handleOtherMouseEnter(a)
      }, "Add Cross Rule"), import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), this.hasMatrixTrack(this.props.tracks) && import_react.default.createElement(Ct, {
        onClick: this.handleAddHorizontalSection.bind(this),
        onMouseEnter: (a) => this.handleOtherMouseEnter(a)
      }, "Add Horizontal Cross Section"), this.hasMatrixTrack(this.props.tracks) && import_react.default.createElement(Ct, {
        onClick: this.handleAddVerticalSection.bind(this),
        onMouseEnter: (a) => this.handleOtherMouseEnter(a)
      }, "Add Vertical Cross Section"), this.getSubmenu());
    }
  }, {
    key: "hasMatrixTrack",
    value: function(i) {
      return hb(this.props.tracks).filter((a) => a.type === "heatmap").length > 0;
    }
  }, {
    key: "handleAddHorizontalSection",
    value: function() {
      const o = hb(this.props.tracks).filter((a) => a.type === "heatmap")[0];
      this.props.onAddTrack({
        type: "horizontal-rule",
        y: this.props.coords[1],
        position: "whole"
      }), this.props.onAddTrack({
        data: {
          type: "horizontal-section",
          server: o.server,
          tilesetUid: o.tilesetUid,
          slicePos: this.props.coords[1]
        },
        options: {
          valueScaling: "log"
        },
        type: "horizontal-bar",
        height: 30,
        position: "top"
      });
    }
  }, {
    key: "handleAddVerticalSection",
    value: function() {
      const o = hb(this.props.tracks).filter((a) => a.type === "heatmap")[0];
      this.props.onAddTrack({
        type: "vertical-rule",
        x: this.props.coords[0],
        position: "whole"
      }), this.props.onAddTrack({
        data: {
          type: "vertical-section",
          server: o.server,
          tilesetUid: o.tilesetUid,
          slicePos: this.props.coords[0]
        },
        options: {
          valueScaling: "log"
        },
        type: "vertical-bar",
        height: 30,
        position: "left"
      });
    }
  }]), r;
}(Ap(mc).with(see));
cee.propTypes = {
  // the data coordinates where this context menu was initiated
  coords: L.array,
  customItems: L.array
};
function Iet(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function lG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, Cet(n.key), n);
  }
}
function Pet(e12, t, r) {
  return t && lG(e12.prototype, t), r && lG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function Cet(e12) {
  var t = xet(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function xet(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function ket(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && jk(e12, t);
}
function jk(e12, t) {
  return jk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, jk(e12, t);
}
function Det(e12) {
  var t = Net();
  return function() {
    var n = TE(e12), i;
    if (t) {
      var o = TE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return Ret(this, i);
  };
}
function Ret(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Nn(e12);
}
function Nn(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function Net() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function TE(e12) {
  return TE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, TE(e12);
}
var DL = function(e12) {
  ket(r, e12);
  var t = Det(r);
  function r(n) {
    var i;
    Iet(this, r), i = t.call(this, n), i.closing = false;
    const {
      tracks: o
    } = i.props;
    return i.canvasElement = null, i.tracksByUidInit = {}, [...i.props.tracks.top || [], ...i.props.tracks.right || [], ...i.props.tracks.bottom || [], ...i.props.tracks.left || [], ...i.props.tracks.gallery || [], ...i.props.tracks.center || []].forEach((a) => {
      a.type === "combined" ? a.contents.forEach((s) => {
        i.tracksByUidInit[s.uid] = false;
      }) : i.tracksByUidInit[a.uid] = false;
    }), i.xScale = null, i.yScale = null, i.addUidsToTracks(o), i.trackToReplace = null, i.trackRenderer = null, i.configTrackMenu = null, i.state = {
      sizeMeasured: false,
      height: 10,
      width: 10,
      tracks: o,
      init: false,
      addTrackPosition: null,
      customDialog: null,
      mouseOverOverlayUid: null,
      // trackOptions: null
      // trackOptions: trackOptions
      forceUpdate: 0,
      // a random value that will be assigned by
      // crucial functions to force an update
      rangeSelection: [null, null],
      rangeSelectionEnd: false,
      chromInfo: null,
      defaultChromSizes: null,
      contextMenuCustomItems: null,
      contextMenuPosition: null,
      addDivisorDialog: null
    }, i.reset = true, window.higlassTracksByType && Object.keys(window.higlassTracksByType).forEach((a) => {
      Tr[a] = window.higlassTracksByType[a].config;
    }), i.topHeight = 0, i.bottomHeight = 0, i.leftWidth = 0, i.rightWidth = 0, i.centerHeight = 0, i.centerWidth = 0, i.dragTimeout = null, i.previousPropsStr = "", i.contextMenuHandlerBound = i.contextMenuHandler.bind(Nn(i)), i.handleNoTrackAddedBound = i.handleNoTrackAdded.bind(Nn(i)), i.handleTracksAddedBound = i.handleTracksAdded.bind(Nn(i)), i.closeMenusBound = i.closeMenus.bind(Nn(i)), i.handleAddDivisorBound = i.handleAddDivisor.bind(Nn(i)), i.handleAddSeriesBound = i.handleAddSeries.bind(Nn(i)), i.handleChangeTrackDataBound = i.handleChangeTrackData.bind(Nn(i)), i.handleChangeTrackTypeBound = i.handleChangeTrackType.bind(Nn(i)), i.handleCloseTrackBound = i.handleCloseTrack.bind(Nn(i)), i.handleConfigureTrackBound = i.handleConfigureTrack.bind(Nn(i)), i.handleExportTrackDataBound = i.handleExportTrackData.bind(Nn(i)), i.handleLockValueScaleBound = i.handleLockValueScale.bind(Nn(i)), i.handleReplaceTrackBound = i.handleReplaceTrack.bind(Nn(i)), i.handleTrackOptionsChangedBound = i.handleTrackOptionsChanged.bind(Nn(i)), i.handleUnlockValueScaleBound = i.handleUnlockValueScale.bind(Nn(i)), i.onAddTrack = i.handleAddTrack.bind(Nn(i)), i;
  }
  return Pet(r, [{
    key: "waitForDOMAttachment",
    value: function(i) {
      if (!this.mounted)
        return;
      const o = import_react_dom.default.findDOMNode(this);
      document.body.contains(o) ? i() : requestAnimationFrame(() => this.waitForDOMAttachment(i));
    }
  }, {
    key: "componentDidMount",
    value: function() {
      this.mounted = true, this.element = import_react_dom.default.findDOMNode(this), this.canvasElement = import_react_dom.default.findDOMNode(this.props.canvasElement), this.waitForDOMAttachment(() => {
        w0.ElementQueries.listen(), this.resizeSensor = new w0.ResizeSensor(this.element.parentNode, this.measureSize.bind(this)), this.measureSize();
      }), this.addEventListeners(), this.pubSubs = [], this.pubSubs.push(this.props.pubSub.subscribe("contextmenu", this.contextMenuHandlerBound));
    }
    // eslint-disable-next-line camelcase
  }, {
    key: "UNSAFE_componentWillReceiveProps",
    value: function(i) {
      this.addUidsToTracks(i.tracks), this.setState({
        tracks: i.tracks
      });
    }
  }, {
    key: "shouldComponentUpdate",
    value: function(i, o) {
      const a = this.previousPropsStr, s = this.updatablePropsToString(i), l = JSON.stringify(this.state), u = JSON.stringify(o), c = a !== s || l !== u || this.props.chooseTrackHandler !== i.chooseTrackHandler || this.props.customDialog !== i.customDialog;
      c && (this.previousPropsStr = s);
      const f = this.numTracks;
      return this.numTracks = 0, hs(this.props.tracks, () => this.numTracks++), this.reset = this.reset || f === 0 && this.numTracks > 0, this.numTracks || (this.tracksByUidInit = {}), c;
    }
    // eslint-disable-next-line camelcase
  }, {
    key: "UNSAFE_componentWillUpdate",
    value: function() {
    }
  }, {
    key: "componentDidUpdate",
    value: function(i, o) {
      if (o.rangeSelection !== this.state.rangeSelection) {
        let a = [null, null];
        this.state.defaultChromSizes && this.state.rangeSelection.every((s) => s && s.length) && (a = this.state.rangeSelection.map((s) => N0(...s, this.state.defaultChromSizes))), this.props.onRangeSelection({
          dataRange: this.state.rangeSelection,
          genomicRange: a
        });
      }
      if (this.state.customDialog || this.props.customDialog) {
        const a = this.state.customDialog || this.props.customDialog;
        if (a.length > 0) {
          const s = [], l = [];
          a.forEach((u) => {
            s.push(u.bodyComponent), l.push(u.bodyProps);
          }), this.props.modal.open(import_react.default.createElement(xL, {
            children: s,
            bodyProps: l,
            onCancel: this.props.closeCustomDialog,
            title: a[0].title
          }));
        }
      }
      if (i.tracks.center, this.props.tracks.center, (this.state.addTrackPosition || this.props.addTrackPosition) && this.props.modal.open(import_react.default.createElement(fE, {
        host: this.state.addTrackHost,
        onCancel: this.handleNoTrackAddedBound,
        onTracksChosen: this.handleTracksAddedBound,
        position: this.state.addTrackPosition || this.props.addTrackPosition,
        trackSourceServers: this.props.trackSourceServers
      })), this.state.addDivisorDialog) {
        const a = this.state.addDivisorDialog;
        this.props.modal.open(import_react.default.createElement(fE, {
          datatype: Tr[a.type].datatype[0],
          host: this.state.addTrackHost,
          onCancel: () => {
            this.setState({
              addDivisorDialog: null
            });
          },
          onTracksChosen: (s) => {
            this.handleDivisorChosen(a, s);
          },
          trackSourceServers: this.props.trackSourceServers
        }));
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function() {
      this.closing = true, this.removeEventListeners(), this.pubSubs.forEach((i) => this.props.pubSub.unsubscribe(i));
    }
  }, {
    key: "addUidsToTracks",
    value: function(i) {
      Object.keys(i).forEach((o) => {
        i[o].forEach((a) => {
          a.uid = a.uid || Gt.nice();
        });
      });
    }
    /*
    getDefaultChromSizes() {
      try {
        const centralHeatmap = this.findCentralHeatmapTrack(
          this.props.tracks.center
        );
        this.getChromInfo = chromInfo
          .get(`${centralHeatmap.server}/chrom-sizes/?id=${centralHeatmap.tilesetUid}`)
          .then(defaultChromSizes => this.setState({ defaultChromSizes }));
      } catch (err) {  }
    }
    */
  }, {
    key: "contextMenuHandler",
    value: function(i) {
      if (!this.divTiledPlot)
        return;
      const o = this.divTiledPlot.getBoundingClientRect();
      if (!ZR(i.clientX, i.clientY, o.left, o.left + o.width, o.top, o.top + o.height))
        return;
      const s = [i.clientX, i.clientY], l = vr(i, this.divTiledPlot), u = this.trackRenderer.zoomedXScale.invert(l[0]), c = this.trackRenderer.zoomedYScale.invert(l[1]);
      let f = null;
      i.hgCustomItems && (f = i.hgCustomItems.map((h) => import_react.default.createElement(Ct, {
        key: h.key,
        onClick: h.onClick
      }, h.text))), this.setState({
        contextMenuCustomItems: f,
        contextMenuPosition: {
          left: s[0],
          top: s[1],
          canvasLeft: l[0] + this.trackRenderer.xPositionOffset,
          canvasTop: l[1] + this.trackRenderer.yPositionOffset
        },
        contextMenuDataX: u,
        contextMenuDataY: c
      });
    }
  }, {
    key: "measureSize",
    value: function() {
      this.element.clientWidth > 0 && this.element.clientHeight > 0 && this.setState({
        sizeMeasured: true,
        width: this.element.clientWidth,
        height: this.element.clientHeight
      });
    }
  }, {
    key: "handleTrackOptionsChanged",
    value: function(i, o) {
      return this.props.onTrackOptionsChanged(i, o);
    }
  }, {
    key: "handleScalesChanged",
    value: function(i, o) {
      this.xScale = i, this.yScale = o, this.props.onScalesChanged(i, o);
    }
    /**
     * We've received information about a tileset from the server. Register it
     * with the track definition.
     * @param trackUid (string): The identifier for the track
     * @param tilesetInfo (object): Information about the track (hopefully including
     *                              its name.
     */
  }, {
    key: "handleTilesetInfoReceived",
    value: function(i, o) {
      const a = Zi(this.props.tracks, i);
      if (!a) {
        console.warn("Strange, track not found:", i);
        return;
      }
      this.tracksByUidInit[a.uid] = true, this.checkAllTilesetInfoReceived(), a.options || (a.options = {}), a.name = o.name, a.maxWidth = o.max_width, a.transforms = o.transforms, a.aggregationModes = o.aggregation_modes, a.header = o.header, a.binsPerDimension = o.bins_per_dimension, o.resolutions ? (a.maxZoom = o.resolutions.length - 1, a.resolutions = o.resolutions) : a.maxZoom = o.max_zoom, a.coordSystem = o.coordSystem, a.datatype = o.datatype;
    }
    /**
     * Check if all track which are expecting a tileset info have been loaded.
     */
  }, {
    key: "checkAllTilesetInfoReceived",
    value: function() {
      if (this.state.init && !this.reset || !this.trackRenderer || !this.props.zoomToDataExtentOnInit())
        return;
      const i = Object.keys(this.trackRenderer.trackDefObjects).map((a) => {
        const s = this.trackRenderer.trackDefObjects[a].trackObject;
        return s.childTracks ? s.childTracks : s;
      }).reduce((a, s) => a.concat(s), []).filter(({
        tilesetInfo: a
      }) => typeof a < "u" && a !== true), o = Object.values(this.tracksByUidInit).filter((a) => a).length;
      i.length === o && (this.setState({
        init: true
      }), this.reset = false, this.handleZoomToData());
    }
  }, {
    key: "handleOverlayMouseEnter",
    value: function(i) {
      this.setState({
        mouseOverOverlayUid: i
      });
    }
  }, {
    key: "handleOverlayMouseLeave",
    value: function(i) {
      i === this.state.mouseOverOverlayUid && this.setState({
        mouseOverOverlayUid: null
      });
    }
  }, {
    key: "handleTrackPositionChosen",
    value: function(i) {
      this.setState({
        mouseOverOverlayUid: null
      }), this.props.chooseTrackHandler(i.track.uid);
    }
  }, {
    key: "handleNoTrackAdded",
    value: function() {
      this.trackToReplace = null, this.props.onNoTrackAdded(), this.setState({
        addTrackPosition: null,
        addTrackHost: null
      });
    }
  }, {
    key: "handleAddDivisor",
    value: function(i) {
      this.setState({
        addDivisorDialog: i
      });
    }
    /**
     * The user has selected a track that they wish to use to normalize another
     * track.
     */
  }, {
    key: "handleDivisorChosen",
    value: function(i, o) {
      this.setState({
        addDivisorDialog: null
      });
      const a = i.data ? {
        server: i.data.server,
        tilesetUid: i.data.tilesetUid
      } : {
        server: i.server,
        tilesetUid: i.tilesetUid
      }, s = {
        server: o[0].server,
        tilesetUid: o[0].uuid
      };
      this.handleChangeTrackData(i.uid, {
        type: "divided",
        children: [a, s]
      });
    }
  }, {
    key: "handleDivideSeries",
    value: function(i) {
    }
  }, {
    key: "handleAddSeries",
    value: function(i) {
      const o = Jm(this.props.tracks, i), a = Zi(this.props.tracks, i);
      this.setState({
        addTrackPosition: o,
        addTrackHost: a
      });
    }
  }, {
    key: "handleReplaceTrack",
    value: function(i, o) {
      this.trackToReplace = i, this.handleAddTrack(o);
    }
  }, {
    key: "handleAddTrack",
    value: function(i) {
      this.setState({
        addTrackPosition: i,
        addTrackHost: null
      });
    }
  }, {
    key: "handleResizeTrack",
    value: function(i, o, a) {
      const {
        tracks: s
      } = this.state;
      for (const l in s) {
        const c = s[l].filter((f) => f.uid === i);
        c.length > 0 && (c[0].width = o, c[0].height = a);
      }
      this.setState({
        tracks: s,
        forceUpdate: Math.random()
      }), this.props.onResizeTrack();
    }
  }, {
    key: "closeMenus",
    value: function() {
      this.setState({
        closeTrackMenuId: null,
        configTrackMenuId: null,
        contextMenuPosition: null,
        contextMenuCustomItems: null
      });
    }
  }, {
    key: "handleLockValueScale",
    value: function(i) {
      this.closeMenus(), this.props.onLockValueScale(i);
    }
  }, {
    key: "handleUnlockValueScale",
    value: function(i) {
      this.closeMenus(), this.props.onUnlockValueScale(i);
    }
  }, {
    key: "handleCloseTrack",
    value: function(i) {
      this.closeMenus(), this.props.onCloseTrack(i);
    }
  }, {
    key: "handleChangeTrackType",
    value: function(i, o) {
      this.closeMenus(), this.props.onChangeTrackType(i, o);
    }
    /**
     * Change this tracks data section so that it
     * is either of type "divided" or the "divided"
     * type is removed
     */
  }, {
    key: "handleChangeTrackData",
    value: function(i, o) {
      this.closeMenus(), this.props.onChangeTrackData(i, o);
    }
  }, {
    key: "handleTracksAdded",
    value: function(i, o, a) {
      return this.trackToReplace && (this.handleCloseTrack(this.trackToReplace), this.trackToReplace = null), this.props.onTracksAdded(i, o, a), this.setState({
        addTrackPosition: null,
        addTrackHost: null
      }), i;
    }
  }, {
    key: "handleCloseTrackMenuOpened",
    value: function(i, o) {
      this.setState({
        closeTrackMenuId: i,
        closeTrackMenuLocation: o
      });
    }
  }, {
    key: "handleCloseContextMenu",
    value: function() {
      this.setState({
        contextMenuCustomItems: null,
        contextMenuPosition: null,
        contextMenuDataX: null,
        contextMenuDataY: null
      });
    }
  }, {
    key: "handleCloseTrackMenuClosed",
    value: function() {
      this.setState({
        closeTrackMenuId: null
      });
    }
  }, {
    key: "handleConfigTrackMenuOpened",
    value: function(i, o) {
      this.closeMenus(), this.setState({
        configTrackMenuId: i,
        configTrackMenuLocation: o
      });
    }
  }, {
    key: "handleConfigureTrack",
    value: function(i, o) {
      this.setState({
        configTrackMenuId: null,
        trackOptions: {
          track: i,
          configComponent: o
        }
      }), this.closeMenus();
    }
  }, {
    key: "handleSortEnd",
    value: function(i) {
      this.setState((o) => {
        const a = o.tracks, s = {};
        for (let l = 0; l < i.length; l++)
          s[i[l].uid] = l;
        for (const l in a) {
          const u = a[l];
          if (u.length && u[0].uid in s) {
            const c = new Array(u.length);
            for (let f = 0; f < u.length; f++)
              c[s[u[f].uid]] = u[f];
            a[l] = c;
          }
        }
        return {
          tracks: a,
          forceUpdate: Math.random()
        };
      });
    }
  }, {
    key: "createTracksAndLocations",
    value: function() {
      const i = [], {
        tracks: o
      } = this.state;
      return wP.forEach((a) => {
        o[a] && o[a].forEach((s) => {
          s.contents && s.contents.forEach((l) => {
            l.position = a;
          }), s.position = a, i.push({
            track: s,
            location: a
          });
        });
      }), i;
    }
    /**
     * Calculate where a track is absoluately positioned within the drawing area
     *
     * @param track: The track object (with members, e.g. track.uid, track.width,
     *   track.height)
     * @param location: Where it's being plotted (e.g. 'top', 'bottom')
     * @return: The position of the track and it's height and width
     *          (e.g. {left: 10, top: 20, width: 30, height: 40}
     */
  }, {
    key: "calculateTrackPosition",
    value: function(i, o) {
      let a = this.props.paddingTop, s = this.props.paddingBottom, l = this.props.paddingLeft, u = this.props.paddingRight, c = this.centerWidth, f = i.height, h = 0, d = 0;
      switch (o) {
        case "top":
          l += this.leftWidth;
          for (let p = 0; p < this.state.tracks.top.length && this.state.tracks.top[p].uid !== i.uid; p++)
            a += this.state.tracks.top[p].height;
          break;
        case "bottom":
          l += this.leftWidth, a += this.topHeight + this.centerHeight + this.galleryDim;
          for (let p = 0; p < this.state.tracks.bottom.length && this.state.tracks.bottom[p].uid !== i.uid; p++)
            a += this.state.tracks.bottom[p].height;
          break;
        case "left":
          a += this.topHeight, c = i.width, f = this.centerHeight;
          for (let p = 0; p < this.state.tracks.left.length && this.state.tracks.left[p].uid !== i.uid; p++)
            l += this.state.tracks.left[p].width;
          break;
        case "right":
          l += this.leftWidth + this.centerWidth + this.galleryDim, a += this.topHeight, c = i.width, f = this.centerHeight;
          for (let p = 0; p < this.state.tracks.right.length && this.state.tracks.right[p].uid !== i.uid; p++)
            l += this.state.tracks.right[p].width;
          break;
        case "center":
          l += this.leftWidth, a += this.topHeight, f = this.centerHeight;
          break;
        case "gallery":
          l += this.leftWidthNoGallery, a += this.topHeightNoGallery, c = this.state.width - this.leftWidthNoGallery - this.rightWidthNoGallery - this.props.paddingLeft, f = this.state.height - this.topHeightNoGallery - this.bottomHeightNoGallery - this.props.paddingTop, h = this.galleryDim, d = this.galleryDim;
          for (let p = 0; p < this.state.tracks.gallery.length && this.state.tracks.gallery[p].uid !== i.uid; p++)
            c -= 2 * this.state.tracks.gallery[p].height, f -= 2 * this.state.tracks.gallery[p].height, l += this.state.tracks.gallery[p].height, a += this.state.tracks.gallery[p].height, h -= this.state.tracks.gallery[p].height, d -= this.state.tracks.gallery[p].height;
          for (let p = 0; p < this.state.tracks.right.length; p++)
            u += this.state.tracks.right[p].width;
          for (let p = 0; p < this.state.tracks.bottom.length; p++)
            s += this.state.tracks.bottom[p].height;
          i.offsetX = h, i.offsetY = d, i.offsetTop = a, i.offsetRight = u, i.offsetBottom = s, i.offsetLeft = l;
          break;
        case "whole":
        default:
          c = this.leftWidth + this.centerWidth + this.rightWidth, f = this.topHeight + this.centerHeight + this.bottomHeight;
      }
      return wP.indexOf(o) === -1 && console.warn("Track with unknown position present:", o, i), {
        left: l,
        top: a,
        width: c,
        height: f,
        track: i
      };
    }
    /**
     * Find a central heatmap track among all displayed tracks
     *
     * @param  {Array}  tracks  Tracks to be searched.
     * @return  {Object}  The first central heatmap track or `undefined`.
     */
  }, {
    key: "findCentralHeatmapTrack",
    value: function(i) {
      for (let o = 0; o < i.length; o++) {
        if (i[o].type === "combined")
          return this.findCentralHeatmapTrack(i[o].contents);
        if (i[o].type === "heatmap")
          return i[o];
      }
    }
  }, {
    key: "trackUuidToOrientation",
    value: function(i) {
    }
  }, {
    key: "overlayTracks",
    value: function(i) {
      return this.props.overlays ? this.props.overlays.filter((a) => a.includes && a.includes.length).map((a) => {
        const s = a.type ? `overlay-${a.type}-track` : "overlay-track", l = {
          ...a,
          uid: a.uid || Gt.nice(),
          includes: a.includes,
          type: s,
          options: Object.assign(a.options, {
            orientationsAndPositions: a.includes.map((u) => {
              const c = Zi(this.props.tracks, u);
              if (!c)
                return console.warn(`OverlayTrack included uid (${u}) not found in the track list`), null;
              const f = Jm(this.props.tracks, c.uid);
              let h;
              if ((f === "top" || f === "bottom") && (h = "1d-horizontal"), (f === "left" || f === "right") && (h = "1d-vertical"), f === "center" && (h = "2d"), !h)
                return console.warn("Only top, bottom, left, right, or center tracks can be overlaid at the moment"), null;
              const d = i.filter((m) => m.track.uid === u);
              if (!d.length)
                return null;
              const p = {
                left: d[0].left - this.props.paddingLeft,
                top: d[0].top - this.props.paddingTop,
                width: d[0].width,
                height: d[0].height
              };
              return {
                orientation: h,
                position: p
              };
            }).filter((u) => u)
            // filter out null entries
          })
        };
        return {
          top: this.props.paddingTop,
          left: this.props.paddingLeft,
          width: this.leftWidth + this.centerWidth + this.rightWidth,
          height: this.topHeight + this.centerHeight + this.bottomHeight + this.props.marginTop + this.props.marginBottom,
          track: l
        };
      }) : [];
    }
  }, {
    key: "positionedTracks",
    value: function() {
      return this.createTracksAndLocations().map(({
        track: o,
        location: a
      }) => this.calculateTrackPosition(o, a));
    }
  }, {
    key: "createTrackPositionTexts",
    value: function() {
      const i = this.positionedTracks();
      return this.createTracksAndLocations(), i.map((a) => {
        const {
          track: s
        } = a;
        return import_react.default.createElement("div", {
          key: s.uid,
          style: {
            left: a.left,
            top: a.top,
            width: a.width,
            height: a.height,
            position: "absolute"
          }
        }, s.uid.slice(0, 2));
      });
    }
  }, {
    key: "handleExportTrackData",
    value: function(i, o) {
      const a = Zi(this.props.tracks, o);
      let s = null;
      i !== o ? s = this.trackRenderer.trackDefObjects[i].trackObject.createdTracks[a.uid] : {
        trackObject: s
      } = this.trackRenderer.trackDefObjects[i], s.exportData(), this.closeMenus();
    }
    /**
     * List all the tracks that are under this mouse position
     */
  }, {
    key: "listTracksAtPosition",
    value: function(i, o, a = false) {
      const s = [];
      if (!this.trackRenderer)
        return [];
      for (const l in this.trackRenderer.trackDefObjects) {
        const u = this.trackRenderer.trackDefObjects[l].trackObject;
        if (u.respondsToPosition(i, o))
          if (a) {
            if (this.props.tracks.center)
              if (this.props.tracks.center.contents)
                for (let c = 0; c < this.props.tracks.center.contents.length; c++)
                  this.props.tracks.center.contents[c].uid === l && (u.is2d = true);
              else
                this.props.tracks.center && this.props.tracks.center.length && this.props.tracks.center[0].uid === l && (u.is2d = true);
            s.push(u);
          } else
            s.push(this.trackRenderer.trackDefObjects[l].trackDef.track);
      }
      return s;
    }
  }, {
    key: "listAllTrackObjects",
    value: function() {
      const i = [];
      for (const o in this.trackRenderer.trackDefObjects) {
        const a = this.trackRenderer.trackDefObjects[o];
        if (a.trackObject.createdTracks)
          for (const s in a.trackObject.createdTracks) {
            const l = a.trackObject.createdTracks[s];
            i.push(l);
          }
        else
          i.push(a.trackObject);
      }
      return i;
    }
  }, {
    key: "handleZoomToData",
    value: function() {
      const i = Number.MAX_SAFE_INTEGER, o = Number.MIN_SAFE_INTEGER, a = [i, i], s = [o, o], l = this.listAllTrackObjects();
      for (const d of l)
        if (d.tilesetInfo && d.tilesetInfo.min_pos)
          for (let p = 0; p < d.tilesetInfo.min_pos.length; p++)
            d.tilesetInfo.min_pos[p] < a[p] && (a[p] = d.tilesetInfo.min_pos[p]), d.tilesetInfo.max_pos[p] > s[p] && (s[p] = d.tilesetInfo.max_pos[p]);
      const u = this.trackRenderer.currentProps.paddingLeft + this.trackRenderer.currentProps.leftWidth;
      let c = [u, u + this.trackRenderer.currentProps.centerWidth].map(this.trackRenderer.zoomTransform.rescaleX(this.trackRenderer.xScale).invert);
      const f = this.trackRenderer.currentProps.paddingTop + this.trackRenderer.currentProps.topHeight;
      let h = [f, f + this.trackRenderer.currentProps.centerHeight].map(this.trackRenderer.zoomTransform.rescaleY(this.trackRenderer.yScale).invert);
      this.trackRenderer.zoomTransform.k = 1, this.trackRenderer.zoomTransform.x = 0, this.trackRenderer.zoomTransform.y = 0, this.trackRenderer.applyZoomTransform(), a[0] < Number.MAX_SAFE_INTEGER && s[0] > Number.MIN_SAFE_INTEGER && (c = [a[0], s[0]]), a[1] < Number.MAX_SAFE_INTEGER && s[1] > Number.MIN_SAFE_INTEGER && (h = [a[1], s[1]]), this.props.onDataDomainChanged(c, h);
    }
  }, {
    key: "resetViewport",
    value: function() {
      this.trackRenderer.zoomTransform.k = 1, this.trackRenderer.zoomTransform.x = 0, this.trackRenderer.zoomTransform.y = 0, this.trackRenderer.applyZoomTransform(), this.props.onDataDomainChanged(this.props.initialXDomain, this.props.initialYDomain);
    }
  }, {
    key: "updatablePropsToString",
    value: function(i) {
      return JSON.stringify({
        tracks: i.tracks,
        overlays: i.overlays,
        viewOptions: i.viewOptions,
        uid: i.uid,
        addTrackPosition: i.addTrackPosition,
        editable: i.editable,
        marginTop: i.marginTop,
        marginBottom: i.marginBottom,
        marginLeft: i.marginLeft,
        marginRight: i.marginRight,
        paddingTop: i.paddingTop,
        paddingBottom: i.paddingBottom,
        paddingLeft: i.paddingLeft,
        paddingRight: i.paddingRight,
        mouseTool: i.mouseTool,
        initialXDomain: i.initialXDomain,
        initialYDomain: i.initialYDomain,
        trackSourceServers: i.trackSourceServers,
        zoomable: i.zoomable,
        draggingHappening: i.draggingHappening
      });
    }
  }, {
    key: "getXYScales",
    value: function() {
      this.trackRenderer && (this.xScale = this.trackRenderer.currentXScale, this.yScale = this.trackRenderer.currentYScale);
    }
    /**
     * Translate view to data location.
     *
     * @description
     * The view location is in pixels relative to the browser window. The data
     * location is given by the scaling relative to the initial x and y domains.
     * And the genomic location depends on the chrom sizes.
     *
     * @method  rangeViewToDataLoci
     * @author  Fritz Lekschas
     * @date    2018-01-14
     * @param  {Array}  range  Selected view range
     * @param  {Function}  scale  View to data scaling
     * @return  {Array}  2D array of data locations
     */
  }, {
    key: "rangeViewToDataLoci",
    value: function(i, o) {
      return o ? [parseInt(o.invert(i[0]), 10), parseInt(o.invert(i[1]), 10)] : [null, null];
    }
  }, {
    key: "rangeSelectionResetHandler",
    value: function() {
      this.state.rangeSelectionMaster && this.setState({
        is1dRangeSelection: null,
        rangeSelection: [null, null],
        rangeSelectionMaster: null,
        rangeSelectionEnd: false
      });
    }
  }, {
    key: "rangeSelection1dEndHandler",
    value: function(i) {
      (!this.xScale || !this.yScale) && this.getXYScales();
      const o = i === "x" ? this.xScale : this.yScale;
      return (a) => {
        this.setState((s) => {
          const l = s.is1dRangeSelection ? [null, null] : s.rangeSelection.slice(), u = !this.state.is1dRangeSelection && i === "y" ? 1 : 0;
          let c = this.rangeViewToDataLoci(a, o);
          const f = c[1] - c[0];
          if (this.props.rangeSelection1dSize[0] > f) {
            const h = c[0] + f / 2;
            c = [h - this.props.rangeSelection1dSize[0] / 2, h + this.props.rangeSelection1dSize[0] / 2];
          } else if (this.props.rangeSelection1dSize[1] < f) {
            const h = c[0] + f / 2;
            c = [h - this.props.rangeSelection1dSize[1] / 2, h + this.props.rangeSelection1dSize[1] / 2];
          }
          return l[u] = c, this.props.rangeSelectionToInt && (l[u] = l[u].map((h) => Math.round(h))), {
            rangeSelection: l,
            rangeSelectionEnd: true
          };
        });
      };
    }
  }, {
    key: "rangeSelection1dHandler",
    value: function(i) {
      (!this.xScale || !this.yScale) && this.getXYScales();
      const o = i === "x" ? this.xScale : this.yScale;
      return (a) => {
        this.setState((s) => {
          const l = s.is1dRangeSelection ? [null, null] : s.rangeSelection.slice(), u = !s.is1dRangeSelection && i === "y" ? 1 : 0;
          return l[u] = this.rangeViewToDataLoci(a, o), {
            rangeSelection: l,
            rangeSelectionEnd: false
          };
        });
      };
    }
  }, {
    key: "rangeSelection1dStartHandler",
    value: function() {
      this.state.rangeSelectionMaster || this.setState({
        is1dRangeSelection: true,
        rangeSelectionMaster: true,
        rangeSelectionEnd: false
      });
    }
  }, {
    key: "rangeSelection2dHandler",
    value: function(i) {
      (!this.xScale || !this.yScale) && this.getXYScales(), this.setState({
        rangeSelection: [this.rangeViewToDataLoci(i[0], this.xScale), this.rangeViewToDataLoci(i[1], this.yScale)],
        rangeSelectionEnd: false
      });
    }
  }, {
    key: "rangeSelection2dStartHandler",
    value: function() {
      this.state.rangeSelectionMaster || this.setState({
        is1dRangeSelection: false,
        rangeSelectionMaster: true,
        rangeSelectionEnd: false
      });
    }
  }, {
    key: "rangeSelection2dEndHandler",
    value: function(i) {
      (!this.xScale || !this.yScale) && this.getXYScales();
      const o = this.rangeViewToDataLoci(i[0], this.xScale), a = this.rangeViewToDataLoci(i[1], this.yScale);
      let s = [o, a];
      const l = o[1] - o[0], u = a[1] - a[0], c = [l, u];
      s.forEach((f, h) => {
        if (this.props.rangeSelection1dSize[0] > c[h]) {
          const d = f[0] + Math.round(c[h] / 2);
          f[0] = d - this.props.rangeSelection1dSize[0] / 2, f[1] = d + this.props.rangeSelection1dSize[0] / 2;
        } else if (this.props.rangeSelection1dSize[1] < c[h]) {
          const d = f[0] + Math.round(c[h] / 2);
          f[0] = d - this.props.rangeSelection1dSize[1] / 2, f[1] = d + this.props.rangeSelection1dSize[1] / 2;
        }
      }), this.props.rangeSelectionToInt && (s = s.map((f) => f.map((h) => Math.round(h)))), this.setState({
        rangeSelection: s,
        rangeSelectionEnd: true
      });
    }
  }, {
    key: "getContextMenu",
    value: function() {
      if (this.state.contextMenuPosition) {
        const i = this.listTracksAtPosition(this.state.contextMenuPosition.canvasLeft, this.state.contextMenuPosition.canvasTop);
        return import_react.default.createElement(Yl, {
          onMenuClosed: this.closeMenusBound
        }, import_react.default.createElement(cee, {
          closeMenu: this.closeMenusBound,
          coords: [this.state.contextMenuDataX, this.state.contextMenuDataY],
          customItems: this.state.contextMenuCustomItems,
          onAddDivisor: this.handleAddDivisorBound,
          onAddSeries: this.handleAddSeriesBound,
          onAddTrack: (o) => {
            this.props.onTracksAdded([o], o.position, null), this.handleCloseContextMenu();
          },
          onChangeTrackData: this.handleChangeTrackDataBound,
          onChangeTrackType: this.handleChangeTrackTypeBound,
          onCloseTrack: this.handleCloseTrackBound,
          onConfigureTrack: this.handleConfigureTrackBound,
          onExportData: this.handleExportTrackDataBound,
          onLockValueScale: this.handleLockValueScaleBound,
          onReplaceTrack: this.handleReplaceTrackBound,
          onTrackOptionsChanged: this.handleTrackOptionsChangedBound,
          onUnlockValueScale: this.handleUnlockValueScaleBound,
          orientation: "right",
          position: this.state.contextMenuPosition,
          theme: this.props.theme,
          tracks: i,
          trackSourceServers: this.props.trackSourceServers
        }));
      }
      return null;
    }
    /**
     * Draw an overlay that shows the positions of all the different
     * track areas
     */
  }, {
    key: "getIdealizedTrackPositionsOverlay",
    value: function() {
      const i = this.props.draggingHappening;
      if (typeof i == "boolean")
        return;
      const o = i.datatype;
      if (!(o in nv) && !i.defaultTracks) {
        console.warn("unknown data type:", i.higlassTrack);
        return;
      }
      const a = {
        "1d-horizontal": ["top", "bottom", "left", "right"],
        "2d": ["center"],
        "1d-vertical": ["left", "right"]
      }, s = nv[o] || {};
      if (i.defaultTracks)
        for (const S of i.defaultTracks)
          if (!Tr[S])
            console.warn("unknown track type", S);
          else
            for (const N of a[Tr[S].orientation])
              s[N] = S;
      const l = new Set(["top", "left", "right", "center", "bottom"].filter((S) => S in this.state.tracks && this.state.tracks[S].length)), u = "top" in s, c = "left" in s, f = "right" in s, h = "bottom" in s, d = "center" in s, p = "center" in s || l.has("left") || l.has("right") || l.has("center"), m = "top" in s, g = "bottom" in s && p, v = "left" in s && p, _ = "right" in s && p, y = Object.keys(s).length && ("center" in s || p), b = import_react.default.createElement("div", {
        style: {
          flexGrow: 1
        }
      }), T = import_react.default.cloneElement(b), E = import_react.default.createElement("div", {
        style: {
          display: "flex",
          flexGrow: 1
        }
      }, m && (y || v) ? b : null, import_react.default.createElement(A_, {
        defaultTrackType: s.top,
        draggingHappening: this.props.draggingHappening,
        enabled: u,
        onTrackDropped: (S) => this.handleTracksAdded([S], "top"),
        style: {
          border: "1px solid black",
          flexGrow: 1
        }
      }), m && (y || v) ? T : null), P = import_react.default.createElement("div", {
        style: {
          display: "flex",
          flexGrow: 1
        }
      }, m && (y || v) ? b : null, import_react.default.createElement(A_, {
        defaultTrackType: s.bottom,
        draggingHappening: this.props.draggingHappening,
        enabled: h,
        onTrackDropped: (S) => this.handleTracksAdded([S], "bottom"),
        style: {
          border: "1px solid black",
          flexGrow: 1
        }
      }), m && (y || v) ? T : null), A = import_react.default.createElement(A_, {
        defaultTrackType: s.left,
        draggingHappening: this.props.draggingHappening,
        enabled: c,
        onTrackDropped: (S) => this.handleTracksAdded([S], "left"),
        style: {
          border: "1px solid black",
          flexGrow: 1
        }
      }), I = import_react.default.createElement(A_, {
        defaultTrackType: s.center,
        draggingHappening: this.props.draggingHappening,
        enabled: d,
        onTrackDropped: (S) => this.handleTracksAdded([S], "center"),
        position: "center",
        style: {
          border: "1px solid black",
          flexGrow: 1
        }
      }), x = import_react.default.cloneElement(A, {
        defaultTrackType: s.right,
        enabled: f,
        onTrackDropped: (S) => this.handleTracksAdded([S], "right")
      });
      return import_react.default.createElement("div", {
        style: {
          position: "absolute",
          left: "0px",
          top: "0px",
          width: this.state.width,
          height: this.state.height
        }
      }, import_react.default.createElement("div", {
        style: {
          position: "absolute",
          width: this.state.width,
          height: this.state.height,
          background: "white",
          opacity: 0.4
        }
      }), import_react.default.createElement("div", {
        style: {
          width: this.state.width,
          height: this.state.height,
          position: "absolute",
          display: "flex",
          flexDirection: "column"
        }
      }, m ? E : null, p && import_react.default.createElement("div", {
        style: {
          display: "flex",
          height: m || g ? "40%" : "100%",
          width: "100%"
        }
      }, v ? A : null, y ? I : null, _ ? x : null), g ? P : null));
    }
  }, {
    key: "render",
    value: function() {
      this.galleryDim = this.props.tracks.gallery ? this.props.tracks.gallery.map((y) => y.height).reduce(Ol, 0) : 0, this.topHeightNoGallery = this.props.tracks.top.map((y) => y.height).reduce(Ol, 0), this.topHeight = this.topHeightNoGallery + this.galleryDim, this.bottomHeightNoGallery = this.props.tracks.bottom.map((y) => y.height).reduce(Ol, 0), this.bottomHeight = this.bottomHeightNoGallery + this.galleryDim, this.leftWidthNoGallery = this.props.tracks.left.map((y) => y.width).reduce(Ol, 0), this.leftWidth = this.leftWidthNoGallery + this.galleryDim, this.rightWidthNoGallery = this.props.tracks.right.map((y) => y.width).reduce(Ol, 0), this.rightWidth = this.rightWidthNoGallery + this.galleryDim;
      const i = this.props.paddingTop + this.props.paddingBottom, o = this.props.paddingLeft + this.props.paddingRight;
      this.centerHeight = Math.max(0, this.state.height - this.topHeight - this.bottomHeight - i), this.centerWidth = Math.max(0, this.state.width - this.leftWidth - this.rightWidth - o);
      const a = "none", s = import_react.default.createElement("div", {
        className: "top-track-container",
        style: {
          left: this.leftWidth + this.props.paddingLeft,
          top: this.props.paddingTop,
          width: this.centerWidth,
          height: this.topHeightNoGallery,
          outline: a,
          position: "absolute"
        }
      }, import_react.default.createElement(QT, {
        configTrackMenuId: this.state.configTrackMenuId,
        editable: this.props.editable,
        handleConfigTrack: this.handleConfigTrackMenuOpened.bind(this),
        handleResizeTrack: this.handleResizeTrack.bind(this),
        handleSortEnd: this.handleSortEnd.bind(this),
        is1dRangeSelection: this.state.is1dRangeSelection,
        isRangeSelectionActive: this.props.mouseTool === To,
        onAddSeries: this.handleAddSeries.bind(this),
        onCloseTrack: this.handleCloseTrack.bind(this),
        onCloseTrackMenuOpened: this.handleCloseTrackMenuOpened.bind(this),
        onConfigTrackMenuOpened: this.handleConfigTrackMenuOpened.bind(this),
        onRangeSelection: this.rangeSelection1dHandler("x").bind(this),
        onRangeSelectionEnd: this.rangeSelection1dEndHandler("x").bind(this),
        onRangeSelectionReset: this.rangeSelectionResetHandler.bind(this),
        onRangeSelectionStart: this.rangeSelection1dStartHandler.bind(this),
        rangeSelection: this.state.rangeSelection,
        rangeSelectionEnd: this.state.rangeSelectionEnd,
        resizeHandles: /* @__PURE__ */ new Set(["bottom"]),
        scale: this.xScale,
        tracks: this.props.tracks.top,
        width: this.centerWidth
      })), l = import_react.default.createElement("div", {
        className: "left-track-container",
        style: {
          left: this.props.paddingLeft,
          top: this.topHeight + this.props.paddingTop,
          width: this.leftWidthNoGallery,
          height: this.centerHeight,
          outline: a,
          position: "absolute"
        }
      }, import_react.default.createElement(Hk, {
        configTrackMenuId: this.state.configTrackMenuId,
        editable: this.props.editable,
        handleConfigTrack: this.handleConfigTrackMenuOpened.bind(this),
        handleResizeTrack: this.handleResizeTrack.bind(this),
        handleSortEnd: this.handleSortEnd.bind(this),
        height: this.centerHeight,
        is1dRangeSelection: this.state.is1dRangeSelection,
        isRangeSelectionActive: this.props.mouseTool === To,
        onAddSeries: this.handleAddSeries.bind(this),
        onCloseTrack: this.handleCloseTrack.bind(this),
        onCloseTrackMenuOpened: this.handleCloseTrackMenuOpened.bind(this),
        onConfigTrackMenuOpened: this.handleConfigTrackMenuOpened.bind(this),
        onRangeSelection: this.rangeSelection1dHandler("y").bind(this),
        onRangeSelectionEnd: this.rangeSelection1dEndHandler("y").bind(this),
        onRangeSelectionReset: this.rangeSelectionResetHandler.bind(this),
        onRangeSelectionStart: this.rangeSelection1dStartHandler.bind(this),
        rangeSelection: this.state.rangeSelection,
        rangeSelectionEnd: this.state.rangeSelectionEnd,
        resizeHandles: /* @__PURE__ */ new Set(["right"]),
        scale: this.yScale,
        tracks: this.props.tracks.left
      })), u = import_react.default.createElement("div", {
        className: "right-track-container",
        style: {
          right: this.props.paddingRight,
          top: this.topHeight + this.props.paddingTop,
          width: this.rightWidthNoGallery,
          height: this.centerHeight,
          outline: a,
          position: "absolute"
        }
      }, import_react.default.createElement(Hk, {
        configTrackMenuId: this.state.configTrackMenuId,
        editable: this.props.editable,
        handleConfigTrack: this.handleConfigTrackMenuOpened.bind(this),
        handleResizeTrack: this.handleResizeTrack.bind(this),
        handleSortEnd: this.handleSortEnd.bind(this),
        height: this.centerHeight,
        is1dRangeSelection: this.state.is1dRangeSelection,
        isRangeSelectionActive: this.props.mouseTool === To,
        onAddSeries: this.handleAddSeries.bind(this),
        onCloseTrack: this.handleCloseTrack.bind(this),
        onCloseTrackMenuOpened: this.handleCloseTrackMenuOpened.bind(this),
        onConfigTrackMenuOpened: this.handleConfigTrackMenuOpened.bind(this),
        onRangeSelection: this.rangeSelection1dHandler("y").bind(this),
        onRangeSelectionEnd: this.rangeSelection1dEndHandler("y").bind(this),
        onRangeSelectionReset: this.rangeSelectionResetHandler.bind(this),
        onRangeSelectionStart: this.rangeSelection1dStartHandler.bind(this),
        rangeSelection: this.state.rangeSelection,
        rangeSelectionEnd: this.state.rangeSelectionEnd,
        resizeHandles: /* @__PURE__ */ new Set(["left"]),
        scale: this.yScale,
        tracks: this.props.tracks.right,
        tracksControlAlignLeft: true
      })), c = import_react.default.createElement("div", {
        className: "bottom-track-container",
        style: {
          left: this.leftWidth + this.props.paddingLeft,
          bottom: this.props.paddingBottom,
          width: this.centerWidth,
          height: this.bottomHeightNoGallery,
          outline: a,
          position: "absolute"
        }
      }, import_react.default.createElement(QT, {
        configTrackMenuId: this.state.configTrackMenuId,
        editable: this.props.editable,
        handleConfigTrack: this.handleConfigTrackMenuOpened.bind(this),
        handleResizeTrack: this.handleResizeTrack.bind(this),
        handleSortEnd: this.handleSortEnd.bind(this),
        is1dRangeSelection: this.state.is1dRangeSelection,
        isRangeSelectionActive: this.props.mouseTool === To,
        onAddSeries: this.handleAddSeries.bind(this),
        onCloseTrack: this.handleCloseTrack.bind(this),
        onCloseTrackMenuOpened: this.handleCloseTrackMenuOpened.bind(this),
        onConfigTrackMenuOpened: this.handleConfigTrackMenuOpened.bind(this),
        onRangeSelection: this.rangeSelection1dHandler("x").bind(this),
        onRangeSelectionEnd: this.rangeSelection1dEndHandler("x").bind(this),
        onRangeSelectionReset: this.rangeSelectionResetHandler.bind(this),
        onRangeSelectionStart: this.rangeSelection1dStartHandler.bind(this),
        rangeSelection: this.state.rangeSelection,
        rangeSelectionEnd: this.state.rangeSelectionEnd,
        resizeHandles: /* @__PURE__ */ new Set(["top"]),
        scale: this.xScale,
        tracks: this.props.tracks.bottom,
        width: this.centerWidth
      })), f = import_react.default.createElement("div", {
        key: "galleryTracksDiv",
        className: "gallery-track-container",
        style: {
          left: this.leftWidthNoGallery + this.props.paddingLeft,
          top: this.topHeightNoGallery + this.props.paddingTop,
          width: this.centerWidth + 2 * this.galleryDim,
          height: this.centerHeight + 2 * this.galleryDim,
          outline: a,
          position: "absolute"
        }
      }, import_react.default.createElement(Gq, {
        configTrackMenuId: this.state.configTrackMenuId,
        editable: this.props.editable,
        height: this.centerHeight + 2 * this.galleryDim,
        onAddSeries: this.handleAddSeries.bind(this),
        onCloseTrack: this.handleCloseTrack.bind(this),
        onCloseTrackMenuOpened: this.handleCloseTrackMenuOpened.bind(this),
        onConfigTrackMenuOpened: this.handleConfigTrackMenuOpened.bind(this),
        tracks: this.props.tracks.gallery,
        width: this.centerWidth + 2 * this.galleryDim
      }));
      let h = import_react.default.createElement("div", {
        className: ["center-track-container", gC["center-track-container"]].join(" "),
        style: {
          left: this.leftWidth + this.props.paddingLeft,
          top: this.topHeight + this.props.paddingTop,
          width: this.centerWidth,
          height: this.bottomHeight,
          outline: a
        }
      });
      this.props.tracks.center.length && (h = import_react.default.createElement("div", {
        className: ["center-track-container", gC["center-track-container"]].join(" "),
        style: {
          left: this.leftWidth + this.props.paddingLeft,
          top: this.topHeight + this.props.paddingTop,
          width: this.centerWidth,
          height: this.centerHeight,
          outline: a
        }
      }, import_react.default.createElement(aM, {
        configTrackMenuId: this.state.configTrackMenuId,
        editable: this.props.editable,
        height: this.centerHeight,
        is1dRangeSelection: this.state.is1dRangeSelection,
        isRangeSelectionActive: this.props.mouseTool === To,
        onAddSeries: this.handleAddSeries.bind(this),
        onCloseTrackMenuOpened: this.handleCloseTrackMenuOpened.bind(this),
        onConfigTrackMenuOpened: this.handleConfigTrackMenuOpened.bind(this),
        onRangeSelectionReset: this.rangeSelectionResetHandler.bind(this),
        onRangeSelectionStart: this.rangeSelection2dStartHandler.bind(this),
        onRangeSelectionX: this.rangeSelection1dHandler("x").bind(this),
        onRangeSelectionXEnd: this.rangeSelection1dEndHandler("x").bind(this),
        onRangeSelectionXY: this.rangeSelection2dHandler.bind(this),
        onRangeSelectionXYEnd: this.rangeSelection2dEndHandler.bind(this),
        onRangeSelectionY: this.rangeSelection1dHandler("y").bind(this),
        onRangeSelectionYEnd: this.rangeSelection1dEndHandler("y").bind(this),
        rangeSelection: this.state.rangeSelection,
        rangeSelectionEnd: this.state.rangeSelectionEnd,
        scaleX: this.xScale,
        scaleY: this.yScale,
        tracks: this.props.tracks.center,
        uid: this.props.tracks.center[0].uid,
        width: this.centerWidth
      }))), this.createTrackPositionTexts();
      let d = this.positionedTracks();
      d = d.concat(this.overlayTracks(d));
      let p = null;
      this.state.sizeMeasured && (p = import_react.default.createElement(
        _Qe,
        {
          ref: (y) => {
            this.trackRenderer = y, this.checkAllTilesetInfoReceived();
          },
          canvasElement: this.canvasElement,
          centerHeight: this.centerHeight,
          centerWidth: this.centerWidth,
          disableTrackMenu: this.props.disableTrackMenu,
          dragging: this.props.dragging,
          galleryDim: this.galleryDim,
          getLockGroupExtrema: this.props.getLockGroupExtrema,
          height: this.state.height,
          initialXDomain: this.props.initialXDomain,
          initialYDomain: this.props.initialYDomain,
          isRangeSelection: this.props.mouseTool === To,
          isShowGlobalMousePosition: this.props.isShowGlobalMousePosition,
          isValueScaleLocked: this.props.isValueScaleLocked,
          leftWidth: this.leftWidth,
          leftWidthNoGallery: this.leftWidthNoGallery,
          metaTracks: this.props.metaTracks,
          onMouseMoveZoom: this.props.onMouseMoveZoom,
          onNewTilesLoaded: this.props.onNewTilesLoaded,
          onScalesChanged: this.handleScalesChanged.bind(this),
          onTilesetInfoReceived: this.handleTilesetInfoReceived.bind(this),
          onTrackOptionsChanged: this.handleTrackOptionsChanged.bind(this),
          onValueScaleChanged: this.props.onValueScaleChanged,
          paddingLeft: this.props.paddingLeft,
          paddingTop: this.props.paddingTop,
          pixiRenderer: this.props.pixiRenderer,
          pixiStage: this.props.pixiStage,
          pluginDataFetchers: this.props.pluginDataFetchers,
          pluginTracks: this.props.pluginTracks,
          positionedTracks: d,
          registerDraggingChangedListener: this.props.registerDraggingChangedListener,
          removeDraggingChangedListener: this.props.removeDraggingChangedListener,
          setCentersFunction: this.props.setCentersFunction,
          svgElement: this.props.svgElement,
          topHeight: this.topHeight,
          topHeightNoGallery: this.topHeightNoGallery,
          uid: this.props.uid,
          viewOptions: this.props.viewOptions,
          width: this.state.width,
          xDomainLimits: this.props.xDomainLimits,
          yDomainLimits: this.props.yDomainLimits,
          zoomable: this.props.zoomable,
          zoomLimits: this.props.zoomLimits
        },
        s,
        l,
        u,
        c,
        f,
        h
      ));
      let m = null, g = null;
      this.state.configTrackMenuId && (m = import_react.default.createElement(Yl, {
        onMenuClosed: this.closeMenusBound
      }, import_react.default.createElement(ZJe, {
        ref: (y) => {
          this.configTrackMenu = y;
        },
        closeMenu: this.closeMenusBound,
        onAddDivisor: this.handleAddDivisorBound,
        onAddSeries: this.handleAddSeriesBound,
        onAddTrack: this.handleAddTrackBound,
        onChangeTrackType: this.handleChangeTrackTypeBound,
        onCloseTrack: this.handleCloseTrackBound,
        onConfigureTrack: this.handleConfigureTrackBound,
        onExportData: this.handleExportTrackDataBound,
        onLockValueScale: this.handleLockValueScaleBound,
        onReplaceTrack: this.handleReplaceTrackBound,
        onTrackOptionsChanged: this.handleTrackOptionsChangedBound,
        onUnlockValueScale: this.handleUnlockValueScaleBound,
        position: this.state.configTrackMenuLocation,
        theme: this.props.theme,
        trackOrientation: Jm(this.props.tracks, this.state.configTrackMenuId),
        tracks: [Zi(this.props.tracks, this.state.configTrackMenuId)]
      }))), this.state.closeTrackMenuId && (g = import_react.default.createElement(Yl, {
        onMenuClosed: this.handleCloseTrackMenuClosed.bind(this)
      }, import_react.default.createElement(mc, {
        position: this.state.closeTrackMenuLocation,
        theme: this.props.theme
      }, import_react.default.createElement(lee, {
        onCloseTrack: this.handleCloseTrack.bind(this),
        tracks: [Zi(this.props.tracks, this.state.closeTrackMenuId)]
      }))));
      let v = null;
      this.props.chooseTrackHandler && (v = d.filter((y) => y.track.position !== "whole").map((y) => {
        let b = "transparent", T = "none";
        return this.state.mouseOverOverlayUid === y.track.uid && (b = "yellow", T = "1px solid black"), import_react.default.createElement("div", {
          key: y.track.uid,
          className: "tiled-plot-track-overlay",
          onClick: () => this.handleTrackPositionChosen(y),
          onDragEnter: (E) => {
            this.handleOverlayMouseEnter(y.track.uid), E.preventDefault();
          },
          onDragLeave: () => this.handleOverlayMouseLeave(y.track.uid),
          onDragOver: (E) => E.preventDefault(),
          onDrop: () => this.handleTrackPositionChosen(y),
          onMouseEnter: () => this.handleOverlayMouseEnter(y.track.uid),
          onMouseLeave: () => this.handleOverlayMouseLeave(y.track.uid),
          style: {
            position: "absolute",
            left: y.left,
            top: y.top,
            width: y.width,
            height: y.height,
            background: b,
            opacity: 0.4,
            border: T,
            zIndex: 1
          }
        });
      }));
      let _ = null;
      if (this.xScale && this.yScale && this.props.editable && this.state.trackOptions) {
        const y = this.state.trackOptions.configComponent, b = this.state.trackOptions.track;
        _ = import_react.default.createElement(y, {
          track: b,
          xScale: this.xScale,
          yScale: this.yScale,
          onCancel: () => {
            this.setState({
              trackOptions: null
            });
          },
          onTrackOptionsChanged: (T) => T,
          onSubmit: (T) => {
            this.handleTrackOptionsChanged(this.state.trackOptions.track.uid, T), this.setState({
              trackOptions: null
            });
          }
        });
      }
      return import_react.default.createElement("div", {
        ref: (y) => {
          this.divTiledPlot = y;
        },
        className: ["tiled-plot-div", Go["tiled-plot"]].join(" "),
        style: {
          marginBottom: this.props.marginBottom,
          marginLeft: this.props.marginLeft,
          marginRight: this.props.marginRight,
          marginTop: this.props.marginTop
        }
      }, p, v, m, g, _, this.getContextMenu(), this.props.draggingHappening && this.getIdealizedTrackPositionsOverlay());
    }
    /* -------------------- Custom Methods -----------------------*/
  }, {
    key: "addEventListeners",
    value: function() {
      this.eventListeners = [], this.eventListeners.forEach((i) => document.addEventListener(i.name, i.callback, false));
    }
  }, {
    key: "removeEventListeners",
    value: function() {
      this.eventListeners.forEach((i) => document.removeEventListener(i.name, i.callback));
    }
  }]), r;
}(import_react.default.Component);
DL.defaultProps = {
  isShowGlobalMousePosition: false,
  pluginDataFetchers: {},
  pluginTracks: {},
  metaTracks: [],
  zoomable: true
};
DL.propTypes = {
  addTrackPosition: L.string,
  canvasElement: L.object,
  chooseTrackHandler: L.func,
  chromInfoPath: L.string,
  customDialog: L.array,
  closeCustomDialog: L.func,
  disableTrackMenu: L.bool,
  dragging: L.bool,
  draggingHappening: L.bool,
  editable: L.bool,
  getLockGroupExtrema: L.func,
  initialXDomain: L.array,
  initialYDomain: L.array,
  isShowGlobalMousePosition: L.bool,
  isValueScaleLocked: L.func,
  marginBottom: L.number.isRequired,
  marginLeft: L.number.isRequired,
  marginRight: L.number.isRequired,
  marginTop: L.number.isRequired,
  paddingBottom: L.number.isRequired,
  paddingLeft: L.number.isRequired,
  paddingRight: L.number.isRequired,
  paddingTop: L.number.isRequired,
  metaTracks: L.array,
  modal: L.object,
  mouseTool: L.string,
  onCloseTrack: L.func,
  onChangeTrackData: L.func,
  onChangeTrackType: L.func,
  onDataDomainChanged: L.func,
  onLockValueScale: L.func,
  onMouseMoveZoom: L.func,
  onNewTilesLoaded: L.func,
  onNoTrackAdded: L.func,
  onRangeSelection: L.func.isRequired,
  onScalesChanged: L.func,
  onTrackOptionsChanged: L.func,
  onTrackPositionChosen: L.func,
  onTracksAdded: L.func,
  onUnlockValueScale: L.func,
  onValueScaleChanged: L.func,
  onResizeTrack: L.func,
  overlays: L.array,
  openModal: L.func,
  pixiRenderer: L.object,
  pixiStage: L.object,
  pluginDataFetchers: L.object,
  pluginTracks: L.object,
  pubSub: L.object.isRequired,
  rangeSelection1dSize: L.array,
  rangeSelectionToInt: L.bool,
  registerDraggingChangedListener: L.func,
  removeDraggingChangedListener: L.func,
  setCentersFunction: L.func,
  svgElement: L.object,
  theme: L.symbol.isRequired,
  tracks: L.object,
  trackSourceServers: L.array,
  uid: L.string,
  viewOptions: L.object,
  xDomainLimits: L.array,
  yDomainLimits: L.array,
  zoomable: L.bool,
  zoomLimits: L.array,
  zoomToDataExtentOnInit: L.func
};
var Met = yp(kS(lh(DL)));
var Let = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var Bet = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e12) {
  return typeof e12;
} : function(e12) {
  return e12 && typeof Symbol == "function" && e12.constructor === Symbol ? "symbol" : typeof e12;
};
var Fet = /[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;
function $et(e12) {
  var t = void 0, r = void 0, n = void 0, i = e12.ownerDocument, o = i.body, a = i && i.documentElement;
  return t = e12.getBoundingClientRect(), r = t.left, n = t.top, r -= a.clientLeft || o.clientLeft || 0, n -= a.clientTop || o.clientTop || 0, {
    left: r,
    top: n
  };
}
function uee(e12, t) {
  var r = e12["page" + (t ? "Y" : "X") + "Offset"], n = "scroll" + (t ? "Top" : "Left");
  if (typeof r != "number") {
    var i = e12.document;
    r = i.documentElement[n], typeof r != "number" && (r = i.body[n]);
  }
  return r;
}
function Gk(e12) {
  return uee(e12);
}
function zk(e12) {
  return uee(e12, true);
}
function hee(e12) {
  var t = $et(e12), r = e12.ownerDocument, n = r.defaultView || r.parentWindow;
  return t.left += Gk(n), t.top += zk(n), t;
}
function Het(e12, t, r) {
  var n = "", i = e12.ownerDocument, o = r || i.defaultView.getComputedStyle(e12, null);
  return o && (n = o.getPropertyValue(t) || o[t]), n;
}
var Uet = new RegExp("^(" + Fet + ")(?!px)[a-z%]+$", "i");
var jet = /^(top|right|bottom|left)$/;
var JO = "currentStyle";
var eI = "runtimeStyle";
var xc = "left";
var Get = "px";
function zet(e12, t) {
  var r = e12[JO] && e12[JO][t];
  if (Uet.test(r) && !jet.test(t)) {
    var n = e12.style, i = n[xc], o = e12[eI][xc];
    e12[eI][xc] = e12[JO][xc], n[xc] = t === "fontSize" ? "1em" : r || 0, r = n.pixelLeft + Get, n[xc] = i, e12[eI][xc] = o;
  }
  return r === "" ? "auto" : r;
}
var Vu = void 0;
typeof window < "u" && (Vu = window.getComputedStyle ? Het : zet);
function RL(e12, t) {
  for (var r = 0; r < e12.length; r++)
    t(e12[r]);
}
function fee(e12) {
  return Vu(e12, "boxSizing") === "border-box";
}
var Vet = ["margin", "border", "padding"];
var Vk = -1;
var Xet = 2;
var Xk = 1;
var Wet = 0;
function Yet(e12, t, r) {
  var n = {}, i = e12.style, o = void 0;
  for (o in t)
    t.hasOwnProperty(o) && (n[o] = i[o], i[o] = t[o]);
  r.call(e12);
  for (o in t)
    t.hasOwnProperty(o) && (i[o] = n[o]);
}
function Ym(e12, t, r) {
  var n = 0, i = void 0, o = void 0, a = void 0;
  for (o = 0; o < t.length; o++)
    if (i = t[o], i)
      for (a = 0; a < r.length; a++) {
        var s = void 0;
        i === "border" ? s = i + r[a] + "Width" : s = i + r[a], n += parseFloat(Vu(e12, s)) || 0;
      }
  return n;
}
function Zb(e12) {
  return e12 != null && e12 == e12.window;
}
var Ba = {};
RL(["Width", "Height"], function(e12) {
  Ba["doc" + e12] = function(t) {
    var r = t.document;
    return Math.max(
      // firefox chrome documentElement.scrollHeight< body.scrollHeight
      // ie standard mode : documentElement.scrollHeight> body.scrollHeight
      r.documentElement["scroll" + e12],
      // quirks : documentElement.scrollHeight 最大等于可视窗口多一点？
      r.body["scroll" + e12],
      Ba["viewport" + e12](r)
    );
  }, Ba["viewport" + e12] = function(t) {
    var r = "client" + e12, n = t.document, i = n.body, o = n.documentElement, a = o[r];
    return n.compatMode === "CSS1Compat" && a || i && i[r] || a;
  };
});
function cG(e12, t, r) {
  if (Zb(e12))
    return t === "width" ? Ba.viewportWidth(e12) : Ba.viewportHeight(e12);
  if (e12.nodeType === 9)
    return t === "width" ? Ba.docWidth(e12) : Ba.docHeight(e12);
  var n = t === "width" ? ["Left", "Right"] : ["Top", "Bottom"], i = t === "width" ? e12.offsetWidth : e12.offsetHeight;
  Vu(e12);
  var o = fee(e12), a = 0;
  (i == null || i <= 0) && (i = void 0, a = Vu(e12, t), (a == null || Number(a) < 0) && (a = e12.style[t] || 0), a = parseFloat(a) || 0), r === void 0 && (r = o ? Xk : Vk);
  var s = i !== void 0 || o, l = i || a;
  if (r === Vk)
    return s ? l - Ym(e12, ["border", "padding"], n) : a;
  if (s) {
    var u = r === Xet ? -Ym(e12, ["border"], n) : Ym(e12, ["margin"], n);
    return l + (r === Xk ? 0 : u);
  }
  return a + Ym(e12, Vet.slice(r), n);
}
var qet = {
  position: "absolute",
  visibility: "hidden",
  display: "block"
};
function uG(e12) {
  var t = void 0, r = arguments;
  return e12.offsetWidth !== 0 ? t = cG.apply(void 0, r) : Yet(e12, qet, function() {
    t = cG.apply(void 0, r);
  }), t;
}
function Yf(e12, t, r) {
  var n = r;
  if ((typeof t > "u" ? "undefined" : Bet(t)) === "object") {
    for (var i in t)
      t.hasOwnProperty(i) && Yf(e12, i, t[i]);
    return;
  }
  if (typeof n < "u") {
    typeof n == "number" && (n += "px"), e12.style[t] = n;
    return;
  }
  return Vu(e12, t);
}
RL(["width", "height"], function(e12) {
  var t = e12.charAt(0).toUpperCase() + e12.slice(1);
  Ba["outer" + t] = function(n, i) {
    return n && uG(n, e12, i ? Wet : Xk);
  };
  var r = e12 === "width" ? ["Left", "Right"] : ["Top", "Bottom"];
  Ba[e12] = function(n, i) {
    if (i !== void 0) {
      if (n) {
        Vu(n);
        var o = fee(n);
        return o && (i += Ym(n, ["padding", "border"], r)), Yf(n, e12, i);
      }
      return;
    }
    return n && uG(n, e12, Vk);
  };
});
function Ket(e12, t) {
  Yf(e12, "position") === "static" && (e12.style.position = "relative");
  var r = hee(e12), n = {}, i = void 0, o = void 0;
  for (o in t)
    t.hasOwnProperty(o) && (i = parseFloat(Yf(e12, o)) || 0, n[o] = i + t[o] - r[o]);
  Yf(e12, n);
}
var Zet = Let({
  getWindow: function(t) {
    var r = t.ownerDocument || t;
    return r.defaultView || r.parentWindow;
  },
  offset: function(t, r) {
    if (typeof r < "u")
      Ket(t, r);
    else
      return hee(t);
  },
  isWindow: Zb,
  each: RL,
  css: Yf,
  clone: function(t) {
    var r = {};
    for (var n in t)
      t.hasOwnProperty(n) && (r[n] = t[n]);
    var i = t.overflow;
    if (i)
      for (var n in t)
        t.hasOwnProperty(n) && (r.overflow[n] = t.overflow[n]);
    return r;
  },
  scrollLeft: function(t, r) {
    if (Zb(t)) {
      if (r === void 0)
        return Gk(t);
      window.scrollTo(r, zk(t));
    } else {
      if (r === void 0)
        return t.scrollLeft;
      t.scrollLeft = r;
    }
  },
  scrollTop: function(t, r) {
    if (Zb(t)) {
      if (r === void 0)
        return zk(t);
      window.scrollTo(Gk(t), r);
    } else {
      if (r === void 0)
        return t.scrollTop;
      t.scrollTop = r;
    }
  },
  viewportWidth: 0,
  viewportHeight: 0
}, Ba);
var Ar = Zet;
function Qet(e12, t, r) {
  r = r || {}, t.nodeType === 9 && (t = Ar.getWindow(t));
  var n = r.allowHorizontalScroll, i = r.onlyScrollIfNeeded, o = r.alignWithTop, a = r.alignWithLeft, s = r.offsetTop || 0, l = r.offsetLeft || 0, u = r.offsetBottom || 0, c = r.offsetRight || 0;
  n = n === void 0 ? true : n;
  var f = Ar.isWindow(t), h = Ar.offset(e12), d = Ar.outerHeight(e12), p = Ar.outerWidth(e12), m = void 0, g = void 0, v = void 0, _ = void 0, y = void 0, b = void 0, T = void 0, E = void 0, P = void 0, A = void 0;
  f ? (T = t, A = Ar.height(T), P = Ar.width(T), E = {
    left: Ar.scrollLeft(T),
    top: Ar.scrollTop(T)
  }, y = {
    left: h.left - E.left - l,
    top: h.top - E.top - s
  }, b = {
    left: h.left + p - (E.left + P) + c,
    top: h.top + d - (E.top + A) + u
  }, _ = E) : (m = Ar.offset(t), g = t.clientHeight, v = t.clientWidth, _ = {
    left: t.scrollLeft,
    top: t.scrollTop
  }, y = {
    left: h.left - (m.left + (parseFloat(Ar.css(t, "borderLeftWidth")) || 0)) - l,
    top: h.top - (m.top + (parseFloat(Ar.css(t, "borderTopWidth")) || 0)) - s
  }, b = {
    left: h.left + p - (m.left + v + (parseFloat(Ar.css(t, "borderRightWidth")) || 0)) + c,
    top: h.top + d - (m.top + g + (parseFloat(Ar.css(t, "borderBottomWidth")) || 0)) + u
  }), y.top < 0 || b.top > 0 ? o === true ? Ar.scrollTop(t, _.top + y.top) : o === false ? Ar.scrollTop(t, _.top + b.top) : y.top < 0 ? Ar.scrollTop(t, _.top + y.top) : Ar.scrollTop(t, _.top + b.top) : i || (o = o === void 0 ? true : !!o, o ? Ar.scrollTop(t, _.top + y.top) : Ar.scrollTop(t, _.top + b.top)), n && (y.left < 0 || b.left > 0 ? a === true ? Ar.scrollLeft(t, _.left + y.left) : a === false ? Ar.scrollLeft(t, _.left + b.left) : y.left < 0 ? Ar.scrollLeft(t, _.left + y.left) : Ar.scrollLeft(t, _.left + b.left) : i || (a = a === void 0 ? true : !!a, a ? Ar.scrollLeft(t, _.left + y.left) : Ar.scrollLeft(t, _.left + b.left)));
}
var Jet = Qet;
var ett = Jet;
var ttt = Ui(ett);
function EE() {
  return EE = Object.assign ? Object.assign.bind() : function(e12) {
    for (var t = 1; t < arguments.length; t++) {
      var r = arguments[t];
      for (var n in r)
        Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
    }
    return e12;
  }, EE.apply(this, arguments);
}
function rtt(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function hG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, itt(n.key), n);
  }
}
function ntt(e12, t, r) {
  return t && hG(e12.prototype, t), r && hG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function itt(e12) {
  var t = ott(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function ott(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function att(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Wk(e12, t);
}
function Wk(e12, t) {
  return Wk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Wk(e12, t);
}
function stt(e12) {
  var t = utt();
  return function() {
    var n = SE(e12), i;
    if (t) {
      var o = SE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return ltt(this, i);
  };
}
function ltt(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return ctt(e12);
}
function ctt(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function utt() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function SE(e12) {
  return SE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, SE(e12);
}
var pm = [];
var NL = function(e12) {
  att(r, e12);
  var t = stt(r);
  function r(n) {
    var i;
    return rtt(this, r), i = t.call(this, n), i.state = {
      highlightedIndex: null,
      menuTop: 0,
      menuLeft: 0,
      menuWidth: 0,
      isOpen: false
    }, i.keyDownHandlers = {
      ArrowDown(o) {
        o.preventDefault();
        const a = this.getFilteredItems().length;
        if (!a)
          return;
        const {
          highlightedIndex: s
        } = this.state, l = s === null || s === a - 1 ? 0 : s + 1;
        this._performAutoCompleteOnKeyUp = true, this.setState({
          highlightedIndex: l,
          isOpen: true
        });
      },
      ArrowUp(o) {
        o.preventDefault();
        const a = this.getFilteredItems().length;
        if (!a)
          return;
        const {
          highlightedIndex: s
        } = this.state, l = s === 0 || s === null ? a - 1 : s - 1;
        this._performAutoCompleteOnKeyUp = true, this.setState({
          highlightedIndex: l,
          isOpen: true
        });
      },
      Enter(o) {
        if (this.state.isOpen !== false)
          if (this.state.highlightedIndex === null)
            this.setState({
              isOpen: false
            }, () => {
              this.inputEl.select();
            });
          else {
            o.preventDefault();
            const a = this.getFilteredItems()[this.state.highlightedIndex], s = this.props.getItemValue(a);
            this.setState({
              isOpen: false,
              highlightedIndex: null
            }, () => {
              this.inputEl.setSelectionRange(s.length, s.length), this.props.onSelect(s, a);
            });
          }
      },
      Escape() {
        this.setState({
          highlightedIndex: null,
          isOpen: false
        });
      }
    }, i;
  }
  return ntt(r, [{
    key: "getInitialState",
    value: function() {
      return {
        isOpen: false,
        highlightedIndex: null
      };
    }
    // eslint-disable-next-line camelcase
  }, {
    key: "UNSAFE_componentWillMount",
    value: function() {
      this._ignoreBlur = false, this._performAutoCompleteOnUpdate = false, this._performAutoCompleteOnKeyUp = false;
    }
    // eslint-disable-next-line camelcase
  }, {
    key: "UNSAFE_componentWillReceiveProps",
    value: function(i) {
      this._performAutoCompleteOnUpdate = true, (this.props.items !== i.items || // The entries in `items` may have been changed even though the
      // object reference remains the same, double check by seeing
      // if `highlightedIndex` points to an existing item
      this.state.highlightedIndex >= i.items.length) && this.setState({
        highlightedIndex: null
      });
    }
  }, {
    key: "componentDidUpdate",
    value: function(i, o) {
      this.state.isOpen === true && o.isOpen === false && this.setMenuPositions(), this.state.isOpen && this._performAutoCompleteOnUpdate && (this._performAutoCompleteOnUpdate = false, this.maybeAutoCompleteText()), this.maybeScrollItemIntoView(), o.isOpen !== this.state.isOpen && this.props.onMenuVisibilityChange(this.state.isOpen, this.inputEl);
    }
  }, {
    key: "maybeScrollItemIntoView",
    value: function() {
      if (this.state.isOpen === true && this.state.highlightedIndex !== null) {
        const i = this.refs[`item-${this.state.highlightedIndex}`], o = this.refs.menu;
        i && ttt((0, import_react_dom.findDOMNode)(i), (0, import_react_dom.findDOMNode)(o), {
          onlyScrollIfNeeded: true
        });
      }
    }
  }, {
    key: "handleKeyDown",
    value: function(i) {
      this.keyDownHandlers[i.key] ? this.keyDownHandlers[i.key].call(this, i) : this.setState({
        highlightedIndex: null,
        isOpen: true
      });
    }
  }, {
    key: "handleChange",
    value: function(i) {
      this._performAutoCompleteOnKeyUp = true, this.props.onChange(i, i.target.value);
    }
  }, {
    key: "handleKeyUp",
    value: function() {
      this._performAutoCompleteOnKeyUp && (this._performAutoCompleteOnKeyUp = false, this.maybeAutoCompleteText());
    }
  }, {
    key: "getFilteredItems",
    value: function() {
      let i = this.props.items;
      return this.props.shouldItemRender && (i = i.filter((o) => this.props.shouldItemRender(o, this.props.value))), this.props.sortItems && i.sort((o, a) => this.props.sortItems(o, a, this.props.value)), i;
    }
  }, {
    key: "maybeAutoCompleteText",
    value: function() {
      if (!this.props.autoHighlight || this.props.value === "")
        return;
      const {
        highlightedIndex: i
      } = this.state, o = this.getFilteredItems();
      if (o.length === 0)
        return;
      const a = i !== null ? o[i] : o[0];
      this.props.getItemValue(a).toLowerCase().indexOf(this.props.value.toLowerCase()) === 0 && i === null && this.setState({
        highlightedIndex: 0
      });
    }
  }, {
    key: "setMenuPositions",
    value: function() {
      const i = this.inputEl, o = i.getBoundingClientRect(), a = globalThis.window.getComputedStyle(i), s = parseInt(a.marginBottom, 10) || 0, l = parseInt(a.marginLeft, 10) || 0, u = parseInt(a.marginRight, 10) || 0;
      this.setState({
        menuTop: o.bottom + s,
        menuLeft: o.left + l,
        menuWidth: o.width + l + u
      });
    }
  }, {
    key: "highlightItemFromMouse",
    value: function(i) {
      this.setState({
        highlightedIndex: i
      });
    }
  }, {
    key: "selectItemFromMouse",
    value: function(i) {
      const o = this.props.getItemValue(i);
      this.setState({
        isOpen: false,
        highlightedIndex: null
      }, () => {
        this.props.onSelect(o, i), this.inputEl.focus();
      });
    }
  }, {
    key: "setIgnoreBlur",
    value: function(i) {
      this._ignoreBlur = i;
    }
  }, {
    key: "renderMenu",
    value: function() {
      const i = this.getFilteredItems().map((s, l) => {
        const u = this.props.renderItem(s, this.state.highlightedIndex === l, {
          cursor: "default"
        });
        return import_react.default.cloneElement(u, {
          onMouseDown: () => this.setIgnoreBlur(true),
          // Ignore blur to prevent menu from de-rendering before we can process click
          onMouseEnter: () => this.highlightItemFromMouse(l),
          onClick: () => this.selectItemFromMouse(s),
          ref: `item-${l}`
        });
      }), o = {
        left: this.state.menuLeft,
        top: this.state.menuTop,
        minWidth: this.state.menuWidth
      };
      if (!i.length)
        return null;
      const a = this.props.renderMenu(i, this.props.value, o);
      return import_react.default.cloneElement(a, {
        ref: "menu"
      });
    }
  }, {
    key: "handleInputBlur",
    value: function() {
      this.props.onFocus && this.props.onFocus(), !this._ignoreBlur && this.setState({
        isOpen: false,
        highlightedIndex: null
      });
    }
  }, {
    key: "handleInputFocus",
    value: function() {
      if (this.props.onFocus && this.props.onFocus(true), this._ignoreBlur) {
        this.setIgnoreBlur(false);
        return;
      }
      this._ignoreClick = true, this.setState({
        isOpen: true
      });
    }
  }, {
    key: "isInputFocused",
    value: function() {
      return this.inputEl.ownerDocument && this.inputEl === this.inputEl.ownerDocument.activeElement;
    }
  }, {
    key: "handleInputClick",
    value: function() {
      this.isInputFocused() && this.state.isOpen === false ? this.setState({
        isOpen: true
      }) : this.state.highlightedIndex !== null && !this._ignoreClick && this.selectItemFromMouse(this.getFilteredItems()[this.state.highlightedIndex]), this._ignoreClick = false;
    }
  }, {
    key: "composeEventHandlers",
    value: function(i, o) {
      return o ? (a) => {
        i(a), o(a);
      } : i;
    }
    /* ------------------------------ Rendering ------------------------------- */
  }, {
    key: "render",
    value: function() {
      this.props.debug && pm.push({
        id: pm.length,
        state: this.state
      });
      const {
        inputProps: i
      } = this.props;
      return import_react.default.createElement("div", EE({
        style: {
          ...this.props.wrapperStyle
        }
      }, this.props.wrapperProps), import_react.default.createElement("input", EE({}, i, {
        ref: (o) => {
          this.inputEl = o;
        },
        "aria-autocomplete": "list",
        autoComplete: "off",
        onBlur: this.composeEventHandlers(this.handleInputBlur.bind(this), i.onBlur && i.onBlur.bind(this)),
        onChange: this.handleChange.bind(this),
        onClick: this.composeEventHandlers(this.handleInputClick.bind(this), i.onClick && i.onClick.bind(this)),
        onFocus: this.composeEventHandlers(this.handleInputFocus.bind(this), i.onFocus && i.onFocus.bind(this)),
        onKeyDown: this.composeEventHandlers(this.handleKeyDown.bind(this), i.onKeyDown && i.onKeyDown.bind(this)),
        onKeyUp: this.composeEventHandlers(this.handleKeyUp.bind(this), i.onKeyUp && i.onKeyUp.bind(this)),
        role: "combobox",
        value: this.props.value
      })), ("open" in this.props ? this.props.open : this.state.isOpen) && this.renderMenu(), this.props.debug && import_react.default.createElement("pre", {
        style: {
          marginLeft: 300
        }
      }, JSON.stringify(pm.slice(pm.length - 5, pm.length), null, 2)));
    }
  }]), r;
}(import_react.default.Component);
NL.defaultProps = {
  value: "",
  wrapperProps: {},
  wrapperStyle: {
    display: "inline-block"
  },
  inputProps: {},
  onChange() {
  },
  onSelect() {
  },
  renderMenu(e12, t, r) {
    return (
      /* eslint-disable react/no-this-in-sfc */
      import_react.default.createElement("div", {
        style: {
          ...r,
          ...this.menuStyle
        }
      }, e12)
    );
  },
  shouldItemRender() {
    return true;
  },
  menuStyle: {
    borderRadius: "3px",
    boxShadow: "0 2px 12px rgba(0, 0, 0, 0.1)",
    background: "rgba(255, 255, 255, 0.9)",
    padding: "2px 0",
    fontSize: "90%",
    position: "fixed",
    overflow: "auto",
    maxHeight: "50%"
    // TODO: don't cheat, let it flow to the bottom
  },
  autoHighlight: true,
  onMenuVisibilityChange() {
  }
};
NL.propTypes = {
  autoHighlight: L.bool,
  debug: L.bool,
  getItemValue: L.func.isRequired,
  inputProps: L.object,
  items: L.array,
  menuStyle: L.object,
  onChange: L.func,
  onFocus: L.func,
  onMenuVisibilityChange: L.func,
  onSelect: L.func,
  open: L.bool,
  renderItem: L.func.isRequired,
  renderMenu: L.func,
  shouldItemRender: L.func,
  sortItems: L.func,
  value: L.any,
  wrapperProps: L.object,
  wrapperStyle: L.object
};
var htt = "_btn_1l2sx_95";
var jh = {
  "genome-position-search": "_genome-position-search_1l2sx_1",
  "genome-position-search-focus": "_genome-position-search-focus_1l2sx_2",
  "genome-position-search-bar": "_genome-position-search-bar_1l2sx_16",
  "genome-position-search-dark": "_genome-position-search-dark_1l2sx_34",
  "genome-position-search-bar-button": "_genome-position-search-bar-button_1l2sx_38",
  "genome-position-search-bar-button-focus": "_genome-position-search-bar-button-focus_1l2sx_39",
  "genome-position-search-bar-icon": "_genome-position-search-bar-icon_1l2sx_62",
  "genome-position-search-bar-icon-focus": "_genome-position-search-bar-icon-focus_1l2sx_63",
  "genome-position-search-bar-suggestions": "_genome-position-search-bar-suggestions_1l2sx_83",
  btn: htt,
  "btn-sm": "_btn-sm_1l2sx_116",
  "btn-default": "_btn-default_1l2sx_122"
};
function ftt(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function fG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, ptt(n.key), n);
  }
}
function dtt(e12, t, r) {
  return t && fG(e12.prototype, t), r && fG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function ptt(e12) {
  var t = mtt(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function mtt(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function gtt(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Yk(e12, t);
}
function Yk(e12, t) {
  return Yk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Yk(e12, t);
}
function vtt(e12) {
  var t = _tt();
  return function() {
    var n = wE(e12), i;
    if (t) {
      var o = wE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return ytt(this, i);
  };
}
function ytt(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return dee(e12);
}
function dee(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function _tt() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function wE(e12) {
  return wE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, wE(e12);
}
var pee = function(e12) {
  gtt(r, e12);
  var t = vtt(r);
  function r(n) {
    var i;
    return ftt(this, r), i = t.call(this, n), i.mounted = false, i.uid = Gt.nice(), i.chromInfo = null, i.searchField = null, i.autocompleteMenu = null, i.xScale = null, i.yScale = null, i.prevParts = [], i.props.registerViewportChangedListener(i.scalesChanged.bind(dee(i))), i.menuPosition = {
      left: 0,
      top: 0
    }, i.positionText = "chr4:190,998,876-191,000,255", i.state = {
      genes: [],
      isFocused: false,
      autocompleteServer: i.props.autocompleteServer,
      autocompleteId: i.props.autocompleteId,
      availableAssemblies: [],
      selectedAssembly: null
    }, i.styles = {
      item: {
        padding: "2px 6px",
        cursor: "default"
      },
      highlightedItem: {
        color: "white",
        background: "hsl(200, 50%, 50%)",
        padding: "2px 6px",
        cursor: "default"
      },
      menu: {
        border: "solid 1px #ccc"
      }
    }, i.availableAutocompletes = {}, i.props.autocompleteId && (i.availableAutocompletes[i.props.chromInfoId] = /* @__PURE__ */ new Set([{
      server: i.props.autocompleteServer,
      acId: i.props.autocompleteId
    }])), i.availableChromSizes = {}, i;
  }
  return dtt(r, [{
    key: "componentDidMount",
    value: function() {
      this.mounted = true, Wt(this.autocompleteMenu.inputEl).on("keypress", this.autocompleteKeyPress.bind(this)), this.findAvailableAutocompleteSources(), this.findAvailableChromSizes(), this.props.chromInfoPath && (this.searchPosition = true, Hs(this.props.chromInfoPath, (i) => {
        if (!i) {
          this.searchPosition = null;
          return;
        }
        this.chromInfo = i, this.searchField = new Fd(this.chromInfo), this.setPositionText();
      })), this.setPositionText();
    }
  }, {
    key: "componentWillUnmount",
    value: function() {
      this.mounted = false, this.props.removeViewportChangedListener();
    }
  }, {
    key: "onAutocompleteChange",
    value: function(i, o) {
      this.positionText = o, this.setState({
        value: o,
        loading: true
      }), this.changedPart = null;
      const a = o.split(/ /);
      let s = 0;
      const l = [];
      let u = false;
      for (let c = 0; c < a.length; c++) {
        const f = a[c].split(/-/);
        for (let h = 0; h < f.length; h++) {
          if (s += 1, l.push(f[h]), h === 0 ? u = true : u = false, h === this.prevParts.length) {
            this.changedPart = s - 1;
            break;
          }
          if (f[h] !== this.prevParts[h]) {
            this.changedPart = s - 1;
            break;
          }
        }
      }
      if (this.prevParts = l, !!(this.state.autocompleteServer && this.state.autocompleteId) && this.changedPart !== null) {
        this.setState({
          loading: true
        });
        let c = `${this.state.autocompleteServer}/suggest/`;
        c += `?d=${this.state.autocompleteId}&ac=${l[this.changedPart].toLowerCase()}`, Je.json(c, (f, h) => {
          if (f)
            this.setState({
              loading: false,
              genes: []
            });
          else if (this.changedPart > 0 && !u) {
            const d = `${this.state.autocompleteServer}/suggest/?d=${this.state.autocompleteId}&ac=${l[this.changedPart - 1].toLowerCase()}-${l[this.changedPart].toLowerCase()}`;
            Je.json(d, (p, m) => {
              p ? this.setState({
                loading: false,
                genes: h
              }) : this.setState({
                loading: false,
                genes: m.concat(h)
              });
            }, this.props.pubSub);
          } else
            this.setState({
              loading: false,
              genes: h
            });
        }, this.props.pubSub);
      }
    }
  }, {
    key: "setAvailableAssemblies",
    value: function() {
      const i = new Set(mo(this.availableChromSizes)), o = /* @__PURE__ */ new Set([...i]);
      this.gpsbForm && this.setState({
        availableAssemblies: [...o]
      });
    }
  }, {
    key: "setSelectedAssembly",
    value: function(i) {
      if (!this.mounted || !this.availableChromSizes[i])
        return;
      const o = [...this.availableChromSizes[i]][0];
      this.setState({
        autocompleteServer: o.server
      });
      const {
        server: a
      } = o;
      if (this.availableAutocompletes[i]) {
        const s = [...this.availableAutocompletes[i]][0].acId;
        this.props.onSelectedAssemblyChanged(i, s, a), this.gpsbForm && this.setState({
          autocompleteId: s
        });
      } else
        this.props.onSelectedAssemblyChanged(i, null, a), this.gpsbForm && this.setState({
          autocompleteId: null
        });
      this.fetchChromInfo(o.uuid, o.server);
    }
  }, {
    key: "setPositionText",
    value: function() {
      if (!this.mounted || !this.searchField)
        return;
      const i = this.searchField.scalesToPositionText(this.xScale, this.yScale, this.props.twoD);
      this.prevParts = i.split(/[ -]/), this.gpsbForm && (this.positionText = i, this.origPositionText = i, this.autocompleteMenu.inputEl.value = i);
    }
  }, {
    key: "scalesChanged",
    value: function(i, o) {
      this.xScale = i, this.yScale = o, this.setPositionText();
    }
  }, {
    key: "findAvailableChromSizes",
    value: function() {
      this.props.trackSourceServers && this.props.trackSourceServers.forEach((i) => {
        Je.json(`${i}/available-chrom-sizes/`, (o, a) => {
          o ? console.error(o) : (a.results.forEach((s) => {
            s.coordSystem in this.availableChromSizes || (this.availableChromSizes[s.coordSystem] = /* @__PURE__ */ new Set()), this.availableChromSizes[s.coordSystem].add({
              server: i,
              uuid: s.uuid
            }), this.setAvailableAssemblies();
          }), this.searchField || this.fetchChromInfo(this.props.chromInfoId in this.availableChromSizes ? [...this.availableChromSizes[this.props.chromInfoId]][0].uuid : this.props.chromInfoId, this.props.chromInfoId in this.availableChromSizes ? [...this.availableChromSizes[this.props.chromInfoId]][0].server : this.props.chromInfoServer));
        }, this.props.pubSub);
      });
    }
  }, {
    key: "findAvailableAutocompleteSources",
    value: function() {
      this.props.trackSourceServers && this.props.trackSourceServers.forEach((i) => {
        Je.json(`${i}/tilesets/?limit=100&dt=gene-annotation`, (o, a) => {
          o ? console.error(o) : (a.results.forEach((s) => {
            s.coordSystem in this.availableAutocompletes || (this.availableAutocompletes[s.coordSystem] = /* @__PURE__ */ new Set()), this.availableAutocompletes[s.coordSystem].add({
              server: i,
              acId: s.uuid
            }), this.setAvailableAssemblies();
          }), this.state.autocompleteId || this.gpsbForm && this.availableAutocompletes[this.props.chromInfoId] && this.setState({
            autocompleteId: [...this.availableAutocompletes[this.props.chromInfoId]][0].acId
          }));
        }, this.props.pubSub);
      });
    }
    /**
     * The user has selected an assembly to use for the coordinate search box.
     * Once the appropriate ChromInfo file is fetched, it is stored locally
     *
     * @param {string} chromInfoId The name of the chromosome info set to use
     */
  }, {
    key: "fetchChromInfo",
    value: function(i, o) {
      Hs(`${o}/chrom-sizes/?id=${i}`, (a) => {
        a && (Je.json(`${o}/tileset_info/?d=${i}`, (s, l) => {
          s || this.gpsbForm && this.setState({
            selectedAssembly: l[i].coordSystem
          });
        }, this.props.pubSub), this.chromInfo = a, this.searchField = new Fd(this.chromInfo), this.setPositionText());
      }, this.props.pubSub);
    }
  }, {
    key: "autocompleteKeyPress",
    value: function(i) {
      i.keyCode === 13 && this.buttonClick();
    }
  }, {
    key: "genePositionToSearchBarText",
    value: function(i) {
    }
  }, {
    key: "replaceGenesWithLoadedPositions",
    value: function(i) {
      const o = this.positionText, a = o.split(" ");
      let s = false;
      for (let u = 0; u < a.length; u++) {
        const c = a[u].split("-");
        let f = 0, h = 0, d = "";
        for (; f < c.length; ) {
          for (h = c.length; h > f; ) {
            const p = c.slice(f, h).join("-");
            if (i[p.toLowerCase()]) {
              const m = i[p.toLowerCase()], g = Math.floor((m.txEnd - m.txStart) / 4);
              f === 0 && h < c.length ? d = `${m.chr}:${m.txStart - g}` : f === 0 && h === c.length ? d = `${m.chr}:${m.txStart - g}-${m.txEnd + g}` : d += `- ${m.chr}:${m.txEnd + g}`, s = true;
              break;
            } else
              h === f + 1 && (d.length && (d += "-"), d += p);
            h -= 1;
          }
          f = h + 1;
        }
        a[u] = d;
      }
      const l = a.join(" ");
      return this.prevParts = l.split(/[ -]/), this.positionText = l, this.setState({
        value: l
      }), s ? o : null;
    }
  }, {
    key: "replaceGenesWithPositions",
    value: function(i) {
      const o = this.positionText.split(/[ -]/), a = [];
      for (let s = 0; s < o.length; s++) {
        if (o[s].length === 0)
          continue;
        const l = this.searchField.parsePosition(o[s])[2];
        if (l === null || Number.isNaN(+l)) {
          const u = `${this.state.autocompleteServer}/suggest/?d=${this.state.autocompleteId}&ac=${o[s].toLowerCase()}`;
          a.push(Je.json(u, qo, this.props.pubSub));
        }
      }
      Promise.all(a).then((s) => {
        if (s) {
          const l = {};
          for (let c = 0; c < s.length; c++)
            if (s[c][0])
              for (let f = 0; f < s[c].length; f++)
                l[s[c][f].geneName.toLowerCase()] = s[c][f];
          const u = this.replaceGenesWithLoadedPositions(l);
          i(u);
        }
      }).catch((s) => console.error(s));
    }
  }, {
    key: "buttonClick",
    value: function() {
      this.setState({
        genes: []
      }), this.replaceGenesWithPositions((i) => {
        const o = this.positionText;
        if (this.searchField !== null) {
          const a = this.searchField.searchPosition(o), s = a[0];
          let l = a[1];
          if (!s) {
            this.setPositionText();
            return;
          }
          if (s && (Number.isNaN(+s[0]) || Number.isNaN(+s[1])) || l && (Number.isNaN(+l[0]) || Number.isNaN(+l[1])))
            return;
          l || (l = s);
          const u = this.xScale.copy().domain(s), c = this.yScale.copy().domain(l), [f, h, d] = un(u, c);
          i && this.props.onGeneSearch({
            geneSymbol: i,
            range: s,
            centerX: f,
            centerY: h
          }), this.props.setCenters(f, h, d, bV);
        }
      });
    }
  }, {
    key: "searchFieldSubmit",
    value: function() {
      this.buttonClick();
    }
  }, {
    key: "pathJoin",
    value: function(i, o) {
      const a = o || "/", s = new RegExp(`${a}{1,}`, "g");
      return i.join(a).replace(s, a);
    }
  }, {
    key: "geneSelected",
    value: function(i, o) {
      const a = this.positionText.split(" ");
      let s = this.changedPart;
      for (let l = 0; l < a.length; l++) {
        const u = a[l].split("-"), c = o.geneName.split("-");
        if (s > u.length - 1)
          s -= u.length;
        else {
          if (u[s] = o.geneName, c.length === 2 && s > 0 && u[s - 1].toLowerCase() === c[0].toLowerCase()) {
            const f = u.slice(0, s - 1);
            f.push(c.join("-")), s < u.length - 1 && f.push(u.slice(s + 1)), a[l] = f.join("-");
          } else
            a[l] = u.join("-");
          break;
        }
      }
      this.prevParts = a.join(" ").split(/[ -]/), this.positionText = a.join(" "), this.setState({
        value: a.join(" "),
        genes: []
      });
    }
  }, {
    key: "handleMenuVisibilityChange",
    value: function(i, o) {
      const a = o.getBoundingClientRect();
      this.menuPosition = {
        left: a.left,
        top: a.top + a.height
      }, this.setState({
        menuOpened: i
      });
    }
  }, {
    key: "handleRenderMenu",
    value: function(i) {
      return import_react.default.createElement(Yl, null, import_react.default.createElement("div", {
        className: jh["genome-position-search-bar-suggestions"],
        style: {
          left: this.menuPosition.left,
          top: this.menuPosition.top
        }
      }, i));
    }
  }, {
    key: "handleAssemblySelectEvt",
    value: function(i) {
      this.handleAssemblySelect(i.target.value);
    }
  }, {
    key: "handleAssemblySelect",
    value: function(i) {
      this.setSelectedAssembly(i), this.setState({
        selectedAssembly: i
      });
    }
  }, {
    key: "focusHandler",
    value: function(i) {
      this.setState({
        isFocused: i
      });
    }
  }, {
    key: "render",
    value: function() {
      const i = this.state.availableAssemblies.map((o) => import_react.default.createElement("option", {
        key: o,
        value: o
      }, o));
      return import_react.default.createElement("div", {
        ref: (o) => {
          this.gpsbForm = o;
        },
        className: nr({
          [jh["genome-position-search-focus"]]: this.state.isFocused,
          [jh["genome-position-search"]]: !this.state.isFocused,
          [jh["genome-position-search-dark"]]: this.props.theme === wr
        })
      }, !this.props.hideAvailableAssemblies && import_react.default.createElement("select", {
        ref: (o) => {
          this.assemblyPickButton = o;
        },
        className: jh["genome-position-search-bar-button"],
        id: this.uid,
        onChange: this.handleAssemblySelectEvt.bind(this),
        value: this.state.selectedAssembly || void 0
      }, i), import_react.default.createElement(NL, {
        ref: (o) => {
          this.autocompleteMenu = o;
        },
        getItemValue: (o) => o.geneName,
        inputProps: {
          className: jh["genome-position-search-bar"],
          title: "Current location: enter a symbol or location to change the position of the current view"
        },
        items: this.state.genes,
        menuStyle: {
          position: "absolute",
          left: this.menuPosition.left,
          top: this.menuPosition.top,
          border: "1px solid black"
        },
        onChange: this.onAutocompleteChange.bind(this),
        onFocus: this.focusHandler.bind(this),
        onMenuVisibilityChange: this.handleMenuVisibilityChange.bind(this),
        onSelect: (o, a) => this.geneSelected(o, a),
        onSubmit: this.searchFieldSubmit.bind(this),
        renderItem: (o, a) => import_react.default.createElement("div", {
          key: o.refseqid,
          id: o.refseqid,
          style: a ? this.styles.highlightedItem : this.styles.item
        }, o.geneName),
        renderMenu: this.handleRenderMenu.bind(this),
        value: this.state.selectedAssembly ? this.positionText : "No valid assembly selected",
        wrapperStyle: {
          width: "100%"
        }
      }), import_react.default.createElement(IV, {
        onClick: this.buttonClick.bind(this),
        theStyle: "multitrack-header-icon"
      }));
    }
  }]), r;
}(import_react.default.Component);
pee.propTypes = {
  autocompleteId: L.string,
  autocompleteServer: L.string,
  chromInfoId: L.string,
  chromInfoServer: L.string,
  chromInfoPath: L.string,
  hideAvailableAssemblies: L.bool,
  isFocused: L.bool,
  pubSub: L.object,
  onFocus: L.func,
  onGeneSearch: L.func,
  onSelectedAssemblyChanged: L.func,
  registerViewportChangedListener: L.func,
  removeViewportChangedListener: L.func,
  setCenters: L.func,
  theme: L.symbol.isRequired,
  trackSourceServers: L.array,
  twoD: L.bool
};
var btt = yp(lh(pee));
var Ttt = {
  "export-link-dialog-wrapper": "_export-link-dialog-wrapper_p9gxw_1"
};
function Ett(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function dG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, wtt(n.key), n);
  }
}
function Stt(e12, t, r) {
  return t && dG(e12.prototype, t), r && dG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function wtt(e12) {
  var t = Att(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function Att(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Ott(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && qk(e12, t);
}
function qk(e12, t) {
  return qk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, qk(e12, t);
}
function Itt(e12) {
  var t = xtt();
  return function() {
    var n = AE(e12), i;
    if (t) {
      var o = AE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return Ptt(this, i);
  };
}
function Ptt(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Ctt(e12);
}
function Ctt(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function xtt() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function AE(e12) {
  return AE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, AE(e12);
}
var ML = function(e12) {
  Ott(r, e12);
  var t = Itt(r);
  function r() {
    return Ett(this, r), t.apply(this, arguments);
  }
  return Stt(r, [{
    key: "render",
    value: function() {
      return import_react.default.createElement(Sy, {
        okayOnly: true,
        okayTitle: "Done",
        onOkay: this.props.onDone,
        title: "Share view link"
      }, import_react.default.createElement("div", {
        className: Ttt["export-link-dialog-wrapper"]
      }, import_react.default.createElement("input", {
        ref: (i) => {
          i && (this.input = i, i.focus(), i.select());
        },
        onClick: (i) => {
          i.target.select();
        },
        placeholder: "Generating the link...",
        readOnly: true,
        value: this.props.url
      }), import_react.default.createElement(Ds, {
        onClick: (i) => {
          this.input.select(), document.execCommand("copy");
        }
      }, "Copy")));
    }
  }]), r;
}(import_react.default.Component);
ML.defaultProps = {
  onDone: () => {
  },
  url: ""
};
ML.propTypes = {
  onDone: L.func,
  url: L.string
};
function ktt(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function pG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, Rtt(n.key), n);
  }
}
function Dtt(e12, t, r) {
  return t && pG(e12.prototype, t), r && pG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function Rtt(e12) {
  var t = Ntt(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function Ntt(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Mtt(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Kk(e12, t);
}
function Kk(e12, t) {
  return Kk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Kk(e12, t);
}
function Ltt(e12) {
  var t = $tt();
  return function() {
    var n = OE(e12), i;
    if (t) {
      var o = OE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return Btt(this, i);
  };
}
function Btt(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Ftt(e12);
}
function Ftt(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function $tt() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function OE(e12) {
  return OE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, OE(e12);
}
var mee = function(e12) {
  Mtt(r, e12);
  var t = Ltt(r);
  function r(n) {
    var i;
    return ktt(this, r), i = t.call(this, n), i.state = {
      submenuShown: false
    }, i;
  }
  return Dtt(r, [{
    key: "getConfigureViewMenu",
    value: function(i, o) {
      const a = ["backgroundColor"], s = {}, l = {};
      for (const u of a)
        if (u in Object.keys(Ln) && (s[u] = {
          name: Ln[u].name
        }, Ln[u].inlineOptions))
          for (const c in Ln[u].inlineOptions) {
            const f = Ln[u].inlineOptions[c];
            s[u].children || (s[u].children = {});
            const h = {
              name: f.name,
              value: f.value
              // missing handler to be filled in below
            };
            h.handler = () => {
              l[u] = f.value, this.props.onOptionsChanged(l);
            }, s[u].children[c] = h;
          }
      return import_react.default.createElement(Nk, {
        key: "config-series-menu",
        closeMenu: this.props.closeMenu,
        menuItems: s,
        orientation: this.state.orientation,
        parentBbox: o,
        position: i,
        theme: this.props.theme
      });
    }
  }, {
    key: "getSubmenu",
    value: function() {
      if (this.state.submenuShown) {
        const i = this.state.submenuSourceBbox, o = this.state.orientation === "left" ? {
          left: this.state.left,
          top: i.top
        } : {
          left: this.state.left + i.width + 7,
          top: i.top
        };
        return this.state.submenuShown.option === "options" ? this.getConfigureViewMenu(o, i) : import_react.default.createElement("div", null);
      }
      return import_react.default.createElement("div", null);
    }
  }, {
    key: "render",
    value: function() {
      return import_react.default.createElement("div", {
        ref: (i) => {
          this.div = i;
        },
        className: nr(St["context-menu"], {
          [St["context-menu-dark"]]: this.props.theme === wr
        }),
        "data-menu-type": "ConfigViewMenu",
        style: {
          left: this.state.left,
          top: this.state.top
        }
      }, import_react.default.createElement(Ct, {
        onClick: (i) => this.props.onTogglePositionSearchBox(i)
      }, "Toggle position search box"), import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), import_react.default.createElement(Ct, {
        onClick: (i) => this.props.onZoomToData(i)
      }, "Zoom to data extent"), import_react.default.createElement(Ct, {
        onClick: (i) => this.props.onClearView(i)
      }, "Clear View"), import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), import_react.default.createElement(Ct, {
        onClick: (i) => this.props.onYankZoom(i)
      }, "Take zoom from"), import_react.default.createElement(Ct, {
        onClick: (i) => this.props.onYankLocation(i)
      }, "Take location from"), import_react.default.createElement(Ct, {
        onClick: (i) => this.props.onYankZoomAndLocation(i)
      }, "Take zoom and location from"), import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), import_react.default.createElement(Ct, {
        onClick: this.props.onLockZoom
      }, "Lock zoom with"), import_react.default.createElement(Ct, {
        onClick: this.props.onLockLocation
      }, "Lock location with"), import_react.default.createElement(Ct, {
        onClick: this.props.onLockZoomAndLocation
      }, "Lock zoom and location with"), import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), import_react.default.createElement(Ct, {
        onClick: this.props.onTakeAndLockZoomAndLocation
      }, "Take and lock zoom and location with"), import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), import_react.default.createElement(Ct, {
        onClick: (i) => this.props.onUnlockZoom(i)
      }, "Unlock zoom"), import_react.default.createElement(Ct, {
        onClick: (i) => this.props.onUnlockLocation(i)
      }, "Unlock location"), import_react.default.createElement(Ct, {
        onClick: (i) => this.props.onUnlockZoomAndLocation(i)
      }, "Unlock zoom and location"), import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), import_react.default.createElement(Ct, {
        onClick: (i) => this.props.onProjectViewport(i)
      }, "Show this viewport on"), import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), import_react.default.createElement(Ct, {
        onClick: (i) => this.props.onEditViewConfig(i)
      }, "Edit view config"), import_react.default.createElement("hr", {
        className: St["context-menu-hr"]
      }), import_react.default.createElement(Ct, {
        onClick: () => this.props.onExportSVG()
      }, "Export views as SVG"), import_react.default.createElement(Ct, {
        onClick: () => this.props.onExportPNG()
      }, "Export views as PNG"), import_react.default.createElement(Ct, {
        onClick: () => this.props.onExportViewAsJSON()
      }, "Export views as JSON"), import_react.default.createElement(Ct, {
        onClick: () => this.props.onExportViewAsLink()
      }, "Export views as Link"), this.getSubmenu());
    }
  }]), r;
}(mc);
mee.propTypes = {
  onEditViewConfig: L.func.isRequired,
  onExportSVG: L.func,
  onExportPNG: L.func,
  onExportViewAsJSON: L.func,
  onExportViewAsLink: L.func,
  onLockLocation: L.func,
  onLockZoom: L.func,
  onLockZoomAndLocation: L.func,
  onProjectViewport: L.func,
  onTakeAndLockZoomAndLocation: L.func,
  onTogglePositionSearchBox: L.func,
  onUnlockLocation: L.func,
  onUnlockZoom: L.func,
  onUnlockZoomAndLocation: L.func,
  onYankLocation: L.func,
  onYankZoom: L.func,
  onYankZoomAndLocation: L.func,
  onZoomToData: L.func,
  theme: L.symbol
};
var ho = {
  "add-track-position-table": "_add-track-position-table_wdy5w_1",
  "add-track-position-table-dark": "_add-track-position-table-dark_wdy5w_7",
  "add-track-position-other": "_add-track-position-other_wdy5w_11",
  "add-track-position-top-center": "_add-track-position-top-center_wdy5w_15",
  "add-track-position-middle-left": "_add-track-position-middle-left_wdy5w_30",
  "add-track-position-middle-right": "_add-track-position-middle-right_wdy5w_45",
  "add-track-position-middle-middle": "_add-track-position-middle-middle_wdy5w_60",
  "add-track-position-bottom-middle": "_add-track-position-bottom-middle_wdy5w_71",
  "add-track-position-span": "_add-track-position-span_wdy5w_86"
};
function gee(e12) {
  return import_react.default.createElement("div", null, import_react.default.createElement("div", {
    className: ho["add-track-position-span"]
  }, "Add Track..."), import_react.default.createElement("table", {
    className: nr(ho["add-track-position-table"], {
      [ho["add-track-position-table-dark"]]: e12.theme === wr
    })
  }, import_react.default.createElement("tbody", null, import_react.default.createElement("tr", {
    style: {
      height: "30px"
    }
  }, import_react.default.createElement("td", {
    "aria-hidden": "true",
    className: ho["add-track-position-other"]
  }), import_react.default.createElement("td", {
    className: ho["add-track-position-top-center"],
    onClick: () => e12.onTrackPositionChosen("top")
  }, "top"), import_react.default.createElement("td", {
    "aria-hidden": "true",
    className: ho["add-track-position-other"]
  })), import_react.default.createElement("tr", {
    style: {
      height: "80px"
    }
  }, import_react.default.createElement("td", {
    className: ho["add-track-position-middle-left"],
    onClick: () => e12.onTrackPositionChosen("left")
  }, "left"), import_react.default.createElement("td", {
    className: ho["add-track-position-middle-middle"],
    onClick: () => e12.onTrackPositionChosen("center")
  }, "center"), import_react.default.createElement("td", {
    className: ho["add-track-position-middle-right"],
    onClick: () => e12.onTrackPositionChosen("right")
  }, "right")), import_react.default.createElement("tr", {
    style: {
      height: "30px"
    }
  }, import_react.default.createElement("td", {
    "aria-hidden": "true",
    className: ho["add-track-position-other"]
  }), import_react.default.createElement("td", {
    className: ho["add-track-position-bottom-middle"],
    onClick: () => e12.onTrackPositionChosen("bottom")
  }, "bottom"), import_react.default.createElement("td", {
    "aria-hidden": "true",
    className: ho["add-track-position-other"]
  })))));
}
gee.propTypes = {
  onTrackPositionChosen: L.func.isRequired,
  theme: L.symbol.isRequired
};
var Htt = lh(gee);
function Utt(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function mG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, Gtt(n.key), n);
  }
}
function jtt(e12, t, r) {
  return t && mG(e12.prototype, t), r && mG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function Gtt(e12) {
  var t = ztt(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function ztt(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Vtt(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && Zk(e12, t);
}
function Zk(e12, t) {
  return Zk = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, Zk(e12, t);
}
function Xtt(e12) {
  var t = Ytt();
  return function() {
    var n = IE(e12), i;
    if (t) {
      var o = IE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return Wtt(this, i);
  };
}
function Wtt(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return vee(e12);
}
function vee(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function Ytt() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function IE(e12) {
  return IE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, IE(e12);
}
var LL = function(e12) {
  Vtt(r, e12);
  var t = Xtt(r);
  function r(n) {
    var i;
    return Utt(this, r), i = t.call(this, n), i.configImg = null, i.plusImg = null, i.state = {
      addTrackPositionMenuUid: null,
      addTrackPositionMenuPosition: null,
      configMenuUid: null,
      configMenuPosition: null,
      isFocused: false,
      width: -1
    }, i.handleTrackPositionChosenBound = i.handleTrackPositionChosen.bind(vee(i)), i;
  }
  return jtt(r, [{
    key: "componentDidMount",
    value: function() {
      this.setState({
        width: this.el.clientWidth
      });
    }
  }, {
    key: "checkWidth",
    value: function() {
      const i = this.el.clientWidth;
      i !== this.state.width && this.setState({
        width: i
      });
    }
    /**
     * The user clicked on the `cog` of the menu so we need to open
     * it.
     */
  }, {
    key: "handleConfigMenuOpened",
    value: function(i) {
      this.setState({
        configMenuUid: i,
        configMenuPosition: this.configImg.getBoundingClientRect()
      });
    }
    /**
     * The user has clicked on the 'plus' sign at the top of a TiledPlot
     * so we need to open the Track Position Chooser dialog
     */
  }, {
    key: "handleAddTrackPositionMenuOpened",
    value: function(i) {
      this.setState({
        addTrackPositionMenuUid: i,
        addTrackPositionMenuPosition: this.plusImg.getBoundingClientRect()
      });
    }
    /**
     * The user has chosen a position for the new track. The actual
     * track selection will be handled by TiledPlot
     *
     * We just need to close the menu here.
     */
  }, {
    key: "handleTrackPositionChosen",
    value: function(i) {
      this.props.onTrackPositionChosen(i), this.setState({
        addTrackPositionMenuUid: null,
        addTrackPositionMenuPosition: null
      });
    }
  }, {
    key: "render",
    value: function() {
      let i = null, o = null;
      this.state.addTrackPositionMenuPosition && (o = import_react.default.createElement(Yl, {
        onMenuClosed: () => {
          this.setState({
            addTrackPositionMenuUid: null,
            addTrackPositionMenuPosition: null
          });
        }
      }, import_react.default.createElement(mc, {
        orientation: "left",
        position: this.state.addTrackPositionMenuPosition,
        theme: this.props.theme
      }, import_react.default.createElement(Htt, {
        onTrackPositionChosen: this.handleTrackPositionChosenBound
      })))), this.state.configMenuUid && (i = import_react.default.createElement(Yl, {
        onMenuClosed: () => this.setState({
          configMenuUid: null
        })
      }, import_react.default.createElement(mee, {
        onClearView: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onClearView();
        },
        onEditViewConfig: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onEditViewConfig(this.state.configMenuUid);
        },
        onExportPNG: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onExportPNG();
        },
        onExportSVG: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onExportSVG();
        },
        onExportViewAsJSON: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onExportViewsAsJSON();
        },
        onExportViewAsLink: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onExportViewsAsLink();
        },
        onLockLocation: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onLockLocation(this.state.configMenuUid);
        },
        onLockZoom: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onLockZoom(this.state.configMenuUid);
        },
        onLockZoomAndLocation: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onLockZoomAndLocation(this.state.configMenuUid);
        },
        onOptionsChanged: (u) => {
          this.props.onViewOptionsChanged(u), this.setState({
            configMenuUid: null
          });
        },
        onProjectViewport: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onProjectViewport(this.state.configMenuUid);
        },
        onTakeAndLockZoomAndLocation: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onTakeAndLockZoomAndLocation(this.state.configMenuUid);
        },
        onTogglePositionSearchBox: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onTogglePositionSearchBox(this.state.configMenuUid);
        },
        onUnlockLocation: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onUnlockLocation(this.state.configMenuUid);
        },
        onUnlockZoom: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onUnlockZoom(this.state.configMenuUid);
        },
        onUnlockZoomAndLocation: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onUnlockZoomAndLocation(this.state.configMenuUid);
        },
        onYankLocation: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onYankLocation(this.state.configMenuUid);
        },
        onYankZoom: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onYankZoom(this.state.configMenuUid);
        },
        onYankZoomAndLocation: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onYankZoomAndLocation(this.state.configMenuUid);
        },
        onZoomToData: () => {
          this.setState({
            configMenuUid: null
          }), this.props.onZoomToData(this.state.configMenuUid);
        },
        orientation: "left",
        position: this.state.configMenuPosition,
        theme: this.props.theme
      })));
      const a = this.props.getGenomePositionSearchBox(this.state.isFocused, (u) => {
        this.setState({
          isFocused: u
        });
      }), s = nr(this.state.isFocused ? po["multitrack-header-focus"] : po["multitrack-header"], {
        [po["multitrack-header-dark"]]: this.props.theme === wr
      }), l = this.state.width <= TV ? po["multitrack-header-icon-squeazed"] : po["multitrack-header-icon"];
      return import_react.default.createElement("div", {
        ref: (u) => {
          this.el = u;
        },
        className: s
      }, import_react.default.createElement("div", {
        className: po["multitrack-header-left"]
      }, this.props.mouseTool === To && import_react.default.createElement("svg", {
        className: nr(po["mouse-tool-selection"], l),
        title: "Selection tool active"
      }, import_react.default.createElement("use", {
        xlinkHref: "#select"
      })), import_react.default.createElement("div", {
        className: po["multitrack-header-grabber"],
        title: "Drag to move the view"
      }, import_react.default.createElement("div", null), import_react.default.createElement("div", null), import_react.default.createElement("div", null)), this.state.width > EV && import_react.default.createElement("div", {
        className: po["multitrack-header-search"]
      }, this.props.isGenomePositionSearchBoxVisible && a)), import_react.default.createElement("nav", {
        className: po["multitrack-header-nav-list"]
      }, import_react.default.createElement("svg", {
        className: l,
        onClick: this.props.onAddView
      }, import_react.default.createElement("title", null, "Add new view (clone this view)"), import_react.default.createElement("use", {
        xlinkHref: "#copy"
      })), import_react.default.createElement("svg", {
        ref: (u) => {
          this.configImg = u;
        },
        className: l,
        onClick: () => this.handleConfigMenuOpened(this.props.viewUid)
      }, import_react.default.createElement("title", null, "Configure this view"), import_react.default.createElement("use", {
        xlinkHref: "#cog"
      })), import_react.default.createElement("svg", {
        ref: (u) => {
          this.plusImg = u;
        },
        className: l,
        onClick: () => this.handleAddTrackPositionMenuOpened(this.props.viewUid)
      }, import_react.default.createElement("title", null, "Add Track"), import_react.default.createElement("use", {
        xlinkHref: "#plus"
      })), import_react.default.createElement("svg", {
        className: l,
        onClick: this.props.onCloseView
      }, import_react.default.createElement("title", null, "Close View"), import_react.default.createElement("use", {
        xlinkHref: "#cross"
      }))), i, o);
    }
  }]), r;
}(import_react.default.Component);
LL.defaultProps = {
  isGenomePositionSearchBoxVisible: false
};
LL.propTypes = {
  getGenomePositionSearchBox: L.func.isRequired,
  isGenomePositionSearchBoxVisible: L.bool,
  mouseTool: L.string.isRequired,
  onAddView: L.func.isRequired,
  onClearView: L.func.isRequired,
  onCloseView: L.func.isRequired,
  onEditViewConfig: L.func.isRequired,
  onExportSVG: L.func.isRequired,
  onExportPNG: L.func.isRequired,
  onExportViewsAsJSON: L.func.isRequired,
  onExportViewsAsLink: L.func.isRequired,
  onLockLocation: L.func.isRequired,
  onLockZoom: L.func.isRequired,
  onLockZoomAndLocation: L.func.isRequired,
  onProjectViewport: L.func.isRequired,
  onTakeAndLockZoomAndLocation: L.func.isRequired,
  onTogglePositionSearchBox: L.func.isRequired,
  onTrackPositionChosen: L.func.isRequired,
  onUnlockLocation: L.func.isRequired,
  onUnlockZoom: L.func.isRequired,
  onUnlockZoomAndLocation: L.func.isRequired,
  onViewOptionsChanged: L.func.isRequired,
  onYankLocation: L.func.isRequired,
  onYankZoom: L.func.isRequired,
  onYankZoomAndLocation: L.func.isRequired,
  onZoomToData: L.func.isRequired,
  theme: L.symbol.isRequired,
  viewUid: L.string.isRequired
};
var qtt = lh(LL);
var yee = {};
Object.defineProperty(yee, "__esModule", {
  value: true
});
var fl = Object.assign || function(e12) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t];
    for (var n in r)
      Object.prototype.hasOwnProperty.call(r, n) && (e12[n] = r[n]);
  }
  return e12;
};
var Ktt = /* @__PURE__ */ function() {
  function e12(t, r) {
    for (var n = 0; n < r.length; n++) {
      var i = r[n];
      i.enumerable = i.enumerable || false, i.configurable = true, "value" in i && (i.writable = true), Object.defineProperty(t, i.key, i);
    }
  }
  return function(t, r, n) {
    return r && e12(t.prototype, r), n && e12(t, n), t;
  };
}();
var Ztt = import_react.default;
var mm = Qtt(Ztt);
function Qtt(e12) {
  if (e12 && e12.__esModule)
    return e12;
  var t = {};
  if (e12 != null)
    for (var r in e12)
      Object.prototype.hasOwnProperty.call(e12, r) && (t[r] = e12[r]);
  return t.default = e12, t;
}
function Jtt(e12, t) {
  var r = {};
  for (var n in e12)
    t.indexOf(n) >= 0 || Object.prototype.hasOwnProperty.call(e12, n) && (r[n] = e12[n]);
  return r;
}
function ert(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function gG(e12, t) {
  if (!e12)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e12;
}
function trt(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e12.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e12,
      enumerable: false,
      writable: true,
      configurable: true
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e12, t) : e12.__proto__ = t);
}
var rrt = 13;
var nrt = 9;
var irt = 8;
var ort = 89;
var Y_ = 90;
var art = 77;
var vG = 57;
var yG = 219;
var _G = 222;
var bG = 192;
var srt = 27;
var TG = 100;
var lrt = 3e3;
var crt = "navigator" in globalThis && /Win/i.test(navigator.platform);
var tI = "navigator" in globalThis && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);
var Qb = "npm__react-simple-code-editor__textarea";
var urt = (
  /* CSS */
  `
/**
 * Reset the text fill color so that placeholder is visible
 */
.` + Qb + `:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .` + Qb + ` {
    color: transparent !important;
  }

  .` + Qb + `::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`
);
var _ee = function(e12) {
  trt(t, e12);
  function t() {
    var r, n, i, o;
    ert(this, t);
    for (var a = arguments.length, s = Array(a), l = 0; l < a; l++)
      s[l] = arguments[l];
    return o = (n = (i = gG(this, (r = t.__proto__ || Object.getPrototypeOf(t)).call.apply(r, [this].concat(s))), i), i.state = {
      capture: true
    }, i._recordCurrentState = function() {
      var u = i._input;
      if (u) {
        var c = u.value, f = u.selectionStart, h = u.selectionEnd;
        i._recordChange({
          value: c,
          selectionStart: f,
          selectionEnd: h
        });
      }
    }, i._getLines = function(u, c) {
      return u.substring(0, c).split(`
`);
    }, i._recordChange = function(u) {
      var c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false, f = i._history, h = f.stack, d = f.offset;
      if (h.length && d > -1) {
        i._history.stack = h.slice(0, d + 1);
        var p = i._history.stack.length;
        if (p > TG) {
          var m = p - TG;
          i._history.stack = h.slice(m, p), i._history.offset = Math.max(i._history.offset - m, 0);
        }
      }
      var g = Date.now();
      if (c) {
        var v = i._history.stack[i._history.offset];
        if (v && g - v.timestamp < lrt) {
          var _ = /[^a-z0-9]([a-z0-9]+)$/i, y = i._getLines(v.value, v.selectionStart).pop().match(_), b = i._getLines(u.value, u.selectionStart).pop().match(_);
          if (y && b && b[1].startsWith(y[1])) {
            i._history.stack[i._history.offset] = fl({}, u, {
              timestamp: g
            });
            return;
          }
        }
      }
      i._history.stack.push(fl({}, u, {
        timestamp: g
      })), i._history.offset++;
    }, i._updateInput = function(u) {
      var c = i._input;
      c && (c.value = u.value, c.selectionStart = u.selectionStart, c.selectionEnd = u.selectionEnd, i.props.onValueChange(u.value));
    }, i._applyEdits = function(u) {
      var c = i._input, f = i._history.stack[i._history.offset];
      f && c && (i._history.stack[i._history.offset] = fl({}, f, {
        selectionStart: c.selectionStart,
        selectionEnd: c.selectionEnd
      })), i._recordChange(u), i._updateInput(u);
    }, i._undoEdit = function() {
      var u = i._history, c = u.stack, f = u.offset, h = c[f - 1];
      h && (i._updateInput(h), i._history.offset = Math.max(f - 1, 0));
    }, i._redoEdit = function() {
      var u = i._history, c = u.stack, f = u.offset, h = c[f + 1];
      h && (i._updateInput(h), i._history.offset = Math.min(f + 1, c.length - 1));
    }, i._handleKeyDown = function(u) {
      var c = i.props, f = c.tabSize, h = c.insertSpaces, d = c.ignoreTabKey, p = c.onKeyDown;
      if (!(p && (p(u), u.defaultPrevented))) {
        u.keyCode === srt && u.target.blur();
        var m = u.target, g = m.value, v = m.selectionStart, _ = m.selectionEnd, y = (h ? " " : "	").repeat(f);
        if (u.keyCode === nrt && !d && i.state.capture)
          if (u.preventDefault(), u.shiftKey) {
            var b = i._getLines(g, v), T = b.length - 1, E = i._getLines(g, _).length - 1, P = g.split(`
`).map(function(ae, Y) {
              return Y >= T && Y <= E && ae.startsWith(y) ? ae.substring(y.length) : ae;
            }).join(`
`);
            if (g !== P) {
              var A = b[T];
              i._applyEdits({
                value: P,
                // Move the start cursor if first line in selection was modified
                // It was modified only if it started with a tab
                selectionStart: A.startsWith(y) ? v - y.length : v,
                // Move the end cursor by total number of characters removed
                selectionEnd: _ - (g.length - P.length)
              });
            }
          } else if (v !== _) {
            var I = i._getLines(g, v), x = I.length - 1, S = i._getLines(g, _).length - 1, N = I[x];
            i._applyEdits({
              value: g.split(`
`).map(function(ae, Y) {
                return Y >= x && Y <= S ? y + ae : ae;
              }).join(`
`),
              // Move the start cursor by number of characters added in first line of selection
              // Don't move it if it there was no text before cursor
              selectionStart: /\S/.test(N) ? v + y.length : v,
              // Move the end cursor by total number of characters added
              selectionEnd: _ + y.length * (S - x + 1)
            });
          } else {
            var B = v + y.length;
            i._applyEdits({
              // Insert tab character at caret
              value: g.substring(0, v) + y + g.substring(_),
              // Update caret position
              selectionStart: B,
              selectionEnd: B
            });
          }
        else if (u.keyCode === irt) {
          var w = v !== _, R = g.substring(0, v);
          if (R.endsWith(y) && !w) {
            u.preventDefault();
            var F = v - y.length;
            i._applyEdits({
              // Remove tab character at caret
              value: g.substring(0, v - y.length) + g.substring(_),
              // Update caret position
              selectionStart: F,
              selectionEnd: F
            });
          }
        } else if (u.keyCode === rrt) {
          if (v === _) {
            var $ = i._getLines(g, v).pop(), K = $.match(/^\s+/);
            if (K && K[0]) {
              u.preventDefault();
              var se = `
` + K[0], J = v + se.length;
              i._applyEdits({
                // Insert indentation character at caret
                value: g.substring(0, v) + se + g.substring(_),
                // Update caret position
                selectionStart: J,
                selectionEnd: J
              });
            }
          }
        } else if (u.keyCode === vG || u.keyCode === yG || u.keyCode === _G || u.keyCode === bG) {
          var me = void 0;
          u.keyCode === vG && u.shiftKey ? me = ["(", ")"] : u.keyCode === yG ? u.shiftKey ? me = ["{", "}"] : me = ["[", "]"] : u.keyCode === _G ? u.shiftKey ? me = ['"', '"'] : me = ["'", "'"] : u.keyCode === bG && !u.shiftKey && (me = ["`", "`"]), v !== _ && me && (u.preventDefault(), i._applyEdits({
            value: g.substring(0, v) + me[0] + g.substring(v, _) + me[1] + g.substring(_),
            // Update caret position
            selectionStart: v,
            selectionEnd: _ + 2
          }));
        } else
          (tI ? (
            // Trigger undo with ⌘+Z on Mac
            u.metaKey && u.keyCode === Y_
          ) : (
            // Trigger undo with Ctrl+Z on other platforms
            u.ctrlKey && u.keyCode === Y_
          )) && !u.shiftKey && !u.altKey ? (u.preventDefault(), i._undoEdit()) : (tI ? (
            // Trigger redo with ⌘+Shift+Z on Mac
            u.metaKey && u.keyCode === Y_ && u.shiftKey
          ) : crt ? (
            // Trigger redo with Ctrl+Y on Windows
            u.ctrlKey && u.keyCode === ort
          ) : (
            // Trigger redo with Ctrl+Shift+Z on other platforms
            u.ctrlKey && u.keyCode === Y_ && u.shiftKey
          )) && !u.altKey ? (u.preventDefault(), i._redoEdit()) : u.keyCode === art && u.ctrlKey && (!tI || u.shiftKey) && (u.preventDefault(), i.setState(function(ae) {
            return {
              capture: !ae.capture
            };
          }));
      }
    }, i._handleChange = function(u) {
      var c = u.target, f = c.value, h = c.selectionStart, d = c.selectionEnd;
      i._recordChange({
        value: f,
        selectionStart: h,
        selectionEnd: d
      }, true), i.props.onValueChange(f);
    }, i._history = {
      stack: [],
      offset: -1
    }, n), gG(i, o);
  }
  return Ktt(t, [{
    key: "componentDidMount",
    value: function() {
      this._recordCurrentState();
    }
  }, {
    key: "render",
    value: function() {
      var n = this, i = this.props, o = i.value, a = i.style, s = i.padding, l = i.highlight, u = i.textareaId, c = i.autoFocus, f = i.disabled, h = i.form, d = i.maxLength, p = i.minLength, m = i.name, g = i.placeholder, v = i.readOnly, _ = i.required, y = i.onClick, b = i.onFocus, T = i.onBlur, E = i.onKeyUp;
      i.onKeyDown, i.onValueChange, i.tabSize, i.insertSpaces, i.ignoreTabKey;
      var P = Jtt(i, ["value", "style", "padding", "highlight", "textareaId", "autoFocus", "disabled", "form", "maxLength", "minLength", "name", "placeholder", "readOnly", "required", "onClick", "onFocus", "onBlur", "onKeyUp", "onKeyDown", "onValueChange", "tabSize", "insertSpaces", "ignoreTabKey"]), A = {
        paddingTop: s,
        paddingRight: s,
        paddingBottom: s,
        paddingLeft: s
      }, I = l(o);
      return mm.createElement("div", fl({}, P, {
        style: fl({}, gm.container, a)
      }), mm.createElement("textarea", {
        ref: function(S) {
          return n._input = S;
        },
        style: fl({}, gm.editor, gm.textarea, A),
        className: Qb,
        id: u,
        value: o,
        onChange: this._handleChange,
        onKeyDown: this._handleKeyDown,
        onClick: y,
        onKeyUp: E,
        onFocus: b,
        onBlur: T,
        disabled: f,
        form: h,
        maxLength: d,
        minLength: p,
        name: m,
        placeholder: g,
        readOnly: v,
        required: _,
        autoFocus: c,
        autoCapitalize: "off",
        autoComplete: "off",
        autoCorrect: "off",
        spellCheck: false,
        "data-gramm": false
      }), mm.createElement("pre", fl({
        "aria-hidden": "true",
        style: fl({}, gm.editor, gm.highlight, A)
      }, typeof I == "string" ? {
        dangerouslySetInnerHTML: {
          __html: I + "<br />"
        }
      } : {
        children: I
      })), mm.createElement("style", {
        type: "text/css",
        dangerouslySetInnerHTML: {
          __html: urt
        }
      }));
    }
  }, {
    key: "session",
    get: function() {
      return {
        history: this._history
      };
    },
    set: function(n) {
      this._history = n.history;
    }
  }]), t;
}(mm.Component);
_ee.defaultProps = {
  tabSize: 2,
  insertSpaces: true,
  ignoreTabKey: false,
  padding: 0
};
var hrt = yee.default = _ee;
var gm = {
  container: {
    position: "relative",
    textAlign: "left",
    boxSizing: "border-box",
    padding: 0,
    overflow: "hidden"
  },
  textarea: {
    position: "absolute",
    top: 0,
    left: 0,
    height: "100%",
    width: "100%",
    resize: "none",
    color: "inherit",
    overflow: "hidden",
    MozOsxFontSmoothing: "grayscale",
    WebkitFontSmoothing: "antialiased",
    WebkitTextFillColor: "transparent"
  },
  highlight: {
    position: "relative",
    pointerEvents: "none"
  },
  editor: {
    margin: 0,
    border: 0,
    background: "none",
    boxSizing: "inherit",
    display: "inherit",
    fontFamily: "inherit",
    fontSize: "inherit",
    fontStyle: "inherit",
    fontVariantLigatures: "inherit",
    fontWeight: "inherit",
    letterSpacing: "inherit",
    lineHeight: "inherit",
    tabSize: "inherit",
    textIndent: "inherit",
    textRendering: "inherit",
    textTransform: "inherit",
    whiteSpace: "pre-wrap",
    wordBreak: "keep-all",
    overflowWrap: "break-word"
  }
};
var bee = { exports: {} };
(function(e12) {
  var t = typeof window < "u" ? window : typeof WorkerGlobalScope < "u" && self instanceof WorkerGlobalScope ? self : {};
  var r = function(n) {
    var i = /(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i, o = 0, a = {}, s = {
      /**
       * By default, Prism will attempt to highlight all code elements (by calling {@link Prism.highlightAll}) on the
       * current page after the page finished loading. This might be a problem if e.g. you wanted to asynchronously load
       * additional languages or plugins yourself.
       *
       * By setting this value to `true`, Prism will not automatically highlight all code elements on the page.
       *
       * You obviously have to change this value before the automatic highlighting started. To do this, you can add an
       * empty Prism object into the global scope before loading the Prism script like this:
       *
       * ```js
       * window.Prism = window.Prism || {};
       * Prism.manual = true;
       * // add a new <script> to load Prism's script
       * ```
       *
       * @default false
       * @type {boolean}
       * @memberof Prism
       * @public
       */
      manual: n.Prism && n.Prism.manual,
      /**
       * By default, if Prism is in a web worker, it assumes that it is in a worker it created itself, so it uses
       * `addEventListener` to communicate with its parent instance. However, if you're using Prism manually in your
       * own worker, you don't want it to do this.
       *
       * By setting this value to `true`, Prism will not add its own listeners to the worker.
       *
       * You obviously have to change this value before Prism executes. To do this, you can add an
       * empty Prism object into the global scope before loading the Prism script like this:
       *
       * ```js
       * window.Prism = window.Prism || {};
       * Prism.disableWorkerMessageHandler = true;
       * // Load Prism's script
       * ```
       *
       * @default false
       * @type {boolean}
       * @memberof Prism
       * @public
       */
      disableWorkerMessageHandler: n.Prism && n.Prism.disableWorkerMessageHandler,
      /**
       * A namespace for utility methods.
       *
       * All function in this namespace that are not explicitly marked as _public_ are for __internal use only__ and may
       * change or disappear at any time.
       *
       * @namespace
       * @memberof Prism
       */
      util: {
        encode: function _(y) {
          return y instanceof l ? new l(y.type, _(y.content), y.alias) : Array.isArray(y) ? y.map(_) : y.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/\u00a0/g, " ");
        },
        /**
         * Returns the name of the type of the given value.
         *
         * @param {any} o
         * @returns {string}
         * @example
         * type(null)      === 'Null'
         * type(undefined) === 'Undefined'
         * type(123)       === 'Number'
         * type('foo')     === 'String'
         * type(true)      === 'Boolean'
         * type([1, 2])    === 'Array'
         * type({})        === 'Object'
         * type(String)    === 'Function'
         * type(/abc+/)    === 'RegExp'
         */
        type: function(_) {
          return Object.prototype.toString.call(_).slice(8, -1);
        },
        /**
         * Returns a unique number for the given object. Later calls will still return the same number.
         *
         * @param {Object} obj
         * @returns {number}
         */
        objId: function(_) {
          return _.__id || Object.defineProperty(_, "__id", {
            value: ++o
          }), _.__id;
        },
        /**
         * Creates a deep clone of the given object.
         *
         * The main intended use of this function is to clone language definitions.
         *
         * @param {T} o
         * @param {Record<number, any>} [visited]
         * @returns {T}
         * @template T
         */
        clone: function _(y, b) {
          b = b || {};
          var T, E;
          switch (s.util.type(y)) {
            case "Object":
              if (E = s.util.objId(y), b[E])
                return b[E];
              T = /** @type {Record<string, any>} */
              {}, b[E] = T;
              for (var P in y)
                y.hasOwnProperty(P) && (T[P] = _(y[P], b));
              return (
                /** @type {any} */
                T
              );
            case "Array":
              return E = s.util.objId(y), b[E] ? b[E] : (T = [], b[E] = T, y.forEach(function(A, I) {
                T[I] = _(A, b);
              }), /** @type {any} */
              T);
            default:
              return y;
          }
        },
        /**
         * Returns the Prism language of the given element set by a `language-xxxx` or `lang-xxxx` class.
         *
         * If no language is set for the element or the element is `null` or `undefined`, `none` will be returned.
         *
         * @param {Element} element
         * @returns {string}
         */
        getLanguage: function(_) {
          for (; _; ) {
            var y = i.exec(_.className);
            if (y)
              return y[1].toLowerCase();
            _ = _.parentElement;
          }
          return "none";
        },
        /**
         * Sets the Prism `language-xxxx` class of the given element.
         *
         * @param {Element} element
         * @param {string} language
         * @returns {void}
         */
        setLanguage: function(_, y) {
          _.className = _.className.replace(RegExp(i, "gi"), ""), _.classList.add("language-" + y);
        },
        /**
         * Returns the script element that is currently executing.
         *
         * This does __not__ work for line script element.
         *
         * @returns {HTMLScriptElement | null}
         */
        currentScript: function() {
          if (typeof document > "u")
            return null;
          if ("currentScript" in document && 1 < 2)
            return (
              /** @type {any} */
              document.currentScript
            );
          try {
            throw new Error();
          } catch (T) {
            var _ = (/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(T.stack) || [])[1];
            if (_) {
              var y = document.getElementsByTagName("script");
              for (var b in y)
                if (y[b].src == _)
                  return y[b];
            }
            return null;
          }
        },
        /**
         * Returns whether a given class is active for `element`.
         *
         * The class can be activated if `element` or one of its ancestors has the given class and it can be deactivated
         * if `element` or one of its ancestors has the negated version of the given class. The _negated version_ of the
         * given class is just the given class with a `no-` prefix.
         *
         * Whether the class is active is determined by the closest ancestor of `element` (where `element` itself is
         * closest ancestor) that has the given class or the negated version of it. If neither `element` nor any of its
         * ancestors have the given class or the negated version of it, then the default activation will be returned.
         *
         * In the paradoxical situation where the closest ancestor contains __both__ the given class and the negated
         * version of it, the class is considered active.
         *
         * @param {Element} element
         * @param {string} className
         * @param {boolean} [defaultActivation=false]
         * @returns {boolean}
         */
        isActive: function(_, y, b) {
          for (var T = "no-" + y; _; ) {
            var E = _.classList;
            if (E.contains(y))
              return true;
            if (E.contains(T))
              return false;
            _ = _.parentElement;
          }
          return !!b;
        }
      },
      /**
       * This namespace contains all currently loaded languages and the some helper functions to create and modify languages.
       *
       * @namespace
       * @memberof Prism
       * @public
       */
      languages: {
        /**
         * The grammar for plain, unformatted text.
         */
        plain: a,
        plaintext: a,
        text: a,
        txt: a,
        /**
         * Creates a deep copy of the language with the given id and appends the given tokens.
         *
         * If a token in `redef` also appears in the copied language, then the existing token in the copied language
         * will be overwritten at its original position.
         *
         * ## Best practices
         *
         * Since the position of overwriting tokens (token in `redef` that overwrite tokens in the copied language)
         * doesn't matter, they can technically be in any order. However, this can be confusing to others that trying to
         * understand the language definition because, normally, the order of tokens matters in Prism grammars.
         *
         * Therefore, it is encouraged to order overwriting tokens according to the positions of the overwritten tokens.
         * Furthermore, all non-overwriting tokens should be placed after the overwriting ones.
         *
         * @param {string} id The id of the language to extend. This has to be a key in `Prism.languages`.
         * @param {Grammar} redef The new tokens to append.
         * @returns {Grammar} The new language created.
         * @public
         * @example
         * Prism.languages['css-with-colors'] = Prism.languages.extend('css', {
         *     // Prism.languages.css already has a 'comment' token, so this token will overwrite CSS' 'comment' token
         *     // at its original position
         *     'comment': { ... },
         *     // CSS doesn't have a 'color' token, so this token will be appended
         *     'color': /\b(?:red|green|blue)\b/
         * });
         */
        extend: function(_, y) {
          var b = s.util.clone(s.languages[_]);
          for (var T in y)
            b[T] = y[T];
          return b;
        },
        /**
         * Inserts tokens _before_ another token in a language definition or any other grammar.
         *
         * ## Usage
         *
         * This helper method makes it easy to modify existing languages. For example, the CSS language definition
         * not only defines CSS highlighting for CSS documents, but also needs to define highlighting for CSS embedded
         * in HTML through `<style>` elements. To do this, it needs to modify `Prism.languages.markup` and add the
         * appropriate tokens. However, `Prism.languages.markup` is a regular JavaScript object literal, so if you do
         * this:
         *
         * ```js
         * Prism.languages.markup.style = {
         *     // token
         * };
         * ```
         *
         * then the `style` token will be added (and processed) at the end. `insertBefore` allows you to insert tokens
         * before existing tokens. For the CSS example above, you would use it like this:
         *
         * ```js
         * Prism.languages.insertBefore('markup', 'cdata', {
         *     'style': {
         *         // token
         *     }
         * });
         * ```
         *
         * ## Special cases
         *
         * If the grammars of `inside` and `insert` have tokens with the same name, the tokens in `inside`'s grammar
         * will be ignored.
         *
         * This behavior can be used to insert tokens after `before`:
         *
         * ```js
         * Prism.languages.insertBefore('markup', 'comment', {
         *     'comment': Prism.languages.markup.comment,
         *     // tokens after 'comment'
         * });
         * ```
         *
         * ## Limitations
         *
         * The main problem `insertBefore` has to solve is iteration order. Since ES2015, the iteration order for object
         * properties is guaranteed to be the insertion order (except for integer keys) but some browsers behave
         * differently when keys are deleted and re-inserted. So `insertBefore` can't be implemented by temporarily
         * deleting properties which is necessary to insert at arbitrary positions.
         *
         * To solve this problem, `insertBefore` doesn't actually insert the given tokens into the target object.
         * Instead, it will create a new object and replace all references to the target object with the new one. This
         * can be done without temporarily deleting properties, so the iteration order is well-defined.
         *
         * However, only references that can be reached from `Prism.languages` or `insert` will be replaced. I.e. if
         * you hold the target object in a variable, then the value of the variable will not change.
         *
         * ```js
         * var oldMarkup = Prism.languages.markup;
         * var newMarkup = Prism.languages.insertBefore('markup', 'comment', { ... });
         *
         * assert(oldMarkup !== Prism.languages.markup);
         * assert(newMarkup === Prism.languages.markup);
         * ```
         *
         * @param {string} inside The property of `root` (e.g. a language id in `Prism.languages`) that contains the
         * object to be modified.
         * @param {string} before The key to insert before.
         * @param {Grammar} insert An object containing the key-value pairs to be inserted.
         * @param {Object<string, any>} [root] The object containing `inside`, i.e. the object that contains the
         * object to be modified.
         *
         * Defaults to `Prism.languages`.
         * @returns {Grammar} The new grammar object.
         * @public
         */
        insertBefore: function(_, y, b, T) {
          T = T || /** @type {any} */
          s.languages;
          var E = T[_], P = {};
          for (var A in E)
            if (E.hasOwnProperty(A)) {
              if (A == y)
                for (var I in b)
                  b.hasOwnProperty(I) && (P[I] = b[I]);
              b.hasOwnProperty(A) || (P[A] = E[A]);
            }
          var x = T[_];
          return T[_] = P, s.languages.DFS(s.languages, function(S, N) {
            N === x && S != _ && (this[S] = P);
          }), P;
        },
        // Traverse a language definition with Depth First Search
        DFS: function _(y, b, T, E) {
          E = E || {};
          var P = s.util.objId;
          for (var A in y)
            if (y.hasOwnProperty(A)) {
              b.call(y, A, y[A], T || A);
              var I = y[A], x = s.util.type(I);
              x === "Object" && !E[P(I)] ? (E[P(I)] = true, _(I, b, null, E)) : x === "Array" && !E[P(I)] && (E[P(I)] = true, _(I, b, A, E));
            }
        }
      },
      plugins: {},
      /**
       * This is the most high-level function in Prism’s API.
       * It fetches all the elements that have a `.language-xxxx` class and then calls {@link Prism.highlightElement} on
       * each one of them.
       *
       * This is equivalent to `Prism.highlightAllUnder(document, async, callback)`.
       *
       * @param {boolean} [async=false] Same as in {@link Prism.highlightAllUnder}.
       * @param {HighlightCallback} [callback] Same as in {@link Prism.highlightAllUnder}.
       * @memberof Prism
       * @public
       */
      highlightAll: function(_, y) {
        s.highlightAllUnder(document, _, y);
      },
      /**
       * Fetches all the descendants of `container` that have a `.language-xxxx` class and then calls
       * {@link Prism.highlightElement} on each one of them.
       *
       * The following hooks will be run:
       * 1. `before-highlightall`
       * 2. `before-all-elements-highlight`
       * 3. All hooks of {@link Prism.highlightElement} for each element.
       *
       * @param {ParentNode} container The root element, whose descendants that have a `.language-xxxx` class will be highlighted.
       * @param {boolean} [async=false] Whether each element is to be highlighted asynchronously using Web Workers.
       * @param {HighlightCallback} [callback] An optional callback to be invoked on each element after its highlighting is done.
       * @memberof Prism
       * @public
       */
      highlightAllUnder: function(_, y, b) {
        var T = {
          callback: b,
          container: _,
          selector: 'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'
        };
        s.hooks.run("before-highlightall", T), T.elements = Array.prototype.slice.apply(T.container.querySelectorAll(T.selector)), s.hooks.run("before-all-elements-highlight", T);
        for (var E = 0, P; P = T.elements[E++]; )
          s.highlightElement(P, y === true, T.callback);
      },
      /**
       * Highlights the code inside a single element.
       *
       * The following hooks will be run:
       * 1. `before-sanity-check`
       * 2. `before-highlight`
       * 3. All hooks of {@link Prism.highlight}. These hooks will be run by an asynchronous worker if `async` is `true`.
       * 4. `before-insert`
       * 5. `after-highlight`
       * 6. `complete`
       *
       * Some the above hooks will be skipped if the element doesn't contain any text or there is no grammar loaded for
       * the element's language.
       *
       * @param {Element} element The element containing the code.
       * It must have a class of `language-xxxx` to be processed, where `xxxx` is a valid language identifier.
       * @param {boolean} [async=false] Whether the element is to be highlighted asynchronously using Web Workers
       * to improve performance and avoid blocking the UI when highlighting very large chunks of code. This option is
       * [disabled by default](https://prismjs.com/faq.html#why-is-asynchronous-highlighting-disabled-by-default).
       *
       * Note: All language definitions required to highlight the code must be included in the main `prism.js` file for
       * asynchronous highlighting to work. You can build your own bundle on the
       * [Download page](https://prismjs.com/download.html).
       * @param {HighlightCallback} [callback] An optional callback to be invoked after the highlighting is done.
       * Mostly useful when `async` is `true`, since in that case, the highlighting is done asynchronously.
       * @memberof Prism
       * @public
       */
      highlightElement: function(_, y, b) {
        var T = s.util.getLanguage(_), E = s.languages[T];
        s.util.setLanguage(_, T);
        var P = _.parentElement;
        P && P.nodeName.toLowerCase() === "pre" && s.util.setLanguage(P, T);
        var A = _.textContent, I = {
          element: _,
          language: T,
          grammar: E,
          code: A
        };
        function x(N) {
          I.highlightedCode = N, s.hooks.run("before-insert", I), I.element.innerHTML = I.highlightedCode, s.hooks.run("after-highlight", I), s.hooks.run("complete", I), b && b.call(I.element);
        }
        if (s.hooks.run("before-sanity-check", I), P = I.element.parentElement, P && P.nodeName.toLowerCase() === "pre" && !P.hasAttribute("tabindex") && P.setAttribute("tabindex", "0"), !I.code) {
          s.hooks.run("complete", I), b && b.call(I.element);
          return;
        }
        if (s.hooks.run("before-highlight", I), !I.grammar) {
          x(s.util.encode(I.code));
          return;
        }
        if (y && n.Worker) {
          var S = new Worker(s.filename);
          S.onmessage = function(N) {
            x(N.data);
          }, S.postMessage(JSON.stringify({
            language: I.language,
            code: I.code,
            immediateClose: true
          }));
        } else
          x(s.highlight(I.code, I.grammar, I.language));
      },
      /**
       * Low-level function, only use if you know what you’re doing. It accepts a string of text as input
       * and the language definitions to use, and returns a string with the HTML produced.
       *
       * The following hooks will be run:
       * 1. `before-tokenize`
       * 2. `after-tokenize`
       * 3. `wrap`: On each {@link Token}.
       *
       * @param {string} text A string with the code to be highlighted.
       * @param {Grammar} grammar An object containing the tokens to use.
       *
       * Usually a language definition like `Prism.languages.markup`.
       * @param {string} language The name of the language definition passed to `grammar`.
       * @returns {string} The highlighted HTML.
       * @memberof Prism
       * @public
       * @example
       * Prism.highlight('var foo = true;', Prism.languages.javascript, 'javascript');
       */
      highlight: function(_, y, b) {
        var T = {
          code: _,
          grammar: y,
          language: b
        };
        if (s.hooks.run("before-tokenize", T), !T.grammar)
          throw new Error('The language "' + T.language + '" has no grammar.');
        return T.tokens = s.tokenize(T.code, T.grammar), s.hooks.run("after-tokenize", T), l.stringify(s.util.encode(T.tokens), T.language);
      },
      /**
       * This is the heart of Prism, and the most low-level function you can use. It accepts a string of text as input
       * and the language definitions to use, and returns an array with the tokenized code.
       *
       * When the language definition includes nested tokens, the function is called recursively on each of these tokens.
       *
       * This method could be useful in other contexts as well, as a very crude parser.
       *
       * @param {string} text A string with the code to be highlighted.
       * @param {Grammar} grammar An object containing the tokens to use.
       *
       * Usually a language definition like `Prism.languages.markup`.
       * @returns {TokenStream} An array of strings and tokens, a token stream.
       * @memberof Prism
       * @public
       * @example
       * let code = `var foo = 0;`;
       * let tokens = Prism.tokenize(code, Prism.languages.javascript);
       * tokens.forEach(token => {
       *     if (token instanceof Prism.Token && token.type === 'number') {
       *         console.log(`Found numeric literal: ${token.content}`);
       *     }
       * });
       */
      tokenize: function(_, y) {
        var b = y.rest;
        if (b) {
          for (var T in b)
            y[T] = b[T];
          delete y.rest;
        }
        var E = new f();
        return h(E, E.head, _), c(_, E, y, E.head, 0), p(E);
      },
      /**
       * @namespace
       * @memberof Prism
       * @public
       */
      hooks: {
        all: {},
        /**
         * Adds the given callback to the list of callbacks for the given hook.
         *
         * The callback will be invoked when the hook it is registered for is run.
         * Hooks are usually directly run by a highlight function but you can also run hooks yourself.
         *
         * One callback function can be registered to multiple hooks and the same hook multiple times.
         *
         * @param {string} name The name of the hook.
         * @param {HookCallback} callback The callback function which is given environment variables.
         * @public
         */
        add: function(_, y) {
          var b = s.hooks.all;
          b[_] = b[_] || [], b[_].push(y);
        },
        /**
         * Runs a hook invoking all registered callbacks with the given environment variables.
         *
         * Callbacks will be invoked synchronously and in the order in which they were registered.
         *
         * @param {string} name The name of the hook.
         * @param {Object<string, any>} env The environment variables of the hook passed to all callbacks registered.
         * @public
         */
        run: function(_, y) {
          var b = s.hooks.all[_];
          if (!(!b || !b.length))
            for (var T = 0, E; E = b[T++]; )
              E(y);
        }
      },
      Token: l
    };
    n.Prism = s;
    function l(_, y, b, T) {
      this.type = _, this.content = y, this.alias = b, this.length = (T || "").length | 0;
    }
    l.stringify = function _(y, b) {
      if (typeof y == "string")
        return y;
      if (Array.isArray(y)) {
        var T = "";
        return y.forEach(function(x) {
          T += _(x, b);
        }), T;
      }
      var E = {
        type: y.type,
        content: _(y.content, b),
        tag: "span",
        classes: ["token", y.type],
        attributes: {},
        language: b
      }, P = y.alias;
      P && (Array.isArray(P) ? Array.prototype.push.apply(E.classes, P) : E.classes.push(P)), s.hooks.run("wrap", E);
      var A = "";
      for (var I in E.attributes)
        A += " " + I + '="' + (E.attributes[I] || "").replace(/"/g, "&quot;") + '"';
      return "<" + E.tag + ' class="' + E.classes.join(" ") + '"' + A + ">" + E.content + "</" + E.tag + ">";
    };
    function u(_, y, b, T) {
      _.lastIndex = y;
      var E = _.exec(b);
      if (E && T && E[1]) {
        var P = E[1].length;
        E.index += P, E[0] = E[0].slice(P);
      }
      return E;
    }
    function c(_, y, b, T, E, P) {
      for (var A in b)
        if (!(!b.hasOwnProperty(A) || !b[A])) {
          var I = b[A];
          I = Array.isArray(I) ? I : [I];
          for (var x = 0; x < I.length; ++x) {
            if (P && P.cause == A + "," + x)
              return;
            var S = I[x], N = S.inside, B = !!S.lookbehind, w = !!S.greedy, R = S.alias;
            if (w && !S.pattern.global) {
              var F = S.pattern.toString().match(/[imsuy]*$/)[0];
              S.pattern = RegExp(S.pattern.source, F + "g");
            }
            for (var $ = S.pattern || S, K = T.next, se = E; K !== y.tail && !(P && se >= P.reach); se += K.value.length, K = K.next) {
              var J = K.value;
              if (y.length > _.length)
                return;
              if (!(J instanceof l)) {
                var me = 1, ae;
                if (w) {
                  if (ae = u($, se, _, B), !ae || ae.index >= _.length)
                    break;
                  var Se = ae.index, Y = ae.index + ae[0].length, Q = se;
                  for (Q += K.value.length; Se >= Q; )
                    K = K.next, Q += K.value.length;
                  if (Q -= K.value.length, se = Q, K.value instanceof l)
                    continue;
                  for (var le = K; le !== y.tail && (Q < Y || typeof le.value == "string"); le = le.next)
                    me++, Q += le.value.length;
                  me--, J = _.slice(se, Q), ae.index -= se;
                } else if (ae = u($, 0, J, B), !ae)
                  continue;
                var Se = ae.index, Pe = ae[0], Re = J.slice(0, Se), we = J.slice(Se + Pe.length), Ne = se + J.length;
                P && Ne > P.reach && (P.reach = Ne);
                var Me = K.prev;
                Re && (Me = h(y, Me, Re), se += Re.length), d(y, Me, me);
                var Ie = new l(A, N ? s.tokenize(Pe, N) : Pe, R, Pe);
                if (K = h(y, Me, Ie), we && h(y, K, we), me > 1) {
                  var Ge = {
                    cause: A + "," + x,
                    reach: Ne
                  };
                  c(_, y, b, K.prev, se, Ge), P && Ge.reach > P.reach && (P.reach = Ge.reach);
                }
              }
            }
          }
        }
    }
    function f() {
      var _ = {
        value: null,
        prev: null,
        next: null
      }, y = {
        value: null,
        prev: _,
        next: null
      };
      _.next = y, this.head = _, this.tail = y, this.length = 0;
    }
    function h(_, y, b) {
      var T = y.next, E = {
        value: b,
        prev: y,
        next: T
      };
      return y.next = E, T.prev = E, _.length++, E;
    }
    function d(_, y, b) {
      for (var T = y.next, E = 0; E < b && T !== _.tail; E++)
        T = T.next;
      y.next = T, T.prev = y, _.length -= E;
    }
    function p(_) {
      for (var y = [], b = _.head.next; b !== _.tail; )
        y.push(b.value), b = b.next;
      return y;
    }
    if (!n.document)
      return n.addEventListener && (s.disableWorkerMessageHandler || n.addEventListener("message", function(_) {
        var y = JSON.parse(_.data), b = y.language, T = y.code, E = y.immediateClose;
        n.postMessage(s.highlight(T, s.languages[b], b)), E && n.close();
      }, false)), s;
    var m = s.util.currentScript();
    m && (s.filename = m.src, m.hasAttribute("data-manual") && (s.manual = true));
    function g() {
      s.manual || s.highlightAll();
    }
    if (!s.manual) {
      var v = document.readyState;
      v === "loading" || v === "interactive" && m && m.defer ? document.addEventListener("DOMContentLoaded", g) : window.requestAnimationFrame ? window.requestAnimationFrame(g) : window.setTimeout(g, 16);
    }
    return s;
  }(t);
  e12.exports && (e12.exports = r), typeof globalThis < "u" && (globalThis.Prism = r);
})(bee);
var EG = bee.exports;
Prism.languages.json = {
  property: {
    pattern: /(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,
    lookbehind: true,
    greedy: true
  },
  string: {
    pattern: /(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,
    lookbehind: true,
    greedy: true
  },
  comment: {
    pattern: /\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,
    greedy: true
  },
  number: /-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,
  punctuation: /[{}[\],]/,
  operator: /:/,
  boolean: /\b(?:false|true)\b/,
  null: {
    pattern: /\bnull\b/,
    alias: "keyword"
  }
};
Prism.languages.webmanifest = Prism.languages.json;
var Qk = { exports: {} };
(function(e12, t) {
  (function(r, n) {
    n(t);
  })(De, function(r) {
    function n() {
      for (var z = arguments.length, U = Array(z), ie = 0; ie < z; ie++)
        U[ie] = arguments[ie];
      if (U.length > 1) {
        U[0] = U[0].slice(0, -1);
        for (var Ee = U.length - 1, Oe = 1; Oe < Ee; ++Oe)
          U[Oe] = U[Oe].slice(1, -1);
        return U[Ee] = U[Ee].slice(1), U.join("");
      } else
        return U[0];
    }
    function i(z) {
      return "(?:" + z + ")";
    }
    function o(z) {
      return z === void 0 ? "undefined" : z === null ? "null" : Object.prototype.toString.call(z).split(" ").pop().split("]").shift().toLowerCase();
    }
    function a(z) {
      return z.toUpperCase();
    }
    function s(z) {
      return z != null ? z instanceof Array ? z : typeof z.length != "number" || z.split || z.setInterval || z.call ? [z] : Array.prototype.slice.call(z) : [];
    }
    function l(z, U) {
      var ie = z;
      if (U)
        for (var Ee in U)
          ie[Ee] = U[Ee];
      return ie;
    }
    function u(z) {
      var U = "[A-Za-z]", ie = "[0-9]", Ee = n(ie, "[A-Fa-f]"), Oe = i(i("%[EFef]" + Ee + "%" + Ee + Ee + "%" + Ee + Ee) + "|" + i("%[89A-Fa-f]" + Ee + "%" + Ee + Ee) + "|" + i("%" + Ee + Ee)), Ye = "[\\:\\/\\?\\#\\[\\]\\@]", qe = "[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]", dt = n(Ye, qe), At = z ? "[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]" : "[]", Yt = z ? "[\\uE000-\\uF8FF]" : "[]", Tt = n(U, ie, "[\\-\\.\\_\\~]", At);
      i(U + n(U, ie, "[\\+\\-\\.]") + "*"), i(i(Oe + "|" + n(Tt, qe, "[\\:]")) + "*");
      var Ut = i(i("25[0-5]") + "|" + i("2[0-4]" + ie) + "|" + i("1" + ie + ie) + "|" + i("0?[1-9]" + ie) + "|0?0?" + ie), or = i(Ut + "\\." + Ut + "\\." + Ut + "\\." + Ut), pt = i(Ee + "{1,4}"), zt = i(i(pt + "\\:" + pt) + "|" + or), ar = i(i(pt + "\\:") + "{6}" + zt), cr = i("\\:\\:" + i(pt + "\\:") + "{5}" + zt), Cr = i(i(pt) + "?\\:\\:" + i(pt + "\\:") + "{4}" + zt), Vn = i(i(i(pt + "\\:") + "{0,1}" + pt) + "?\\:\\:" + i(pt + "\\:") + "{3}" + zt), Xe = i(i(i(pt + "\\:") + "{0,2}" + pt) + "?\\:\\:" + i(pt + "\\:") + "{2}" + zt), nt = i(i(i(pt + "\\:") + "{0,3}" + pt) + "?\\:\\:" + pt + "\\:" + zt), Rt = i(i(i(pt + "\\:") + "{0,4}" + pt) + "?\\:\\:" + zt), Ot = i(i(i(pt + "\\:") + "{0,5}" + pt) + "?\\:\\:" + pt), vt = i(i(i(pt + "\\:") + "{0,6}" + pt) + "?\\:\\:"), qt = i([ar, cr, Cr, Vn, Xe, nt, Rt, Ot, vt].join("|")), xt = i(i(Tt + "|" + Oe) + "+");
      i("[vV]" + Ee + "+\\." + n(Tt, qe, "[\\:]") + "+"), i(i(Oe + "|" + n(Tt, qe)) + "*");
      var Mt = i(Oe + "|" + n(Tt, qe, "[\\:\\@]"));
      return i(i(Oe + "|" + n(Tt, qe, "[\\@]")) + "+"), i(i(Mt + "|" + n("[\\/\\?]", Yt)) + "*"), {
        NOT_SCHEME: new RegExp(n("[^]", U, ie, "[\\+\\-\\.]"), "g"),
        NOT_USERINFO: new RegExp(n("[^\\%\\:]", Tt, qe), "g"),
        NOT_HOST: new RegExp(n("[^\\%\\[\\]\\:]", Tt, qe), "g"),
        NOT_PATH: new RegExp(n("[^\\%\\/\\:\\@]", Tt, qe), "g"),
        NOT_PATH_NOSCHEME: new RegExp(n("[^\\%\\/\\@]", Tt, qe), "g"),
        NOT_QUERY: new RegExp(n("[^\\%]", Tt, qe, "[\\:\\@\\/\\?]", Yt), "g"),
        NOT_FRAGMENT: new RegExp(n("[^\\%]", Tt, qe, "[\\:\\@\\/\\?]"), "g"),
        ESCAPE: new RegExp(n("[^]", Tt, qe), "g"),
        UNRESERVED: new RegExp(Tt, "g"),
        OTHER_CHARS: new RegExp(n("[^\\%]", Tt, dt), "g"),
        PCT_ENCODED: new RegExp(Oe, "g"),
        IPV4ADDRESS: new RegExp("^(" + or + ")$"),
        IPV6ADDRESS: new RegExp("^\\[?(" + qt + ")" + i(i("\\%25|\\%(?!" + Ee + "{2})") + "(" + xt + ")") + "?\\]?$")
        //RFC 6874, with relaxed parsing rules
      };
    }
    var c = u(false), f = u(true), h = /* @__PURE__ */ function() {
      function z(U, ie) {
        var Ee = [], Oe = true, Ye = false, qe = void 0;
        try {
          for (var dt = U[Symbol.iterator](), At; !(Oe = (At = dt.next()).done) && (Ee.push(At.value), !(ie && Ee.length === ie)); Oe = true)
            ;
        } catch (Yt) {
          Ye = true, qe = Yt;
        } finally {
          try {
            !Oe && dt.return && dt.return();
          } finally {
            if (Ye)
              throw qe;
          }
        }
        return Ee;
      }
      return function(U, ie) {
        if (Array.isArray(U))
          return U;
        if (Symbol.iterator in Object(U))
          return z(U, ie);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(), d = function(z) {
      if (Array.isArray(z)) {
        for (var U = 0, ie = Array(z.length); U < z.length; U++)
          ie[U] = z[U];
        return ie;
      } else
        return Array.from(z);
    }, p = 2147483647, m = 36, g = 1, v = 26, _ = 38, y = 700, b = 72, T = 128, E = "-", P = /^xn--/, A = /[^\0-\x7E]/, I = /[\x2E\u3002\uFF0E\uFF61]/g, x = {
      overflow: "Overflow: input needs wider integers to process",
      "not-basic": "Illegal input >= 0x80 (not a basic code point)",
      "invalid-input": "Invalid input"
    }, S = m - g, N = Math.floor, B = String.fromCharCode;
    function w(z) {
      throw new RangeError(x[z]);
    }
    function R(z, U) {
      for (var ie = [], Ee = z.length; Ee--; )
        ie[Ee] = U(z[Ee]);
      return ie;
    }
    function F(z, U) {
      var ie = z.split("@"), Ee = "";
      ie.length > 1 && (Ee = ie[0] + "@", z = ie[1]), z = z.replace(I, ".");
      var Oe = z.split("."), Ye = R(Oe, U).join(".");
      return Ee + Ye;
    }
    function $(z) {
      for (var U = [], ie = 0, Ee = z.length; ie < Ee; ) {
        var Oe = z.charCodeAt(ie++);
        if (Oe >= 55296 && Oe <= 56319 && ie < Ee) {
          var Ye = z.charCodeAt(ie++);
          (Ye & 64512) == 56320 ? U.push(((Oe & 1023) << 10) + (Ye & 1023) + 65536) : (U.push(Oe), ie--);
        } else
          U.push(Oe);
      }
      return U;
    }
    var K = function(U) {
      return String.fromCodePoint.apply(String, d(U));
    }, se = function(U) {
      return U - 48 < 10 ? U - 22 : U - 65 < 26 ? U - 65 : U - 97 < 26 ? U - 97 : m;
    }, J = function(U, ie) {
      return U + 22 + 75 * (U < 26) - ((ie != 0) << 5);
    }, me = function(U, ie, Ee) {
      var Oe = 0;
      for (
        U = Ee ? N(U / y) : U >> 1, U += N(U / ie);
        /* no initialization */
        U > S * v >> 1;
        Oe += m
      )
        U = N(U / S);
      return N(Oe + (S + 1) * U / (U + _));
    }, ae = function(U) {
      var ie = [], Ee = U.length, Oe = 0, Ye = T, qe = b, dt = U.lastIndexOf(E);
      dt < 0 && (dt = 0);
      for (var At = 0; At < dt; ++At)
        U.charCodeAt(At) >= 128 && w("not-basic"), ie.push(U.charCodeAt(At));
      for (var Yt = dt > 0 ? dt + 1 : 0; Yt < Ee; ) {
        for (
          var Tt = Oe, Ut = 1, or = m;
          ;
          /* no condition */
          or += m
        ) {
          Yt >= Ee && w("invalid-input");
          var pt = se(U.charCodeAt(Yt++));
          (pt >= m || pt > N((p - Oe) / Ut)) && w("overflow"), Oe += pt * Ut;
          var zt = or <= qe ? g : or >= qe + v ? v : or - qe;
          if (pt < zt)
            break;
          var ar = m - zt;
          Ut > N(p / ar) && w("overflow"), Ut *= ar;
        }
        var cr = ie.length + 1;
        qe = me(Oe - Tt, cr, Tt == 0), N(Oe / cr) > p - Ye && w("overflow"), Ye += N(Oe / cr), Oe %= cr, ie.splice(Oe++, 0, Ye);
      }
      return String.fromCodePoint.apply(String, ie);
    }, Y = function(U) {
      var ie = [];
      U = $(U);
      var Ee = U.length, Oe = T, Ye = 0, qe = b, dt = true, At = false, Yt = void 0;
      try {
        for (var Tt = U[Symbol.iterator](), Ut; !(dt = (Ut = Tt.next()).done); dt = true) {
          var or = Ut.value;
          or < 128 && ie.push(B(or));
        }
      } catch (nl) {
        At = true, Yt = nl;
      } finally {
        try {
          !dt && Tt.return && Tt.return();
        } finally {
          if (At)
            throw Yt;
        }
      }
      var pt = ie.length, zt = pt;
      for (pt && ie.push(E); zt < Ee; ) {
        var ar = p, cr = true, Cr = false, Vn = void 0;
        try {
          for (var Xe = U[Symbol.iterator](), nt; !(cr = (nt = Xe.next()).done); cr = true) {
            var Rt = nt.value;
            Rt >= Oe && Rt < ar && (ar = Rt);
          }
        } catch (nl) {
          Cr = true, Vn = nl;
        } finally {
          try {
            !cr && Xe.return && Xe.return();
          } finally {
            if (Cr)
              throw Vn;
          }
        }
        var Ot = zt + 1;
        ar - Oe > N((p - Ye) / Ot) && w("overflow"), Ye += (ar - Oe) * Ot, Oe = ar;
        var vt = true, qt = false, xt = void 0;
        try {
          for (var Mt = U[Symbol.iterator](), Kt; !(vt = (Kt = Mt.next()).done); vt = true) {
            var ur = Kt.value;
            if (ur < Oe && ++Ye > p && w("overflow"), ur == Oe) {
              for (
                var hr = Ye, xn = m;
                ;
                /* no condition */
                xn += m
              ) {
                var lo = xn <= qe ? g : xn >= qe + v ? v : xn - qe;
                if (hr < lo)
                  break;
                var rl = hr - lo, Dp = m - lo;
                ie.push(B(J(lo + rl % Dp, 0))), hr = N(rl / Dp);
              }
              ie.push(B(J(hr, 0))), qe = me(Ye, Ot, zt == pt), Ye = 0, ++zt;
            }
          }
        } catch (nl) {
          qt = true, xt = nl;
        } finally {
          try {
            !vt && Mt.return && Mt.return();
          } finally {
            if (qt)
              throw xt;
          }
        }
        ++Ye, ++Oe;
      }
      return ie.join("");
    }, Q = function(U) {
      return F(U, function(ie) {
        return P.test(ie) ? ae(ie.slice(4).toLowerCase()) : ie;
      });
    }, le = function(U) {
      return F(U, function(ie) {
        return A.test(ie) ? "xn--" + Y(ie) : ie;
      });
    }, Se = {
      /**
       * A string representing the current Punycode.js version number.
       * @memberOf punycode
       * @type String
       */
      version: "2.1.0",
      /**
       * An object of methods to convert from JavaScript's internal character
       * representation (UCS-2) to Unicode code points, and back.
       * @see <https://mathiasbynens.be/notes/javascript-encoding>
       * @memberOf punycode
       * @type Object
       */
      ucs2: {
        decode: $,
        encode: K
      },
      decode: ae,
      encode: Y,
      toASCII: le,
      toUnicode: Q
    }, Pe = {};
    function Re(z) {
      var U = z.charCodeAt(0), ie = void 0;
      return U < 16 ? ie = "%0" + U.toString(16).toUpperCase() : U < 128 ? ie = "%" + U.toString(16).toUpperCase() : U < 2048 ? ie = "%" + (U >> 6 | 192).toString(16).toUpperCase() + "%" + (U & 63 | 128).toString(16).toUpperCase() : ie = "%" + (U >> 12 | 224).toString(16).toUpperCase() + "%" + (U >> 6 & 63 | 128).toString(16).toUpperCase() + "%" + (U & 63 | 128).toString(16).toUpperCase(), ie;
    }
    function we(z) {
      for (var U = "", ie = 0, Ee = z.length; ie < Ee; ) {
        var Oe = parseInt(z.substr(ie + 1, 2), 16);
        if (Oe < 128)
          U += String.fromCharCode(Oe), ie += 3;
        else if (Oe >= 194 && Oe < 224) {
          if (Ee - ie >= 6) {
            var Ye = parseInt(z.substr(ie + 4, 2), 16);
            U += String.fromCharCode((Oe & 31) << 6 | Ye & 63);
          } else
            U += z.substr(ie, 6);
          ie += 6;
        } else if (Oe >= 224) {
          if (Ee - ie >= 9) {
            var qe = parseInt(z.substr(ie + 4, 2), 16), dt = parseInt(z.substr(ie + 7, 2), 16);
            U += String.fromCharCode((Oe & 15) << 12 | (qe & 63) << 6 | dt & 63);
          } else
            U += z.substr(ie, 9);
          ie += 9;
        } else
          U += z.substr(ie, 3), ie += 3;
      }
      return U;
    }
    function Ne(z, U) {
      function ie(Ee) {
        var Oe = we(Ee);
        return Oe.match(U.UNRESERVED) ? Oe : Ee;
      }
      return z.scheme && (z.scheme = String(z.scheme).replace(U.PCT_ENCODED, ie).toLowerCase().replace(U.NOT_SCHEME, "")), z.userinfo !== void 0 && (z.userinfo = String(z.userinfo).replace(U.PCT_ENCODED, ie).replace(U.NOT_USERINFO, Re).replace(U.PCT_ENCODED, a)), z.host !== void 0 && (z.host = String(z.host).replace(U.PCT_ENCODED, ie).toLowerCase().replace(U.NOT_HOST, Re).replace(U.PCT_ENCODED, a)), z.path !== void 0 && (z.path = String(z.path).replace(U.PCT_ENCODED, ie).replace(z.scheme ? U.NOT_PATH : U.NOT_PATH_NOSCHEME, Re).replace(U.PCT_ENCODED, a)), z.query !== void 0 && (z.query = String(z.query).replace(U.PCT_ENCODED, ie).replace(U.NOT_QUERY, Re).replace(U.PCT_ENCODED, a)), z.fragment !== void 0 && (z.fragment = String(z.fragment).replace(U.PCT_ENCODED, ie).replace(U.NOT_FRAGMENT, Re).replace(U.PCT_ENCODED, a)), z;
    }
    function Me(z) {
      return z.replace(/^0*(.*)/, "$1") || "0";
    }
    function Ie(z, U) {
      var ie = z.match(U.IPV4ADDRESS) || [], Ee = h(ie, 2), Oe = Ee[1];
      return Oe ? Oe.split(".").map(Me).join(".") : z;
    }
    function Ge(z, U) {
      var ie = z.match(U.IPV6ADDRESS) || [], Ee = h(ie, 3), Oe = Ee[1], Ye = Ee[2];
      if (Oe) {
        for (var qe = Oe.toLowerCase().split("::").reverse(), dt = h(qe, 2), At = dt[0], Yt = dt[1], Tt = Yt ? Yt.split(":").map(Me) : [], Ut = At.split(":").map(Me), or = U.IPV4ADDRESS.test(Ut[Ut.length - 1]), pt = or ? 7 : 8, zt = Ut.length - pt, ar = Array(pt), cr = 0; cr < pt; ++cr)
          ar[cr] = Tt[cr] || Ut[zt + cr] || "";
        or && (ar[pt - 1] = Ie(ar[pt - 1], U));
        var Cr = ar.reduce(function(Ot, vt, qt) {
          if (!vt || vt === "0") {
            var xt = Ot[Ot.length - 1];
            xt && xt.index + xt.length === qt ? xt.length++ : Ot.push({
              index: qt,
              length: 1
            });
          }
          return Ot;
        }, []), Vn = Cr.sort(function(Ot, vt) {
          return vt.length - Ot.length;
        })[0], Xe = void 0;
        if (Vn && Vn.length > 1) {
          var nt = ar.slice(0, Vn.index), Rt = ar.slice(Vn.index + Vn.length);
          Xe = nt.join(":") + "::" + Rt.join(":");
        } else
          Xe = ar.join(":");
        return Ye && (Xe += "%" + Ye), Xe;
      } else
        return z;
    }
    var je = /^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i, ot = "".match(/(){0}/)[1] === void 0;
    function at(z) {
      var U = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, ie = {}, Ee = U.iri !== false ? f : c;
      U.reference === "suffix" && (z = (U.scheme ? U.scheme + ":" : "") + "//" + z);
      var Oe = z.match(je);
      if (Oe) {
        ot ? (ie.scheme = Oe[1], ie.userinfo = Oe[3], ie.host = Oe[4], ie.port = parseInt(Oe[5], 10), ie.path = Oe[6] || "", ie.query = Oe[7], ie.fragment = Oe[8], isNaN(ie.port) && (ie.port = Oe[5])) : (ie.scheme = Oe[1] || void 0, ie.userinfo = z.indexOf("@") !== -1 ? Oe[3] : void 0, ie.host = z.indexOf("//") !== -1 ? Oe[4] : void 0, ie.port = parseInt(Oe[5], 10), ie.path = Oe[6] || "", ie.query = z.indexOf("?") !== -1 ? Oe[7] : void 0, ie.fragment = z.indexOf("#") !== -1 ? Oe[8] : void 0, isNaN(ie.port) && (ie.port = z.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/) ? Oe[4] : void 0)), ie.host && (ie.host = Ge(Ie(ie.host, Ee), Ee)), ie.scheme === void 0 && ie.userinfo === void 0 && ie.host === void 0 && ie.port === void 0 && !ie.path && ie.query === void 0 ? ie.reference = "same-document" : ie.scheme === void 0 ? ie.reference = "relative" : ie.fragment === void 0 ? ie.reference = "absolute" : ie.reference = "uri", U.reference && U.reference !== "suffix" && U.reference !== ie.reference && (ie.error = ie.error || "URI is not a " + U.reference + " reference.");
        var Ye = Pe[(U.scheme || ie.scheme || "").toLowerCase()];
        if (!U.unicodeSupport && (!Ye || !Ye.unicodeSupport)) {
          if (ie.host && (U.domainHost || Ye && Ye.domainHost))
            try {
              ie.host = Se.toASCII(ie.host.replace(Ee.PCT_ENCODED, we).toLowerCase());
            } catch (qe) {
              ie.error = ie.error || "Host's domain name can not be converted to ASCII via punycode: " + qe;
            }
          Ne(ie, c);
        } else
          Ne(ie, Ee);
        Ye && Ye.parse && Ye.parse(ie, U);
      } else
        ie.error = ie.error || "URI can not be parsed.";
      return ie;
    }
    function Qe(z, U) {
      var ie = U.iri !== false ? f : c, Ee = [];
      return z.userinfo !== void 0 && (Ee.push(z.userinfo), Ee.push("@")), z.host !== void 0 && Ee.push(Ge(Ie(String(z.host), ie), ie).replace(ie.IPV6ADDRESS, function(Oe, Ye, qe) {
        return "[" + Ye + (qe ? "%25" + qe : "") + "]";
      })), (typeof z.port == "number" || typeof z.port == "string") && (Ee.push(":"), Ee.push(String(z.port))), Ee.length ? Ee.join("") : void 0;
    }
    var bt = /^\.\.?\//, Et = /^\/\.(\/|$)/, $t = /^\/\.\.(\/|$)/, rn = /^\/?(?:.|\n)*?(?=\/|$)/;
    function Ht(z) {
      for (var U = []; z.length; )
        if (z.match(bt))
          z = z.replace(bt, "");
        else if (z.match(Et))
          z = z.replace(Et, "/");
        else if (z.match($t))
          z = z.replace($t, "/"), U.pop();
        else if (z === "." || z === "..")
          z = "";
        else {
          var ie = z.match(rn);
          if (ie) {
            var Ee = ie[0];
            z = z.slice(Ee.length), U.push(Ee);
          } else
            throw new Error("Unexpected dot segment condition");
        }
      return U.join("");
    }
    function xe(z) {
      var U = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, ie = U.iri ? f : c, Ee = [], Oe = Pe[(U.scheme || z.scheme || "").toLowerCase()];
      if (Oe && Oe.serialize && Oe.serialize(z, U), z.host && !ie.IPV6ADDRESS.test(z.host)) {
        if (U.domainHost || Oe && Oe.domainHost)
          try {
            z.host = U.iri ? Se.toUnicode(z.host) : Se.toASCII(z.host.replace(ie.PCT_ENCODED, we).toLowerCase());
          } catch (dt) {
            z.error = z.error || "Host's domain name can not be converted to " + (U.iri ? "Unicode" : "ASCII") + " via punycode: " + dt;
          }
      }
      Ne(z, ie), U.reference !== "suffix" && z.scheme && (Ee.push(z.scheme), Ee.push(":"));
      var Ye = Qe(z, U);
      if (Ye !== void 0 && (U.reference !== "suffix" && Ee.push("//"), Ee.push(Ye), z.path && z.path.charAt(0) !== "/" && Ee.push("/")), z.path !== void 0) {
        var qe = z.path;
        !U.absolutePath && (!Oe || !Oe.absolutePath) && (qe = Ht(qe)), Ye === void 0 && (qe = qe.replace(/^\/\//, "/%2F")), Ee.push(qe);
      }
      return z.query !== void 0 && (Ee.push("?"), Ee.push(z.query)), z.fragment !== void 0 && (Ee.push("#"), Ee.push(z.fragment)), Ee.join("");
    }
    function ne(z, U) {
      var ie = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, Ee = arguments[3], Oe = {};
      return Ee || (z = at(xe(z, ie), ie), U = at(xe(U, ie), ie)), ie = ie || {}, !ie.tolerant && U.scheme ? (Oe.scheme = U.scheme, Oe.userinfo = U.userinfo, Oe.host = U.host, Oe.port = U.port, Oe.path = Ht(U.path || ""), Oe.query = U.query) : (U.userinfo !== void 0 || U.host !== void 0 || U.port !== void 0 ? (Oe.userinfo = U.userinfo, Oe.host = U.host, Oe.port = U.port, Oe.path = Ht(U.path || ""), Oe.query = U.query) : (U.path ? (U.path.charAt(0) === "/" ? Oe.path = Ht(U.path) : ((z.userinfo !== void 0 || z.host !== void 0 || z.port !== void 0) && !z.path ? Oe.path = "/" + U.path : z.path ? Oe.path = z.path.slice(0, z.path.lastIndexOf("/") + 1) + U.path : Oe.path = U.path, Oe.path = Ht(Oe.path)), Oe.query = U.query) : (Oe.path = z.path, U.query !== void 0 ? Oe.query = U.query : Oe.query = z.query), Oe.userinfo = z.userinfo, Oe.host = z.host, Oe.port = z.port), Oe.scheme = z.scheme), Oe.fragment = U.fragment, Oe;
    }
    function ce(z, U, ie) {
      var Ee = l({
        scheme: "null"
      }, ie);
      return xe(ne(at(z, Ee), at(U, Ee), Ee, true), Ee);
    }
    function _e(z, U) {
      return typeof z == "string" ? z = xe(at(z, U), U) : o(z) === "object" && (z = at(xe(z, U), U)), z;
    }
    function ee(z, U, ie) {
      return typeof z == "string" ? z = xe(at(z, ie), ie) : o(z) === "object" && (z = xe(z, ie)), typeof U == "string" ? U = xe(at(U, ie), ie) : o(U) === "object" && (U = xe(U, ie)), z === U;
    }
    function de(z, U) {
      return z && z.toString().replace(!U || !U.iri ? c.ESCAPE : f.ESCAPE, Re);
    }
    function Ce(z, U) {
      return z && z.toString().replace(!U || !U.iri ? c.PCT_ENCODED : f.PCT_ENCODED, we);
    }
    var ke = {
      scheme: "http",
      domainHost: true,
      parse: function(U, ie) {
        return U.host || (U.error = U.error || "HTTP URIs must have a host."), U;
      },
      serialize: function(U, ie) {
        var Ee = String(U.scheme).toLowerCase() === "https";
        return (U.port === (Ee ? 443 : 80) || U.port === "") && (U.port = void 0), U.path || (U.path = "/"), U;
      }
    }, Ve = {
      scheme: "https",
      domainHost: ke.domainHost,
      parse: ke.parse,
      serialize: ke.serialize
    };
    function We(z) {
      return typeof z.secure == "boolean" ? z.secure : String(z.scheme).toLowerCase() === "wss";
    }
    var Ke = {
      scheme: "ws",
      domainHost: true,
      parse: function(U, ie) {
        var Ee = U;
        return Ee.secure = We(Ee), Ee.resourceName = (Ee.path || "/") + (Ee.query ? "?" + Ee.query : ""), Ee.path = void 0, Ee.query = void 0, Ee;
      },
      serialize: function(U, ie) {
        if ((U.port === (We(U) ? 443 : 80) || U.port === "") && (U.port = void 0), typeof U.secure == "boolean" && (U.scheme = U.secure ? "wss" : "ws", U.secure = void 0), U.resourceName) {
          var Ee = U.resourceName.split("?"), Oe = h(Ee, 2), Ye = Oe[0], qe = Oe[1];
          U.path = Ye && Ye !== "/" ? Ye : void 0, U.query = qe, U.resourceName = void 0;
        }
        return U.fragment = void 0, U;
      }
    }, tt = {
      scheme: "wss",
      domainHost: Ke.domainHost,
      parse: Ke.parse,
      serialize: Ke.serialize
    }, ut = {}, Dt = "[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]", gt = "[0-9A-Fa-f]", pr = i(i("%[EFef]" + gt + "%" + gt + gt + "%" + gt + gt) + "|" + i("%[89A-Fa-f]" + gt + "%" + gt + gt) + "|" + i("%" + gt + gt)), H = "[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]", C = "[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]", M = n(C, '[\\"\\\\]'), Z = "[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]", ge = new RegExp(Dt, "g"), q = new RegExp(pr, "g"), W = new RegExp(n("[^]", H, "[\\.]", '[\\"]', M), "g"), j = new RegExp(n("[^]", Dt, Z), "g"), G = j;
    function ue(z) {
      var U = we(z);
      return U.match(ge) ? U : z;
    }
    var ye = {
      scheme: "mailto",
      parse: function(U, ie) {
        var Ee = U, Oe = Ee.to = Ee.path ? Ee.path.split(",") : [];
        if (Ee.path = void 0, Ee.query) {
          for (var Ye = false, qe = {}, dt = Ee.query.split("&"), At = 0, Yt = dt.length; At < Yt; ++At) {
            var Tt = dt[At].split("=");
            switch (Tt[0]) {
              case "to":
                for (var Ut = Tt[1].split(","), or = 0, pt = Ut.length; or < pt; ++or)
                  Oe.push(Ut[or]);
                break;
              case "subject":
                Ee.subject = Ce(Tt[1], ie);
                break;
              case "body":
                Ee.body = Ce(Tt[1], ie);
                break;
              default:
                Ye = true, qe[Ce(Tt[0], ie)] = Ce(Tt[1], ie);
                break;
            }
          }
          Ye && (Ee.headers = qe);
        }
        Ee.query = void 0;
        for (var zt = 0, ar = Oe.length; zt < ar; ++zt) {
          var cr = Oe[zt].split("@");
          if (cr[0] = Ce(cr[0]), ie.unicodeSupport)
            cr[1] = Ce(cr[1], ie).toLowerCase();
          else
            try {
              cr[1] = Se.toASCII(Ce(cr[1], ie).toLowerCase());
            } catch (Cr) {
              Ee.error = Ee.error || "Email address's domain name can not be converted to ASCII via punycode: " + Cr;
            }
          Oe[zt] = cr.join("@");
        }
        return Ee;
      },
      serialize: function(U, ie) {
        var Ee = U, Oe = s(U.to);
        if (Oe) {
          for (var Ye = 0, qe = Oe.length; Ye < qe; ++Ye) {
            var dt = String(Oe[Ye]), At = dt.lastIndexOf("@"), Yt = dt.slice(0, At).replace(q, ue).replace(q, a).replace(W, Re), Tt = dt.slice(At + 1);
            try {
              Tt = ie.iri ? Se.toUnicode(Tt) : Se.toASCII(Ce(Tt, ie).toLowerCase());
            } catch (zt) {
              Ee.error = Ee.error || "Email address's domain name can not be converted to " + (ie.iri ? "Unicode" : "ASCII") + " via punycode: " + zt;
            }
            Oe[Ye] = Yt + "@" + Tt;
          }
          Ee.path = Oe.join(",");
        }
        var Ut = U.headers = U.headers || {};
        U.subject && (Ut.subject = U.subject), U.body && (Ut.body = U.body);
        var or = [];
        for (var pt in Ut)
          Ut[pt] !== ut[pt] && or.push(pt.replace(q, ue).replace(q, a).replace(j, Re) + "=" + Ut[pt].replace(q, ue).replace(q, a).replace(G, Re));
        return or.length && (Ee.query = or.join("&")), Ee;
      }
    }, ve = /^([^\:]+)\:(.*)/, Te = {
      scheme: "urn",
      parse: function(U, ie) {
        var Ee = U.path && U.path.match(ve), Oe = U;
        if (Ee) {
          var Ye = ie.scheme || Oe.scheme || "urn", qe = Ee[1].toLowerCase(), dt = Ee[2], At = Ye + ":" + (ie.nid || qe), Yt = Pe[At];
          Oe.nid = qe, Oe.nss = dt, Oe.path = void 0, Yt && (Oe = Yt.parse(Oe, ie));
        } else
          Oe.error = Oe.error || "URN can not be parsed.";
        return Oe;
      },
      serialize: function(U, ie) {
        var Ee = ie.scheme || U.scheme || "urn", Oe = U.nid, Ye = Ee + ":" + (ie.nid || Oe), qe = Pe[Ye];
        qe && (U = qe.serialize(U, ie));
        var dt = U, At = U.nss;
        return dt.path = (Oe || ie.nid) + ":" + At, dt;
      }
    }, pe = /^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/, be = {
      scheme: "urn:uuid",
      parse: function(U, ie) {
        var Ee = U;
        return Ee.uuid = Ee.nss, Ee.nss = void 0, !ie.tolerant && (!Ee.uuid || !Ee.uuid.match(pe)) && (Ee.error = Ee.error || "UUID is not valid."), Ee;
      },
      serialize: function(U, ie) {
        var Ee = U;
        return Ee.nss = (U.uuid || "").toLowerCase(), Ee;
      }
    };
    Pe[ke.scheme] = ke, Pe[Ve.scheme] = Ve, Pe[Ke.scheme] = Ke, Pe[tt.scheme] = tt, Pe[ye.scheme] = ye, Pe[Te.scheme] = Te, Pe[be.scheme] = be, r.SCHEMES = Pe, r.pctEncChar = Re, r.pctDecChars = we, r.parse = at, r.removeDotSegments = Ht, r.serialize = xe, r.resolveComponents = ne, r.resolve = ce, r.normalize = _e, r.equal = ee, r.escapeComponent = de, r.unescapeComponent = Ce, Object.defineProperty(r, "__esModule", {
      value: true
    });
  });
})(Qk, Qk.exports);
var frt = Qk.exports;
var BL = function e11(t, r) {
  if (t === r)
    return true;
  if (t && r && typeof t == "object" && typeof r == "object") {
    if (t.constructor !== r.constructor)
      return false;
    var n, i, o;
    if (Array.isArray(t)) {
      if (n = t.length, n != r.length)
        return false;
      for (i = n; i-- !== 0; )
        if (!e11(t[i], r[i]))
          return false;
      return true;
    }
    if (t.constructor === RegExp)
      return t.source === r.source && t.flags === r.flags;
    if (t.valueOf !== Object.prototype.valueOf)
      return t.valueOf() === r.valueOf();
    if (t.toString !== Object.prototype.toString)
      return t.toString() === r.toString();
    if (o = Object.keys(t), n = o.length, n !== Object.keys(r).length)
      return false;
    for (i = n; i-- !== 0; )
      if (!Object.prototype.hasOwnProperty.call(r, o[i]))
        return false;
    for (i = n; i-- !== 0; ) {
      var a = o[i];
      if (!e11(t[a], r[a]))
        return false;
    }
    return true;
  }
  return t !== t && r !== r;
};
var drt = function(t) {
  for (var r = 0, n = t.length, i = 0, o; i < n; )
    r++, o = t.charCodeAt(i++), o >= 55296 && o <= 56319 && i < n && (o = t.charCodeAt(i), (o & 64512) == 56320 && i++);
  return r;
};
var kp = {
  copy: prt,
  checkDataType: Jk,
  checkDataTypes: mrt,
  coerceToTypes: grt,
  toHash: FL,
  getProperty: $L,
  escapeQuotes: HL,
  equal: BL,
  ucs2length: drt,
  varOccurences: _rt,
  varReplace: brt,
  schemaHasRules: Trt,
  schemaHasRulesExcept: Ert,
  schemaUnknownRules: Srt,
  toQuotedString: eD,
  getPathExpr: wrt,
  getPath: Art,
  getData: Prt,
  unescapeFragment: Crt,
  unescapeJsonPointer: jL,
  escapeFragment: xrt,
  escapeJsonPointer: UL
};
function prt(e12, t) {
  t = t || {};
  for (var r in e12)
    t[r] = e12[r];
  return t;
}
function Jk(e12, t, r, n) {
  var i = n ? " !== " : " === ", o = n ? " || " : " && ", a = n ? "!" : "", s = n ? "" : "!";
  switch (e12) {
    case "null":
      return t + i + "null";
    case "array":
      return a + "Array.isArray(" + t + ")";
    case "object":
      return "(" + a + t + o + "typeof " + t + i + '"object"' + o + s + "Array.isArray(" + t + "))";
    case "integer":
      return "(typeof " + t + i + '"number"' + o + s + "(" + t + " % 1)" + o + t + i + t + (r ? o + a + "isFinite(" + t + ")" : "") + ")";
    case "number":
      return "(typeof " + t + i + '"' + e12 + '"' + (r ? o + a + "isFinite(" + t + ")" : "") + ")";
    default:
      return "typeof " + t + i + '"' + e12 + '"';
  }
}
function mrt(e12, t, r) {
  switch (e12.length) {
    case 1:
      return Jk(e12[0], t, r, true);
    default:
      var n = "", i = FL(e12);
      i.array && i.object && (n = i.null ? "(" : "(!" + t + " || ", n += "typeof " + t + ' !== "object")', delete i.null, delete i.array, delete i.object), i.number && delete i.integer;
      for (var o in i)
        n += (n ? " && " : "") + Jk(o, t, r, true);
      return n;
  }
}
var SG = FL(["string", "number", "integer", "boolean", "null"]);
function grt(e12, t) {
  if (Array.isArray(t)) {
    for (var r = [], n = 0; n < t.length; n++) {
      var i = t[n];
      (SG[i] || e12 === "array" && i === "array") && (r[r.length] = i);
    }
    if (r.length)
      return r;
  } else {
    if (SG[t])
      return [t];
    if (e12 === "array" && t === "array")
      return ["array"];
  }
}
function FL(e12) {
  for (var t = {}, r = 0; r < e12.length; r++)
    t[e12[r]] = true;
  return t;
}
var vrt = /^[a-z$_][a-z$_0-9]*$/i;
var yrt = /'|\\/g;
function $L(e12) {
  return typeof e12 == "number" ? "[" + e12 + "]" : vrt.test(e12) ? "." + e12 : "['" + HL(e12) + "']";
}
function HL(e12) {
  return e12.replace(yrt, "\\$&").replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/\f/g, "\\f").replace(/\t/g, "\\t");
}
function _rt(e12, t) {
  t += "[^0-9]";
  var r = e12.match(new RegExp(t, "g"));
  return r ? r.length : 0;
}
function brt(e12, t, r) {
  return t += "([^0-9])", r = r.replace(/\$/g, "$$$$"), e12.replace(new RegExp(t, "g"), r + "$1");
}
function Trt(e12, t) {
  if (typeof e12 == "boolean")
    return !e12;
  for (var r in e12)
    if (t[r])
      return true;
}
function Ert(e12, t, r) {
  if (typeof e12 == "boolean")
    return !e12 && r != "not";
  for (var n in e12)
    if (n != r && t[n])
      return true;
}
function Srt(e12, t) {
  if (typeof e12 != "boolean") {
    for (var r in e12)
      if (!t[r])
        return r;
  }
}
function eD(e12) {
  return "'" + HL(e12) + "'";
}
function wrt(e12, t, r, n) {
  var i = r ? "'/' + " + t + (n ? "" : ".replace(/~/g, '~0').replace(/\\//g, '~1')") : n ? "'[' + " + t + " + ']'" : "'[\\'' + " + t + " + '\\']'";
  return Tee(e12, i);
}
function Art(e12, t, r) {
  var n = eD(r ? "/" + UL(t) : $L(t));
  return Tee(e12, n);
}
var Ort = /^\/(?:[^~]|~0|~1)*$/;
var Irt = /^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;
function Prt(e12, t, r) {
  var n, i, o, a;
  if (e12 === "")
    return "rootData";
  if (e12[0] == "/") {
    if (!Ort.test(e12))
      throw new Error("Invalid JSON-pointer: " + e12);
    i = e12, o = "rootData";
  } else {
    if (a = e12.match(Irt), !a)
      throw new Error("Invalid JSON-pointer: " + e12);
    if (n = +a[1], i = a[2], i == "#") {
      if (n >= t)
        throw new Error("Cannot access property/index " + n + " levels up, current level is " + t);
      return r[t - n];
    }
    if (n > t)
      throw new Error("Cannot access data " + n + " levels up, current level is " + t);
    if (o = "data" + (t - n || ""), !i)
      return o;
  }
  for (var s = o, l = i.split("/"), u = 0; u < l.length; u++) {
    var c = l[u];
    c && (o += $L(jL(c)), s += " && " + o);
  }
  return s;
}
function Tee(e12, t) {
  return e12 == '""' ? t : (e12 + " + " + t).replace(/([^\\])' \+ '/g, "$1");
}
function Crt(e12) {
  return jL(decodeURIComponent(e12));
}
function xrt(e12) {
  return encodeURIComponent(UL(e12));
}
function UL(e12) {
  return e12.replace(/~/g, "~0").replace(/\//g, "~1");
}
function jL(e12) {
  return e12.replace(/~1/g, "/").replace(/~0/g, "~");
}
var krt = kp;
var Eee = Drt;
function Drt(e12) {
  krt.copy(e12, this);
}
var See = { exports: {} };
var $l = See.exports = function(e12, t, r) {
  typeof t == "function" && (r = t, t = {}), r = t.cb || r;
  var n = typeof r == "function" ? r : r.pre || function() {
  }, i = r.post || function() {
  };
  Jb(t, n, i, e12, "", e12);
};
$l.keywords = {
  additionalItems: true,
  items: true,
  contains: true,
  additionalProperties: true,
  propertyNames: true,
  not: true
};
$l.arrayKeywords = {
  items: true,
  allOf: true,
  anyOf: true,
  oneOf: true
};
$l.propsKeywords = {
  definitions: true,
  properties: true,
  patternProperties: true,
  dependencies: true
};
$l.skipKeywords = {
  default: true,
  enum: true,
  const: true,
  required: true,
  maximum: true,
  minimum: true,
  exclusiveMaximum: true,
  exclusiveMinimum: true,
  multipleOf: true,
  maxLength: true,
  minLength: true,
  pattern: true,
  format: true,
  maxItems: true,
  minItems: true,
  uniqueItems: true,
  maxProperties: true,
  minProperties: true
};
function Jb(e12, t, r, n, i, o, a, s, l, u) {
  if (n && typeof n == "object" && !Array.isArray(n)) {
    t(n, i, o, a, s, l, u);
    for (var c in n) {
      var f = n[c];
      if (Array.isArray(f)) {
        if (c in $l.arrayKeywords)
          for (var h = 0; h < f.length; h++)
            Jb(e12, t, r, f[h], i + "/" + c + "/" + h, o, i, c, n, h);
      } else if (c in $l.propsKeywords) {
        if (f && typeof f == "object")
          for (var d in f)
            Jb(e12, t, r, f[d], i + "/" + c + "/" + Rrt(d), o, i, c, n, d);
      } else
        (c in $l.keywords || e12.allKeys && !(c in $l.skipKeywords)) && Jb(e12, t, r, f, i + "/" + c, o, i, c, n);
    }
    r(n, i, o, a, s, l, u);
  }
}
function Rrt(e12) {
  return e12.replace(/~/g, "~0").replace(/\//g, "~1");
}
var Nrt = See.exports;
var Ny = frt;
var wG = BL;
var HS = kp;
var PE = Eee;
var Mrt = Nrt;
var GL = gc;
gc.normalizeId = ql;
gc.fullPath = CE;
gc.url = xE;
gc.ids = Hrt;
gc.inlineRef = tD;
gc.schema = US;
function gc(e12, t, r) {
  var n = this._refs[r];
  if (typeof n == "string")
    if (this._refs[n])
      n = this._refs[n];
    else
      return gc.call(this, e12, t, n);
  if (n = n || this._schemas[r], n instanceof PE)
    return tD(n.schema, this._opts.inlineRefs) ? n.schema : n.validate || this._compile(n);
  var i = US.call(this, t, r), o, a, s;
  return i && (o = i.schema, t = i.root, s = i.baseId), o instanceof PE ? a = o.validate || e12.call(this, o.schema, t, void 0, s) : o !== void 0 && (a = tD(o, this._opts.inlineRefs) ? o : e12.call(this, o, t, void 0, s)), a;
}
function US(e12, t) {
  var r = Ny.parse(t), n = Aee(r), i = CE(this._getId(e12.schema));
  if (Object.keys(e12.schema).length === 0 || n !== i) {
    var o = ql(n), a = this._refs[o];
    if (typeof a == "string")
      return Lrt.call(this, e12, a, r);
    if (a instanceof PE)
      a.validate || this._compile(a), e12 = a;
    else if (a = this._schemas[o], a instanceof PE) {
      if (a.validate || this._compile(a), o == ql(t))
        return {
          schema: a,
          root: e12,
          baseId: i
        };
      e12 = a;
    } else
      return;
    if (!e12.schema)
      return;
    i = CE(this._getId(e12.schema));
  }
  return wee.call(this, r, i, e12.schema, e12);
}
function Lrt(e12, t, r) {
  var n = US.call(this, e12, t);
  if (n) {
    var i = n.schema, o = n.baseId;
    e12 = n.root;
    var a = this._getId(i);
    return a && (o = xE(o, a)), wee.call(this, r, o, i, e12);
  }
}
var Brt = HS.toHash(["properties", "patternProperties", "enum", "dependencies", "definitions"]);
function wee(e12, t, r, n) {
  if (e12.fragment = e12.fragment || "", e12.fragment.slice(0, 1) == "/") {
    for (var i = e12.fragment.split("/"), o = 1; o < i.length; o++) {
      var a = i[o];
      if (a) {
        if (a = HS.unescapeFragment(a), r = r[a], r === void 0)
          break;
        var s;
        if (!Brt[a] && (s = this._getId(r), s && (t = xE(t, s)), r.$ref)) {
          var l = xE(t, r.$ref), u = US.call(this, n, l);
          u && (r = u.schema, n = u.root, t = u.baseId);
        }
      }
    }
    if (r !== void 0 && r !== n.schema)
      return {
        schema: r,
        root: n,
        baseId: t
      };
  }
}
var Frt = HS.toHash(["type", "format", "pattern", "maxLength", "minLength", "maxProperties", "minProperties", "maxItems", "minItems", "maximum", "minimum", "uniqueItems", "multipleOf", "required", "enum"]);
function tD(e12, t) {
  if (t === false)
    return false;
  if (t === void 0 || t === true)
    return rD(e12);
  if (t)
    return nD(e12) <= t;
}
function rD(e12) {
  var t;
  if (Array.isArray(e12)) {
    for (var r = 0; r < e12.length; r++)
      if (t = e12[r], typeof t == "object" && !rD(t))
        return false;
  } else
    for (var n in e12)
      if (n == "$ref" || (t = e12[n], typeof t == "object" && !rD(t)))
        return false;
  return true;
}
function nD(e12) {
  var t = 0, r;
  if (Array.isArray(e12)) {
    for (var n = 0; n < e12.length; n++)
      if (r = e12[n], typeof r == "object" && (t += nD(r)), t == 1 / 0)
        return 1 / 0;
  } else
    for (var i in e12) {
      if (i == "$ref")
        return 1 / 0;
      if (Frt[i])
        t++;
      else if (r = e12[i], typeof r == "object" && (t += nD(r) + 1), t == 1 / 0)
        return 1 / 0;
    }
  return t;
}
function CE(e12, t) {
  t !== false && (e12 = ql(e12));
  var r = Ny.parse(e12);
  return Aee(r);
}
function Aee(e12) {
  return Ny.serialize(e12).split("#")[0] + "#";
}
var $rt = /#\/?$/;
function ql(e12) {
  return e12 ? e12.replace($rt, "") : "";
}
function xE(e12, t) {
  return t = ql(t), Ny.resolve(e12, t);
}
function Hrt(e12) {
  var t = ql(this._getId(e12)), r = {
    "": t
  }, n = {
    "": CE(t, false)
  }, i = {}, o = this;
  return Mrt(e12, {
    allKeys: true
  }, function(a, s, l, u, c, f, h) {
    if (s !== "") {
      var d = o._getId(a), p = r[u], m = n[u] + "/" + c;
      if (h !== void 0 && (m += "/" + (typeof h == "number" ? h : HS.escapeFragment(h))), typeof d == "string") {
        d = p = ql(p ? Ny.resolve(p, d) : d);
        var g = o._refs[d];
        if (typeof g == "string" && (g = o._refs[g]), g && g.schema) {
          if (!wG(a, g.schema))
            throw new Error('id "' + d + '" resolves to more than one schema');
        } else if (d != ql(m))
          if (d[0] == "#") {
            if (i[d] && !wG(a, i[d]))
              throw new Error('id "' + d + '" resolves to more than one schema');
            i[d] = a;
          } else
            o._refs[d] = m;
      }
      r[s] = p, n[s] = m;
    }
  }), i;
}
var rI = GL;
var zL = {
  Validation: AG(Urt),
  MissingRef: AG(VL)
};
function Urt(e12) {
  this.message = "validation failed", this.errors = e12, this.ajv = this.validation = true;
}
VL.message = function(e12, t) {
  return "can't resolve reference " + t + " from id " + e12;
};
function VL(e12, t, r) {
  this.message = r || VL.message(e12, t), this.missingRef = rI.url(e12, t), this.missingSchema = rI.normalizeId(rI.fullPath(this.missingRef));
}
function AG(e12) {
  return e12.prototype = Object.create(Error.prototype), e12.prototype.constructor = e12, e12;
}
var Oee = function(e12, t) {
  t || (t = {}), typeof t == "function" && (t = {
    cmp: t
  });
  var r = typeof t.cycles == "boolean" ? t.cycles : false, n = t.cmp && /* @__PURE__ */ function(o) {
    return function(a) {
      return function(s, l) {
        var u = {
          key: s,
          value: a[s]
        }, c = {
          key: l,
          value: a[l]
        };
        return o(u, c);
      };
    };
  }(t.cmp), i = [];
  return function o(a) {
    if (a && a.toJSON && typeof a.toJSON == "function" && (a = a.toJSON()), a !== void 0) {
      if (typeof a == "number")
        return isFinite(a) ? "" + a : "null";
      if (typeof a != "object")
        return JSON.stringify(a);
      var s, l;
      if (Array.isArray(a)) {
        for (l = "[", s = 0; s < a.length; s++)
          s && (l += ","), l += o(a[s]) || "null";
        return l + "]";
      }
      if (a === null)
        return "null";
      if (i.indexOf(a) !== -1) {
        if (r)
          return JSON.stringify("__cycle__");
        throw new TypeError("Converting circular structure to JSON");
      }
      var u = i.push(a) - 1, c = Object.keys(a).sort(n && n(a));
      for (l = "", s = 0; s < c.length; s++) {
        var f = c[s], h = o(a[f]);
        h && (l && (l += ","), l += JSON.stringify(f) + ":" + h);
      }
      return i.splice(u, 1), "{" + l + "}";
    }
  }(e12);
};
var Iee = function(t, r, n) {
  var i = "", o = t.schema.$async === true, a = t.util.schemaHasRulesExcept(t.schema, t.RULES.all, "$ref"), s = t.self._getId(t.schema);
  if (t.opts.strictKeywords) {
    var l = t.util.schemaUnknownRules(t.schema, t.RULES.keywords);
    if (l) {
      var u = "unknown keyword: " + l;
      if (t.opts.strictKeywords === "log")
        t.logger.warn(u);
      else
        throw new Error(u);
    }
  }
  if (t.isTop && (i += " var validate = ", o && (t.async = true, i += "async "), i += "function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ", s && (t.opts.sourceCode || t.opts.processCode) && (i += " " + ("/*# sourceURL=" + s + " */") + " ")), typeof t.schema == "boolean" || !(a || t.schema.$ref)) {
    var r = "false schema", c = t.level, f = t.dataLevel, h = t.schema[r], d = t.schemaPath + t.util.getProperty(r), p = t.errSchemaPath + "/" + r, T = !t.opts.allErrors, A, m = "data" + (f || ""), b = "valid" + c;
    if (t.schema === false) {
      t.isTop ? T = true : i += " var " + b + " = false; ";
      var g = g || [];
      g.push(i), i = "", t.createErrors !== false ? (i += " { keyword: '" + (A || "false schema") + "' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(p) + " , params: {} ", t.opts.messages !== false && (i += " , message: 'boolean schema is false' "), t.opts.verbose && (i += " , schema: false , parentSchema: validate.schema" + t.schemaPath + " , data: " + m + " "), i += " } ") : i += " {} ";
      var v = i;
      i = g.pop(), !t.compositeRule && T ? t.async ? i += " throw new ValidationError([" + v + "]); " : i += " validate.errors = [" + v + "]; return false; " : i += " var err = " + v + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";
    } else
      t.isTop ? o ? i += " return data; " : i += " validate.errors = null; return true; " : i += " var " + b + " = true; ";
    return t.isTop && (i += " }; return validate; "), i;
  }
  if (t.isTop) {
    var _ = t.isTop, c = t.level = 0, f = t.dataLevel = 0, m = "data";
    if (t.rootId = t.resolve.fullPath(t.self._getId(t.root.schema)), t.baseId = t.baseId || t.rootId, delete t.isTop, t.dataPathArr = [""], t.schema.default !== void 0 && t.opts.useDefaults && t.opts.strictDefaults) {
      var y = "default is ignored in the schema root";
      if (t.opts.strictDefaults === "log")
        t.logger.warn(y);
      else
        throw new Error(y);
    }
    i += " var vErrors = null; ", i += " var errors = 0;     ", i += " if (rootData === undefined) rootData = data; ";
  } else {
    var c = t.level, f = t.dataLevel, m = "data" + (f || "");
    if (s && (t.baseId = t.resolve.url(t.baseId, s)), o && !t.async)
      throw new Error("async schema in sync schema");
    i += " var errs_" + c + " = errors;";
  }
  var b = "valid" + c, T = !t.opts.allErrors, E = "", P = "", A, I = t.schema.type, x = Array.isArray(I);
  if (I && t.opts.nullable && t.schema.nullable === true && (x ? I.indexOf("null") == -1 && (I = I.concat("null")) : I != "null" && (I = [I, "null"], x = true)), x && I.length == 1 && (I = I[0], x = false), t.schema.$ref && a) {
    if (t.opts.extendRefs == "fail")
      throw new Error('$ref: validation keywords used in schema at path "' + t.errSchemaPath + '" (see option extendRefs)');
    t.opts.extendRefs !== true && (a = false, t.logger.warn('$ref: keywords ignored in schema at path "' + t.errSchemaPath + '"'));
  }
  if (t.schema.$comment && t.opts.$comment && (i += " " + t.RULES.all.$comment.code(t, "$comment")), I) {
    if (t.opts.coerceTypes)
      var S = t.util.coerceToTypes(t.opts.coerceTypes, I);
    var N = t.RULES.types[I];
    if (S || x || N === true || N && !Et(N)) {
      var d = t.schemaPath + ".type", p = t.errSchemaPath + "/type", d = t.schemaPath + ".type", p = t.errSchemaPath + "/type", B = x ? "checkDataTypes" : "checkDataType";
      if (i += " if (" + t.util[B](I, m, t.opts.strictNumbers, true) + ") { ", S) {
        var w = "dataType" + c, R = "coerced" + c;
        i += " var " + w + " = typeof " + m + "; var " + R + " = undefined; ", t.opts.coerceTypes == "array" && (i += " if (" + w + " == 'object' && Array.isArray(" + m + ") && " + m + ".length == 1) { " + m + " = " + m + "[0]; " + w + " = typeof " + m + "; if (" + t.util.checkDataType(t.schema.type, m, t.opts.strictNumbers) + ") " + R + " = " + m + "; } "), i += " if (" + R + " !== undefined) ; ";
        var F = S;
        if (F)
          for (var $, K = -1, se = F.length - 1; K < se; )
            $ = F[K += 1], $ == "string" ? i += " else if (" + w + " == 'number' || " + w + " == 'boolean') " + R + " = '' + " + m + "; else if (" + m + " === null) " + R + " = ''; " : $ == "number" || $ == "integer" ? (i += " else if (" + w + " == 'boolean' || " + m + " === null || (" + w + " == 'string' && " + m + " && " + m + " == +" + m + " ", $ == "integer" && (i += " && !(" + m + " % 1)"), i += ")) " + R + " = +" + m + "; ") : $ == "boolean" ? i += " else if (" + m + " === 'false' || " + m + " === 0 || " + m + " === null) " + R + " = false; else if (" + m + " === 'true' || " + m + " === 1) " + R + " = true; " : $ == "null" ? i += " else if (" + m + " === '' || " + m + " === 0 || " + m + " === false) " + R + " = null; " : t.opts.coerceTypes == "array" && $ == "array" && (i += " else if (" + w + " == 'string' || " + w + " == 'number' || " + w + " == 'boolean' || " + m + " == null) " + R + " = [" + m + "]; ");
        i += " else {   ";
        var g = g || [];
        g.push(i), i = "", t.createErrors !== false ? (i += " { keyword: '" + (A || "type") + "' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(p) + " , params: { type: '", x ? i += "" + I.join(",") : i += "" + I, i += "' } ", t.opts.messages !== false && (i += " , message: 'should be ", x ? i += "" + I.join(",") : i += "" + I, i += "' "), t.opts.verbose && (i += " , schema: validate.schema" + d + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + m + " "), i += " } ") : i += " {} ";
        var v = i;
        i = g.pop(), !t.compositeRule && T ? t.async ? i += " throw new ValidationError([" + v + "]); " : i += " validate.errors = [" + v + "]; return false; " : i += " var err = " + v + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } if (" + R + " !== undefined) {  ";
        var J = f ? "data" + (f - 1 || "") : "parentData", me = f ? t.dataPathArr[f] : "parentDataProperty";
        i += " " + m + " = " + R + "; ", f || (i += "if (" + J + " !== undefined)"), i += " " + J + "[" + me + "] = " + R + "; } ";
      } else {
        var g = g || [];
        g.push(i), i = "", t.createErrors !== false ? (i += " { keyword: '" + (A || "type") + "' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(p) + " , params: { type: '", x ? i += "" + I.join(",") : i += "" + I, i += "' } ", t.opts.messages !== false && (i += " , message: 'should be ", x ? i += "" + I.join(",") : i += "" + I, i += "' "), t.opts.verbose && (i += " , schema: validate.schema" + d + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + m + " "), i += " } ") : i += " {} ";
        var v = i;
        i = g.pop(), !t.compositeRule && T ? t.async ? i += " throw new ValidationError([" + v + "]); " : i += " validate.errors = [" + v + "]; return false; " : i += " var err = " + v + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";
      }
      i += " } ";
    }
  }
  if (t.schema.$ref && !a)
    i += " " + t.RULES.all.$ref.code(t, "$ref") + " ", T && (i += " } if (errors === ", _ ? i += "0" : i += "errs_" + c, i += ") { ", P += "}");
  else {
    var ae = t.RULES;
    if (ae) {
      for (var N, Y = -1, Q = ae.length - 1; Y < Q; )
        if (N = ae[Y += 1], Et(N)) {
          if (N.type && (i += " if (" + t.util.checkDataType(N.type, m, t.opts.strictNumbers) + ") { "), t.opts.useDefaults) {
            if (N.type == "object" && t.schema.properties) {
              var h = t.schema.properties, le = Object.keys(h), Se = le;
              if (Se)
                for (var Pe, Re = -1, we = Se.length - 1; Re < we; ) {
                  Pe = Se[Re += 1];
                  var Ne = h[Pe];
                  if (Ne.default !== void 0) {
                    var Me = m + t.util.getProperty(Pe);
                    if (t.compositeRule) {
                      if (t.opts.strictDefaults) {
                        var y = "default is ignored for: " + Me;
                        if (t.opts.strictDefaults === "log")
                          t.logger.warn(y);
                        else
                          throw new Error(y);
                      }
                    } else
                      i += " if (" + Me + " === undefined ", t.opts.useDefaults == "empty" && (i += " || " + Me + " === null || " + Me + " === '' "), i += " ) " + Me + " = ", t.opts.useDefaults == "shared" ? i += " " + t.useDefault(Ne.default) + " " : i += " " + JSON.stringify(Ne.default) + " ", i += "; ";
                  }
                }
            } else if (N.type == "array" && Array.isArray(t.schema.items)) {
              var Ie = t.schema.items;
              if (Ie) {
                for (var Ne, K = -1, Ge = Ie.length - 1; K < Ge; )
                  if (Ne = Ie[K += 1], Ne.default !== void 0) {
                    var Me = m + "[" + K + "]";
                    if (t.compositeRule) {
                      if (t.opts.strictDefaults) {
                        var y = "default is ignored for: " + Me;
                        if (t.opts.strictDefaults === "log")
                          t.logger.warn(y);
                        else
                          throw new Error(y);
                      }
                    } else
                      i += " if (" + Me + " === undefined ", t.opts.useDefaults == "empty" && (i += " || " + Me + " === null || " + Me + " === '' "), i += " ) " + Me + " = ", t.opts.useDefaults == "shared" ? i += " " + t.useDefault(Ne.default) + " " : i += " " + JSON.stringify(Ne.default) + " ", i += "; ";
                  }
              }
            }
          }
          var je = N.rules;
          if (je) {
            for (var ot, at = -1, Qe = je.length - 1; at < Qe; )
              if (ot = je[at += 1], $t(ot)) {
                var bt = ot.code(t, ot.keyword, N.type);
                bt && (i += " " + bt + " ", T && (E += "}"));
              }
          }
          if (T && (i += " " + E + " ", E = ""), N.type && (i += " } ", I && I === N.type && !S)) {
            i += " else { ";
            var d = t.schemaPath + ".type", p = t.errSchemaPath + "/type", g = g || [];
            g.push(i), i = "", t.createErrors !== false ? (i += " { keyword: '" + (A || "type") + "' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(p) + " , params: { type: '", x ? i += "" + I.join(",") : i += "" + I, i += "' } ", t.opts.messages !== false && (i += " , message: 'should be ", x ? i += "" + I.join(",") : i += "" + I, i += "' "), t.opts.verbose && (i += " , schema: validate.schema" + d + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + m + " "), i += " } ") : i += " {} ";
            var v = i;
            i = g.pop(), !t.compositeRule && T ? t.async ? i += " throw new ValidationError([" + v + "]); " : i += " validate.errors = [" + v + "]; return false; " : i += " var err = " + v + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } ";
          }
          T && (i += " if (errors === ", _ ? i += "0" : i += "errs_" + c, i += ") { ", P += "}");
        }
    }
  }
  T && (i += " " + P + " "), _ ? (o ? (i += " if (errors === 0) return data;           ", i += " else throw new ValidationError(vErrors); ") : (i += " validate.errors = vErrors; ", i += " return errors === 0;       "), i += " }; return validate;") : i += " var " + b + " = errors === errs_" + c + ";";
  function Et(Ht) {
    for (var xe = Ht.rules, ne = 0; ne < xe.length; ne++)
      if ($t(xe[ne]))
        return true;
  }
  function $t(Ht) {
    return t.schema[Ht.keyword] !== void 0 || Ht.implements && rn(Ht);
  }
  function rn(Ht) {
    for (var xe = Ht.implements, ne = 0; ne < xe.length; ne++)
      if (t.schema[xe[ne]] !== void 0)
        return true;
  }
  return i;
};
var q_ = GL;
var kE = kp;
var Pee = zL;
var jrt = Oee;
var OG = Iee;
var Grt = kE.ucs2length;
var zrt = BL;
var Vrt = Pee.Validation;
var Xrt = iD;
function iD(e12, t, r, n) {
  var i = this, o = this._opts, a = [void 0], s = {}, l = [], u = {}, c = [], f = {}, h = [];
  t = t || {
    schema: e12,
    refVal: a,
    refs: s
  };
  var d = Wrt.call(this, e12, t, n), p = this._compilations[d.index];
  if (d.compiling)
    return p.callValidate = y;
  var m = this._formats, g = this.RULES;
  try {
    var v = b(e12, t, r, n);
    p.validate = v;
    var _ = p.callValidate;
    return _ && (_.schema = v.schema, _.errors = null, _.refs = v.refs, _.refVal = v.refVal, _.root = v.root, _.$async = v.$async, o.sourceCode && (_.source = v.source)), v;
  } finally {
    Yrt.call(this, e12, t, n);
  }
  function y() {
    var B = p.validate, w = B.apply(this, arguments);
    return y.errors = B.errors, w;
  }
  function b(B, w, R, F) {
    var $ = !w || w && w.schema == B;
    if (w.schema != t.schema)
      return iD.call(i, B, w, R, F);
    var K = B.$async === true, se = OG({
      isTop: true,
      schema: B,
      isRoot: $,
      baseId: F,
      root: w,
      schemaPath: "",
      errSchemaPath: "#",
      errorPath: '""',
      MissingRefError: Pee.MissingRef,
      RULES: g,
      validate: OG,
      util: kE,
      resolve: q_,
      resolveRef: T,
      usePattern: x,
      useDefault: S,
      useCustomRule: N,
      opts: o,
      formats: m,
      logger: i.logger,
      self: i
    });
    se = K_(a, Zrt) + K_(l, qrt) + K_(c, Krt) + K_(h, Qrt) + se, o.processCode && (se = o.processCode(se, B));
    var J;
    try {
      var me = new Function("self", "RULES", "formats", "root", "refVal", "defaults", "customRules", "equal", "ucs2length", "ValidationError", se);
      J = me(i, g, m, t, a, c, h, zrt, Grt, Vrt), a[0] = J;
    } catch (ae) {
      throw i.logger.error("Error compiling schema, function code:", se), ae;
    }
    return J.schema = B, J.errors = null, J.refs = s, J.refVal = a, J.root = $ ? J : w, K && (J.$async = true), o.sourceCode === true && (J.source = {
      code: se,
      patterns: l,
      defaults: c
    }), J;
  }
  function T(B, w, R) {
    w = q_.url(B, w);
    var F = s[w], $, K;
    if (F !== void 0)
      return $ = a[F], K = "refVal[" + F + "]", I($, K);
    if (!R && t.refs) {
      var se = t.refs[w];
      if (se !== void 0)
        return $ = t.refVal[se], K = E(w, $), I($, K);
    }
    K = E(w);
    var J = q_.call(i, b, t, w);
    if (J === void 0) {
      var me = r && r[w];
      me && (J = q_.inlineRef(me, o.inlineRefs) ? me : iD.call(i, me, t, r, B));
    }
    if (J === void 0)
      P(w);
    else
      return A(w, J), I(J, K);
  }
  function E(B, w) {
    var R = a.length;
    return a[R] = w, s[B] = R, "refVal" + R;
  }
  function P(B) {
    delete s[B];
  }
  function A(B, w) {
    var R = s[B];
    a[R] = w;
  }
  function I(B, w) {
    return typeof B == "object" || typeof B == "boolean" ? {
      code: w,
      schema: B,
      inline: true
    } : {
      code: w,
      $async: B && !!B.$async
    };
  }
  function x(B) {
    var w = u[B];
    return w === void 0 && (w = u[B] = l.length, l[w] = B), "pattern" + w;
  }
  function S(B) {
    switch (typeof B) {
      case "boolean":
      case "number":
        return "" + B;
      case "string":
        return kE.toQuotedString(B);
      case "object":
        if (B === null)
          return "null";
        var w = jrt(B), R = f[w];
        return R === void 0 && (R = f[w] = c.length, c[R] = B), "default" + R;
    }
  }
  function N(B, w, R, F) {
    if (i._opts.validateSchema !== false) {
      var $ = B.definition.dependencies;
      if ($ && !$.every(function(Se) {
        return Object.prototype.hasOwnProperty.call(R, Se);
      }))
        throw new Error("parent schema must have all required keywords: " + $.join(","));
      var K = B.definition.validateSchema;
      if (K) {
        var se = K(w);
        if (!se) {
          var J = "keyword schema is invalid: " + i.errorsText(K.errors);
          if (i._opts.validateSchema == "log")
            i.logger.error(J);
          else
            throw new Error(J);
        }
      }
    }
    var me = B.definition.compile, ae = B.definition.inline, Y = B.definition.macro, Q;
    if (me)
      Q = me.call(i, w, R, F);
    else if (Y)
      Q = Y.call(i, w, R, F), o.validateSchema !== false && i.validateSchema(Q, true);
    else if (ae)
      Q = ae.call(i, F, B.keyword, w, R);
    else if (Q = B.definition.validate, !Q)
      return;
    if (Q === void 0)
      throw new Error('custom keyword "' + B.keyword + '"failed to compile');
    var le = h.length;
    return h[le] = Q, {
      code: "customRule" + le,
      validate: Q
    };
  }
}
function Wrt(e12, t, r) {
  var n = Cee.call(this, e12, t, r);
  return n >= 0 ? {
    index: n,
    compiling: true
  } : (n = this._compilations.length, this._compilations[n] = {
    schema: e12,
    root: t,
    baseId: r
  }, {
    index: n,
    compiling: false
  });
}
function Yrt(e12, t, r) {
  var n = Cee.call(this, e12, t, r);
  n >= 0 && this._compilations.splice(n, 1);
}
function Cee(e12, t, r) {
  for (var n = 0; n < this._compilations.length; n++) {
    var i = this._compilations[n];
    if (i.schema == e12 && i.root == t && i.baseId == r)
      return n;
  }
  return -1;
}
function qrt(e12, t) {
  return "var pattern" + e12 + " = new RegExp(" + kE.toQuotedString(t[e12]) + ");";
}
function Krt(e12) {
  return "var default" + e12 + " = defaults[" + e12 + "];";
}
function Zrt(e12, t) {
  return t[e12] === void 0 ? "" : "var refVal" + e12 + " = refVal[" + e12 + "];";
}
function Qrt(e12) {
  return "var customRule" + e12 + " = customRules[" + e12 + "];";
}
function K_(e12, t) {
  if (!e12.length)
    return "";
  for (var r = "", n = 0; n < e12.length; n++)
    r += t(n, e12);
  return r;
}
var xee = { exports: {} };
var jS = xee.exports = function() {
  this._cache = {};
};
jS.prototype.put = function(t, r) {
  this._cache[t] = r;
};
jS.prototype.get = function(t) {
  return this._cache[t];
};
jS.prototype.del = function(t) {
  delete this._cache[t];
};
jS.prototype.clear = function() {
  this._cache = {};
};
var Jrt = xee.exports;
var ent = kp;
var tnt = /^(\d\d\d\d)-(\d\d)-(\d\d)$/;
var rnt = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
var nnt = /^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;
var kee = /^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i;
var int = /^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;
var ont = /^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;
var Dee = /^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i;
var Ree = /^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i;
var Nee = /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;
var Mee = /^(?:\/(?:[^~/]|~0|~1)*)*$/;
var Lee = /^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;
var Bee = /^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;
var ant = GS;
function GS(e12) {
  return e12 = e12 == "full" ? "full" : "fast", ent.copy(GS[e12]);
}
GS.fast = {
  // date: http://tools.ietf.org/html/rfc3339#section-5.6
  date: /^\d\d\d\d-[0-1]\d-[0-3]\d$/,
  // date-time: http://tools.ietf.org/html/rfc3339#section-5.6
  time: /^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,
  "date-time": /^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,
  // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js
  uri: /^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,
  "uri-reference": /^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,
  "uri-template": Dee,
  url: Ree,
  // email (sources from jsen validator):
  // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363
  // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'willful violation')
  email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,
  hostname: kee,
  // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html
  ipv4: /^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,
  // optimized http://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses
  ipv6: /^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,
  regex: Hee,
  // uuid: http://tools.ietf.org/html/rfc4122
  uuid: Nee,
  // JSON-pointer: https://tools.ietf.org/html/rfc6901
  // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A
  "json-pointer": Mee,
  "json-pointer-uri-fragment": Lee,
  // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00
  "relative-json-pointer": Bee
};
GS.full = {
  date: Fee,
  time: $ee,
  "date-time": cnt,
  uri: hnt,
  "uri-reference": ont,
  "uri-template": Dee,
  url: Ree,
  email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,
  hostname: kee,
  ipv4: /^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,
  ipv6: /^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,
  regex: Hee,
  uuid: Nee,
  "json-pointer": Mee,
  "json-pointer-uri-fragment": Lee,
  "relative-json-pointer": Bee
};
function snt(e12) {
  return e12 % 4 === 0 && (e12 % 100 !== 0 || e12 % 400 === 0);
}
function Fee(e12) {
  var t = e12.match(tnt);
  if (!t)
    return false;
  var r = +t[1], n = +t[2], i = +t[3];
  return n >= 1 && n <= 12 && i >= 1 && i <= (n == 2 && snt(r) ? 29 : rnt[n]);
}
function $ee(e12, t) {
  var r = e12.match(nnt);
  if (!r)
    return false;
  var n = r[1], i = r[2], o = r[3], a = r[5];
  return (n <= 23 && i <= 59 && o <= 59 || n == 23 && i == 59 && o == 60) && (!t || a);
}
var lnt = /t|\s/i;
function cnt(e12) {
  var t = e12.split(lnt);
  return t.length == 2 && Fee(t[0]) && $ee(t[1], true);
}
var unt = /\/|:/;
function hnt(e12) {
  return unt.test(e12) && int.test(e12);
}
var fnt = /[^\\]\\Z/;
function Hee(e12) {
  if (fnt.test(e12))
    return false;
  try {
    return new RegExp(e12), true;
  } catch {
    return false;
  }
}
var dnt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.errSchemaPath + "/" + r, u = !t.opts.allErrors, c = "data" + (a || ""), f = "valid" + o, h, d;
  if (s == "#" || s == "#/")
    t.isRoot ? (h = t.async, d = "validate") : (h = t.root.schema.$async === true, d = "root.refVal[0]");
  else {
    var p = t.resolveRef(t.baseId, s, t.isRoot);
    if (p === void 0) {
      var m = t.MissingRefError.message(t.baseId, s);
      if (t.opts.missingRefs == "fail") {
        t.logger.error(m);
        var g = g || [];
        g.push(i), i = "", t.createErrors !== false ? (i += " { keyword: '$ref' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(l) + " , params: { ref: '" + t.util.escapeQuotes(s) + "' } ", t.opts.messages !== false && (i += " , message: 'can\\'t resolve reference " + t.util.escapeQuotes(s) + "' "), t.opts.verbose && (i += " , schema: " + t.util.toQuotedString(s) + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + c + " "), i += " } ") : i += " {} ";
        var v = i;
        i = g.pop(), !t.compositeRule && u ? t.async ? i += " throw new ValidationError([" + v + "]); " : i += " validate.errors = [" + v + "]; return false; " : i += " var err = " + v + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", u && (i += " if (false) { ");
      } else if (t.opts.missingRefs == "ignore")
        t.logger.warn(m), u && (i += " if (true) { ");
      else
        throw new t.MissingRefError(t.baseId, s, m);
    } else if (p.inline) {
      var _ = t.util.copy(t);
      _.level++;
      var y = "valid" + _.level;
      _.schema = p.schema, _.schemaPath = "", _.errSchemaPath = s;
      var b = t.validate(_).replace(/validate\.schema/g, p.code);
      i += " " + b + " ", u && (i += " if (" + y + ") { ");
    } else
      h = p.$async === true || t.async && p.$async !== false, d = p.code;
  }
  if (d) {
    var g = g || [];
    g.push(i), i = "", t.opts.passContext ? i += " " + d + ".call(this, " : i += " " + d + "( ", i += " " + c + ", (dataPath || '')", t.errorPath != '""' && (i += " + " + t.errorPath);
    var T = a ? "data" + (a - 1 || "") : "parentData", E = a ? t.dataPathArr[a] : "parentDataProperty";
    i += " , " + T + " , " + E + ", rootData)  ";
    var P = i;
    if (i = g.pop(), h) {
      if (!t.async)
        throw new Error("async schema referenced by sync schema");
      u && (i += " var " + f + "; "), i += " try { await " + P + "; ", u && (i += " " + f + " = true; "), i += " } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ", u && (i += " " + f + " = false; "), i += " } ", u && (i += " if (" + f + ") { ");
    } else
      i += " if (!" + P + ") { if (vErrors === null) vErrors = " + d + ".errors; else vErrors = vErrors.concat(" + d + ".errors); errors = vErrors.length; } ", u && (i += " else { ");
  }
  return i;
};
var pnt = function(t, r, n) {
  var i = " ", o = t.schema[r], a = t.schemaPath + t.util.getProperty(r), s = t.errSchemaPath + "/" + r, l = !t.opts.allErrors, u = t.util.copy(t), c = "";
  u.level++;
  var f = "valid" + u.level, h = u.baseId, d = true, p = o;
  if (p)
    for (var m, g = -1, v = p.length - 1; g < v; )
      m = p[g += 1], (t.opts.strictKeywords ? typeof m == "object" && Object.keys(m).length > 0 || m === false : t.util.schemaHasRules(m, t.RULES.all)) && (d = false, u.schema = m, u.schemaPath = a + "[" + g + "]", u.errSchemaPath = s + "/" + g, i += "  " + t.validate(u) + " ", u.baseId = h, l && (i += " if (" + f + ") { ", c += "}"));
  return l && (d ? i += " if (true) { " : i += " " + c.slice(0, -1) + " "), i;
};
var mnt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "valid" + o, d = "errs__" + o, p = t.util.copy(t), m = "";
  p.level++;
  var g = "valid" + p.level, v = s.every(function(A) {
    return t.opts.strictKeywords ? typeof A == "object" && Object.keys(A).length > 0 || A === false : t.util.schemaHasRules(A, t.RULES.all);
  });
  if (v) {
    var _ = p.baseId;
    i += " var " + d + " = errors; var " + h + " = false;  ";
    var y = t.compositeRule;
    t.compositeRule = p.compositeRule = true;
    var b = s;
    if (b)
      for (var T, E = -1, P = b.length - 1; E < P; )
        T = b[E += 1], p.schema = T, p.schemaPath = l + "[" + E + "]", p.errSchemaPath = u + "/" + E, i += "  " + t.validate(p) + " ", p.baseId = _, i += " " + h + " = " + h + " || " + g + "; if (!" + h + ") { ", m += "}";
    t.compositeRule = p.compositeRule = y, i += " " + m + " if (!" + h + ") {   var err =   ", t.createErrors !== false ? (i += " { keyword: 'anyOf' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: {} ", t.opts.messages !== false && (i += " , message: 'should match some schema in anyOf' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ", i += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", !t.compositeRule && c && (t.async ? i += " throw new ValidationError(vErrors); " : i += " validate.errors = vErrors; return false; "), i += " } else {  errors = " + d + "; if (vErrors !== null) { if (" + d + ") vErrors.length = " + d + "; else vErrors = null; } ", t.opts.allErrors && (i += " } ");
  } else
    c && (i += " if (true) { ");
  return i;
};
var gnt = function(t, r, n) {
  var i = " ", o = t.schema[r], a = t.errSchemaPath + "/" + r;
  t.opts.allErrors;
  var s = t.util.toQuotedString(o);
  return t.opts.$comment === true ? i += " console.log(" + s + ");" : typeof t.opts.$comment == "function" && (i += " self._opts.$comment(" + s + ", " + t.util.toQuotedString(a) + ", validate.root.schema);"), i;
};
var vnt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "valid" + o, d = t.opts.$data && s && s.$data;
  d && (i += " var schema" + o + " = " + t.util.getData(s.$data, a, t.dataPathArr) + "; "), d || (i += " var schema" + o + " = validate.schema" + l + ";"), i += "var " + h + " = equal(" + f + ", schema" + o + "); if (!" + h + ") {   ";
  var p = p || [];
  p.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'const' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { allowedValue: schema" + o + " } ", t.opts.messages !== false && (i += " , message: 'should be equal to constant' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
  var m = i;
  return i = p.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + m + "]); " : i += " validate.errors = [" + m + "]; return false; " : i += " var err = " + m + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " }", c && (i += " else { "), i;
};
var ynt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "valid" + o, d = "errs__" + o, p = t.util.copy(t), m = "";
  p.level++;
  var g = "valid" + p.level, v = "i" + o, _ = p.dataLevel = t.dataLevel + 1, y = "data" + _, b = t.baseId, T = t.opts.strictKeywords ? typeof s == "object" && Object.keys(s).length > 0 || s === false : t.util.schemaHasRules(s, t.RULES.all);
  if (i += "var " + d + " = errors;var " + h + ";", T) {
    var E = t.compositeRule;
    t.compositeRule = p.compositeRule = true, p.schema = s, p.schemaPath = l, p.errSchemaPath = u, i += " var " + g + " = false; for (var " + v + " = 0; " + v + " < " + f + ".length; " + v + "++) { ", p.errorPath = t.util.getPathExpr(t.errorPath, v, t.opts.jsonPointers, true);
    var P = f + "[" + v + "]";
    p.dataPathArr[_] = v;
    var A = t.validate(p);
    p.baseId = b, t.util.varOccurences(A, y) < 2 ? i += " " + t.util.varReplace(A, y, P) + " " : i += " var " + y + " = " + P + "; " + A + " ", i += " if (" + g + ") break; }  ", t.compositeRule = p.compositeRule = E, i += " " + m + " if (!" + g + ") {";
  } else
    i += " if (" + f + ".length == 0) {";
  var I = I || [];
  I.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'contains' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: {} ", t.opts.messages !== false && (i += " , message: 'should contain a valid item' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
  var x = i;
  return i = I.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + x + "]); " : i += " validate.errors = [" + x + "]; return false; " : i += " var err = " + x + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } else { ", T && (i += "  errors = " + d + "; if (vErrors !== null) { if (" + d + ") vErrors.length = " + d + "; else vErrors = null; } "), t.opts.allErrors && (i += " } "), i;
};
var _nt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "errs__" + o, d = t.util.copy(t), p = "";
  d.level++;
  var m = "valid" + d.level, g = {}, v = {}, _ = t.opts.ownProperties;
  for (E in s)
    if (E != "__proto__") {
      var y = s[E], b = Array.isArray(y) ? v : g;
      b[E] = y;
    }
  i += "var " + h + " = errors;";
  var T = t.errorPath;
  i += "var missing" + o + ";";
  for (var E in v)
    if (b = v[E], b.length) {
      if (i += " if ( " + f + t.util.getProperty(E) + " !== undefined ", _ && (i += " && Object.prototype.hasOwnProperty.call(" + f + ", '" + t.util.escapeQuotes(E) + "') "), c) {
        i += " && ( ";
        var P = b;
        if (P)
          for (var A, I = -1, x = P.length - 1; I < x; ) {
            A = P[I += 1], I && (i += " || ");
            var S = t.util.getProperty(A), N = f + S;
            i += " ( ( " + N + " === undefined ", _ && (i += " || ! Object.prototype.hasOwnProperty.call(" + f + ", '" + t.util.escapeQuotes(A) + "') "), i += ") && (missing" + o + " = " + t.util.toQuotedString(t.opts.jsonPointers ? A : S) + ") ) ";
          }
        i += ")) {  ";
        var B = "missing" + o, w = "' + " + B + " + '";
        t.opts._errorDataPathProperty && (t.errorPath = t.opts.jsonPointers ? t.util.getPathExpr(T, B, true) : T + " + " + B);
        var R = R || [];
        R.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'dependencies' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { property: '" + t.util.escapeQuotes(E) + "', missingProperty: '" + w + "', depsCount: " + b.length + ", deps: '" + t.util.escapeQuotes(b.length == 1 ? b[0] : b.join(", ")) + "' } ", t.opts.messages !== false && (i += " , message: 'should have ", b.length == 1 ? i += "property " + t.util.escapeQuotes(b[0]) : i += "properties " + t.util.escapeQuotes(b.join(", ")), i += " when property " + t.util.escapeQuotes(E) + " is present' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
        var F = i;
        i = R.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + F + "]); " : i += " validate.errors = [" + F + "]; return false; " : i += " var err = " + F + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";
      } else {
        i += " ) { ";
        var $ = b;
        if ($)
          for (var A, K = -1, se = $.length - 1; K < se; ) {
            A = $[K += 1];
            var S = t.util.getProperty(A), w = t.util.escapeQuotes(A), N = f + S;
            t.opts._errorDataPathProperty && (t.errorPath = t.util.getPath(T, A, t.opts.jsonPointers)), i += " if ( " + N + " === undefined ", _ && (i += " || ! Object.prototype.hasOwnProperty.call(" + f + ", '" + t.util.escapeQuotes(A) + "') "), i += ") {  var err =   ", t.createErrors !== false ? (i += " { keyword: 'dependencies' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { property: '" + t.util.escapeQuotes(E) + "', missingProperty: '" + w + "', depsCount: " + b.length + ", deps: '" + t.util.escapeQuotes(b.length == 1 ? b[0] : b.join(", ")) + "' } ", t.opts.messages !== false && (i += " , message: 'should have ", b.length == 1 ? i += "property " + t.util.escapeQuotes(b[0]) : i += "properties " + t.util.escapeQuotes(b.join(", ")), i += " when property " + t.util.escapeQuotes(E) + " is present' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ", i += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ";
          }
      }
      i += " }   ", c && (p += "}", i += " else { ");
    }
  t.errorPath = T;
  var J = d.baseId;
  for (var E in g) {
    var y = g[E];
    (t.opts.strictKeywords ? typeof y == "object" && Object.keys(y).length > 0 || y === false : t.util.schemaHasRules(y, t.RULES.all)) && (i += " " + m + " = true; if ( " + f + t.util.getProperty(E) + " !== undefined ", _ && (i += " && Object.prototype.hasOwnProperty.call(" + f + ", '" + t.util.escapeQuotes(E) + "') "), i += ") { ", d.schema = y, d.schemaPath = l + t.util.getProperty(E), d.errSchemaPath = u + "/" + t.util.escapeFragment(E), i += "  " + t.validate(d) + " ", d.baseId = J, i += " }  ", c && (i += " if (" + m + ") { ", p += "}"));
  }
  return c && (i += "   " + p + " if (" + h + " == errors) {"), i;
};
var bnt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "valid" + o, d = t.opts.$data && s && s.$data;
  d && (i += " var schema" + o + " = " + t.util.getData(s.$data, a, t.dataPathArr) + "; ");
  var p = "i" + o, m = "schema" + o;
  d || (i += " var " + m + " = validate.schema" + l + ";"), i += "var " + h + ";", d && (i += " if (schema" + o + " === undefined) " + h + " = true; else if (!Array.isArray(schema" + o + ")) " + h + " = false; else {"), i += "" + h + " = false;for (var " + p + "=0; " + p + "<" + m + ".length; " + p + "++) if (equal(" + f + ", " + m + "[" + p + "])) { " + h + " = true; break; }", d && (i += "  }  "), i += " if (!" + h + ") {   ";
  var g = g || [];
  g.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'enum' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { allowedValues: schema" + o + " } ", t.opts.messages !== false && (i += " , message: 'should be equal to one of the allowed values' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
  var v = i;
  return i = g.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + v + "]); " : i += " validate.errors = [" + v + "]; return false; " : i += " var err = " + v + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " }", c && (i += " else { "), i;
};
var Tnt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || "");
  if (t.opts.format === false)
    return c && (i += " if (true) { "), i;
  var h = t.opts.$data && s && s.$data, d;
  h ? (i += " var schema" + o + " = " + t.util.getData(s.$data, a, t.dataPathArr) + "; ", d = "schema" + o) : d = s;
  var p = t.opts.unknownFormats, m = Array.isArray(p);
  if (h) {
    var g = "format" + o, v = "isObject" + o, _ = "formatType" + o;
    i += " var " + g + " = formats[" + d + "]; var " + v + " = typeof " + g + " == 'object' && !(" + g + " instanceof RegExp) && " + g + ".validate; var " + _ + " = " + v + " && " + g + ".type || 'string'; if (" + v + ") { ", t.async && (i += " var async" + o + " = " + g + ".async; "), i += " " + g + " = " + g + ".validate; } if (  ", h && (i += " (" + d + " !== undefined && typeof " + d + " != 'string') || "), i += " (", p != "ignore" && (i += " (" + d + " && !" + g + " ", m && (i += " && self._opts.unknownFormats.indexOf(" + d + ") == -1 "), i += ") || "), i += " (" + g + " && " + _ + " == '" + n + "' && !(typeof " + g + " == 'function' ? ", t.async ? i += " (async" + o + " ? await " + g + "(" + f + ") : " + g + "(" + f + ")) " : i += " " + g + "(" + f + ") ", i += " : " + g + ".test(" + f + "))))) {";
  } else {
    var g = t.formats[s];
    if (!g) {
      if (p == "ignore")
        return t.logger.warn('unknown format "' + s + '" ignored in schema at path "' + t.errSchemaPath + '"'), c && (i += " if (true) { "), i;
      if (m && p.indexOf(s) >= 0)
        return c && (i += " if (true) { "), i;
      throw new Error('unknown format "' + s + '" is used in schema at path "' + t.errSchemaPath + '"');
    }
    var v = typeof g == "object" && !(g instanceof RegExp) && g.validate, _ = v && g.type || "string";
    if (v) {
      var y = g.async === true;
      g = g.validate;
    }
    if (_ != n)
      return c && (i += " if (true) { "), i;
    if (y) {
      if (!t.async)
        throw new Error("async format in sync schema");
      var b = "formats" + t.util.getProperty(s) + ".validate";
      i += " if (!(await " + b + "(" + f + "))) { ";
    } else {
      i += " if (! ";
      var b = "formats" + t.util.getProperty(s);
      v && (b += ".validate"), typeof g == "function" ? i += " " + b + "(" + f + ") " : i += " " + b + ".test(" + f + ") ", i += ") { ";
    }
  }
  var T = T || [];
  T.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'format' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { format:  ", h ? i += "" + d : i += "" + t.util.toQuotedString(s), i += "  } ", t.opts.messages !== false && (i += ` , message: 'should match format "`, h ? i += "' + " + d + " + '" : i += "" + t.util.escapeQuotes(s), i += `"' `), t.opts.verbose && (i += " , schema:  ", h ? i += "validate.schema" + l : i += "" + t.util.toQuotedString(s), i += "         , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
  var E = i;
  return i = T.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + E + "]); " : i += " validate.errors = [" + E + "]; return false; " : i += " var err = " + E + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } ", c && (i += " else { "), i;
};
var Ent = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "valid" + o, d = "errs__" + o, p = t.util.copy(t);
  p.level++;
  var m = "valid" + p.level, g = t.schema.then, v = t.schema.else, _ = g !== void 0 && (t.opts.strictKeywords ? typeof g == "object" && Object.keys(g).length > 0 || g === false : t.util.schemaHasRules(g, t.RULES.all)), y = v !== void 0 && (t.opts.strictKeywords ? typeof v == "object" && Object.keys(v).length > 0 || v === false : t.util.schemaHasRules(v, t.RULES.all)), b = p.baseId;
  if (_ || y) {
    var T;
    p.createErrors = false, p.schema = s, p.schemaPath = l, p.errSchemaPath = u, i += " var " + d + " = errors; var " + h + " = true;  ";
    var E = t.compositeRule;
    t.compositeRule = p.compositeRule = true, i += "  " + t.validate(p) + " ", p.baseId = b, p.createErrors = true, i += "  errors = " + d + "; if (vErrors !== null) { if (" + d + ") vErrors.length = " + d + "; else vErrors = null; }  ", t.compositeRule = p.compositeRule = E, _ ? (i += " if (" + m + ") {  ", p.schema = t.schema.then, p.schemaPath = t.schemaPath + ".then", p.errSchemaPath = t.errSchemaPath + "/then", i += "  " + t.validate(p) + " ", p.baseId = b, i += " " + h + " = " + m + "; ", _ && y ? (T = "ifClause" + o, i += " var " + T + " = 'then'; ") : T = "'then'", i += " } ", y && (i += " else { ")) : i += " if (!" + m + ") { ", y && (p.schema = t.schema.else, p.schemaPath = t.schemaPath + ".else", p.errSchemaPath = t.errSchemaPath + "/else", i += "  " + t.validate(p) + " ", p.baseId = b, i += " " + h + " = " + m + "; ", _ && y ? (T = "ifClause" + o, i += " var " + T + " = 'else'; ") : T = "'else'", i += " } "), i += " if (!" + h + ") {   var err =   ", t.createErrors !== false ? (i += " { keyword: 'if' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { failingKeyword: " + T + " } ", t.opts.messages !== false && (i += ` , message: 'should match "' + ` + T + ` + '" schema' `), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ", i += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", !t.compositeRule && c && (t.async ? i += " throw new ValidationError(vErrors); " : i += " validate.errors = vErrors; return false; "), i += " }   ", c && (i += " else { ");
  } else
    c && (i += " if (true) { ");
  return i;
};
var Snt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "valid" + o, d = "errs__" + o, p = t.util.copy(t), m = "";
  p.level++;
  var g = "valid" + p.level, v = "i" + o, _ = p.dataLevel = t.dataLevel + 1, y = "data" + _, b = t.baseId;
  if (i += "var " + d + " = errors;var " + h + ";", Array.isArray(s)) {
    var T = t.schema.additionalItems;
    if (T === false) {
      i += " " + h + " = " + f + ".length <= " + s.length + "; ";
      var E = u;
      u = t.errSchemaPath + "/additionalItems", i += "  if (!" + h + ") {   ";
      var P = P || [];
      P.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'additionalItems' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { limit: " + s.length + " } ", t.opts.messages !== false && (i += " , message: 'should NOT have more than " + s.length + " items' "), t.opts.verbose && (i += " , schema: false , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
      var A = i;
      i = P.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + A + "]); " : i += " validate.errors = [" + A + "]; return false; " : i += " var err = " + A + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } ", u = E, c && (m += "}", i += " else { ");
    }
    var I = s;
    if (I) {
      for (var x, S = -1, N = I.length - 1; S < N; )
        if (x = I[S += 1], t.opts.strictKeywords ? typeof x == "object" && Object.keys(x).length > 0 || x === false : t.util.schemaHasRules(x, t.RULES.all)) {
          i += " " + g + " = true; if (" + f + ".length > " + S + ") { ";
          var B = f + "[" + S + "]";
          p.schema = x, p.schemaPath = l + "[" + S + "]", p.errSchemaPath = u + "/" + S, p.errorPath = t.util.getPathExpr(t.errorPath, S, t.opts.jsonPointers, true), p.dataPathArr[_] = S;
          var w = t.validate(p);
          p.baseId = b, t.util.varOccurences(w, y) < 2 ? i += " " + t.util.varReplace(w, y, B) + " " : i += " var " + y + " = " + B + "; " + w + " ", i += " }  ", c && (i += " if (" + g + ") { ", m += "}");
        }
    }
    if (typeof T == "object" && (t.opts.strictKeywords ? typeof T == "object" && Object.keys(T).length > 0 || T === false : t.util.schemaHasRules(T, t.RULES.all))) {
      p.schema = T, p.schemaPath = t.schemaPath + ".additionalItems", p.errSchemaPath = t.errSchemaPath + "/additionalItems", i += " " + g + " = true; if (" + f + ".length > " + s.length + ") {  for (var " + v + " = " + s.length + "; " + v + " < " + f + ".length; " + v + "++) { ", p.errorPath = t.util.getPathExpr(t.errorPath, v, t.opts.jsonPointers, true);
      var B = f + "[" + v + "]";
      p.dataPathArr[_] = v;
      var w = t.validate(p);
      p.baseId = b, t.util.varOccurences(w, y) < 2 ? i += " " + t.util.varReplace(w, y, B) + " " : i += " var " + y + " = " + B + "; " + w + " ", c && (i += " if (!" + g + ") break; "), i += " } }  ", c && (i += " if (" + g + ") { ", m += "}");
    }
  } else if (t.opts.strictKeywords ? typeof s == "object" && Object.keys(s).length > 0 || s === false : t.util.schemaHasRules(s, t.RULES.all)) {
    p.schema = s, p.schemaPath = l, p.errSchemaPath = u, i += "  for (var " + v + " = 0; " + v + " < " + f + ".length; " + v + "++) { ", p.errorPath = t.util.getPathExpr(t.errorPath, v, t.opts.jsonPointers, true);
    var B = f + "[" + v + "]";
    p.dataPathArr[_] = v;
    var w = t.validate(p);
    p.baseId = b, t.util.varOccurences(w, y) < 2 ? i += " " + t.util.varReplace(w, y, B) + " " : i += " var " + y + " = " + B + "; " + w + " ", c && (i += " if (!" + g + ") break; "), i += " }";
  }
  return c && (i += " " + m + " if (" + d + " == errors) {"), i;
};
var IG = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, b, f = "data" + (a || ""), h = t.opts.$data && s && s.$data, d;
  h ? (i += " var schema" + o + " = " + t.util.getData(s.$data, a, t.dataPathArr) + "; ", d = "schema" + o) : d = s;
  var p = r == "maximum", m = p ? "exclusiveMaximum" : "exclusiveMinimum", g = t.schema[m], v = t.opts.$data && g && g.$data, _ = p ? "<" : ">", y = p ? ">" : "<", b = void 0;
  if (!(h || typeof s == "number" || s === void 0))
    throw new Error(r + " must be number");
  if (!(v || g === void 0 || typeof g == "number" || typeof g == "boolean"))
    throw new Error(m + " must be number or boolean");
  if (v) {
    var T = t.util.getData(g.$data, a, t.dataPathArr), E = "exclusive" + o, P = "exclType" + o, A = "exclIsNumber" + o, I = "op" + o, x = "' + " + I + " + '";
    i += " var schemaExcl" + o + " = " + T + "; ", T = "schemaExcl" + o, i += " var " + E + "; var " + P + " = typeof " + T + "; if (" + P + " != 'boolean' && " + P + " != 'undefined' && " + P + " != 'number') { ";
    var b = m, S = S || [];
    S.push(i), i = "", t.createErrors !== false ? (i += " { keyword: '" + (b || "_exclusiveLimit") + "' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: {} ", t.opts.messages !== false && (i += " , message: '" + m + " should be boolean' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
    var N = i;
    i = S.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + N + "]); " : i += " validate.errors = [" + N + "]; return false; " : i += " var err = " + N + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } else if ( ", h && (i += " (" + d + " !== undefined && typeof " + d + " != 'number') || "), i += " " + P + " == 'number' ? ( (" + E + " = " + d + " === undefined || " + T + " " + _ + "= " + d + ") ? " + f + " " + y + "= " + T + " : " + f + " " + y + " " + d + " ) : ( (" + E + " = " + T + " === true) ? " + f + " " + y + "= " + d + " : " + f + " " + y + " " + d + " ) || " + f + " !== " + f + ") { var op" + o + " = " + E + " ? '" + _ + "' : '" + _ + "='; ", s === void 0 && (b = m, u = t.errSchemaPath + "/" + m, d = T, h = v);
  } else {
    var A = typeof g == "number", x = _;
    if (A && h) {
      var I = "'" + x + "'";
      i += " if ( ", h && (i += " (" + d + " !== undefined && typeof " + d + " != 'number') || "), i += " ( " + d + " === undefined || " + g + " " + _ + "= " + d + " ? " + f + " " + y + "= " + g + " : " + f + " " + y + " " + d + " ) || " + f + " !== " + f + ") { ";
    } else {
      A && s === void 0 ? (E = true, b = m, u = t.errSchemaPath + "/" + m, d = g, y += "=") : (A && (d = Math[p ? "min" : "max"](g, s)), g === (A ? d : true) ? (E = true, b = m, u = t.errSchemaPath + "/" + m, y += "=") : (E = false, x += "="));
      var I = "'" + x + "'";
      i += " if ( ", h && (i += " (" + d + " !== undefined && typeof " + d + " != 'number') || "), i += " " + f + " " + y + " " + d + " || " + f + " !== " + f + ") { ";
    }
  }
  b = b || r;
  var S = S || [];
  S.push(i), i = "", t.createErrors !== false ? (i += " { keyword: '" + (b || "_limit") + "' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { comparison: " + I + ", limit: " + d + ", exclusive: " + E + " } ", t.opts.messages !== false && (i += " , message: 'should be " + x + " ", h ? i += "' + " + d : i += "" + d + "'"), t.opts.verbose && (i += " , schema:  ", h ? i += "validate.schema" + l : i += "" + s, i += "         , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
  var N = i;
  return i = S.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + N + "]); " : i += " validate.errors = [" + N + "]; return false; " : i += " var err = " + N + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } ", c && (i += " else { "), i;
};
var PG = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, m, f = "data" + (a || ""), h = t.opts.$data && s && s.$data, d;
  if (h ? (i += " var schema" + o + " = " + t.util.getData(s.$data, a, t.dataPathArr) + "; ", d = "schema" + o) : d = s, !(h || typeof s == "number"))
    throw new Error(r + " must be number");
  var p = r == "maxItems" ? ">" : "<";
  i += "if ( ", h && (i += " (" + d + " !== undefined && typeof " + d + " != 'number') || "), i += " " + f + ".length " + p + " " + d + ") { ";
  var m = r, g = g || [];
  g.push(i), i = "", t.createErrors !== false ? (i += " { keyword: '" + (m || "_limitItems") + "' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { limit: " + d + " } ", t.opts.messages !== false && (i += " , message: 'should NOT have ", r == "maxItems" ? i += "more" : i += "fewer", i += " than ", h ? i += "' + " + d + " + '" : i += "" + s, i += " items' "), t.opts.verbose && (i += " , schema:  ", h ? i += "validate.schema" + l : i += "" + s, i += "         , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
  var v = i;
  return i = g.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + v + "]); " : i += " validate.errors = [" + v + "]; return false; " : i += " var err = " + v + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += "} ", c && (i += " else { "), i;
};
var CG = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, m, f = "data" + (a || ""), h = t.opts.$data && s && s.$data, d;
  if (h ? (i += " var schema" + o + " = " + t.util.getData(s.$data, a, t.dataPathArr) + "; ", d = "schema" + o) : d = s, !(h || typeof s == "number"))
    throw new Error(r + " must be number");
  var p = r == "maxLength" ? ">" : "<";
  i += "if ( ", h && (i += " (" + d + " !== undefined && typeof " + d + " != 'number') || "), t.opts.unicode === false ? i += " " + f + ".length " : i += " ucs2length(" + f + ") ", i += " " + p + " " + d + ") { ";
  var m = r, g = g || [];
  g.push(i), i = "", t.createErrors !== false ? (i += " { keyword: '" + (m || "_limitLength") + "' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { limit: " + d + " } ", t.opts.messages !== false && (i += " , message: 'should NOT be ", r == "maxLength" ? i += "longer" : i += "shorter", i += " than ", h ? i += "' + " + d + " + '" : i += "" + s, i += " characters' "), t.opts.verbose && (i += " , schema:  ", h ? i += "validate.schema" + l : i += "" + s, i += "         , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
  var v = i;
  return i = g.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + v + "]); " : i += " validate.errors = [" + v + "]; return false; " : i += " var err = " + v + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += "} ", c && (i += " else { "), i;
};
var xG = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, m, f = "data" + (a || ""), h = t.opts.$data && s && s.$data, d;
  if (h ? (i += " var schema" + o + " = " + t.util.getData(s.$data, a, t.dataPathArr) + "; ", d = "schema" + o) : d = s, !(h || typeof s == "number"))
    throw new Error(r + " must be number");
  var p = r == "maxProperties" ? ">" : "<";
  i += "if ( ", h && (i += " (" + d + " !== undefined && typeof " + d + " != 'number') || "), i += " Object.keys(" + f + ").length " + p + " " + d + ") { ";
  var m = r, g = g || [];
  g.push(i), i = "", t.createErrors !== false ? (i += " { keyword: '" + (m || "_limitProperties") + "' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { limit: " + d + " } ", t.opts.messages !== false && (i += " , message: 'should NOT have ", r == "maxProperties" ? i += "more" : i += "fewer", i += " than ", h ? i += "' + " + d + " + '" : i += "" + s, i += " properties' "), t.opts.verbose && (i += " , schema:  ", h ? i += "validate.schema" + l : i += "" + s, i += "         , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
  var v = i;
  return i = g.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + v + "]); " : i += " validate.errors = [" + v + "]; return false; " : i += " var err = " + v + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += "} ", c && (i += " else { "), i;
};
var wnt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = t.opts.$data && s && s.$data, d;
  if (h ? (i += " var schema" + o + " = " + t.util.getData(s.$data, a, t.dataPathArr) + "; ", d = "schema" + o) : d = s, !(h || typeof s == "number"))
    throw new Error(r + " must be number");
  i += "var division" + o + ";if (", h && (i += " " + d + " !== undefined && ( typeof " + d + " != 'number' || "), i += " (division" + o + " = " + f + " / " + d + ", ", t.opts.multipleOfPrecision ? i += " Math.abs(Math.round(division" + o + ") - division" + o + ") > 1e-" + t.opts.multipleOfPrecision + " " : i += " division" + o + " !== parseInt(division" + o + ") ", i += " ) ", h && (i += "  )  "), i += " ) {   ";
  var p = p || [];
  p.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'multipleOf' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { multipleOf: " + d + " } ", t.opts.messages !== false && (i += " , message: 'should be multiple of ", h ? i += "' + " + d : i += "" + d + "'"), t.opts.verbose && (i += " , schema:  ", h ? i += "validate.schema" + l : i += "" + s, i += "         , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
  var m = i;
  return i = p.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + m + "]); " : i += " validate.errors = [" + m + "]; return false; " : i += " var err = " + m + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += "} ", c && (i += " else { "), i;
};
var Ant = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "errs__" + o, d = t.util.copy(t);
  d.level++;
  var p = "valid" + d.level;
  if (t.opts.strictKeywords ? typeof s == "object" && Object.keys(s).length > 0 || s === false : t.util.schemaHasRules(s, t.RULES.all)) {
    d.schema = s, d.schemaPath = l, d.errSchemaPath = u, i += " var " + h + " = errors;  ";
    var m = t.compositeRule;
    t.compositeRule = d.compositeRule = true, d.createErrors = false;
    var g;
    d.opts.allErrors && (g = d.opts.allErrors, d.opts.allErrors = false), i += " " + t.validate(d) + " ", d.createErrors = true, g && (d.opts.allErrors = g), t.compositeRule = d.compositeRule = m, i += " if (" + p + ") {   ";
    var v = v || [];
    v.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'not' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: {} ", t.opts.messages !== false && (i += " , message: 'should NOT be valid' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
    var _ = i;
    i = v.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + _ + "]); " : i += " validate.errors = [" + _ + "]; return false; " : i += " var err = " + _ + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } else {  errors = " + h + "; if (vErrors !== null) { if (" + h + ") vErrors.length = " + h + "; else vErrors = null; } ", t.opts.allErrors && (i += " } ");
  } else
    i += "  var err =   ", t.createErrors !== false ? (i += " { keyword: 'not' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: {} ", t.opts.messages !== false && (i += " , message: 'should NOT be valid' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ", i += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", c && (i += " if (false) { ");
  return i;
};
var Ont = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "valid" + o, d = "errs__" + o, p = t.util.copy(t), m = "";
  p.level++;
  var g = "valid" + p.level, v = p.baseId, _ = "prevValid" + o, y = "passingSchemas" + o;
  i += "var " + d + " = errors , " + _ + " = false , " + h + " = false , " + y + " = null; ";
  var b = t.compositeRule;
  t.compositeRule = p.compositeRule = true;
  var T = s;
  if (T)
    for (var E, P = -1, A = T.length - 1; P < A; )
      E = T[P += 1], (t.opts.strictKeywords ? typeof E == "object" && Object.keys(E).length > 0 || E === false : t.util.schemaHasRules(E, t.RULES.all)) ? (p.schema = E, p.schemaPath = l + "[" + P + "]", p.errSchemaPath = u + "/" + P, i += "  " + t.validate(p) + " ", p.baseId = v) : i += " var " + g + " = true; ", P && (i += " if (" + g + " && " + _ + ") { " + h + " = false; " + y + " = [" + y + ", " + P + "]; } else { ", m += "}"), i += " if (" + g + ") { " + h + " = " + _ + " = true; " + y + " = " + P + "; }";
  return t.compositeRule = p.compositeRule = b, i += "" + m + "if (!" + h + ") {   var err =   ", t.createErrors !== false ? (i += " { keyword: 'oneOf' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { passingSchemas: " + y + " } ", t.opts.messages !== false && (i += " , message: 'should match exactly one schema in oneOf' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ", i += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", !t.compositeRule && c && (t.async ? i += " throw new ValidationError(vErrors); " : i += " validate.errors = vErrors; return false; "), i += "} else {  errors = " + d + "; if (vErrors !== null) { if (" + d + ") vErrors.length = " + d + "; else vErrors = null; }", t.opts.allErrors && (i += " } "), i;
};
var Int = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = t.opts.$data && s && s.$data, d;
  h ? (i += " var schema" + o + " = " + t.util.getData(s.$data, a, t.dataPathArr) + "; ", d = "schema" + o) : d = s;
  var p = h ? "(new RegExp(" + d + "))" : t.usePattern(s);
  i += "if ( ", h && (i += " (" + d + " !== undefined && typeof " + d + " != 'string') || "), i += " !" + p + ".test(" + f + ") ) {   ";
  var m = m || [];
  m.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'pattern' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { pattern:  ", h ? i += "" + d : i += "" + t.util.toQuotedString(s), i += "  } ", t.opts.messages !== false && (i += ` , message: 'should match pattern "`, h ? i += "' + " + d + " + '" : i += "" + t.util.escapeQuotes(s), i += `"' `), t.opts.verbose && (i += " , schema:  ", h ? i += "validate.schema" + l : i += "" + t.util.toQuotedString(s), i += "         , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
  var g = i;
  return i = m.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + g + "]); " : i += " validate.errors = [" + g + "]; return false; " : i += " var err = " + g + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += "} ", c && (i += " else { "), i;
};
var Pnt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "errs__" + o, d = t.util.copy(t), p = "";
  d.level++;
  var m = "valid" + d.level, g = "key" + o, v = "idx" + o, _ = d.dataLevel = t.dataLevel + 1, y = "data" + _, b = "dataProperties" + o, T = Object.keys(s || {}).filter(K), E = t.schema.patternProperties || {}, P = Object.keys(E).filter(K), A = t.schema.additionalProperties, I = T.length || P.length, x = A === false, S = typeof A == "object" && Object.keys(A).length, N = t.opts.removeAdditional, B = x || S || N, w = t.opts.ownProperties, R = t.baseId, F = t.schema.required;
  if (F && !(t.opts.$data && F.$data) && F.length < t.opts.loopRequired)
    var $ = t.util.toHash(F);
  function K(ee) {
    return ee !== "__proto__";
  }
  if (i += "var " + h + " = errors;var " + m + " = true;", w && (i += " var " + b + " = undefined;"), B) {
    if (w ? i += " " + b + " = " + b + " || Object.keys(" + f + "); for (var " + v + "=0; " + v + "<" + b + ".length; " + v + "++) { var " + g + " = " + b + "[" + v + "]; " : i += " for (var " + g + " in " + f + ") { ", I) {
      if (i += " var isAdditional" + o + " = !(false ", T.length)
        if (T.length > 8)
          i += " || validate.schema" + l + ".hasOwnProperty(" + g + ") ";
        else {
          var se = T;
          if (se)
            for (var J, me = -1, ae = se.length - 1; me < ae; )
              J = se[me += 1], i += " || " + g + " == " + t.util.toQuotedString(J) + " ";
        }
      if (P.length) {
        var Y = P;
        if (Y)
          for (var Q, le = -1, Se = Y.length - 1; le < Se; )
            Q = Y[le += 1], i += " || " + t.usePattern(Q) + ".test(" + g + ") ";
      }
      i += " ); if (isAdditional" + o + ") { ";
    }
    if (N == "all")
      i += " delete " + f + "[" + g + "]; ";
    else {
      var Pe = t.errorPath, Re = "' + " + g + " + '";
      if (t.opts._errorDataPathProperty && (t.errorPath = t.util.getPathExpr(t.errorPath, g, t.opts.jsonPointers)), x)
        if (N)
          i += " delete " + f + "[" + g + "]; ";
        else {
          i += " " + m + " = false; ";
          var we = u;
          u = t.errSchemaPath + "/additionalProperties";
          var Ne = Ne || [];
          Ne.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'additionalProperties' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { additionalProperty: '" + Re + "' } ", t.opts.messages !== false && (i += " , message: '", t.opts._errorDataPathProperty ? i += "is an invalid additional property" : i += "should NOT have additional properties", i += "' "), t.opts.verbose && (i += " , schema: false , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
          var Me = i;
          i = Ne.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + Me + "]); " : i += " validate.errors = [" + Me + "]; return false; " : i += " var err = " + Me + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", u = we, c && (i += " break; ");
        }
      else if (S)
        if (N == "failing") {
          i += " var " + h + " = errors;  ";
          var Ie = t.compositeRule;
          t.compositeRule = d.compositeRule = true, d.schema = A, d.schemaPath = t.schemaPath + ".additionalProperties", d.errSchemaPath = t.errSchemaPath + "/additionalProperties", d.errorPath = t.opts._errorDataPathProperty ? t.errorPath : t.util.getPathExpr(t.errorPath, g, t.opts.jsonPointers);
          var Ge = f + "[" + g + "]";
          d.dataPathArr[_] = g;
          var je = t.validate(d);
          d.baseId = R, t.util.varOccurences(je, y) < 2 ? i += " " + t.util.varReplace(je, y, Ge) + " " : i += " var " + y + " = " + Ge + "; " + je + " ", i += " if (!" + m + ") { errors = " + h + "; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete " + f + "[" + g + "]; }  ", t.compositeRule = d.compositeRule = Ie;
        } else {
          d.schema = A, d.schemaPath = t.schemaPath + ".additionalProperties", d.errSchemaPath = t.errSchemaPath + "/additionalProperties", d.errorPath = t.opts._errorDataPathProperty ? t.errorPath : t.util.getPathExpr(t.errorPath, g, t.opts.jsonPointers);
          var Ge = f + "[" + g + "]";
          d.dataPathArr[_] = g;
          var je = t.validate(d);
          d.baseId = R, t.util.varOccurences(je, y) < 2 ? i += " " + t.util.varReplace(je, y, Ge) + " " : i += " var " + y + " = " + Ge + "; " + je + " ", c && (i += " if (!" + m + ") break; ");
        }
      t.errorPath = Pe;
    }
    I && (i += " } "), i += " }  ", c && (i += " if (" + m + ") { ", p += "}");
  }
  var ot = t.opts.useDefaults && !t.compositeRule;
  if (T.length) {
    var at = T;
    if (at)
      for (var J, Qe = -1, bt = at.length - 1; Qe < bt; ) {
        J = at[Qe += 1];
        var Et = s[J];
        if (t.opts.strictKeywords ? typeof Et == "object" && Object.keys(Et).length > 0 || Et === false : t.util.schemaHasRules(Et, t.RULES.all)) {
          var $t = t.util.getProperty(J), Ge = f + $t, rn = ot && Et.default !== void 0;
          d.schema = Et, d.schemaPath = l + $t, d.errSchemaPath = u + "/" + t.util.escapeFragment(J), d.errorPath = t.util.getPath(t.errorPath, J, t.opts.jsonPointers), d.dataPathArr[_] = t.util.toQuotedString(J);
          var je = t.validate(d);
          if (d.baseId = R, t.util.varOccurences(je, y) < 2) {
            je = t.util.varReplace(je, y, Ge);
            var Ht = Ge;
          } else {
            var Ht = y;
            i += " var " + y + " = " + Ge + "; ";
          }
          if (rn)
            i += " " + je + " ";
          else {
            if ($ && $[J]) {
              i += " if ( " + Ht + " === undefined ", w && (i += " || ! Object.prototype.hasOwnProperty.call(" + f + ", '" + t.util.escapeQuotes(J) + "') "), i += ") { " + m + " = false; ";
              var Pe = t.errorPath, we = u, xe = t.util.escapeQuotes(J);
              t.opts._errorDataPathProperty && (t.errorPath = t.util.getPath(Pe, J, t.opts.jsonPointers)), u = t.errSchemaPath + "/required";
              var Ne = Ne || [];
              Ne.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'required' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { missingProperty: '" + xe + "' } ", t.opts.messages !== false && (i += " , message: '", t.opts._errorDataPathProperty ? i += "is a required property" : i += "should have required property \\'" + xe + "\\'", i += "' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
              var Me = i;
              i = Ne.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + Me + "]); " : i += " validate.errors = [" + Me + "]; return false; " : i += " var err = " + Me + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", u = we, t.errorPath = Pe, i += " } else { ";
            } else
              c ? (i += " if ( " + Ht + " === undefined ", w && (i += " || ! Object.prototype.hasOwnProperty.call(" + f + ", '" + t.util.escapeQuotes(J) + "') "), i += ") { " + m + " = true; } else { ") : (i += " if (" + Ht + " !== undefined ", w && (i += " &&   Object.prototype.hasOwnProperty.call(" + f + ", '" + t.util.escapeQuotes(J) + "') "), i += " ) { ");
            i += " " + je + " } ";
          }
        }
        c && (i += " if (" + m + ") { ", p += "}");
      }
  }
  if (P.length) {
    var ne = P;
    if (ne)
      for (var Q, ce = -1, _e = ne.length - 1; ce < _e; ) {
        Q = ne[ce += 1];
        var Et = E[Q];
        if (t.opts.strictKeywords ? typeof Et == "object" && Object.keys(Et).length > 0 || Et === false : t.util.schemaHasRules(Et, t.RULES.all)) {
          d.schema = Et, d.schemaPath = t.schemaPath + ".patternProperties" + t.util.getProperty(Q), d.errSchemaPath = t.errSchemaPath + "/patternProperties/" + t.util.escapeFragment(Q), w ? i += " " + b + " = " + b + " || Object.keys(" + f + "); for (var " + v + "=0; " + v + "<" + b + ".length; " + v + "++) { var " + g + " = " + b + "[" + v + "]; " : i += " for (var " + g + " in " + f + ") { ", i += " if (" + t.usePattern(Q) + ".test(" + g + ")) { ", d.errorPath = t.util.getPathExpr(t.errorPath, g, t.opts.jsonPointers);
          var Ge = f + "[" + g + "]";
          d.dataPathArr[_] = g;
          var je = t.validate(d);
          d.baseId = R, t.util.varOccurences(je, y) < 2 ? i += " " + t.util.varReplace(je, y, Ge) + " " : i += " var " + y + " = " + Ge + "; " + je + " ", c && (i += " if (!" + m + ") break; "), i += " } ", c && (i += " else " + m + " = true; "), i += " }  ", c && (i += " if (" + m + ") { ", p += "}");
        }
      }
  }
  return c && (i += " " + p + " if (" + h + " == errors) {"), i;
};
var Cnt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "errs__" + o, d = t.util.copy(t), p = "";
  d.level++;
  var m = "valid" + d.level;
  if (i += "var " + h + " = errors;", t.opts.strictKeywords ? typeof s == "object" && Object.keys(s).length > 0 || s === false : t.util.schemaHasRules(s, t.RULES.all)) {
    d.schema = s, d.schemaPath = l, d.errSchemaPath = u;
    var g = "key" + o, v = "idx" + o, _ = "i" + o, y = "' + " + g + " + '", b = d.dataLevel = t.dataLevel + 1, T = "data" + b, E = "dataProperties" + o, P = t.opts.ownProperties, A = t.baseId;
    P && (i += " var " + E + " = undefined; "), P ? i += " " + E + " = " + E + " || Object.keys(" + f + "); for (var " + v + "=0; " + v + "<" + E + ".length; " + v + "++) { var " + g + " = " + E + "[" + v + "]; " : i += " for (var " + g + " in " + f + ") { ", i += " var startErrs" + o + " = errors; ";
    var I = g, x = t.compositeRule;
    t.compositeRule = d.compositeRule = true;
    var S = t.validate(d);
    d.baseId = A, t.util.varOccurences(S, T) < 2 ? i += " " + t.util.varReplace(S, T, I) + " " : i += " var " + T + " = " + I + "; " + S + " ", t.compositeRule = d.compositeRule = x, i += " if (!" + m + ") { for (var " + _ + "=startErrs" + o + "; " + _ + "<errors; " + _ + "++) { vErrors[" + _ + "].propertyName = " + g + "; }   var err =   ", t.createErrors !== false ? (i += " { keyword: 'propertyNames' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { propertyName: '" + y + "' } ", t.opts.messages !== false && (i += " , message: 'property name \\'" + y + "\\' is invalid' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ", i += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", !t.compositeRule && c && (t.async ? i += " throw new ValidationError(vErrors); " : i += " validate.errors = vErrors; return false; "), c && (i += " break; "), i += " } }";
  }
  return c && (i += " " + p + " if (" + h + " == errors) {"), i;
};
var xnt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "valid" + o, d = t.opts.$data && s && s.$data;
  d && (i += " var schema" + o + " = " + t.util.getData(s.$data, a, t.dataPathArr) + "; ");
  var p = "schema" + o;
  if (!d)
    if (s.length < t.opts.loopRequired && t.schema.properties && Object.keys(t.schema.properties).length) {
      var m = [], g = s;
      if (g)
        for (var v, _ = -1, y = g.length - 1; _ < y; ) {
          v = g[_ += 1];
          var b = t.schema.properties[v];
          b && (t.opts.strictKeywords ? typeof b == "object" && Object.keys(b).length > 0 || b === false : t.util.schemaHasRules(b, t.RULES.all)) || (m[m.length] = v);
        }
    } else
      var m = s;
  if (d || m.length) {
    var T = t.errorPath, E = d || m.length >= t.opts.loopRequired, P = t.opts.ownProperties;
    if (c)
      if (i += " var missing" + o + "; ", E) {
        d || (i += " var " + p + " = validate.schema" + l + "; ");
        var A = "i" + o, I = "schema" + o + "[" + A + "]", x = "' + " + I + " + '";
        t.opts._errorDataPathProperty && (t.errorPath = t.util.getPathExpr(T, I, t.opts.jsonPointers)), i += " var " + h + " = true; ", d && (i += " if (schema" + o + " === undefined) " + h + " = true; else if (!Array.isArray(schema" + o + ")) " + h + " = false; else {"), i += " for (var " + A + " = 0; " + A + " < " + p + ".length; " + A + "++) { " + h + " = " + f + "[" + p + "[" + A + "]] !== undefined ", P && (i += " &&   Object.prototype.hasOwnProperty.call(" + f + ", " + p + "[" + A + "]) "), i += "; if (!" + h + ") break; } ", d && (i += "  }  "), i += "  if (!" + h + ") {   ";
        var S = S || [];
        S.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'required' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { missingProperty: '" + x + "' } ", t.opts.messages !== false && (i += " , message: '", t.opts._errorDataPathProperty ? i += "is a required property" : i += "should have required property \\'" + x + "\\'", i += "' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
        var N = i;
        i = S.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + N + "]); " : i += " validate.errors = [" + N + "]; return false; " : i += " var err = " + N + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } else { ";
      } else {
        i += " if ( ";
        var B = m;
        if (B)
          for (var w, A = -1, R = B.length - 1; A < R; ) {
            w = B[A += 1], A && (i += " || ");
            var F = t.util.getProperty(w), $ = f + F;
            i += " ( ( " + $ + " === undefined ", P && (i += " || ! Object.prototype.hasOwnProperty.call(" + f + ", '" + t.util.escapeQuotes(w) + "') "), i += ") && (missing" + o + " = " + t.util.toQuotedString(t.opts.jsonPointers ? w : F) + ") ) ";
          }
        i += ") {  ";
        var I = "missing" + o, x = "' + " + I + " + '";
        t.opts._errorDataPathProperty && (t.errorPath = t.opts.jsonPointers ? t.util.getPathExpr(T, I, true) : T + " + " + I);
        var S = S || [];
        S.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'required' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { missingProperty: '" + x + "' } ", t.opts.messages !== false && (i += " , message: '", t.opts._errorDataPathProperty ? i += "is a required property" : i += "should have required property \\'" + x + "\\'", i += "' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
        var N = i;
        i = S.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + N + "]); " : i += " validate.errors = [" + N + "]; return false; " : i += " var err = " + N + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } else { ";
      }
    else if (E) {
      d || (i += " var " + p + " = validate.schema" + l + "; ");
      var A = "i" + o, I = "schema" + o + "[" + A + "]", x = "' + " + I + " + '";
      t.opts._errorDataPathProperty && (t.errorPath = t.util.getPathExpr(T, I, t.opts.jsonPointers)), d && (i += " if (" + p + " && !Array.isArray(" + p + ")) {  var err =   ", t.createErrors !== false ? (i += " { keyword: 'required' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { missingProperty: '" + x + "' } ", t.opts.messages !== false && (i += " , message: '", t.opts._errorDataPathProperty ? i += "is a required property" : i += "should have required property \\'" + x + "\\'", i += "' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ", i += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (" + p + " !== undefined) { "), i += " for (var " + A + " = 0; " + A + " < " + p + ".length; " + A + "++) { if (" + f + "[" + p + "[" + A + "]] === undefined ", P && (i += " || ! Object.prototype.hasOwnProperty.call(" + f + ", " + p + "[" + A + "]) "), i += ") {  var err =   ", t.createErrors !== false ? (i += " { keyword: 'required' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { missingProperty: '" + x + "' } ", t.opts.messages !== false && (i += " , message: '", t.opts._errorDataPathProperty ? i += "is a required property" : i += "should have required property \\'" + x + "\\'", i += "' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ", i += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ", d && (i += "  }  ");
    } else {
      var K = m;
      if (K)
        for (var w, se = -1, J = K.length - 1; se < J; ) {
          w = K[se += 1];
          var F = t.util.getProperty(w), x = t.util.escapeQuotes(w), $ = f + F;
          t.opts._errorDataPathProperty && (t.errorPath = t.util.getPath(T, w, t.opts.jsonPointers)), i += " if ( " + $ + " === undefined ", P && (i += " || ! Object.prototype.hasOwnProperty.call(" + f + ", '" + t.util.escapeQuotes(w) + "') "), i += ") {  var err =   ", t.createErrors !== false ? (i += " { keyword: 'required' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { missingProperty: '" + x + "' } ", t.opts.messages !== false && (i += " , message: '", t.opts._errorDataPathProperty ? i += "is a required property" : i += "should have required property \\'" + x + "\\'", i += "' "), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ", i += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ";
        }
    }
    t.errorPath = T;
  } else
    c && (i += " if (true) {");
  return i;
};
var knt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f = "data" + (a || ""), h = "valid" + o, d = t.opts.$data && s && s.$data, p;
  if (d ? (i += " var schema" + o + " = " + t.util.getData(s.$data, a, t.dataPathArr) + "; ", p = "schema" + o) : p = s, (s || d) && t.opts.uniqueItems !== false) {
    d && (i += " var " + h + "; if (" + p + " === false || " + p + " === undefined) " + h + " = true; else if (typeof " + p + " != 'boolean') " + h + " = false; else { "), i += " var i = " + f + ".length , " + h + " = true , j; if (i > 1) { ";
    var m = t.schema.items && t.schema.items.type, g = Array.isArray(m);
    if (!m || m == "object" || m == "array" || g && (m.indexOf("object") >= 0 || m.indexOf("array") >= 0))
      i += " outer: for (;i--;) { for (j = i; j--;) { if (equal(" + f + "[i], " + f + "[j])) { " + h + " = false; break outer; } } } ";
    else {
      i += " var itemIndices = {}, item; for (;i--;) { var item = " + f + "[i]; ";
      var v = "checkDataType" + (g ? "s" : "");
      i += " if (" + t.util[v](m, "item", t.opts.strictNumbers, true) + ") continue; ", g && (i += ` if (typeof item == 'string') item = '"' + item; `), i += " if (typeof itemIndices[item] == 'number') { " + h + " = false; j = itemIndices[item]; break; } itemIndices[item] = i; } ";
    }
    i += " } ", d && (i += "  }  "), i += " if (!" + h + ") {   ";
    var _ = _ || [];
    _.push(i), i = "", t.createErrors !== false ? (i += " { keyword: 'uniqueItems' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { i: i, j: j } ", t.opts.messages !== false && (i += " , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "), t.opts.verbose && (i += " , schema:  ", d ? i += "validate.schema" + l : i += "" + s, i += "         , parentSchema: validate.schema" + t.schemaPath + " , data: " + f + " "), i += " } ") : i += " {} ";
    var y = i;
    i = _.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + y + "]); " : i += " validate.errors = [" + y + "]; return false; " : i += " var err = " + y + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } ", c && (i += " else { ");
  } else
    c && (i += " if (true) { ");
  return i;
};
var Dnt = {
  $ref: dnt,
  allOf: pnt,
  anyOf: mnt,
  $comment: gnt,
  const: vnt,
  contains: ynt,
  dependencies: _nt,
  enum: bnt,
  format: Tnt,
  if: Ent,
  items: Snt,
  maximum: IG,
  minimum: IG,
  maxItems: PG,
  minItems: PG,
  maxLength: CG,
  minLength: CG,
  maxProperties: xG,
  minProperties: xG,
  multipleOf: wnt,
  not: Ant,
  oneOf: Ont,
  pattern: Int,
  properties: Pnt,
  propertyNames: Cnt,
  required: xnt,
  uniqueItems: knt,
  validate: Iee
};
var kG = Dnt;
var nI = kp.toHash;
var Rnt = function() {
  var t = [{
    type: "number",
    rules: [{
      maximum: ["exclusiveMaximum"]
    }, {
      minimum: ["exclusiveMinimum"]
    }, "multipleOf", "format"]
  }, {
    type: "string",
    rules: ["maxLength", "minLength", "pattern", "format"]
  }, {
    type: "array",
    rules: ["maxItems", "minItems", "items", "contains", "uniqueItems"]
  }, {
    type: "object",
    rules: ["maxProperties", "minProperties", "required", "dependencies", "propertyNames", {
      properties: ["additionalProperties", "patternProperties"]
    }]
  }, {
    rules: ["$ref", "const", "enum", "not", "anyOf", "oneOf", "allOf", "if"]
  }], r = ["type", "$comment"], n = ["$schema", "$id", "id", "$data", "$async", "title", "description", "default", "definitions", "examples", "readOnly", "writeOnly", "contentMediaType", "contentEncoding", "additionalItems", "then", "else"], i = ["number", "integer", "string", "array", "object", "boolean", "null"];
  return t.all = nI(r), t.types = nI(i), t.forEach(function(o) {
    o.rules = o.rules.map(function(a) {
      var s;
      if (typeof a == "object") {
        var l = Object.keys(a)[0];
        s = a[l], a = l, s.forEach(function(c) {
          r.push(c), t.all[c] = true;
        });
      }
      r.push(a);
      var u = t.all[a] = {
        keyword: a,
        code: kG[a],
        implements: s
      };
      return u;
    }), t.all.$comment = {
      keyword: "$comment",
      code: kG.$comment
    }, o.type && (t.types[o.type] = o);
  }), t.keywords = nI(r.concat(n)), t.custom = {}, t;
};
var DG = ["multipleOf", "maximum", "exclusiveMaximum", "minimum", "exclusiveMinimum", "maxLength", "minLength", "pattern", "additionalItems", "maxItems", "minItems", "uniqueItems", "maxProperties", "minProperties", "required", "additionalProperties", "enum", "format", "const"];
var Nnt = function(e12, t) {
  for (var r = 0; r < t.length; r++) {
    e12 = JSON.parse(JSON.stringify(e12));
    var n = t[r].split("/"), i = e12, o;
    for (o = 1; o < n.length; o++)
      i = i[n[o]];
    for (o = 0; o < DG.length; o++) {
      var a = DG[o], s = i[a];
      s && (i[a] = {
        anyOf: [s, {
          $ref: "https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"
        }]
      });
    }
  }
  return e12;
};
var Mnt = zL.MissingRef;
var Lnt = Uee;
function Uee(e12, t, r) {
  var n = this;
  if (typeof this._opts.loadSchema != "function")
    throw new Error("options.loadSchema should be a function");
  typeof t == "function" && (r = t, t = void 0);
  var i = o(e12).then(function() {
    var s = n._addSchema(e12, void 0, t);
    return s.validate || a(s);
  });
  return r && i.then(function(s) {
    r(null, s);
  }, r), i;
  function o(s) {
    var l = s.$schema;
    return l && !n.getSchema(l) ? Uee.call(n, {
      $ref: l
    }, true) : Promise.resolve();
  }
  function a(s) {
    try {
      return n._compile(s);
    } catch (u) {
      if (u instanceof Mnt)
        return l(u);
      throw u;
    }
    function l(u) {
      var c = u.missingSchema;
      if (d(c))
        throw new Error("Schema " + c + " is loaded but " + u.missingRef + " cannot be resolved");
      var f = n._loadingSchemas[c];
      return f || (f = n._loadingSchemas[c] = n._opts.loadSchema(c), f.then(h, h)), f.then(function(p) {
        if (!d(c))
          return o(p).then(function() {
            d(c) || n.addSchema(p, c, void 0, t);
          });
      }).then(function() {
        return a(s);
      });
      function h() {
        delete n._loadingSchemas[c];
      }
      function d(p) {
        return n._refs[p] || n._schemas[p];
      }
    }
  }
}
var Bnt = function(t, r, n) {
  var i = " ", o = t.level, a = t.dataLevel, s = t.schema[r], l = t.schemaPath + t.util.getProperty(r), u = t.errSchemaPath + "/" + r, c = !t.opts.allErrors, f, h = "data" + (a || ""), d = "valid" + o, p = "errs__" + o, m = t.opts.$data && s && s.$data, g;
  m ? (i += " var schema" + o + " = " + t.util.getData(s.$data, a, t.dataPathArr) + "; ", g = "schema" + o) : g = s;
  var v = this, _ = "definition" + o, y = v.definition, b = "", T, E, P, A, I;
  if (m && y.$data) {
    I = "keywordValidate" + o;
    var x = y.validateSchema;
    i += " var " + _ + " = RULES.custom['" + r + "'].definition; var " + I + " = " + _ + ".validate;";
  } else {
    if (A = t.useCustomRule(v, s, t.schema, t), !A)
      return;
    g = "validate.schema" + l, I = A.code, T = y.compile, E = y.inline, P = y.macro;
  }
  var S = I + ".errors", N = "i" + o, B = "ruleErr" + o, w = y.async;
  if (w && !t.async)
    throw new Error("async keyword in sync schema");
  if (E || P || (i += "" + S + " = null;"), i += "var " + p + " = errors;var " + d + ";", m && y.$data && (b += "}", i += " if (" + g + " === undefined) { " + d + " = true; } else { ", x && (b += "}", i += " " + d + " = " + _ + ".validateSchema(" + g + "); if (" + d + ") { ")), E)
    y.statements ? i += " " + A.validate + " " : i += " " + d + " = " + A.validate + "; ";
  else if (P) {
    var R = t.util.copy(t), b = "";
    R.level++;
    var F = "valid" + R.level;
    R.schema = A.validate, R.schemaPath = "";
    var $ = t.compositeRule;
    t.compositeRule = R.compositeRule = true;
    var K = t.validate(R).replace(/validate\.schema/g, I);
    t.compositeRule = R.compositeRule = $, i += " " + K;
  } else {
    var se = se || [];
    se.push(i), i = "", i += "  " + I + ".call( ", t.opts.passContext ? i += "this" : i += "self", T || y.schema === false ? i += " , " + h + " " : i += " , " + g + " , " + h + " , validate.schema" + t.schemaPath + " ", i += " , (dataPath || '')", t.errorPath != '""' && (i += " + " + t.errorPath);
    var J = a ? "data" + (a - 1 || "") : "parentData", me = a ? t.dataPathArr[a] : "parentDataProperty";
    i += " , " + J + " , " + me + " , rootData )  ";
    var ae = i;
    i = se.pop(), y.errors === false ? (i += " " + d + " = ", w && (i += "await "), i += "" + ae + "; ") : w ? (S = "customErrors" + o, i += " var " + S + " = null; try { " + d + " = await " + ae + "; } catch (e) { " + d + " = false; if (e instanceof ValidationError) " + S + " = e.errors; else throw e; } ") : i += " " + S + " = null; " + d + " = " + ae + "; ";
  }
  if (y.modifying && (i += " if (" + J + ") " + h + " = " + J + "[" + me + "];"), i += "" + b, y.valid)
    c && (i += " if (true) { ");
  else {
    i += " if ( ", y.valid === void 0 ? (i += " !", P ? i += "" + F : i += "" + d) : i += " " + !y.valid + " ", i += ") { ", f = v.keyword;
    var se = se || [];
    se.push(i), i = "";
    var se = se || [];
    se.push(i), i = "", t.createErrors !== false ? (i += " { keyword: '" + (f || "custom") + "' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { keyword: '" + v.keyword + "' } ", t.opts.messages !== false && (i += ` , message: 'should pass "` + v.keyword + `" keyword validation' `), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + h + " "), i += " } ") : i += " {} ";
    var Y = i;
    i = se.pop(), !t.compositeRule && c ? t.async ? i += " throw new ValidationError([" + Y + "]); " : i += " validate.errors = [" + Y + "]; return false; " : i += " var err = " + Y + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";
    var Q = i;
    i = se.pop(), E ? y.errors ? y.errors != "full" && (i += "  for (var " + N + "=" + p + "; " + N + "<errors; " + N + "++) { var " + B + " = vErrors[" + N + "]; if (" + B + ".dataPath === undefined) " + B + ".dataPath = (dataPath || '') + " + t.errorPath + "; if (" + B + ".schemaPath === undefined) { " + B + '.schemaPath = "' + u + '"; } ', t.opts.verbose && (i += " " + B + ".schema = " + g + "; " + B + ".data = " + h + "; "), i += " } ") : y.errors === false ? i += " " + Q + " " : (i += " if (" + p + " == errors) { " + Q + " } else {  for (var " + N + "=" + p + "; " + N + "<errors; " + N + "++) { var " + B + " = vErrors[" + N + "]; if (" + B + ".dataPath === undefined) " + B + ".dataPath = (dataPath || '') + " + t.errorPath + "; if (" + B + ".schemaPath === undefined) { " + B + '.schemaPath = "' + u + '"; } ', t.opts.verbose && (i += " " + B + ".schema = " + g + "; " + B + ".data = " + h + "; "), i += " } } ") : P ? (i += "   var err =   ", t.createErrors !== false ? (i += " { keyword: '" + (f || "custom") + "' , dataPath: (dataPath || '') + " + t.errorPath + " , schemaPath: " + t.util.toQuotedString(u) + " , params: { keyword: '" + v.keyword + "' } ", t.opts.messages !== false && (i += ` , message: 'should pass "` + v.keyword + `" keyword validation' `), t.opts.verbose && (i += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + t.schemaPath + " , data: " + h + " "), i += " } ") : i += " {} ", i += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", !t.compositeRule && c && (t.async ? i += " throw new ValidationError(vErrors); " : i += " validate.errors = vErrors; return false; ")) : y.errors === false ? i += " " + Q + " " : (i += " if (Array.isArray(" + S + ")) { if (vErrors === null) vErrors = " + S + "; else vErrors = vErrors.concat(" + S + "); errors = vErrors.length;  for (var " + N + "=" + p + "; " + N + "<errors; " + N + "++) { var " + B + " = vErrors[" + N + "]; if (" + B + ".dataPath === undefined) " + B + ".dataPath = (dataPath || '') + " + t.errorPath + ";  " + B + '.schemaPath = "' + u + '";  ', t.opts.verbose && (i += " " + B + ".schema = " + g + "; " + B + ".data = " + h + "; "), i += " } } else { " + Q + " } "), i += " } ", c && (i += " else { ");
  }
  return i;
};
var Fnt = "http://json-schema.org/draft-07/schema#";
var $nt = "http://json-schema.org/draft-07/schema#";
var Hnt = "Core schema meta-schema";
var Unt = {
  schemaArray: {
    type: "array",
    minItems: 1,
    items: {
      $ref: "#"
    }
  },
  nonNegativeInteger: {
    type: "integer",
    minimum: 0
  },
  nonNegativeIntegerDefault0: {
    allOf: [
      {
        $ref: "#/definitions/nonNegativeInteger"
      },
      {
        default: 0
      }
    ]
  },
  simpleTypes: {
    enum: [
      "array",
      "boolean",
      "integer",
      "null",
      "number",
      "object",
      "string"
    ]
  },
  stringArray: {
    type: "array",
    items: {
      type: "string"
    },
    uniqueItems: true,
    default: []
  }
};
var jnt = [
  "object",
  "boolean"
];
var Gnt = {
  $id: {
    type: "string",
    format: "uri-reference"
  },
  $schema: {
    type: "string",
    format: "uri"
  },
  $ref: {
    type: "string",
    format: "uri-reference"
  },
  $comment: {
    type: "string"
  },
  title: {
    type: "string"
  },
  description: {
    type: "string"
  },
  default: true,
  readOnly: {
    type: "boolean",
    default: false
  },
  examples: {
    type: "array",
    items: true
  },
  multipleOf: {
    type: "number",
    exclusiveMinimum: 0
  },
  maximum: {
    type: "number"
  },
  exclusiveMaximum: {
    type: "number"
  },
  minimum: {
    type: "number"
  },
  exclusiveMinimum: {
    type: "number"
  },
  maxLength: {
    $ref: "#/definitions/nonNegativeInteger"
  },
  minLength: {
    $ref: "#/definitions/nonNegativeIntegerDefault0"
  },
  pattern: {
    type: "string",
    format: "regex"
  },
  additionalItems: {
    $ref: "#"
  },
  items: {
    anyOf: [
      {
        $ref: "#"
      },
      {
        $ref: "#/definitions/schemaArray"
      }
    ],
    default: true
  },
  maxItems: {
    $ref: "#/definitions/nonNegativeInteger"
  },
  minItems: {
    $ref: "#/definitions/nonNegativeIntegerDefault0"
  },
  uniqueItems: {
    type: "boolean",
    default: false
  },
  contains: {
    $ref: "#"
  },
  maxProperties: {
    $ref: "#/definitions/nonNegativeInteger"
  },
  minProperties: {
    $ref: "#/definitions/nonNegativeIntegerDefault0"
  },
  required: {
    $ref: "#/definitions/stringArray"
  },
  additionalProperties: {
    $ref: "#"
  },
  definitions: {
    type: "object",
    additionalProperties: {
      $ref: "#"
    },
    default: {}
  },
  properties: {
    type: "object",
    additionalProperties: {
      $ref: "#"
    },
    default: {}
  },
  patternProperties: {
    type: "object",
    additionalProperties: {
      $ref: "#"
    },
    propertyNames: {
      format: "regex"
    },
    default: {}
  },
  dependencies: {
    type: "object",
    additionalProperties: {
      anyOf: [
        {
          $ref: "#"
        },
        {
          $ref: "#/definitions/stringArray"
        }
      ]
    }
  },
  propertyNames: {
    $ref: "#"
  },
  const: true,
  enum: {
    type: "array",
    items: true,
    minItems: 1,
    uniqueItems: true
  },
  type: {
    anyOf: [
      {
        $ref: "#/definitions/simpleTypes"
      },
      {
        type: "array",
        items: {
          $ref: "#/definitions/simpleTypes"
        },
        minItems: 1,
        uniqueItems: true
      }
    ]
  },
  format: {
    type: "string"
  },
  contentMediaType: {
    type: "string"
  },
  contentEncoding: {
    type: "string"
  },
  if: {
    $ref: "#"
  },
  then: {
    $ref: "#"
  },
  else: {
    $ref: "#"
  },
  allOf: {
    $ref: "#/definitions/schemaArray"
  },
  anyOf: {
    $ref: "#/definitions/schemaArray"
  },
  oneOf: {
    $ref: "#/definitions/schemaArray"
  },
  not: {
    $ref: "#"
  }
};
var jee = {
  $schema: Fnt,
  $id: $nt,
  title: Hnt,
  definitions: Unt,
  type: jnt,
  properties: Gnt,
  default: true
};
var RG = jee;
var znt = {
  $id: "https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",
  definitions: {
    simpleTypes: RG.definitions.simpleTypes
  },
  type: "object",
  dependencies: {
    schema: ["validate"],
    $data: ["validate"],
    statements: ["inline"],
    valid: {
      not: {
        required: ["macro"]
      }
    }
  },
  properties: {
    type: RG.properties.type,
    schema: {
      type: "boolean"
    },
    statements: {
      type: "boolean"
    },
    dependencies: {
      type: "array",
      items: {
        type: "string"
      }
    },
    metaSchema: {
      type: "object"
    },
    modifying: {
      type: "boolean"
    },
    valid: {
      type: "boolean"
    },
    $data: {
      type: "boolean"
    },
    async: {
      type: "boolean"
    },
    errors: {
      anyOf: [{
        type: "boolean"
      }, {
        const: "full"
      }]
    }
  }
};
var Vnt = /^[a-z_$][a-z0-9_$-]*$/i;
var Xnt = Bnt;
var Wnt = znt;
var Ynt = {
  add: qnt,
  get: Knt,
  remove: Znt,
  validate: oD
};
function qnt(e12, t) {
  var r = this.RULES;
  if (r.keywords[e12])
    throw new Error("Keyword " + e12 + " is already defined");
  if (!Vnt.test(e12))
    throw new Error("Keyword " + e12 + " is not a valid identifier");
  if (t) {
    this.validateKeyword(t, true);
    var n = t.type;
    if (Array.isArray(n))
      for (var i = 0; i < n.length; i++)
        a(e12, n[i], t);
    else
      a(e12, n, t);
    var o = t.metaSchema;
    o && (t.$data && this._opts.$data && (o = {
      anyOf: [o, {
        $ref: "https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"
      }]
    }), t.validateSchema = this.compile(o, true));
  }
  r.keywords[e12] = r.all[e12] = true;
  function a(s, l, u) {
    for (var c, f = 0; f < r.length; f++) {
      var h = r[f];
      if (h.type == l) {
        c = h;
        break;
      }
    }
    c || (c = {
      type: l,
      rules: []
    }, r.push(c));
    var d = {
      keyword: s,
      definition: u,
      custom: true,
      code: Xnt,
      implements: u.implements
    };
    c.rules.push(d), r.custom[s] = d;
  }
  return this;
}
function Knt(e12) {
  var t = this.RULES.custom[e12];
  return t ? t.definition : this.RULES.keywords[e12] || false;
}
function Znt(e12) {
  var t = this.RULES;
  delete t.keywords[e12], delete t.all[e12], delete t.custom[e12];
  for (var r = 0; r < t.length; r++)
    for (var n = t[r].rules, i = 0; i < n.length; i++)
      if (n[i].keyword == e12) {
        n.splice(i, 1);
        break;
      }
  return this;
}
function oD(e12, t) {
  oD.errors = null;
  var r = this._validateKeyword = this._validateKeyword || this.compile(Wnt, true);
  if (r(e12))
    return true;
  if (oD.errors = r.errors, t)
    throw new Error("custom keyword definition is invalid: " + this.errorsText(r.errors));
  return false;
}
var Qnt = "http://json-schema.org/draft-07/schema#";
var Jnt = "https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#";
var eit = "Meta-schema for $data reference (JSON Schema extension proposal)";
var tit = "object";
var rit = [
  "$data"
];
var nit = {
  $data: {
    type: "string",
    anyOf: [
      {
        format: "relative-json-pointer"
      },
      {
        format: "json-pointer"
      }
    ]
  }
};
var iit = false;
var oit = {
  $schema: Qnt,
  $id: Jnt,
  description: eit,
  type: tit,
  required: rit,
  properties: nit,
  additionalProperties: iit
};
var Gee = Xrt;
var su = GL;
var ait = Jrt;
var zee = Eee;
var sit = Oee;
var lit = ant;
var cit = Rnt;
var Vee = Nnt;
var Xee = kp;
var uit = qr;
qr.prototype.validate = fit;
qr.prototype.compile = dit;
qr.prototype.addSchema = pit;
qr.prototype.addMetaSchema = mit;
qr.prototype.validateSchema = git;
qr.prototype.getSchema = yit;
qr.prototype.removeSchema = bit;
qr.prototype.addFormat = Pit;
qr.prototype.errorsText = Iit;
qr.prototype._addSchema = Tit;
qr.prototype._compile = Eit;
qr.prototype.compileAsync = Lnt;
var zS = Ynt;
qr.prototype.addKeyword = zS.add;
qr.prototype.getKeyword = zS.get;
qr.prototype.removeKeyword = zS.remove;
qr.prototype.validateKeyword = zS.validate;
var Wee = zL;
qr.ValidationError = Wee.Validation;
qr.MissingRefError = Wee.MissingRef;
qr.$dataMetaSchema = Vee;
var DE = "http://json-schema.org/draft-07/schema";
var NG = ["removeAdditional", "useDefaults", "coerceTypes", "strictDefaults"];
var hit = ["/properties"];
function qr(e12) {
  if (!(this instanceof qr))
    return new qr(e12);
  e12 = this._opts = Xee.copy(e12) || {}, Nit(this), this._schemas = {}, this._refs = {}, this._fragments = {}, this._formats = lit(e12.format), this._cache = e12.cache || new ait(), this._loadingSchemas = {}, this._compilations = [], this.RULES = cit(), this._getId = Sit(e12), e12.loopRequired = e12.loopRequired || 1 / 0, e12.errorDataPath == "property" && (e12._errorDataPathProperty = true), e12.serialize === void 0 && (e12.serialize = sit), this._metaOpts = Rit(this), e12.formats && kit(this), e12.keywords && Dit(this), Cit(this), typeof e12.meta == "object" && this.addMetaSchema(e12.meta), e12.nullable && this.addKeyword("nullable", {
    metaSchema: {
      type: "boolean"
    }
  }), xit(this);
}
function fit(e12, t) {
  var r;
  if (typeof e12 == "string") {
    if (r = this.getSchema(e12), !r)
      throw new Error('no schema with key or ref "' + e12 + '"');
  } else {
    var n = this._addSchema(e12);
    r = n.validate || this._compile(n);
  }
  var i = r(t);
  return r.$async !== true && (this.errors = r.errors), i;
}
function dit(e12, t) {
  var r = this._addSchema(e12, void 0, t);
  return r.validate || this._compile(r);
}
function pit(e12, t, r, n) {
  if (Array.isArray(e12)) {
    for (var i = 0; i < e12.length; i++)
      this.addSchema(e12[i], void 0, r, n);
    return this;
  }
  var o = this._getId(e12);
  if (o !== void 0 && typeof o != "string")
    throw new Error("schema id must be string");
  return t = su.normalizeId(t || o), qee(this, t), this._schemas[t] = this._addSchema(e12, r, n, true), this;
}
function mit(e12, t, r) {
  return this.addSchema(e12, t, r, true), this;
}
function git(e12, t) {
  var r = e12.$schema;
  if (r !== void 0 && typeof r != "string")
    throw new Error("$schema must be a string");
  if (r = r || this._opts.defaultMeta || vit(this), !r)
    return this.logger.warn("meta-schema not available"), this.errors = null, true;
  var n = this.validate(r, e12);
  if (!n && t) {
    var i = "schema is invalid: " + this.errorsText();
    if (this._opts.validateSchema == "log")
      this.logger.error(i);
    else
      throw new Error(i);
  }
  return n;
}
function vit(e12) {
  var t = e12._opts.meta;
  return e12._opts.defaultMeta = typeof t == "object" ? e12._getId(t) || t : e12.getSchema(DE) ? DE : void 0, e12._opts.defaultMeta;
}
function yit(e12) {
  var t = Yee(this, e12);
  switch (typeof t) {
    case "object":
      return t.validate || this._compile(t);
    case "string":
      return this.getSchema(t);
    case "undefined":
      return _it(this, e12);
  }
}
function _it(e12, t) {
  var r = su.schema.call(e12, {
    schema: {}
  }, t);
  if (r) {
    var n = r.schema, i = r.root, o = r.baseId, a = Gee.call(e12, n, i, void 0, o);
    return e12._fragments[t] = new zee({
      ref: t,
      fragment: true,
      schema: n,
      root: i,
      baseId: o,
      validate: a
    }), a;
  }
}
function Yee(e12, t) {
  return t = su.normalizeId(t), e12._schemas[t] || e12._refs[t] || e12._fragments[t];
}
function bit(e12) {
  if (e12 instanceof RegExp)
    return Z_(this, this._schemas, e12), Z_(this, this._refs, e12), this;
  switch (typeof e12) {
    case "undefined":
      return Z_(this, this._schemas), Z_(this, this._refs), this._cache.clear(), this;
    case "string":
      var t = Yee(this, e12);
      return t && this._cache.del(t.cacheKey), delete this._schemas[e12], delete this._refs[e12], this;
    case "object":
      var r = this._opts.serialize, n = r ? r(e12) : e12;
      this._cache.del(n);
      var i = this._getId(e12);
      i && (i = su.normalizeId(i), delete this._schemas[i], delete this._refs[i]);
  }
  return this;
}
function Z_(e12, t, r) {
  for (var n in t) {
    var i = t[n];
    !i.meta && (!r || r.test(n)) && (e12._cache.del(i.cacheKey), delete t[n]);
  }
}
function Tit(e12, t, r, n) {
  if (typeof e12 != "object" && typeof e12 != "boolean")
    throw new Error("schema should be object or boolean");
  var i = this._opts.serialize, o = i ? i(e12) : e12, a = this._cache.get(o);
  if (a)
    return a;
  n = n || this._opts.addUsedSchema !== false;
  var s = su.normalizeId(this._getId(e12));
  s && n && qee(this, s);
  var l = this._opts.validateSchema !== false && !t, u;
  l && !(u = s && s == su.normalizeId(e12.$schema)) && this.validateSchema(e12, true);
  var c = su.ids.call(this, e12), f = new zee({
    id: s,
    schema: e12,
    localRefs: c,
    cacheKey: o,
    meta: r
  });
  return s[0] != "#" && n && (this._refs[s] = f), this._cache.put(o, f), l && u && this.validateSchema(e12, true), f;
}
function Eit(e12, t) {
  if (e12.compiling)
    return e12.validate = i, i.schema = e12.schema, i.errors = null, i.root = t || i, e12.schema.$async === true && (i.$async = true), i;
  e12.compiling = true;
  var r;
  e12.meta && (r = this._opts, this._opts = this._metaOpts);
  var n;
  try {
    n = Gee.call(this, e12.schema, t, e12.localRefs);
  } catch (o) {
    throw delete e12.validate, o;
  } finally {
    e12.compiling = false, e12.meta && (this._opts = r);
  }
  return e12.validate = n, e12.refs = n.refs, e12.refVal = n.refVal, e12.root = n.root, n;
  function i() {
    var o = e12.validate, a = o.apply(this, arguments);
    return i.errors = o.errors, a;
  }
}
function Sit(e12) {
  switch (e12.schemaId) {
    case "auto":
      return Oit;
    case "id":
      return wit;
    default:
      return Ait;
  }
}
function wit(e12) {
  return e12.$id && this.logger.warn("schema $id ignored", e12.$id), e12.id;
}
function Ait(e12) {
  return e12.id && this.logger.warn("schema id ignored", e12.id), e12.$id;
}
function Oit(e12) {
  if (e12.$id && e12.id && e12.$id != e12.id)
    throw new Error("schema $id is different from id");
  return e12.$id || e12.id;
}
function Iit(e12, t) {
  if (e12 = e12 || this.errors, !e12)
    return "No errors";
  t = t || {};
  for (var r = t.separator === void 0 ? ", " : t.separator, n = t.dataVar === void 0 ? "data" : t.dataVar, i = "", o = 0; o < e12.length; o++) {
    var a = e12[o];
    a && (i += n + a.dataPath + " " + a.message + r);
  }
  return i.slice(0, -r.length);
}
function Pit(e12, t) {
  return typeof t == "string" && (t = new RegExp(t)), this._formats[e12] = t, this;
}
function Cit(e12) {
  var t;
  if (e12._opts.$data && (t = oit, e12.addMetaSchema(t, t.$id, true)), e12._opts.meta !== false) {
    var r = jee;
    e12._opts.$data && (r = Vee(r, hit)), e12.addMetaSchema(r, DE, true), e12._refs["http://json-schema.org/schema"] = DE;
  }
}
function xit(e12) {
  var t = e12._opts.schemas;
  if (t)
    if (Array.isArray(t))
      e12.addSchema(t);
    else
      for (var r in t)
        e12.addSchema(t[r], r);
}
function kit(e12) {
  for (var t in e12._opts.formats) {
    var r = e12._opts.formats[t];
    e12.addFormat(t, r);
  }
}
function Dit(e12) {
  for (var t in e12._opts.keywords) {
    var r = e12._opts.keywords[t];
    e12.addKeyword(t, r);
  }
}
function qee(e12, t) {
  if (e12._schemas[t] || e12._refs[t])
    throw new Error('schema with key or id "' + t + '" already exists');
}
function Rit(e12) {
  for (var t = Xee.copy(e12._opts), r = 0; r < NG.length; r++)
    delete t[NG[r]];
  return t;
}
function Nit(e12) {
  var t = e12._opts.logger;
  if (t === false)
    e12.logger = {
      log: iI,
      warn: iI,
      error: iI
    };
  else {
    if (t === void 0 && (t = console), !(typeof t == "object" && t.log && t.warn && t.error))
      throw new Error("logger must implement log, warn and error methods");
    e12.logger = t;
  }
}
function iI() {
}
var Kee = Ui(uit);
var Mit = "http://json-schema.org/draft-07/schema#";
var Lit = "https://higlass.io/#viewconf";
var Bit = "HiGlass viewconf";
var Fit = "object";
var $it = false;
var Hit = [];
var Uit = {
  editable: {
    type: "boolean",
    default: true
  },
  viewEditable: {
    type: "boolean",
    default: true
  },
  tracksEditable: {
    type: "boolean",
    default: true
  },
  zoomFixed: {
    type: "boolean"
  },
  compactLayout: {
    type: "boolean"
  },
  exportViewUrl: {
    type: "string"
  },
  trackSourceServers: {
    type: "array",
    items: {
      type: "string"
    },
    minLength: 1
  },
  zoomLocks: {
    $ref: "#/definitions/locks/zoomLocks"
  },
  locationLocks: {
    $ref: "#/definitions/locks/locationLocks"
  },
  valueScaleLocks: {
    $ref: "#/definitions/locks/valueScaleLocks"
  },
  views: {
    type: "array",
    items: {
      $ref: "#/definitions/view"
    },
    minLength: 1
  },
  chromInfoPath: {
    type: "string"
  }
};
var jit = {
  data: {
    type: "object",
    properties: {
      url: {
        type: "string"
      },
      server: {
        type: "string"
      },
      filetype: {
        type: "string"
      },
      type: {
        type: "string"
      },
      tilesetInfo: {
        type: "object"
      },
      children: {
        type: "array"
      },
      tiles: {
        type: "object"
      }
    }
  },
  locks: {
    slug: {
      type: "string"
    },
    locksByViewUid: {
      type: "object",
      additionalProperties: false,
      patternProperties: {
        ".": {
          $ref: "#/definitions/locks/slug"
        }
      }
    },
    axisSpecificLocks: {
      additionalProperties: false,
      properties: {
        axis: {
          enum: [
            "x",
            "y"
          ],
          type: "string"
        },
        lock: {
          type: "string"
        }
      },
      required: [
        "lock",
        "axis"
      ],
      type: "object"
    },
    locationLocksByViewUid: {
      type: "object",
      additionalProperties: false,
      patternProperties: {
        ".": {
          anyOf: [
            {
              type: "string"
            },
            {
              additionalProperties: false,
              properties: {
                x: {
                  $ref: "#/definitions/locks/axisSpecificLocks"
                },
                y: {
                  $ref: "#/definitions/locks/axisSpecificLocks"
                }
              },
              type: "object"
            }
          ]
        }
      }
    },
    zoomLocks: {
      type: "object",
      additionalProperties: false,
      required: [],
      properties: {
        locksByViewUid: {
          $ref: "#/definitions/locks/locksByViewUid"
        },
        locksDict: {
          type: "object",
          additionalProperties: false,
          patternProperties: {
            ".": {
              type: "object",
              additionalProperties: false,
              properties: {
                uid: {
                  $ref: "#/definitions/locks/slug"
                }
              },
              patternProperties: {
                "^(?!uid).": {
                  type: "array",
                  minLength: 3,
                  maxLength: 3,
                  items: {
                    type: "number"
                  }
                }
              }
            }
          }
        }
      }
    },
    locationLocks: {
      type: "object",
      additionalProperties: false,
      required: [],
      properties: {
        locksByViewUid: {
          $ref: "#/definitions/locks/locationLocksByViewUid"
        },
        locksDict: {
          type: "object",
          additionalProperties: false,
          patternProperties: {
            ".": {
              type: "object",
              additionalProperties: false,
              properties: {
                uid: {
                  $ref: "#/definitions/locks/slug"
                }
              },
              patternProperties: {
                "^(?!uid).": {
                  type: "array",
                  minLength: 3,
                  maxLength: 3,
                  items: {
                    type: "number"
                  }
                }
              }
            }
          }
        }
      }
    },
    valueScaleLocks: {
      type: "object",
      additionalProperties: false,
      required: [
        "locksByViewUid",
        "locksDict"
      ],
      properties: {
        locksByViewUid: {
          $ref: "#/definitions/locks/locksByViewUid"
        },
        locksDict: {
          type: "object",
          additionalProperties: false,
          patternProperties: {
            ".": {
              type: "object",
              additionalProperties: false,
              properties: {
                uid: {
                  $ref: "#/definitions/locks/slug"
                },
                ignoreOffScreenValues: {
                  type: "boolean"
                }
              },
              patternProperties: {
                "^(?!(uid|ignoreOffScreenValues)).": {
                  type: "object",
                  additionalProperties: false,
                  required: [
                    "view",
                    "track"
                  ],
                  properties: {
                    view: {
                      type: "string"
                    },
                    track: {
                      $ref: "#/definitions/locks/slug"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  view: {
    type: "object",
    additionalProperties: false,
    required: [
      "tracks",
      "layout"
    ],
    properties: {
      autocompleteSource: {
        type: "string"
      },
      chromInfoPath: {
        type: "string"
      },
      genomePositionSearchBox: {
        $ref: "#/definitions/viewProperties/genomePositionSearchBox"
      },
      genomePositionSearchBoxVisible: {
        type: "boolean"
      },
      initialXDomain: {
        $ref: "#/definitions/viewProperties/domain"
      },
      initialYDomain: {
        $ref: "#/definitions/viewProperties/domain"
      },
      layout: {
        $ref: "#/definitions/viewProperties/layout"
      },
      overlays: {
        type: "array",
        items: {
          $ref: "#/definitions/viewProperties/overlay"
        }
      },
      selectionView: {
        type: "boolean"
      },
      tracks: {
        $ref: "#/definitions/viewProperties/tracks_object"
      },
      uid: {
        type: "string"
      },
      zoomFixed: {
        type: "boolean"
      },
      zoomLimits: {
        type: "array",
        minLength: 2,
        maxLength: 2,
        default: [
          1,
          null
        ]
      }
    }
  },
  viewProperties: {
    genomePositionSearchBox: {
      type: "object",
      title: "The Genome Position Search Box Schema",
      required: [
        "chromInfoServer",
        "chromInfoId"
      ],
      properties: {
        autocompleteServer: {
          type: "string",
          title: "The Autocomplete Server URL",
          default: "",
          examples: [
            "//higlass.io/api/v1"
          ],
          pattern: "^(.*)$"
        },
        autocompleteId: {
          type: "string",
          title: "The Autocomplete ID",
          default: "",
          examples: [
            "OHJakQICQD6gTD7skx4EWA"
          ],
          pattern: "^(.*)$"
        },
        chromInfoServer: {
          type: "string",
          title: "The Chrominfo Server URL",
          default: "",
          examples: [
            "//higlass.io/api/v1"
          ],
          pattern: "^(.*)$"
        },
        chromInfoId: {
          type: "string",
          title: "The Chromosome Info ID",
          default: "",
          examples: [
            "hg19"
          ],
          pattern: "^(.*)$"
        },
        visible: {
          type: "boolean",
          title: "The Visible Schema",
          default: false
        }
      }
    },
    overlay: {
      type: "object",
      additionalProperties: false,
      properties: {
        chromInfoPath: {
          type: "string"
        },
        includes: {
          type: "array"
        },
        options: {
          type: "object",
          properties: {
            extent: {
              type: "array"
            },
            minWidth: {
              type: "number"
            },
            fill: {
              type: "string"
            },
            fillOpacity: {
              type: "number"
            },
            stroke: {
              type: "string"
            },
            strokeOpacity: {
              type: "number"
            },
            strokeWidth: {
              type: "number"
            },
            strokePos: {
              type: [
                "string",
                "array"
              ]
            },
            outline: {
              type: "string"
            },
            outlineOpacity: {
              type: "number"
            },
            outlineWidth: {
              type: "number"
            },
            outlinePos: {
              type: [
                "string",
                "array"
              ]
            }
          }
        },
        type: {
          type: "string"
        },
        uid: {
          type: "string"
        }
      }
    },
    layout: {
      type: "object",
      additionalProperties: false,
      required: [
        "w",
        "h",
        "x",
        "y"
      ],
      properties: {
        x: {
          type: "integer",
          title: "The X Position",
          default: 0
        },
        y: {
          type: "integer",
          title: "The Y Position",
          default: 0
        },
        w: {
          type: "integer",
          title: "Width",
          default: 12
        },
        h: {
          type: "integer",
          title: "Height",
          default: 12
        },
        moved: {
          type: "boolean"
        },
        static: {
          type: "boolean"
        }
      }
    },
    tracks_object: {
      type: "object",
      additionalProperties: false,
      properties: {
        left: {
          $ref: "#/definitions/viewProperties/tracks_array"
        },
        right: {
          $ref: "#/definitions/viewProperties/tracks_array"
        },
        top: {
          $ref: "#/definitions/viewProperties/tracks_array"
        },
        bottom: {
          $ref: "#/definitions/viewProperties/tracks_array"
        },
        center: {
          $ref: "#/definitions/viewProperties/tracks_array"
        },
        whole: {
          $ref: "#/definitions/viewProperties/tracks_array"
        },
        gallery: {
          $ref: "#/definitions/viewProperties/tracks_array"
        }
      }
    },
    tracks_array: {
      type: "array",
      items: {
        oneOf: [
          {
            $ref: "#/definitions/tracks/enum_track"
          },
          {
            $ref: "#/definitions/tracks/combined_track"
          },
          {
            $ref: "#/definitions/tracks/heatmap_track"
          },
          {
            $ref: "#/definitions/tracks/independent_viewport_projection_track"
          }
        ]
      }
    },
    domain: {
      type: "array",
      items: {
        type: "number"
      },
      maxItems: 2,
      minItems: 2
    }
  },
  tracks: {
    heatmap_track: {
      type: "object",
      additionalProperties: false,
      required: [],
      properties: {
        uid: {
          type: "string"
        },
        type: {
          const: "heatmap"
        },
        data: {
          $ref: "#/definitions/data"
        },
        height: {
          type: "number"
        },
        options: {
          type: "object"
        },
        position: {
          type: "string"
        },
        server: {
          type: "string"
        },
        tilesetUid: {
          type: "string"
        },
        width: {
          type: "number"
        },
        transforms: {
          type: "array"
        }
      }
    },
    combined_track: {
      type: "object",
      additionalProperties: false,
      required: [
        "contents"
      ],
      properties: {
        contents: {
          $ref: "#/definitions/viewProperties/tracks_array"
        },
        height: {
          type: "number"
        },
        options: {},
        position: {
          type: "string"
        },
        type: {
          const: "combined"
        },
        uid: {
          type: "string"
        },
        width: {
          type: "number"
        }
      }
    },
    enum_track: {
      type: "object",
      additionalProperties: false,
      required: [
        "type"
      ],
      properties: {
        server: {
          type: "string"
        },
        tilesetUid: {
          type: "string"
        },
        data: {
          $ref: "#/definitions/data"
        },
        uid: {
          type: "string"
        },
        type: {
          enum: [
            "multivec",
            "1d-heatmap",
            "line",
            "point",
            "bar",
            "divergent-bar",
            "stacked-interval",
            "gene-annotations",
            "linear-2d-rectangle-domains",
            "chromosome-labels",
            "linear-heatmap",
            "1d-value-interval",
            "2d-annotations",
            "2d-chromosome-annotations",
            "2d-chromosome-grid",
            "2d-chromosome-labels",
            "2d-rectangle-domains",
            "2d-tiles",
            "arrowhead-domains",
            "bedlike",
            "cross-rule",
            "dummy",
            "horizontal-1d-annotations",
            "horizontal-1d-heatmap",
            "horizontal-1d-tiles",
            "horizontal-1d-value-interval",
            "horizontal-2d-rectangle-domains",
            "horizontal-bar",
            "horizontal-chromosome-grid",
            "horizontal-chromosome-labels",
            "horizontal-divergent-bar",
            "horizontal-gene-annotations",
            "horizontal-heatmap",
            "horizontal-line",
            "horizontal-multivec",
            "horizontal-point",
            "horizontal-rule",
            "horizontal-vector-heatmap",
            "image-tiles",
            "left-axis",
            "left-stacked-interval",
            "mapbox-tiles",
            "osm-2d-tile-ids",
            "osm-tiles",
            "raster-tiles",
            "simple-svg",
            "square-markers",
            "top-axis",
            "top-stacked-interval",
            "vertical-1d-annotations",
            "vertical-1d-heatmap",
            "vertical-1d-tiles",
            "vertical-1d-value-interval",
            "vertical-2d-rectangle-domains",
            "vertical-bar",
            "vertical-bedlike",
            "vertical-chromosome-grid",
            "vertical-chromosome-labels",
            "vertical-gene-annotations",
            "vertical-heatmap",
            "vertical-line",
            "vertical-multivec",
            "vertical-point",
            "vertical-rule",
            "vertical-vector-heatmap",
            "viewport-projection-center",
            "viewport-projection-horizontal",
            "viewport-projection-vertical"
          ]
        },
        chromInfoPath: {
          type: "string"
        },
        fromViewUid: {
          type: "string"
        },
        height: {
          type: "number"
        },
        options: {
          type: "object"
        },
        width: {
          type: "number"
        },
        x: {
          type: "number"
        },
        y: {
          type: "number"
        }
      }
    },
    independent_viewport_projection_track: {
      type: "object",
      additionalProperties: false,
      properties: {
        uid: {
          type: "string"
        },
        type: {
          enum: [
            "viewport-projection-horizontal",
            "viewport-projection-vertical",
            "viewport-projection-center"
          ]
        },
        fromViewUid: {
          type: "null"
        },
        projectionXDomain: {
          $ref: "#/definitions/viewProperties/domain"
        },
        projectionYDomain: {
          $ref: "#/definitions/viewProperties/domain"
        },
        options: {
          type: "object"
        },
        transforms: {
          type: "array"
        },
        width: {
          type: "number"
        },
        x: {
          type: "number"
        },
        y: {
          type: "number"
        }
      }
    }
  }
};
var Zee = {
  $schema: Mit,
  $id: Lit,
  title: Bit,
  type: Fit,
  additionalProperties: $it,
  required: Hit,
  properties: Uit,
  definitions: jit
};
var Git = "_title_1hlm6_70";
var zit = "_Warning_1hlm6_76";
var Vit = "_Success_1hlm6_79";
var kc = {
  "view-config-editor-header": "_view-config-editor-header_1hlm6_1",
  "view-config-editor": "_view-config-editor_1hlm6_1",
  "view-config-log": "_view-config-log_1hlm6_34",
  "view-config-log-header": "_view-config-log-header_1hlm6_46",
  "view-config-log-msg": "_view-config-log-msg_1hlm6_60",
  title: Git,
  Warning: zit,
  Success: Vit,
  Error: "_Error_1hlm6_82"
};
function Xit(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function MG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, Yit(n.key), n);
  }
}
function Wit(e12, t, r) {
  return t && MG(e12.prototype, t), r && MG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function Yit(e12) {
  var t = qit(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function qit(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function Kit(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && aD(e12, t);
}
function aD(e12, t) {
  return aD = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, aD(e12, t);
}
function Zit(e12) {
  var t = Jit();
  return function() {
    var n = RE(e12), i;
    if (t) {
      var o = RE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return Qit(this, i);
  };
}
function Qit(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Tl(e12);
}
function Tl(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function Jit() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function RE(e12) {
  return RE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, RE(e12);
}
var Qee = function(e12) {
  Kit(r, e12);
  var t = Zit(r);
  function r(n) {
    var i;
    return Xit(this, r), i = t.call(this, n), i.state = {
      code: n.viewConfig,
      hide: false,
      showLog: false,
      logMsgs: i.getLogMsgs(n.viewConfig)
    }, i.handleChangeBound = i.handleChange.bind(Tl(i)), i.handleKeyDownBound = i.handleKeyDown.bind(Tl(i)), i.handleKeyUpBound = i.handleKeyUp.bind(Tl(i)), i.handleSubmitBound = i.handleSubmit.bind(Tl(i)), i.hideBound = i.hide.bind(Tl(i)), i.showBound = i.show.bind(Tl(i)), i.toggleLogBound = i.toggleLog.bind(Tl(i)), i.pubSubs = [], i.pubSubs.push(i.props.pubSub.subscribe("keydown", i.handleKeyDownBound)), i.pubSubs.push(i.props.pubSub.subscribe("keyup", i.handleKeyUpBound)), i;
  }
  return Wit(r, [{
    key: "componentDidMount",
    value: async function() {
      this.editor && (this.editor._input.focus(), this.editor._input.setSelectionRange(0, 0), await QR(0), this.editorWrap && (this.editorWrap.scrollTop = 0));
    }
  }, {
    key: "componentWillUnmount",
    value: function() {
      this.pubSubs.forEach((i) => this.props.pubSub.unsubscribe(i)), this.pubSubs = [];
    }
  }, {
    key: "handleChange",
    value: function(i) {
      const o = this.getLogMsgs(i);
      this.setState({
        code: i,
        logMsgs: o
      });
    }
  }, {
    key: "handleKeyDown",
    value: function(i) {
      i.key === "s" && (i.ctrlKey || i.metaKey) && (i.preventDefault(), this.props.onChange(this.state.code)), i.key === "Enter" && (i.ctrlKey || i.metaKey) && (i.preventDefault(), this.props.onChange(this.state.code), this.props.modal.close());
    }
  }, {
    key: "handleKeyUp",
    value: function(i) {
      this.setState({
        hide: false
      }), i.key === "Escape" && (i.preventDefault(), this.props.modal.close(), this.props.onCancel());
    }
  }, {
    key: "handleSubmit",
    value: function(i) {
      i && i.preventDefault(), this.props.onSave(this.state.code);
    }
  }, {
    key: "getLogMsgs",
    value: function(i) {
      const o = [];
      let a;
      try {
        a = JSON.parse(i);
      } catch (u) {
        return console.warn(u), o.push({
          type: "Error",
          msg: u.toString()
        }), o;
      }
      const s = new Kee().compile(Zee);
      return s(a) || (console.warn("Invalid viewconf"), o.push({
        type: "Warning",
        msg: "Invalid viewconf"
      })), s.errors && (console.warn(JSON.stringify(s.errors, null, 2)), s.errors.forEach((u) => {
        o.push({
          type: "Warning",
          msg: JSON.stringify(u, null, 2)
        });
      })), o.length === 0 && o.push({
        type: "Success",
        msg: "No error or warnings"
      }), o;
    }
  }, {
    key: "hide",
    value: function() {
      this.setState({
        hide: true
      });
    }
  }, {
    key: "show",
    value: function() {
      this.setState({
        hide: false
      });
    }
  }, {
    key: "hideLog",
    value: function() {
      this.setState({
        showLog: false
      });
    }
  }, {
    key: "showLog",
    value: function() {
      this.setState({
        showLog: true
      });
    }
  }, {
    key: "toggleLog",
    value: function() {
      this.state.showLog ? this.hideLog() : this.showLog();
    }
  }, {
    key: "render",
    value: function() {
      const i = this.state.logMsgs.map((o, a) => {
        const s = `${a}-${o.msg}`;
        return import_react.default.createElement("tr", {
          key: s
        }, import_react.default.createElement("td", {
          className: nr(kc.title, kc[o.type])
        }, `[${a}] ${o.type}`), import_react.default.createElement("td", null, import_react.default.createElement("pre", null, o.msg)));
      });
      return import_react.default.createElement(Sy, {
        cancelShortcut: "ESC",
        cancelTitle: "Discard Changes",
        hide: this.state.hide,
        maxHeight: true,
        okayShortcut: "⌘+Enter",
        okayTitle: "Save and Close",
        onCancel: this.props.onCancel,
        onOkay: this.handleSubmitBound,
        title: "Edit View Config"
      }, import_react.default.createElement(import_react.default.Fragment, null, import_react.default.createElement("header", {
        className: kc["view-config-editor-header"]
      }, import_react.default.createElement(Ds, {
        onBlur: this.showBound,
        onMouseDown: this.hideBound,
        onMouseOut: this.showBound,
        onMouseUp: this.showBound
      }, "Hide While Mousedown"), import_react.default.createElement(Ds, {
        onClick: () => {
          this.props.onChange(this.state.code);
        },
        shortcut: "⌘+S"
      }, "Save")), import_react.default.createElement("div", {
        ref: (o) => {
          this.editorWrap = o;
        },
        className: kc["view-config-editor"]
      }, import_react.default.createElement(hrt, {
        ref: (o) => {
          this.editor = o;
        },
        highlight: (o) => EG.highlight(o, EG.languages.json),
        onValueChange: this.handleChangeBound,
        padding: 10,
        style: {
          fontFamily: '"Fira code", "Fira Mono", monospace',
          fontSize: "inherit"
        },
        value: this.state.code
      })), import_react.default.createElement("div", {
        className: kc["view-config-log"],
        style: {
          height: this.state.showLog ? "50%" : "30px"
        }
      }, import_react.default.createElement("div", {
        className: kc["view-config-log-header"],
        onClick: () => this.toggleLogBound()
      }, `Log Messages (${this.state.logMsgs.filter((o) => o.type !== "Success").length})`), import_react.default.createElement("div", {
        className: kc["view-config-log-msg"],
        style: {
          padding: this.state.showLog ? "10px" : 0
        }
      }, import_react.default.createElement("table", null, import_react.default.createElement("tbody", null, i))))));
    }
  }]), r;
}(import_react.default.Component);
Qee.propTypes = {
  modal: L.object.isRequired,
  onCancel: L.func.isRequired,
  onChange: L.func.isRequired,
  onSave: L.func.isRequired,
  pubSub: L.object.isRequired,
  viewConfig: L.string.isRequired
};
var eot = yp(kS(Qee));
function tot(e12, t, r, n) {
  const i = e12.append("symbol").attr("id", t).attr("viewBox", n);
  r.forEach((o) => i.append("path").attr("d", o).attr("fill", "currentColor"));
}
var rot = (e12) => {
  e12.setState(e12.state);
};
var not = function(t, r) {
  const n = t;
  let i = [];
  const o = g1(), a = () => {
    i.forEach((s) => r.unsubscribe(s)), i = [];
  };
  return {
    destroy: a,
    publish: o.publish,
    // Stack: mapping of callback names to arrays of callbacks, useful
    // to determine how many callbacks exist for a particular event.
    stack: o.stack,
    // Public API
    public: {
      /**
       * HiGlass version
       * @return {string} Version number
       */
      get version() {
        return aJ;
      },
      /**
       * Enable or disable broadcasting the mouse position globally
       * @param {boolean} isBroadcastMousePositionGlobally - If `true` the mouse
       *   position will be broadcasted globally.
       */
      setBroadcastMousePositionGlobally(s = false) {
        n.setBroadcastMousePositionGlobally(s);
      },
      /**
       * Enable or disable showing the global mouse position
       * @param {boolean} isShowGlobalMousePosition - If `true` the global mouse
       *   position will be shown for any track that has
       *   `options.showMousePosition = true`.
       */
      setShowGlobalMousePosition(s = false) {
        n.setShowGlobalMousePosition(s);
      },
      /**
       * Convenience function to enable / disable the global mouse position
       * @description This function is equivalent to calling
       *   `setBroadcastMousePositionGlobally()` and
       *   `setShowGlobalMousePosition()`.
       * @param {boolean} isGlobalMousePosition - If `true` the global mouse
       *   position will be shown and broadcasted.
       */
      setGlobalMousePosition(s = false) {
        n.setBroadcastMousePositionGlobally(s), n.setShowGlobalMousePosition(s);
      },
      /**
       * Set an auth header to be included with all tile requests.
       *
       * @param {string} newHeader The contensts of the header to be included.
       * Example: ``hgapi.setAuthHeader('JWT xyz')``
       */
      setAuthHeader(s) {
        ov(s), n.reload();
      },
      /**
       * Get the currently set auth header
       */
      getAuthHeader() {
        return ov();
      },
      /**
       * Get a reference to the React HiGlassComponent
       *
       * @returns {HiGlassComponent}
       */
      getComponent() {
        return n;
      },
      /**
       * Reload all or specific tiles for viewId/trackId
       *
       * @param {array} target Should be an array of type
       *                       ({ viewId: string, trackId: string } | string).
       *                       If the array is just strings, it's interpreted
       *                       as a list of views whose tracks to reload.
       */
      reload(s) {
        let l;
        s ? l = s.flatMap((u) => typeof u == "string" ? n.iterateOverTracksInView(u) : u) : l = n.iterateOverTracks();
        for (const {
          viewId: u,
          trackId: c
        } of l) {
          const f = n.getTrackObject(u, c);
          for (const h of f.childTracks || [f])
            h.fetchedTiles && (h.removeTiles(Object.keys(h.fetchedTiles)), h.fetching.clear(), h.refreshTiles()), h.rerender(h.options, true);
        }
      },
      /**
       * Destroy HiGlass instance
       */
      destroy() {
        a(), import_react_dom.default.unmountComponentAtNode(n.topDiv.parentNode);
      },
      /**
       * Force integer range selections.
       *
       * @example
       *
       * hgv.activateTool('select'); // Activate select tool
       * hgv.setRangeSelectionToFloat(); // Allow float range selections
       */
      setRangeSelectionToInt() {
        n.setState({
          rangeSelectionToInt: true
        });
      },
      /**
       * Force float range selections.
       *
       * @example
       *
       * hgv.activateTool('select'); // Activate select tool
       * hgv.setRangeSelectionToFloat(); // Allow float range selections
       */
      setRangeSelectionToFloat() {
        n.setState({
          rangeSelectionToInt: false
        });
      },
      /**
       *
       *  The following enpoint restricts the size of range selection equally for 1D or
       *  2D tracks to a certain length (specified in absolute coordinates).
       *
       * @param {Number} [minSize = 0]  Minimum range selection.
       *   ``undefined`` unsets the value.
       * @param {Number} [maxSize = Infinity] Maximum range selection.
       *   ``undefined`` unsets the value.
       * @example
       *
       * hgv.activateTool('select'); // Activate select tool
       * hgv.setRangeSelection1dSize(5000, 10000); // Force selections to be between 5 and 10 Kb
       */
      setRangeSelection1dSize(s = 0, l = 1 / 0) {
        n.setState({
          rangeSelection1dSize: [s, l]
        });
      },
      /**
       * Set a new view config to define the layout and data
       * of this component
       *
       * @param {obj} newViewConfig A JSON object that defines
       *    the state of the HiGlassComponent
       * @param {boolean} resolveImmediately If true, the returned promise resolves immediately
       *    even if not all data has loaded. This should be set to true, if the new viewconf does not request new data. Default: false.
       * @example
       *
       * const p = hgv.setViewConfig(newViewConfig);
       * p.then(() => {
       *   // the initial set of tiles has been loaded
       * });
       *
       * @return {Promise} dataLoaded A promise that resolves when
       *   all of the data for this viewconfig is loaded. If `resolveImmediately` is set to true,
       * the promise resolves without waiting for the data to be loaded.
       */
      setViewConfig(s, l = false) {
        const u = n.processViewConfig(s);
        return new Promise((f) => {
          this.requestsInFlight = 0, i.push(r.subscribe("requestSent", () => {
            this.requestsInFlight += 1;
          })), i.push(r.subscribe("requestReceived", () => {
            this.requestsInFlight -= 1, this.requestsInFlight === 0 && f();
          })), n.setState({
            viewConfig: s,
            views: u
          }, () => {
            l && f();
          });
        });
      },
      /**
       * Retrieve the visible viewconf.
       *
       * @returns (Object) A JSON object describing the visible views
       */
      getViewConfig() {
        return n.getViewsAsJson();
      },
      /**
       * Validate a viewconf.
       *
       * @returns (Boolean) A JSON object describing the visible views
       */
      validateViewConfig(s, {
        verbose: l = false
      } = {}) {
        const u = new Kee().compile(Zee), c = u(s);
        return l && u.errors && console.warn(JSON.stringify(u.errors, null, 2)), c;
      },
      /**
       * Get the minimum and maximum visible values for a given track.
       *
       * @param {string} viewId The id of the view containing the track.
       * @param {string} trackId The id of the track to query.
       * @param {bool} [ignoreOffScreenValues=false] If ``true`` only truly visible values
       *  are considered. Otherwise the values of visible tiles are used. Not that
       *  considering only the truly visible
       *  values results in a roughly 10x slowdown (from 0.1 to 1 millisecond).
       * @param {bool} [ignoreFixedScale=false]  If ``true`` potentially fixed scaled values are
       *  ignored. I.e., if the
       *  absolute range is ``[1, 18]`` but you have fixed the output range to
       *  ``[4, 5]`` you would normally retrieve ``[4, 5]``. Having this option set to
       *  ``true`` retrieves the absolute ``[1, 18]`` range.
       * @example
       * const [minVal, maxVal] = hgv.getMinMaxValue('myView', 'myTrack');
       * @returns {Array} The minimum and maximum value
       */
      getMinMaxValue(s, l, u = false, c = false) {
        return n.getMinMaxValue(s, l, u, c);
      },
      /**
       * Generate a sharable link to the current view config. The `url` parameter should contain
       * the API endpoint used to export the view link (e.g. 'http://localhost:8989/api/v1/viewconfs').
       * If it is not provided, the value is taken from the `exportViewUrl` value of the viewconf.
       *
       * @param {string}  url  Custom URL that should point to a higlass server's
       *   view config endpoint, i.e.,
       *   `http://my-higlass-server.com/api/v1/viewconfs/`.
       * @returns {Object}  Promise resolving to the link ID and URL.
       * @example
       * hgv.shareViewConfigAsLink('http://localhost:8989/api/v1/viewconfs')
       * .then((sharedViewConfig) => {
       *   const { id, url } = sharedViewConfig;
       *   console.log(`Shared view config (ID: ${id}) is available at ${url}`)
       * })
       * .catch((err) => { console.error('Something did not work. Sorry', err); })
       */
      shareViewConfigAsLink(s) {
        return n.handleExportViewsAsLink(s, true);
      },
      /**
       * Show overlays where this track can be positioned. This
       * function will take a track definition and display red,
       * blue or green overlays highlighting where the track can
       * be placed on the view. Blue indicates that a track can
       * be placed in that region, red that it can't and green that
       * the mouse is currently over the given region.
       *
       * @param {obj} track { server, tilesetUid, datatype }
       *
       * @example
       *
       *  let lineTrack = {
       *   "server": "http://higlass.io/api/v1",
       *   "tilesetUid": "WtBJUYawQzS9M2WVIIHnlA",
       *   "datatype": "multivec",
       *   "defaultTracks": ['horizontal-stacked-bar']
       * }
       *
       * window.hgApi.showAvailableTrackPositions(lineTrack);
       */
      showAvailableTrackPositions(s) {
        n.setState({
          draggingHappening: s
        });
      },
      /**
       * Hide the overlay showing where a track can be positioned
       */
      hideAvailableTrackPositions() {
        n.setState({
          draggingHappening: null
        });
      },
      /**
       * Show the track chooser which highlights tracks
       * when the mouse is over them.
       *
       * @param  {Function} callback (toViewUid, toTrackUid) =>: A function
       *                             to be called when a track is chosen.
       * @return {[type]}            [description]
       */
      showTrackChooser(s) {
        n.setState({
          chooseTrackHandler: (...l) => {
            n.setState({
              chooseTrackHandler: null
            }), s(...l);
          }
        });
      },
      /**
       * Hide the track chooser.
       */
      hideTrackChooser() {
        this.setState({
          chooseTrackHandler: null
        });
      },
      /**
       *
       * When comparing different 1D tracks it can be desirable to fix their y or value
       * scale
       *
       * @param {string} [viewId=''] The view identifier. If you only have one view this
       * parameter can be omitted.
       *
       * @param {string} [trackId=null] The track identifier.
       * @param [Number] [minValue=null] Minimum value used for scaling the track.
       * @param [Number] [maxValue=null] Maximum value used for scaling the track.
       *
       * @example
       *
       * hgv.setTrackValueScale(myView, myTrack, 0, 100); // Sets the scaling to [0, 100]
       * hgv.setTrackValueScale(myView, myTrack); // Unsets the fixed scaling, i.e., enables
       * dynamic scaling again.
       */
      setTrackValueScaleLimits(s, l, u, c) {
        n.setTrackValueScaleLimits(s, l, u, c);
      },
      /**
       * Choose a theme.
       * @deprecated since version 1.6.6. Use `setTheme()` instead.
       */
      setDarkTheme(s) {
        console.warn('`setDarkTheme(true)` is deprecated. Please use `setTheme("dark")`.');
        const l = s ? "dark" : "light";
        n.setTheme(l);
      },
      /**
       * Choose a theme.
       */
      setTheme(s) {
        console.warn("Please note that theming is still in beta!"), n.setTheme(s);
      },
      /**
       * Change the current view port to a certain data location.
       * When ``animateTime`` is greater than 0, animate the transition.
        * If working with genomic data, a chromosome info file will need to be used in
       * order to calculate "data" coordinates from chromosome coordinates. "Data"
       * coordinates are simply the coordinates as if the chromosomes were placed next
       * to each other.
       *
       * @param {string} viewUid The identifier of the view to zoom
       * @param {Number} start1Abs The x start position
       * @param {Number} end1Abs The x end position
       * @param {Number} start2Abs (optional) The y start position. If not specified
       *    start1Abs will be used.
       * @param {Number} end2Abs (optional) The y end position. If not specified
       *    end1Abs will be used
       * @param {Number} animateTime The time to spend zooming to the specified location
       * @example
       *    // Absolute coordinates
       * hgApi.zoomTo('view1', 1000000, 1100000, 2000000, 2100000, 500);
       * // Chromosomal coordinates
       * hglib
       *   // Pass in the URL of your chrom sizes
       *   .ChromosomeInfo('//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv')
       *   // Now we can use the chromInfo object to convert
       *   .then((chromInfo) => {
       *     // Go to PTEN
       *     hgApi.zoomTo(
       *       viewConfig.views[0].uid,
       *       chromInfo.chrToAbs(['chr10', 89596071]),
       *       chromInfo.chrToAbs(['chr10', 89758810]),
       *       chromInfo.chrToAbs(['chr10', 89596071]),
       *       chromInfo.chrToAbs(['chr10', 89758810]),
       *       2500  // Animation time
       *     );
       *   });
       *   // Just in case, let us catch errors
       *   .catch(error => console.error('Oh boy...', error))
       * // Using getLocation() for coordinates
       * let firstViewLoc = hgApi.getLocation(oldViewUid);
       * hgApi.zoomTo(
       *  viewUid,
       *  firstViewLoc["xDomain"][0],
       *  firstViewLoc["xDomain"][1],
       *  firstViewLoc["yDomain"][0],
       *  firstViewLoc["yDomain"][1]
       * );
       */
      zoomTo(s, l, u, c, f, h = 0) {
        n.zoomTo(s, l, u, c, f, h);
      },
      /**
       * Change the current view port to a location near the gene of interest.
       * When ``animateTime`` is greater than 0, animate the transition.
       *
       * @param {string} viewUid The identifier of the view to zoom
       * @param {string} geneName The name of gene symbol to search
       * @param {string} padding The padding (base pairs) around a given gene for the navigation
       * @param {Number} animateTime The time to spend zooming to the specified location
       * @example
       * // Zoom to the location near 'MYC'
       * hgApi.zoomToGene('view1', 'MYC', 100, 2000);
       */
      zoomToGene(s, l, u = 0, c = 0) {
        n.zoomToGene(s, l, u, c);
      },
      /**
       * Get the list of genes of top match for a given keyword.
       *
       * @param {string} viewUid The id of the view containing the track.
       * @param {string} keyword The substring of gene name to search.
       * @param {function} callback A function to be called upon gene list search.
       * @example
       * hgv.suggestGene('view1', 'MY', (suggestions) => {
       *    if(suggestions && suggestions.length > 0) {
       *      console.log('Gene suggested', suggestions[0].geneName);
       *      console.log('Chromosome', suggestions[0].chr);
       *      console.log('Start position', suggestions[0].txStart);
       *      console.log('End position', suggestions[0].txEnd);
       *    }
       * });
       */
      suggestGene(s, l, u) {
        return n.suggestGene(s, l, u);
      },
      /**
       * Zoom so that the entirety of all the datasets in a view
       * are visible.
       * The passed in ``viewUid`` should refer to a view which is present. If it
       * doesn't, an exception will be thrown. Note that if this function is invoked
       * directly after a HiGlass component is created, the information about the
       * visible tilesets will not have been retrieved from the server and
       * ``zoomToDataExtent`` will not work as expected. To ensure that the
       * visible data has been loaded from the server, use the ``setViewConfig``
       * function and place ``zoomToDataExtent`` in the promise resolution.
       *
       * @param {string} viewUid The view uid of the view to zoom
       * @example
       *
       * const p = hgv.setViewConfig(newViewConfig);
       * p.then(() => {
       *     hgv.zoomToDataExtent('viewUid');
       * });
       */
      zoomToDataExtent(s) {
        n.handleZoomToData(s);
      },
      /**
       * The endpoint allows you to reset the viewport to the initially defined X and Y
       * domains of your view config.
       *
       * @param {string} viewId The view identifier. If you have only one view you can
       * omit this parameter.
       *
       * @example
       *
       * hgv.resetViewport(); // Resets the first view
       */
      resetViewport(s) {
        n.resetViewport(s);
      },
      /**
       * Some tools needs conflicting mouse events such as mousedown or mousemove. To
       * avoid complicated triggers for certain actions HiGlass supports different mouse
       * tools for different interactions. The default mouse tool enables pan&zoom. The
       * only other mouse tool available right now is ``select``, which lets you brush
       * on to a track to select a range for annotating regions.
       *
       * @param {string} [mouseTool='']  Select a mouse tool to use. Currently there
       * only 'default' and 'select' are available.
       *
       * @example
       *
       * hgv.activateTool('select'); // Select tool is active
       * hgv.activateTool(); // Default pan&zoom tool is active
       */
      activateTool(s) {
        switch (s) {
          case "select":
            n.setMouseTool(To);
            break;
          default:
            n.setMouseTool(x0);
            break;
        }
      },
      /**
       * Get a Promise which returns a Blob containing a PNG for the current view.
       * It's possible to get string of the PNG bytes from that:
       *
       * @example
       * hgApi.exportAsPngBlobPromise().then(function(blob) {
       *   var reader = new FileReader();
       *   reader.addEventListener("loadend", function() {
       *     var array = new Uint8Array(reader.result.slice(0,8));
       *     console.log(array);
       *     console.log(new TextDecoder("iso-8859-2").decode(array));
       *   });
       *   reader.readAsArrayBuffer(blob);
       * });
       *
       * @returns {promise}
       */
      exportAsPngBlobPromise() {
        return n.createPNGBlobPromise();
      },
      /**
       * Get the current view as an SVG. Relies on all the tracks implementing
       * their respective exportAsSVG methods.
       *
       * @returns {string} An SVG string of the current view.
       */
      exportAsSvg() {
        return n.createSVGString();
      },
      /**
       * Export the current view as a Viewconf.
       *
       * @returns {string} A stringified version of the current viewconf
       */
      exportAsViewConfString() {
        return n.getViewsAsString();
      },
      /**
       * Get the current range selection
       *
       * @return {Array} The current range selection
       */
      getRangeSelection() {
        return n.rangeSelection;
      },
      /**
       * Get the current location for a view.
       *
       * @param {string} [viewId=null] The id of the view to get the location for
       * @returns {obj} A an object containing four arrays representing the domains and ranges of
       *  the x and y scales of the view.
       * @example
       *
       * const {xDomain, yDomain, xRange, yRange} = hgv.getLocation('viewId');
       */
      getLocation(s) {
        const l = s ? n.xScales[s] && n.yScales[s] && s : Object.values(n.tiledPlots)[0] && Object.values(n.tiledPlots)[0].props.uid;
        return l ? {
          xDomain: n.xScales[l].domain(),
          yDomain: n.yScales[l].domain(),
          xRange: n.xScales[l].range(),
          yRange: n.yScales[l].range()
        } : "Please provide a valid view UUID sweetheart 😙";
      },
      /**
       * Return the track's javascript object. This is useful for subscribing to
       * data events (dataChanged)
       *
       * @param {string} viewId The id of the view containing the track
       * @param {string} trackId The id of the track within the view
       * @return {obj} The HiGlass track object for this track
       */
      getTrackObject(s, l) {
        let u = s, c = l;
        return l || (u = Object.values(n.state.views)[0].uid, c = s), rN(n, u, c);
      },
      /**
       * Set or get an option.
       * @param   {string}  key  The name of the option you want get or set
       * @param   {*}  value  If not `undefined`, `key` will be set to `value`
       * @return  {obj}  When `value` is `undefined` the current value of
       *   `key` will be returned.
       */
      option(s, l) {
        if (typeof l > "u")
          return n.props.options[s];
        switch (s) {
          case "sizeMode":
            n.props.options[s] = l, rot(n);
            break;
          default:
            console.warn(`This option "${s}" is either unknown or not settable.`);
        }
      },
      /**
       * Cancel a subscription.
       *
       * @param {string} event One of the available events
       * @param {function} listener The function to unsubscribe
       * @param {string} viewId The viewId to unsubscribe it from (not strictly necessary)
       * The variables used in the following examples are coming from the examples of ``on()``.
       *
       * @example
       *
       * hgv.off('location', listener, 'viewId1');
       * hgv.off('rangeSelection', rangeListener);
       * hgv.off('viewConfig', viewConfigListener);
       * hgv.off('mouseMoveZoom', mmz);
       * hgv.off('wheel', wheelListener);
       * hgv.off('createSVG');
       * hgv.off('click');
       * hgv.off('geneSearch', geneSearchListener);
       */
      off(s, l, u) {
        const c = typeof l == "object" ? l.callback : l;
        switch (s) {
          case "click":
            o.unsubscribe("click", c);
            break;
          case "cursorLocation":
            o.unsubscribe("cursorLocation", c);
            break;
          case "location":
            n.offLocationChange(u, l);
            break;
          case "mouseMoveZoom":
            o.unsubscribe("mouseMoveZoom", c);
            break;
          case "wheel":
            o.unsubscribe("wheel", c);
            break;
          case "rangeSelection":
            o.unsubscribe("rangeSelection", c);
            break;
          case "viewConfig":
            n.offViewChange(l);
            break;
          case "createSVG":
            n.offPostCreateSVG();
            break;
          case "geneSearch":
            o.unsubscribe("geneSearch", c);
            break;
        }
      },
      /**
       * Subscribe to events
       *
       *
       * HiGlass exposes the following event, which one can subscribe to via this method:
       *
       * - location
       * - rangeSelection
       * - viewConfig
       * - mouseMoveZoom
       *
       * **Event types**
       *
       * ``click``: Returns a list of objects for each track that is below the click event.
       *
       * .. code-block:: javascript
       *
       *     [
       *      {
       *       event: {
       *          type: 'annotation',
       *          event: { ... },
       *          payload: [230000000, 561000000]
       *        },
       *       trackType: '1d-annotation',
       *       trackUid: 'xyz',
       *       viewUid: 'abc'
       *      }
       *     ]
       *
       * ``cursorLocation:`` Returns an object describing the location under the cursor
       *
       * .. code-block:: javascript
       *
       *    {
       *        absX: 100,
       *        absY: 200,
       *        relX: 50,
       *        relY: 150,
       *        relTrackX: 50,
       *        relTrackY: 100,
       *        dataX: 10000,
       *        dataY: 123456,
       *        isFrom2dTrack: false,
       *        isFromVerticalTrack: false,
       *    }
       *
       * ``location:`` Returns an object describing the visible region
       *
       * .. code-block:: javascript
       *
       *    {
       *        xDomain: [1347750580.3773856, 1948723324.787681],
       *        xRange: [0, 346],
       *        yDomain: [1856870481.5391564, 2407472678.0075483],
       *        yRange: [0, 317]
       *    }
       *
       * ``rangeSelection:`` Returns a BED- (1D) or BEDPE (1d) array of the selected data and
       * genomic range (if chrom-sizes are available)
       *
       * .. code-block:: javascript
       *
       *  // Global output
       *  {
       *    dataRange: [...]
       *    genomicRange: [...]
       *  }
       *
       *  // 1D data range
       *  [[1218210862, 1528541001], null]
       *
       *  // 2D data range
       *  [[1218210862, 1528541001], [1218210862, 1528541001]]
       *
       *  // 1D or BED-like array
       *  [["chr1", 249200621, "chrM", 50000], null]
       *
       *  // 2D or BEDPE-like array
       *  [["chr1", 249200621, "chr2", 50000], ["chr3", 197972430, "chr4", 50000]]
       *
       * ``viewConfig:`` Returns the current view config (as a string).
       *  This event is published upon interactions including:
       *  - Saving in the view config editor modal.
       *  - Panning and zooming in views, which update view object ``initialXDomain`` and ``initialYDomain`` values.
       *  - Brushing in ``viewport-projection-`` tracks containing null ``fromViewUid`` fields, which update track object ``projectionXDomain`` and ``projectionYDomain`` values.
       *
       * ``mouseMoveZoom:`` Returns the location and data at the mouse cursor's
       * screen location.
       *
       * .. code-block:: javascript
       *
       *  {
       *    // Float value of the hovering track
       *    data,
       *    // Absolute x screen position of the cursor in px
       *    absX,
       *    // Absolute y screen position of the cursor in px
       *    absY,
       *    // X screen position of the cursor in px relative to the track extent.
       *    relX,
       *    // Y screen position of the cursor in px relative to the track extent.
       *    relY,
       *    // Data x position of the cursor relative to the track's data.
       *    dataX,
       *    // Data y position of the cursor relative to the track's data.
       *    dataY,
       *    // Track orientation, i.e., '1d-horizontal', '1d-vertical', or '2d'
       *    orientation: '1d-horizontal',
       *
       *    // The following properties are only returned when hovering 2D tracks:
       *    // Raw Float32Array
       *    dataLens,
       *    // Dimension of the lens, e.g., 3 (the lens is squared so `3` corresponds
       *    // to a 3x3 matrix represented by an array of length 9)
       *    dim,
       *    // Function for converting the raw data values to rgb values
       *    toRgb,
       *    // Center position of the data or genomic position (as a BED array)
       *    center,
       *    // Range of the x data or genomic position (as a BEDPE array)
       *    xRange,
       *    // Range of the y data or genomic position (as a BEDPE array)
       *    yRange,
       *    // If `true` `center`, `xRange`, and `yRange` are given in genomic positions
       *    isGenomicCoords
       *  }
       *
       * ``createSVG:`` Set a callback to obtain the current exported SVG DOM node,
       *                and potentially return a manipulated SVG DOM node.
       *
       * @param {string} event One of the events described below
       *
       * @param {function} callback A callback to be called when the event occurs
       *
       * @param {string} viewId The view ID to listen to events
       *
       * @example
       *
       * let locationListenerId;
       * hgv.on(
       *   'location',
       *   location => console.log('Here we are:', location),
       *   'viewId1',
       *   listenerId => locationListenerId = listenerId
       * );
       *
       * const rangeListenerId = hgv.on(
       *   'rangeSelection',
       *   range => console.log('Selected', range)
       * );
       *
       * const viewConfigListenerId = hgv.on(
       *   'viewConfig',
       *   range => console.log('Selected', range)
       * );
       *
       * const mmz = event => console.log('Moved', event);
       * hgv.on('mouseMoveZoom', mmz);
       *
       * const wheelListener = event => console.log('Wheel', event);
       * hgv.on('wheel', wheelListener);
       *
       * hgv.on('createSVG', (svg) => {
       *    const circle = document.createElement('circle');
       *    circle.setAttribute('cx', 100);
       *    circle.setAttribute('cy', 100);
       *    circle.setAttribute('r', 50);
       *    circle.setAttribute('fill', 'green');
       *    svg.appendChild(circle);
       *    return svg;
       * });
       *
       * const geneSearchListener = event => {
       *    console.log('Gene searched', event.geneSymbol);
       *    console.log('Range of the gene', event.range);
       *    console.log('Center of the gene', event.centerX);
       * }
       * hgv.on('geneSearch', geneSearchListener);
       */
      on(s, l, u, c) {
        switch (s) {
          case "click":
            return o.subscribe("click", l);
          case "cursorLocation":
            return o.subscribe("cursorLocation", l);
          case "location":
            return n.onLocationChange(u, l, c);
          case "mouseMoveZoom":
            return o.subscribe("mouseMoveZoom", l);
          case "wheel":
            return o.subscribe("wheel", l);
          case "rangeSelection":
            return o.subscribe("rangeSelection", l);
          case "viewConfig":
            return n.onViewChange(l);
          case "createSVG":
            return n.onPostCreateSVG(l);
          case "geneSearch":
            return o.subscribe("geneSearch", l);
          default:
            return;
        }
      }
    }
  };
};
var iot = "_higlass_1uoq8_1";
var Gh = {
  higlass: iot,
  "higlass-dark-theme": "_higlass-dark-theme_1uoq8_5",
  "higlass-container-overflow": "_higlass-container-overflow_1uoq8_9",
  "higlass-scroll-container-overflow": "_higlass-scroll-container-overflow_1uoq8_10",
  "higlass-scroll-container-scroll": "_higlass-scroll-container-scroll_1uoq8_11",
  "higlass-canvas": "_higlass-canvas_1uoq8_28",
  "higlass-drawing-surface": "_higlass-drawing-surface_1uoq8_34",
  "higlass-svg": "_higlass-svg_1uoq8_38",
  "tiled-area": "_tiled-area_1uoq8_47",
  "track-mouseover-menu": "_track-mouseover-menu_1uoq8_52"
};
function oot(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function LG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, sot(n.key), n);
  }
}
function aot(e12, t, r) {
  return t && LG(e12.prototype, t), r && LG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function sot(e12) {
  var t = lot(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function lot(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function cot(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && sD(e12, t);
}
function sD(e12, t) {
  return sD = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, sD(e12, t);
}
function uot(e12) {
  var t = fot();
  return function() {
    var n = NE(e12), i;
    if (t) {
      var o = NE(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return hot(this, i);
  };
}
function hot(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Er(e12);
}
function Er(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function fot() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function NE(e12) {
  return NE = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, NE(e12);
}
var BG = 12;
var dot = 12;
var pot = 20;
var mot = "default";
var FG = "bounded";
var $G = "overflow";
var vm = "scroll";
var My = function(e12) {
  cot(r, e12);
  var t = uot(r);
  function r(n) {
    var i;
    oot(this, r), i = t.call(this, n), ZV(import_react.default.version) < 15.6 && console.warn("HiGlass requires React v15.6 or higher. Current version: ", import_react.default.version), i.pubSub = g1(), i.domEvent = NV(i.pubSub), i.pubSubs = [], i.minHorizontalHeight = 20, i.minVerticalWidth = 20, i.resizeSensor = null, i.uid = Gt.nice(), i.tiledPlots = {}, i.genomePositionSearchBoxes = {}, i.xScales = {}, i.yScales = {}, i.projectionXDomains = {}, i.projectionYDomains = {}, i.topDiv = null, i.zoomToDataExtentOnInit = /* @__PURE__ */ new Set(), i.viewTrackUidsToCombinedUid = {}, i.combinedUidToViewTrack = {}, i.scalesChangedListeners = {}, i.draggingChangedListeners = {}, i.valueScalesChangedListeners = {}, i.zoomLocks = {}, i.locationLocks = {}, i.locationLocksAxisWise = {
      x: {},
      y: {}
    }, i.valueScaleLocks = {}, i.prevAuthToken = n.options.authToken, i.setCenters = {}, i.plusImg = {}, i.configImg = {}, Ue.PIXI = n.options && n.options.PIXI || P8, i.viewMarginTop = +n.options.viewMarginTop >= 0 ? +n.options.viewMarginTop : Em, i.viewMarginBottom = +n.options.viewMarginBottom >= 0 ? +n.options.viewMarginBottom : Em, i.viewMarginLeft = +n.options.viewMarginLeft >= 0 ? +n.options.viewMarginLeft : Em, i.viewMarginRight = +n.options.viewMarginRight >= 0 ? +n.options.viewMarginRight : Em, i.viewPaddingTop = +n.options.viewPaddingTop >= 0 ? +n.options.viewPaddingTop : Sm, i.viewPaddingBottom = +n.options.viewPaddingBottom >= 0 ? +n.options.viewPaddingBottom : Sm, i.viewPaddingLeft = +n.options.viewPaddingLeft >= 0 ? +n.options.viewPaddingLeft : Sm, i.viewPaddingRight = +n.options.viewPaddingRight >= 0 ? +n.options.viewPaddingRight : Sm, i.genomePositionSearchBox = null, i.viewHeaders = {}, i.boundRefreshView = () => {
      i.refreshView(wm);
    }, i.unsetOnLocationChange = [], i.setTheme(n.options.theme, n.options.isDarkTheme), i.viewconfLoaded = false;
    const {
      viewConfig: o
    } = i.props, a = i.loadIfRemoteViewConfig(i.props.viewConfig);
    n.options.authToken && ov(n.options.authToken), i.pixiRoot = new Ue.PIXI.Container(), i.pixiRoot.interactive = true, i.pixiStage = new Ue.PIXI.Container(), i.pixiStage.interactive = true, i.pixiRoot.addChild(i.pixiStage), i.pixiMask = new Ue.PIXI.Graphics(), i.pixiRoot.addChild(i.pixiMask), i.pixiStage.mask = i.pixiMask, i.element = null, i.scrollTop = 0;
    let s = x0;
    if (i.props.options)
      switch (i.props.options.mouseTool) {
        case To:
          s = To;
          break;
      }
    i.props.options.pluginTracks && (window.higlassTracksByType = Object.assign(window.higlassTracksByType || {}, i.props.options.pluginTracks));
    const l = {};
    try {
      window.higlassTracksByType && Object.entries(window.higlassTracksByType).forEach(([m, g]) => {
        l[m] = g;
      });
    } catch {
      console.warn("Broken config of a plugin track");
    }
    i.props.options.pluginDataFetchers && (window.higlassDataFetchersByType = Object.assign(window.higlassDataFetchersByType || {}, i.props.options.pluginDataFetchers));
    const u = window.higlassDataFetchersByType, c = i.props.options.pixelPreciseMarginPadding ? 1 : 30;
    i.mounted = false, i.pluginTracks = l, i.pluginDataFetchers = u, i.state = {
      currentBreakpoint: "lg",
      width: 0,
      height: 0,
      rowHeight: c,
      svgElement: null,
      canvasElement: null,
      customDialog: null,
      views: a,
      viewConfig: o,
      addTrackPositionMenuPosition: null,
      typedEditable: void 0,
      mouseOverOverlayUid: null,
      mouseTool: s,
      isDarkTheme: false,
      rangeSelection1dSize: [0, 1 / 0],
      rangeSelectionToInt: false,
      modal: null
    }, i.attachedToDOM = false;
    const {
      public: f,
      destroy: h,
      publish: d,
      stack: p
    } = not(Er(i), i.pubSub);
    return i.api = f, i.apiDestroy = h, i.apiPublish = d, i.apiStack = p, i.viewChangeListener = [], i.triggerViewChangeDb = jR(i.triggerViewChange.bind(Er(i)), 250), i.pubSubs = [], i.rangeSelection = [null, null], i.prevMouseHoverTrack = null, i.zooming = false, i.appClickHandlerBound = i.appClickHandler.bind(Er(i)), i.canvasClickHandlerBound = i.canvasClickHandler.bind(Er(i)), i.keyDownHandlerBound = i.keyDownHandler.bind(Er(i)), i.keyUpHandlerBound = i.keyUpHandler.bind(Er(i)), i.resizeHandlerBound = i.resizeHandler.bind(Er(i)), i.resizeHandlerBound = i.resizeHandler.bind(Er(i)), i.dispatchEventBound = i.dispatchEvent.bind(Er(i)), i.animateOnMouseMoveHandlerBound = i.animateOnMouseMoveHandler.bind(Er(i)), i.zoomStartHandlerBound = i.zoomStartHandler.bind(Er(i)), i.zoomEndHandlerBound = i.zoomEndHandler.bind(Er(i)), i.zoomHandlerBound = i.zoomHandler.bind(Er(i)), i.trackDroppedHandlerBound = i.trackDroppedHandler.bind(Er(i)), i.trackDimensionsModifiedHandlerBound = i.trackDimensionsModifiedHandler.bind(Er(i)), i.animateBound = i.animate.bind(Er(i)), i.animateOnGlobalEventBound = i.animateOnGlobalEvent.bind(Er(i)), i.requestReceivedHandlerBound = i.requestReceivedHandler.bind(Er(i)), i.wheelHandlerBound = i.wheelHandler.bind(Er(i)), i.mouseMoveHandlerBound = i.mouseMoveHandler.bind(Er(i)), i.onMouseLeaveHandlerBound = i.onMouseLeaveHandler.bind(Er(i)), i.onBlurHandlerBound = i.onBlurHandler.bind(Er(i)), i.openModalBound = i.openModal.bind(Er(i)), i.closeModalBound = i.closeModal.bind(Er(i)), i.handleEditViewConfigBound = i.handleEditViewConfig.bind(Er(i)), i.onScrollHandlerBound = i.onScrollHandler.bind(Er(i)), i.typedText = "", i.typedTextTimeout = null, i.modal = {
      open: i.openModalBound,
      close: i.closeModalBound
    }, i.setBroadcastMousePositionGlobally(i.props.options.broadcastMousePositionGlobally || i.props.options.globalMousePosition), i.setShowGlobalMousePosition(i.props.options.showGlobalMousePosition || i.props.options.globalMousePosition), i;
  }
  return aot(r, [{
    key: "UNSAFE_componentWillMount",
    value: function() {
      this.domEvent.register("keydown", document), this.domEvent.register("keyup", document), this.domEvent.register("scroll", document), this.domEvent.register("resize", window), this.domEvent.register("orientationchange", window), this.domEvent.register("wheel", window), this.domEvent.register("mousedown", window, true), this.domEvent.register("mouseup", window, true), this.domEvent.register("click", window, true), this.domEvent.register("mousemove", window), this.domEvent.register("touchmove", window), this.domEvent.register("touchstart", window), this.domEvent.register("touchend", window), this.domEvent.register("touchcancel", window), this.domEvent.register("blur", window), this.pubSubs.push(this.pubSub.subscribe("app.click", this.appClickHandlerBound), this.pubSub.subscribe("blur", this.onBlurHandlerBound), this.pubSub.subscribe("keydown", this.keyDownHandlerBound), this.pubSub.subscribe("keyup", this.keyUpHandlerBound), this.pubSub.subscribe("resize", this.resizeHandlerBound), this.pubSub.subscribe("wheel", this.wheelHandlerBound), this.pubSub.subscribe("orientationchange", this.resizeHandlerBound), this.pubSub.subscribe("app.event", this.dispatchEventBound), this.pubSub.subscribe("app.animateOnMouseMove", this.animateOnMouseMoveHandlerBound), this.pubSub.subscribe("trackDropped", this.trackDroppedHandlerBound), this.pubSub.subscribe("trackDimensionsModified", this.trackDimensionsModifiedHandlerBound), this.pubSub.subscribe("app.zoomStart", this.zoomStartHandlerBound), this.pubSub.subscribe("app.zoomEnd", this.zoomEndHandlerBound), this.pubSub.subscribe("app.zoom", this.zoomHandlerBound), this.pubSub.subscribe("requestReceived", this.requestReceivedHandlerBound)), this.props.getApi && this.props.getApi(this.api);
    }
  }, {
    key: "sizeMode",
    get: function() {
      return typeof this.props.options.sizeMode > "u" ? this.props.options.bounded ? "bounded" : mot : this.props.options.sizeMode;
    }
  }, {
    key: "setBroadcastMousePositionGlobally",
    value: function(i = false) {
      this.isBroadcastMousePositionGlobally = i;
    }
  }, {
    key: "setShowGlobalMousePosition",
    value: function(i = false) {
      if (this.isShowGlobalMousePosition = i, this.isShowGlobalMousePosition && !this.globalMousePositionListener && (this.globalMousePositionListener = Zm.subscribe("higlass.mouseMove", this.animateOnGlobalEventBound), this.pubSubs.push(this.globalMousePositionListener)), this.isShowGlobalMousePosition && !this.globalMousePositionListener) {
        const o = this.pubSubs.findIndex((a) => a === this.globalMousePositionListener);
        Zm.unsubscribe(this.globalMousePositionListener), o >= 0 && this.pubSubs.splice(o, 1), this.globalMousePositionListener = void 0;
      }
    }
  }, {
    key: "zoomStartHandler",
    value: function() {
      this.hideHoverMenu(), this.zooming = true;
    }
  }, {
    key: "zoomEndHandler",
    value: function() {
      this.zooming = false;
    }
  }, {
    key: "zoomHandler",
    value: function(i) {
      i.sourceEvent && this.mouseMoveHandler(i.sourceEvent);
    }
  }, {
    key: "waitForDOMAttachment",
    value: function(i) {
      if (!this.mounted)
        return;
      const o = import_react_dom.default.findDOMNode(this);
      document.body.contains(o) ? i() : requestAnimationFrame(() => this.waitForDOMAttachment(i));
    }
  }, {
    key: "componentDidMount",
    value: function() {
      this.mounted = true, this.element = import_react_dom.default.findDOMNode(this), window.addEventListener("focus", this.boundRefreshView), Object.values(this.state.views).forEach((s) => {
        this.adjustLayoutToTrackSizes(s), s.layout ? s.layout.i = s.uid : s.layout = this.generateViewLayout(s);
      });
      const i = {
        width: this.state.width,
        height: this.state.height,
        view: this.canvasElement,
        antialias: true,
        transparent: true,
        resolution: 2,
        autoResize: true
      }, o = parseInt(I8[0], 10);
      o === 4 ? (console.warn("Deprecation warning: please update Pixi.js to version 5 or above!"), this.props.options.renderer === "canvas" ? this.pixiRenderer = new Ue.PIXI.CanvasRenderer(i) : this.pixiRenderer = new Ue.PIXI.WebGLRenderer(i)) : (o < 4 && console.warn("Deprecation warning: please update Pixi.js to version 5 or above! This version of Pixi.js is unsupported. Good luck 🤞"), this.props.options.renderer === "canvas" ? this.pixiRenderer = new Ue.PIXI.CanvasRenderer(i) : this.pixiRenderer = new Ue.PIXI.Renderer(i)), this.fitPixiToParentContainer(), this.setState({
        svgElement: this.svgElement,
        canvasElement: this.canvasElement
      }), this.waitForDOMAttachment(() => {
        w0.ElementQueries.listen(), this.resizeSensor = new w0.ResizeSensor(this.element.parentNode, this.updateAfterResize.bind(this)), this.updateAfterResize();
      }), this.handleDragStart(), this.handleDragStop(), this.animate();
      const a = Wt(this.element).append("svg").style("display", "none");
      lme.forEach((s) => tot(a, s.id, s.paths, s.viewBox));
    }
  }, {
    key: "getTrackObject",
    value: function(i, o) {
      return this.tiledPlots[i].trackRenderer.getTrackObject(o);
    }
  }, {
    key: "getTrackRenderer",
    value: function(i) {
      return this.tiledPlots[i].trackRenderer;
    }
    /**
     * Check if the passed in viewConfig is remote (i.e. is a string).
     * If it is, fetch it before proceeding
     */
  }, {
    key: "loadIfRemoteViewConfig",
    value: function(i) {
      let o = {};
      return typeof i == "string" ? Je.json(i, (a, s) => {
        i = s, this.setState({
          views: this.processViewConfig(JSON.parse(JSON.stringify(s))),
          viewConfig: s
        }), this.unsetOnLocationChange.forEach(({
          viewId: l,
          callback: u,
          callbackId: c
        }) => {
          this.onLocationChange(l, u, c);
        });
      }, this.pubSub) : (o = this.processViewConfig(JSON.parse(JSON.stringify(i))), this.mounted && this.setState({
        viewConfig: i
      })), o;
    }
    // eslint-disable-next-line camelcase
  }, {
    key: "UNSAFE_componentWillReceiveProps",
    value: function(i) {
      const o = this.loadIfRemoteViewConfig(i.viewConfig);
      if (i.options.authToken !== this.prevAuthToken) {
        ov(i.options.authToken);
        for (const a of this.iterateOverViews()) {
          const s = this.getTrackRenderer(a), l = JSON.parse(s.prevTrackDefinitions);
          s.syncTrackObjects([]), s.syncTrackObjects(l);
        }
        this.prevAuthToken = i.options.authToken;
      }
      for (const a of mr(o))
        this.adjustLayoutToTrackSizes(a);
      this.setState({
        views: o
      });
    }
    // eslint-disable-next-line camelcase
  }, {
    key: "UNSAFE_componentWillUpdate",
    value: function() {
      this.pixiRenderer.render(this.pixiRoot);
    }
  }, {
    key: "componentDidUpdate",
    value: function() {
      this.setTheme(this.props.options.theme, this.props.options.isDarkTheme), this.animate(), this.triggerViewChangeDb();
    }
  }, {
    key: "componentWillUnmount",
    value: function() {
      this.mounted = false, this.pixiStage.destroy(false), this.pixiStage = null, this.pixiRenderer.destroy(true), this.pixiRenderer = null, window.removeEventListener("focus", this.boundRefreshView), this.resizeSensor && this.resizeSensor.detach(), this.domEvent.unregister("keydown", document), this.domEvent.unregister("keyup", document), this.domEvent.unregister("scroll", document), this.domEvent.unregister("wheel", window), this.domEvent.unregister("mousedown", window), this.domEvent.unregister("mouseup", window), this.domEvent.unregister("click", window), this.domEvent.unregister("mousemove", window), this.domEvent.unregister("touchmove", window), this.domEvent.unregister("touchstart", window), this.domEvent.unregister("touchend", window), this.domEvent.unregister("touchcancel", window), this.pubSubs.forEach((i) => this.pubSub.unsubscribe(i)), this.pubSubs = [], this.apiDestroy();
    }
    /* ---------------------------- Custom Methods ---------------------------- */
  }, {
    key: "setTheme",
    value: function(i = this.props.options.theme, o = this.props.options.isDarkTheme) {
      if (typeof o < "u")
        console.warn("The option `isDarkTheme` is deprecated. Please use `theme` instead."), this.theme = o ? "dark" : "light";
      else
        switch (i) {
          case "dark":
            this.theme = wr;
            break;
          case "light":
          case void 0:
            this.theme = D0;
            break;
          default:
            console.warn(`Unknown theme "${i}". Using light theme.`), this.theme = D0;
            break;
        }
    }
  }, {
    key: "dispatchEvent",
    value: function(i) {
      this.canvasElement && M0(i, this.canvasElement);
    }
  }, {
    key: "trackDroppedHandler",
    value: function() {
      this.setState({
        draggingHappening: null
      });
    }
  }, {
    key: "requestReceivedHandler",
    value: function() {
      !this.viewconfLoaded && iv === 0 && (this.viewconfLoaded = true, this.props.options.onViewConfLoaded && this.props.options.onViewConfLoaded());
    }
  }, {
    key: "animateOnMouseMoveHandler",
    value: function(i) {
      i && !this.animateOnMouseMove && this.pubSubs.push(this.pubSub.subscribe("app.mouseMove", this.animateBound)), this.animateOnMouseMove = i;
    }
  }, {
    key: "fitPixiToParentContainer",
    value: function() {
      if (!this.element || !this.element.parentNode) {
        console.warn("No parentNode:", this.element);
        return;
      }
      const i = this.element.parentNode.clientWidth, o = this.element.parentNode.clientHeight;
      this.pixiMask.beginFill(16777215).drawRect(0, 0, i, o).endFill(), this.pixiRenderer.resize(i, o), this.pixiRenderer.view.style.width = `${i}px`, this.pixiRenderer.view.style.height = `${o}px`, this.pixiRenderer.render(this.pixiRoot);
    }
    /**
     * Add default track options. These can come from two places:
     *
     * 1. The track definitions (configs/tracks-info.js)
     * 2. The default options passed into the component
     *
     * Of these, #2 takes precendence over #1.
     *
     * @param {array} track The track to add default options to
     */
  }, {
    key: "addDefaultTrackOptions",
    value: function(i) {
      const o = this.getTrackInfo(i.type);
      if (!o)
        return;
      typeof i.options > "u" && (i.options = {});
      const a = i.options ? i.options : {};
      if (this.props.options.defaultTrackOptions) {
        if (this.props.options.defaultTrackOptions.trackSpecific && this.props.options.defaultTrackOptions.trackSpecific[i.type]) {
          const s = this.props.options.defaultTrackOptions.trackSpecific[i.type];
          for (const l in s)
            i.options[l] = typeof i.options[l] < "u" ? i.options[l] : JSON.parse(JSON.stringify(s[l]));
        }
        if (this.props.options.defaultTrackOptions.all) {
          const s = this.props.options.defaultTrackOptions.all;
          for (const l in s)
            i.options[l] = typeof i.options[l] < "u" ? i.options[l] : JSON.parse(JSON.stringify(s[l]));
        }
      }
      if (o.defaultOptions) {
        const s = o.defaultOptionsByTheme && o.defaultOptionsByTheme[this.theme] ? o.defaultOptionsByTheme[this.theme] : {}, l = {
          ...o.defaultOptions,
          ...s
        };
        if (!i.options)
          i.options = JSON.parse(JSON.stringify(l));
        else
          for (const u in l)
            i.options[u] = typeof i.options[u] < "u" ? i.options[u] : JSON.parse(JSON.stringify(l[u]));
      } else
        i.options = a;
    }
  }, {
    key: "toggleTypedEditable",
    value: function() {
      this.setState({
        typedEditable: !this.isEditable()
      });
    }
    /** Handle typed commands (e.g. e-d-i-t) */
  }, {
    key: "typedTextHandler",
    value: function(i) {
      if (!this.props.options.cheatCodesEnabled)
        return;
      this.typedText = this.typedText.concat(i.key), this.typedText.endsWith("hgedit") && (this.toggleTypedEditable(), this.typedText = "");
      const o = 750;
      this.typedTextTimeout && clearTimeout(this.typedTextTimeout), this.typedTextTimeout = setTimeout(() => {
        this.typedText = "";
      }, o);
    }
  }, {
    key: "keyDownHandler",
    value: function(i) {
      this.typedTextHandler(i), this.props.options.rangeSelectionOnAlt && i.key === "Alt" && this.setState({
        mouseTool: To
      });
    }
  }, {
    key: "keyUpHandler",
    value: function(i) {
      this.props.options.rangeSelectionOnAlt && i.key === "Alt" && this.setState({
        mouseTool: x0
      });
    }
  }, {
    key: "openModal",
    value: function(i) {
      this.setState({
        // The following is only needed for testing purposes
        modal: import_react.default.cloneElement(i, {
          ref: (o) => {
            this.modalRef = o;
          }
        })
      });
    }
  }, {
    key: "closeModal",
    value: function() {
      this.modalRef = null, this.setState({
        modal: null
      });
    }
  }, {
    key: "handleEditViewConfig",
    value: function() {
      const {
        viewConfig: i
      } = this.state;
      this.setState({
        viewConfigTmp: i
      }), this.openModal(import_react.default.createElement(eot, {
        onCancel: () => {
          const {
            viewConfigTmp: o
          } = this.state, a = this.processViewConfig(o);
          for (const s of mr(a))
            this.adjustLayoutToTrackSizes(s);
          this.setState({
            views: a,
            viewConfig: o,
            viewConfigTmp: null
          });
        },
        onChange: (o) => {
          const a = JSON.parse(o), s = this.processViewConfig(a);
          for (const l of mr(s))
            this.adjustLayoutToTrackSizes(l);
          this.setState({
            views: s,
            viewConfig: a
          });
        },
        onSave: (o) => {
          const a = JSON.parse(o), s = this.processViewConfig(a);
          for (const l of mr(s))
            this.adjustLayoutToTrackSizes(l);
          this.setState({
            views: s,
            viewConfig: a,
            viewConfigTmp: null
          });
        },
        viewConfig: this.getViewsAsString()
      }));
    }
  }, {
    key: "animate",
    value: function() {
      this.isRequestingAnimationFrame || (this.isRequestingAnimationFrame = true, requestAnimationFrame(() => {
        this.pixiRenderer && (this.pixiRenderer.render(this.pixiRoot), this.isRequestingAnimationFrame = false);
      }));
    }
  }, {
    key: "animateOnGlobalEvent",
    value: function({
      sourceUid: i
    } = {}) {
      i !== this.uid && this.animateOnMouseMove && this.animate();
    }
  }, {
    key: "measureSize",
    value: function() {
      const [i, o] = FV(this.element);
      i > 0 && o > 0 && this.setState({
        sizeMeasured: true,
        width: i,
        height: o
      });
    }
  }, {
    key: "updateAfterResize",
    value: function() {
      this.measureSize(), this.updateRowHeight(), this.fitPixiToParentContainer(), this.refreshView(wm), this.resizeHandler();
    }
  }, {
    key: "onBreakpointChange",
    value: function(i) {
      this.setState({
        currentBreakpoint: i
      });
    }
  }, {
    key: "handleOverlayMouseEnter",
    value: function(i) {
      this.setState({
        mouseOverOverlayUid: i
      });
    }
  }, {
    key: "handleOverlayMouseLeave",
    value: function() {
      this.setState({
        mouseOverOverlayUid: null
      });
    }
    /**
     * We want to lock the zoom of this view to the zoom of another view.
     *
     * First we pick which other view we want to lock to.
     *
     * The we calculate the current zoom offset and center offset. The differences
     * between the center of the two views will always remain the same, as will the
     * different between the zoom levels.
     */
  }, {
    key: "handleLockLocation",
    value: function(i) {
      this.setState({
        chooseViewHandler: (o) => this.handleLocationLockChosen(i, o),
        mouseOverOverlayUid: i
      });
    }
    /**
     * Can views be added, removed or rearranged and are the view headers
     * visible?
     */
  }, {
    key: "isEditable",
    value: function() {
      return this.state.typedEditable !== void 0 ? this.state.typedEditable : !this.props.options || !("editable" in this.props.options) ? this.state.viewConfig.editable : this.props.options.editable && this.state.viewConfig.editable;
    }
    /**
     * Can views be added, removed or rearranged and are the view headers
     * visible?
     */
  }, {
    key: "isTrackMenuDisabled",
    value: function() {
      return this.props.options && (this.props.options.editable === false || this.props.options.tracksEditable === false) ? true : this.state.viewConfig && (this.state.viewConfig.tracksEditable === false || this.state.viewConfig.editable === false);
    }
    /**
     * Can views be added, removed or rearranged and are the view headers
     * visible?
     */
  }, {
    key: "isViewHeaderDisabled",
    value: function() {
      return this.props.options && (this.props.options.editable === false || this.props.options.viewEditable === false) ? true : this.state.viewConfig && (this.state.viewConfig.viewEditable === false || this.state.viewConfig.editable === false);
    }
    /**
     * Iteratate over all of the views in this component
     */
  }, {
    key: "iterateOverViews",
    value: function() {
      const i = [];
      for (const o in Object.keys(this.state.views))
        i.push(o);
      return i;
    }
  }, {
    key: "iterateOverTracksInView",
    value: function(i) {
      const o = [], {
        tracks: a
      } = this.state.views[i];
      for (const s in a)
        for (const l of a[s])
          if (l.type === "combined" && l.contents)
            for (const u of l.contents)
              o.push({
                viewId: i,
                trackId: u.uid,
                track: u
              });
          else
            o.push({
              viewId: i,
              trackId: l.uid,
              track: l
            });
      return o;
    }
    /**
     * Iterate over all the tracks in this component.
     */
  }, {
    key: "iterateOverTracks",
    value: function() {
      const i = [];
      for (const o in this.state.views) {
        const {
          tracks: a
        } = this.state.views[o];
        for (const s in a)
          for (const l of a[s])
            if (l.type === "combined" && l.contents)
              for (const u of l.contents)
                i.push({
                  viewId: o,
                  trackId: u.uid,
                  track: u
                });
            else
              i.push({
                viewId: o,
                trackId: l.uid,
                track: l
              });
      }
      return i;
    }
  }, {
    key: "setMouseTool",
    value: function(i) {
      this.setState({
        mouseTool: i
      });
    }
    /**
     * Checks if a track's value scale is locked with another track
     */
  }, {
    key: "isValueScaleLocked",
    value: function(i, o) {
      const a = this.combineViewAndTrackUid(i, o);
      return this.state.views[i] ? !!this.valueScaleLocks[a] : false;
    }
    /**
     * Computed the minimal and maximal values of all tracks that are in the same
     * lockGroup as a given track
     * @param   {string}  viewUid  The id of the view containing the track
     * @param   {string}  trackUid   The id of the track
     * @return  {array}  Tuple [min,max] containing the overall extrema - or null.
     */
  }, {
    key: "getLockGroupExtrema",
    value: function(i, o) {
      const a = this.combineViewAndTrackUid(i, o);
      if (!this.state.views[i] || !this.valueScaleLocks[a])
        return null;
      const s = this.valueScaleLocks[a], l = Object.values(s).filter((d) => this.tiledPlots[d.view]).map((d) => this.tiledPlots[d.view].trackRenderer.getTrackObject(d.track)).filter((d) => d).map((d) => d.originalTrack === void 0 ? d : d.originalTrack), u = l.filter((d) => d.minRawValue && d.maxRawValue).map((d) => s.ignoreOffScreenValues ? d.minVisibleValue(true) : d.minVisibleValueInTiles(true)), c = l.filter((d) => d.minRawValue && d.maxRawValue).map((d) => s.ignoreOffScreenValues ? d.maxVisibleValue(true) : d.maxVisibleValueInTiles(true));
      if (u.length === 0 || u.filter((d) => d === null || d === 1 / 0).length > 0 || c.length === 0 || c.filter((d) => d === null || d === -1 / 0).length > 0)
        return null;
      const f = Math.min(...u), h = Math.max(...c);
      return [f, h];
    }
    /**
     * Syncing the values of locked scales
     *
     * Arguments
     * ---------
     *  viewUid: string
     *    The id of the view containing the track whose value scale initially changed
     *  trackUid: string
     *    The id of the track that whose value scale changed
     *
     * Returns
     * -------
     *    Nothing
     */
  }, {
    key: "syncValueScales",
    value: function(i, o) {
      const a = this.combineViewAndTrackUid(i, o);
      if (!this.state.views[i])
        return;
      const s = Zi(this.state.views[i].tracks, o);
      if (this.valueScaleLocks[a]) {
        const l = this.valueScaleLocks[a], u = Object.values(l).filter((p) => this.tiledPlots[p.view]).map((p) => this.tiledPlots[p.view].trackRenderer.getTrackObject(p.track)).filter((p) => p).map((p) => p.originalTrack === void 0 ? p : p.originalTrack), c = this.getLockGroupExtrema(i, o);
        if (c === null)
          return;
        const f = c[0], h = c[1], d = 1e-6;
        for (const p of u) {
          if (p.minValue && p.minValue(f), p.maxValue && p.maxValue(h), !p.valueScale)
            continue;
          const m = Math.abs(p.minValue() - p.valueScale.domain()[0]) > d || Math.abs(p.maxValue() - p.valueScale.domain()[1]) > d, g = s.options && p.options && typeof s.options.scaleStartPercent < "u" && typeof s.options.scaleEndPercent < "u" && (Math.abs(p.options.scaleStartPercent - s.options.scaleStartPercent) > d || Math.abs(p.options.scaleEndPercent - s.options.scaleEndPercent) > d);
          p.continuousScaling && !m && !g || (p.valueScale.domain([f, h]), p.prevValueScale = p.valueScale.copy(), g && (p.options.scaleStartPercent = s.options.scaleStartPercent, p.options.scaleEndPercent = s.options.scaleEndPercent), p.rerender(p.options, true));
        }
      }
    }
  }, {
    key: "handleNewTilesLoaded",
    value: function(i, o) {
      this.animate();
    }
  }, {
    key: "notifyDragChangedListeners",
    value: function(i) {
      mr(this.draggingChangedListeners).forEach((o) => {
        mr(o).forEach((a) => a(i));
      });
    }
    /**
     * Add a listener that will be called every time the view is updated.
     *
     * @param viewUid: The uid of the view being observed
     * @param listenerUid: The uid of the listener
     * @param eventHandler: The handler to be called when the scales change
     *    Event handler is called with parameters (xScale, yScale)
     */
  }, {
    key: "addDraggingChangedListener",
    value: function(i, o, a) {
      this.draggingChangedListeners.hasOwnProperty(i) || (this.draggingChangedListeners[i] = {}), this.draggingChangedListeners[i][o] = a, a(true), a(false);
    }
    /**
     * Remove a scale change event listener
     *
     * @param viewUid: The view that it's listening on.
     * @param listenerUid: The uid of the listener itself.
     */
  }, {
    key: "removeDraggingChangedListener",
    value: function(i, o) {
      if (this.draggingChangedListeners.hasOwnProperty(i)) {
        const a = this.draggingChangedListeners[i];
        a.hasOwnProperty(o) && (a[o](false), delete a[o]);
      }
    }
    /**
     * Add an event listener that will be called every time the scale
     * of the view with uid viewUid is changed.
     *
     * @param viewUid: The uid of the view being observed
     * @param listenerUid: The uid of the listener
     * @param eventHandler: The handler to be called when the scales change
     *    Event handler is called with parameters (xScale, yScale)
     */
  }, {
    key: "addScalesChangedListener",
    value: function(i, o, a) {
      this.scalesChangedListeners[i] || (this.scalesChangedListeners[i] = {}), this.scalesChangedListeners[i][o] = a, !(!this.xScales[i] || !this.yScales[i]) && a(this.xScales[i], this.yScales[i]);
    }
    /**
     * Remove a scale change event listener
     *
     * @param viewUid: The view that it's listening on.
     * @param listenerUid: The uid of the listener itself.
     */
  }, {
    key: "removeScalesChangedListener",
    value: function(i, o) {
      if (this.scalesChangedListeners[i]) {
        const a = this.scalesChangedListeners[i];
        a[o] && delete a[o];
      }
    }
  }, {
    key: "createSVG",
    value: function() {
      const i = document.createElement("svg");
      i.setAttribute("xmlns:xlink", "http://www.w3.org/1999/xlink"), i.setAttribute("xmlns", "http://www.w3.org/2000/svg"), i.setAttribute("version", "1.1");
      for (const o of mr(this.tiledPlots))
        if (o) {
          for (const a of mr(o.trackRenderer.trackDefObjects))
            if (a.trackObject.exportSVG) {
              const s = a.trackObject.exportSVG();
              s && i.appendChild(s[0]);
            }
        }
      return i.setAttribute("width", this.canvasElement.style.width), i.setAttribute("height", this.canvasElement.style.height), this.postCreateSVGCallback ? this.postCreateSVGCallback(i) : i;
    }
  }, {
    key: "createSVGString",
    value: function() {
      const i = this.createSVG();
      let o = bfe.xml(new window.XMLSerializer().serializeToString(i));
      return o = o.replace(/<a0:/g, "<"), o = o.replace(/<\/a0:/g, "</"), o = o.replace(/(<svg[\n\r])(\s+xmlns="http:\/\/www\.w3\.org\/1999\/xhtml"[\n\r])/gm, "$1"), o = o.replace(/(\s+<clipPath[\n\r]\s+)(xmlns="http:\/\/www\.w3\.org\/2000\/svg")/gm, "$1"), `<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
${o}`;
    }
  }, {
    key: "handleExportSVG",
    value: function() {
      Qm("export.svg", new Blob([this.createSVGString()], {
        type: "image/svg+xml"
      }));
    }
  }, {
    key: "offPostCreateSVG",
    value: function() {
      this.postCreateSVGCallback = null;
    }
  }, {
    key: "onPostCreateSVG",
    value: function(i) {
      this.postCreateSVGCallback = i;
    }
  }, {
    key: "createPNGBlobPromise",
    value: function() {
      return new Promise((i) => {
        const o = this.createSVGString(), a = new Image(this.canvasElement.width, this.canvasElement.height);
        a.src = `data:image/svg+xml;base64,${btoa(o)}`, a.onload = () => {
          const s = document.createElement("canvas");
          s.width = this.canvasElement.width / 2, s.height = this.canvasElement.height / 2, s.getContext("2d").drawImage(a, 0, 0), s.toBlob((l) => {
            i(l);
          });
        };
      });
    }
  }, {
    key: "handleExportPNG",
    value: function() {
      this.createPNGBlobPromise().then((i) => {
        Qm("export.png", i);
      });
    }
    /*
     * The scales of some view have changed (presumably in response to zooming).
     *
     * Mark the new scales and update any locked views.
     *
     * @param uid: The view of whom the scales have changed.
     */
  }, {
    key: "handleScalesChanged",
    value: function(i, o, a, s = true) {
      if (this.xScales[i] = o, this.yScales[i] = a, s && i in this.scalesChangedListeners && mr(this.scalesChangedListeners[i]).forEach((l) => {
        l(o, a);
      }), this.zoomLocks[i]) {
        const l = this.zoomLocks[i], u = vo(l), [c, f, h] = un(this.xScales[i], this.yScales[i]);
        for (let d = 0; d < u.length; d++) {
          const p = u[d][0], m = u[d][1];
          if (!this.xScales[p] || !this.yScales[p] || p === i)
            continue;
          const [g, v, _] = un(this.xScales[p], this.yScales[p]), y = m[2] / l[i][2], b = h * y;
          if (!this.setCenters[p])
            continue;
          const [T, E] = this.setCenters[p](g, v, b, false);
          this.xScales[p] = T, this.yScales[p] = E, this.scalesChangedListeners.hasOwnProperty(p) && mr(this.scalesChangedListeners[p]).forEach((P) => {
            P(T, E);
          });
        }
      }
      if (this.locationLocks[i]) {
        const l = this.locationLocks[i], u = vo(l), [c, f, h] = un(this.xScales[i], this.yScales[i]);
        for (let d = 0; d < u.length; d++) {
          const p = u[d][0], m = u[d][1];
          if (!this.xScales[p] || !this.yScales[p])
            continue;
          const [g, v, _] = un(this.xScales[p], this.yScales[p]);
          if (p === i)
            continue;
          const y = m[0] - l[i][0], b = m[1] - l[i][1], T = c + y, E = f + b;
          if (!this.setCenters[p])
            continue;
          const [P, A] = this.setCenters[p](T, E, _, false);
          this.xScales[p] = P, this.yScales[p] = A, this.scalesChangedListeners.hasOwnProperty(p) && mr(this.scalesChangedListeners[p]).forEach((I) => {
            I(P, A);
          });
        }
      }
      if (this.locationLocksAxisWise.x[i]) {
        const l = this.locationLocksAxisWise.x[i].lock, u = vo(l), c = this.locationLocksAxisWise.x[i].axis !== "x", [f, h, d] = un(this.xScales[i], this.yScales[i]);
        for (let p = 0; p < u.length; p++) {
          const m = u[p][0], g = u[p][1];
          if (!this.xScales[m] || !this.yScales[m])
            continue;
          const [v, _, y] = un(this.xScales[m], this.yScales[m]);
          if (m === i)
            continue;
          const b = g[0] - l[i][0], T = f + b;
          if (!this.setCenters[m])
            continue;
          const [E, P] = this.setCenters[m](c ? v : T, c ? T : _, y, false);
          this.xScales[m] = E, this.yScales[m] = P, this.scalesChangedListeners.hasOwnProperty(m) && mr(this.scalesChangedListeners[m]).forEach((A) => {
            A(E, P);
          });
        }
      }
      if (this.locationLocksAxisWise.y[i]) {
        const l = this.locationLocksAxisWise.y[i].lock, u = vo(l), c = this.locationLocksAxisWise.y[i].axis !== "y", [f, h, d] = un(this.xScales[i], this.yScales[i]);
        for (let p = 0; p < u.length; p++) {
          const m = u[p][0], g = u[p][1];
          if (!this.xScales[m] || !this.yScales[m])
            continue;
          const [v, _, y] = un(this.xScales[m], this.yScales[m]);
          if (m === i)
            continue;
          const b = g[1] - l[i][1], T = h + b;
          if (!this.setCenters[m])
            continue;
          const [E, P] = this.setCenters[m](c ? T : v, c ? _ : T, y, false);
          this.xScales[m] = E, this.yScales[m] = P, this.scalesChangedListeners.hasOwnProperty(m) && mr(this.scalesChangedListeners[m]).forEach((A) => {
            A(E, P);
          });
        }
      }
      this.animate(), this.triggerViewChangeDb();
    }
  }, {
    key: "handleProjectViewport",
    value: function(i) {
      this.setState({
        chooseTrackHandler: (o, a) => this.handleViewportProjected(i, o, a)
      });
    }
    /**
     * Adjust the zoom level so that all of the data is visible
     *
     * @param viewUid: The view uid for which to adjust the zoom level
     */
  }, {
    key: "handleZoomToData",
    value: function(i) {
      if (i && !this.tiledPlots[i])
        throw new Error(`View uid ${i} does not exist in the current viewConfig`);
      i ? this.tiledPlots[i].handleZoomToData() : Object.values(this.tiledPlots).forEach((o) => o.handleZoomToData());
    }
    /**
     * Reset the viewport to the initial x and y domain
     * @param  {number} viewId - ID of the view for which the viewport should be
     *  reset.
     */
  }, {
    key: "resetViewport",
    value: function(i) {
      if (i && !this.tiledPlots[i])
        throw new Error(`View uid ${i} does not exist in the current viewConfig`);
      i ? this.tiledPlots[i].resetViewport() : Object.values(this.tiledPlots).forEach((o) => o.resetViewport());
    }
    /**
     * We want to yank some attributes from another view.
     *
     * This will create a view selection overlay and then call the selected
     * provided function.
     */
  }, {
    key: "handleYankFunction",
    value: function(i, o) {
      this.setState({
        chooseViewHandler: (a) => o(i, a),
        mouseOverOverlayUid: i
      });
    }
    /**
     * We want to unlock uid from the zoom group that it's in.
     *
     * @param uid: The uid of a view.
     */
  }, {
    key: "handleUnlock",
    value: function(i, o) {
      const a = o[i], s = mo(a);
      if (s.length === 2) {
        delete o[s[0]], delete o[s[1]];
        return;
      }
      o[i] && o[i][i] && delete o[i][i], o[i] && delete o[i];
    }
  }, {
    key: "viewScalesLockData",
    value: function(i) {
      return !this.xScales[i] || !this.yScales[i] ? (console.warn("View scale lock doesn't correspond to existing uid: ", i), null) : un(this.xScales[i], this.yScales[i]);
    }
    /*
     * :param uid1 (string): The uid of the first element to be locked (e.g. viewUid)
     * :param uid2 (string): The uid of the second element to be locked (e.g. viewUid)
     * :param lockGroups (dict): The set of locks where to store this lock (e.g. this.locationLocks)
     * :parma lockData (function): A function that takes two uids and calculates some extra data
     * to store with this lock data (e.g. scalesCenterAndK(this.xScales[uid1], this.yScales[uid1]))
     */
  }, {
    key: "addLock",
    value: function(i, o, a, s) {
      let l = [], u = [];
      a[i] ? l = vo(a[i]).filter((h) => s(h[0])).map((h) => [h[0], s(h[0])]) : l = [[i, s.bind(this)(i)]], a[o] ? u = vo(a[o]).filter((h) => s.bind(this)(h[0])).map((h) => (
        // x is [uid, [centerX, centerY, k]]
        [h[0], s.bind(this)(h[0])]
      )) : u = [[o, s.bind(this)(o)]];
      const c = l.concat(u), f = xV(c);
      c.forEach((h) => {
        a[h[0]] = f;
      });
    }
    /* Views uid1 and uid2 need to be locked so that they always maintain the current
     * zoom and translation difference.
     * @param uid1: The view that the lock was called from
     * @param uid2: The view that the lock was called on (the view that was selected)
     */
  }, {
    key: "handleLocationLockChosen",
    value: function(i, o) {
      if (i === o) {
        this.setState({
          chooseViewHandler: null
        });
        return;
      }
      this.addLock(i, o, this.locationLocks, this.viewScalesLockData.bind(this)), this.setState({
        chooseViewHandler: null
      });
    }
    /* Views uid1 and uid2 need to be locked so that they always maintain the current
     * zoom and translation difference.
     * @param uid1: The view that the lock was called from
     * @param uid2: The view that the lock was called on (the view that was selected)
     */
  }, {
    key: "handleZoomLockChosen",
    value: function(i, o) {
      if (i === o) {
        this.setState({
          chooseViewHandler: null
        });
        return;
      }
      this.addLock(i, o, this.zoomLocks, this.viewScalesLockData.bind(this)), this.setState({
        chooseViewHandler: null
      });
    }
    /**
     * We want to project the viewport of fromView onto toTrack of toView.
     *
     * @param fromView: The uid of the view that we want to project
     * @param toView: The uid of the view that we want to project to
     * @param toTrack: The track we want to project to
     *
     * Returns
     * -------
     *
     *  newTrackUid: string
     *      The uid of the newly created viewport projection track
     */
  }, {
    key: "handleViewportProjected",
    value: function(i, o, a) {
      let s = null;
      if (i === o)
        console.warn("A view can not show its own viewport.");
      else {
        const l = Zi(this.state.views[o].tracks, a), u = Jm(this.state.views[o].tracks, a);
        s = Gt.nice();
        const f = {
          uid: s,
          type: `viewport-projection-${{
            top: "horizontal",
            bottom: "horizontal",
            center: "center",
            left: "vertical",
            right: "vertical"
          }[u]}`,
          fromViewUid: i
        };
        this.addCallbacks(o, f), this.handleTrackAdded(o, f, u, l);
      }
      return this.setState({
        chooseTrackHandler: null
      }), s;
    }
    /**
     * Uid1 is copying the center of uid2
     */
  }, {
    key: "handleLocationYanked",
    value: function(i, o) {
      const a = this.xScales[o], s = this.yScales[o], l = this.xScales[i], u = this.yScales[i], [c, f, h] = un(l, u), [d, p, m] = un(a, s);
      this.setCenters[i](d, p, h, true), this.setState({
        chooseViewHandler: null
      });
    }
    /**
     * Uid1 yanked the zoom of uid2, now  make sure that they're synchronized.
     */
  }, {
    key: "handleZoomYanked",
    value: function(i, o) {
      const a = this.xScales[o], s = this.yScales[o], l = this.xScales[i], u = this.yScales[i], [c, f, h] = un(l, u), [d, p, m] = un(a, s);
      this.setCenters[i](c, f, m, true), this.setState({
        chooseViewHandler: null
      });
    }
    /**
     * The user has chosen a position for the new track. The actual
     * track selection will be handled by TiledPlot
     *
     * We just need to close the menu here.
     */
  }, {
    key: "handleTrackPositionChosen",
    value: function(i, o) {
      this.setState({
        addTrackPosition: o,
        addTrackPositionView: i
      });
    }
    /**
     * Update the height of each row in the layout so that it takes up all
     * of the available space in the div.
     */
  }, {
    key: "updateRowHeight",
    value: function() {
      if (!this.props.options || this.sizeMode !== FG || this.props.options.pixelPreciseMarginPadding)
        return;
      const i = this.element.parentNode.clientHeight;
      let o = 0;
      for (const f of mr(this.state.views))
        o = Math.max(o, f.layout.y + f.layout.h);
      this.handleDragStart(), this.handleDragStop();
      const s = (this.isEditable() ? 10 : 0) * o - 1, u = (i - s) / o, c = Math.floor(u);
      this.setState({
        rowHeight: c
      });
    }
    /**
     * Notify the children that the layout has changed so that they
     * know to redraw themselves
     */
  }, {
    key: "handleLayoutChange",
    value: function(i) {
      this.element && (i.forEach((o) => {
        const a = this.state.views[o.i];
        a && (a.layout.x = o.x, a.layout.y = o.y, a.layout.w = o.w, a.layout.h = o.h, a.layout.i = o.i);
      }), this.updateRowHeight(), this.refreshView(wm));
    }
    /**
     * Maybe somebody started dragging again before the previous drag
     * timeout fired. In that case, we need to clear this timeout so
     * that it doesn't override a previously set one.
     */
  }, {
    key: "clearDragTimeout",
    value: function() {
      this.dragTimeout && (clearTimeout(this.dragTimeout), this.dragTimeout = null);
    }
  }, {
    key: "getTrackInfo",
    value: function(i) {
      if (Tr[i])
        return Tr[i];
      if (this.pluginTracks && this.pluginTracks[i])
        return this.pluginTracks[i].config;
      if (window.higlassTracksByType && window.higlassTracksByType[i])
        return window.higlassTracksByType[i].config;
      console.warn("Track type not found:", i, "(check app/scripts/config/ for a list of defined track types)");
    }
  }, {
    key: "forceRefreshView",
    value: function() {
      this.setState(this.state);
    }
  }, {
    key: "refreshView",
    value: function(i = _V) {
      this.clearDragTimeout(), this.notifyDragChangedListeners(true), this.clearDragTimeout(), this.dragTimeout = setTimeout(() => {
        this.notifyDragChangedListeners(false);
      }, i);
    }
  }, {
    key: "handleDragStart",
    value: function() {
      this.clearDragTimeout(), this.notifyDragChangedListeners(true);
    }
  }, {
    key: "handleDragStop",
    value: function() {
      this.clearDragTimeout(), this.dragTimeout = setTimeout(() => {
        this.notifyDragChangedListeners(false);
      }, wm);
    }
  }, {
    key: "resizeHandler",
    value: function() {
      E1(this.viewHeaders).filter((i) => i).forEach((i) => i.checkWidth());
    }
    /**
     * Get the dimensions for this view, counting just the tracks
     * that are present in it
     *
     * @param view: A view containing a list of tracks as a member.
     * @return: A width and a height pair (e.g. [width, height])
     */
  }, {
    key: "calculateViewDimensions",
    value: function(i) {
      let u = this.viewMarginTop + this.viewMarginBottom + this.viewPaddingTop + this.viewPaddingBottom, c = this.viewMarginLeft + this.viewMarginRight + this.viewPaddingLeft + this.viewPaddingRight, f = 0;
      f += 10;
      const h = 20;
      if (i.tracks.top)
        for (let E = 0; E < i.tracks.top.length; E++) {
          const P = i.tracks.top[E];
          u += P.height ? P.height : 20, f += P.height ? P.height : 20;
        }
      if (i.tracks.bottom)
        for (let E = 0; E < i.tracks.bottom.length; E++) {
          const P = i.tracks.bottom[E];
          u += P.height ? P.height : 20, f += P.height ? P.height : 20;
        }
      (i.tracks.left && i.tracks.left.length > 0 || i.tracks.right && i.tracks.right.length > 0 || i.tracks.center && i.tracks.center.length > 0) && (f += h);
      let d = 0;
      if (i.tracks.left)
        for (let E = 0; E < i.tracks.left.length; E++) {
          const P = i.tracks.left[E], A = P.height ? P.height : 100;
          c += P.width ? P.width : 0, d = Math.max(d, A);
        }
      let p = 0;
      if (i.tracks.right)
        for (let E = 0; E < i.tracks.right.length; E++) {
          const P = i.tracks.right[E], A = P.height ? P.height : 100;
          c += P.width ? P.width : 0, p = Math.max(p, A);
        }
      const m = Math.max(d, p);
      let g = 0, v = 0;
      if (i.tracks.center && mr(i.tracks.center).length > 0) {
        if (!i.tracks.center[0].contents || i.tracks.center[0].contents.length > 0) {
          let E = null, P = null;
          if (i.tracks.center[0].contents)
            for (const A of i.tracks.center[0].contents)
              E = Math.max(E, A.height ? A.height : 100), P = Math.max(P, A.width ? A.width : 100);
          else
            E = i.tracks.center[0].height ? i.tracks.center[0].height : 100, P = i.tracks.center[0].width ? i.tracks.center[0].width : 100;
          u += E, c += P;
        }
      } else
        (i.tracks.top && mr(i.tracks.top).length > 1 || i.tracks.bottom && mr(i.tracks.bottom).length > 1) && (i.tracks.left && mr(i.tracks.left).length || i.tracks.right && mr(i.tracks.right).length) && (v = 100, g = 100);
      m > g ? u += m : u += g;
      let _ = 0, y = 0, b = 0, T = 0;
      return "top" in i.tracks && (_ = i.tracks.top.map((E) => E.height ? E.height : 20).reduce((E, P) => E + P, 0)), "bottom" in i.tracks && (y = i.tracks.bottom.map((E) => E.height ? E.height : 20).reduce((E, P) => E + P, 0)), "left" in i.tracks && (b = i.tracks.left.map((E) => E.width ? E.width : 0).reduce((E, P) => E + P, 0)), "right" in i.tracks && (T = i.tracks.right.map((E) => E.width ? E.width : 0).reduce((E, P) => E + P, 0)), {
        totalWidth: c,
        totalHeight: u,
        topHeight: _,
        bottomHeight: y,
        leftWidth: b,
        rightWidth: T,
        centerWidth: v,
        centerHeight: g,
        minNecessaryHeight: f
      };
    }
  }, {
    key: "calculateZoomLimits",
    value: function(i, o) {
      const a = [0, 1 / 0], s = i.zoomLimits || [1, null], l = o[1] - o[0];
      if (s.length !== 2)
        return a;
      if (s[0] !== null && s[0] > 0) {
        const u = l / s[0];
        a[1] = Math.max(u, 1), u < 1 && console.warn(`Invalid zoom limits. Lower limit set to ${l}`);
      }
      if (s[1] !== null && s[1] > s[0]) {
        const u = l / s[1];
        a[0] = Math.min(u, 1), u > 1 && console.warn(`Invalid zoom limits. Upper limit set to ${l}`);
      }
      return a;
    }
  }, {
    key: "generateViewLayout",
    value: function(i) {
      let o = null;
      return "layout" in i ? {
        layout: o
      } = i.layout : o = {
        x: 0,
        y: 0,
        w: BG,
        h: dot
      }, o;
    }
    /**
     * Remove all the tracks from a view
     *
     * @param {viewUid} Thie view's identifier
     */
  }, {
    key: "handleClearView",
    value: function(i) {
      const {
        views: o
      } = this.state;
      o[i].tracks.top = [], o[i].tracks.bottom = [], o[i].tracks.center = [], o[i].tracks.left = [], o[i].tracks.right = [], o[i].tracks.whole = [], this.setState({
        views: o
      });
    }
    /**
     * A view needs to be closed. Remove it from from the viewConfig and then clean
     * up all of its connections (zoom links, workers, etc...)
     *
     * @param {uid} This view's identifier
     */
  }, {
    key: "handleCloseView",
    value: function(i) {
      mr(this.state.views).length !== 1 && (this.handleUnlock(i, this.zoomLocks), this.setState((o) => (delete o.views[i], {
        views: this.removeInvalidTracks(o.views)
      })));
    }
    /**
     * We're adding a new dataset to an existing track
     *
     * @param newTrack: The new track to be added.
     * @param position: Where the new series should be placed.
     *  (This could also be inferred from the hostTrack, but since
     *  we already have it, we might as well use it)
     * @param hostTrack: The track that will host the new series.
     */
  }, {
    key: "handleSeriesAdded",
    value: function(i, o, a, s) {
      const {
        tracks: l
      } = this.state.views[i];
      if (s.type === "combined")
        s.contents.push(o), o.type === "heatmap" && this.compatibilityfyStackedHeatmaps(o, s);
      else {
        const u = {
          type: "combined",
          uid: Gt.nice(),
          height: s.height,
          width: s.width,
          contents: [s, o]
        }, c = l[a];
        for (let f = 0; f < c.length; f++)
          c[f].uid === s.uid && (c[f] = u);
      }
      this.setState((u) => ({
        views: u.views
      }));
    }
  }, {
    key: "handleNoTrackAdded",
    value: function() {
      this.state.addTrackPosition && this.setState({
        addTrackPosition: null
      });
    }
    /**
     * Add multiple new tracks (likely from the AddTrackModal dialog)
     *
     * @param trackInfo: A JSON object that can be used as a track
     *                   definition
     * @param position: The position the track is being added to
     * @param host: If this track is being added to another track
     */
  }, {
    key: "handleTracksAdded",
    value: function(i, o, a, s) {
      this.storeTrackSizes(i);
      for (const l of o)
        this.handleTrackAdded(i, l, a, s);
    }
    /**
     * Change the type of a track. For example, convert a line to a bar track.
     *
     * Parameters
     * ----------
     *  viewUid: string
     *    The view containing the track to be changed
     *  trackUid: string
     *    The uid identifying the existin track
     *  newType: string
     *    The type to switch this track to.
     */
  }, {
    key: "handleChangeTrackType",
    value: function(i, o, a) {
      const s = this.state.views[i], l = Zi(s.tracks, o), u = l.uid;
      l.uid = Gt.nice(), l.type = a;
      const c = l.uid;
      this.updateTrackLocks(i, u, c), this.setState((f) => ({
        views: f.views
      }));
    }
    /**
     * Change the data source for a track. E.g. when adding or
     * removing a divisor.
     *
     * Parameters
     * ----------
     *  viewUid: string
     *    The view containing the track to be changed
     *  trackUid: string
     *    The uid identifying the existin track
     *  newData: object
     *    The new data source section
     */
  }, {
    key: "handleChangeTrackData",
    value: function(i, o, a) {
      const s = this.state.views[i], l = Zi(s.tracks, o);
      l.uid = Gt.nice(), l.data = a, this.setState((u) => ({
        views: u.views
      }));
    }
    /**
     * A track was added from the AddTrackModal dialog.
     *
     * @param trackInfo: A JSON object that can be used as a track
     *                   definition
     * @param position: The position the track is being added to
     * @param host: If this track is being added to another track
     *
     * @returns {Object}: A trackConfig (\{ uid: "", width: x \})
     *  describing this track
     */
  }, {
    key: "handleTrackAdded",
    value: function(i, o, a, s = null) {
      if (this.addDefaultTrackOptions(o), o.uid || (o.uid = Gt.nice()), o.contents)
        for (const f of o.contents)
          this.addDefaultTrackOptions(f);
      if (this.state.addTrackPosition && this.setState({
        addTrackPosition: null
      }), s)
        return this.handleSeriesAdded(i, o, a, s), null;
      o.position = a;
      const l = this.getTrackInfo(o.type);
      o.width = l.defaultWidth || l.defaultOptions && l.defaultOptions.minWidth || this.minVerticalWidth, o.height = l.defaultHeight || l.defaultOptions && l.defaultOptions.minHeight || this.minHorizontalHeight;
      const {
        tracks: u
      } = this.state.views[i];
      let c = 0;
      if (hs(u, () => c++), a === "left" || a === "top")
        u[a].unshift(o);
      else if (a === "center")
        if (u.center.length === 0) {
          const f = {
            uid: Gt.nice(),
            type: "combined",
            contents: [o]
          };
          u.center = [f];
        } else if (u.center[0].type === "combined")
          u.center[0].contents.push(o), o.type === "heatmap" && this.compatibilityfyStackedHeatmaps(o, u.center[0]);
        else {
          const f = {
            uid: Gt.nice(),
            type: "combined",
            contents: [u.center[0], o]
          };
          u.center = [f], o.type === "heatmap" && this.compatibilityfyStackedHeatmaps(o, f);
        }
      else
        u[a] || (u[a] = []), u[a].push(o);
      return this.adjustLayoutToTrackSizes(this.state.views[i]), Object.keys(this.state.views).length === 1 && c === 0 && (this.handleZoomToData(i), this.zoomToDataExtentOnInit.add(i)), o;
    }
    /**
     * We're adding a new heatmap to a combined track. We need to make sure that
     * their options are compatible.
     *
     * @param   {object}  newTrack  New heatmap track
     * @param   {object}  combinedTrack  Combined track the new heatmap is added to
     */
  }, {
    key: "compatibilityfyStackedHeatmaps",
    value: function(i, o) {
      let a;
      o.contents.some((l) => (a = l, l.type === "heatmap")) && (i.options.backgroundColor = "transparent", i.options.showTooltip = a.options.showTooltip, i.options.showMousePosition = a.options.showMousePosition, i.options.mousePositionColor = a.options.mousePositionColor);
    }
    /**
     * Go through each track and store its size in the viewconf.
     *
     * This is so that sizes don't get lost when the view is unbounded
     * and new tracks are added.
     *
     * Parameters
     * ----------
     *
     *  viewId : string
     *      The id of the view whose tracks we're measuring
     *
     * Returns
     * -------
     *
     *  Nothing
     */
  }, {
    key: "storeTrackSizes",
    value: function(i) {
      hs(this.state.views[i].tracks, (o) => {
        const a = this.tiledPlots[i].trackRenderer.getTrackObject(o.uid);
        a && ([o.width, o.height] = a.dimensions);
      });
    }
    /*
     * Adjust the layout to match the size of the contained tracks. If tracks
     * are added, the layout size needs to expand. If they're removed, it needs
     * to contract.
     *
     * This function should be called from handleTrackAdded and handleCloseTrack.
     *
     * Parameters
     * ----------
     *
     *  view : {...}
     *      The definition from the viewconf
     */
  }, {
    key: "adjustLayoutToTrackSizes",
    value: function(i) {
      if (!i.layout)
        return;
      const o = this.isEditable();
      let a = 0;
      o && (a += pot);
      const {
        totalHeight: s
      } = this.calculateViewDimensions(i);
      a += s;
      const l = this.isEditable() ? 10 : 0;
      a += l;
      const u = this.state.rowHeight + l;
      this.sizeMode !== FG && (i.layout.h = Math.ceil(a / u));
    }
  }, {
    key: "handleCloseTrack",
    value: function(i, o) {
      const {
        tracks: a
      } = this.state.views[i];
      this.handleUnlockValueScale(i, o);
      for (const s in a) {
        const l = a[s], u = l.filter((c) => c.uid !== o);
        u.length === l.length ? u.filter((f) => f.type === "combined").forEach((f) => {
          f.contents = f.contents.filter((h) => h.uid !== o);
        }) : a[s] = u;
      }
      return this.storeTrackSizes(i), this.adjustLayoutToTrackSizes(this.state.views[i]), this.setState((s) => ({
        views: s.views
      })), this.state.views;
    }
  }, {
    key: "handleLockValueScale",
    value: function(i, o) {
      this.setState({
        chooseTrackHandler: (a, s) => this.handleValueScaleLocked(i, o, a, s)
      });
    }
  }, {
    key: "combineViewAndTrackUid",
    value: function(i, o) {
      const a = `${i}.${o}`;
      if (this.combinedUidToViewTrack[a] = {
        view: i,
        track: o
      }, this.viewTrackUidsToCombinedUid[i]) {
        if (this.viewTrackUidsToCombinedUid[o])
          return this.viewTrackUidsToCombinedUid[i][o];
        this.viewTrackUidsToCombinedUid[i][o] = a;
      } else
        this.viewTrackUidsToCombinedUid[i] = {}, this.viewTrackUidsToCombinedUid[i][o] = a;
      return a;
    }
    /**
     * Update all locks involving this track to use a new track uid.
     *
     * @param  {string} viewUid The view's uid
     * @param  {string} oldTrackUid The track's old uid
     * @param  {string} newTrackUid The track's new uid
     */
  }, {
    key: "updateTrackLocks",
    value: function(i, o, a) {
      const s = this.combineViewAndTrackUid(i, o), l = this.combineViewAndTrackUid(i, a);
      if (this.valueScaleLocks[s]) {
        const u = this.valueScaleLocks[s];
        this.valueScaleLocks[l] = u, delete this.valueScaleLocks[s];
      }
      for (const u in this.valueScaleLocks)
        if (this.valueScaleLocks[u][s]) {
          const c = this.valueScaleLocks[u][s];
          this.valueScaleLocks[u][l] = c, c.track = a, delete this.valueScaleLocks[u][s];
        }
    }
  }, {
    key: "handleUnlockValueScale",
    value: function(i, o) {
      if (this.tiledPlots[i].trackRenderer.getTrackObject(o).createdTracks) {
        const a = mo(this.tiledPlots[i].trackRenderer.getTrackObject(o).createdTracks);
        for (const s of a)
          this.handleUnlock(this.combineViewAndTrackUid(i, s), this.valueScaleLocks);
      } else
        this.handleUnlock(this.combineViewAndTrackUid(i, o), this.valueScaleLocks);
    }
  }, {
    key: "handleValueScaleLocked",
    value: function(i, o, a, s) {
      if (this.tiledPlots[i].trackRenderer.getTrackObject(o).createdTracks) {
        const c = mo(this.tiledPlots[i].trackRenderer.getTrackObject(o).createdTracks);
        for (const f of c)
          this.handleValueScaleLocked(i, f, a, s);
        return;
      }
      if (this.tiledPlots[a].trackRenderer.getTrackObject(s).createdTracks) {
        const c = mo(this.tiledPlots[a].trackRenderer.getTrackObject(s).createdTracks);
        for (const f of c)
          this.handleValueScaleLocked(i, o, a, f);
        return;
      }
      const l = this.combineViewAndTrackUid(i, o), u = this.combineViewAndTrackUid(a, s);
      this.addLock(l, u, this.valueScaleLocks, (c) => this.combinedUidToViewTrack[c]), this.syncValueScales(i, o), this.setState({
        chooseTrackHandler: null
      });
    }
    /**
     * Add callbacks for functions that need them
     *
     * Done in place.
     *
     * @param track: A view with tracks.
     */
  }, {
    key: "addCallbacks",
    value: function(i, o) {
      const a = this.getTrackInfo(o.type);
      if (o.type === "viewport-projection-center" || o.type === "viewport-projection-horizontal" || o.type === "viewport-projection-vertical" || a && a.projection) {
        const s = o.fromViewUid;
        o.registerViewportChanged = (l, u) => this.addScalesChangedListener(s, l, u), o.removeViewportChanged = (l) => this.removeScalesChangedListener(s, l), o.setDomainsCallback = (l, u) => {
          if (!s) {
            this.projectionXDomains[i] || (this.projectionXDomains[i] = {}), this.projectionYDomains[i] || (this.projectionYDomains[i] = {}), (o.type === "viewport-projection-horizontal" || o.type === "viewport-projection-center") && (this.projectionXDomains[i][o.uid] = l), (o.type === "viewport-projection-vertical" || o.type === "viewport-projection-center") && (this.projectionYDomains[i][o.uid] = u), this.triggerViewChangeDb();
            return;
          }
          const c = It().domain(l).range(this.xScales[s].range()), f = It().domain(u).range(this.yScales[s].range()), [h, d, p] = un(c, f);
          this.setCenters[s](h, d, p, false);
          let m = false, g = false;
          i in this.zoomLocks && (m = s in this.zoomLocks[i]), m && this.handleUnlock(i, this.zoomLocks), i in this.locationLocks && (g = s in this.locationLocks[i]), g && this.handleUnlock(i, this.locationLocks), this.handleScalesChanged(s, c, f, true), m && this.addLock(i, s, this.zoomLocks, this.viewScalesLockData), g && this.addLock(i, s, this.locationLocks, this.viewScalesLockData);
        };
      }
    }
  }, {
    key: "validateLocks",
    value: function(i) {
      const o = [];
      for (const a of mo(i))
        (!i[a] || !i[a][a]) && o.push(a);
      for (const a of o)
        i[a] && (console.warn(`View ${a} not present in lock group. Removing...`), this.handleUnlock(a, i), delete i[a]);
    }
  }, {
    key: "deserializeLocationLocks",
    value: function(i) {
      if (this.locationLocks = {}, i.locationLocks)
        for (const o of mo(i.locationLocks.locksByViewUid))
          if (typeof i.locationLocks.locksByViewUid[o] != "object")
            this.locationLocks[o] = i.locationLocks.locksDict[i.locationLocks.locksByViewUid[o]];
          else {
            if ("x" in i.locationLocks.locksByViewUid[o]) {
              const a = i.locationLocks.locksDict[i.locationLocks.locksByViewUid[o].x.lock];
              this.locationLocksAxisWise.x[o] = {
                lock: a,
                axis: i.locationLocks.locksByViewUid[o].x.axis
                // The axis of another view, either 'x' or 'y'
              };
            }
            if ("y" in i.locationLocks.locksByViewUid[o]) {
              const a = i.locationLocks.locksDict[i.locationLocks.locksByViewUid[o].y.lock];
              this.locationLocksAxisWise.y[o] = {
                lock: a,
                axis: i.locationLocks.locksByViewUid[o].y.axis
                // The axis of another view, either 'x' or 'y'
              };
            }
          }
      this.validateLocks(this.locationLocks);
    }
  }, {
    key: "deserializeZoomLocks",
    value: function(i) {
      if (this.zoomLocks = {}, i.zoomLocks)
        for (const o of mo(i.zoomLocks.locksByViewUid))
          this.zoomLocks[o] = i.zoomLocks.locksDict[i.zoomLocks.locksByViewUid[o]];
      this.validateLocks(this.zoomLocks);
    }
  }, {
    key: "deserializeValueScaleLocks",
    value: function(i) {
      if (this.valueScaleLocks = {}, i.valueScaleLocks)
        for (const o of mo(i.valueScaleLocks.locksByViewUid))
          this.valueScaleLocks[o] = i.valueScaleLocks.locksDict[i.valueScaleLocks.locksByViewUid[o]];
    }
  }, {
    key: "serializeLocks",
    value: function(i) {
      const o = {}, a = {};
      for (const s of mo(i)) {
        let l = i[s] && i[s].uid;
        l || (l = Gt.nice()), i[s].uid = l, o[l] = i[s], a[s] = i[s].uid;
      }
      return {
        locksByViewUid: a,
        locksDict: o
      };
    }
  }, {
    key: "getViewsAsJson",
    value: function() {
      const i = JSON.parse(JSON.stringify(this.state.viewConfig));
      return i.views = Object.values(this.state.views).map((o) => {
        const a = JSON.parse(JSON.stringify(o));
        return hs(a.tracks, (s) => {
          if (s.server) {
            const l = Nfe(s.server, {});
            if (!l.hostname.length) {
              const u = window.location.host, {
                protocol: c
              } = window.location, f = `${c}//${u}${l.pathname}`;
              s.server = f;
            }
          }
          (s.type === "viewport-projection-center" || s.type === "viewport-projection-horizontal") && this.projectionXDomains[o.uid] && this.projectionXDomains[o.uid][s.uid] && (s.projectionXDomain = this.projectionXDomains[o.uid][s.uid]), (s.type === "viewport-projection-center" || s.type === "viewport-projection-vertical") && this.projectionYDomains[o.uid] && this.projectionYDomains[o.uid][s.uid] && (s.projectionYDomain = this.projectionYDomains[o.uid][s.uid]), delete s.name, delete s.position, delete s.header, delete s.description, delete s.created, delete s.project, delete s.project_name, delete s.serverUidKey, delete s.uuid, delete s.private, delete s.maxZoom, delete s.coordSystem, delete s.coordSystem2, delete s.datatype, delete s.maxWidth, delete s.datafile, delete s.binsPerDimension, delete s.resolutions, delete s.aggregationModes;
        }), a.uid = o.uid, a.initialXDomain = this.xScales[o.uid].domain(), a.initialYDomain = this.yScales[o.uid].domain(), delete a.layout.i, a;
      }), i.zoomLocks = this.serializeLocks(this.zoomLocks), i.locationLocks = this.serializeLocks(this.locationLocks), i.valueScaleLocks = this.serializeLocks(this.valueScaleLocks), i;
    }
  }, {
    key: "getViewsAsString",
    value: function() {
      return JSON.stringify(this.getViewsAsJson(), null, 2);
    }
  }, {
    key: "handleExportViewAsJSON",
    value: function() {
      const i = this.getViewsAsString();
      Qm("viewconf.json", i);
    }
  }, {
    key: "handleExportViewsAsLink",
    value: function(i = this.state.viewConfig.exportViewUrl, o = false) {
      const a = new URL(i, window.location.origin), s = fetch(i, {
        method: "POST",
        headers: {
          Accept: "application/json, text/plain, */*",
          "Content-Type": "application/json",
          "X-Requested-With": "XMLHttpRequest"
        },
        body: `{"viewconf":${this.getViewsAsString()}}`,
        credentials: "same-origin"
      }).then((l) => {
        if (!l.ok)
          throw l;
        return l.json();
      }).catch((l) => {
        console.warn("err:", l);
      }).then((l) => ({
        id: l.uid,
        url: `${a.origin}/l/?d=${l.uid}`
      }));
      return o || s.then((l) => {
        this.openModal(import_react.default.createElement(ML, {
          onDone: () => {
            this.closeModalBound();
          },
          url: l.url
        }));
      }).catch((l) => console.error("Exporting view config as link failed:", l)), s;
    }
    /*
     * The initial[XY]Domain of a view has changed. Update its definition
     * and rerender.
     */
  }, {
    key: "handleDataDomainChanged",
    value: function(i, o, a) {
      const {
        views: s
      } = this.state;
      if (s[i].initialXDomain = o, s[i].initialYDomain = a, this.xScales[i] = It().domain(o), this.yScales[i] = It().domain(a), this.zoomLocks[i]) {
        const l = this.zoomLocks[i], u = vo(l);
        for (let c = 0; c < u.length; c++) {
          const f = u[c][0];
          f in this.locationLocks && (s[f].initialXDomain = o, s[f].initialYDomain = a, this.xScales[f] = It().domain(o), this.yScales[f] = It().domain(a));
        }
      }
      this.setState({
        views: s
      });
    }
    /**
     * Check if we can place a view at this position
     */
  }, {
    key: "viewPositionAvailable",
    value: function(i, o, a, s) {
      const l = i + a, u = o + s;
      if (i + a > BG)
        return false;
      const c = mr(this.state.views);
      for (let f = 0; f < c.length; f++) {
        const h = c[f].layout.x, d = c[f].layout.y, p = h + c[f].layout.w, m = d + c[f].layout.h;
        if (i < p && l > h && o < m && u > d)
          return false;
      }
      return true;
    }
    /**
     * User clicked on the "Add View" button. We'll duplicate the last
     * view.
     */
  }, {
    key: "handleAddView",
    value: function(i) {
      const o = mr(this.state.views), a = i, s = [];
      i.layout.w === 12 && (i.layout.w = 6);
      for (let c = 0; c < o.length; c++) {
        let f = o[c].layout.x + o[c].layout.w, h = o[c].layout.y;
        this.viewPositionAvailable(f, h, i.layout.w, i.layout.h) && s.push([f, h]), f = o[c].layout.x, h = o[c].layout.y + o[c].layout.h, this.viewPositionAvailable(f, h, i.layout.w, i.layout.h) && s.push([f, h]);
      }
      s.sort((c, f) => {
        const h = c[1] - f[1];
        return h === 0 ? c[0] - f[0] : h;
      });
      const l = JSON.stringify(a), u = JSON.parse(l);
      u.initialXDomain = this.xScales[u.uid].domain(), u.initialYDomain = this.yScales[u.uid].domain(), [[u.layout.x, u.layout.y]] = s, u.uid = Gt.nice(), u.layout.i = u.uid, hs(u.tracks, (c) => {
        this.addCallbacks(u.uid, c);
      }), this.setState((c) => {
        const f = JSON.parse(JSON.stringify(c.views));
        return f[u.uid] = u, {
          views: f
        };
      });
    }
  }, {
    key: "handleSelectedAssemblyChanged",
    value: function(i, o, a, s) {
      const {
        views: l
      } = this.state;
      l[i].genomePositionSearchBox.chromInfoId = o, l[i].genomePositionSearchBox.autocompleteId = a, l[i].genomePositionSearchBox.autocompleteServer = s;
    }
  }, {
    key: "createGenomePostionSearchBoxEntry",
    value: function(i, o) {
      let a = i;
      const s = {
        autocompleteServer: SP,
        // "autocompleteId": "OHJakQICQD6gTD7skx4EWA",
        chromInfoServer: SP,
        visible: false
      };
      return a || (a = JSON.parse(JSON.stringify(s))), a.autocompleteServer || (a.autocompleteServer = s.autocompleteServer), a.chromInfoId || (a.chromInfoId = o), a.chromInfoServer || (a.chromInfoServer = s.chromInfoServer), a.visible || (a.visible = false), a;
    }
  }, {
    key: "handleTogglePositionSearchBox",
    value: function(i) {
      const o = this.state.views[i];
      o.genomePositionSearchBoxVisible = !o.genomePositionSearchBoxVisible;
      const a = {};
      hs(o.tracks, (u) => {
        u.coordSystem && (a[u.coordSystem] || (a[u.coordSystem] = 0), a[u.coordSystem] += 1);
      });
      const s = vo(a).sort((u, c) => c[1] - u[1]);
      let l = "hg19";
      s.length && (l = s[0][0]), o.genomePositionSearchBox = this.createGenomePostionSearchBoxEntry(o.genomePositionSearchBox, l), o.genomePositionSearchBox.visible = !o.genomePositionSearchBox.visible, this.refreshView(), this.setState({
        configMenuUid: null
      });
    }
  }, {
    key: "handleTrackOptionsChanged",
    value: function(i, o, a) {
      const s = this.state.views[i], l = Zi(s.tracks, o);
      l && (l.options = Object.assign(l.options, a), this.mounted && (this.setState((u) => ({
        views: u.views
      })), this.adjustSplitHeatmapTrackOptions(l, a, s.tracks, i)));
    }
    /**
     * For convenience we adjust some options of split heatmap tracks when they are newly added.
     * This function has no effect when we get split heatmap tracks that are already correctly configured
     * (i.e. correctly set "lower-extend"/"upper-extend" options)
     * @param   {object}  track  Track whose options have changed
     * @param   {object}  options  New track options
     * @param   {list}  allTracks  All tracks
     * @param   {string}  viewUid  Related view UID
     */
  }, {
    key: "adjustSplitHeatmapTrackOptions",
    value: function(i, o, a, s) {
      i.type === "heatmap" && (o.extent === "upper-right" && a.center[0].type === "combined" && a.center[0].contents.length > 1 && a.center[0].contents.some((l) => {
        if (l.type === "heatmap" && l.uid !== i.uid && l.options.extent !== "lower-left") {
          const u = {
            ...l.options,
            extent: "lower-left",
            labelPosition: "bottomLeft",
            colorbarPosition: "bottomLeft"
          }, c = {
            ...o,
            labelPosition: "topRight",
            colorbarPosition: "topRight"
          };
          return this.handleTrackOptionsChanged(s, l.uid, u), this.handleTrackOptionsChanged(s, i.uid, c), true;
        }
        return false;
      }), o.extent === "lower-left" && o.extent === "lower-left" && a.center[0].type === "combined" && a.center[0].contents.length > 1 && a.center[0].contents.some((l) => {
        if (l.type === "heatmap" && l.uid !== i.uid && l.options.extent !== "upper-right") {
          const u = {
            ...l.options,
            extent: "upper-right",
            labelPosition: "topRight",
            colorbarPosition: "topRight"
          }, c = {
            ...o,
            labelPosition: "bottomLeft",
            colorbarPosition: "bottomLeft"
          };
          return this.handleTrackOptionsChanged(s, l.uid, u), this.handleTrackOptionsChanged(s, i.uid, c), true;
        }
        return false;
      }));
    }
  }, {
    key: "handleViewOptionsChanged",
    value: function(i, o) {
      const a = this.state.views[i];
      a && (a.options = Object.assign(a.options || {}, o), this.mounted && this.setState((s) => ({
        views: s.views
      })));
    }
    /**
     * Determine whether a track is valid and can be displayed.
     *
     * Tracks can be invalid due to inconsistent input such as
     * referral to views that don't exist
     *
     * @param track (object): A track definition
     * @param viewUidsPresent (Set): The view uids which are available
     */
  }, {
    key: "isTrackValid",
    value: function(i, o) {
      return !(i.type === "viewport-projection-center" && !o.has(i.fromViewUid));
    }
    /**
     * Remove tracks which can no longer be shown (possibly because the views they
     * refer to no longer exist
     */
  }, {
    key: "removeInvalidTracks",
    value: function(i) {
      const o = new Set(mo(i));
      for (const a of mr(i))
        for (const s of ["left", "top", "center", "right", "bottom"])
          a.tracks && a.tracks.hasOwnProperty(s) && (a.tracks[s] = a.tracks[s].filter((l) => this.isTrackValid(l, o)), a.tracks[s].forEach((l) => {
            l.type === "combined" && (l.contents = l.contents.filter((u) => this.isTrackValid(u, o)));
          }));
      return i;
    }
  }, {
    key: "processViewConfig",
    value: function(i) {
      let {
        views: o
      } = i, a = {};
      return (!i.views || i.views.length === 0) && (console.warn("No views provided in viewConfig"), o = [{
        editable: true,
        tracks: {}
      }]), o.forEach((s) => {
        s.tracks && kV(s.tracks), s.uid || (s.uid = Gt.nice()), a[s.uid] = s, this.zoomToDataExtentOnInit.has(s.uid) && this.zoomToDataExtentOnInit.delete(s.uid), s.initialXDomain ? (s.initialXDomain[0] = +s.initialXDomain[0], s.initialXDomain[1] = +s.initialXDomain[1]) : (s.initialXDomain = [0, 100], this.zoomToDataExtentOnInit.add(s.uid)), s.initialYDomain ? (s.initialXDomain[0] = +s.initialXDomain[0], s.initialXDomain[1] = +s.initialXDomain[1]) : s.initialYDomain = [s.initialXDomain[0], s.initialXDomain[1]], this.xScales[s.uid] || (this.xScales[s.uid] = It().domain(s.initialXDomain)), this.yScales[s.uid] || (this.yScales[s.uid] = It().domain(s.initialYDomain)), hs(s.tracks, (l) => {
          if (l.uid || (l.uid = Gt.nice()), this.addCallbacks(s.uid, l), this.addDefaultTrackOptions(l), l.contents)
            for (const u of l.contents)
              this.addDefaultTrackOptions(u);
        }), s.layout ? s.layout.i = s.uid : s.layout = this.generateViewLayout(s);
      }), this.deserializeZoomLocks(i), this.deserializeLocationLocks(i), this.deserializeValueScaleLocks(i), a = this.removeInvalidTracks(a), a;
    }
  }, {
    key: "handleWindowFocused",
    value: function() {
    }
    /**
     * Handle range selection events.
     *
     * @description
     * Store active range selectio and forward the range selection event to the
     * API.
     *
     * @param  {Array}  range  Double array of the selected range.
     */
  }, {
    key: "rangeSelectionHandler",
    value: function(i) {
      this.rangeSelection = i, this.apiPublish("rangeSelection", i);
    }
  }, {
    key: "offViewChange",
    value: function(i) {
      this.viewChangeListener.splice(i, 1);
    }
  }, {
    key: "onViewChange",
    value: function(i) {
      return this.viewChangeListener.push(i) - 1;
    }
  }, {
    key: "triggerViewChange",
    value: function() {
      this.viewChangeListener.forEach((i) => i(this.getViewsAsString()));
    }
  }, {
    key: "getGenomeLocation",
    value: function(i) {
      return XR.get(this.state.views[i].chromInfoPath).then((o) => QV(this.xScales[i], this.yScales[i], o));
    }
  }, {
    key: "offLocationChange",
    value: function(i, o) {
      this.removeScalesChangedListener(i, o);
    }
  }, {
    key: "zoomTo",
    value: function(i, o, a, s, l, u) {
      if (!(i in this.setCenters))
        throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);
      if (Number.isNaN(+o) || Number.isNaN(+a)) {
        const d = [o, a].join(", ");
        console.warn([`Invalid coordinates (${d}). All coordinates need to be numbers
        and should represent absolute coordinates (not chromosome
        coordinates).`].join(" "));
        return;
      }
      (Number.isNaN(+s) || Number.isNaN(+l) || s === null || l === null) && (s = o, l = a);
      const [c, f, h] = un(this.xScales[i].copy().domain([o, a]), this.yScales[i].copy().domain([s, l]));
      this.setCenters[i](c, f, h, false, u);
    }
  }, {
    key: "zoomToGene",
    value: function(i, o, a, s) {
      if (!(i in this.setCenters))
        throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);
      if (!this.state.views[i].genomePositionSearchBox || !this.state.views[i].genomePositionSearchBox.autocompleteServer || !this.state.views[i].genomePositionSearchBox.autocompleteId || !this.state.views[i].chromInfoPath) {
        console.warn("Please set chromInfoPath, autocompleteServer, and autocompleteId to use the zoomToGene API");
        return;
      }
      this.suggestGene(i, o, (l) => {
        if (l) {
          const u = l.find((c) => c.geneName.toLowerCase() === o.toLowerCase());
          if (u) {
            const {
              chr: c,
              txStart: f,
              txEnd: h
            } = u;
            Hs(this.state.views[i].chromInfoPath, (d) => {
              const p = d.chrToAbs([c, f]) - a, m = d.chrToAbs([c, h]) + a, [g, v, _] = un(this.xScales[i].copy().domain([p, m]), this.yScales[i].copy().domain([p, m]));
              this.setCenters[i](g, v, _, false, s);
            }, this.pubSub);
          } else
            console.warn(`Couldn't find the gene symbol: ${o}`);
        }
      });
    }
  }, {
    key: "suggestGene",
    value: function(i, o, a) {
      if (!(i in this.setCenters))
        throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);
      if (!this.state.views[i].genomePositionSearchBox || !this.state.views[i].genomePositionSearchBox.autocompleteServer || !this.state.views[i].genomePositionSearchBox.autocompleteId) {
        console.warn("Please set autocompleteServer and autocompleteId to use the suggestGene API");
        return;
      }
      const s = this.state.views[i].genomePositionSearchBox.autocompleteServer, l = this.state.views[i].genomePositionSearchBox.autocompleteId, u = `${s}/suggest/?d=${l}&ac=${o.toLowerCase()}`;
      Je.json(u, qo, this.pubSub).then((c) => {
        a(c);
      }).catch((c) => console.error(c));
    }
  }, {
    key: "onLocationChange",
    value: function(i, o, a) {
      const s = Object.keys(this.state.views);
      if (!s.length)
        return this.unsetOnLocationChange.push({
          viewId: i,
          callback: o,
          callbackId: a
        }), null;
      if (i = typeof i > "u" && s.length === 1 ? s[0] : i, typeof i > "u" || s.indexOf(i) === -1)
        return console.error("onLocationChange either missing a viewId or passed an invalid viewId: ", i), null;
      const l = this.state.views[i], u = (f, h) => {
        o({
          xDomain: f.domain(),
          yDomain: h.domain(),
          xRange: f.range(),
          yRange: h.range()
        });
      };
      let c = 1;
      return this.scalesChangedListeners[l.uid] && (c = Object.keys(this.scalesChangedListeners[l.uid]).filter((f) => f.indexOf(Am) === 0).map((f) => parseInt(f.slice(Am.length + 1), 10)).reduce((f, h) => Math.max(f, h), 0) + 1), this.addScalesChangedListener(l.uid, `${Am}.${c}`, u), a && a(`${Am}.${c}`), c;
    }
    /**
     * List all the views that are at the given position view position
     */
  }, {
    key: "getTiledPlotAtPosition",
    value: function(i, o) {
      let a;
      const s = mr(this.state.views);
      for (let l = 0; l < s.length; l++) {
        const u = this.tiledPlots[s[l].uid], c = this.tiledAreasDivs[s[l].uid].getBoundingClientRect(), {
          top: f,
          left: h
        } = c, d = f + c.height, p = h + c.width, m = i >= h && i <= p, g = o >= f && o <= d;
        if (m && g) {
          a = u;
          break;
        }
      }
      return a;
    }
    /**
     * Handle mousemove events by republishing the event using pubSub.
     *
     * @param {object}  e  Event object.
     */
  }, {
    key: "mouseMoveHandler",
    value: function(i) {
      if (!this.topDiv || this.state.modal)
        return;
      const o = i.clientX, a = i.clientY, s = vr(i, this.topDiv);
      s[1] += this.scrollTop;
      const l = this.getTiledPlotAtPosition(o, a), u = l ? l.listTracksAtPosition(s[0], s[1], true).map((m) => m.originalTrack || m) : [], c = u.find((m) => !m.isAugmentationTrack), f = c ? [s[0] - c.position[0], s[1] - c.position[1]] : s;
      let h = -1, d = -1;
      c && (h = c.flipText ? c._xScale.invert(f[1]) : c._xScale.invert(f[0]), d = c.is2d ? c._yScale.invert(f[1]) : h);
      const p = {
        x: s[0],
        y: s[1],
        relTrackX: c && c.flipText ? f[1] : f[0],
        relTrackY: c && c.flipText ? f[0] : f[1],
        dataX: h,
        dataY: d,
        // See below why we need these derived boolean values
        isFrom2dTrack: !!(c && c.is2d),
        isFromVerticalTrack: !!(c && c.flipText),
        track: c,
        origEvt: i,
        sourceUid: this.uid,
        hoveredTracks: u,
        // See below why we need these derived boolean values
        noHoveredTracks: u.length === 0
      };
      if (this.pubSub.publish("app.mouseMove", p), this.isBroadcastMousePositionGlobally) {
        const m = {
          ...p
        };
        m.origEvt = void 0, m.track = void 0, m.hoveredTracks = void 0, delete m.origEvt, delete m.track, delete m.hoveredTracks, Zm.publish("higlass.mouseMove", m);
      }
      this.apiPublish("cursorLocation", {
        absX: o,
        absY: a,
        relX: p.x,
        relY: p.y,
        relTrackX: p.relTrackX,
        relTrackY: p.relTrackY,
        dataX: p.dataX,
        dataY: p.dataY,
        isFrom2dTrack: p.isFrom2dTrack,
        isFromVerticalTrack: p.isFromVerticalTrack
      }), this.showHoverMenu(p);
    }
  }, {
    key: "getMinMaxValue",
    value: function(i, o, a, s) {
      const l = Om(this.tiledPlots, i, o);
      if (!l) {
        console.warn(`Track with ID: ${o} not found!`);
        return;
      }
      if (!l.minVisibleValueInTiles || !l.maxVisibleValueInTiles) {
        console.warn(`Track ${o} doesn't support the retrieval of min or max values.`);
        return;
      }
      return a && l.getAggregatedVisibleValue ? [l.getAggregatedVisibleValue("min"), l.getAggregatedVisibleValue("max")] : [l.minVisibleValueInTiles(s), l.maxVisibleValueInTiles(s)];
    }
    /**
     * Show a menu displaying some information about the track under it
     */
  }, {
    key: "showHoverMenu",
    value: function(i) {
      const o = i.track && i.track.getMouseOverHtml ? i.track.getMouseOverHtml(i.relTrackX, i.relTrackY) : "";
      if (i.track !== this.prevMouseHoverTrack && this.prevMouseHoverTrack && this.prevMouseHoverTrack.stopHover && this.prevMouseHoverTrack.stopHover(), this.prevMouseHoverTrack = i.track, this.zooming)
        return;
      const a = o && o.length ? [1] : [];
      let s = Wt("body").selectAll(".track-mouseover-menu").data(a);
      s.exit().remove(), s.enter().append("div").classed("track-mouseover-menu", true).classed(Gh["track-mouseover-menu"], true), s = Wt("body").selectAll(".track-mouseover-menu");
      const l = vr(i.origEvt, Wt("body").node()), u = [l[0] - window.scrollX, l[1] - window.scrollY];
      if (s.style("left", `${u[0]}px`).style("top", `${u[1]}px`), !s.node())
        return;
      const c = s.node().getBoundingClientRect();
      c.x + c.width > window.innerWidth && s.style("left", `${u[0] - c.width}px`), c.y + c.height > window.innerHeight && s.style("top", `${u[1] - c.height}px`), s.html(o);
    }
    /**
     * Hide the hover menu when e.g. the user starts zooming
     */
  }, {
    key: "hideHoverMenu",
    value: function() {
      Wt("body").selectAll(".track-mouseover-menu").remove();
    }
    /**
     * Close the custom dialog  (e.g. when the close button is clicked)
     */
  }, {
    key: "closeCustomDialog",
    value: function() {
      this.setState((i) => ({
        customDialog: null
      }));
    }
    /**
     * Handle internally broadcasted click events
     */
  }, {
    key: "appClickHandler",
    value: function(i) {
      this.apiPublish("click", i);
    }
    /** Handle click events on the canvas. The canvas is preferrable
     * to the top level div because the canvas's events aren't forwarded
     * so we only receive one click event
     */
  }, {
    key: "canvasClickHandler",
    value: function(i) {
      const o = i.nativeEvent || i, a = o.clientX, s = o.clientY, l = this.getTiledPlotAtPosition(a, s), u = vr(o, this.topDiv);
      u[1] += this.scrollTop;
      const c = l ? l.listTracksAtPosition(u[0], u[1], true).map((v) => v.originalTrack || v) : [], f = c.find((v) => !v.isAugmentationTrack), h = f ? [u[0] - f.position[0], u[1] - f.position[1]] : u, d = f && f.flipText ? h[1] : h[0], p = f && f.flipText ? h[0] : h[1];
      for (const v of this.iterateOverTracks()) {
        const _ = Om(this.tiledPlots, v.viewId, v.trackId);
        _.respondsToPosition(u[0], u[1]) || _.clickOutside();
      }
      const m = [];
      for (const v of c)
        if (v.childTracks) {
          for (const _ of v.childTracks)
            m.push({
              trackUid: _.context.trackUid,
              viewUid: _.context.viewUid,
              trackType: _.context.trackType,
              data: _.click(d, p, i)
            });
          m.push({
            trackUid: v.context.trackUid,
            viewUid: v.context.viewUid,
            trackType: v.context.trackType,
            data: {
              type: "generic",
              event: i
            }
          });
        } else
          m.push({
            trackUid: v.context.trackUid,
            viewUid: v.context.viewUid,
            trackType: v.context.trackType,
            data: v.click(d, p, i)
          });
      const g = [];
      m.forEach((v, _) => {
        const y = Om(this.tiledPlots, v.viewUid, v.trackUid);
        if (typeof y.clickDialog == "function") {
          const b = y.clickDialog();
          b && g.push(b);
        }
      }), g.length > 0 && this.setState((v) => ({
        customDialog: g
      })), this.pubSub.publish("app.click", m);
    }
    /**
     * Handle mousemove and zoom events.
     */
  }, {
    key: "mouseMoveZoomHandler",
    value: function(i) {
      this.apiPublish("mouseMoveZoom", i);
    }
    /**
     * Handle gene search events.
     */
  }, {
    key: "geneSearchHandler",
    value: function(i) {
      this.apiPublish("geneSearch", i);
    }
    /**
     * Handle mousedown events/
     */
  }, {
    key: "mouseDownHandler",
    value: function(i) {
    }
  }, {
    key: "onScrollHandler",
    value: function() {
      this.props.options.sizeMode === vm && (this.scrollTop = this.scrollContainer.scrollTop, this.pixiStage.y = -this.scrollTop, this.pubSub.publish("app.scroll", this.scrollTop), this.animate());
    }
  }, {
    key: "setTrackValueScaleLimits",
    value: function(i, o, a, s) {
      const l = Om(this.tiledPlots, i, o);
      if (!l) {
        console.warn(`Could't find track: ${o}`);
        return;
      }
      l.setFixedValueScaleMin && l.setFixedValueScaleMax ? (l.setFixedValueScaleMin(a), l.setFixedValueScaleMax(s), l.rerender(l.options, true), l.animate()) : console.warn("Track doesn't support fixed value scales.");
    }
  }, {
    key: "setChromInfo",
    value: function(i, o) {
      Hs(i, (a) => {
        this.chromInfo = a, o();
      }, this.pubSub);
    }
  }, {
    key: "onMouseLeaveHandler",
    value: function() {
      this.pubSub.publish("app.mouseLeave"), this.hideHoverMenu(), this.animate();
    }
  }, {
    key: "onBlurHandler",
    value: function() {
      this.animate();
    }
  }, {
    key: "isZoomFixed",
    value: function(i) {
      return this.props.zoomFixed || this.props.options.zoomFixed || this.state.viewConfig.zoomFixed || this.props.options.sizeMode === vm || i && i.zoomFixed;
    }
    /**
     * Handle trackDimensionsModified events
     * settings.viewId = id of the view
     * settings.trackId = id of the track
     * settings.height = new height of the track or undefined if current height should remain
     * settings.width = new width of the track or undefined if current width should remain
     */
  }, {
    key: "trackDimensionsModifiedHandler",
    value: function(i) {
      const o = this.state.views[i.viewId];
      if (!o)
        return;
      const a = Zi(o.tracks, i.trackId);
      a && (i.height !== void 0 && (a.height = i.height), i.width !== void 0 && (a.width = i.width), this.adjustLayoutToTrackSizes(o), this.setState((s) => ({
        views: s.views
      })));
    }
  }, {
    key: "wheelHandler",
    value: function(i) {
      if (this.state.modal || this.props.options.sizeMode === vm)
        return;
      const o = i.nativeEvent || i, a = i.target === this.canvasElement;
      if (!jV(o.target, this.topDiv) || this.isZoomFixed())
        return;
      const s = o.clientX, l = o.clientY, u = this.getTiledPlotAtPosition(s, l);
      if (this.apiStack.wheel && this.apiStack.wheel.length > 0) {
        const c = vr(o, this.topDiv);
        c[1] += this.scrollTop;
        const f = u ? u.listTracksAtPosition(c[0], c[1], true).map((m) => m.originalTrack || m) : [], h = f.find((m) => !m.isAugmentationTrack), d = h ? [c[0] - h.position[0], c[1] - h.position[1]] : c, p = {
          x: c[0],
          y: c[1],
          relTrackX: h && h.flipText ? d[1] : d[0],
          relTrackY: h && h.flipText ? d[0] : d[1],
          track: h,
          origEvt: o,
          sourceUid: this.uid,
          hoveredTracks: f,
          noHoveredTracks: f.length === 0
        };
        this.apiPublish("wheel", p);
      }
      if (o.forwarded || a) {
        i.stopPropagation(), i.preventDefault();
        return;
      }
      if (i.preventDefault(), u) {
        const {
          trackRenderer: c
        } = u;
        o.forwarded = true, o && (M0(o, c.eventTracker), o.preventDefault());
      }
    }
  }, {
    key: "render",
    value: function() {
      this.tiledAreasDivs = {}, this.tiledAreas = import_react.default.createElement("div", {
        className: Gh["tiled-area"]
      }), this.mounted && (this.tiledAreas = mr(this.state.views).map((c) => {
        const f = c.uid === this.state.addTrackPositionMenuUid ? this.state.addTrackPositionMenuPosition : null;
        let h = null;
        if (this.state.chooseViewHandler) {
          let g = "transparent";
          this.state.mouseOverOverlayUid === c.uid && (g = "green"), h = import_react.default.createElement("div", {
            className: "tiled-plot-overlay",
            onClick: () => this.state.chooseViewHandler(c.uid),
            onMouseEnter: () => this.handleOverlayMouseEnter(c.uid),
            onMouseLeave: () => this.handleOverlayMouseLeave(c.uid),
            onMouseMove: () => this.handleOverlayMouseEnter(c.uid),
            style: {
              position: "absolute",
              width: "100%",
              height: "100%",
              background: g,
              opacity: 0.3,
              zIndex: 1
            }
          });
        }
        const d = import_react.default.createElement(
          Met,
          {
            key: `tp${c.uid}`,
            ref: (g) => {
              this.tiledPlots[c.uid] = g;
            },
            addTrackPosition: this.state.addTrackPositionView === c.uid ? this.state.addTrackPosition : null,
            addTrackPositionMenuPosition: f,
            canvasElement: this.state.canvasElement,
            chooseTrackHandler: this.state.chooseTrackHandler ? (g) => this.state.chooseTrackHandler(c.uid, g) : null,
            customDialog: this.state.customDialog,
            closeCustomDialog: () => this.closeCustomDialog(),
            chromInfoPath: c.chromInfoPath,
            disableTrackMenu: this.isTrackMenuDisabled(),
            draggingHappening: this.state.draggingHappening !== null,
            editable: this.isEditable(),
            getLockGroupExtrema: (g) => this.getLockGroupExtrema(c.uid, g),
            initialXDomain: c.initialXDomain,
            initialYDomain: c.initialYDomain,
            isShowGlobalMousePosition: this.isShowGlobalMousePosition,
            isValueScaleLocked: (g) => this.isValueScaleLocked(c.uid, g),
            marginBottom: this.viewMarginBottom,
            marginLeft: this.viewMarginLeft,
            marginRight: this.viewMarginRight,
            marginTop: this.viewMarginTop,
            metaTracks: c.metaTracks,
            mouseTool: this.state.mouseTool,
            onChangeTrackData: (g, v) => this.handleChangeTrackData(c.uid, g, v),
            onChangeTrackType: (g, v) => this.handleChangeTrackType(c.uid, g, v),
            onCloseTrack: (g) => this.handleCloseTrack(c.uid, g),
            onDataDomainChanged: (g, v) => this.handleDataDomainChanged(c.uid, g, v),
            onLockValueScale: (g) => this.handleLockValueScale(c.uid, g),
            onMouseMoveZoom: this.mouseMoveZoomHandler.bind(this),
            onNewTilesLoaded: (g) => this.handleNewTilesLoaded(c.uid, g),
            onNoTrackAdded: this.handleNoTrackAdded.bind(this),
            onRangeSelection: this.rangeSelectionHandler.bind(this),
            onResizeTrack: this.triggerViewChangeDb,
            onScalesChanged: (g, v) => this.handleScalesChanged(c.uid, g, v),
            onTrackOptionsChanged: (g, v) => this.handleTrackOptionsChanged(c.uid, g, v),
            onTrackPositionChosen: this.handleTrackPositionChosen.bind(this),
            onTracksAdded: (g, v, _) => this.handleTracksAdded(c.uid, g, v, _),
            onUnlockValueScale: (g) => this.handleUnlockValueScale(c.uid, g),
            onValueScaleChanged: (g) => this.syncValueScales(c.uid, g),
            overlays: c.overlays,
            paddingBottom: this.viewPaddingBottom,
            paddingLeft: this.viewPaddingLeft,
            paddingRight: this.viewPaddingRight,
            paddingTop: this.viewPaddingTop,
            pixiRenderer: this.pixiRenderer,
            pixiStage: this.pixiStage,
            pluginDataFetchers: this.pluginDataFetchers,
            pluginTracks: this.pluginTracks,
            rangeSelection1dSize: this.state.rangeSelection1dSize,
            rangeSelectionToInt: this.state.rangeSelectionToInt,
            registerDraggingChangedListener: (g) => this.addDraggingChangedListener(c.uid, c.uid, g),
            removeDraggingChangedListener: (g) => this.removeDraggingChangedListener(c.uid, c.uid, g),
            setCentersFunction: (g) => {
              this.setCenters[c.uid] = g;
            },
            svgElement: this.state.svgElement,
            tracks: c.tracks,
            trackSourceServers: this.state.viewConfig.trackSourceServers,
            uid: c.uid,
            verticalMargin: this.verticalMargin,
            viewOptions: c.options,
            xDomainLimits: c.xDomainLimits,
            yDomainLimits: c.yDomainLimits,
            zoomable: !this.isZoomFixed(c),
            zoomLimits: this.calculateZoomLimits(c, c.initialXDomain),
            zoomToDataExtentOnInit: () => this.zoomToDataExtentOnInit.has(c.uid)
          }
        ), p = (g, v) => c.genomePositionSearchBox ? import_react.default.createElement(
          btt,
          {
            key: `gpsb${c.uid}`,
            ref: (_) => {
              this.genomePositionSearchBoxes[c.uid] = _;
            },
            autocompleteId: c.genomePositionSearchBox.autocompleteId,
            autocompleteServer: c.genomePositionSearchBox.autocompleteServer,
            chromInfoId: c.genomePositionSearchBox.chromInfoId,
            chromInfoPath: c.genomePositionSearchBox.chromInfoPath,
            chromInfoServer: c.genomePositionSearchBox.chromInfoServer,
            hideAvailableAssemblies: c.genomePositionSearchBox.hideAvailableAssemblies,
            isFocused: g,
            onFocus: v,
            onGeneSearch: this.geneSearchHandler.bind(this),
            onSelectedAssemblyChanged: (_, y, b) => this.handleSelectedAssemblyChanged(c.uid, _, y, b),
            registerViewportChangedListener: (_) => this.addScalesChangedListener(c.uid, c.uid, _),
            removeViewportChangedListener: () => this.removeScalesChangedListener(c.uid, c.uid),
            setCenters: (_, y, b, T) => this.setCenters[c.uid](_, y, b, false, T),
            trackSourceServers: this.state.viewConfig.trackSourceServers,
            twoD: !!(c.tracks.left.length || c.tracks.right.length || c.tracks.center.length)
          }
        ) : null, m = this.isEditable() && !this.isViewHeaderDisabled() && !this.state.viewConfig.hideHeader ? import_react.default.createElement(qtt, {
          ref: (g) => {
            this.viewHeaders[c.uid] = g;
          },
          getGenomePositionSearchBox: p,
          isGenomePositionSearchBoxVisible: c.genomePositionSearchBox && c.genomePositionSearchBox.visible,
          mouseTool: this.state.mouseTool,
          onAddView: () => this.handleAddView(c),
          onClearView: () => this.handleClearView(c.uid),
          onCloseView: () => this.handleCloseView(c.uid),
          onEditViewConfig: this.handleEditViewConfigBound,
          onExportPNG: this.handleExportPNG.bind(this),
          onExportSVG: this.handleExportSVG.bind(this),
          onExportViewsAsJSON: this.handleExportViewAsJSON.bind(this),
          onExportViewsAsLink: this.handleExportViewsAsLink.bind(this),
          onLockLocation: (g) => this.handleYankFunction(g, this.handleLocationLockChosen.bind(this)),
          onLockZoom: (g) => this.handleYankFunction(g, this.handleZoomLockChosen.bind(this)),
          onLockZoomAndLocation: (g) => this.handleYankFunction(g, (v, _) => {
            this.handleZoomLockChosen(v, _), this.handleLocationLockChosen(v, _);
          }),
          onProjectViewport: this.handleProjectViewport.bind(this),
          onTakeAndLockZoomAndLocation: (g) => {
            this.handleYankFunction(g, (v, _) => {
              this.handleZoomYanked(v, _), this.handleLocationYanked(v, _), this.handleZoomLockChosen(v, _), this.handleLocationLockChosen(v, _);
            });
          },
          onTogglePositionSearchBox: this.handleTogglePositionSearchBox.bind(this),
          onTrackPositionChosen: (g) => this.handleTrackPositionChosen(c.uid, g),
          onUnlockLocation: (g) => this.handleUnlock(g, this.locationLocks),
          onUnlockZoom: (g) => this.handleUnlock(g, this.zoomLocks),
          onUnlockZoomAndLocation: (g) => {
            this.handleUnlock(g, this.zoomLocks), this.handleUnlock(g, this.locationLocks);
          },
          onViewOptionsChanged: (g) => this.handleViewOptionsChanged(c.uid, g),
          onYankLocation: (g) => this.handleYankFunction(g, this.handleLocationYanked.bind(this)),
          onYankZoom: (g) => this.handleYankFunction(g, this.handleZoomYanked.bind(this)),
          onYankZoomAndLocation: (g) => this.handleYankFunction(g, (v, _) => {
            this.handleZoomYanked(v, _), this.handleLocationYanked(v, _);
          }),
          onZoomToData: (g) => this.handleZoomToData(g),
          viewUid: c.uid
        }) : null;
        return import_react.default.createElement("div", {
          key: c.uid,
          ref: (g) => {
            this.tiledAreasDivs[c.uid] = g;
          },
          className: Gh["tiled-area"]
        }, m, d, h);
      }));
      let i = this.mounted ? Object.values(this.state.views).filter((c) => c.layout).map((c) => c.layout) : [];
      i = JSON.parse(JSON.stringify(i));
      const o = this.isEditable() ? gV : 0, a = this.isEditable() ? vV : 0, s = +this.props.options.containerPaddingX >= 0 ? +this.props.options.containerPaddingX : o, l = +this.props.options.containerPaddingY >= 0 ? +this.props.options.containerPaddingY : a, u = import_react.default.createElement(
        mfe,
        {
          ref: (c) => {
            this.gridLayout = c;
          },
          cols: 12,
          containerPadding: [s, l],
          draggableHandle: `.${po["multitrack-header-grabber"]}`,
          isDraggable: this.isEditable(),
          isResizable: this.isEditable(),
          layout: i,
          margin: this.isEditable() ? [10, 10] : [0, 0],
          measureBeforeMount: false,
          onBreakpointChange: this.onBreakpointChange.bind(this),
          onDragStart: this.handleDragStart.bind(this),
          onDragStop: this.handleDragStop.bind(this),
          onLayoutChange: this.handleLayoutChange.bind(this),
          onResize: this.resizeHandler.bind(this),
          rowHeight: this.state.rowHeight,
          useCSSTransforms: this.mounted,
          verticalCompact: this.state.viewConfig.compactLayout,
          width: this.state.width
        },
        this.tiledAreas
      );
      return import_react.default.createElement("div", {
        key: this.uid,
        ref: (c) => {
          this.topDiv = c;
        },
        className: nr("higlass", {
          "higlass-dark-theme": this.theme === wr,
          "higlass-container-overflow": this.props.options.sizeMode === $G || this.props.options.sizeMode === vm
        }),
        onMouseLeave: this.onMouseLeaveHandlerBound,
        onMouseMove: this.mouseMoveHandlerBound
      }, import_react.default.createElement(wNe, {
        value: this.pubSub
      }, import_react.default.createElement(Z9e, {
        value: this.modal
      }, import_react.default.createElement(dNe, {
        value: this.theme
      }, this.state.modal, import_react.default.createElement("canvas", {
        key: this.uid,
        ref: (c) => {
          this.canvasElement = c;
        },
        onClick: this.canvasClickHandlerBound,
        className: Gh["higlass-canvas"]
      }), import_react.default.createElement("div", {
        ref: (c) => {
          this.scrollContainer = c;
        },
        className: nr("higlass-scroll-container", {
          "higlass-scroll-container-overflow": this.props.options.sizeMode === $G,
          "higlass-scroll-container-scroll": this.props.options.sizeMode === vm
        }),
        onScroll: this.onScrollHandlerBound
      }, import_react.default.createElement("div", {
        ref: (c) => {
          this.divDrawingSurface = c;
        },
        className: nr("higlass-drawing-surface", Gh["higlass-drawing-surface"])
      }, u), import_react.default.createElement("svg", {
        ref: (c) => {
          this.svgElement = c;
        },
        className: Gh["higlass-svg"],
        style: {
          // inline the styles so they aren't overriden by other css
          // on the web page
          position: "absolute",
          width: "100%",
          height: "100%",
          left: 0,
          top: 0,
          pointerEvents: "none"
        }
      }))))));
    }
  }]), r;
}(import_react.default.Component);
My.defaultProps = {
  options: {},
  zoomFixed: false,
  compactLayout: true
};
My.propTypes = {
  getApi: L.func,
  options: L.object,
  viewConfig: L.oneOfType([L.string, L.object]).isRequired,
  zoomFixed: L.bool,
  compactLayout: L.bool
};
function got(e12, t) {
  if (!(e12 instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function HG(e12, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || false, n.configurable = true, "value" in n && (n.writable = true), Object.defineProperty(e12, yot(n.key), n);
  }
}
function vot(e12, t, r) {
  return t && HG(e12.prototype, t), r && HG(e12, r), Object.defineProperty(e12, "prototype", { writable: false }), e12;
}
function yot(e12) {
  var t = _ot(e12, "string");
  return typeof t == "symbol" ? t : String(t);
}
function _ot(e12, t) {
  if (typeof e12 != "object" || e12 === null)
    return e12;
  var r = e12[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e12, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e12);
}
function bot(e12, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e12.prototype = Object.create(t && t.prototype, { constructor: { value: e12, writable: true, configurable: true } }), Object.defineProperty(e12, "prototype", { writable: false }), t && lD(e12, t);
}
function lD(e12, t) {
  return lD = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, lD(e12, t);
}
function Tot(e12) {
  var t = wot();
  return function() {
    var n = ME(e12), i;
    if (t) {
      var o = ME(this).constructor;
      i = Reflect.construct(n, arguments, o);
    } else
      i = n.apply(this, arguments);
    return Eot(this, i);
  };
}
function Eot(e12, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return Sot(e12);
}
function Sot(e12) {
  if (e12 === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e12;
}
function wot() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return false;
  if (typeof Proxy == "function")
    return true;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), true;
  } catch {
    return false;
  }
}
function ME(e12) {
  return ME = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, ME(e12);
}
var Aot = (e12, [t, r, n, i], o) => {
  o.options.colorbarPosition || (o.options.colorbarPosition = "hidden"), o.options.labelPosition || (o.options.labelPosition = "hidden");
  const a = "arbitary-id", l = Pot(e12, {
    editable: false,
    zoomFixed: false,
    views: [{
      uid: a,
      initialXDomain: [t, r],
      initialYDomain: [n, i],
      tracks: {
        center: [o]
      },
      layout: {
        w: 12,
        h: 12,
        x: 0,
        y: 0,
        moved: false,
        static: false
      }
    }]
  }, {
    sizeMode: "bounded"
  });
  return {
    id: a,
    hgApi: l
  };
};
var Oot = function(e12) {
  bot(r, e12);
  var t = Tot(r);
  function r(n) {
    var i;
    return got(this, r), i = t.call(this, n), i.id = `id-${Math.random()}`, i;
  }
  return vot(r, [{
    key: "componentDidMount",
    value: function() {
      this.initTrackViewer();
    }
  }, {
    key: "shouldComponentUpdate",
    value: function(i) {
      const {
        x: o,
        y: a,
        width: s,
        height: l
      } = i;
      return this.zoomTo(o, a, s, l), false;
    }
  }, {
    key: "initTrackViewer",
    value: function() {
      const {
        trackConfig: i,
        x: o,
        y: a,
        width: s,
        height: l
      } = this.props, u = document.getElementById(this.id), {
        id: c,
        hgApi: f
      } = Aot(u, [o, o + s, a, a + l], i);
      this.viewUid = c, this.viewer = f;
    }
    /**
     * Zoom to a particular position.
     *
     * @param  {Number}  x       Left side of viewport
     * @param  {Number}  y       Top side of viewport
     * @param  {Number}  width   Width of viewport
     * @param  {Number}  height  Height of viewport
     */
  }, {
    key: "zoomTo",
    value: function(i, o, a, s) {
      this.viewer.zoomTo(this.viewUid, i, i + a, o, o + s);
    }
  }, {
    key: "render",
    value: function() {
      return import_react.default.createElement("div", {
        id: this.id,
        style: {
          height: "100%",
          width: "100%"
        }
      });
    }
  }]), r;
}(import_react.default.Component);
Oot.propTypes = {
  trackConfig: L.object,
  width: L.number,
  height: L.number,
  x: L.number,
  y: L.number
};
var Iot = (e12, t, r) => {
  const n = import_react.default.createRef();
  return import_react_dom.default.render(import_react.default.createElement(My, {
    ref: n,
    options: r || {},
    viewConfig: t
  }), e12), n.current;
};
var Pot = (e12, t, r) => Iot(e12, t, r).api;
export {
  Hs as ChromosomeInfo,
  My as HiGlassComponent,
  Oot as HiGlassTrackComponent,
  rN as getTrackObjectFromHGC,
  xq as mountHGComponent,
  Zee as schema,
  Aot as trackViewer,
  aJ as version,
  Pot as viewer,
  rM as waitForJsonComplete,
  tT as waitForTilesLoaded,
  Cq as waitForTransitionsFinished
};
/*! Bundled license information:

vitessce/dist/higlass-e9622d39.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)
  (*!
   * @pixi/polyfill - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/polyfill is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/settings - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/settings is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*! https://mths.be/punycode v1.3.2 by @mathias *)
  (*!
   * @pixi/constants - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/constants is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/utils - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/utils is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/math - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/math is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/display - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/display is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
  (*!
   * @pixi/accessibility - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/accessibility is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/ticker - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/ticker is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/interaction - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/interaction is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/runner - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/runner is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/core - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/core is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/app - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/app is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/extract - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/extract is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * resource-loader - v3.0.1
   * https://github.com/pixijs/pixi-sound
   * Compiled Tue, 02 Jul 2019 14:06:18 UTC
   *
   * resource-loader is licensed under the MIT license.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/loaders - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/loaders is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/particles - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/particles is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/graphics - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/graphics is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/sprite - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/sprite is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/text - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/text is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/prepare - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/prepare is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/spritesheet - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/spritesheet is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/sprite-tiling - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/sprite-tiling is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/mesh - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/mesh is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/text-bitmap - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/text-bitmap is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/filter-alpha - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/filter-alpha is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/filter-blur - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/filter-blur is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/filter-color-matrix - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/filter-color-matrix is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/filter-displacement - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/filter-displacement is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/filter-fxaa - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/filter-fxaa is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/filter-noise - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/filter-noise is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/mixin-cache-as-bitmap - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/mixin-get-child-by-name - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/mixin-get-child-by-name is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/mixin-get-global-position - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/mixin-get-global-position is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/mesh-extras - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/mesh-extras is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * @pixi/sprite-animated - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * @pixi/sprite-animated is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
   * pixi.js - v5.3.12
   * Compiled Wed, 23 Mar 2022 18:34:28 UTC
   *
   * pixi.js is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)
  (*!
    Copyright (c) 2016 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  *)
  (*!
   * Determine if an object is a Buffer
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
  (*! react-checkbox-tree - v1.8.0 | 2022 *)
  (*! For license information please see index.browser.js.LICENSE.txt *)
  (**
   * Prism: Lightweight, robust, elegant syntax highlighting
   *
   * @license MIT <https://opensource.org/licenses/MIT>
   * @author Lea Verou <https://lea.verou.me>
   * @namespace
   * @public
   *)
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/
//# sourceMappingURL=higlass-e9622d39-XX2LP5RC.js.map
